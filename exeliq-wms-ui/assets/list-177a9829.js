import{_ as y,a as _,c as b,P as E,d as r,j as e,e as L,f as j,t as A,h as O,r as T,i as m,F as d,I as S,B as h,k as C,l as f,m as w,n as I,o as R,p as F}from"./index-7ade8dfe.js";import{A as N}from"./approveSelectedButton-3f31ac19.js";const{RangePicker:k}=F,Y=()=>{const t=y(),{tableProps:s,searchFormProps:a}=_({syncWithLocation:!0,onSearch:i=>{const o=[],{q:u,store_id:x,createdAt:n}=i;return o.push({field:"query",operator:"eq",value:u},{field:"store_id",operator:"eq",value:x},{field:"createdAt",operator:"gte",value:n?n[0].toISOString():void 0},{field:"createdAt",operator:"lte",value:n?n[1].toISOString():void 0}),o}}),[l,c]=b.useState([]),{mutate:p,isLoading:g}=E(),q=()=>{p({resource:"requisitionapprovals",ids:l.map(String)},{onSuccess:()=>{c([])}})},v={selectedRowKeys:l,onChange:i=>{c(i)},selections:[r.SELECTION_ALL,r.SELECTION_INVERT,r.SELECTION_NONE]};return e.jsxs(L,{canCreate:!1,headerProps:{subTitle:e.jsx(j,{children:e.jsx(N,{selectedKeys:l,isLoading:g,onApprove:q})})},children:[e.jsx(z,{formProps:a}),e.jsxs(r,{...s,rowSelection:v,rowKey:"id",pagination:{...s.pagination,showSizeChanger:!0},children:[e.jsx(r.Column,{title:t("table.s_no"),render:(i,o,u)=>{let x=1,n=10;return typeof s.pagination=="object"&&(x=s.pagination.current??1,n=s.pagination.pageSize??10),(x-1)*n+u+1}},"index"),e.jsx(r.Column,{dataIndex:"issued_date",title:t("requisitions.fields.issued_date"),sorter:!0,render:(i,o,u)=>A(i).format("YYYY-MM-DD")}),e.jsx(r.Column,{dataIndex:"department",title:t("requisitions.fields.department"),sorter:!0}),e.jsx(r.Column,{dataIndex:"order_no",title:t("requisitions.fields.order_no"),sorter:!0}),e.jsx(r.Column,{dataIndex:"status",title:t("requisitions.fields.status"),sorter:!0}),e.jsx(r.Column,{dataIndex:"approved",title:t("containers.fields.approved"),sorter:!0}),e.jsx(r.Column,{dataIndex:["store","name"],title:t("requisitions.fields.store"),sorter:!0}),e.jsx(r.Column,{title:t("table.actions"),dataIndex:"actions",render:(i,o)=>e.jsx(j,{children:e.jsx(O,{resource:"requisitions",hideText:!0,size:"small",recordItemId:o.id})})})]})]})},z=({formProps:t})=>{const s=y(),[a,l]=T.useState(!0),c=()=>e.jsx(m,{title:e.jsx(d,{layout:"inline",...t,onFinish:t==null?void 0:t.onFinish,children:e.jsx(d.Item,{name:"q",style:{width:"100%"},children:e.jsx(S.Search,{placeholder:s("filter.placeholders.query"),enterButton:s("filter.buttons.search")})})}),extra:e.jsx(h,{type:"text",onClick:()=>l(!a),children:a?e.jsx(C,{}):e.jsx(f,{})}),bodyStyle:{padding:"0px"}}),p=()=>e.jsx(m,{title:s("filter.title"),extra:e.jsx(h,{onClick:()=>l(!a),type:"text",children:a?e.jsx(C,{}):e.jsx(f,{})}),children:e.jsxs(d,{layout:"vertical",...t,children:[e.jsxs(w,{gutter:24,children:[e.jsx(I,{span:6,children:e.jsx(d.Item,{label:s("filter.fields.query"),name:"q",children:e.jsx(S,{placeholder:s("filter.placeholders.query"),prefix:e.jsx(R,{})})})}),e.jsx(I,{span:6,children:e.jsx(d.Item,{label:s("filter.fields.created_at"),name:"createdAt",children:e.jsx(k,{})})})]}),e.jsx(d.Item,{children:e.jsx(h,{htmlType:"submit",type:"primary",children:s("filter.buttons.search")})})]})});return a?c():p()};export{Y as RequisitionApprovalList,Y as default};
