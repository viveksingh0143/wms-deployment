import{ag as $V,aW as jV,r as dt,aa as zV,a1 as cb,bl as GV,bm as YV,bn as WV,bo as VV,bp as HV,bq as XV,br as UV,bs as qV,bt as ZV,bu as KV,bv as QV,bw as JV,bx as rl,by as G,bz as E,bA as X,bB as vt,bC as Ct,bD as R,bE as Ri,bF as Bi,bG as tH,bH as $E,bI as jE,bJ as Fc,bK as eH,bL as Tl,bM as Un,bN as zE,bO as nH,bP as rH,bQ as iH,bR as K2,bS as fd,bT as hd,bU as aH,bV as oH,bW as sH,bX as lH,bY as cH,bZ as Wy,b_ as ID,b$ as uH,c0 as FD,c1 as GE,c2 as DD,c3 as fH,c4 as hH,c5 as dH,c6 as YE,c7 as WE,c8 as Q2,c9 as lg,ca as RD,cb as pH,cc as vH,cd as gH,ce as BD,cf as J2,cg as yH,ch as ND,ci as mH,cj as Vy,ck as $D,cl as xH,cm as bH,cn as wH,co as tS,cp as jD,c as ge,cq as n1,cr as SH,cs as VE,ct as yn,cu as Hy,cv as r1,j as hn,e as OH,cw as MH,m as HE,n as i1,_ as eS,cx as zD,i as nS,cy as AH}from"./index-7ade8dfe.js";const Xy=Object.freeze(Object.defineProperty({__proto__:null,get Base(){return Gi},get Circle(){return Cet},get Ellipse(){return Pet},get Image(){return ket},get Line(){return _et},get Marker(){return Get},get Path(){return eO},get Polygon(){return qet},get Polyline(){return Zet},get Rect(){return Jet},get Text(){return tnt}},Symbol.toStringTag,{value:"Module"})),Uy=Object.freeze(Object.defineProperty({__proto__:null,get Base(){return mi},get Circle(){return snt},get Dom(){return lnt},get Ellipse(){return cnt},get Image(){return unt},get Line(){return fnt},get Marker(){return hnt},get Path(){return dnt},get Polygon(){return pnt},get Polyline(){return vnt},get Rect(){return ynt},get Text(){return wnt}},Symbol.toStringTag,{value:"Module"})),ip=(t,n,e,r,i)=>({backgroundColor:t,border:`${r.lineWidth}px ${r.lineType} ${n}`,[`${i}-icon`]:{color:e}}),EH=t=>{const{componentCls:n,motionDurationSlow:e,marginXS:r,marginSM:i,fontSize:a,fontSizeLG:o,lineHeight:s,borderRadiusLG:l,motionEaseInOutCirc:c,withDescriptionIconSize:u,colorText:f,colorTextHeading:h,withDescriptionPadding:d,defaultPadding:p}=t;return{[n]:Object.assign(Object.assign({},jV(t)),{position:"relative",display:"flex",alignItems:"center",padding:p,wordWrap:"break-word",borderRadius:l,[`&${n}-rtl`]:{direction:"rtl"},[`${n}-content`]:{flex:1,minWidth:0},[`${n}-icon`]:{marginInlineEnd:r,lineHeight:0},"&-description":{display:"none",fontSize:a,lineHeight:s},"&-message":{color:h},[`&${n}-motion-leave`]:{overflow:"hidden",opacity:1,transition:`max-height ${e} ${c}, opacity ${e} ${c},
        padding-top ${e} ${c}, padding-bottom ${e} ${c},
        margin-bottom ${e} ${c}`},[`&${n}-motion-leave-active`]:{maxHeight:0,marginBottom:"0 !important",paddingTop:0,paddingBottom:0,opacity:0}}),[`${n}-with-description`]:{alignItems:"flex-start",padding:d,[`${n}-icon`]:{marginInlineEnd:i,fontSize:u,lineHeight:0},[`${n}-message`]:{display:"block",marginBottom:r,color:h,fontSize:o},[`${n}-description`]:{display:"block",color:f}},[`${n}-banner`]:{marginBottom:0,border:"0 !important",borderRadius:0}}},TH=t=>{const{componentCls:n,colorSuccess:e,colorSuccessBorder:r,colorSuccessBg:i,colorWarning:a,colorWarningBorder:o,colorWarningBg:s,colorError:l,colorErrorBorder:c,colorErrorBg:u,colorInfo:f,colorInfoBorder:h,colorInfoBg:d}=t;return{[n]:{"&-success":ip(i,r,e,t,n),"&-info":ip(d,h,f,t,n),"&-warning":ip(s,o,a,t,n),"&-error":Object.assign(Object.assign({},ip(u,c,l,t,n)),{[`${n}-description > pre`]:{margin:0,padding:0}})}}},CH=t=>{const{componentCls:n,iconCls:e,motionDurationMid:r,marginXS:i,fontSizeIcon:a,colorIcon:o,colorIconHover:s}=t;return{[n]:{"&-action":{marginInlineStart:i},[`${n}-close-icon`]:{marginInlineStart:i,padding:0,overflow:"hidden",fontSize:a,lineHeight:`${a}px`,backgroundColor:"transparent",border:"none",outline:"none",cursor:"pointer",[`${e}-close`]:{color:o,transition:`color ${r}`,"&:hover":{color:s}}},"&-close-text":{color:o,transition:`color ${r}`,"&:hover":{color:s}}}}},PH=t=>[EH(t),TH(t),CH(t)],kH=$V("Alert",t=>[PH(t)],t=>({withDescriptionIconSize:t.fontSizeHeading3,defaultPadding:`${t.paddingContentVerticalSM}px 12px`,withDescriptionPadding:`${t.paddingMD}px ${t.paddingContentHorizontalLG}px`}));var _H=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};const LH={success:HV,info:XV,error:UV,warning:qV},IH=t=>{const{icon:n,prefixCls:e,type:r}=t,i=LH[r]||null;return n?WV(n,dt.createElement("span",{className:`${e}-icon`},n),()=>({className:cb(`${e}-icon`,{[n.props.className]:n.props.className})})):dt.createElement(i,{className:`${e}-icon`})},FH=t=>{const{isClosable:n,prefixCls:e,closeIcon:r,handleClose:i}=t,a=r===!0||r===void 0?dt.createElement(VV,null):r;return n?dt.createElement("button",{type:"button",onClick:i,className:`${e}-close-icon`,tabIndex:0},a):null},DH=t=>{const{description:n,prefixCls:e,message:r,banner:i,className:a,rootClassName:o,style:s,onMouseEnter:l,onMouseLeave:c,onClick:u,afterClose:f,showIcon:h,closable:d,closeText:p,closeIcon:v,action:g}=t,y=_H(t,["description","prefixCls","message","banner","className","rootClassName","style","onMouseEnter","onMouseLeave","onClick","afterClose","showIcon","closable","closeText","closeIcon","action"]),[m,x]=dt.useState(!1),b=dt.useRef(null),{getPrefixCls:w,direction:S,alert:O}=dt.useContext(zV),M=w("alert",e),[A,T]=kH(M),C=F=>{var B;x(!0),(B=t.onClose)===null||B===void 0||B.call(t,F)},P=dt.useMemo(()=>t.type!==void 0?t.type:i?"warning":"info",[t.type,i]),_=dt.useMemo(()=>p?!0:typeof d=="boolean"?d:v!==!1&&v!==null&&v!==void 0,[p,v,d]),k=i&&h===void 0?!0:h,I=cb(M,`${M}-${P}`,{[`${M}-with-description`]:!!n,[`${M}-no-icon`]:!k,[`${M}-banner`]:!!i,[`${M}-rtl`]:S==="rtl"},O==null?void 0:O.className,a,o,T),L=GV(y,{aria:!0,data:!0});return A(dt.createElement(YV,{visible:!m,motionName:`${M}-motion`,motionAppear:!1,motionEnter:!1,onLeaveStart:F=>({maxHeight:F.offsetHeight}),onLeaveEnd:f},F=>{let{className:B,style:D}=F;return dt.createElement("div",Object.assign({ref:b,"data-show":!m,className:cb(I,B),style:Object.assign(Object.assign(Object.assign({},O==null?void 0:O.style),s),D),onMouseEnter:l,onMouseLeave:c,onClick:u,role:"alert"},L),k?dt.createElement(IH,{description:n,icon:t.icon,prefixCls:M,type:P}):null,dt.createElement("div",{className:`${M}-content`},r?dt.createElement("div",{className:`${M}-message`},r):null,n?dt.createElement("div",{className:`${M}-description`},n):null),g?dt.createElement("div",{className:`${M}-action`},g):null,dt.createElement(FH,{isClosable:_,prefixCls:M,closeIcon:p||v,handleClose:C}))}))},GD=DH;let RH=function(t){ZV(e,t);var n=KV(e);function e(){var r;return QV(this,e),r=n.apply(this,arguments),r.state={error:void 0,info:{componentStack:""}},r}return JV(e,[{key:"componentDidCatch",value:function(i,a){this.setState({error:i,info:a})}},{key:"render",value:function(){const{message:i,description:a,children:o}=this.props,{error:s,info:l}=this.state,c=l&&l.componentStack?l.componentStack:null,u=typeof i>"u"?(s||"").toString():i,f=typeof a>"u"?c:a;return s?dt.createElement(GD,{type:"error",message:u,description:dt.createElement("pre",{style:{fontSize:"0.9em",overflowX:"auto"}},f)}):o}}]),e}(dt.Component);const BH=RH,YD=GD;YD.ErrorBoundary=BH;const NH=YD;var Yr=function(t){return t!==null&&typeof t!="function"&&isFinite(t.length)},Rs=function(t,n){return Yr(t)?t.indexOf(n)>-1:!1},Ln=function(t,n){if(!Yr(t))return t;for(var e=[],r=0;r<t.length;r++){var i=t[r];n(i,r)&&e.push(i)}return e},$H=function(t,n){return n===void 0&&(n=[]),Ln(t,function(e){return!Rs(n,e)})},jH={}.toString,as=function(t,n){return jH.call(t)==="[object "+n+"]"};const ut=function(t){return as(t,"Function")};var J=function(t){return t==null};const et=function(t){return Array.isArray?Array.isArray(t):as(t,"Array")},Qt=function(t){var n=typeof t;return t!==null&&n==="object"||n==="function"};function $(t,n){if(t){var e;if(et(t))for(var r=0,i=t.length;r<i&&(e=n(t[r],r),e!==!1);r++);else if(Qt(t)){for(var a in t)if(t.hasOwnProperty(a)&&(e=n(t[a],a),e===!1))break}}}var Su=Object.keys?function(t){return Object.keys(t)}:function(t){var n=[];return $(t,function(e,r){ut(t)&&r==="prototype"||n.push(r)}),n};function WD(t,n){var e=Su(n),r=e.length;if(J(t))return!r;for(var i=0;i<r;i+=1){var a=e[i];if(n[a]!==t[a]||!(a in t))return!1}return!0}var ub=function(t){return typeof t=="object"&&t!==null},sa=function(t){if(!ub(t)||!as(t,"Object"))return!1;if(Object.getPrototypeOf(t)===null)return!0;for(var n=t;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(t)===n};function Li(t,n){if(!et(t))return null;var e;if(ut(n)&&(e=n),sa(n)&&(e=function(i){return WD(i,n)}),e){for(var r=0;r<t.length;r+=1)if(e(t[r]))return t[r]}return null}function VD(t,n,e){e===void 0&&(e=0);for(var r=e;r<t.length;r++)if(n(t[r],r))return r;return-1}var zH=function(t,n){for(var e=null,r=0;r<t.length;r++){var i=t[r],a=i[n];if(!J(a)){et(a)?e=a[0]:e=a;break}}return e},Wr=function(t){if(!et(t))return[];for(var n=[],e=0;e<t.length;e++)n=n.concat(t[e]);return n};const Vr=function(t){if(et(t))return t.reduce(function(n,e){return Math.max(n,e)},t[0])},hi=function(t){if(et(t))return t.reduce(function(n,e){return Math.min(n,e)},t[0])};var HD=function(t){var n=t.filter(function(o){return!isNaN(o)});if(!n.length)return{min:0,max:0};if(et(t[0])){for(var e=[],r=0;r<t.length;r++)e=e.concat(t[r]);n=e}var i=Vr(n),a=hi(n);return{min:a,max:i}},GH=Array.prototype.splice,YH=function(n,e){if(!Yr(n))return[];for(var r=n?e.length:0,i=r-1;r--;){var a=void 0,o=e[r];(r===i||o!==a)&&(a=o,GH.call(n,o,1))}return n},Hn=function(t,n,e){if(!et(t)&&!sa(t))return t;var r=e;return $(t,function(i,a){r=n(r,i,a)}),r},WH=function(t,n){var e=[];if(!Yr(t))return e;for(var r=-1,i=[],a=t.length;++r<a;){var o=t[r];n(o,r,t)&&(e.push(o),i.push(r))}return YH(t,i),e};const pt=function(t){return as(t,"String")};function VH(t,n){var e;if(ut(n))e=function(i,a){return n(i)-n(a)};else{var r=[];pt(n)?r.push(n):et(n)&&(r=n),e=function(i,a){for(var o=0;o<r.length;o+=1){var s=r[o];if(i[s]>a[s])return 1;if(i[s]<a[s])return-1}return 0}}return t.sort(e),t}function il(t,n){n===void 0&&(n=new Map);var e=[];if(Array.isArray(t))for(var r=0,i=t.length;r<i;r++){var a=t[r];n.has(a)||(e.push(a),n.set(a,!0))}return e}const Ni=function(t,n){for(var e=[],r={},i=0;i<t.length;i++){var a=t[i],o=a[n];if(!J(o)){et(o)||(o=[o]);for(var s=0;s<o.length;s++){var l=o[s];r[l]||(e.push(l),r[l]=!0)}}}return e};function zr(t){if(Yr(t))return t[0]}function ln(t){if(Yr(t)){var n=t;return n[n.length-1]}}var rS=function(t,n){for(var e=0;e<t.length;e++)if(!n(t[e],e))return!1;return!0},qy=function(t,n){for(var e=0;e<t.length;e++)if(n(t[e],e))return!0;return!1},HH=Object.prototype.hasOwnProperty;function Gr(t,n){if(!n||!et(t))return{};for(var e={},r=ut(n)?n:function(s){return s[n]},i,a=0;a<t.length;a++){var o=t[a];i=r(o),HH.call(e,i)?e[i].push(o):e[i]=[o]}return e}function XD(t,n){if(!n)return{0:t};if(!ut(n)){var e=et(n)?n:n.replace(/\s+/g,"").split("*");n=function(r){for(var i="_",a=0,o=e.length;a<o;a++)i+=r[e[a]]&&r[e[a]].toString();return i}}return Gr(t,n)}const XH=function(t,n){if(!n)return[t];var e=XD(t,n),r=[];for(var i in e)r.push(e[i]);return r};var we=function(t,n,e){return t<n?n:t>e?e:t},a1=function(t,n){var e=n.toString(),r=e.indexOf(".");if(r===-1)return Math.round(t);var i=e.substr(r+1).length;return i>20&&(i=20),parseFloat(t.toFixed(i))},bt=function(t){return as(t,"Number")},UH=1e-5;function Cn(t,n,e){return e===void 0&&(e=UH),Math.abs(t-n)<e}const UD=function(t,n){if(et(t)){for(var e,r=-1/0,i=0;i<t.length;i++){var a=t[i],o=ut(n)?n(a):a[n];o>r&&(e=a,r=o)}return e}},qH=function(t,n){if(et(t)){for(var e,r=1/0,i=0;i<t.length;i++){var a=t[i],o=ut(n)?n(a):a[n];o<r&&(e=a,r=o)}return e}};var Zy=function(t,n){return(t%n+n)%n},ZH=Math.PI/180,Ky=function(t){return ZH*t};const Vo=function(t,n){return t.hasOwnProperty(n)};var Qy=Object.values?function(t){return Object.values(t)}:function(t){var n=[];return $(t,function(e,r){ut(t)&&r==="prototype"||n.push(e)}),n};const dd=function(t){return J(t)?"":t.toString()};var Ou=function(t){return dd(t).toLowerCase()};function qD(t,n){return!t||!n?t:t.replace(/\\?\{([^{}]+)\}/g,function(e,r){return e.charAt(0)==="\\"?e.slice(1):n[r]===void 0?"":n[r]})}var Cl=function(t){var n=dd(t);return n.charAt(0).toUpperCase()+n.substring(1)},KH={}.toString,QH=function(t){return KH.call(t).replace(/^\[object /,"").replace(/]$/,"")},Dc=function(t){return as(t,"Boolean")},ZD=function(t){return as(t,"Date")},KD=function(t){return t===null},JH=Object.prototype,tX=function(t){var n=t&&t.constructor,e=typeof n=="function"&&n.prototype||JH;return t===e},To=function(t){return t===void 0},QD=function(t){return t instanceof Element||t instanceof HTMLDocument};function eX(t){var n=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,16)};return n(t)}function nX(t){var n=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;n(t)}function o1(t,n){for(var e in n)n.hasOwnProperty(e)&&e!=="constructor"&&n[e]!==void 0&&(t[e]=n[e])}function Jt(t,n,e,r){return n&&o1(t,n),e&&o1(t,e),r&&o1(t,r),t}var er=function(t){if(typeof t!="object"||t===null)return t;var n;if(et(t)){n=[];for(var e=0,r=t.length;e<r;e++)typeof t[e]=="object"&&t[e]!=null?n[e]=er(t[e]):n[e]=t[e]}else{n={};for(var i in t)typeof t[i]=="object"&&t[i]!=null?n[i]=er(t[i]):n[i]=t[i]}return n};function JD(t,n,e){var r;return function(){var i=this,a=arguments,o=function(){r=null,e||t.apply(i,a)},s=e&&!r;clearTimeout(r),r=setTimeout(o,n),s&&t.apply(i,a)}}const Mu=function(t,n){if(!ut(t))throw new TypeError("Expected a function");var e=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var a=n?n.apply(this,r):r[0],o=e.cache;if(o.has(a))return o.get(a);var s=t.apply(this,r);return o.set(a,s),s};return e.cache=new Map,e};var rX=5;function tR(t,n,e,r){e=e||0,r=r||rX;for(var i in n)if(n.hasOwnProperty(i)){var a=n[i];a!==null&&sa(a)?(sa(t[i])||(t[i]={}),e<r?tR(t[i],a,e+1,r):t[i]=n[i]):et(a)?(t[i]=[],t[i]=t[i].concat(a)):a!==void 0&&(t[i]=a)}}var ot=function(t){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];for(var r=0;r<n.length;r+=1)tR(t,n[r]);return t},eR=function(t,n){if(!Yr(t))return-1;var e=Array.prototype.indexOf;if(e)return e.call(t,n);for(var r=-1,i=0;i<t.length;i++)if(t[i]===n){r=i;break}return r},iX=Object.prototype.hasOwnProperty;function Mr(t){if(J(t))return!0;if(Yr(t))return!t.length;var n=QH(t);if(n==="Map"||n==="Set")return!t.size;if(tX(t))return!Object.keys(t).length;for(var e in t)if(iX.call(t,e))return!1;return!0}var Ne=function(t,n){if(t===n)return!0;if(!t||!n||pt(t)||pt(n))return!1;if(Yr(t)||Yr(n)){if(t.length!==n.length)return!1;for(var e=!0,r=0;r<t.length&&(e=Ne(t[r],n[r]),!!e);r++);return e}if(ub(t)||ub(n)){var i=Object.keys(t),a=Object.keys(n);if(i.length!==a.length)return!1;for(var e=!0,r=0;r<i.length&&(e=Ne(t[i[r]],n[i[r]]),!!e);r++);return e}return!1},Ae=function(t,n){if(!Yr(t))return t;for(var e=[],r=0;r<t.length;r++){var i=t[r];e.push(n(i,r))}return e},aX=function(t){return t};const oX=function(t,n){n===void 0&&(n=aX);var e={};return Qt(t)&&!J(t)&&Object.keys(t).forEach(function(r){e[r]=n(t[r],r)}),e},z=function(t,n,e){for(var r=0,i=pt(n)?n.split("."):n;t&&r<i.length;)t=t[i[r++]];return t===void 0||r<i.length?e:t},an=function(t,n,e){var r=t,i=pt(n)?n.split("."):n;return i.forEach(function(a,o){o<i.length-1?(Qt(r[a])||(r[a]=bt(i[o+1])?[]:{}),r=r[a]):r[a]=e}),t};var sX=Object.prototype.hasOwnProperty;const iS=function(t,n){if(t===null||!sa(t))return{};var e={};return $(n,function(r){sX.call(t,r)&&(e[r]=t[r])}),e},Jy=function(t,n){return Hn(t,function(e,r,i){return n.includes(i)||(e[i]=r),e},{})},aS=function(t,n,e){var r,i,a,o,s=0;e||(e={});var l=function(){s=e.leading===!1?0:Date.now(),r=null,o=t.apply(i,a),r||(i=a=null)},c=function(){var u=Date.now();!s&&e.leading===!1&&(s=u);var f=n-(u-s);return i=this,a=arguments,f<=0||f>n?(r&&(clearTimeout(r),r=null),s=u,o=t.apply(i,a),r||(i=a=null)):!r&&e.trailing!==!1&&(r=setTimeout(l,f)),o};return c.cancel=function(){clearTimeout(r),s=0,r=i=a=null},c},lX=function(t){return Yr(t)?Array.prototype.slice.call(t):[]};var ap={};const os=function(t){return t=t||"g",ap[t]?ap[t]+=1:ap[t]=1,t+ap[t]},Co=function(){},Rc=function(t){return t};function mn(t){return J(t)?0:Yr(t)?t.length:Object.keys(t).length}var op;const sp=Mu(function(t,n){n===void 0&&(n={});var e=n.fontSize,r=n.fontFamily,i=n.fontWeight,a=n.fontStyle,o=n.fontVariant;return op||(op=document.createElement("canvas").getContext("2d")),op.font=[a,o,i,e+"px",r].join(" "),op.measureText(pt(t)?t:"").width},function(t,n){return n===void 0&&(n={}),rl([t],Qy(n)).join("")}),cX=function(t,n,e,r){r===void 0&&(r="...");var i=16,a=sp(r,e),o=pt(t)?t:dd(t),s=n,l=[],c,u;if(sp(t,e)<=n)return t;for(;c=o.substr(0,i),u=sp(c,e),!(u+a>s&&u>s);)if(l.push(c),s-=u,o=o.substr(i),!o)return l.join("");for(;c=o.substr(0,1),u=sp(c,e),!(u+a>s);)if(l.push(c),s-=u,o=o.substr(1),!o)return l.join("");return""+l.join("")+r};var uX=function(){function t(){this.map={}}return t.prototype.has=function(n){return this.map[n]!==void 0},t.prototype.get=function(n,e){var r=this.map[n];return r===void 0?e:r},t.prototype.set=function(n,e){this.map[n]=e},t.prototype.clear=function(){this.map={}},t.prototype.delete=function(n){delete this.map[n]},t.prototype.size=function(){return Object.keys(this.map).length},t}(),qe;(function(t){t.FORE="fore",t.MID="mid",t.BG="bg"})(qe||(qe={}));var at;(function(t){t.TOP="top",t.TOP_LEFT="top-left",t.TOP_RIGHT="top-right",t.RIGHT="right",t.RIGHT_TOP="right-top",t.RIGHT_BOTTOM="right-bottom",t.LEFT="left",t.LEFT_TOP="left-top",t.LEFT_BOTTOM="left-bottom",t.BOTTOM="bottom",t.BOTTOM_LEFT="bottom-left",t.BOTTOM_RIGHT="bottom-right",t.RADIUS="radius",t.CIRCLE="circle",t.NONE="none"})(at||(at={}));var gn;(function(t){t.AXIS="axis",t.GRID="grid",t.LEGEND="legend",t.TOOLTIP="tooltip",t.ANNOTATION="annotation",t.SLIDER="slider",t.SCROLLBAR="scrollbar",t.OTHER="other"})(gn||(gn={}));var xc={FORE:3,MID:2,BG:1},kt;(function(t){t.BEFORE_RENDER="beforerender",t.AFTER_RENDER="afterrender",t.BEFORE_PAINT="beforepaint",t.AFTER_PAINT="afterpaint",t.BEFORE_CHANGE_DATA="beforechangedata",t.AFTER_CHANGE_DATA="afterchangedata",t.BEFORE_CLEAR="beforeclear",t.AFTER_CLEAR="afterclear",t.BEFORE_DESTROY="beforedestroy",t.BEFORE_CHANGE_SIZE="beforechangesize",t.AFTER_CHANGE_SIZE="afterchangesize"})(kt||(kt={}));var Fo;(function(t){t.BEFORE_DRAW_ANIMATE="beforeanimate",t.AFTER_DRAW_ANIMATE="afteranimate",t.BEFORE_RENDER_LABEL="beforerenderlabel",t.AFTER_RENDER_LABEL="afterrenderlabel"})(Fo||(Fo={}));var dr;(function(t){t.MOUSE_ENTER="plot:mouseenter",t.MOUSE_DOWN="plot:mousedown",t.MOUSE_MOVE="plot:mousemove",t.MOUSE_UP="plot:mouseup",t.MOUSE_LEAVE="plot:mouseleave",t.TOUCH_START="plot:touchstart",t.TOUCH_MOVE="plot:touchmove",t.TOUCH_END="plot:touchend",t.TOUCH_CANCEL="plot:touchcancel",t.CLICK="plot:click",t.DBLCLICK="plot:dblclick",t.CONTEXTMENU="plot:contextmenu",t.LEAVE="plot:leave",t.ENTER="plot:enter"})(dr||(dr={}));var cg;(function(t){t.ACTIVE="active",t.INACTIVE="inactive",t.SELECTED="selected",t.DEFAULT="default"})(cg||(cg={}));var sc=["color","shape","size"],ae="_origin",XE=1,UE=1,qE=.25,nR={};function fX(t){var n=nR[t];if(!n)throw new Error("G engine '".concat(t,"' is not exist, please register it at first."));return n}function rR(t,n){nR[t]=n}function Gl(t,n,e){if(t){if(typeof t.addEventListener=="function")return t.addEventListener(n,e,!1),{remove:function(){t.removeEventListener(n,e,!1)}};if(typeof t.attachEvent=="function")return t.attachEvent("on"+n,e),{remove:function(){t.detachEvent("on"+n,e)}}}}var vf,s1,iR,fb;function hX(){vf=document.createElement("table"),s1=document.createElement("tr"),iR=/^\s*<(\w+|!)[^>]*>/,fb={tr:document.createElement("tbody"),tbody:vf,thead:vf,tfoot:vf,td:s1,th:s1,"*":document.createElement("div")}}function Do(t){vf||hX();var n=iR.test(t)&&RegExp.$1;(!n||!(n in fb))&&(n="*");var e=fb[n];t=typeof t=="string"?t.replace(/(^\s*)|(\s*$)/g,""):t,e.innerHTML=""+t;var r=e.childNodes[0];return r&&e.contains(r)&&e.removeChild(r),r}function xr(t,n,e){var r;try{r=window.getComputedStyle?window.getComputedStyle(t,null)[n]:t.style[n]}catch{}finally{r=r===void 0?e:r}return r}function dX(t,n){var e=xr(t,"height",n);return e==="auto"&&(e=t.offsetHeight),parseFloat(e)}function pX(t,n){var e=dX(t,n),r=parseFloat(xr(t,"borderTopWidth"))||0,i=parseFloat(xr(t,"paddingTop"))||0,a=parseFloat(xr(t,"paddingBottom"))||0,o=parseFloat(xr(t,"borderBottomWidth"))||0,s=parseFloat(xr(t,"marginTop"))||0,l=parseFloat(xr(t,"marginBottom"))||0;return e+r+o+i+a+s+l}function vX(t,n){var e=xr(t,"width",n);return e==="auto"&&(e=t.offsetWidth),parseFloat(e)}function gX(t,n){var e=vX(t,n),r=parseFloat(xr(t,"borderLeftWidth"))||0,i=parseFloat(xr(t,"paddingLeft"))||0,a=parseFloat(xr(t,"paddingRight"))||0,o=parseFloat(xr(t,"borderRightWidth"))||0,s=parseFloat(xr(t,"marginRight"))||0,l=parseFloat(xr(t,"marginLeft"))||0;return e+r+o+i+a+l+s}function Wn(t,n){if(t)for(var e in n)n.hasOwnProperty(e)&&(t.style[e]=n[e]);return t}function yX(t){var n=getComputedStyle(t);return{width:(t.clientWidth||parseInt(n.width,10))-parseInt(n.paddingLeft,10)-parseInt(n.paddingRight,10),height:(t.clientHeight||parseInt(n.height,10))-parseInt(n.paddingTop,10)-parseInt(n.paddingBottom,10)}}function ZE(t){return typeof t=="number"&&!isNaN(t)}function KE(t,n,e,r){var i=e,a=r;if(n){var o=yX(t);i=o.width?o.width:i,a=o.height?o.height:a}return{width:Math.max(ZE(i)?i:XE,XE),height:Math.max(ZE(a)?a:UE,UE)}}function mX(t){var n=t.parentNode;n&&n.removeChild(t)}var xX="*",Au=function(){function t(){this._events={}}return t.prototype.on=function(n,e,r){return this._events[n]||(this._events[n]=[]),this._events[n].push({callback:e,once:!!r}),this},t.prototype.once=function(n,e){return this.on(n,e,!0)},t.prototype.emit=function(n){for(var e=this,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var a=this._events[n]||[],o=this._events[xX]||[],s=function(l){for(var c=l.length,u=0;u<c;u++)if(l[u]){var f=l[u],h=f.callback,d=f.once;d&&(l.splice(u,1),l.length===0&&delete e._events[n],c--,u--),h.apply(e,r)}};s(a),s(o)},t.prototype.off=function(n,e){if(!n)this._events={};else if(!e)delete this._events[n];else{for(var r=this._events[n]||[],i=r.length,a=0;a<i;a++)r[a].callback===e&&(r.splice(a,1),i--,a--);r.length===0&&delete this._events[n]}return this},t.prototype.getEvents=function(){return this._events},t}(),oS=function(t){G(n,t);function n(e){var r=t.call(this)||this;r.destroyed=!1;var i=e.visible,a=i===void 0?!0:i;return r.visible=a,r}return n.prototype.show=function(){var e=this.visible;e||this.changeVisible(!0)},n.prototype.hide=function(){var e=this.visible;e&&this.changeVisible(!1)},n.prototype.destroy=function(){this.off(),this.destroyed=!0},n.prototype.changeVisible=function(e){this.visible!==e&&(this.visible=e)},n}(Au),Bf=`	
\v\f\r   ᠎             　\u2028\u2029`,bX=new RegExp("([a-z])["+Bf+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+Bf+"]*,?["+Bf+"]*)+)","ig"),wX=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+Bf+"]*,?["+Bf+"]*","ig"),lc=function(t){if(!t)return null;if(et(t))return t;var n={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},e=[];return String(t).replace(bX,function(r,i,a){var o=[],s=i.toLowerCase();if(a.replace(wX,function(l,c){c&&o.push(+c)}),s==="m"&&o.length>2&&(e.push([i].concat(o.splice(0,2))),s="l",i=i==="m"?"l":"L"),s==="o"&&o.length===1&&e.push([i,o[0]]),s==="r")e.push([i].concat(o));else for(;o.length>=n[s]&&(e.push([i].concat(o.splice(0,n[s]))),!!n[s]););return t}),e},hb=function(t,n){for(var e=[],r=0,i=t.length;i-2*!n>r;r+=2){var a=[{x:+t[r-2],y:+t[r-1]},{x:+t[r],y:+t[r+1]},{x:+t[r+2],y:+t[r+3]},{x:+t[r+4],y:+t[r+5]}];n?r?i-4===r?a[3]={x:+t[0],y:+t[1]}:i-2===r&&(a[2]={x:+t[0],y:+t[1]},a[3]={x:+t[2],y:+t[3]}):a[0]={x:+t[i-2],y:+t[i-1]}:i-4===r?a[3]=a[2]:r||(a[0]={x:+t[r],y:+t[r+1]}),e.push(["C",(-a[0].x+6*a[1].x+a[2].x)/6,(-a[0].y+6*a[1].y+a[2].y)/6,(a[1].x+6*a[2].x-a[3].x)/6,(a[1].y+6*a[2].y-a[3].y)/6,a[2].x,a[2].y])}return e},lp=function(t,n,e,r,i){var a=[];if(i===null&&r===null&&(r=e),t=+t,n=+n,e=+e,r=+r,i!==null){var o=Math.PI/180,s=t+e*Math.cos(-r*o),l=t+e*Math.cos(-i*o),c=n+e*Math.sin(-r*o),u=n+e*Math.sin(-i*o);a=[["M",s,c],["A",e,e,0,+(i-r>180),0,l,u]]}else a=[["M",t,n],["m",0,-r],["a",e,r,0,1,1,0,2*r],["a",e,r,0,1,1,0,-2*r],["z"]];return a},db=function(t){if(t=lc(t),!t||!t.length)return[["M",0,0]];var n=[],e=0,r=0,i=0,a=0,o=0,s,l;t[0][0]==="M"&&(e=+t[0][1],r=+t[0][2],i=e,a=r,o++,n[0]=["M",e,r]);for(var c=t.length===3&&t[0][0]==="M"&&t[1][0].toUpperCase()==="R"&&t[2][0].toUpperCase()==="Z",u=void 0,f=void 0,h=o,d=t.length;h<d;h++){if(n.push(u=[]),f=t[h],s=f[0],s!==s.toUpperCase())switch(u[0]=s.toUpperCase(),u[0]){case"A":u[1]=f[1],u[2]=f[2],u[3]=f[3],u[4]=f[4],u[5]=f[5],u[6]=+f[6]+e,u[7]=+f[7]+r;break;case"V":u[1]=+f[1]+r;break;case"H":u[1]=+f[1]+e;break;case"R":l=[e,r].concat(f.slice(1));for(var p=2,v=l.length;p<v;p++)l[p]=+l[p]+e,l[++p]=+l[p]+r;n.pop(),n=n.concat(hb(l,c));break;case"O":n.pop(),l=lp(e,r,f[1],f[2]),l.push(l[0]),n=n.concat(l);break;case"U":n.pop(),n=n.concat(lp(e,r,f[1],f[2],f[3])),u=["U"].concat(n[n.length-1].slice(-2));break;case"M":i=+f[1]+e,a=+f[2]+r;break;default:for(var p=1,v=f.length;p<v;p++)u[p]=+f[p]+(p%2?e:r)}else if(s==="R")l=[e,r].concat(f.slice(1)),n.pop(),n=n.concat(hb(l,c)),u=["R"].concat(f.slice(-2));else if(s==="O")n.pop(),l=lp(e,r,f[1],f[2]),l.push(l[0]),n=n.concat(l);else if(s==="U")n.pop(),n=n.concat(lp(e,r,f[1],f[2],f[3])),u=["U"].concat(n[n.length-1].slice(-2));else for(var g=0,y=f.length;g<y;g++)u[g]=f[g];if(s=s.toUpperCase(),s!=="O")switch(u[0]){case"Z":e=+i,r=+a;break;case"H":e=u[1];break;case"V":r=u[1];break;case"M":i=u[u.length-2],a=u[u.length-1];break;default:e=u[u.length-2],r=u[u.length-1]}}return n},cp=function(t,n,e,r){return[t,n,e,r,e,r]},QE=function(t,n,e,r,i,a){var o=.3333333333333333,s=2/3;return[o*t+s*e,o*n+s*r,o*i+s*e,o*a+s*r,i,a]},aR=function(t,n,e,r,i,a,o,s,l,c){e===r&&(e+=1);var u=Math.PI*120/180,f=Math.PI/180*(+i||0),h=[],d,p,v,g,y,m=function(Z,q,rt){var it=Z*Math.cos(rt)-q*Math.sin(rt),ft=Z*Math.sin(rt)+q*Math.cos(rt);return{x:it,y:ft}};if(c)p=c[0],v=c[1],g=c[2],y=c[3];else{d=m(t,n,-f),t=d.x,n=d.y,d=m(s,l,-f),s=d.x,l=d.y,t===s&&n===l&&(s+=1,l+=1);var x=(t-s)/2,b=(n-l)/2,w=x*x/(e*e)+b*b/(r*r);w>1&&(w=Math.sqrt(w),e=w*e,r=w*r);var S=e*e,O=r*r,M=(a===o?-1:1)*Math.sqrt(Math.abs((S*O-S*b*b-O*x*x)/(S*b*b+O*x*x)));g=M*e*b/r+(t+s)/2,y=M*-r*x/e+(n+l)/2,p=Math.asin(((n-y)/r).toFixed(9)),v=Math.asin(((l-y)/r).toFixed(9)),p=t<g?Math.PI-p:p,v=s<g?Math.PI-v:v,p<0&&(p=Math.PI*2+p),v<0&&(v=Math.PI*2+v),o&&p>v&&(p=p-Math.PI*2),!o&&v>p&&(v=v-Math.PI*2)}var A=v-p;if(Math.abs(A)>u){var T=v,C=s,P=l;v=p+u*(o&&v>p?1:-1),s=g+e*Math.cos(v),l=y+r*Math.sin(v),h=aR(s,l,e,r,i,0,o,C,P,[v,T,g,y])}A=v-p;var _=Math.cos(p),k=Math.sin(p),I=Math.cos(v),L=Math.sin(v),F=Math.tan(A/4),B=4/3*e*F,D=4/3*r*F,N=[t,n],j=[t+B*k,n-D*_],Y=[s+B*L,l-D*I],W=[s,l];if(j[0]=2*N[0]-j[0],j[1]=2*N[1]-j[1],c)return[j,Y,W].concat(h);h=[j,Y,W].concat(h).join().split(",");for(var V=[],H=0,Q=h.length;H<Q;H++)V[H]=H%2?m(h[H-1],h[H],f).y:m(h[H],h[H+1],f).x;return V},pb=function(t,n){var e=db(t),r=n&&db(n),i={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o=[],s=[],l="",c="",u,f=function(x,b,w){var S,O;if(!x)return["C",b.x,b.y,b.x,b.y,b.x,b.y];switch(!(x[0]in{T:1,Q:1})&&(b.qx=b.qy=null),x[0]){case"M":b.X=x[1],b.Y=x[2];break;case"A":x=["C"].concat(aR.apply(0,[b.x,b.y].concat(x.slice(1))));break;case"S":w==="C"||w==="S"?(S=b.x*2-b.bx,O=b.y*2-b.by):(S=b.x,O=b.y),x=["C",S,O].concat(x.slice(1));break;case"T":w==="Q"||w==="T"?(b.qx=b.x*2-b.qx,b.qy=b.y*2-b.qy):(b.qx=b.x,b.qy=b.y),x=["C"].concat(QE(b.x,b.y,b.qx,b.qy,x[1],x[2]));break;case"Q":b.qx=x[1],b.qy=x[2],x=["C"].concat(QE(b.x,b.y,x[1],x[2],x[3],x[4]));break;case"L":x=["C"].concat(cp(b.x,b.y,x[1],x[2]));break;case"H":x=["C"].concat(cp(b.x,b.y,x[1],b.y));break;case"V":x=["C"].concat(cp(b.x,b.y,b.x,x[1]));break;case"Z":x=["C"].concat(cp(b.x,b.y,b.X,b.Y));break}return x},h=function(x,b){if(x[b].length>7){x[b].shift();for(var w=x[b];w.length;)o[b]="A",r&&(s[b]="A"),x.splice(b++,0,["C"].concat(w.splice(0,6)));x.splice(b,1),u=Math.max(e.length,r&&r.length||0)}},d=function(x,b,w,S,O){x&&b&&x[O][0]==="M"&&b[O][0]!=="M"&&(b.splice(O,0,["M",S.x,S.y]),w.bx=0,w.by=0,w.x=x[O][1],w.y=x[O][2],u=Math.max(e.length,r&&r.length||0))};u=Math.max(e.length,r&&r.length||0);for(var p=0;p<u;p++){e[p]&&(l=e[p][0]),l!=="C"&&(o[p]=l,p&&(c=o[p-1])),e[p]=f(e[p],i,c),o[p]!=="A"&&l==="C"&&(o[p]="C"),h(e,p),r&&(r[p]&&(l=r[p][0]),l!=="C"&&(s[p]=l,p&&(c=s[p-1])),r[p]=f(r[p],a,c),s[p]!=="A"&&l==="C"&&(s[p]="C"),h(r,p)),d(e,r,i,a,p),d(r,e,a,i,p);var v=e[p],g=r&&r[p],y=v.length,m=r&&g.length;i.x=v[y-2],i.y=v[y-1],i.bx=parseFloat(v[y-4])||i.x,i.by=parseFloat(v[y-3])||i.y,a.bx=r&&(parseFloat(g[m-4])||a.x),a.by=r&&(parseFloat(g[m-3])||a.y),a.x=r&&g[m-2],a.y=r&&g[m-1]}return r?[e,r]:e},SX=/,?([a-z]),?/gi,oR=function(t){return t.join(",").replace(SX,"$1")},JE=function(t,n,e,r,i){var a=-3*n+9*e-9*r+3*i,o=t*a+6*n-12*e+6*r;return t*o-3*n+3*e},tT=function(t,n,e,r,i,a,o,s,l){l===null&&(l=1),l=l>1?1:l<0?0:l;for(var c=l/2,u=12,f=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],h=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],d=0,p=0;p<u;p++){var v=c*f[p]+c,g=JE(v,t,e,i,o),y=JE(v,n,r,a,s),m=g*g+y*y;d+=h[p]*Math.sqrt(m)}return c*d},OX=function(t,n,e,r,i,a,o,s){for(var l=[],c=[[],[]],u,f,h,d,p=0;p<2;++p){if(p===0?(f=6*t-12*e+6*i,u=-3*t+9*e-9*i+3*o,h=3*e-3*t):(f=6*n-12*r+6*a,u=-3*n+9*r-9*a+3*s,h=3*r-3*n),Math.abs(u)<1e-12){if(Math.abs(f)<1e-12)continue;d=-h/f,d>0&&d<1&&l.push(d);continue}var v=f*f-4*h*u,g=Math.sqrt(v);if(!(v<0)){var y=(-f+g)/(2*u);y>0&&y<1&&l.push(y);var m=(-f-g)/(2*u);m>0&&m<1&&l.push(m)}}for(var x=l.length,b=x,w;x--;)d=l[x],w=1-d,c[0][x]=w*w*w*t+3*w*w*d*e+3*w*d*d*i+d*d*d*o,c[1][x]=w*w*w*n+3*w*w*d*r+3*w*d*d*a+d*d*d*s;return c[0][b]=t,c[1][b]=n,c[0][b+1]=o,c[1][b+1]=s,c[0].length=c[1].length=b+2,{min:{x:Math.min.apply(0,c[0]),y:Math.min.apply(0,c[1])},max:{x:Math.max.apply(0,c[0]),y:Math.max.apply(0,c[1])}}},MX=function(t,n,e,r,i,a,o,s){if(!(Math.max(t,e)<Math.min(i,o)||Math.min(t,e)>Math.max(i,o)||Math.max(n,r)<Math.min(a,s)||Math.min(n,r)>Math.max(a,s))){var l=(t*r-n*e)*(i-o)-(t-e)*(i*s-a*o),c=(t*r-n*e)*(a-s)-(n-r)*(i*s-a*o),u=(t-e)*(a-s)-(n-r)*(i-o);if(u){var f=l/u,h=c/u,d=+f.toFixed(2),p=+h.toFixed(2);if(!(d<+Math.min(t,e).toFixed(2)||d>+Math.max(t,e).toFixed(2)||d<+Math.min(i,o).toFixed(2)||d>+Math.max(i,o).toFixed(2)||p<+Math.min(n,r).toFixed(2)||p>+Math.max(n,r).toFixed(2)||p<+Math.min(a,s).toFixed(2)||p>+Math.max(a,s).toFixed(2)))return{x:f,y:h}}}},lo=function(t,n,e){return n>=t.x&&n<=t.x+t.width&&e>=t.y&&e<=t.y+t.height},sR=function(t,n,e,r,i){if(i)return[["M",+t+ +i,n],["l",e-i*2,0],["a",i,i,0,0,1,i,i],["l",0,r-i*2],["a",i,i,0,0,1,-i,i],["l",i*2-e,0],["a",i,i,0,0,1,-i,-i],["l",0,i*2-r],["a",i,i,0,0,1,i,-i],["z"]];var a=[["M",t,n],["l",e,0],["l",0,r],["l",-e,0],["z"]];return a.parsePathArray=oR,a},vb=function(t,n,e,r){return t===null&&(t=n=e=r=0),n===null&&(n=t.y,e=t.width,r=t.height,t=t.x),{x:t,y:n,width:e,w:e,height:r,h:r,x2:t+e,y2:n+r,cx:t+e/2,cy:n+r/2,r1:Math.min(e,r)/2,r2:Math.max(e,r)/2,r0:Math.sqrt(e*e+r*r)/2,path:sR(t,n,e,r),vb:[t,n,e,r].join(" ")}},AX=function(t,n){return t=vb(t),n=vb(n),lo(n,t.x,t.y)||lo(n,t.x2,t.y)||lo(n,t.x,t.y2)||lo(n,t.x2,t.y2)||lo(t,n.x,n.y)||lo(t,n.x2,n.y)||lo(t,n.x,n.y2)||lo(t,n.x2,n.y2)||(t.x<n.x2&&t.x>n.x||n.x<t.x2&&n.x>t.x)&&(t.y<n.y2&&t.y>n.y||n.y<t.y2&&n.y>t.y)},eT=function(t,n,e,r,i,a,o,s){et(t)||(t=[t,n,e,r,i,a,o,s]);var l=OX.apply(null,t);return vb(l.min.x,l.min.y,l.max.x-l.min.x,l.max.y-l.min.y)},nT=function(t,n,e,r,i,a,o,s,l){var c=1-l,u=Math.pow(c,3),f=Math.pow(c,2),h=l*l,d=h*l,p=u*t+f*3*l*e+c*3*l*l*i+d*o,v=u*n+f*3*l*r+c*3*l*l*a+d*s,g=t+2*l*(e-t)+h*(i-2*e+t),y=n+2*l*(r-n)+h*(a-2*r+n),m=e+2*l*(i-e)+h*(o-2*i+e),x=r+2*l*(a-r)+h*(s-2*a+r),b=c*t+l*e,w=c*n+l*r,S=c*i+l*o,O=c*a+l*s,M=90-Math.atan2(g-m,y-x)*180/Math.PI;return{x:p,y:v,m:{x:g,y},n:{x:m,y:x},start:{x:b,y:w},end:{x:S,y:O},alpha:M}},EX=function(t,n,e){var r=eT(t),i=eT(n);if(!AX(r,i))return e?0:[];for(var a=tT.apply(0,t),o=tT.apply(0,n),s=~~(a/8),l=~~(o/8),c=[],u=[],f={},h=e?0:[],d=0;d<s+1;d++){var p=nT.apply(0,t.concat(d/s));c.push({x:p.x,y:p.y,t:d/s})}for(var d=0;d<l+1;d++){var p=nT.apply(0,n.concat(d/l));u.push({x:p.x,y:p.y,t:d/l})}for(var d=0;d<s;d++)for(var v=0;v<l;v++){var g=c[d],y=c[d+1],m=u[v],x=u[v+1],b=Math.abs(y.x-g.x)<.001?"y":"x",w=Math.abs(x.x-m.x)<.001?"y":"x",S=MX(g.x,g.y,y.x,y.y,m.x,m.y,x.x,x.y);if(S){if(f[S.x.toFixed(4)]===S.y.toFixed(4))continue;f[S.x.toFixed(4)]=S.y.toFixed(4);var O=g.t+Math.abs((S[b]-g[b])/(y[b]-g[b]))*(y.t-g.t),M=m.t+Math.abs((S[w]-m[w])/(x[w]-m[w]))*(x.t-m.t);O>=0&&O<=1&&M>=0&&M<=1&&(e?h+=1:h.push({x:S.x,y:S.y,t1:O,t2:M}))}}return h},TX=function(t,n,e){t=pb(t),n=pb(n);for(var r,i,a,o,s,l,c,u,f,h,d=e?0:[],p=0,v=t.length;p<v;p++){var g=t[p];if(g[0]==="M")r=s=g[1],i=l=g[2];else{g[0]==="C"?(f=[r,i].concat(g.slice(1)),r=f[6],i=f[7]):(f=[r,i,r,i,s,l,s,l],r=s,i=l);for(var y=0,m=n.length;y<m;y++){var x=n[y];if(x[0]==="M")a=c=x[1],o=u=x[2];else{x[0]==="C"?(h=[a,o].concat(x.slice(1)),a=h[6],o=h[7]):(h=[a,o,a,o,c,u,c,u],a=c,o=u);var b=EX(f,h,e);if(e)d+=b;else{for(var w=0,S=b.length;w<S;w++)b[w].segment1=p,b[w].segment2=y,b[w].bez1=f,b[w].bez2=h;d=d.concat(b)}}}}}return d},CX=function(t,n){return TX(t,n)};function PX(t,n){var e=[],r=[];function i(a,o){if(a.length===1)e.push(a[0]),r.push(a[0]);else{for(var s=[],l=0;l<a.length-1;l++)l===0&&e.push(a[0]),l===a.length-2&&r.push(a[l+1]),s[l]=[(1-o)*a[l][0]+o*a[l+1][0],(1-o)*a[l][1]+o*a[l+1][1]];i(s,o)}}return t.length&&i(t,n),{left:e,right:r.reverse()}}function kX(t,n,e){var r=[[t[1],t[2]]];e=e||2;var i=[];n[0]==="A"?(r.push(n[6]),r.push(n[7])):n[0]==="C"?(r.push([n[1],n[2]]),r.push([n[3],n[4]]),r.push([n[5],n[6]])):n[0]==="S"||n[0]==="Q"?(r.push([n[1],n[2]]),r.push([n[3],n[4]])):r.push([n[1],n[2]]);for(var a=r,o=1/e,s=0;s<e-1;s++){var l=o/(1-o*s),c=PX(a,l);i.push(c.left),a=c.right}i.push(a);var u=i.map(function(f){var h=[];return f.length===4&&(h.push("C"),h=h.concat(f[2])),f.length>=3&&(f.length===3&&h.push("Q"),h=h.concat(f[1])),f.length===2&&h.push("L"),h=h.concat(f[f.length-1]),h});return u}var _X=function(t,n,e){if(e===1)return[[].concat(t)];var r=[];if(n[0]==="L"||n[0]==="C"||n[0]==="Q")r=r.concat(kX(t,n,e));else{var i=[].concat(t);i[0]==="M"&&(i[0]="L");for(var a=0;a<=e-1;a++)r.push(i)}return r},LX=function(t,n){if(t.length===1)return t;var e=t.length-1,r=n.length-1,i=e/r,a=[];if(t.length===1&&t[0][0]==="M"){for(var o=0;o<r-e;o++)t.push(t[0]);return t}for(var o=0;o<r;o++){var s=Math.floor(i*o);a[s]=(a[s]||0)+1}var l=a.reduce(function(c,u,f){return f===e?c.concat(t[e]):c.concat(_X(t[f],t[f+1],u))},[]);return l.unshift(t[0]),(n[r]==="Z"||n[r]==="z")&&l.push("Z"),l},IX=function(t,n){if(t.length!==n.length)return!1;var e=!0;return $(t,function(r,i){if(r!==n[i])return e=!1,!1}),e};function FX(t,n,e){var r=null,i=e;return n<i&&(i=n,r="add"),t<i&&(i=t,r="del"),{type:r,min:i}}var DX=function(t,n){var e=t.length,r=n.length,i,a,o=0;if(e===0||r===0)return null;for(var s=[],l=0;l<=e;l++)s[l]=[],s[l][0]={min:l};for(var c=0;c<=r;c++)s[0][c]={min:c};for(var l=1;l<=e;l++){i=t[l-1];for(var c=1;c<=r;c++){a=n[c-1],IX(i,a)?o=0:o=1;var u=s[l-1][c].min+1,f=s[l][c-1].min+1,h=s[l-1][c-1].min+o;s[l][c]=FX(u,f,h)}}return s},lR=function(t,n){var e=DX(t,n),r=t.length,i=n.length,a=[],o=1,s=1;if(e[r][i].min!==r){for(var l=1;l<=r;l++){var c=e[l][l].min;s=l;for(var u=o;u<=i;u++)e[l][u].min<c&&(c=e[l][u].min,s=u);o=s,e[l][o].type&&a.push({index:l-1,type:e[l][o].type})}for(var l=a.length-1;l>=0;l--)o=a[l].index,a[l].type==="add"?t.splice(o,0,[].concat(t[o])):t.splice(o,1)}r=t.length;var f=i-r;if(r<i)for(var l=0;l<f;l++)t[r-1][0]==="z"||t[r-1][0]==="Z"?t.splice(r-2,0,t[r-2]):t.push(t[r-1]),r+=1;return t};function l1(t,n,e){for(var r=[].concat(t),i,a=1/(e+1),o=cR(n)[0],s=1;s<=e;s++)a*=s,i=Math.floor(t.length*a),i===0?r.unshift([o[0]*a+t[i][0]*(1-a),o[1]*a+t[i][1]*(1-a)]):r.splice(i,0,[o[0]*a+t[i][0]*(1-a),o[1]*a+t[i][1]*(1-a)]);return r}function cR(t){var n=[];switch(t[0]){case"M":n.push([t[1],t[2]]);break;case"L":n.push([t[1],t[2]]);break;case"A":n.push([t[6],t[7]]);break;case"Q":n.push([t[3],t[4]]),n.push([t[1],t[2]]);break;case"T":n.push([t[1],t[2]]);break;case"C":n.push([t[5],t[6]]),n.push([t[1],t[2]]),n.push([t[3],t[4]]);break;case"S":n.push([t[3],t[4]]),n.push([t[1],t[2]]);break;case"H":n.push([t[1],t[1]]);break;case"V":n.push([t[1],t[1]]);break}return n}var gb=function(t,n){if(t.length<=1)return t;for(var e,r=0;r<n.length;r++)if(t[r][0]!==n[r][0])switch(e=cR(t[r]),n[r][0]){case"M":t[r]=["M"].concat(e[0]);break;case"L":t[r]=["L"].concat(e[0]);break;case"A":t[r]=[].concat(n[r]),t[r][6]=e[0][0],t[r][7]=e[0][1];break;case"Q":if(e.length<2)if(r>0)e=l1(e,t[r-1],1);else{t[r]=n[r];break}t[r]=["Q"].concat(e.reduce(function(i,a){return i.concat(a)},[]));break;case"T":t[r]=["T"].concat(e[0]);break;case"C":if(e.length<3)if(r>0)e=l1(e,t[r-1],2);else{t[r]=n[r];break}t[r]=["C"].concat(e.reduce(function(i,a){return i.concat(a)},[]));break;case"S":if(e.length<2)if(r>0)e=l1(e,t[r-1],1);else{t[r]=n[r];break}t[r]=["S"].concat(e.reduce(function(i,a){return i.concat(a)},[]));break;default:t[r]=n[r]}return t};const sS=Object.freeze(Object.defineProperty({__proto__:null,catmullRomToBezier:hb,fillPath:LX,fillPathByDiff:lR,formatPath:gb,intersection:CX,parsePathArray:oR,parsePathString:lc,pathToAbsolute:db,pathToCurve:pb,rectPath:sR},Symbol.toStringTag,{value:"Module"}));var pd=function(){function t(n,e){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=n,this.name=n,this.originalEvent=e,this.timeStamp=e.timeStamp}return t.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t.prototype.toString=function(){var n=this.type;return"[Event (type="+n+")]"},t.prototype.save=function(){},t.prototype.restore=function(){},t}();function uR(t,n){var e=t.indexOf(n);e!==-1&&t.splice(e,1)}var rT=typeof window<"u"&&typeof window.document<"u";function fR(t,n){if(t.isCanvas())return!0;for(var e=n.getParent(),r=!1;e;){if(e===t){r=!0;break}e=e.getParent()}return r}function fh(t){return t.cfg.visible&&t.cfg.capture}var t0=function(t){G(n,t);function n(e){var r=t.call(this)||this;r.destroyed=!1;var i=r.getDefaultCfg();return r.cfg=Jt(i,e),r}return n.prototype.getDefaultCfg=function(){return{}},n.prototype.get=function(e){return this.cfg[e]},n.prototype.set=function(e,r){this.cfg[e]=r},n.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},n}(Au),iT=globalThis&&globalThis.__spreadArray||function(t,n,e){if(e||arguments.length===2)for(var r=0,i=n.length,a;r<i;r++)(a||!(r in n))&&(a||(a=Array.prototype.slice.call(n,0,r)),a[r]=n[r]);return t.concat(a||Array.prototype.slice.call(n))},RX=function(){function t(n,e,r){this.name=n,this.version=e,this.os=r,this.type="browser"}return t}(),BX=function(){function t(n){this.version=n,this.type="node",this.name="node",this.os=process.platform}return t}(),NX=function(){function t(n,e,r,i){this.name=n,this.version=e,this.os=r,this.bot=i,this.type="bot-device"}return t}(),$X=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),jX=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),zX=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,GX=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,aT=3,YX=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",zX]],oT=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function hR(t){return t?sT(t):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new jX:typeof navigator<"u"?sT(navigator.userAgent):HX()}function WX(t){return t!==""&&YX.reduce(function(n,e){var r=e[0],i=e[1];if(n)return n;var a=i.exec(t);return!!a&&[r,a]},!1)}function sT(t){var n=WX(t);if(!n)return null;var e=n[0],r=n[1];if(e==="searchbot")return new $X;var i=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);i?i.length<aT&&(i=iT(iT([],i,!0),XX(aT-i.length),!0)):i=[];var a=i.join("."),o=VX(t),s=GX.exec(t);return s&&s[1]?new NX(e,a,o,s[1]):new RX(e,a,o)}function VX(t){for(var n=0,e=oT.length;n<e;n++){var r=oT[n],i=r[0],a=r[1],o=a.exec(t);if(o)return i}return null}function HX(){var t=typeof process<"u"&&process.version;return t?new BX(process.version.slice(1)):null}function XX(t){for(var n=[],e=0;e<t;e++)n.push("0");return n}var De=1e-6,nn=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=0,n=arguments.length;n--;)t+=arguments[n]*arguments[n];return Math.sqrt(t)});function Eu(){var t=new nn(9);return nn!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function UX(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[4],t[4]=n[5],t[5]=n[6],t[6]=n[8],t[7]=n[9],t[8]=n[10],t}function qX(t){var n=new nn(9);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n}function ZX(t,n,e,r,i,a,o,s,l){var c=new nn(9);return c[0]=t,c[1]=n,c[2]=e,c[3]=r,c[4]=i,c[5]=a,c[6]=o,c[7]=s,c[8]=l,c}function dR(t,n){var e=n[0],r=n[1],i=n[2],a=n[3],o=n[4],s=n[5],l=n[6],c=n[7],u=n[8],f=u*o-s*c,h=-u*a+s*l,d=c*a-o*l,p=e*f+r*h+i*d;return p?(p=1/p,t[0]=f*p,t[1]=(-u*r+i*c)*p,t[2]=(s*r-i*o)*p,t[3]=h*p,t[4]=(u*e-i*l)*p,t[5]=(-s*e+i*a)*p,t[6]=d*p,t[7]=(-c*e+r*l)*p,t[8]=(o*e-r*a)*p,t):null}function vd(t,n,e){var r=n[0],i=n[1],a=n[2],o=n[3],s=n[4],l=n[5],c=n[6],u=n[7],f=n[8],h=e[0],d=e[1],p=e[2],v=e[3],g=e[4],y=e[5],m=e[6],x=e[7],b=e[8];return t[0]=h*r+d*o+p*c,t[1]=h*i+d*s+p*u,t[2]=h*a+d*l+p*f,t[3]=v*r+g*o+y*c,t[4]=v*i+g*s+y*u,t[5]=v*a+g*l+y*f,t[6]=m*r+x*o+b*c,t[7]=m*i+x*s+b*u,t[8]=m*a+x*l+b*f,t}function pR(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=n[0],t[7]=n[1],t[8]=1,t}function vR(t,n){var e=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=e,t[2]=0,t[3]=-e,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function gR(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=0,t[4]=n[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}var KX=vd;function pe(){var t=new nn(16);return nn!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function lS(t){var n=new nn(16);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n}function al(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t}function QX(t,n,e,r,i,a,o,s,l,c,u,f,h,d,p,v){var g=new nn(16);return g[0]=t,g[1]=n,g[2]=e,g[3]=r,g[4]=i,g[5]=a,g[6]=o,g[7]=s,g[8]=l,g[9]=c,g[10]=u,g[11]=f,g[12]=h,g[13]=d,g[14]=p,g[15]=v,g}function yb(t,n,e,r,i,a,o,s,l,c,u,f,h,d,p,v,g){return t[0]=n,t[1]=e,t[2]=r,t[3]=i,t[4]=a,t[5]=o,t[6]=s,t[7]=l,t[8]=c,t[9]=u,t[10]=f,t[11]=h,t[12]=d,t[13]=p,t[14]=v,t[15]=g,t}function gd(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function yR(t,n){if(t===n){var e=n[1],r=n[2],i=n[3],a=n[6],o=n[7],s=n[11];t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=e,t[6]=n[9],t[7]=n[13],t[8]=r,t[9]=a,t[11]=n[14],t[12]=i,t[13]=o,t[14]=s}else t[0]=n[0],t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=n[1],t[5]=n[5],t[6]=n[9],t[7]=n[13],t[8]=n[2],t[9]=n[6],t[10]=n[10],t[11]=n[14],t[12]=n[3],t[13]=n[7],t[14]=n[11],t[15]=n[15];return t}function _i(t,n){var e=n[0],r=n[1],i=n[2],a=n[3],o=n[4],s=n[5],l=n[6],c=n[7],u=n[8],f=n[9],h=n[10],d=n[11],p=n[12],v=n[13],g=n[14],y=n[15],m=e*s-r*o,x=e*l-i*o,b=e*c-a*o,w=r*l-i*s,S=r*c-a*s,O=i*c-a*l,M=u*v-f*p,A=u*g-h*p,T=u*y-d*p,C=f*g-h*v,P=f*y-d*v,_=h*y-d*g,k=m*_-x*P+b*C+w*T-S*A+O*M;return k?(k=1/k,t[0]=(s*_-l*P+c*C)*k,t[1]=(i*P-r*_-a*C)*k,t[2]=(v*O-g*S+y*w)*k,t[3]=(h*S-f*O-d*w)*k,t[4]=(l*T-o*_-c*A)*k,t[5]=(e*_-i*T+a*A)*k,t[6]=(g*b-p*O-y*x)*k,t[7]=(u*O-h*b+d*x)*k,t[8]=(o*P-s*T+c*M)*k,t[9]=(r*T-e*P-a*M)*k,t[10]=(p*S-v*b+y*m)*k,t[11]=(f*b-u*S-d*m)*k,t[12]=(s*A-o*C-l*M)*k,t[13]=(e*C-r*A+i*M)*k,t[14]=(v*x-p*w-g*m)*k,t[15]=(u*w-f*x+h*m)*k,t):null}function JX(t,n){var e=n[0],r=n[1],i=n[2],a=n[3],o=n[4],s=n[5],l=n[6],c=n[7],u=n[8],f=n[9],h=n[10],d=n[11],p=n[12],v=n[13],g=n[14],y=n[15];return t[0]=s*(h*y-d*g)-f*(l*y-c*g)+v*(l*d-c*h),t[1]=-(r*(h*y-d*g)-f*(i*y-a*g)+v*(i*d-a*h)),t[2]=r*(l*y-c*g)-s*(i*y-a*g)+v*(i*c-a*l),t[3]=-(r*(l*d-c*h)-s*(i*d-a*h)+f*(i*c-a*l)),t[4]=-(o*(h*y-d*g)-u*(l*y-c*g)+p*(l*d-c*h)),t[5]=e*(h*y-d*g)-u*(i*y-a*g)+p*(i*d-a*h),t[6]=-(e*(l*y-c*g)-o*(i*y-a*g)+p*(i*c-a*l)),t[7]=e*(l*d-c*h)-o*(i*d-a*h)+u*(i*c-a*l),t[8]=o*(f*y-d*v)-u*(s*y-c*v)+p*(s*d-c*f),t[9]=-(e*(f*y-d*v)-u*(r*y-a*v)+p*(r*d-a*f)),t[10]=e*(s*y-c*v)-o*(r*y-a*v)+p*(r*c-a*s),t[11]=-(e*(s*d-c*f)-o*(r*d-a*f)+u*(r*c-a*s)),t[12]=-(o*(f*g-h*v)-u*(s*g-l*v)+p*(s*h-l*f)),t[13]=e*(f*g-h*v)-u*(r*g-i*v)+p*(r*h-i*f),t[14]=-(e*(s*g-l*v)-o*(r*g-i*v)+p*(r*l-i*s)),t[15]=e*(s*h-l*f)-o*(r*h-i*f)+u*(r*l-i*s),t}function mR(t){var n=t[0],e=t[1],r=t[2],i=t[3],a=t[4],o=t[5],s=t[6],l=t[7],c=t[8],u=t[9],f=t[10],h=t[11],d=t[12],p=t[13],v=t[14],g=t[15],y=n*o-e*a,m=n*s-r*a,x=n*l-i*a,b=e*s-r*o,w=e*l-i*o,S=r*l-i*s,O=c*p-u*d,M=c*v-f*d,A=c*g-h*d,T=u*v-f*p,C=u*g-h*p,P=f*g-h*v;return y*P-m*C+x*T+b*A-w*M+S*O}function Vn(t,n,e){var r=n[0],i=n[1],a=n[2],o=n[3],s=n[4],l=n[5],c=n[6],u=n[7],f=n[8],h=n[9],d=n[10],p=n[11],v=n[12],g=n[13],y=n[14],m=n[15],x=e[0],b=e[1],w=e[2],S=e[3];return t[0]=x*r+b*s+w*f+S*v,t[1]=x*i+b*l+w*h+S*g,t[2]=x*a+b*c+w*d+S*y,t[3]=x*o+b*u+w*p+S*m,x=e[4],b=e[5],w=e[6],S=e[7],t[4]=x*r+b*s+w*f+S*v,t[5]=x*i+b*l+w*h+S*g,t[6]=x*a+b*c+w*d+S*y,t[7]=x*o+b*u+w*p+S*m,x=e[8],b=e[9],w=e[10],S=e[11],t[8]=x*r+b*s+w*f+S*v,t[9]=x*i+b*l+w*h+S*g,t[10]=x*a+b*c+w*d+S*y,t[11]=x*o+b*u+w*p+S*m,x=e[12],b=e[13],w=e[14],S=e[15],t[12]=x*r+b*s+w*f+S*v,t[13]=x*i+b*l+w*h+S*g,t[14]=x*a+b*c+w*d+S*y,t[15]=x*o+b*u+w*p+S*m,t}function Ro(t,n,e){var r=e[0],i=e[1],a=e[2],o,s,l,c,u,f,h,d,p,v,g,y;return n===t?(t[12]=n[0]*r+n[4]*i+n[8]*a+n[12],t[13]=n[1]*r+n[5]*i+n[9]*a+n[13],t[14]=n[2]*r+n[6]*i+n[10]*a+n[14],t[15]=n[3]*r+n[7]*i+n[11]*a+n[15]):(o=n[0],s=n[1],l=n[2],c=n[3],u=n[4],f=n[5],h=n[6],d=n[7],p=n[8],v=n[9],g=n[10],y=n[11],t[0]=o,t[1]=s,t[2]=l,t[3]=c,t[4]=u,t[5]=f,t[6]=h,t[7]=d,t[8]=p,t[9]=v,t[10]=g,t[11]=y,t[12]=o*r+u*i+p*a+n[12],t[13]=s*r+f*i+v*a+n[13],t[14]=l*r+h*i+g*a+n[14],t[15]=c*r+d*i+y*a+n[15]),t}function ug(t,n,e){var r=e[0],i=e[1],a=e[2];return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=n[7]*i,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=n[11]*a,t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t}function tU(t,n,e,r){var i=r[0],a=r[1],o=r[2],s=Math.hypot(i,a,o),l,c,u,f,h,d,p,v,g,y,m,x,b,w,S,O,M,A,T,C,P,_,k,I;return s<De?null:(s=1/s,i*=s,a*=s,o*=s,l=Math.sin(e),c=Math.cos(e),u=1-c,f=n[0],h=n[1],d=n[2],p=n[3],v=n[4],g=n[5],y=n[6],m=n[7],x=n[8],b=n[9],w=n[10],S=n[11],O=i*i*u+c,M=a*i*u+o*l,A=o*i*u-a*l,T=i*a*u-o*l,C=a*a*u+c,P=o*a*u+i*l,_=i*o*u+a*l,k=a*o*u-i*l,I=o*o*u+c,t[0]=f*O+v*M+x*A,t[1]=h*O+g*M+b*A,t[2]=d*O+y*M+w*A,t[3]=p*O+m*M+S*A,t[4]=f*T+v*C+x*P,t[5]=h*T+g*C+b*P,t[6]=d*T+y*C+w*P,t[7]=p*T+m*C+S*P,t[8]=f*_+v*k+x*I,t[9]=h*_+g*k+b*I,t[10]=d*_+y*k+w*I,t[11]=p*_+m*k+S*I,n!==t&&(t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t)}function xR(t,n,e){var r=Math.sin(e),i=Math.cos(e),a=n[4],o=n[5],s=n[6],l=n[7],c=n[8],u=n[9],f=n[10],h=n[11];return n!==t&&(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[4]=a*i+c*r,t[5]=o*i+u*r,t[6]=s*i+f*r,t[7]=l*i+h*r,t[8]=c*i-a*r,t[9]=u*i-o*r,t[10]=f*i-s*r,t[11]=h*i-l*r,t}function bR(t,n,e){var r=Math.sin(e),i=Math.cos(e),a=n[0],o=n[1],s=n[2],l=n[3],c=n[8],u=n[9],f=n[10],h=n[11];return n!==t&&(t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=a*i-c*r,t[1]=o*i-u*r,t[2]=s*i-f*r,t[3]=l*i-h*r,t[8]=a*r+c*i,t[9]=o*r+u*i,t[10]=s*r+f*i,t[11]=l*r+h*i,t}function eU(t,n,e){var r=Math.sin(e),i=Math.cos(e),a=n[0],o=n[1],s=n[2],l=n[3],c=n[4],u=n[5],f=n[6],h=n[7];return n!==t&&(t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=a*i+c*r,t[1]=o*i+u*r,t[2]=s*i+f*r,t[3]=l*i+h*r,t[4]=c*i-a*r,t[5]=u*i-o*r,t[6]=f*i-s*r,t[7]=h*i-l*r,t}function cS(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function uS(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=n[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function nU(t,n,e){var r=e[0],i=e[1],a=e[2],o=Math.hypot(r,i,a),s,l,c;return o<De?null:(o=1/o,r*=o,i*=o,a*=o,s=Math.sin(n),l=Math.cos(n),c=1-l,t[0]=r*r*c+l,t[1]=i*r*c+a*s,t[2]=a*r*c-i*s,t[3]=0,t[4]=r*i*c-a*s,t[5]=i*i*c+l,t[6]=a*i*c+r*s,t[7]=0,t[8]=r*a*c+i*s,t[9]=i*a*c-r*s,t[10]=a*a*c+l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function rU(t,n){var e=Math.sin(n),r=Math.cos(n);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=e,t[7]=0,t[8]=0,t[9]=-e,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function iU(t,n){var e=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=0,t[2]=-e,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=e,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function aU(t,n){var e=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=e,t[2]=0,t[3]=0,t[4]=-e,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function wR(t,n,e){var r=n[0],i=n[1],a=n[2],o=n[3],s=r+r,l=i+i,c=a+a,u=r*s,f=r*l,h=r*c,d=i*l,p=i*c,v=a*c,g=o*s,y=o*l,m=o*c;return t[0]=1-(d+v),t[1]=f+m,t[2]=h-y,t[3]=0,t[4]=f-m,t[5]=1-(u+v),t[6]=p+g,t[7]=0,t[8]=h+y,t[9]=p-g,t[10]=1-(u+d),t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function oU(t,n){var e=new nn(3),r=-n[0],i=-n[1],a=-n[2],o=n[3],s=n[4],l=n[5],c=n[6],u=n[7],f=r*r+i*i+a*a+o*o;return f>0?(e[0]=(s*o+u*r+l*a-c*i)*2/f,e[1]=(l*o+u*i+c*r-s*a)*2/f,e[2]=(c*o+u*a+s*i-l*r)*2/f):(e[0]=(s*o+u*r+l*a-c*i)*2,e[1]=(l*o+u*i+c*r-s*a)*2,e[2]=(c*o+u*a+s*i-l*r)*2),wR(t,n,e),t}function fg(t,n){return t[0]=n[12],t[1]=n[13],t[2]=n[14],t}function Bc(t,n){var e=n[0],r=n[1],i=n[2],a=n[4],o=n[5],s=n[6],l=n[8],c=n[9],u=n[10];return t[0]=Math.hypot(e,r,i),t[1]=Math.hypot(a,o,s),t[2]=Math.hypot(l,c,u),t}function hg(t,n){var e=new nn(3);Bc(e,n);var r=1/e[0],i=1/e[1],a=1/e[2],o=n[0]*r,s=n[1]*i,l=n[2]*a,c=n[4]*r,u=n[5]*i,f=n[6]*a,h=n[8]*r,d=n[9]*i,p=n[10]*a,v=o+u+p,g=0;return v>0?(g=Math.sqrt(v+1)*2,t[3]=.25*g,t[0]=(f-d)/g,t[1]=(h-l)/g,t[2]=(s-c)/g):o>u&&o>p?(g=Math.sqrt(1+o-u-p)*2,t[3]=(f-d)/g,t[0]=.25*g,t[1]=(s+c)/g,t[2]=(h+l)/g):u>p?(g=Math.sqrt(1+u-o-p)*2,t[3]=(h-l)/g,t[0]=(s+c)/g,t[1]=.25*g,t[2]=(f+d)/g):(g=Math.sqrt(1+p-o-u)*2,t[3]=(s-c)/g,t[0]=(h+l)/g,t[1]=(f+d)/g,t[2]=.25*g),t}function sU(t,n,e,r){var i=n[0],a=n[1],o=n[2],s=n[3],l=i+i,c=a+a,u=o+o,f=i*l,h=i*c,d=i*u,p=a*c,v=a*u,g=o*u,y=s*l,m=s*c,x=s*u,b=r[0],w=r[1],S=r[2];return t[0]=(1-(p+g))*b,t[1]=(h+x)*b,t[2]=(d-m)*b,t[3]=0,t[4]=(h-x)*w,t[5]=(1-(f+g))*w,t[6]=(v+y)*w,t[7]=0,t[8]=(d+m)*S,t[9]=(v-y)*S,t[10]=(1-(f+p))*S,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function Nf(t,n,e,r,i){var a=n[0],o=n[1],s=n[2],l=n[3],c=a+a,u=o+o,f=s+s,h=a*c,d=a*u,p=a*f,v=o*u,g=o*f,y=s*f,m=l*c,x=l*u,b=l*f,w=r[0],S=r[1],O=r[2],M=i[0],A=i[1],T=i[2],C=(1-(v+y))*w,P=(d+b)*w,_=(p-x)*w,k=(d-b)*S,I=(1-(h+y))*S,L=(g+m)*S,F=(p+x)*O,B=(g-m)*O,D=(1-(h+v))*O;return t[0]=C,t[1]=P,t[2]=_,t[3]=0,t[4]=k,t[5]=I,t[6]=L,t[7]=0,t[8]=F,t[9]=B,t[10]=D,t[11]=0,t[12]=e[0]+M-(C*M+k*A+F*T),t[13]=e[1]+A-(P*M+I*A+B*T),t[14]=e[2]+T-(_*M+L*A+D*T),t[15]=1,t}function fS(t,n){var e=n[0],r=n[1],i=n[2],a=n[3],o=e+e,s=r+r,l=i+i,c=e*o,u=r*o,f=r*s,h=i*o,d=i*s,p=i*l,v=a*o,g=a*s,y=a*l;return t[0]=1-f-p,t[1]=u+y,t[2]=h-g,t[3]=0,t[4]=u-y,t[5]=1-c-p,t[6]=d+v,t[7]=0,t[8]=h+g,t[9]=d-v,t[10]=1-c-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function lU(t,n,e,r,i,a,o){var s=1/(e-n),l=1/(i-r),c=1/(a-o);return t[0]=a*2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a*2*l,t[6]=0,t[7]=0,t[8]=(e+n)*s,t[9]=(i+r)*l,t[10]=(o+a)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*a*2*c,t[15]=0,t}function SR(t,n,e,r,i){var a=1/Math.tan(n/2),o;return t[0]=a/e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,i!=null&&i!==1/0?(o=1/(r-i),t[10]=(i+r)*o,t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t}var cU=SR;function uU(t,n,e,r,i){var a=1/Math.tan(n/2),o;return t[0]=a/e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,i!=null&&i!==1/0?(o=1/(r-i),t[10]=i*o,t[14]=i*r*o):(t[10]=-1,t[14]=-r),t}function fU(t,n,e,r){var i=Math.tan(n.upDegrees*Math.PI/180),a=Math.tan(n.downDegrees*Math.PI/180),o=Math.tan(n.leftDegrees*Math.PI/180),s=Math.tan(n.rightDegrees*Math.PI/180),l=2/(o+s),c=2/(i+a);return t[0]=l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-((o-s)*l*.5),t[9]=(i-a)*c*.5,t[10]=r/(e-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*e/(e-r),t[15]=0,t}function OR(t,n,e,r,i,a,o){var s=1/(n-e),l=1/(r-i),c=1/(a-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(n+e)*s,t[13]=(i+r)*l,t[14]=(o+a)*c,t[15]=1,t}var MR=OR;function AR(t,n,e,r,i,a,o){var s=1/(n-e),l=1/(r-i),c=1/(a-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=c,t[11]=0,t[12]=(n+e)*s,t[13]=(i+r)*l,t[14]=a*c,t[15]=1,t}function ER(t,n,e,r){var i,a,o,s,l,c,u,f,h,d,p=n[0],v=n[1],g=n[2],y=r[0],m=r[1],x=r[2],b=e[0],w=e[1],S=e[2];return Math.abs(p-b)<De&&Math.abs(v-w)<De&&Math.abs(g-S)<De?gd(t):(u=p-b,f=v-w,h=g-S,d=1/Math.hypot(u,f,h),u*=d,f*=d,h*=d,i=m*h-x*f,a=x*u-y*h,o=y*f-m*u,d=Math.hypot(i,a,o),d?(d=1/d,i*=d,a*=d,o*=d):(i=0,a=0,o=0),s=f*o-h*a,l=h*i-u*o,c=u*a-f*i,d=Math.hypot(s,l,c),d?(d=1/d,s*=d,l*=d,c*=d):(s=0,l=0,c=0),t[0]=i,t[1]=s,t[2]=u,t[3]=0,t[4]=a,t[5]=l,t[6]=f,t[7]=0,t[8]=o,t[9]=c,t[10]=h,t[11]=0,t[12]=-(i*p+a*v+o*g),t[13]=-(s*p+l*v+c*g),t[14]=-(u*p+f*v+h*g),t[15]=1,t)}function hU(t,n,e,r){var i=n[0],a=n[1],o=n[2],s=r[0],l=r[1],c=r[2],u=i-e[0],f=a-e[1],h=o-e[2],d=u*u+f*f+h*h;d>0&&(d=1/Math.sqrt(d),u*=d,f*=d,h*=d);var p=l*h-c*f,v=c*u-s*h,g=s*f-l*u;return d=p*p+v*v+g*g,d>0&&(d=1/Math.sqrt(d),p*=d,v*=d,g*=d),t[0]=p,t[1]=v,t[2]=g,t[3]=0,t[4]=f*g-h*v,t[5]=h*p-u*g,t[6]=u*v-f*p,t[7]=0,t[8]=u,t[9]=f,t[10]=h,t[11]=0,t[12]=i,t[13]=a,t[14]=o,t[15]=1,t}function dU(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function pU(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function vU(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t[3]=n[3]+e[3],t[4]=n[4]+e[4],t[5]=n[5]+e[5],t[6]=n[6]+e[6],t[7]=n[7]+e[7],t[8]=n[8]+e[8],t[9]=n[9]+e[9],t[10]=n[10]+e[10],t[11]=n[11]+e[11],t[12]=n[12]+e[12],t[13]=n[13]+e[13],t[14]=n[14]+e[14],t[15]=n[15]+e[15],t}function TR(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t[3]=n[3]-e[3],t[4]=n[4]-e[4],t[5]=n[5]-e[5],t[6]=n[6]-e[6],t[7]=n[7]-e[7],t[8]=n[8]-e[8],t[9]=n[9]-e[9],t[10]=n[10]-e[10],t[11]=n[11]-e[11],t[12]=n[12]-e[12],t[13]=n[13]-e[13],t[14]=n[14]-e[14],t[15]=n[15]-e[15],t}function gU(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t[4]=n[4]*e,t[5]=n[5]*e,t[6]=n[6]*e,t[7]=n[7]*e,t[8]=n[8]*e,t[9]=n[9]*e,t[10]=n[10]*e,t[11]=n[11]*e,t[12]=n[12]*e,t[13]=n[13]*e,t[14]=n[14]*e,t[15]=n[15]*e,t}function yU(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t[3]=n[3]+e[3]*r,t[4]=n[4]+e[4]*r,t[5]=n[5]+e[5]*r,t[6]=n[6]+e[6]*r,t[7]=n[7]+e[7]*r,t[8]=n[8]+e[8]*r,t[9]=n[9]+e[9]*r,t[10]=n[10]+e[10]*r,t[11]=n[11]+e[11]*r,t[12]=n[12]+e[12]*r,t[13]=n[13]+e[13]*r,t[14]=n[14]+e[14]*r,t[15]=n[15]+e[15]*r,t}function mU(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]&&t[6]===n[6]&&t[7]===n[7]&&t[8]===n[8]&&t[9]===n[9]&&t[10]===n[10]&&t[11]===n[11]&&t[12]===n[12]&&t[13]===n[13]&&t[14]===n[14]&&t[15]===n[15]}function xU(t,n){var e=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],c=t[7],u=t[8],f=t[9],h=t[10],d=t[11],p=t[12],v=t[13],g=t[14],y=t[15],m=n[0],x=n[1],b=n[2],w=n[3],S=n[4],O=n[5],M=n[6],A=n[7],T=n[8],C=n[9],P=n[10],_=n[11],k=n[12],I=n[13],L=n[14],F=n[15];return Math.abs(e-m)<=De*Math.max(1,Math.abs(e),Math.abs(m))&&Math.abs(r-x)<=De*Math.max(1,Math.abs(r),Math.abs(x))&&Math.abs(i-b)<=De*Math.max(1,Math.abs(i),Math.abs(b))&&Math.abs(a-w)<=De*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(o-S)<=De*Math.max(1,Math.abs(o),Math.abs(S))&&Math.abs(s-O)<=De*Math.max(1,Math.abs(s),Math.abs(O))&&Math.abs(l-M)<=De*Math.max(1,Math.abs(l),Math.abs(M))&&Math.abs(c-A)<=De*Math.max(1,Math.abs(c),Math.abs(A))&&Math.abs(u-T)<=De*Math.max(1,Math.abs(u),Math.abs(T))&&Math.abs(f-C)<=De*Math.max(1,Math.abs(f),Math.abs(C))&&Math.abs(h-P)<=De*Math.max(1,Math.abs(h),Math.abs(P))&&Math.abs(d-_)<=De*Math.max(1,Math.abs(d),Math.abs(_))&&Math.abs(p-k)<=De*Math.max(1,Math.abs(p),Math.abs(k))&&Math.abs(v-I)<=De*Math.max(1,Math.abs(v),Math.abs(I))&&Math.abs(g-L)<=De*Math.max(1,Math.abs(g),Math.abs(L))&&Math.abs(y-F)<=De*Math.max(1,Math.abs(y),Math.abs(F))}var CR=Vn,bU=TR;const wU=Object.freeze(Object.defineProperty({__proto__:null,add:vU,adjoint:JX,clone:lS,copy:al,create:pe,determinant:mR,equals:xU,exactEquals:mU,frob:pU,fromQuat:fS,fromQuat2:oU,fromRotation:nU,fromRotationTranslation:wR,fromRotationTranslationScale:sU,fromRotationTranslationScaleOrigin:Nf,fromScaling:uS,fromTranslation:cS,fromValues:QX,fromXRotation:rU,fromYRotation:iU,fromZRotation:aU,frustum:lU,getRotation:hg,getScaling:Bc,getTranslation:fg,identity:gd,invert:_i,lookAt:ER,mul:CR,multiply:Vn,multiplyScalar:gU,multiplyScalarAndAdd:yU,ortho:MR,orthoNO:OR,orthoZO:AR,perspective:cU,perspectiveFromFieldOfView:fU,perspectiveNO:SR,perspectiveZO:uU,rotate:tU,rotateX:xR,rotateY:bR,rotateZ:eU,scale:ug,set:yb,str:dU,sub:bU,subtract:TR,targetTo:hU,translate:Ro,transpose:yR},Symbol.toStringTag,{value:"Module"}));function $t(){var t=new nn(3);return nn!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Ca(t){var n=new nn(3);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n}function La(t){var n=t[0],e=t[1],r=t[2];return Math.hypot(n,e,r)}function Ut(t,n,e){var r=new nn(3);return r[0]=t,r[1]=n,r[2]=e,r}function br(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t}function Pi(t,n,e,r){return t[0]=n,t[1]=e,t[2]=r,t}function bc(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t}function lT(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t}function SU(t,n,e){return t[0]=n[0]*e[0],t[1]=n[1]*e[1],t[2]=n[2]*e[2],t}function mb(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t}function OU(t,n){var e=n[0]-t[0],r=n[1]-t[1],i=n[2]-t[2];return Math.hypot(e,r,i)}function Hs(t,n){var e=n[0],r=n[1],i=n[2],a=e*e+r*r+i*i;return a>0&&(a=1/Math.sqrt(a)),t[0]=n[0]*a,t[1]=n[1]*a,t[2]=n[2]*a,t}function ea(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function Lv(t,n,e){var r=n[0],i=n[1],a=n[2],o=e[0],s=e[1],l=e[2];return t[0]=i*l-a*s,t[1]=a*o-r*l,t[2]=r*s-i*o,t}function xb(t,n,e,r){var i=n[0],a=n[1],o=n[2];return t[0]=i+r*(e[0]-i),t[1]=a+r*(e[1]-a),t[2]=o+r*(e[2]-o),t}function vn(t,n,e){var r=n[0],i=n[1],a=n[2],o=e[3]*r+e[7]*i+e[11]*a+e[15];return o=o||1,t[0]=(e[0]*r+e[4]*i+e[8]*a+e[12])/o,t[1]=(e[1]*r+e[5]*i+e[9]*a+e[13])/o,t[2]=(e[2]*r+e[6]*i+e[10]*a+e[14])/o,t}function ol(t,n,e){var r=n[0],i=n[1],a=n[2];return t[0]=r*e[0]+i*e[3]+a*e[6],t[1]=r*e[1]+i*e[4]+a*e[7],t[2]=r*e[2]+i*e[5]+a*e[8],t}function MU(t,n,e){var r=e[0],i=e[1],a=e[2],o=e[3],s=n[0],l=n[1],c=n[2],u=i*c-a*l,f=a*s-r*c,h=r*l-i*s,d=i*h-a*f,p=a*u-r*h,v=r*f-i*u,g=o*2;return u*=g,f*=g,h*=g,d*=2,p*=2,v*=2,t[0]=s+u+d,t[1]=l+f+p,t[2]=c+h+v,t}function qu(t,n){var e=t[0],r=t[1],i=t[2],a=n[0],o=n[1],s=n[2];return Math.abs(e-a)<=De*Math.max(1,Math.abs(e),Math.abs(a))&&Math.abs(r-o)<=De*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(i-s)<=De*Math.max(1,Math.abs(i),Math.abs(s))}var cT=OU,PR=La;(function(){var t=$t();return function(n,e,r,i,a,o){var s,l;for(e||(e=3),r||(r=0),i?l=Math.min(i*e+r,n.length):l=n.length,s=r;s<l;s+=e)t[0]=n[s],t[1]=n[s+1],t[2]=n[s+2],a(t,t,o),n[s]=t[0],n[s+1]=t[1],n[s+2]=t[2];return n}})();function cc(){var t=new nn(4);return nn!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function AU(t,n,e,r){var i=new nn(4);return i[0]=t,i[1]=n,i[2]=e,i[3]=r,i}function EU(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t}function TU(t,n){var e=n[0],r=n[1],i=n[2],a=n[3],o=e*e+r*r+i*i+a*a;return o>0&&(o=1/Math.sqrt(o)),t[0]=e*o,t[1]=r*o,t[2]=i*o,t[3]=a*o,t}function uc(t,n,e){var r=n[0],i=n[1],a=n[2],o=n[3];return t[0]=e[0]*r+e[4]*i+e[8]*a+e[12]*o,t[1]=e[1]*r+e[5]*i+e[9]*a+e[13]*o,t[2]=e[2]*r+e[6]*i+e[10]*a+e[14]*o,t[3]=e[3]*r+e[7]*i+e[11]*a+e[15]*o,t}(function(){var t=cc();return function(n,e,r,i,a,o){var s,l;for(e||(e=4),r||(r=0),i?l=Math.min(i*e+r,n.length):l=n.length,s=r;s<l;s+=e)t[0]=n[s],t[1]=n[s+1],t[2]=n[s+2],t[3]=n[s+3],a(t,t,o),n[s]=t[0],n[s+1]=t[1],n[s+2]=t[2],n[s+3]=t[3];return n}})();function on(){var t=new nn(4);return nn!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Po(t,n,e){e=e*.5;var r=Math.sin(e);return t[0]=r*n[0],t[1]=r*n[1],t[2]=r*n[2],t[3]=Math.cos(e),t}function Bo(t,n,e){var r=n[0],i=n[1],a=n[2],o=n[3],s=e[0],l=e[1],c=e[2],u=e[3];return t[0]=r*u+o*s+i*c-a*l,t[1]=i*u+o*l+a*s-r*c,t[2]=a*u+o*c+r*l-i*s,t[3]=o*u-r*s-i*l-a*c,t}function c1(t,n,e,r){var i=n[0],a=n[1],o=n[2],s=n[3],l=e[0],c=e[1],u=e[2],f=e[3],h,d,p,v,g;return d=i*l+a*c+o*u+s*f,d<0&&(d=-d,l=-l,c=-c,u=-u,f=-f),1-d>De?(h=Math.acos(d),p=Math.sin(h),v=Math.sin((1-r)*h)/p,g=Math.sin(r*h)/p):(v=1-r,g=r),t[0]=v*i+g*l,t[1]=v*a+g*c,t[2]=v*o+g*u,t[3]=v*s+g*f,t}function u1(t,n){var e=n[0],r=n[1],i=n[2],a=n[3],o=e*e+r*r+i*i+a*a,s=o?1/o:0;return t[0]=-e*s,t[1]=-r*s,t[2]=-i*s,t[3]=a*s,t}function CU(t,n){var e=n[0]+n[4]+n[8],r;if(e>0)r=Math.sqrt(e+1),t[3]=.5*r,r=.5/r,t[0]=(n[5]-n[7])*r,t[1]=(n[6]-n[2])*r,t[2]=(n[1]-n[3])*r;else{var i=0;n[4]>n[0]&&(i=1),n[8]>n[i*3+i]&&(i=2);var a=(i+1)%3,o=(i+2)%3;r=Math.sqrt(n[i*3+i]-n[a*3+a]-n[o*3+o]+1),t[i]=.5*r,r=.5/r,t[3]=(n[a*3+o]-n[o*3+a])*r,t[a]=(n[a*3+i]+n[i*3+a])*r,t[o]=(n[o*3+i]+n[i*3+o])*r}return t}function up(t,n,e,r){var i=.5*Math.PI/180;n*=i,e*=i,r*=i;var a=Math.sin(n),o=Math.cos(n),s=Math.sin(e),l=Math.cos(e),c=Math.sin(r),u=Math.cos(r);return t[0]=a*l*u-o*s*c,t[1]=o*s*u+a*l*c,t[2]=o*l*c-a*s*u,t[3]=o*l*u+a*s*c,t}var f1=AU,fp=EU,uT=Bo,dg=TU;(function(){var t=$t(),n=Ut(1,0,0),e=Ut(0,1,0);return function(r,i,a){var o=ea(i,a);return o<-.999999?(Lv(t,n,i),PR(t)<1e-6&&Lv(t,e,i),Hs(t,t),Po(r,t,Math.PI),r):o>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(Lv(t,i,a),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=1+o,dg(r,r))}})();(function(){var t=on(),n=on();return function(e,r,i,a,o,s){return c1(t,r,o,s),c1(n,i,a,s),c1(e,t,n,2*s*(1-s)),e}})();(function(){var t=Eu();return function(n,e,r,i){return t[0]=r[0],t[3]=r[1],t[6]=r[2],t[1]=i[0],t[4]=i[1],t[7]=i[2],t[2]=-e[0],t[5]=-e[1],t[8]=-e[2],dg(n,CU(n,t))}})();function PU(){var t=new nn(2);return nn!=Float32Array&&(t[0]=0,t[1]=0),t}function kU(t,n){var e=new nn(2);return e[0]=t,e[1]=n,e}function _U(t,n){return t[0]=n[0],t[1]=n[1],t}function na(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t}function kR(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t}function An(t,n,e){return t[0]=Math.min(n[0],e[0]),t[1]=Math.min(n[1],e[1]),t}function En(t,n,e){return t[0]=Math.max(n[0],e[0]),t[1]=Math.max(n[1],e[1]),t}function nr(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t}function Nc(t,n){var e=n[0]-t[0],r=n[1]-t[1];return Math.hypot(e,r)}function fc(t){var n=t[0],e=t[1];return Math.hypot(n,e)}function hS(t,n){var e=n[0],r=n[1],i=e*e+r*r;return i>0&&(i=1/Math.sqrt(i)),t[0]=n[0]*i,t[1]=n[1]*i,t}function _R(t,n){return t[0]*n[0]+t[1]*n[1]}function LU(t,n,e){var r=n[0],i=n[1];return t[0]=e[0]*r+e[3]*i+e[6],t[1]=e[1]*r+e[4]*i+e[7],t}function bb(t,n){var e=t[0],r=t[1],i=n[0],a=n[1],o=Math.sqrt(e*e+r*r)*Math.sqrt(i*i+a*a),s=o&&(e*i+r*a)/o;return Math.acos(Math.min(Math.max(s,-1),1))}function LR(t,n){return t[0]===n[0]&&t[1]===n[1]}var Xs=kR;(function(){var t=PU();return function(n,e,r,i,a,o){var s,l;for(e||(e=2),r||(r=0),i?l=Math.min(i*e+r,n.length):l=n.length,s=r;s<l;s+=e)t[0]=n[s],t[1]=n[s+1],a(t,t,o),n[s]=t[0],n[s+1]=t[1];return n}})();function ec(t,n,e){var r=[0,0,0,0,0,0,0,0,0];return pR(r,e),vd(t,r,n)}function dS(t,n,e){var r=[0,0,0,0,0,0,0,0,0];return vR(r,e),vd(t,r,n)}function IR(t,n,e){var r=[0,0,0,0,0,0,0,0,0];return gR(r,e),vd(t,r,n)}function IU(t,n,e){return vd(t,e,n)}function sn(t,n){for(var e=t?[].concat(t):[1,0,0,0,1,0,0,0,1],r=0,i=n.length;r<i;r++){var a=n[r];switch(a[0]){case"t":ec(e,e,[a[1],a[2]]);break;case"s":IR(e,e,[a[1],a[2]]);break;case"r":dS(e,e,a[1]);break;case"m":IU(e,e,a[1]);break}}return e}function FU(t,n){return t[0]*n[1]-n[0]*t[1]}function pS(t,n,e){var r=bb(t,n),i=FU(t,n)>=0;return e?i?Math.PI*2-r:r:i?r:Math.PI*2-r}function fT(t,n){var e=[],r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],c=t[6],u=t[7],f=t[8],h=n[0],d=n[1],p=n[2],v=n[3],g=n[4],y=n[5],m=n[6],x=n[7],b=n[8];return e[0]=h*r+d*o+p*c,e[1]=h*i+d*s+p*u,e[2]=h*a+d*l+p*f,e[3]=v*r+g*o+y*c,e[4]=v*i+g*s+y*u,e[5]=v*a+g*l+y*f,e[6]=m*r+x*o+b*c,e[7]=m*i+x*s+b*u,e[8]=m*a+x*l+b*f,e}function Da(t,n){var e=[],r=n[0],i=n[1];return e[0]=t[0]*r+t[3]*i+t[6],e[1]=t[1]*r+t[4]*i+t[7],e}function e0(t){var n=[],e=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],c=t[7],u=t[8],f=u*o-s*c,h=-u*a+s*l,d=c*a-o*l,p=e*f+r*h+i*d;return p?(p=1/p,n[0]=f*p,n[1]=(-u*r+i*c)*p,n[2]=(s*r-i*o)*p,n[3]=h*p,n[4]=(u*e-i*l)*p,n[5]=(-s*e+i*a)*p,n[6]=d*p,n[7]=(-c*e+r*l)*p,n[8]=(o*e-r*a)*p,n):null}var Zu=sn,h1="matrix",DU=["zIndex","capture","visible","type"],RU=["repeat"],BU=":",NU="*";function $U(t){for(var n=[],e=0;e<t.length;e++)et(t[e])?n.push([].concat(t[e])):n.push(t[e]);return n}function jU(t,n){var e={},r=n.attrs;for(var i in t)e[i]=r[i];return e}function zU(t,n){var e={},r=n.attr();return $(t,function(i,a){RU.indexOf(a)===-1&&!Ne(r[a],i)&&(e[a]=i)}),e}function GU(t,n){if(n.onFrame)return t;var e=n.startTime,r=n.delay,i=n.duration,a=Object.prototype.hasOwnProperty;return $(t,function(o){e+r<o.startTime+o.delay+o.duration&&i>o.delay&&$(n.toAttrs,function(s,l){a.call(o.toAttrs,l)&&(delete o.toAttrs[l],delete o.fromAttrs[l])})}),t}var FR=function(t){G(n,t);function n(e){var r=t.call(this,e)||this;r.attrs={};var i=r.getDefaultAttrs();return Jt(i,e.attrs),r.attrs=i,r.initAttrs(i),r.initAnimate(),r}return n.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},n.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},n.prototype.onCanvasChange=function(e){},n.prototype.initAttrs=function(e){},n.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},n.prototype.isGroup=function(){return!1},n.prototype.getParent=function(){return this.get("parent")},n.prototype.getCanvas=function(){return this.get("canvas")},n.prototype.attr=function(){for(var e,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var a=r[0],o=r[1];if(!a)return this.attrs;if(Qt(a)){for(var s in a)this.setAttr(s,a[s]);return this.afterAttrsChange(a),this}return r.length===2?(this.setAttr(a,o),this.afterAttrsChange((e={},e[a]=o,e)),this):this.attrs[a]},n.prototype.isClipped=function(e,r){var i=this.getClip();return i&&!i.isHit(e,r)},n.prototype.setAttr=function(e,r){var i=this.attrs[e];i!==r&&(this.attrs[e]=r,this.onAttrChange(e,r,i))},n.prototype.onAttrChange=function(e,r,i){e==="matrix"&&this.set("totalMatrix",null)},n.prototype.afterAttrsChange=function(e){if(this.cfg.isClipShape){var r=this.cfg.applyTo;r&&r.onCanvasChange("clip")}else this.onCanvasChange("attr")},n.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},n.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},n.prototype.setZIndex=function(e){this.set("zIndex",e);var r=this.getParent();return r&&r.sort(),this},n.prototype.toFront=function(){var e=this.getParent();if(e){var r=e.getChildren();this.get("el");var i=r.indexOf(this);r.splice(i,1),r.push(this),this.onCanvasChange("zIndex")}},n.prototype.toBack=function(){var e=this.getParent();if(e){var r=e.getChildren();this.get("el");var i=r.indexOf(this);r.splice(i,1),r.unshift(this),this.onCanvasChange("zIndex")}},n.prototype.remove=function(e){e===void 0&&(e=!0);var r=this.getParent();r?(uR(r.getChildren(),this),r.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),e&&this.destroy()},n.prototype.resetMatrix=function(){this.attr(h1,this.getDefaultMatrix()),this.onCanvasChange("matrix")},n.prototype.getMatrix=function(){return this.attr(h1)},n.prototype.setMatrix=function(e){this.attr(h1,e),this.onCanvasChange("matrix")},n.prototype.getTotalMatrix=function(){var e=this.cfg.totalMatrix;if(!e){var r=this.attr("matrix"),i=this.cfg.parentMatrix;i&&r?e=fT(i,r):e=r||i,this.set("totalMatrix",e)}return e},n.prototype.applyMatrix=function(e){var r=this.attr("matrix"),i=null;e&&r?i=fT(e,r):i=r||e,this.set("totalMatrix",i),this.set("parentMatrix",e)},n.prototype.getDefaultMatrix=function(){return null},n.prototype.applyToMatrix=function(e){var r=this.attr("matrix");return r?Da(r,e):e},n.prototype.invertFromMatrix=function(e){var r=this.attr("matrix");if(r){var i=e0(r);if(i)return Da(i,e)}return e},n.prototype.setClip=function(e){var r=this.getCanvas(),i=null;if(e){var a=this.getShapeBase(),o=Cl(e.type),s=a[o];s&&(i=new s({type:e.type,isClipShape:!0,applyTo:this,attrs:e.attrs,canvas:r}))}return this.set("clipShape",i),this.onCanvasChange("clip"),i},n.prototype.getClip=function(){var e=this.cfg.clipShape;return e||null},n.prototype.clone=function(){var e=this,r=this.attrs,i={};$(r,function(s,l){et(r[l])?i[l]=$U(r[l]):i[l]=r[l]});var a=this.constructor,o=new a({attrs:i});return $(DU,function(s){o.set(s,e.get(s))}),o},n.prototype.destroy=function(){var e=this.destroyed;e||(this.attrs={},t.prototype.destroy.call(this))},n.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},n.prototype.animate=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];if(!(!this.get("timeline")&&!this.get("canvas"))){this.set("animating",!0);var i=this.get("timeline");i||(i=this.get("canvas").get("timeline"),this.set("timeline",i));var a=this.get("animations")||[];i.timer||i.initTimer();var o=e[0],s=e[1],l=e[2],c=l===void 0?"easeLinear":l,u=e[3],f=u===void 0?Co:u,h=e[4],d=h===void 0?0:h,p,v,g,y,m;ut(o)?(p=o,o={}):Qt(o)&&o.onFrame&&(p=o.onFrame,v=o.repeat),Qt(s)?(m=s,s=m.duration,c=m.easing||"easeLinear",d=m.delay||0,v=m.repeat||v||!1,f=m.callback||Co,g=m.pauseCallback||Co,y=m.resumeCallback||Co):(bt(f)&&(d=f,f=null),ut(c)?(f=c,c="easeLinear"):c=c||"easeLinear");var x=zU(o,this),b={fromAttrs:jU(x,this),toAttrs:x,duration:s,easing:c,repeat:v,callback:f,pauseCallback:g,resumeCallback:y,delay:d,startTime:i.getTime(),id:os(),onFrame:p,pathFormatted:!1};a.length>0?a=GU(a,b):i.addAnimator(this),a.push(b),this.set("animations",a),this.set("_pause",{isPaused:!1})}},n.prototype.stopAnimate=function(e){var r=this;e===void 0&&(e=!0);var i=this.get("animations");$(i,function(a){e&&(a.onFrame?r.attr(a.onFrame(1)):r.attr(a.toAttrs)),a.callback&&a.callback()}),this.set("animating",!1),this.set("animations",[])},n.prototype.pauseAnimate=function(){var e=this.get("timeline"),r=this.get("animations"),i=e.getTime();return $(r,function(a){a._paused=!0,a._pauseTime=i,a.pauseCallback&&a.pauseCallback()}),this.set("_pause",{isPaused:!0,pauseTime:i}),this},n.prototype.resumeAnimate=function(){var e=this.get("timeline"),r=e.getTime(),i=this.get("animations"),a=this.get("_pause").pauseTime;return $(i,function(o){o.startTime=o.startTime+(r-a),o._paused=!1,o._pauseTime=null,o.resumeCallback&&o.resumeCallback()}),this.set("_pause",{isPaused:!1}),this.set("animations",i),this},n.prototype.emitDelegation=function(e,r){var i=this,a=r.propagationPath;this.getEvents();var o;e==="mouseenter"?o=r.fromShape:e==="mouseleave"&&(o=r.toShape);for(var s=function(f){var h=a[f],d=h.get("name");if(d){if((h.isGroup()||h.isCanvas&&h.isCanvas())&&o&&fR(h,o))return"break";et(d)?$(d,function(p){i.emitDelegateEvent(h,p,r)}):l.emitDelegateEvent(h,d,r)}},l=this,c=0;c<a.length;c++){var u=s(c);if(u==="break")break}},n.prototype.emitDelegateEvent=function(e,r,i){var a=this.getEvents(),o=r+BU+i.type;(a[o]||a[NU])&&(i.name=o,i.currentTarget=e,i.delegateTarget=this,i.delegateObject=e.get("delegateObject"),this.emit(o,i))},n.prototype.translate=function(e,r){e===void 0&&(e=0),r===void 0&&(r=0);var i=this.getMatrix(),a=Zu(i,[["t",e,r]]);return this.setMatrix(a),this},n.prototype.move=function(e,r){var i=this.attr("x")||0,a=this.attr("y")||0;return this.translate(e-i,r-a),this},n.prototype.moveTo=function(e,r){return this.move(e,r)},n.prototype.scale=function(e,r){var i=this.getMatrix(),a=Zu(i,[["s",e,r||e]]);return this.setMatrix(a),this},n.prototype.rotate=function(e){var r=this.getMatrix(),i=Zu(r,[["r",e]]);return this.setMatrix(i),this},n.prototype.rotateAtStart=function(e){var r=this.attr(),i=r.x,a=r.y,o=this.getMatrix(),s=Zu(o,[["t",-i,-a],["r",e],["t",i,a]]);return this.setMatrix(s),this},n.prototype.rotateAtPoint=function(e,r,i){var a=this.getMatrix(),o=Zu(a,[["t",-e,-r],["r",i],["t",e,r]]);return this.setMatrix(o),this},n}(t0),hT={},wb="_INDEX";function DR(t,n){if(t.set("canvas",n),t.isGroup()){var e=t.get("children");e.length&&e.forEach(function(r){DR(r,n)})}}function RR(t,n){if(t.set("timeline",n),t.isGroup()){var e=t.get("children");e.length&&e.forEach(function(r){RR(r,n)})}}function YU(t,n,e){e===void 0&&(e=!0),e?n.destroy():(n.set("parent",null),n.set("canvas",null)),uR(t.getChildren(),n)}function WU(t){return function(n,e){var r=t(n,e);return r===0?n[wb]-e[wb]:r}}var BR=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.isCanvas=function(){return!1},n.prototype.getBBox=function(){var e=1/0,r=-1/0,i=1/0,a=-1/0,o=this.getChildren().filter(function(l){return l.get("visible")&&(!l.isGroup()||l.isGroup()&&l.getChildren().length>0)});o.length>0?$(o,function(l){var c=l.getBBox(),u=c.minX,f=c.maxX,h=c.minY,d=c.maxY;u<e&&(e=u),f>r&&(r=f),h<i&&(i=h),d>a&&(a=d)}):(e=0,r=0,i=0,a=0);var s={x:e,y:i,minX:e,minY:i,maxX:r,maxY:a,width:r-e,height:a-i};return s},n.prototype.getCanvasBBox=function(){var e=1/0,r=-1/0,i=1/0,a=-1/0,o=this.getChildren().filter(function(l){return l.get("visible")&&(!l.isGroup()||l.isGroup()&&l.getChildren().length>0)});o.length>0?$(o,function(l){var c=l.getCanvasBBox(),u=c.minX,f=c.maxX,h=c.minY,d=c.maxY;u<e&&(e=u),f>r&&(r=f),h<i&&(i=h),d>a&&(a=d)}):(e=0,r=0,i=0,a=0);var s={x:e,y:i,minX:e,minY:i,maxX:r,maxY:a,width:r-e,height:a-i};return s},n.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.children=[],e},n.prototype.onAttrChange=function(e,r,i){if(t.prototype.onAttrChange.call(this,e,r,i),e==="matrix"){var a=this.getTotalMatrix();this._applyChildrenMarix(a)}},n.prototype.applyMatrix=function(e){var r=this.getTotalMatrix();t.prototype.applyMatrix.call(this,e);var i=this.getTotalMatrix();i!==r&&this._applyChildrenMarix(i)},n.prototype._applyChildrenMarix=function(e){var r=this.getChildren();$(r,function(i){i.applyMatrix(e)})},n.prototype.addShape=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var i=e[0],a=e[1];Qt(i)?a=i:a.type=i;var o=hT[a.type];o||(o=Cl(a.type),hT[a.type]=o);var s=this.getShapeBase(),l=new s[o](a);return this.add(l),l},n.prototype.addGroup=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var i=e[0],a=e[1],o;if(ut(i))a?o=new i(a):o=new i({parent:this});else{var s=i||{},l=this.getGroupBase();o=new l(s)}return this.add(o),o},n.prototype.getCanvas=function(){var e;return this.isCanvas()?e=this:e=this.get("canvas"),e},n.prototype.getShape=function(e,r,i){if(!fh(this))return null;var a=this.getChildren(),o;if(this.isCanvas())o=this._findShape(a,e,r,i);else{var s=[e,r,1];s=this.invertFromMatrix(s),this.isClipped(s[0],s[1])||(o=this._findShape(a,s[0],s[1],i))}return o},n.prototype._findShape=function(e,r,i,a){for(var o=null,s=e.length-1;s>=0;s--){var l=e[s];if(fh(l)&&(l.isGroup()?o=l.getShape(r,i,a):l.isHit(r,i)&&(o=l)),o)break}return o},n.prototype.add=function(e){var r=this.getCanvas(),i=this.getChildren(),a=this.get("timeline"),o=e.getParent();o&&YU(o,e,!1),e.set("parent",this),r&&DR(e,r),a&&RR(e,a),i.push(e),e.onCanvasChange("add"),this._applyElementMatrix(e)},n.prototype._applyElementMatrix=function(e){var r=this.getTotalMatrix();r&&e.applyMatrix(r)},n.prototype.getChildren=function(){return this.get("children")},n.prototype.sort=function(){var e=this.getChildren();$(e,function(r,i){return r[wb]=i,r}),e.sort(WU(function(r,i){return r.get("zIndex")-i.get("zIndex")})),this.onCanvasChange("sort")},n.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var e=this.getChildren(),r=e.length-1;r>=0;r--)e[r].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},n.prototype.destroy=function(){this.get("destroyed")||(this.clear(),t.prototype.destroy.call(this))},n.prototype.getFirst=function(){return this.getChildByIndex(0)},n.prototype.getLast=function(){var e=this.getChildren();return this.getChildByIndex(e.length-1)},n.prototype.getChildByIndex=function(e){var r=this.getChildren();return r[e]},n.prototype.getCount=function(){var e=this.getChildren();return e.length},n.prototype.contain=function(e){var r=this.getChildren();return r.indexOf(e)>-1},n.prototype.removeChild=function(e,r){r===void 0&&(r=!0),this.contain(e)&&e.remove(r)},n.prototype.findAll=function(e){var r=[],i=this.getChildren();return $(i,function(a){e(a)&&r.push(a),a.isGroup()&&(r=r.concat(a.findAll(e)))}),r},n.prototype.find=function(e){var r=null,i=this.getChildren();return $(i,function(a){if(e(a)?r=a:a.isGroup()&&(r=a.find(e)),r)return!1}),r},n.prototype.findById=function(e){return this.find(function(r){return r.get("id")===e})},n.prototype.findByClassName=function(e){return this.find(function(r){return r.get("className")===e})},n.prototype.findAllByName=function(e){return this.findAll(function(r){return r.get("name")===e})},n}(FR),$c=0,gf=0,Ku=0,NR=1e3,pg,yf,vg=0,sl=0,n0=0,hh=typeof performance=="object"&&performance.now?performance:Date,$R=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function jR(){return sl||($R(VU),sl=hh.now()+n0)}function VU(){sl=0}function Sb(){this._call=this._time=this._next=null}Sb.prototype=vS.prototype={constructor:Sb,restart:function(t,n,e){if(typeof t!="function")throw new TypeError("callback is not a function");e=(e==null?jR():+e)+(n==null?0:+n),!this._next&&yf!==this&&(yf?yf._next=this:pg=this,yf=this),this._call=t,this._time=e,Ob()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ob())}};function vS(t,n,e){var r=new Sb;return r.restart(t,n,e),r}function HU(){jR(),++$c;for(var t=pg,n;t;)(n=sl-t._time)>=0&&t._call.call(null,n),t=t._next;--$c}function dT(){sl=(vg=hh.now())+n0,$c=gf=0;try{HU()}finally{$c=0,UU(),sl=0}}function XU(){var t=hh.now(),n=t-vg;n>NR&&(n0-=n,vg=t)}function UU(){for(var t,n=pg,e,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:pg=e);yf=t,Ob(r)}function Ob(t){if(!$c){gf&&(gf=clearTimeout(gf));var n=t-sl;n>24?(t<1/0&&(gf=setTimeout(dT,t-hh.now()-n0)),Ku&&(Ku=clearInterval(Ku))):(Ku||(vg=hh.now(),Ku=setInterval(XU,NR)),$c=1,$R(dT))}}function r0(t,n,e){t.prototype=n.prototype=e,e.constructor=t}function gS(t,n){var e=Object.create(t.prototype);for(var r in n)e[r]=n[r];return e}function Tu(){}var ll=.7,jc=1/ll,wc="\\s*([+-]?\\d+)\\s*",dh="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",la="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",qU=/^#([0-9a-f]{3,8})$/,ZU=new RegExp("^rgb\\("+[wc,wc,wc]+"\\)$"),KU=new RegExp("^rgb\\("+[la,la,la]+"\\)$"),QU=new RegExp("^rgba\\("+[wc,wc,wc,dh]+"\\)$"),JU=new RegExp("^rgba\\("+[la,la,la,dh]+"\\)$"),tq=new RegExp("^hsl\\("+[dh,la,la]+"\\)$"),eq=new RegExp("^hsla\\("+[dh,la,la,dh]+"\\)$"),pT={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};r0(Tu,zc,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:vT,formatHex:vT,formatHsl:nq,formatRgb:gT,toString:gT});function vT(){return this.rgb().formatHex()}function nq(){return GR(this).formatHsl()}function gT(){return this.rgb().formatRgb()}function zc(t){var n,e;return t=(t+"").trim().toLowerCase(),(n=qU.exec(t))?(e=n[1].length,n=parseInt(n[1],16),e===6?yT(n):e===3?new ir(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):e===8?hp(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):e===4?hp(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=ZU.exec(t))?new ir(n[1],n[2],n[3],1):(n=KU.exec(t))?new ir(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=QU.exec(t))?hp(n[1],n[2],n[3],n[4]):(n=JU.exec(t))?hp(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=tq.exec(t))?bT(n[1],n[2]/100,n[3]/100,1):(n=eq.exec(t))?bT(n[1],n[2]/100,n[3]/100,n[4]):pT.hasOwnProperty(t)?yT(pT[t]):t==="transparent"?new ir(NaN,NaN,NaN,0):null}function yT(t){return new ir(t>>16&255,t>>8&255,t&255,1)}function hp(t,n,e,r){return r<=0&&(t=n=e=NaN),new ir(t,n,e,r)}function zR(t){return t instanceof Tu||(t=zc(t)),t?(t=t.rgb(),new ir(t.r,t.g,t.b,t.opacity)):new ir}function ph(t,n,e,r){return arguments.length===1?zR(t):new ir(t,n,e,r??1)}function ir(t,n,e,r){this.r=+t,this.g=+n,this.b=+e,this.opacity=+r}r0(ir,ph,gS(Tu,{brighter:function(t){return t=t==null?jc:Math.pow(jc,t),new ir(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=t==null?ll:Math.pow(ll,t),new ir(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:mT,formatHex:mT,formatRgb:xT,toString:xT}));function mT(){return"#"+d1(this.r)+d1(this.g)+d1(this.b)}function xT(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}function d1(t){return t=Math.max(0,Math.min(255,Math.round(t)||0)),(t<16?"0":"")+t.toString(16)}function bT(t,n,e,r){return r<=0?t=n=e=NaN:e<=0||e>=1?t=n=NaN:n<=0&&(t=NaN),new Ki(t,n,e,r)}function GR(t){if(t instanceof Ki)return new Ki(t.h,t.s,t.l,t.opacity);if(t instanceof Tu||(t=zc(t)),!t)return new Ki;if(t instanceof Ki)return t;t=t.rgb();var n=t.r/255,e=t.g/255,r=t.b/255,i=Math.min(n,e,r),a=Math.max(n,e,r),o=NaN,s=a-i,l=(a+i)/2;return s?(n===a?o=(e-r)/s+(e<r)*6:e===a?o=(r-n)/s+2:o=(n-e)/s+4,s/=l<.5?a+i:2-a-i,o*=60):s=l>0&&l<1?0:o,new Ki(o,s,l,t.opacity)}function rq(t,n,e,r){return arguments.length===1?GR(t):new Ki(t,n,e,r??1)}function Ki(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}r0(Ki,rq,gS(Tu,{brighter:function(t){return t=t==null?jc:Math.pow(jc,t),new Ki(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?ll:Math.pow(ll,t),new Ki(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,n=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*n,i=2*e-r;return new ir(p1(t>=240?t-240:t+120,i,r),p1(t,i,r),p1(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(t===1?")":", "+t+")")}}));function p1(t,n,e){return(t<60?n+(e-n)*t/60:t<180?e:t<240?n+(e-n)*(240-t)/60:n)*255}var iq=Math.PI/180,aq=180/Math.PI,YR=-.14861,yS=1.78277,mS=-.29227,i0=-.90649,vh=1.97294,wT=vh*i0,ST=vh*yS,OT=yS*mS-i0*YR;function oq(t){if(t instanceof Us)return new Us(t.h,t.s,t.l,t.opacity);t instanceof ir||(t=zR(t));var n=t.r/255,e=t.g/255,r=t.b/255,i=(OT*r+wT*n-ST*e)/(OT+wT-ST),a=r-i,o=(vh*(e-i)-mS*a)/i0,s=Math.sqrt(o*o+a*a)/(vh*i*(1-i)),l=s?Math.atan2(o,a)*aq-120:NaN;return new Us(l<0?l+360:l,s,i,t.opacity)}function pa(t,n,e,r){return arguments.length===1?oq(t):new Us(t,n,e,r??1)}function Us(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}r0(Us,pa,gS(Tu,{brighter:function(t){return t=t==null?jc:Math.pow(jc,t),new Us(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?ll:Math.pow(ll,t),new Us(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*iq,n=+this.l,e=isNaN(this.s)?0:this.s*n*(1-n),r=Math.cos(t),i=Math.sin(t);return new ir(255*(n+e*(YR*r+yS*i)),255*(n+e*(mS*r+i0*i)),255*(n+e*(vh*r)),this.opacity)}}));function sq(t,n,e,r,i){var a=t*t,o=a*t;return((1-3*t+3*a-o)*n+(4-6*a+3*o)*e+(1+3*t+3*a-3*o)*r+o*i)/6}function lq(t){var n=t.length-1;return function(e){var r=e<=0?e=0:e>=1?(e=1,n-1):Math.floor(e*n),i=t[r],a=t[r+1],o=r>0?t[r-1]:2*i-a,s=r<n-1?t[r+2]:2*a-i;return sq((e-r/n)*n,o,i,a,s)}}const a0=t=>()=>t;function WR(t,n){return function(e){return t+e*n}}function cq(t,n,e){return t=Math.pow(t,e),n=Math.pow(n,e)-t,e=1/e,function(r){return Math.pow(t+r*n,e)}}function uq(t,n){var e=n-t;return e?WR(t,e>180||e<-180?e-360*Math.round(e/360):e):a0(isNaN(t)?n:t)}function fq(t){return(t=+t)==1?Sc:function(n,e){return e-n?cq(n,e,t):a0(isNaN(n)?e:n)}}function Sc(t,n){var e=n-t;return e?WR(t,e):a0(isNaN(t)?n:t)}const MT=function t(n){var e=fq(n);function r(i,a){var o=e((i=ph(i)).r,(a=ph(a)).r),s=e(i.g,a.g),l=e(i.b,a.b),c=Sc(i.opacity,a.opacity);return function(u){return i.r=o(u),i.g=s(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=t,r}(1);function hq(t){return function(n){var e=n.length,r=new Array(e),i=new Array(e),a=new Array(e),o,s;for(o=0;o<e;++o)s=ph(n[o]),r[o]=s.r||0,i[o]=s.g||0,a[o]=s.b||0;return r=t(r),i=t(i),a=t(a),s.opacity=1,function(l){return s.r=r(l),s.g=i(l),s.b=a(l),s+""}}}var dq=hq(lq);function VR(t,n){n||(n=[]);var e=t?Math.min(n.length,t.length):0,r=n.slice(),i;return function(a){for(i=0;i<e;++i)r[i]=t[i]*(1-a)+n[i]*a;return r}}function HR(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function pq(t,n){return(HR(n)?VR:XR)(t,n)}function XR(t,n){var e=n?n.length:0,r=t?Math.min(e,t.length):0,i=new Array(r),a=new Array(e),o;for(o=0;o<r;++o)i[o]=gg(t[o],n[o]);for(;o<e;++o)a[o]=n[o];return function(s){for(o=0;o<r;++o)a[o]=i[o](s);return a}}function vq(t,n){var e=new Date;return t=+t,n=+n,function(r){return e.setTime(t*(1-r)+n*r),e}}function Mb(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}}function gq(t,n){var e={},r={},i;(t===null||typeof t!="object")&&(t={}),(n===null||typeof n!="object")&&(n={});for(i in n)i in t?e[i]=gg(t[i],n[i]):r[i]=n[i];return function(a){for(i in e)r[i]=e[i](a);return r}}var Ab=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,v1=new RegExp(Ab.source,"g");function yq(t){return function(){return t}}function mq(t){return function(n){return t(n)+""}}function xq(t,n){var e=Ab.lastIndex=v1.lastIndex=0,r,i,a,o=-1,s=[],l=[];for(t=t+"",n=n+"";(r=Ab.exec(t))&&(i=v1.exec(n));)(a=i.index)>e&&(a=n.slice(e,a),s[o]?s[o]+=a:s[++o]=a),(r=r[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,l.push({i:o,x:Mb(r,i)})),e=v1.lastIndex;return e<n.length&&(a=n.slice(e),s[o]?s[o]+=a:s[++o]=a),s.length<2?l[0]?mq(l[0].x):yq(n):(n=l.length,function(c){for(var u=0,f;u<n;++u)s[(f=l[u]).i]=f.x(c);return s.join("")})}function gg(t,n){var e=typeof n,r;return n==null||e==="boolean"?a0(n):(e==="number"?Mb:e==="string"?(r=zc(n))?(n=r,MT):xq:n instanceof zc?MT:n instanceof Date?vq:HR(n)?VR:Array.isArray(n)?XR:typeof n.valueOf!="function"&&typeof n.toString!="function"||isNaN(n)?gq:Mb)(t,n)}function UR(t){return function n(e){e=+e;function r(i,a){var o=t((i=pa(i)).h,(a=pa(a)).h),s=Sc(i.s,a.s),l=Sc(i.l,a.l),c=Sc(i.opacity,a.opacity);return function(u){return i.h=o(u),i.s=s(u),i.l=l(Math.pow(u,e)),i.opacity=c(u),i+""}}return r.gamma=n,r}(1)}UR(uq);var xS=UR(Sc);function bq(t){return+t}function wq(t){return t*t}function Sq(t){return t*(2-t)}function AT(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function Oq(t){return t*t*t}function Mq(t){return--t*t*t+1}function ET(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var bS=3,Aq=function t(n){n=+n;function e(r){return Math.pow(r,n)}return e.exponent=t,e}(bS),Eq=function t(n){n=+n;function e(r){return 1-Math.pow(1-r,n)}return e.exponent=t,e}(bS),TT=function t(n){n=+n;function e(r){return((r*=2)<=1?Math.pow(r,n):2-Math.pow(2-r,n))/2}return e.exponent=t,e}(bS),qR=Math.PI,ZR=qR/2;function Tq(t){return+t==1?1:1-Math.cos(t*ZR)}function Cq(t){return Math.sin(t*ZR)}function CT(t){return(1-Math.cos(qR*t))/2}function Ho(t){return(Math.pow(2,-10*t)-.0009765625)*1.0009775171065494}function Pq(t){return Ho(1-+t)}function kq(t){return 1-Ho(t)}function PT(t){return((t*=2)<=1?Ho(1-t):2-Ho(t-1))/2}function _q(t){return 1-Math.sqrt(1-t*t)}function Lq(t){return Math.sqrt(1- --t*t)}function kT(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var Eb=4/11,Iq=6/11,Fq=8/11,Dq=3/4,Rq=9/11,Bq=10/11,Nq=15/16,$q=21/22,jq=63/64,dp=1/Eb/Eb;function zq(t){return 1-gh(1-t)}function gh(t){return(t=+t)<Eb?dp*t*t:t<Fq?dp*(t-=Iq)*t+Dq:t<Bq?dp*(t-=Rq)*t+Nq:dp*(t-=$q)*t+jq}function Gq(t){return((t*=2)<=1?1-gh(1-t):gh(t-1)+1)/2}var wS=1.70158,Yq=function t(n){n=+n;function e(r){return(r=+r)*r*(n*(r-1)+r)}return e.overshoot=t,e}(wS),Wq=function t(n){n=+n;function e(r){return--r*r*((r+1)*n+r)+1}return e.overshoot=t,e}(wS),_T=function t(n){n=+n;function e(r){return((r*=2)<1?r*r*((n+1)*r-n):(r-=2)*r*((n+1)*r+n)+2)/2}return e.overshoot=t,e}(wS),Gc=2*Math.PI,SS=1,OS=.3,Vq=function t(n,e){var r=Math.asin(1/(n=Math.max(1,n)))*(e/=Gc);function i(a){return n*Ho(- --a)*Math.sin((r-a)/e)}return i.amplitude=function(a){return t(a,e*Gc)},i.period=function(a){return t(n,a)},i}(SS,OS),LT=function t(n,e){var r=Math.asin(1/(n=Math.max(1,n)))*(e/=Gc);function i(a){return 1-n*Ho(a=+a)*Math.sin((a+r)/e)}return i.amplitude=function(a){return t(a,e*Gc)},i.period=function(a){return t(n,a)},i}(SS,OS),Hq=function t(n,e){var r=Math.asin(1/(n=Math.max(1,n)))*(e/=Gc);function i(a){return((a=a*2-1)<0?n*Ho(-a)*Math.sin((r-a)/e):2-n*Ho(a)*Math.sin((r+a)/e))/2}return i.amplitude=function(a){return t(a,e*Gc)},i.period=function(a){return t(n,a)},i}(SS,OS);const Xq=Object.freeze(Object.defineProperty({__proto__:null,easeBack:_T,easeBackIn:Yq,easeBackInOut:_T,easeBackOut:Wq,easeBounce:gh,easeBounceIn:zq,easeBounceInOut:Gq,easeBounceOut:gh,easeCircle:kT,easeCircleIn:_q,easeCircleInOut:kT,easeCircleOut:Lq,easeCubic:ET,easeCubicIn:Oq,easeCubicInOut:ET,easeCubicOut:Mq,easeElastic:LT,easeElasticIn:Vq,easeElasticInOut:Hq,easeElasticOut:LT,easeExp:PT,easeExpIn:Pq,easeExpInOut:PT,easeExpOut:kq,easeLinear:bq,easePoly:TT,easePolyIn:Aq,easePolyInOut:TT,easePolyOut:Eq,easeQuad:AT,easeQuadIn:wq,easeQuadInOut:AT,easeQuadOut:Sq,easeSin:CT,easeSinIn:Tq,easeSinInOut:CT,easeSinOut:Cq},Symbol.toStringTag,{value:"Module"}));var KR={};function Uq(t){return KR[t.toLowerCase()]||Xq[t]}function QR(t,n){KR[t.toLowerCase()]=n}var qq=function(t){return["fill","stroke","fillStyle","strokeStyle"].includes(t)},Zq=function(t){return/^[r,R,L,l]{1}[\s]*\(/.test(t)},IT=[1,0,0,0,1,0,0,0,1];function Kq(t,n,e){var r={},i=n.fromAttrs,a=n.toAttrs;if(!t.destroyed){var o;for(var s in a)if(!Ne(i[s],a[s]))if(s==="path"){var l=a[s],c=i[s];l.length>c.length?(l=lc(a[s]),c=lc(i[s]),c=lR(c,l),c=gb(c,l),n.fromAttrs.path=c,n.toAttrs.path=l):n.pathFormatted||(l=lc(a[s]),c=lc(i[s]),c=gb(c,l),n.fromAttrs.path=c,n.toAttrs.path=l,n.pathFormatted=!0),r[s]=[];for(var u=0;u<l.length;u++){for(var f=l[u],h=c[u],d=[],p=0;p<f.length;p++)bt(f[p])&&h&&bt(h[p])?(o=gg(h[p],f[p]),d.push(o(e))):d.push(f[p]);r[s].push(d)}}else if(s==="matrix"){var v=pq(i[s]||IT,a[s]||IT),g=v(e);r[s]=g}else qq(s)&&Zq(a[s])?r[s]=a[s]:ut(a[s])||(o=gg(i[s],a[s]),r[s]=o(e));t.attr(r)}}function Qq(t,n,e){var r=n.startTime,i=n.delay;if(e<r+i||n._paused)return!1;var a,o=n.duration,s=n.easing,l=Uq(s);if(e=e-r-n.delay,n.repeat)a=e%o/o,a=l(a);else if(a=e/o,a<1)a=l(a);else return n.onFrame?t.attr(n.onFrame(1)):t.attr(n.toAttrs),!0;if(n.onFrame){var c=n.onFrame(a);t.attr(c)}else Kq(t,n,a);return!1}var Jq=function(){function t(n){this.animators=[],this.current=0,this.timer=null,this.canvas=n}return t.prototype.initTimer=function(){var n=this,e=!1,r,i,a;this.timer=vS(function(o){if(n.current=o,n.animators.length>0){for(var s=n.animators.length-1;s>=0;s--){if(r=n.animators[s],r.destroyed){n.removeAnimator(s);continue}if(!r.isAnimatePaused()){i=r.get("animations");for(var l=i.length-1;l>=0;l--)a=i[l],e=Qq(r,a,o),e&&(i.splice(l,1),e=!1,a.callback&&a.callback())}i.length===0&&n.removeAnimator(s)}var c=n.canvas.get("autoDraw");c||n.canvas.draw()}})},t.prototype.addAnimator=function(n){this.animators.push(n)},t.prototype.removeAnimator=function(n){this.animators.splice(n,1)},t.prototype.isAnimating=function(){return!!this.animators.length},t.prototype.stop=function(){this.timer&&this.timer.stop()},t.prototype.stopAllAnimations=function(n){n===void 0&&(n=!0),this.animators.forEach(function(e){e.stopAnimate(n)}),this.animators=[],this.canvas.draw()},t.prototype.getTime=function(){return this.current},t}(),tZ=40,FT=0,DT=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function RT(t,n,e){e.name=n,e.target=t,e.currentTarget=t,e.delegateTarget=t,t.emit(n,e)}function eZ(t,n,e){if(e.bubbles){var r=void 0,i=!1;if(n==="mouseenter"?(r=e.fromShape,i=!0):n==="mouseleave"&&(i=!0,r=e.toShape),t.isCanvas()&&i)return;if(r&&fR(t,r)){e.bubbles=!1;return}e.name=n,e.currentTarget=t,e.delegateTarget=t,t.emit(n,e)}}var nZ=function(){function t(n){var e=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(r){var i=r.type;e._triggerEvent(i,r)},this._onDocumentMove=function(r){var i=e.canvas,a=i.get("el");if(a!==r.target&&(e.dragging||e.currentShape)){var o=e._getPointInfo(r);e.dragging&&e._emitEvent("drag",r,o,e.draggingShape)}},this._onDocumentMouseUp=function(r){var i=e.canvas,a=i.get("el");if(a!==r.target&&e.dragging){var o=e._getPointInfo(r);e.draggingShape&&e._emitEvent("drop",r,o,null),e._emitEvent("dragend",r,o,e.draggingShape),e._afterDrag(e.draggingShape,o,r)}},this.canvas=n.canvas}return t.prototype.init=function(){this._bindEvents()},t.prototype._bindEvents=function(){var n=this,e=this.canvas.get("el");$(DT,function(r){e.addEventListener(r,n._eventCallback)}),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},t.prototype._clearEvents=function(){var n=this,e=this.canvas.get("el");$(DT,function(r){e.removeEventListener(r,n._eventCallback)}),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},t.prototype._getEventObj=function(n,e,r,i,a,o){var s=new pd(n,e);return s.fromShape=a,s.toShape=o,s.x=r.x,s.y=r.y,s.clientX=r.clientX,s.clientY=r.clientY,s.propagationPath.push(i),s},t.prototype._getShape=function(n,e){return this.canvas.getShape(n.x,n.y,e)},t.prototype._getPointInfo=function(n){var e=this.canvas,r=e.getClientByEvent(n),i=e.getPointByEvent(n);return{x:i.x,y:i.y,clientX:r.x,clientY:r.y}},t.prototype._triggerEvent=function(n,e){var r=this._getPointInfo(e),i=this._getShape(r,e),a=this["_on"+n],o=!1;if(a)a.call(this,r,i,e);else{var s=this.currentShape;n==="mouseenter"||n==="dragenter"||n==="mouseover"?(this._emitEvent(n,e,r,null,null,i),i&&this._emitEvent(n,e,r,i,null,i),n==="mouseenter"&&this.draggingShape&&this._emitEvent("dragenter",e,r,null)):n==="mouseleave"||n==="dragleave"||n==="mouseout"?(o=!0,s&&this._emitEvent(n,e,r,s,s,null),this._emitEvent(n,e,r,null,s,null),n==="mouseleave"&&this.draggingShape&&this._emitEvent("dragleave",e,r,null)):this._emitEvent(n,e,r,i,null,null)}if(o||(this.currentShape=i),i&&!i.get("destroyed")){var l=this.canvas,c=l.get("el");c.style.cursor=i.attr("cursor")||l.get("cursor")}},t.prototype._onmousedown=function(n,e,r){r.button===FT&&(this.mousedownShape=e,this.mousedownPoint=n,this.mousedownTimeStamp=r.timeStamp),this._emitEvent("mousedown",r,n,e,null,null)},t.prototype._emitMouseoverEvents=function(n,e,r,i){var a=this.canvas.get("el");r!==i&&(r&&(this._emitEvent("mouseout",n,e,r,r,i),this._emitEvent("mouseleave",n,e,r,r,i),(!i||i.get("destroyed"))&&(a.style.cursor=this.canvas.get("cursor"))),i&&(this._emitEvent("mouseover",n,e,i,r,i),this._emitEvent("mouseenter",n,e,i,r,i)))},t.prototype._emitDragoverEvents=function(n,e,r,i,a){i?(i!==r&&(r&&this._emitEvent("dragleave",n,e,r,r,i),this._emitEvent("dragenter",n,e,i,r,i)),a||this._emitEvent("dragover",n,e,i)):r&&this._emitEvent("dragleave",n,e,r,r,i),a&&this._emitEvent("dragover",n,e,i)},t.prototype._afterDrag=function(n,e,r){n&&(n.set("capture",!0),this.draggingShape=null),this.dragging=!1;var i=this._getShape(e,r);i!==n&&this._emitMouseoverEvents(r,e,n,i),this.currentShape=i},t.prototype._onmouseup=function(n,e,r){if(r.button===FT){var i=this.draggingShape;this.dragging?(i&&this._emitEvent("drop",r,n,e),this._emitEvent("dragend",r,n,i),this._afterDrag(i,n,r)):(this._emitEvent("mouseup",r,n,e),e===this.mousedownShape&&this._emitEvent("click",r,n,e),this.mousedownShape=null,this.mousedownPoint=null)}},t.prototype._ondragover=function(n,e,r){r.preventDefault();var i=this.currentShape;this._emitDragoverEvents(r,n,i,e,!0)},t.prototype._onmousemove=function(n,e,r){var i=this.canvas,a=this.currentShape,o=this.draggingShape;if(this.dragging)o&&this._emitDragoverEvents(r,n,a,e,!1),this._emitEvent("drag",r,n,o);else{var s=this.mousedownPoint;if(s){var l=this.mousedownShape,c=r.timeStamp,u=c-this.mousedownTimeStamp,f=s.clientX-n.clientX,h=s.clientY-n.clientY,d=f*f+h*h;u>120||d>tZ?l&&l.get("draggable")?(o=this.mousedownShape,o.set("capture",!1),this.draggingShape=o,this.dragging=!0,this._emitEvent("dragstart",r,n,o),this.mousedownShape=null,this.mousedownPoint=null):!l&&i.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",r,n,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(r,n,a,e),this._emitEvent("mousemove",r,n,e)):(this._emitMouseoverEvents(r,n,a,e),this._emitEvent("mousemove",r,n,e))}else this._emitMouseoverEvents(r,n,a,e),this._emitEvent("mousemove",r,n,e)}},t.prototype._emitEvent=function(n,e,r,i,a,o){var s=this._getEventObj(n,e,r,i,a,o);if(i){s.shape=i,RT(i,n,s);for(var l=i.getParent();l;)l.emitDelegation(n,s),s.propagationStopped||eZ(l,n,s),s.propagationPath.push(l),l=l.getParent()}else{var c=this.canvas;RT(c,n,s)}},t.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},t}(),BT="px",NT=hR(),rZ=NT&&NT.name==="firefox",o0=function(t){G(n,t);function n(e){var r=t.call(this,e)||this;return r.initContainer(),r.initDom(),r.initEvents(),r.initTimeline(),r}return n.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.cursor="default",e.supportCSSTransform=!1,e},n.prototype.initContainer=function(){var e=this.get("container");pt(e)&&(e=document.getElementById(e),this.set("container",e))},n.prototype.initDom=function(){var e=this.createDom();this.set("el",e);var r=this.get("container");r.appendChild(e),this.setDOMSize(this.get("width"),this.get("height"))},n.prototype.initEvents=function(){var e=new nZ({canvas:this});e.init(),this.set("eventController",e)},n.prototype.initTimeline=function(){var e=new Jq(this);this.set("timeline",e)},n.prototype.setDOMSize=function(e,r){var i=this.get("el");rT&&(i.style.width=e+BT,i.style.height=r+BT)},n.prototype.changeSize=function(e,r){this.setDOMSize(e,r),this.set("width",e),this.set("height",r),this.onCanvasChange("changeSize")},n.prototype.getRenderer=function(){return this.get("renderer")},n.prototype.getCursor=function(){return this.get("cursor")},n.prototype.setCursor=function(e){this.set("cursor",e);var r=this.get("el");rT&&r&&(r.style.cursor=e)},n.prototype.getPointByEvent=function(e){var r=this.get("supportCSSTransform");if(r){if(rZ&&!J(e.layerX)&&e.layerX!==e.offsetX)return{x:e.layerX,y:e.layerY};if(!J(e.offsetX))return{x:e.offsetX,y:e.offsetY}}var i=this.getClientByEvent(e),a=i.x,o=i.y;return this.getPointByClient(a,o)},n.prototype.getClientByEvent=function(e){var r=e;return e.touches&&(e.type==="touchend"?r=e.changedTouches[0]:r=e.touches[0]),{x:r.clientX,y:r.clientY}},n.prototype.getPointByClient=function(e,r){var i=this.get("el"),a=i.getBoundingClientRect();return{x:e-a.left,y:r-a.top}},n.prototype.getClientByPoint=function(e,r){var i=this.get("el"),a=i.getBoundingClientRect();return{x:e+a.left,y:r+a.top}},n.prototype.draw=function(){},n.prototype.removeDom=function(){var e=this.get("el");e.parentNode.removeChild(e)},n.prototype.clearEvents=function(){var e=this.get("eventController");e.destroy()},n.prototype.isCanvas=function(){return!0},n.prototype.getParent=function(){return null},n.prototype.destroy=function(){var e=this.get("timeline");this.get("destroyed")||(this.clear(),e&&e.stop(),this.clearEvents(),this.removeDom(),t.prototype.destroy.call(this))},n}(BR),s0=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.isGroup=function(){return!0},n.prototype.isEntityGroup=function(){return!1},n.prototype.clone=function(){for(var e=t.prototype.clone.call(this),r=this.getChildren(),i=0;i<r.length;i++){var a=r[i];e.add(a.clone())}return e},n}(BR),l0=function(t){G(n,t);function n(e){return t.call(this,e)||this}return n.prototype._isInBBox=function(e,r){var i=this.getBBox();return i.minX<=e&&i.maxX>=e&&i.minY<=r&&i.maxY>=r},n.prototype.afterAttrsChange=function(e){t.prototype.afterAttrsChange.call(this,e),this.clearCacheBBox()},n.prototype.getBBox=function(){var e=this.cfg.bbox;return e||(e=this.calculateBBox(),this.set("bbox",e)),e},n.prototype.getCanvasBBox=function(){var e=this.cfg.canvasBBox;return e||(e=this.calculateCanvasBBox(),this.set("canvasBBox",e)),e},n.prototype.applyMatrix=function(e){t.prototype.applyMatrix.call(this,e),this.set("canvasBBox",null)},n.prototype.calculateCanvasBBox=function(){var e=this.getBBox(),r=this.getTotalMatrix(),i=e.minX,a=e.minY,o=e.maxX,s=e.maxY;if(r){var l=Da(r,[e.minX,e.minY]),c=Da(r,[e.maxX,e.minY]),u=Da(r,[e.minX,e.maxY]),f=Da(r,[e.maxX,e.maxY]);i=Math.min(l[0],c[0],u[0],f[0]),o=Math.max(l[0],c[0],u[0],f[0]),a=Math.min(l[1],c[1],u[1],f[1]),s=Math.max(l[1],c[1],u[1],f[1])}var h=this.attrs;if(h.shadowColor){var d=h.shadowBlur,p=d===void 0?0:d,v=h.shadowOffsetX,g=v===void 0?0:v,y=h.shadowOffsetY,m=y===void 0?0:y,x=i-p+g,b=o+p+g,w=a-p+m,S=s+p+m;i=Math.min(i,x),o=Math.max(o,b),a=Math.min(a,w),s=Math.max(s,S)}return{x:i,y:a,minX:i,minY:a,maxX:o,maxY:s,width:o-i,height:s-a}},n.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},n.prototype.isClipShape=function(){return this.get("isClipShape")},n.prototype.isInShape=function(e,r){return!1},n.prototype.isOnlyHitBox=function(){return!1},n.prototype.isHit=function(e,r){var i=this.get("startArrowShape"),a=this.get("endArrowShape"),o=[e,r,1];o=this.invertFromMatrix(o);var s=o[0],l=o[1],c=this._isInBBox(s,l);return this.isOnlyHitBox()?c:!!(c&&!this.isClipped(s,l)&&(this.isInShape(s,l)||i&&i.isHit(s,l)||a&&a.isHit(s,l)))},n}(FR),JR=new Map;function yi(t,n){JR.set(t,n)}function c0(t){return JR.get(t)}function t5(t){var n=t.attr(),e=n.x,r=n.y,i=n.width,a=n.height;return{x:e,y:r,width:i,height:a}}function e5(t){var n=t.attr(),e=n.x,r=n.y,i=n.r;return{x:e-i,y:r-i,width:i*2,height:i*2}}function Xn(t,n,e,r){var i=t-e,a=n-r;return Math.sqrt(i*i+a*a)}function Iv(t,n){return Math.abs(t-n)<.001}function Cu(t,n){var e=hi(t),r=hi(n),i=Vr(t),a=Vr(n);return{x:e,y:r,width:i-e,height:a-r}}function u0(t){return(t+Math.PI*2)%(Math.PI*2)}const Pn={box:function(t,n,e,r){return Cu([t,e],[n,r])},length:function(t,n,e,r){return Xn(t,n,e,r)},pointAt:function(t,n,e,r,i){return{x:(1-i)*t+i*e,y:(1-i)*n+i*r}},pointDistance:function(t,n,e,r,i,a){var o=(e-t)*(i-t)+(r-n)*(a-n);if(o<0)return Xn(t,n,i,a);var s=(e-t)*(e-t)+(r-n)*(r-n);return o>s?Xn(e,r,i,a):this.pointToLine(t,n,e,r,i,a)},pointToLine:function(t,n,e,r,i,a){var o=[e-t,r-n];if(LR(o,[0,0]))return Math.sqrt((i-t)*(i-t)+(a-n)*(a-n));var s=[-o[1],o[0]];hS(s,s);var l=[i-t,a-n];return Math.abs(_R(l,s))},tangentAngle:function(t,n,e,r){return Math.atan2(r-n,e-t)}};var iZ=1e-4;function n5(t,n,e,r,i,a){var o,s=1/0,l=[e,r],c=20;a&&a>200&&(c=a/10);for(var u=1/c,f=u/10,h=0;h<=c;h++){var d=h*u,p=[i.apply(null,t.concat([d])),i.apply(null,n.concat([d]))],v=Xn(l[0],l[1],p[0],p[1]);v<s&&(o=d,s=v)}if(o===0)return{x:t[0],y:n[0]};if(o===1){var g=t.length;return{x:t[g-1],y:n[g-1]}}s=1/0;for(var h=0;h<32&&!(f<iZ);h++){var y=o-f,m=o+f,p=[i.apply(null,t.concat([y])),i.apply(null,n.concat([y]))],v=Xn(l[0],l[1],p[0],p[1]);if(y>=0&&v<s)o=y,s=v;else{var x=[i.apply(null,t.concat([m])),i.apply(null,n.concat([m]))],b=Xn(l[0],l[1],x[0],x[1]);m<=1&&b<s?(o=m,s=b):f*=.5}}return{x:i.apply(null,t.concat([o])),y:i.apply(null,n.concat([o]))}}function aZ(t,n){for(var e=0,r=t.length,i=0;i<r;i++){var a=t[i],o=n[i],s=t[(i+1)%r],l=n[(i+1)%r];e+=Xn(a,o,s,l)}return e/2}function go(t,n,e,r){var i=1-r;return i*i*t+2*r*i*n+r*r*e}function $T(t,n,e){var r=t+e-2*n;if(Iv(r,0))return[.5];var i=(t-n)/r;return i<=1&&i>=0?[i]:[]}function jT(t,n,e,r){return 2*(1-r)*(n-t)+2*r*(e-n)}function r5(t,n,e,r,i,a,o){var s=go(t,e,i,o),l=go(n,r,a,o),c=Pn.pointAt(t,n,e,r,o),u=Pn.pointAt(e,r,i,a,o);return[[t,n,c.x,c.y,s,l],[s,l,u.x,u.y,i,a]]}function Tb(t,n,e,r,i,a,o){if(o===0)return(Xn(t,n,e,r)+Xn(e,r,i,a)+Xn(t,n,i,a))/2;var s=r5(t,n,e,r,i,a,.5),l=s[0],c=s[1];return l.push(o-1),c.push(o-1),Tb.apply(null,l)+Tb.apply(null,c)}const i5={box:function(t,n,e,r,i,a){var o=$T(t,e,i)[0],s=$T(n,r,a)[0],l=[t,i],c=[n,a];return o!==void 0&&l.push(go(t,e,i,o)),s!==void 0&&c.push(go(n,r,a,s)),Cu(l,c)},length:function(t,n,e,r,i,a){return Tb(t,n,e,r,i,a,3)},nearestPoint:function(t,n,e,r,i,a,o,s){return n5([t,e,i],[n,r,a],o,s,go)},pointDistance:function(t,n,e,r,i,a,o,s){var l=this.nearestPoint(t,n,e,r,i,a,o,s);return Xn(l.x,l.y,o,s)},interpolationAt:go,pointAt:function(t,n,e,r,i,a,o){return{x:go(t,e,i,o),y:go(n,r,a,o)}},divide:function(t,n,e,r,i,a,o){return r5(t,n,e,r,i,a,o)},tangentAngle:function(t,n,e,r,i,a,o){var s=jT(t,e,i,o),l=jT(n,r,a,o),c=Math.atan2(l,s);return u0(c)}};function yo(t,n,e,r,i){var a=1-i;return a*a*a*t+3*n*i*a*a+3*e*i*i*a+r*i*i*i}function zT(t,n,e,r,i){var a=1-i;return 3*(a*a*(n-t)+2*a*i*(e-n)+i*i*(r-e))}function g1(t,n,e,r){var i=-3*t+9*n-9*e+3*r,a=6*t-12*n+6*e,o=3*n-3*t,s=[],l,c,u;if(Iv(i,0))Iv(a,0)||(l=-o/a,l>=0&&l<=1&&s.push(l));else{var f=a*a-4*i*o;Iv(f,0)?s.push(-a/(2*i)):f>0&&(u=Math.sqrt(f),l=(-a+u)/(2*i),c=(-a-u)/(2*i),l>=0&&l<=1&&s.push(l),c>=0&&c<=1&&s.push(c))}return s}function a5(t,n,e,r,i,a,o,s,l){var c=yo(t,e,i,o,l),u=yo(n,r,a,s,l),f=Pn.pointAt(t,n,e,r,l),h=Pn.pointAt(e,r,i,a,l),d=Pn.pointAt(i,a,o,s,l),p=Pn.pointAt(f.x,f.y,h.x,h.y,l),v=Pn.pointAt(h.x,h.y,d.x,d.y,l);return[[t,n,f.x,f.y,p.x,p.y,c,u],[c,u,v.x,v.y,d.x,d.y,o,s]]}function Cb(t,n,e,r,i,a,o,s,l){if(l===0)return aZ([t,e,i,o],[n,r,a,s]);var c=a5(t,n,e,r,i,a,o,s,.5),u=c[0],f=c[1];return u.push(l-1),f.push(l-1),Cb.apply(null,u)+Cb.apply(null,f)}const $f={extrema:g1,box:function(t,n,e,r,i,a,o,s){for(var l=[t,o],c=[n,s],u=g1(t,e,i,o),f=g1(n,r,a,s),h=0;h<u.length;h++)l.push(yo(t,e,i,o,u[h]));for(var h=0;h<f.length;h++)c.push(yo(n,r,a,s,f[h]));return Cu(l,c)},length:function(t,n,e,r,i,a,o,s){return Cb(t,n,e,r,i,a,o,s,3)},nearestPoint:function(t,n,e,r,i,a,o,s,l,c,u){return n5([t,e,i,o],[n,r,a,s],l,c,yo,u)},pointDistance:function(t,n,e,r,i,a,o,s,l,c,u){var f=this.nearestPoint(t,n,e,r,i,a,o,s,l,c,u);return Xn(f.x,f.y,l,c)},interpolationAt:yo,pointAt:function(t,n,e,r,i,a,o,s,l){return{x:yo(t,e,i,o,l),y:yo(n,r,a,s,l)}},divide:function(t,n,e,r,i,a,o,s,l){return a5(t,n,e,r,i,a,o,s,l)},tangentAngle:function(t,n,e,r,i,a,o,s,l){var c=zT(t,e,i,o,l),u=zT(n,r,a,s,l);return u0(Math.atan2(u,c))}};function GT(t,n){var e=Math.abs(t);return n>0?e:e*-1}const oZ={box:function(t,n,e,r){return{x:t-e,y:n-r,width:e*2,height:r*2}},length:function(t,n,e,r){return Math.PI*(3*(e+r)-Math.sqrt((3*e+r)*(e+3*r)))},nearestPoint:function(t,n,e,r,i,a){var o=e,s=r;if(o===0||s===0)return{x:t,y:n};for(var l=i-t,c=a-n,u=Math.abs(l),f=Math.abs(c),h=o*o,d=s*s,p=Math.PI/4,v,g,y=0;y<4;y++){v=o*Math.cos(p),g=s*Math.sin(p);var m=(h-d)*Math.pow(Math.cos(p),3)/o,x=(d-h)*Math.pow(Math.sin(p),3)/s,b=v-m,w=g-x,S=u-m,O=f-x,M=Math.hypot(w,b),A=Math.hypot(O,S),T=M*Math.asin((b*O-w*S)/(M*A)),C=T/Math.sqrt(h+d-v*v-g*g);p+=C,p=Math.min(Math.PI/2,Math.max(0,p))}return{x:t+GT(v,l),y:n+GT(g,c)}},pointDistance:function(t,n,e,r,i,a){var o=this.nearestPoint(t,n,e,r,i,a);return Xn(o.x,o.y,i,a)},pointAt:function(t,n,e,r,i){var a=2*Math.PI*i;return{x:t+e*Math.cos(a),y:n+r*Math.sin(a)}},tangentAngle:function(t,n,e,r,i){var a=2*Math.PI*i,o=Math.atan2(r*Math.cos(a),-e*Math.sin(a));return u0(o)}};function sZ(t,n,e,r,i,a,o,s){return-1*e*Math.cos(i)*Math.sin(s)-r*Math.sin(i)*Math.cos(s)}function lZ(t,n,e,r,i,a,o,s){return-1*e*Math.sin(i)*Math.sin(s)+r*Math.cos(i)*Math.cos(s)}function cZ(t,n,e){return Math.atan(-n/t*Math.tan(e))}function uZ(t,n,e){return Math.atan(n/(t*Math.tan(e)))}function YT(t,n,e,r,i,a){return e*Math.cos(i)*Math.cos(a)-r*Math.sin(i)*Math.sin(a)+t}function WT(t,n,e,r,i,a){return e*Math.sin(i)*Math.cos(a)+r*Math.cos(i)*Math.sin(a)+n}function fZ(t,n,e,r){var i=Math.atan2(r*t,e*n);return(i+Math.PI*2)%(Math.PI*2)}function VT(t,n,e){return{x:t*Math.cos(e),y:n*Math.sin(e)}}function HT(t,n,e){var r=Math.cos(e),i=Math.sin(e);return[t*r-n*i,t*i+n*r]}const hZ={box:function(t,n,e,r,i,a,o){for(var s=cZ(e,r,i),l=1/0,c=-1/0,u=[a,o],f=-Math.PI*2;f<=Math.PI*2;f+=Math.PI){var h=s+f;a<o?a<h&&h<o&&u.push(h):o<h&&h<a&&u.push(h)}for(var f=0;f<u.length;f++){var d=YT(t,n,e,r,i,u[f]);d<l&&(l=d),d>c&&(c=d)}for(var p=uZ(e,r,i),v=1/0,g=-1/0,y=[a,o],f=-Math.PI*2;f<=Math.PI*2;f+=Math.PI){var m=p+f;a<o?a<m&&m<o&&y.push(m):o<m&&m<a&&y.push(m)}for(var f=0;f<y.length;f++){var x=WT(t,n,e,r,i,y[f]);x<v&&(v=x),x>g&&(g=x)}return{x:l,y:v,width:c-l,height:g-v}},length:function(t,n,e,r,i,a,o){},nearestPoint:function(t,n,e,r,i,a,o,s,l){var c=HT(s-t,l-n,-i),u=c[0],f=c[1],h=oZ.nearestPoint(0,0,e,r,u,f),d=fZ(e,r,h.x,h.y);d<a?h=VT(e,r,a):d>o&&(h=VT(e,r,o));var p=HT(h.x,h.y,i);return{x:p[0]+t,y:p[1]+n}},pointDistance:function(t,n,e,r,i,a,o,s,l){var c=this.nearestPoint(t,n,e,r,s,l);return Xn(c.x,c.y,s,l)},pointAt:function(t,n,e,r,i,a,o,s){var l=(o-a)*s+a;return{x:YT(t,n,e,r,i,l),y:WT(t,n,e,r,i,l)}},tangentAngle:function(t,n,e,r,i,a,o,s){var l=(o-a)*s+a,c=sZ(t,n,e,r,i,a,o,l),u=lZ(t,n,e,r,i,a,o,l);return u0(Math.atan2(u,c))}};function o5(t){for(var n=0,e=[],r=0;r<t.length-1;r++){var i=t[r],a=t[r+1],o=Xn(i[0],i[1],a[0],a[1]),s={from:i,to:a,length:o};e.push(s),n+=o}return{segments:e,totalLength:n}}function dZ(t){if(t.length<2)return 0;for(var n=0,e=0;e<t.length-1;e++){var r=t[e],i=t[e+1];n+=Xn(r[0],r[1],i[0],i[1])}return n}function pZ(t,n){if(n>1||n<0||t.length<2)return null;var e=o5(t),r=e.segments,i=e.totalLength;if(i===0)return{x:t[0][0],y:t[0][1]};for(var a=0,o=null,s=0;s<r.length;s++){var l=r[s],c=l.from,u=l.to,f=l.length/i;if(n>=a&&n<=a+f){var h=(n-a)/f;o=Pn.pointAt(c[0],c[1],u[0],u[1],h);break}a+=f}return o}function vZ(t,n){if(n>1||n<0||t.length<2)return 0;for(var e=o5(t),r=e.segments,i=e.totalLength,a=0,o=0,s=0;s<r.length;s++){var l=r[s],c=l.from,u=l.to,f=l.length/i;if(n>=a&&n<=a+f){o=Math.atan2(u[1]-c[1],u[0]-c[0]);break}a+=f}return o}function gZ(t,n,e){for(var r=1/0,i=0;i<t.length-1;i++){var a=t[i],o=t[i+1],s=Pn.pointDistance(a[0],a[1],o[0],o[1],n,e);s<r&&(r=s)}return r}const s5={box:function(t){for(var n=[],e=[],r=0;r<t.length;r++){var i=t[r];n.push(i[0]),e.push(i[1])}return Cu(n,e)},length:function(t){return dZ(t)},pointAt:function(t,n){return pZ(t,n)},pointDistance:function(t,n,e){return gZ(t,n,e)},tangentAngle:function(t,n){return vZ(t,n)}};function XT(t,n){return!t||!n?t||n:{minX:Math.min(t.minX,n.minX),minY:Math.min(t.minY,n.minY),maxX:Math.max(t.maxX,n.maxX),maxY:Math.max(t.maxY,n.maxY)}}function MS(t,n){var e=t.get("startArrowShape"),r=t.get("endArrowShape"),i=null,a=null;return e&&(i=e.getCanvasBBox(),n=XT(n,i)),r&&(a=r.getCanvasBBox(),n=XT(n,a)),n}function yZ(t){for(var n=t.attr(),e=n.points,r=[],i=[],a=0;a<e.length;a++){var o=e[a];r.push(o[0]),i.push(o[1])}var s=Cu(r,i),l=s.x,c=s.y,u=s.width,f=s.height,h={minX:l,minY:c,maxX:l+u,maxY:c+f};return h=MS(t,h),{x:h.minX,y:h.minY,width:h.maxX-h.minX,height:h.maxY-h.minY}}function mZ(t){for(var n=t.attr(),e=n.points,r=[],i=[],a=0;a<e.length;a++){var o=e[a];r.push(o[0]),i.push(o[1])}return Cu(r,i)}var y1=null;function f0(){if(!y1){var t=document.createElement("canvas");t.width=1,t.height=1,y1=t.getContext("2d")}return y1}function h0(t,n,e){var r=1;if(pt(t)&&(r=t.split(`
`).length),r>1){var i=xZ(n,e);return n*r+i*(r-1)}return n}function xZ(t,n){return n?n-t:t*.14}function bZ(t,n){var e=f0(),r=0;if(J(t)||t==="")return r;if(e.save(),e.font=n,pt(t)&&t.includes(`
`)){var i=t.split(`
`);$(i,function(a){var o=e.measureText(a).width;r<o&&(r=o)})}else r=e.measureText(t).width;return e.restore(),r}function d0(t){var n=t.fontSize,e=t.fontFamily,r=t.fontWeight,i=t.fontStyle,a=t.fontVariant;return[i,a,r,n+"px",e].join(" ").trim()}function wZ(t){var n=t.attr(),e=n.x,r=n.y,i=n.text,a=n.fontSize,o=n.lineHeight,s=n.font;s||(s=d0(n));var l=bZ(i,s),c;if(!l)c={x:e,y:r,width:0,height:0};else{var u=n.textAlign,f=n.textBaseline,h=h0(i,a,o),d={x:e,y:r-h};u&&(u==="end"||u==="right"?d.x-=l:u==="center"&&(d.x-=l/2)),f&&(f==="top"?d.y+=h:f==="middle"&&(d.y+=h/2)),c={x:d.x,y:d.y,width:l,height:h}}return c}var SZ=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,OZ=/[^\s\,]+/ig;function MZ(t){var n=t||[];if(et(n))return n;if(pt(n))return n=n.match(SZ),$(n,function(e,r){if(e=e.match(OZ),e[0].length>1){var i=e[0].charAt(0);e.splice(1,0,e[0].substr(1)),e[0]=i}$(e,function(a,o){isNaN(a)||(e[o]=+a)}),n[r]=e}),n}function pp(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Pb(t,n){return pp(t)*pp(n)?(t[0]*n[0]+t[1]*n[1])/(pp(t)*pp(n)):1}function UT(t,n){return(t[0]*n[1]<t[1]*n[0]?-1:1)*Math.acos(Pb(t,n))}function kb(t,n){return t[0]===n[0]&&t[1]===n[1]}function AZ(t,n){var e=n[1],r=n[2],i=Zy(Ky(n[3]),Math.PI*2),a=n[4],o=n[5],s=t[0],l=t[1],c=n[6],u=n[7],f=Math.cos(i)*(s-c)/2+Math.sin(i)*(l-u)/2,h=-1*Math.sin(i)*(s-c)/2+Math.cos(i)*(l-u)/2,d=f*f/(e*e)+h*h/(r*r);d>1&&(e*=Math.sqrt(d),r*=Math.sqrt(d));var p=e*e*(h*h)+r*r*(f*f),v=p?Math.sqrt((e*e*(r*r)-p)/p):1;a===o&&(v*=-1),isNaN(v)&&(v=0);var g=r?v*e*h/r:0,y=e?v*-r*f/e:0,m=(s+c)/2+Math.cos(i)*g-Math.sin(i)*y,x=(l+u)/2+Math.sin(i)*g+Math.cos(i)*y,b=[(f-g)/e,(h-y)/r],w=[(-1*f-g)/e,(-1*h-y)/r],S=UT([1,0],b),O=UT(b,w);return Pb(b,w)<=-1&&(O=Math.PI),Pb(b,w)>=1&&(O=0),o===0&&O>0&&(O=O-2*Math.PI),o===1&&O<0&&(O=O+2*Math.PI),{cx:m,cy:x,rx:kb(t,[c,u])?0:e,ry:kb(t,[c,u])?0:r,startAngle:S,endAngle:S+O,xRotation:i,arcFlag:a,sweepFlag:o}}function qT(t,n){return[n[0]+(n[0]-t[0]),n[1]+(n[1]-t[1])]}function EZ(t){t=MZ(t);for(var n=[],e=null,r=null,i=null,a=0,o=t.length,s=0;s<o;s++){var l=t[s];r=t[s+1];var c=l[0],u={command:c,prePoint:e,params:l,startTangent:null,endTangent:null};switch(c){case"M":i=[l[1],l[2]],a=s;break;case"A":var f=AZ(e,l);u.arcParams=f;break}if(c==="Z")e=i,r=t[a+1];else{var h=l.length;e=[l[h-2],l[h-1]]}r&&r[0]==="Z"&&(r=t[a],n[a]&&(n[a].prePoint=e)),u.currentPoint=e,n[a]&&kb(e,n[a].currentPoint)&&(n[a].prePoint=u.prePoint);var d=r?[r[r.length-2],r[r.length-1]]:null;u.nextPoint=d;var p=u.prePoint;if(["L","H","V"].includes(c))u.startTangent=[p[0]-e[0],p[1]-e[1]],u.endTangent=[e[0]-p[0],e[1]-p[1]];else if(c==="Q"){var v=[l[1],l[2]];u.startTangent=[p[0]-v[0],p[1]-v[1]],u.endTangent=[e[0]-v[0],e[1]-v[1]]}else if(c==="T"){var g=n[s-1],v=qT(g.currentPoint,p);g.command==="Q"?(u.command="Q",u.startTangent=[p[0]-v[0],p[1]-v[1]],u.endTangent=[e[0]-v[0],e[1]-v[1]]):(u.command="TL",u.startTangent=[p[0]-e[0],p[1]-e[1]],u.endTangent=[e[0]-p[0],e[1]-p[1]])}else if(c==="C"){var y=[l[1],l[2]],m=[l[3],l[4]];u.startTangent=[p[0]-y[0],p[1]-y[1]],u.endTangent=[e[0]-m[0],e[1]-m[1]],u.startTangent[0]===0&&u.startTangent[1]===0&&(u.startTangent=[y[0]-m[0],y[1]-m[1]]),u.endTangent[0]===0&&u.endTangent[1]===0&&(u.endTangent=[m[0]-y[0],m[1]-y[1]])}else if(c==="S"){var g=n[s-1],y=qT(g.currentPoint,p),m=[l[1],l[2]];g.command==="C"?(u.command="C",u.startTangent=[p[0]-y[0],p[1]-y[1]],u.endTangent=[e[0]-m[0],e[1]-m[1]]):(u.command="SQ",u.startTangent=[p[0]-m[0],p[1]-m[1]],u.endTangent=[e[0]-m[0],e[1]-m[1]])}else if(c==="A"){var x=.001,b=u.arcParams||{},w=b.cx,S=w===void 0?0:w,O=b.cy,M=O===void 0?0:O,A=b.rx,T=A===void 0?0:A,C=b.ry,P=C===void 0?0:C,_=b.sweepFlag,k=_===void 0?0:_,I=b.startAngle,L=I===void 0?0:I,F=b.endAngle,B=F===void 0?0:F;k===0&&(x*=-1);var D=T*Math.cos(L-x)+S,N=P*Math.sin(L-x)+M;u.startTangent=[D-i[0],N-i[1]];var j=T*Math.cos(L+B+x)+S,Y=P*Math.sin(L+B-x)+M;u.endTangent=[p[0]-j,p[1]-Y]}n.push(u)}return n}function TZ(t,n){for(var e=[],r=[],i=[],a=0;a<t.length;a++){var o=t[a],s=o.currentPoint,l=o.params,c=o.prePoint,u=void 0;switch(o.command){case"Q":u=i5.box(c[0],c[1],l[1],l[2],l[3],l[4]);break;case"C":u=$f.box(c[0],c[1],l[1],l[2],l[3],l[4],l[5],l[6]);break;case"A":var f=o.arcParams;u=hZ.box(f.cx,f.cy,f.rx,f.ry,f.xRotation,f.startAngle,f.endAngle);break;default:e.push(s[0]),r.push(s[1]);break}u&&(o.box=u,e.push(u.x,u.x+u.width),r.push(u.y,u.y+u.height)),n&&(o.command==="L"||o.command==="M")&&o.prePoint&&o.nextPoint&&i.push(o)}e=e.filter(function(y){return!Number.isNaN(y)&&y!==1/0&&y!==-1/0}),r=r.filter(function(y){return!Number.isNaN(y)&&y!==1/0&&y!==-1/0});var h=hi(e),d=hi(r),p=Vr(e),v=Vr(r);if(i.length===0)return{x:h,y:d,width:p-h,height:v-d};for(var a=0;a<i.length;a++){var o=i[a],s=o.currentPoint,g=void 0;s[0]===h?(g=vp(o,n),h=h-g.xExtra):s[0]===p&&(g=vp(o,n),p=p+g.xExtra),s[1]===d?(g=vp(o,n),d=d-g.yExtra):s[1]===v&&(g=vp(o,n),v=v+g.yExtra)}return{x:h,y:d,width:p-h,height:v-d}}function vp(t,n){var e=t.prePoint,r=t.currentPoint,i=t.nextPoint,a=Math.pow(r[0]-e[0],2)+Math.pow(r[1]-e[1],2),o=Math.pow(r[0]-i[0],2)+Math.pow(r[1]-i[1],2),s=Math.pow(e[0]-i[0],2)+Math.pow(e[1]-i[1],2),l=Math.acos((a+o-s)/(2*Math.sqrt(a)*Math.sqrt(o)));if(!l||Math.sin(l)===0||Cn(l,0))return{xExtra:0,yExtra:0};var c=Math.abs(Math.atan2(i[1]-r[1],i[0]-r[0])),u=Math.abs(Math.atan2(i[0]-r[0],i[1]-r[1]));c=c>Math.PI/2?Math.PI-c:c,u=u>Math.PI/2?Math.PI-u:u;var f={xExtra:Math.cos(l/2-c)*(n/2*(1/Math.sin(l/2)))-n/2||0,yExtra:Math.cos(u-l/2)*(n/2*(1/Math.sin(l/2)))-n/2||0};return f}function CZ(t){var n=t.attr(),e=n.path,r=n.stroke,i=r?n.lineWidth:0,a=t.get("segments")||EZ(e),o=TZ(a,i),s=o.x,l=o.y,c=o.width,u=o.height,f={minX:s,minY:l,maxX:s+c,maxY:l+u};return f=MS(t,f),{x:f.minX,y:f.minY,width:f.maxX-f.minX,height:f.maxY-f.minY}}function PZ(t){var n=t.attr(),e=n.x1,r=n.y1,i=n.x2,a=n.y2,o=Math.min(e,i),s=Math.max(e,i),l=Math.min(r,a),c=Math.max(r,a),u={minX:o,maxX:s,minY:l,maxY:c};return u=MS(t,u),{x:u.minX,y:u.minY,width:u.maxX-u.minX,height:u.maxY-u.minY}}function kZ(t){var n=t.attr(),e=n.x,r=n.y,i=n.rx,a=n.ry;return{x:e-i,y:r-a,width:i*2,height:a*2}}yi("rect",t5);yi("image",t5);yi("circle",e5);yi("marker",e5);yi("polyline",yZ);yi("polygon",mZ);yi("text",wZ);yi("path",CZ);yi("line",PZ);yi("ellipse",kZ);var ZT=0,_Z=1/2,LZ=1/2,IZ=.05,p0=function(){function t(n){var e=n.xField,r=n.yField,i=n.adjustNames,a=i===void 0?["x","y"]:i,o=n.dimValuesMap;this.adjustNames=a,this.xField=e,this.yField=r,this.dimValuesMap=o}return t.prototype.isAdjust=function(n){return this.adjustNames.indexOf(n)>=0},t.prototype.getAdjustRange=function(n,e,r){var i=this.yField,a=r.indexOf(e),o=r.length,s,l;return!i&&this.isAdjust("y")?(s=0,l=1):o>1?(s=r[a===0?0:a-1],l=r[a===o-1?o-1:a+1],a!==0?s+=(e-s)/2:s-=(l-e)/2,a!==o-1?l-=(l-e)/2:l+=(e-r[o-2])/2):(s=e===0?0:e-.5,l=e===0?1:e+.5),{pre:s,next:l}},t.prototype.adjustData=function(n,e){var r=this,i=this.getDimValues(e);$(n,function(a,o){$(i,function(s,l){r.adjustDim(l,s,a,o)})})},t.prototype.groupData=function(n,e){return $(n,function(r){r[e]===void 0&&(r[e]=ZT)}),Gr(n,e)},t.prototype.adjustDim=function(n,e,r,i){},t.prototype.getDimValues=function(n){var e=this,r=e.xField,i=e.yField,a=Jt({},this.dimValuesMap),o=[];if(r&&this.isAdjust("x")&&o.push(r),i&&this.isAdjust("y")&&o.push(i),o.forEach(function(l){a&&a[l]||(a[l]=Ni(n,l).sort(function(c,u){return c-u}))}),!i&&this.isAdjust("y")){var s="y";a[s]=[ZT,1]}return a},t}(),l5={},c5=function(t){return l5[t.toLowerCase()]},v0=function(t,n){if(c5(t))throw new Error("Adjust type '"+t+"' existed.");l5[t.toLowerCase()]=n};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var _b=function(t,n){return _b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])},_b(t,n)};function g0(t,n){_b(t,n);function e(){this.constructor=t}t.prototype=n===null?Object.create(n):(e.prototype=n.prototype,new e)}var ra=function(){return ra=Object.assign||function(n){for(var e,r=1,i=arguments.length;r<i;r++){e=arguments[r];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a])}return n},ra.apply(this,arguments)},FZ=function(t){g0(n,t);function n(e){var r=t.call(this,e)||this;r.cacheMap={},r.adjustDataArray=[],r.mergeData=[];var i=e.marginRatio,a=i===void 0?_Z:i,o=e.dodgeRatio,s=o===void 0?LZ:o,l=e.dodgeBy,c=e.intervalPadding,u=e.dodgePadding,f=e.xDimensionLength,h=e.groupNum,d=e.defaultSize,p=e.maxColumnWidth,v=e.minColumnWidth,g=e.columnWidthRatio,y=e.customOffset;return r.marginRatio=a,r.dodgeRatio=s,r.dodgeBy=l,r.intervalPadding=c,r.dodgePadding=u,r.xDimensionLegenth=f,r.groupNum=h,r.defaultSize=d,r.maxColumnWidth=p,r.minColumnWidth=v,r.columnWidthRatio=g,r.customOffset=y,r}return n.prototype.process=function(e){var r=er(e),i=Wr(r),a=this.dodgeBy,o=a?XH(i,a):r;return this.cacheMap={},this.adjustDataArray=o,this.mergeData=i,this.adjustData(o,i),this.adjustDataArray=[],this.mergeData=[],r},n.prototype.adjustDim=function(e,r,i,a){var o=this,s=this.customOffset,l=this.getDistribution(e),c=this.groupData(i,e);return $(c,function(u,f){var h;r.length===1?h={pre:r[0]-1,next:r[0]+1}:h=o.getAdjustRange(e,parseFloat(f),r),$(u,function(d){var p=d[e],v=l[p],g=v.indexOf(a);if(J(s))d[e]=o.getDodgeOffset(h,g,v.length);else{var y=h.pre,m=h.next;d[e]=ut(s)?s(d,h):(y+m)/2+s}})}),[]},n.prototype.getDodgeOffset=function(e,r,i){var a=this,o=a.dodgeRatio,s=a.marginRatio,l=a.intervalPadding,c=a.dodgePadding,u=e.pre,f=e.next,h=f-u,d;if(!J(l)&&J(c)&&l>=0){var p=this.getIntervalOnlyOffset(i,r);d=u+p}else if(!J(c)&&J(l)&&c>=0){var p=this.getDodgeOnlyOffset(i,r);d=u+p}else if(!J(l)&&!J(c)&&l>=0&&c>=0){var p=this.getIntervalAndDodgeOffset(i,r);d=u+p}else{var v=h*o/i,g=s*v,p=1/2*(h-i*v-(i-1)*g)+((r+1)*v+r*g)-1/2*v-1/2*h;d=(u+f)/2+p}return d},n.prototype.getIntervalOnlyOffset=function(e,r){var i=this,a=i.defaultSize,o=i.intervalPadding,s=i.xDimensionLegenth,l=i.groupNum,c=i.dodgeRatio,u=i.maxColumnWidth,f=i.minColumnWidth,h=i.columnWidthRatio,d=o/s,p=(1-(l-1)*d)/l*c/(e-1),v=((1-d*(l-1))/l-p*(e-1))/e;if(v=J(h)?v:1/l/e*h,!J(u)){var g=u/s;v=Math.min(v,g)}if(!J(f)){var y=f/s;v=Math.max(v,y)}v=a?a/s:v,p=((1-(l-1)*d)/l-e*v)/(e-1);var m=((1/2+r)*v+r*p+1/2*d)*l-d/2;return m},n.prototype.getDodgeOnlyOffset=function(e,r){var i=this,a=i.defaultSize,o=i.dodgePadding,s=i.xDimensionLegenth,l=i.groupNum,c=i.marginRatio,u=i.maxColumnWidth,f=i.minColumnWidth,h=i.columnWidthRatio,d=o/s,p=1*c/(l-1),v=((1-p*(l-1))/l-d*(e-1))/e;if(v=h?1/l/e*h:v,!J(u)){var g=u/s;v=Math.min(v,g)}if(!J(f)){var y=f/s;v=Math.max(v,y)}v=a?a/s:v,p=(1-(v*e+d*(e-1))*l)/(l-1);var m=((1/2+r)*v+r*d+1/2*p)*l-p/2;return m},n.prototype.getIntervalAndDodgeOffset=function(e,r){var i=this,a=i.intervalPadding,o=i.dodgePadding,s=i.xDimensionLegenth,l=i.groupNum,c=a/s,u=o/s,f=((1-c*(l-1))/l-u*(e-1))/e,h=((1/2+r)*f+r*u+1/2*c)*l-c/2;return h},n.prototype.getDistribution=function(e){var r=this.adjustDataArray,i=this.cacheMap,a=i[e];return a||(a={},$(r,function(o,s){var l=Ni(o,e);l.length||l.push(0),$(l,function(c){a[c]||(a[c]=[]),a[c].push(s)})}),i[e]=a),a},n}(p0);function DZ(t,n){return(n-t)*Math.random()+t}var RZ=function(t){g0(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.process=function(e){var r=er(e),i=Wr(r);return this.adjustData(r,i),r},n.prototype.adjustDim=function(e,r,i){var a=this,o=this.groupData(i,e);return $(o,function(s,l){return a.adjustGroup(s,e,parseFloat(l),r)})},n.prototype.getAdjustOffset=function(e){var r=e.pre,i=e.next,a=(i-r)*IZ;return DZ(r+a,i-a)},n.prototype.adjustGroup=function(e,r,i,a){var o=this,s=this.getAdjustRange(r,i,a);return $(e,function(l){l[r]=o.getAdjustOffset(s)}),e},n}(p0),m1=uX,BZ=function(t){g0(n,t);function n(e){var r=t.call(this,e)||this,i=e.adjustNames,a=i===void 0?["y"]:i,o=e.height,s=o===void 0?NaN:o,l=e.size,c=l===void 0?10:l,u=e.reverseOrder,f=u===void 0?!1:u;return r.adjustNames=a,r.height=s,r.size=c,r.reverseOrder=f,r}return n.prototype.process=function(e){var r=this,i=r.yField,a=r.reverseOrder,o=i?this.processStack(e):this.processOneDimStack(e);return a?this.reverse(o):o},n.prototype.reverse=function(e){return e.slice(0).reverse()},n.prototype.processStack=function(e){var r=this,i=r.xField,a=r.yField,o=r.reverseOrder,s=o?this.reverse(e):e,l=new m1,c=new m1;return s.map(function(u){return u.map(function(f){var h,d=z(f,i,0),p=z(f,[a]),v=d.toString();if(p=et(p)?p[1]:p,!J(p)){var g=p>=0?l:c;g.has(v)||g.set(v,0);var y=g.get(v),m=p+y;return g.set(v,m),ra(ra({},f),(h={},h[a]=[y,m],h))}return f})})},n.prototype.processOneDimStack=function(e){var r=this,i=this,a=i.xField,o=i.height,s=i.reverseOrder,l="y",c=s?this.reverse(e):e,u=new m1;return c.map(function(f){return f.map(function(h){var d,p=r.size,v=h[a],g=p*2/o;u.has(v)||u.set(v,g/2);var y=u.get(v);return u.set(v,y+g),ra(ra({},h),(d={},d[l]=y,d))})})},n}(p0),NZ=function(t){g0(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.process=function(e){var r=Wr(e),i=this,a=i.xField,o=i.yField,s=this.getXValuesMaxMap(r),l=Math.max.apply(Math,Object.keys(s).map(function(c){return s[c]}));return Ae(e,function(c){return Ae(c,function(u){var f,h,d=u[o],p=u[a];if(et(d)){var v=(l-s[p])/2;return ra(ra({},u),(f={},f[o]=Ae(d,function(y){return v+y}),f))}var g=(l-d)/2;return ra(ra({},u),(h={},h[o]=[g,d+g],h))})})},n.prototype.getXValuesMaxMap=function(e){var r=this,i=this,a=i.xField,o=i.yField,s=Gr(e,function(l){return l[a]});return oX(s,function(l){return r.getDimMaxValue(l,o)})},n.prototype.getDimMaxValue=function(e,r){var i=Ae(e,function(o){return z(o,r,[])}),a=Wr(i);return Math.max.apply(Math,a)},n}(p0);v0("Dodge",FZ);v0("Jitter",RZ);v0("Stack",BZ);v0("Symmetric",NZ);var KT=function(t,n){return pt(n)?n:t.invert(t.scale(n))},yd=function(){function t(n){this.names=[],this.scales=[],this.linear=!1,this.values=[],this.callback=function(){return[]},this._parseCfg(n)}return t.prototype.mapping=function(){for(var n=this,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var i=e.map(function(a,o){return n._toOriginParam(a,n.scales[o])});return this.callback.apply(this,i)},t.prototype.getLinearValue=function(n){var e=this.values.length-1,r=Math.floor(e*n),i=e*n-r,a=this.values[r],o=r===e?a:this.values[r+1];return a+(o-a)*i},t.prototype.getNames=function(){for(var n=this.scales,e=this.names,r=Math.min(n.length,e.length),i=[],a=0;a<r;a+=1)i.push(e[a]);return i},t.prototype.getFields=function(){return this.scales.map(function(n){return n.field})},t.prototype.getScale=function(n){return this.scales[this.names.indexOf(n)]},t.prototype.defaultCallback=function(){for(var n=this,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e.length===0?this.values:e.map(function(i,a){var o=n.scales[a];return o.type==="identity"?o.values[0]:n._getAttributeValue(o,i)})},t.prototype._parseCfg=function(n){var e=this,r=n.type,i=r===void 0?"base":r,a=n.names,o=a===void 0?[]:a,s=n.scales,l=s===void 0?[]:s,c=n.values,u=c===void 0?[]:c,f=n.callback;this.type=i,this.scales=l,this.values=u,this.names=o,this.callback=function(){for(var h=[],d=0;d<arguments.length;d++)h[d]=arguments[d];if(f){var p=f.apply(void 0,h);if(!J(p))return[p]}return e.defaultCallback.apply(e,h)}},t.prototype._getAttributeValue=function(n,e){if(n.isCategory&&!this.linear){var r=n.translate(e);return this.values[r%this.values.length]}var i=n.scale(e);return this.getLinearValue(i)},t.prototype._toOriginParam=function(n,e){return e.isLinear?n:et(n)?n.map(function(r){return KT(e,r)}):KT(e,n)},t}(),$Z=/rgba?\(([\s.,0-9]+)\)/,jZ=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,zZ=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,GZ=/[\d.]+:(#[^\s]+|[^\)]+\))/gi,YZ=function(t){return/^[r,R,L,l]{1}[\s]*\(/.test(t)},WZ=function(){var t=document.createElement("i");return t.title="Web Colour Picker",t.style.display="none",document.body.appendChild(t),t},x1=function(t,n,e,r){return t[r]+(n[r]-t[r])*e};function u5(t){return"#"+b1(t[0])+b1(t[1])+b1(t[2])}var f5=function(t){return[parseInt(t.substr(1,2),16),parseInt(t.substr(3,2),16),parseInt(t.substr(5,2),16)]},b1=function(t){var n=Math.round(t).toString(16);return n.length===1?"0"+n:n},VZ=function(t,n){var e=isNaN(Number(n))||n<0?0:n>1?1:Number(n),r=t.length-1,i=Math.floor(r*e),a=r*e-i,o=t[i],s=i===r?o:t[i+1];return u5([x1(o,s,a,0),x1(o,s,a,1),x1(o,s,a,2)])},gp,h5=function(t){if(t[0]==="#"&&t.length===7)return t;gp||(gp=WZ()),gp.style.color=t;var n=document.defaultView.getComputedStyle(gp,"").getPropertyValue("color"),e=$Z.exec(n),r=e[1].split(/\s*,\s*/).map(function(i){return Number(i)});return n=u5(r),n},HZ=function(t){var n=pt(t)?t.split("-"):t,e=Ae(n,function(r){return f5(r.indexOf("#")===-1?h5(r):r)});return function(r){return VZ(e,r)}},XZ=function(t){if(YZ(t)){var n,e=void 0;if(t[0]==="l"){var r=jZ.exec(t),i=+r[1]+90;e=r[2],n="linear-gradient("+i+"deg, "}else if(t[0]==="r"){n="radial-gradient(";var r=zZ.exec(t);e=r[4]}var a=e.match(GZ);return $(a,function(o,s){var l=o.split(":");n+=l[1]+" "+l[0]*100+"%",s!==a.length-1&&(n+=", ")}),n+=")",n}return t};const No={rgb2arr:f5,gradient:HZ,toRGB:Mu(h5),toCSSGradient:XZ};var UZ=function(t){G(n,t);function n(e){var r=t.call(this,e)||this;return r.type="color",r.names=["color"],pt(r.values)&&(r.linear=!0),r.gradient=No.gradient(r.values),r}return n.prototype.getLinearValue=function(e){return this.gradient(e)},n}(yd),qZ=function(t){G(n,t);function n(e){var r=t.call(this,e)||this;return r.type="opacity",r.names=["opacity"],r}return n}(yd),ZZ=function(t){G(n,t);function n(e){var r=t.call(this,e)||this;return r.names=["x","y"],r.type="position",r}return n.prototype.mapping=function(e,r){var i=this.scales,a=i[0],o=i[1];return J(e)||J(r)?[]:[et(e)?e.map(function(s){return a.scale(s)}):a.scale(e),et(r)?r.map(function(s){return o.scale(s)}):o.scale(r)]},n}(yd),KZ=function(t){G(n,t);function n(e){var r=t.call(this,e)||this;return r.type="shape",r.names=["shape"],r}return n.prototype.getLinearValue=function(e){var r=Math.round((this.values.length-1)*e);return this.values[r]},n}(yd),QZ=function(t){G(n,t);function n(e){var r=t.call(this,e)||this;return r.type="size",r.names=["size"],r}return n}(yd),d5={};function JZ(t){return d5[t]}function xa(t,n){d5[t]=n}var AS=function(){function t(n){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=n,this.initCfg(),this.init()}return t.prototype.translate=function(n){return n},t.prototype.change=function(n){Jt(this.__cfg__,n),this.init()},t.prototype.clone=function(){return this.constructor(this.__cfg__)},t.prototype.getTicks=function(){var n=this;return Ae(this.ticks,function(e,r){return Qt(e)?e:{text:n.getText(e,r),tickValue:e,value:n.scale(e)}})},t.prototype.getText=function(n,e){var r=this.formatter,i=r?r(n,e):n;return J(i)||!ut(i.toString)?"":i.toString()},t.prototype.getConfig=function(n){return this.__cfg__[n]},t.prototype.init=function(){Jt(this,this.__cfg__),this.setDomain(),Mr(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},t.prototype.initCfg=function(){},t.prototype.setDomain=function(){},t.prototype.calculateTicks=function(){var n=this.tickMethod,e=[];if(pt(n)){var r=JZ(n);if(!r)throw new Error("There is no method to to calculate ticks!");e=r(this)}else ut(n)&&(e=n(this));return e},t.prototype.rangeMin=function(){return this.range[0]},t.prototype.rangeMax=function(){return this.range[1]},t.prototype.calcPercent=function(n,e,r){return bt(n)?(n-e)/(r-e):NaN},t.prototype.calcValue=function(n,e,r){return e+n*(r-e)},t}(),y0=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="cat",e.isCategory=!0,e}return n.prototype.buildIndexMap=function(){if(!this.translateIndexMap){this.translateIndexMap=new Map;for(var e=0;e<this.values.length;e++)this.translateIndexMap.set(this.values[e],e)}},n.prototype.translate=function(e){this.buildIndexMap();var r=this.translateIndexMap.get(e);return r===void 0&&(r=bt(e)?e:NaN),r},n.prototype.scale=function(e){var r=this.translate(e),i=this.calcPercent(r,this.min,this.max);return this.calcValue(i,this.rangeMin(),this.rangeMax())},n.prototype.invert=function(e){var r=this.max-this.min,i=this.calcPercent(e,this.rangeMin(),this.rangeMax()),a=Math.round(r*i)+this.min;return a<this.min||a>this.max?NaN:this.values[a]},n.prototype.getText=function(e){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var a=e;return bt(e)&&!this.values.includes(e)&&(a=this.values[a]),t.prototype.getText.apply(this,rl([a],r))},n.prototype.initCfg=function(){this.tickMethod="cat"},n.prototype.setDomain=function(){if(J(this.getConfig("min"))&&(this.min=0),J(this.getConfig("max"))){var e=this.values.length;this.max=e>1?e-1:e}this.translateIndexMap&&(this.translateIndexMap=void 0)},n}(AS),p5=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,po="\\d\\d?",co="\\d\\d",tK="\\d{3}",eK="\\d{4}",jf="[^\\s]+",v5=/\[([^]*?)\]/gm;function g5(t,n){for(var e=[],r=0,i=t.length;r<i;r++)e.push(t[r].substr(0,n));return e}var QT=function(t){return function(n,e){var r=e[t].map(function(a){return a.toLowerCase()}),i=r.indexOf(n.toLowerCase());return i>-1?i:null}};function Xo(t){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];for(var r=0,i=n;r<i.length;r++){var a=i[r];for(var o in a)t[o]=a[o]}return t}var y5=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],m5=["January","February","March","April","May","June","July","August","September","October","November","December"],nK=g5(m5,3),rK=g5(y5,3),ES={dayNamesShort:rK,dayNames:y5,monthNamesShort:nK,monthNames:m5,amPm:["am","pm"],DoFn:function(t){return t+["th","st","nd","rd"][t%10>3?0:(t-t%10!==10?1:0)*t%10]}},yg=Xo({},ES),x5=function(t){return yg=Xo(yg,t)},JT=function(t){return t.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},fr=function(t,n){for(n===void 0&&(n=2),t=String(t);t.length<n;)t="0"+t;return t},iK={D:function(t){return String(t.getDate())},DD:function(t){return fr(t.getDate())},Do:function(t,n){return n.DoFn(t.getDate())},d:function(t){return String(t.getDay())},dd:function(t){return fr(t.getDay())},ddd:function(t,n){return n.dayNamesShort[t.getDay()]},dddd:function(t,n){return n.dayNames[t.getDay()]},M:function(t){return String(t.getMonth()+1)},MM:function(t){return fr(t.getMonth()+1)},MMM:function(t,n){return n.monthNamesShort[t.getMonth()]},MMMM:function(t,n){return n.monthNames[t.getMonth()]},YY:function(t){return fr(String(t.getFullYear()),4).substr(2)},YYYY:function(t){return fr(t.getFullYear(),4)},h:function(t){return String(t.getHours()%12||12)},hh:function(t){return fr(t.getHours()%12||12)},H:function(t){return String(t.getHours())},HH:function(t){return fr(t.getHours())},m:function(t){return String(t.getMinutes())},mm:function(t){return fr(t.getMinutes())},s:function(t){return String(t.getSeconds())},ss:function(t){return fr(t.getSeconds())},S:function(t){return String(Math.round(t.getMilliseconds()/100))},SS:function(t){return fr(Math.round(t.getMilliseconds()/10),2)},SSS:function(t){return fr(t.getMilliseconds(),3)},a:function(t,n){return t.getHours()<12?n.amPm[0]:n.amPm[1]},A:function(t,n){return t.getHours()<12?n.amPm[0].toUpperCase():n.amPm[1].toUpperCase()},ZZ:function(t){var n=t.getTimezoneOffset();return(n>0?"-":"+")+fr(Math.floor(Math.abs(n)/60)*100+Math.abs(n)%60,4)},Z:function(t){var n=t.getTimezoneOffset();return(n>0?"-":"+")+fr(Math.floor(Math.abs(n)/60),2)+":"+fr(Math.abs(n)%60,2)}},tC=function(t){return+t-1},eC=[null,po],nC=[null,jf],rC=["isPm",jf,function(t,n){var e=t.toLowerCase();return e===n.amPm[0]?0:e===n.amPm[1]?1:null}],iC=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(t){var n=(t+"").match(/([+-]|\d\d)/gi);if(n){var e=+n[1]*60+parseInt(n[2],10);return n[0]==="+"?e:-e}return 0}],aK={D:["day",po],DD:["day",co],Do:["day",po+jf,function(t){return parseInt(t,10)}],M:["month",po,tC],MM:["month",co,tC],YY:["year",co,function(t){var n=new Date,e=+(""+n.getFullYear()).substr(0,2);return+(""+(+t>68?e-1:e)+t)}],h:["hour",po,void 0,"isPm"],hh:["hour",co,void 0,"isPm"],H:["hour",po],HH:["hour",co],m:["minute",po],mm:["minute",co],s:["second",po],ss:["second",co],YYYY:["year",eK],S:["millisecond","\\d",function(t){return+t*100}],SS:["millisecond",co,function(t){return+t*10}],SSS:["millisecond",tK],d:eC,dd:eC,ddd:nC,dddd:nC,MMM:["month",jf,QT("monthNamesShort")],MMMM:["month",jf,QT("monthNames")],a:rC,A:rC,ZZ:iC,Z:iC},mg={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},b5=function(t){return Xo(mg,t)},TS=function(t,n,e){if(n===void 0&&(n=mg.default),e===void 0&&(e={}),typeof t=="number"&&(t=new Date(t)),Object.prototype.toString.call(t)!=="[object Date]"||isNaN(t.getTime()))throw new Error("Invalid Date pass to format");n=mg[n]||n;var r=[];n=n.replace(v5,function(a,o){return r.push(o),"@@@"});var i=Xo(Xo({},yg),e);return n=n.replace(p5,function(a){return iK[a](t,i)}),n.replace(/@@@/g,function(){return r.shift()})};function w5(t,n,e){if(e===void 0&&(e={}),typeof n!="string")throw new Error("Invalid format in fecha parse");if(n=mg[n]||n,t.length>1e3)return null;var r=new Date,i={year:r.getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},a=[],o=[],s=n.replace(v5,function(b,w){return o.push(JT(w)),"@@@"}),l={},c={};s=JT(s).replace(p5,function(b){var w=aK[b],S=w[0],O=w[1],M=w[3];if(l[S])throw new Error("Invalid format. "+S+" specified twice in format");return l[S]=!0,M&&(c[M]=!0),a.push(w),"("+O+")"}),Object.keys(c).forEach(function(b){if(!l[b])throw new Error("Invalid format. "+b+" is required in specified format")}),s=s.replace(/@@@/g,function(){return o.shift()});var u=t.match(new RegExp(s,"i"));if(!u)return null;for(var f=Xo(Xo({},yg),e),h=1;h<u.length;h++){var d=a[h-1],p=d[0],v=d[2],g=v?v(u[h],f):+u[h];if(g==null)return null;i[p]=g}i.isPm===1&&i.hour!=null&&+i.hour!=12?i.hour=+i.hour+12:i.isPm===0&&+i.hour==12&&(i.hour=0);var y;if(i.timezoneOffset==null){y=new Date(i.year,i.month,i.day,i.hour,i.minute,i.second,i.millisecond);for(var m=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],h=0,x=m.length;h<x;h++)if(l[m[h][0]]&&i[m[h][0]]!==y[m[h][1]]())return null}else if(y=new Date(Date.UTC(i.year,i.month,i.day,i.hour,i.minute-i.timezoneOffset,i.second,i.millisecond)),i.month>11||i.month<0||i.day>31||i.day<1||i.hour>23||i.hour<0||i.minute>59||i.minute<0||i.second>59||i.second<0)return null;return y}var S5={format:TS,parse:w5,defaultI18n:ES,setGlobalDateI18n:x5,setGlobalDateMasks:b5};const oK=Object.freeze(Object.defineProperty({__proto__:null,assign:Xo,default:S5,defaultI18n:ES,format:TS,parse:w5,setGlobalDateI18n:x5,setGlobalDateMasks:b5},Symbol.toStringTag,{value:"Module"}));function sK(t){return function(n,e,r,i){for(var a=J(r)?0:r,o=J(i)?n.length:i;a<o;){var s=a+o>>>1;t(n[s])>e?o=s:a=s+1}return a}}var aC="format";function O5(t,n){var e=oK[aC]||S5[aC];return e(t,n)}function xg(t){return pt(t)&&(t.indexOf("T")>0?t=new Date(t).getTime():t=new Date(t.replace(/-/gi,"/")).getTime()),ZD(t)&&(t=t.getTime()),t}var Ci=1e3,qs=60*Ci,Zs=60*qs,Ra=24*Zs,zf=Ra*31,oC=Ra*365,Qu=[["HH:mm:ss",Ci],["HH:mm:ss",Ci*10],["HH:mm:ss",Ci*30],["HH:mm",qs],["HH:mm",qs*10],["HH:mm",qs*30],["HH",Zs],["HH",Zs*6],["HH",Zs*12],["YYYY-MM-DD",Ra],["YYYY-MM-DD",Ra*4],["YYYY-WW",Ra*7],["YYYY-MM",zf],["YYYY-MM",zf*4],["YYYY-MM",zf*6],["YYYY",Ra*380]];function lK(t,n,e){var r=(n-t)/e,i=sK(function(o){return o[1]})(Qu,r)-1,a=Qu[i];return i<0?a=Qu[0]:i>=Qu.length&&(a=ln(Qu)),a}var cK=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="timeCat",e}return n.prototype.translate=function(e){e=xg(e);var r=this.values.indexOf(e);return r===-1&&(bt(e)&&e<this.values.length?r=e:r=NaN),r},n.prototype.getText=function(e,r){var i=this.translate(e);if(i>-1){var a=this.values[i],o=this.formatter;return a=o?o(a,r):O5(a,this.mask),a}return e},n.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},n.prototype.setDomain=function(){var e=this.values;$(e,function(r,i){e[i]=xg(r)}),e.sort(function(r,i){return r-i}),t.prototype.setDomain.call(this)},n}(y0),m0=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.isContinuous=!0,e}return n.prototype.scale=function(e){if(J(e))return NaN;var r=this.rangeMin(),i=this.rangeMax(),a=this.max,o=this.min;if(a===o)return r;var s=this.getScalePercent(e);return r+s*(i-r)},n.prototype.init=function(){t.prototype.init.call(this);var e=this.ticks,r=zr(e),i=ln(e);r<this.min&&(this.min=r),i>this.max&&(this.max=i),J(this.minLimit)||(this.min=r),J(this.maxLimit)||(this.max=i)},n.prototype.setDomain=function(){var e=HD(this.values),r=e.min,i=e.max;J(this.min)&&(this.min=r),J(this.max)&&(this.max=i),this.min>this.max&&(this.min=r,this.max=i)},n.prototype.calculateTicks=function(){var e=this,r=t.prototype.calculateTicks.call(this);return this.nice||(r=Ln(r,function(i){return i>=e.min&&i<=e.max})),r},n.prototype.getScalePercent=function(e){var r=this.max,i=this.min;return(e-i)/(r-i)},n.prototype.getInvertPercent=function(e){return(e-this.rangeMin())/(this.rangeMax()-this.rangeMin())},n}(AS),x0=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="linear",e.isLinear=!0,e}return n.prototype.invert=function(e){var r=this.getInvertPercent(e);return this.min+r*(this.max-this.min)},n.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1},n}(m0);function mo(t,n){var e=Math.E,r;return n>=0?r=Math.pow(e,Math.log(n)/t):r=Math.pow(e,Math.log(-n)/t)*-1,r}function ii(t,n){return t===1?1:Math.log(n)/Math.log(t)}function M5(t,n,e){J(e)&&(e=Math.max.apply(null,t));var r=e;return $(t,function(i){i>0&&i<r&&(r=i)}),r===e&&(r=e/n),r>1&&(r=1),r}var uK=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="log",e}return n.prototype.invert=function(e){var r=this.base,i=ii(r,this.max),a=this.rangeMin(),o=this.rangeMax()-a,s,l=this.positiveMin;if(l){if(e===0)return 0;s=ii(r,l/r);var c=1/(i-s)*o;if(e<c)return e/c*l}else s=ii(r,this.min);var u=(e-a)/o,f=u*(i-s)+s;return Math.pow(r,f)},n.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},n.prototype.setDomain=function(){t.prototype.setDomain.call(this);var e=this.min;if(e<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");e===0&&(this.positiveMin=M5(this.values,this.base,this.max))},n.prototype.getScalePercent=function(e){var r=this.max,i=this.min;if(r===i||e<=0)return 0;var a=this.base,o=this.positiveMin;o&&(i=o*1/a);var s;return e<o?s=e/o/(ii(a,r)-ii(a,i)):s=(ii(a,e)-ii(a,i))/(ii(a,r)-ii(a,i)),s},n}(m0),fK=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="pow",e}return n.prototype.invert=function(e){var r=this.getInvertPercent(e),i=this.exponent,a=mo(i,this.max),o=mo(i,this.min),s=r*(a-o)+o,l=s>=0?1:-1;return Math.pow(s,i)*l},n.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},n.prototype.getScalePercent=function(e){var r=this.max,i=this.min;if(r===i)return 0;var a=this.exponent,o=(mo(a,e)-mo(a,i))/(mo(a,r)-mo(a,i));return o},n}(m0),hK=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="time",e}return n.prototype.getText=function(e,r){var i=this.translate(e),a=this.formatter;return a?a(i,r):O5(i,this.mask)},n.prototype.scale=function(e){var r=e;return(pt(r)||ZD(r))&&(r=this.translate(r)),t.prototype.scale.call(this,r)},n.prototype.translate=function(e){return xg(e)},n.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},n.prototype.setDomain=function(){var e=this.values,r=this.getConfig("min"),i=this.getConfig("max");if((!J(r)||!bt(r))&&(this.min=this.translate(this.min)),(!J(i)||!bt(i))&&(this.max=this.translate(this.max)),e&&e.length){var a=[],o=1/0,s=o,l=0;$(e,function(c){var u=xg(c);if(isNaN(u))throw new TypeError("Invalid Time: "+c+" in time scale!");o>u?(s=o,o=u):s>u&&(s=u),l<u&&(l=u),a.push(u)}),e.length>1&&(this.minTickInterval=s-o),J(r)&&(this.min=o),J(i)&&(this.max=l)}},n}(x0),A5=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="quantize",e}return n.prototype.invert=function(e){var r=this.ticks,i=r.length,a=this.getInvertPercent(e),o=Math.floor(a*(i-1));if(o>=i-1)return ln(r);if(o<0)return zr(r);var s=r[o],l=r[o+1],c=o/(i-1),u=(o+1)/(i-1);return s+(a-c)/(u-c)*(l-s)},n.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},n.prototype.calculateTicks=function(){var e=t.prototype.calculateTicks.call(this);return this.nice||(ln(e)!==this.max&&e.push(this.max),zr(e)!==this.min&&e.unshift(this.min)),e},n.prototype.getScalePercent=function(e){var r=this.ticks;if(e<zr(r))return 0;if(e>ln(r))return 1;var i=0;return $(r,function(a,o){if(e>=a)i=o;else return!1}),i/(r.length-1)},n}(m0),dK=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="quantile",e}return n.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0},n}(A5),E5={};function Lb(t){return E5[t]}function ba(t,n){if(Lb(t))throw new Error("type '"+t+"' existed.");E5[t]=n}var pK=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="identity",e.isIdentity=!0,e}return n.prototype.calculateTicks=function(){return this.values},n.prototype.scale=function(e){return this.values[0]!==e&&bt(e)?e:this.range[0]},n.prototype.invert=function(e){var r=this.range;return e<r[0]||e>r[1]?NaN:this.values[0]},n}(AS);function T5(t){var n=t.values,e=t.tickInterval,r=t.tickCount,i=t.showLast;if(bt(e)){var a=Ln(n,function(p,v){return v%e===0}),o=ln(n);return i&&ln(a)!==o&&a.push(o),a}var s=n.length,l=t.min,c=t.max;if(J(l)&&(l=0),J(c)&&(c=n.length-1),!bt(r)||r>=s)return n.slice(l,c+1);if(r<=0||c<=0)return[];for(var u=r===1?s:Math.floor(s/(r-1)),f=[],h=l,d=0;d<r&&!(h>=c);d++)h=Math.min(l+d*u,c),d===r-1&&i?f.push(n[c]):f.push(n[h]);return f}function vK(t){var n=t.min,e=t.max,r=t.nice,i=t.tickCount,a=new gK;return a.domain([n,e]),r&&a.nice(i),a.ticks(i)}var w1=5,sC=Math.sqrt(50),lC=Math.sqrt(10),cC=Math.sqrt(2),gK=function(){function t(){this._domain=[0,1]}return t.prototype.domain=function(n){return n?(this._domain=Array.from(n,Number),this):this._domain.slice()},t.prototype.nice=function(n){var e,r;n===void 0&&(n=w1);var i=this._domain.slice(),a=0,o=this._domain.length-1,s=this._domain[a],l=this._domain[o],c;return l<s&&(e=[l,s],s=e[0],l=e[1],r=[o,a],a=r[0],o=r[1]),c=Fv(s,l,n),c>0?(s=Math.floor(s/c)*c,l=Math.ceil(l/c)*c,c=Fv(s,l,n)):c<0&&(s=Math.ceil(s*c)/c,l=Math.floor(l*c)/c,c=Fv(s,l,n)),c>0?(i[a]=Math.floor(s/c)*c,i[o]=Math.ceil(l/c)*c,this.domain(i)):c<0&&(i[a]=Math.ceil(s*c)/c,i[o]=Math.floor(l*c)/c,this.domain(i)),this},t.prototype.ticks=function(n){return n===void 0&&(n=w1),yK(this._domain[0],this._domain[this._domain.length-1],n||w1)},t}();function yK(t,n,e){var r,i=-1,a,o,s;if(n=+n,t=+t,e=+e,t===n&&e>0)return[t];if((r=n<t)&&(a=t,t=n,n=a),(s=Fv(t,n,e))===0||!isFinite(s))return[];if(s>0)for(t=Math.ceil(t/s),n=Math.floor(n/s),o=new Array(a=Math.ceil(n-t+1));++i<a;)o[i]=(t+i)*s;else for(t=Math.floor(t*s),n=Math.ceil(n*s),o=new Array(a=Math.ceil(t-n+1));++i<a;)o[i]=(t-i)/s;return r&&o.reverse(),o}function Fv(t,n,e){var r=(n-t)/Math.max(0,e),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=sC?10:a>=lC?5:a>=cC?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=sC?10:a>=lC?5:a>=cC?2:1)}function uC(t,n,e){var r;return e==="ceil"?r=Math.ceil(t/n):e==="floor"?r=Math.floor(t/n):r=Math.round(t/n),r*n}function CS(t,n,e){var r=uC(t,e,"floor"),i=uC(n,e,"ceil");r=a1(r,e),i=a1(i,e);for(var a=[],o=Math.max((i-r)/(Math.pow(2,12)-1),e),s=r;s<=i;s=s+o){var l=a1(s,o);a.push(l)}return{min:r,max:i,ticks:a}}function PS(t,n,e){var r,i=t.minLimit,a=t.maxLimit,o=t.min,s=t.max,l=t.tickCount,c=l===void 0?5:l,u=J(i)?J(n)?o:n:i,f=J(a)?J(e)?s:e:a;if(u>f&&(r=[u,f],f=r[0],u=r[1]),c<=2)return[u,f];for(var h=(f-u)/(c-1),d=[],p=0;p<c;p++)d.push(u+h*p);return d}function mK(t){var n=t.min,e=t.max,r=t.tickInterval,i=t.minLimit,a=t.maxLimit,o=vK(t);return!J(i)||!J(a)?PS(t,zr(o),ln(o)):r?CS(n,e,r).ticks:o}function Is(t){return Math.abs(t)<1e-15?t:parseFloat(t.toFixed(15))}var xK=[1,5,2,2.5,4,3],fC=Number.EPSILON*100;function bK(t,n){return(t%n+n)%n}function wK(t){return Math.round(t*1e12)/1e12}function SK(t,n,e,r,i,a){var o=mn(n),s=eR(n,t),l=0,c=bK(r,a);return(c<fC||a-c<fC)&&r<=0&&i>=0&&(l=1),1-s/(o-1)-e+l}function OK(t,n,e){var r=mn(n),i=eR(n,t),a=1;return 1-i/(r-1)-e+a}function MK(t,n,e,r,i,a){var o=(t-1)/(a-i),s=(n-1)/(Math.max(a,r)-Math.min(e,i));return 2-Math.max(o/s,s/o)}function AK(t,n){return t>=n?2-(t-1)/(n-1):1}function EK(t,n,e,r){var i=n-t;return 1-.5*(Math.pow(n-r,2)+Math.pow(t-e,2))/Math.pow(.1*i,2)}function TK(t,n,e){var r=n-t;if(e>r){var i=(e-r)/2;return 1-Math.pow(i,2)/Math.pow(.1*r,2)}return 1}function CK(){return 1}function PK(t,n,e,r,i,a){e===void 0&&(e=5),r===void 0&&(r=!0),i===void 0&&(i=xK),a===void 0&&(a=[.25,.2,.5,.05]);var o=e<0?0:Math.round(e);if(Number.isNaN(t)||Number.isNaN(n)||typeof t!="number"||typeof n!="number"||!o)return{min:0,max:0,ticks:[]};if(n-t<1e-15||o===1)return{min:t,max:n,ticks:[t]};if(n-t>1e148){var s=e||5,l=(n-t)/s;return{min:t,max:n,ticks:Array(s).fill(null).map(function(j,Y){return Is(t+l*Y)})}}for(var c={score:-2,lmin:0,lmax:0,lstep:0},u=1;u<1/0;){for(var f=0;f<i.length;f+=1){var h=i[f],d=OK(h,i,u);if(a[0]*d+a[1]+a[2]+a[3]<c.score){u=1/0;break}for(var p=2;p<1/0;){var v=AK(p,o);if(a[0]*d+a[1]+a[2]*v+a[3]<c.score)break;for(var g=(n-t)/(p+1)/u/h,y=Math.ceil(Math.log10(g));y<1/0;){var m=u*h*Math.pow(10,y),x=TK(t,n,m*(p-1));if(a[0]*d+a[1]*x+a[2]*v+a[3]<c.score)break;var b=Math.floor(n/m)*u-(p-1)*u,w=Math.ceil(t/m)*u;if(b<=w)for(var s=w-b,S=0;S<=s;S+=1){var O=b+S,M=O*(m/u),A=M+m*(p-1),T=m,C=SK(h,i,u,M,A,T),P=EK(t,n,M,A),_=MK(p,o,t,n,M,A),k=CK(),I=a[0]*C+a[1]*P+a[2]*_+a[3]*k;I>c.score&&(!r||M<=t&&A>=n)&&(c.lmin=M,c.lmax=A,c.lstep=T,c.score=I)}y+=1}p+=1}}u+=1}var L=Is(c.lmax),F=Is(c.lmin),B=Is(c.lstep),D=Math.floor(wK((L-F)/B))+1,N=new Array(D);N[0]=Is(F);for(var f=1;f<D;f++)N[f]=Is(N[f-1]+B);return{min:Math.min(t,zr(N)),max:Math.max(n,ln(N)),ticks:N}}function kK(t){var n=t.min,e=t.max,r=t.tickCount,i=t.nice,a=t.tickInterval,o=t.minLimit,s=t.maxLimit,l=PK(n,e,r,i).ticks;return!J(o)||!J(s)?PS(t,zr(l),ln(l)):a?CS(n,e,a).ticks:l}function _K(t){var n=t.base,e=t.tickCount,r=t.min,i=t.max,a=t.values,o,s=ii(n,i);if(r>0)o=Math.floor(ii(n,r));else{var l=M5(a,n,i);o=Math.floor(ii(n,l))}for(var c=s-o,u=Math.ceil(c/e),f=[],h=o;h<s+u;h=h+u)f.push(Math.pow(n,h));return r<=0&&f.unshift(0),f}function C5(t,n,e){if(e===void 0&&(e=5),t===n)return{max:n,min:t,ticks:[t]};var r=e<0?0:Math.round(e);if(r===0)return{max:n,min:t,ticks:[]};var i=1.5,a=.5+1.5*i,o=n-t,s=o/r,l=Math.pow(10,Math.floor(Math.log10(s))),c=l;2*l-s<i*(s-c)&&(c=2*l,5*l-s<a*(s-c)&&(c=5*l,10*l-s<i*(s-c)&&(c=10*l)));for(var u=Math.ceil(n/c),f=Math.floor(t/c),h=Math.max(u*c,n),d=Math.min(f*c,t),p=Math.floor((h-d)/c)+1,v=new Array(p),g=0;g<p;g++)v[g]=Is(d+g*c);return{min:d,max:h,ticks:v}}function LK(t){var n=t.exponent,e=t.tickCount,r=Math.ceil(mo(n,t.max)),i=Math.floor(mo(n,t.min)),a=C5(i,r,e).ticks;return a.map(function(o){var s=o>=0?1:-1;return Math.pow(o,n)*s})}function IK(t,n){var e=t.length*n;return n===1?t[t.length-1]:n===0?t[0]:e%1!==0?t[Math.ceil(e)-1]:t.length%2===0?(t[e-1]+t[e])/2:t[e]}function FK(t){var n=t.tickCount,e=t.values;if(!e||!e.length)return[];for(var r=e.slice().sort(function(s,l){return s-l}),i=[],a=0;a<n;a++){var o=a/(n-1);i.push(IK(r,o))}return i}function DK(t){var n=t.min,e=t.max,r=t.tickCount,i=t.tickInterval,a=t.minLimit,o=t.maxLimit,s=C5(n,e,r).ticks;return!J(a)||!J(o)?PS(t,zr(s),ln(s)):i?CS(n,e,i).ticks:s}function RK(t){var n=t.min,e=t.max,r=t.minTickInterval,i=t.tickInterval,a=t.tickCount;if(i)a=Math.ceil((e-n)/i);else{i=lK(n,e,a)[1];var o=(e-n)/i,s=o/a;s>1&&(i=i*Math.ceil(s)),r&&i<r&&(i=r)}i=Math.max(Math.floor((e-n)/(Math.pow(2,12)-1)),i);for(var l=[],c=n;c<e+i;c+=i)l.push(c);return l}function BK(t){var n=T5(E({showLast:!0},t));return n}function bg(t){return new Date(t).getFullYear()}function NK(t){return new Date(t,0,1).getTime()}function Ib(t){return new Date(t).getMonth()}function $K(t,n){var e=bg(t),r=bg(n),i=Ib(t),a=Ib(n);return(r-e)*12+(a-i)%12}function jK(t,n){return new Date(t,n,1).getTime()}function zK(t,n){return Math.ceil((n-t)/Ra)}function GK(t,n){return Math.ceil((n-t)/Zs)}function YK(t,n){return Math.ceil((n-t)/(60*1e3))}function WK(t){var n=t.min,e=t.max,r=t.minTickInterval,i=t.tickCount,a=t.tickInterval,o=[];a||(a=(e-n)/i,r&&a<r&&(a=r)),a=Math.max(Math.floor((e-n)/(Math.pow(2,12)-1)),a);var s=bg(n);if(a>oC)for(var l=bg(e),c=Math.ceil(a/oC),u=s;u<=l+c;u=u+c)o.push(NK(u));else if(a>zf)for(var f=Math.ceil(a/zf),h=Ib(n),d=$K(n,e),u=0;u<=d+f;u=u+f)o.push(jK(s,u+h));else if(a>Ra)for(var p=new Date(n),v=p.getFullYear(),g=p.getMonth(),y=p.getDate(),m=Math.ceil(a/Ra),x=zK(n,e),u=0;u<x+m;u=u+m)o.push(new Date(v,g,y+u).getTime());else if(a>Zs)for(var p=new Date(n),v=p.getFullYear(),g=p.getMonth(),m=p.getDate(),b=p.getHours(),w=Math.ceil(a/Zs),S=GK(n,e),u=0;u<=S+w;u=u+w)o.push(new Date(v,g,m,b+u).getTime());else if(a>qs)for(var O=YK(n,e),M=Math.ceil(a/qs),u=0;u<=O+M;u=u+M)o.push(n+u*qs);else{var A=a;A<Ci&&(A=Ci);for(var T=Math.floor(n/Ci)*Ci,C=Math.ceil((e-n)/Ci),P=Math.ceil(A/Ci),u=0;u<C+P;u=u+P)o.push(T+u*Ci)}return o.length>=512&&console.warn("Notice: current ticks length("+o.length+') >= 512, may cause performance issues, even out of memory. Because of the configure "tickInterval"(in milliseconds, current is '+a+") is too small, increase the value to solve the problem!"),o}xa("cat",T5);xa("time-cat",BK);xa("wilkinson-extended",kK);xa("r-pretty",DK);xa("time",RK);xa("time-pretty",WK);xa("log",_K);xa("pow",LK);xa("quantile",FK);xa("d3-linear",mK);ba("cat",y0);ba("category",y0);ba("identity",pK);ba("linear",x0);ba("log",uK);ba("pow",fK);ba("time",hK);ba("timeCat",cK);ba("quantize",A5);ba("quantile",dK);var P5={},k5=function(t){return P5[t.toLowerCase()]},md=function(t,n){if(k5(t))throw new Error("Attribute type '".concat(t,"' existed."));P5[t.toLowerCase()]=n};md("Color",UZ);md("Opacity",qZ);md("Position",ZZ);md("Shape",KZ);md("Size",QZ);var kS=function(){function t(n){this.type="coordinate",this.isRect=!1,this.isHelix=!1,this.isPolar=!1,this.isReflectX=!1,this.isReflectY=!1;var e=n.start,r=n.end,i=n.matrix,a=i===void 0?[1,0,0,0,1,0,0,0,1]:i,o=n.isTransposed,s=o===void 0?!1:o;this.start=e,this.end=r,this.matrix=a,this.originalMatrix=X([],a),this.isTransposed=s}return t.prototype.initial=function(){this.center={x:(this.start.x+this.end.x)/2,y:(this.start.y+this.end.y)/2},this.width=Math.abs(this.end.x-this.start.x),this.height=Math.abs(this.end.y-this.start.y)},t.prototype.update=function(n){Jt(this,n),this.initial()},t.prototype.convertDim=function(n,e){var r,i=this[e],a=i.start,o=i.end;return this.isReflect(e)&&(r=[o,a],a=r[0],o=r[1]),a+n*(o-a)},t.prototype.invertDim=function(n,e){var r,i=this[e],a=i.start,o=i.end;return this.isReflect(e)&&(r=[o,a],a=r[0],o=r[1]),(n-a)/(o-a)},t.prototype.applyMatrix=function(n,e,r){r===void 0&&(r=0);var i=this.matrix,a=[n,e,r];return ol(a,a,i),a},t.prototype.invertMatrix=function(n,e,r){r===void 0&&(r=0);var i=this.matrix,a=dR([0,0,0,0,0,0,0,0,0],i),o=[n,e,r];return a&&ol(o,o,a),o},t.prototype.convert=function(n){var e=this.convertPoint(n),r=e.x,i=e.y,a=this.applyMatrix(r,i,1);return{x:a[0],y:a[1]}},t.prototype.invert=function(n){var e=this.invertMatrix(n.x,n.y,1);return this.invertPoint({x:e[0],y:e[1]})},t.prototype.rotate=function(n){var e=this.matrix,r=this.center;return ec(e,e,[-r.x,-r.y]),dS(e,e,n),ec(e,e,[r.x,r.y]),this},t.prototype.reflect=function(n){return n==="x"?this.isReflectX=!this.isReflectX:this.isReflectY=!this.isReflectY,this},t.prototype.scale=function(n,e){var r=this.matrix,i=this.center;return ec(r,r,[-i.x,-i.y]),IR(r,r,[n,e]),ec(r,r,[i.x,i.y]),this},t.prototype.translate=function(n,e){var r=this.matrix;return ec(r,r,[n,e]),this},t.prototype.transpose=function(){return this.isTransposed=!this.isTransposed,this},t.prototype.getCenter=function(){return this.center},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.getRadius=function(){return this.radius},t.prototype.isReflect=function(n){return n==="x"?this.isReflectX:this.isReflectY},t.prototype.resetMatrix=function(n){this.matrix=n||X([],this.originalMatrix)},t}(),_5=function(t){G(n,t);function n(e){var r=t.call(this,e)||this;return r.isRect=!0,r.type="cartesian",r.initial(),r}return n.prototype.initial=function(){t.prototype.initial.call(this);var e=this.start,r=this.end;this.x={start:e.x,end:r.x},this.y={start:e.y,end:r.y}},n.prototype.convertPoint=function(e){var r,i=e.x,a=e.y;return this.isTransposed&&(r=[a,i],i=r[0],a=r[1]),{x:this.convertDim(i,"x"),y:this.convertDim(a,"y")}},n.prototype.invertPoint=function(e){var r,i=this.invertDim(e.x,"x"),a=this.invertDim(e.y,"y");return this.isTransposed&&(r=[a,i],i=r[0],a=r[1]),{x:i,y:a}},n}(kS),VK=function(t){G(n,t);function n(e){var r=t.call(this,e)||this;r.isHelix=!0,r.type="helix";var i=e.startAngle,a=i===void 0?1.25*Math.PI:i,o=e.endAngle,s=o===void 0?7.25*Math.PI:o,l=e.innerRadius,c=l===void 0?0:l,u=e.radius;return r.startAngle=a,r.endAngle=s,r.innerRadius=c,r.radius=u,r.initial(),r}return n.prototype.initial=function(){t.prototype.initial.call(this);var e=(this.endAngle-this.startAngle)/(2*Math.PI)+1,r=Math.min(this.width,this.height)/2;this.radius&&this.radius>=0&&this.radius<=1&&(r=r*this.radius),this.d=Math.floor(r*(1-this.innerRadius)/e),this.a=this.d/(Math.PI*2),this.x={start:this.startAngle,end:this.endAngle},this.y={start:this.innerRadius*r,end:this.innerRadius*r+this.d*.99}},n.prototype.convertPoint=function(e){var r,i=e.x,a=e.y;this.isTransposed&&(r=[a,i],i=r[0],a=r[1]);var o=this.convertDim(i,"x"),s=this.a*o,l=this.convertDim(a,"y");return{x:this.center.x+Math.cos(o)*(s+l),y:this.center.y+Math.sin(o)*(s+l)}},n.prototype.invertPoint=function(e){var r,i=this.d+this.y.start,a=kR([0,0],[e.x,e.y],[this.center.x,this.center.y]),o=pS(a,[1,0],!0),s=o*this.a;fc(a)<s&&(s=fc(a));var l=Math.floor((fc(a)-s)/i);o=2*l*Math.PI+o;var c=this.a*o,u=fc(a)-c;u=Cn(u,0)?0:u;var f=this.invertDim(o,"x"),h=this.invertDim(u,"y");return f=Cn(f,0)?0:f,h=Cn(h,0)?0:h,this.isTransposed&&(r=[h,f],f=r[0],h=r[1]),{x:f,y:h}},n}(kS),HK=function(t){G(n,t);function n(e){var r=t.call(this,e)||this;r.isPolar=!0,r.type="polar";var i=e.startAngle,a=i===void 0?-Math.PI/2:i,o=e.endAngle,s=o===void 0?Math.PI*3/2:o,l=e.innerRadius,c=l===void 0?0:l,u=e.radius;return r.startAngle=a,r.endAngle=s,r.innerRadius=c,r.radius=u,r.initial(),r}return n.prototype.initial=function(){for(t.prototype.initial.call(this);this.endAngle<this.startAngle;)this.endAngle+=Math.PI*2;var e=this.getOneBox(),r=e.maxX-e.minX,i=e.maxY-e.minY,a=Math.abs(e.minX)/r,o=Math.abs(e.minY)/i,s;this.height/i>this.width/r?(s=this.width/r,this.circleCenter={x:this.center.x-(.5-a)*this.width,y:this.center.y-(.5-o)*s*i}):(s=this.height/i,this.circleCenter={x:this.center.x-(.5-a)*s*r,y:this.center.y-(.5-o)*this.height}),this.polarRadius=this.radius,this.radius?this.radius>0&&this.radius<=1?this.polarRadius=s*this.radius:(this.radius<=0||this.radius>s)&&(this.polarRadius=s):this.polarRadius=s,this.x={start:this.startAngle,end:this.endAngle},this.y={start:this.innerRadius*this.polarRadius,end:this.polarRadius}},n.prototype.getRadius=function(){return this.polarRadius},n.prototype.convertPoint=function(e){var r,i=this.getCenter(),a=e.x,o=e.y;return this.isTransposed&&(r=[o,a],a=r[0],o=r[1]),a=this.convertDim(a,"x"),o=this.convertDim(o,"y"),{x:i.x+Math.cos(a)*o,y:i.y+Math.sin(a)*o}},n.prototype.invertPoint=function(e){var r,i=this.getCenter(),a=[e.x-i.x,e.y-i.y],o=this,s=o.startAngle,l=o.endAngle;this.isReflect("x")&&(r=[l,s],s=r[0],l=r[1]);var c=[1,0,0,0,1,0,0,0,1];dS(c,c,s);var u=[1,0,0];ol(u,u,c);var f=[u[0],u[1]],h=pS(f,a,l<s);Cn(h,Math.PI*2)&&(h=0);var d=fc(a),p=h/(l-s);p=l-s>0?p:-p;var v=this.invertDim(d,"y"),g={x:0,y:0};return g.x=this.isTransposed?v:p,g.y=this.isTransposed?p:v,g},n.prototype.getCenter=function(){return this.circleCenter},n.prototype.getOneBox=function(){var e=this.startAngle,r=this.endAngle;if(Math.abs(r-e)>=Math.PI*2)return{minX:-1,maxX:1,minY:-1,maxY:1};for(var i=[0,Math.cos(e),Math.cos(r)],a=[0,Math.sin(e),Math.sin(r)],o=Math.min(e,r);o<Math.max(e,r);o+=Math.PI/18)i.push(Math.cos(o)),a.push(Math.sin(o));return{minX:Math.min.apply(Math,i),maxX:Math.max.apply(Math,i),minY:Math.min.apply(Math,a),maxY:Math.max.apply(Math,a)}},n}(kS),L5={},XK=function(t){return L5[t.toLowerCase()]},b0=function(t,n){L5[t.toLowerCase()]=n};b0("rect",_5);b0("cartesian",_5);b0("polar",HK);b0("helix",VK);function I5(t,n,e){var r=new pd(n,e);r.target=t,r.propagationPath.push(t),t.emitDelegation(n,r);for(var i=t.getParent();i;)i.emitDelegation(n,r),r.propagationPath.push(i),i=i.getParent()}var F5=[1,0,0,0,1,0,0,0,1];function cl(t,n,e){if(e===void 0&&(e=F5),!n)return null;var r=sn(e,[["t",-t.x,-t.y],["r",n],["t",t.x,t.y]]);return r}function _S(t,n){return!t.x&&!t.y?null:sn(n||F5,[["t",t.x,t.y]])}function UK(t){var n=[1,0,0],e=[0,0,0];return ol(e,n,t),Math.atan2(e[1],e[0])}function yp(t,n){var e=[0,0];return LU(e,n,t),e}function qK(t,n){var e=yp(t,[n.minX,n.minY]),r=yp(t,[n.maxX,n.minY]),i=yp(t,[n.minX,n.maxY]),a=yp(t,[n.maxX,n.maxY]),o=Math.min(e[0],r[0],i[0],a[0]),s=Math.max(e[0],r[0],i[0],a[0]),l=Math.min(e[1],r[1],i[1],a[1]),c=Math.max(e[1],r[1],i[1],a[1]);return{x:o,y:l,minX:o,minY:l,maxX:s,maxY:c,width:s-o,height:c-l}}function D5(t,n,e,r){if(n){var i=cl({x:e,y:r},n,t.getMatrix());t.setMatrix(i)}}function LS(t,n,e){var r=_S({x:n,y:e});t.attr("matrix",r)}function wg(t){var n=0,e=0,r=0,i=0;return bt(t)?n=e=r=i=t:et(t)&&(n=t[0],r=J(t[1])?t[0]:t[1],i=J(t[2])?t[0]:t[2],e=J(t[3])?r:t[3]),[n,r,i,e]}function IS(t){for(var n=t.childNodes,e=n.length,r=e-1;r>=0;r--)t.removeChild(n[r])}function ZK(t,n){return!!t.className.match(new RegExp("(\\s|^)"+n+"(\\s|$)"))}function yh(t){var n=t.start,e=t.end,r=Math.min(n.x,e.x),i=Math.min(n.y,e.y),a=Math.max(n.x,e.x),o=Math.max(n.y,e.y);return{x:r,y:i,minX:r,minY:i,maxX:a,maxY:o,width:a-r,height:o-i}}function KK(t){var n=t.map(function(s){return s.x}),e=t.map(function(s){return s.y}),r=Math.min.apply(Math,n),i=Math.min.apply(Math,e),a=Math.max.apply(Math,n),o=Math.max.apply(Math,e);return{x:r,y:i,minX:r,minY:i,maxX:a,maxY:o,width:a-r,height:o-i}}function w0(t,n,e,r){var i=t+e,a=n+r;return{x:t,y:n,width:e,height:r,minX:t,minY:n,maxX:isNaN(i)?0:i,maxY:isNaN(a)?0:a}}function Ks(t,n,e){return(1-e)*t+n*e}function Oc(t,n,e){return{x:t.x+Math.cos(e)*n,y:t.y+Math.sin(e)*n}}function QK(t,n){var e=n.x-t.x,r=n.y-t.y;return Math.sqrt(e*e+r*r)}var Sg=function(t,n,e){return e===void 0&&(e=Math.pow(Number.EPSILON,.5)),[t,n].includes(1/0)?Math.abs(t)===Math.abs(n):Math.abs(t-n)<e};function JK(t,n){var e=Math.max(t.minX,n.minX),r=Math.max(t.minY,n.minY),i=Math.min(t.maxX,n.maxX),a=Math.min(t.maxY,n.maxY);return w0(e,r,i-e,a-r)}function R5(t){var n=t.getClip(),e=n&&n.getBBox(),r;if(!t.isGroup())r=t.getBBox();else{var i=1/0,a=-1/0,o=1/0,s=-1/0,l=t.getChildren();l.length>0?$(l,function(c){if(c.get("visible")){if(c.isGroup()&&c.get("children").length===0)return!0;var u=R5(c),f=c.applyToMatrix([u.minX,u.minY,1]),h=c.applyToMatrix([u.minX,u.maxY,1]),d=c.applyToMatrix([u.maxX,u.minY,1]),p=c.applyToMatrix([u.maxX,u.maxY,1]),v=Math.min(f[0],h[0],d[0],p[0]),g=Math.max(f[0],h[0],d[0],p[0]),y=Math.min(f[1],h[1],d[1],p[1]),m=Math.max(f[1],h[1],d[1],p[1]);v<i&&(i=v),g>a&&(a=g),y<o&&(o=y),m>s&&(s=m)}}):(i=0,a=0,o=0,s=0),r=w0(i,o,a-i,s-o)}return e?JK(r,e):r}function tQ(t,n){if(!(!t.getClip()&&!n.getClip())){var e=n.getClip();if(!e){t.setClip(null);return}var r={type:e.get("type"),attrs:e.attr()};t.setClip(r)}}function yr(t){return t+"px"}function B5(t,n,e,r){var i=QK(t,n),a=r/i,o=0;return e==="start"?o=0-a:e==="end"&&(o=1+a),{x:Ks(t.x,n.x,o),y:Ks(t.y,n.y,o)}}var eQ={none:[],point:["x","y"],region:["start","end"],points:["points"],circle:["center","radius","startAngle","endAngle"]},N5=function(t){G(n,t);function n(e){var r=t.call(this,e)||this;return r.initCfg(),r}return n.prototype.getDefaultCfg=function(){return{id:"",name:"",type:"",locationType:"none",offsetX:0,offsetY:0,animate:!1,capture:!0,updateAutoRender:!1,animateOption:{appear:null,update:{duration:400,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut"},leave:{duration:350,easing:"easeQuadIn"}},events:null,defaultCfg:{},visible:!0}},n.prototype.clear=function(){},n.prototype.update=function(e){var r=this,i=this.get("defaultCfg")||{};$(e,function(a,o){var s=r.get(o),l=a;s!==a&&(Qt(a)&&i[o]&&(l=ot({},i[o],a)),r.set(o,l))}),this.updateInner(e),this.afterUpdate(e)},n.prototype.updateInner=function(e){},n.prototype.afterUpdate=function(e){Vo(e,"visible")&&(e.visible?this.show():this.hide()),Vo(e,"capture")&&this.setCapture(e.capture)},n.prototype.getLayoutBBox=function(){return this.getBBox()},n.prototype.getLocationType=function(){return this.get("locationType")},n.prototype.getOffset=function(){return{offsetX:this.get("offsetX"),offsetY:this.get("offsetY")}},n.prototype.setOffset=function(e,r){this.update({offsetX:e,offsetY:r})},n.prototype.setLocation=function(e){var r=E({},e);this.update(r)},n.prototype.getLocation=function(){var e=this,r={},i=this.get("locationType"),a=eQ[i];return $(a,function(o){r[o]=e.get(o)}),r},n.prototype.isList=function(){return!1},n.prototype.isSlider=function(){return!1},n.prototype.init=function(){},n.prototype.initCfg=function(){var e=this,r=this.get("defaultCfg");$(r,function(i,a){var o=e.get(a);if(Qt(o)){var s=ot({},i,o);e.set(a,s)}})},n}(t0),Ms="update_status",nQ=["visible","tip","delegateObject"],rQ=["container","group","shapesMap","isRegister","isUpdating","destroyed"],jn=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return E(E({},e),{container:null,shapesMap:{},group:null,capture:!0,isRegister:!1,isUpdating:!1,isInit:!0})},n.prototype.remove=function(){this.clear();var e=this.get("group");e.remove()},n.prototype.clear=function(){var e=this.get("group");e.clear(),this.set("shapesMap",{}),this.clearOffScreenCache(),this.set("isInit",!0)},n.prototype.getChildComponentById=function(e){var r=this.getElementById(e),i=r&&r.get("component");return i},n.prototype.getElementById=function(e){return this.get("shapesMap")[e]},n.prototype.getElementByLocalId=function(e){var r=this.getElementId(e);return this.getElementById(r)},n.prototype.getElementsByName=function(e){var r=[];return $(this.get("shapesMap"),function(i){i.get("name")===e&&r.push(i)}),r},n.prototype.getContainer=function(){return this.get("container")},n.prototype.updateInner=function(e){this.offScreenRender(),this.get("updateAutoRender")&&this.render()},n.prototype.render=function(){var e=this.get("offScreenGroup");e||(e=this.offScreenRender());var r=this.get("group");this.updateElements(e,r),this.deleteElements(),this.applyOffset(),this.get("eventInitted")||(this.initEvent(),this.set("eventInitted",!0)),this.set("isInit",!1)},n.prototype.show=function(){var e=this.get("group");e.show(),this.set("visible",!0)},n.prototype.hide=function(){var e=this.get("group");e.hide(),this.set("visible",!1)},n.prototype.setCapture=function(e){var r=this.get("group");r.set("capture",e),this.set("capture",e)},n.prototype.destroy=function(){this.removeEvent(),this.remove(),t.prototype.destroy.call(this)},n.prototype.getBBox=function(){return this.get("group").getCanvasBBox()},n.prototype.getLayoutBBox=function(){var e=this.get("group"),r=this.getInnerLayoutBBox(),i=e.getTotalMatrix();return i&&(r=qK(i,r)),r},n.prototype.on=function(e,r,i){var a=this.get("group");return a.on(e,r,i),this},n.prototype.off=function(e,r){var i=this.get("group");return i&&i.off(e,r),this},n.prototype.emit=function(e,r){var i=this.get("group");i.emit(e,r)},n.prototype.init=function(){t.prototype.init.call(this),this.get("group")||this.initGroup(),this.offScreenRender()},n.prototype.getInnerLayoutBBox=function(){return this.get("offScreenBBox")||this.get("group").getBBox()},n.prototype.delegateEmit=function(e,r){var i=this.get("group");r.target=i,i.emit(e,r),I5(i,e,r)},n.prototype.createOffScreenGroup=function(){var e=this.get("group"),r=e.getGroupBase(),i=new r({delegateObject:this.getDelegateObject()});return i},n.prototype.applyOffset=function(){var e=this.get("offsetX"),r=this.get("offsetY");this.moveElementTo(this.get("group"),{x:e,y:r})},n.prototype.initGroup=function(){var e=this.get("container");this.set("group",e.addGroup({id:this.get("id"),name:this.get("name"),capture:this.get("capture"),visible:this.get("visible"),isComponent:!0,component:this,delegateObject:this.getDelegateObject()}))},n.prototype.offScreenRender=function(){this.clearOffScreenCache();var e=this.createOffScreenGroup();return this.renderInner(e),this.set("offScreenGroup",e),this.set("offScreenBBox",R5(e)),e},n.prototype.addGroup=function(e,r){this.appendDelegateObject(e,r);var i=e.addGroup(r);return this.get("isRegister")&&this.registerElement(i),i},n.prototype.addShape=function(e,r){this.appendDelegateObject(e,r);var i=e.addShape(r);return this.get("isRegister")&&this.registerElement(i),i},n.prototype.addComponent=function(e,r){var i=r.id,a=r.component,o=vt(r,["id","component"]),s=new a(E(E({},o),{id:i,container:e,updateAutoRender:this.get("updateAutoRender")}));return s.init(),s.render(),this.get("isRegister")&&this.registerElement(s.get("group")),s},n.prototype.initEvent=function(){},n.prototype.removeEvent=function(){var e=this.get("group");e.off()},n.prototype.getElementId=function(e){var r=this.get("id"),i=this.get("name");return r+"-"+i+"-"+e},n.prototype.registerElement=function(e){var r=e.get("id");this.get("shapesMap")[r]=e},n.prototype.unregisterElement=function(e){var r=e.get("id");delete this.get("shapesMap")[r]},n.prototype.moveElementTo=function(e,r){var i=_S(r);e.attr("matrix",i)},n.prototype.addAnimation=function(e,r,i){var a=r.attr("opacity");J(a)&&(a=1),r.attr("opacity",0),r.animate({opacity:a},i)},n.prototype.removeAnimation=function(e,r,i){r.animate({opacity:0},i)},n.prototype.updateAnimation=function(e,r,i,a){r.animate(i,a)},n.prototype.updateElements=function(e,r){var i=this,a=this.get("animate"),o=this.get("animateOption"),s=e.getChildren().slice(0),l;$(s,function(c){var u=c.get("id"),f=i.getElementById(u),h=c.get("name");if(f)if(c.get("isComponent")){var d=c.get("component"),p=f.get("component"),v=iS(d.cfg,$H(Su(d.cfg),rQ));p.update(v),f.set(Ms,"update")}else{var g=i.getReplaceAttrs(f,c);a&&o.update?i.updateAnimation(h,f,g,o.update):f.attr(g),c.isGroup()&&i.updateElements(c,f),$(nQ,function(b){f.set(b,c.get(b))}),tQ(f,c),l=f,f.set(Ms,"update")}else{r.add(c);var y=r.getChildren();if(y.splice(y.length-1,1),l){var m=y.indexOf(l);y.splice(m+1,0,c)}else y.unshift(c);if(i.registerElement(c),c.set(Ms,"add"),c.get("isComponent")){var d=c.get("component");d.set("container",r)}else c.isGroup()&&i.registerNewGroup(c);if(l=c,a){var x=i.get("isInit")?o.appear:o.enter;x&&i.addAnimation(h,c,x)}}})},n.prototype.clearUpdateStatus=function(e){var r=e.getChildren();$(r,function(i){i.set(Ms,null)})},n.prototype.clearOffScreenCache=function(){var e=this.get("offScreenGroup");e&&e.destroy(),this.set("offScreenGroup",null),this.set("offScreenBBox",null)},n.prototype.getDelegateObject=function(){var e,r=this.get("name"),i=(e={},e[r]=this,e.component=this,e);return i},n.prototype.appendDelegateObject=function(e,r){var i=e.get("delegateObject");r.delegateObject||(r.delegateObject={}),Jt(r.delegateObject,i)},n.prototype.getReplaceAttrs=function(e,r){var i=e.attr(),a=r.attr();return $(i,function(o,s){a[s]===void 0&&(a[s]=void 0)}),a},n.prototype.registerNewGroup=function(e){var r=this,i=e.getChildren();$(i,function(a){r.registerElement(a),a.set(Ms,"add"),a.isGroup()&&r.registerNewGroup(a)})},n.prototype.deleteElements=function(){var e=this,r=this.get("shapesMap"),i=[];$(r,function(s,l){!s.get(Ms)||s.destroyed?i.push([l,s]):s.set(Ms,null)});var a=this.get("animate"),o=this.get("animateOption");$(i,function(s){var l=s[0],c=s[1];if(!c.destroyed){var u=c.get("name");if(a&&o.leave){var f=Jt({callback:function(){e.removeElement(c)}},o.leave);e.removeAnimation(u,c,f)}else e.removeElement(c)}delete r[l]})},n.prototype.removeElement=function(e){if(e.get("isGroup")){var r=e.get("component");r&&r.destroy()}e.remove()},n}(N5),S1="…";function iQ(t){for(var n=0,e=0;e<t.length;e++)n+=Fs(t,e);return n}function Fs(t,n){return t.charCodeAt(n)>0&&t.charCodeAt(n)<128?1:2}function aQ(t,n,e){e===void 0&&(e="tail");var r=t.length,i="";if(e==="tail"){for(var a=0,o=0;a<n;){var s=Fs(t,o);if(a+s<=n)i+=t[o],a+=Fs(t,o),o++;else break}i+=S1}else if(e==="head"){for(var a=0,o=r-1;a<n;){var s=Fs(t,o);if(a+s<=n)i+=t[o],a+=Fs(t,o),o--;else break}i=S1+i}else{for(var l="",c="",a=0,u=0,f=r-1;a<n;){var h=Fs(t,u),d=!1;h+a<=n&&(l+=t[u],u++,a+=h,d=!0);var p=Fs(t,f);if(p+a<=n&&(c=t[f]+c,a+=p,f--,d=!0),!d)break}i=l+S1+c}return i}var oQ="…",sQ=2,lQ=400;function cQ(t){for(var n=t.map(function(l){var c=l.attr("text");return J(c)?"":""+c}),e=0,r=0,i=0;i<n.length;i+=1){for(var a=0,o=0;o<=n[i].length;o+=1){var s=n[i].charCodeAt(o);s>=19968&&s<=40869?a+=2:a+=1}a>e&&(e=a,r=i)}return t[r].getBBox().width}function Fb(t){if(t.length>lQ)return cQ(t);var n=0;return $(t,function(e){var r=e.getBBox(),i=r.width;n<i&&(n=i)}),n}function uQ(t,n){var e=n.getCanvasBBox();return t?e.width:e.height}function Gf(t,n,e,r){var i;r===void 0&&(r="tail");var a=(i=n.attr("text"))!==null&&i!==void 0?i:"";if(r==="tail"){var o=iS(n.attr(),["fontSize","fontFamily","fontWeight","fontStyle","fontVariant"]),s=cX(a,e,o,"…");return a!==s?(n.attr("text",s),n.set("tip",a),!0):(n.set("tip",null),!1)}var l=uQ(t,n),c=iQ(a),u=!1;if(e<l){var f=Math.floor(e/l*c)-sQ,h=void 0;f>=0?h=aQ(a,f,r):h=oQ,h&&(n.attr("text",h),u=!0)}return u?n.set("tip",a):n.set("tip",null),u}function S0(t,n){var e=n.x,r=n.y,i=n.content,a=n.style,o=n.id,s=n.name,l=n.rotate,c=n.maxLength,u=n.autoEllipsis,f=n.isVertical,h=n.ellipsisPosition,d=n.background,p=t.addGroup({id:o+"-group",name:s+"-group",attrs:{x:e,y:r}}),v=p.addShape({type:"text",id:o,name:s,attrs:E({x:0,y:0,text:i},a)}),g=wg(z(d,"padding",0));if(c&&u){var y=c-(g[1]+g[3]);Gf(!f,v,y,h)}if(d){var m=z(d,"style",{}),x=v.getCanvasBBox(),b=x.minX,w=x.minY,S=x.width,O=x.height,M=p.addShape("rect",{id:o+"-bg",name:o+"-bg",attrs:E({x:b-g[3],y:w-g[0],width:S+g[1]+g[3],height:O+g[0]+g[2]},m)});M.toBack()}LS(p,e,r),D5(p,l,e,r)}const It={fontFamily:`
  BlinkMacSystemFont, "Segoe UI", Roboto,"Helvetica Neue",
  Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei",
  SimSun, "sans-serif"`,textColor:"#2C3542",activeTextColor:"#333333",uncheckedColor:"#D8D8D8",lineColor:"#416180",regionColor:"#CCD7EB",verticalAxisRotate:-Math.PI/4,horizontalAxisRotate:Math.PI/4,descriptionIconStroke:"#fff",descriptionIconFill:"rgba(58, 73, 101, .25)"};var fQ=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return E(E({},e),{name:"annotation",type:"line",locationType:"region",start:null,end:null,style:{},text:null,defaultCfg:{style:{fill:It.textColor,fontSize:12,textAlign:"center",textBaseline:"bottom",fontFamily:It.fontFamily},text:{position:"center",autoRotate:!0,content:null,offsetX:0,offsetY:0,style:{stroke:It.lineColor,lineWidth:1}}}})},n.prototype.renderInner=function(e){this.renderLine(e),this.get("text")&&this.renderLabel(e)},n.prototype.renderLine=function(e){var r=this.get("start"),i=this.get("end"),a=this.get("style");this.addShape(e,{type:"line",id:this.getElementId("line"),name:"annotation-line",attrs:E({x1:r.x,y1:r.y,x2:i.x,y2:i.y},a)})},n.prototype.getLabelPoint=function(e,r,i){var a;return i==="start"?a=0:i==="center"?a=.5:pt(i)&&i.indexOf("%")!==-1?a=parseInt(i,10)/100:bt(i)?a=i:a=1,(a>1||a<0)&&(a=1),{x:Ks(e.x,r.x,a),y:Ks(e.y,r.y,a)}},n.prototype.renderLabel=function(e){var r=this.get("text"),i=this.get("start"),a=this.get("end"),o=r.position,s=r.content,l=r.style,c=r.offsetX,u=r.offsetY,f=r.autoRotate,h=r.maxLength,d=r.autoEllipsis,p=r.ellipsisPosition,v=r.background,g=r.isVertical,y=g===void 0?!1:g,m=this.getLabelPoint(i,a,o),x=m.x+c,b=m.y+u,w={id:this.getElementId("line-text"),name:"annotation-line-text",x,y:b,content:s,style:l,maxLength:h,autoEllipsis:d,ellipsisPosition:p,background:v,isVertical:y};if(f){var S=[a.x-i.x,a.y-i.y];w.rotate=Math.atan2(S[1],S[0])}S0(e,w)},n}(jn),hQ=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return E(E({},e),{name:"annotation",type:"text",locationType:"point",x:0,y:0,content:"",rotate:null,style:{},background:null,maxLength:null,autoEllipsis:!0,isVertical:!1,ellipsisPosition:"tail",defaultCfg:{style:{fill:It.textColor,fontSize:12,textAlign:"center",textBaseline:"middle",fontFamily:It.fontFamily}}})},n.prototype.setLocation=function(e){this.set("x",e.x),this.set("y",e.y),this.resetLocation()},n.prototype.renderInner=function(e){var r=this.getLocation(),i=r.x,a=r.y,o=this.get("content"),s=this.get("style"),l=this.getElementId("text"),c=this.get("name")+"-text",u=this.get("maxLength"),f=this.get("autoEllipsis"),h=this.get("isVertical"),d=this.get("ellipsisPosition"),p=this.get("background"),v=this.get("rotate"),g={id:l,name:c,x:i,y:a,content:o,style:s,maxLength:u,autoEllipsis:f,isVertical:h,ellipsisPosition:d,background:p,rotate:v};S0(e,g)},n.prototype.resetLocation=function(){var e=this.getElementByLocalId("text-group");if(e){var r=this.getLocation(),i=r.x,a=r.y,o=this.get("rotate");LS(e,i,a),D5(e,o,i,a)}},n}(jn),dQ=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return E(E({},e),{name:"annotation",type:"arc",locationType:"circle",center:null,radius:100,startAngle:-Math.PI/2,endAngle:Math.PI*3/2,style:{stroke:"#999",lineWidth:1}})},n.prototype.renderInner=function(e){this.renderArc(e)},n.prototype.getArcPath=function(){var e=this.getLocation(),r=e.center,i=e.radius,a=e.startAngle,o=e.endAngle,s=Oc(r,i,a),l=Oc(r,i,o),c=o-a>Math.PI?1:0,u=[["M",s.x,s.y]];if(o-a===Math.PI*2){var f=Oc(r,i,a+Math.PI);u.push(["A",i,i,0,c,1,f.x,f.y]),u.push(["A",i,i,0,c,1,l.x,l.y])}else u.push(["A",i,i,0,c,1,l.x,l.y]);return u},n.prototype.renderArc=function(e){var r=this.getArcPath(),i=this.get("style");this.addShape(e,{type:"path",id:this.getElementId("arc"),name:"annotation-arc",attrs:E({path:r},i)})},n}(jn),pQ=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return E(E({},e),{name:"annotation",type:"region",locationType:"region",start:null,end:null,style:{},defaultCfg:{style:{lineWidth:0,fill:It.regionColor,opacity:.4}}})},n.prototype.renderInner=function(e){this.renderRegion(e)},n.prototype.renderRegion=function(e){var r=this.get("start"),i=this.get("end"),a=this.get("style"),o=yh({start:r,end:i});this.addShape(e,{type:"rect",id:this.getElementId("region"),name:"annotation-region",attrs:E({x:o.x,y:o.y,width:o.width,height:o.height},a)})},n}(jn),vQ=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return E(E({},e),{name:"annotation",type:"image",locationType:"region",start:null,end:null,src:null,style:{}})},n.prototype.renderInner=function(e){this.renderImage(e)},n.prototype.getImageAttrs=function(){var e=this.get("start"),r=this.get("end"),i=this.get("style"),a=yh({start:e,end:r}),o=this.get("src");return E({x:a.x,y:a.y,img:o,width:a.width,height:a.height},i)},n.prototype.renderImage=function(e){this.addShape(e,{type:"image",id:this.getElementId("image"),name:"annotation-image",attrs:this.getImageAttrs()})},n}(jn),gQ=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return E(E({},e),{name:"annotation",type:"dataMarker",locationType:"point",x:0,y:0,point:{},line:{},text:{},direction:"upward",autoAdjust:!0,coordinateBBox:null,defaultCfg:{point:{display:!0,style:{r:3,fill:"#FFFFFF",stroke:"#1890FF",lineWidth:2}},line:{display:!0,length:20,style:{stroke:It.lineColor,lineWidth:1}},text:{content:"",display:!0,style:{fill:It.textColor,opacity:.65,fontSize:12,textAlign:"start",fontFamily:It.fontFamily}}}})},n.prototype.renderInner=function(e){z(this.get("line"),"display")&&this.renderLine(e),z(this.get("text"),"display")&&this.renderText(e),z(this.get("point"),"display")&&this.renderPoint(e),this.get("autoAdjust")&&this.autoAdjust(e)},n.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x")+this.get("offsetX"),y:this.get("y")+this.get("offsetY")})},n.prototype.renderPoint=function(e){var r=this.getShapeAttrs().point;this.addShape(e,{type:"circle",id:this.getElementId("point"),name:"annotation-point",attrs:r})},n.prototype.renderLine=function(e){var r=this.getShapeAttrs().line;this.addShape(e,{type:"path",id:this.getElementId("line"),name:"annotation-line",attrs:r})},n.prototype.renderText=function(e){var r=this.getShapeAttrs().text,i=r.x,a=r.y,o=r.text,s=vt(r,["x","y","text"]),l=this.get("text"),c=l.background,u=l.maxLength,f=l.autoEllipsis,h=l.isVertival,d=l.ellipsisPosition,p={x:i,y:a,id:this.getElementId("text"),name:"annotation-text",content:o,style:s,background:c,maxLength:u,autoEllipsis:f,isVertival:h,ellipsisPosition:d};S0(e,p)},n.prototype.autoAdjust=function(e){var r=this.get("direction"),i=this.get("x"),a=this.get("y"),o=z(this.get("line"),"length",0),s=this.get("coordinateBBox"),l=e.getBBox(),c=l.minX,u=l.maxX,f=l.minY,h=l.maxY,d=e.findById(this.getElementId("text-group")),p=e.findById(this.getElementId("text")),v=e.findById(this.getElementId("line"));if(s&&d){var g=d.attr("x"),y=d.attr("y"),m=p.getCanvasBBox(),x=m.width,b=m.height,w=0,S=0;if(i+c<=s.minX)if(r==="leftward")w=1;else{var O=s.minX-(i+c);g=d.attr("x")+O}else if(i+u>=s.maxX)if(r==="rightward")w=-1;else{var O=i+u-s.maxX;g=d.attr("x")-O}if(w&&(v&&v.attr("path",[["M",0,0],["L",o*w,0]]),g=(o+2+x)*w),a+f<=s.minY)if(r==="upward")S=1;else{var O=s.minY-(a+f);y=d.attr("y")+O}else if(a+h>=s.maxY)if(r==="downward")S=-1;else{var O=a+h-s.maxY;y=d.attr("y")-O}S&&(v&&v.attr("path",[["M",0,0],["L",0,o*S]]),y=(o+2+b)*S),(g!==d.attr("x")||y!==d.attr("y"))&&LS(d,g,y)}},n.prototype.getShapeAttrs=function(){var e=z(this.get("line"),"display"),r=z(this.get("point"),"style",{}),i=z(this.get("line"),"style",{}),a=z(this.get("text"),"style",{}),o=this.get("direction"),s=e?z(this.get("line"),"length",0):0,l=0,c=0,u="top",f="start";switch(o){case"upward":c=-1,u="bottom";break;case"downward":c=1,u="top";break;case"leftward":l=-1,f="end";break;case"rightward":l=1,f="start";break}return{point:E({x:0,y:0},r),line:E({path:[["M",0,0],["L",s*l,s*c]]},i),text:E({x:(s+2)*l,y:(s+2)*c,text:z(this.get("text"),"content",""),textBaseline:u,textAlign:f},a)}},n}(jn),yQ=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return E(E({},e),{name:"annotation",type:"dataRegion",locationType:"points",points:[],lineLength:0,region:{},text:{},defaultCfg:{region:{style:{lineWidth:0,fill:It.regionColor,opacity:.4}},text:{content:"",style:{textAlign:"center",textBaseline:"bottom",fontSize:12,fill:It.textColor,fontFamily:It.fontFamily}}}})},n.prototype.renderInner=function(e){var r=z(this.get("region"),"style",{});z(this.get("text"),"style",{});var i=this.get("lineLength")||0,a=this.get("points");if(a.length){var o=KK(a),s=[];s.push(["M",a[0].x,o.minY-i]),a.forEach(function(c){s.push(["L",c.x,c.y])}),s.push(["L",a[a.length-1].x,a[a.length-1].y-i]),this.addShape(e,{type:"path",id:this.getElementId("region"),name:"annotation-region",attrs:E({path:s},r)});var l=E({id:this.getElementId("text"),name:"annotation-text",x:(o.minX+o.maxX)/2,y:o.minY-i},this.get("text"));S0(e,l)}},n}(jn),mQ=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return E(E({},e),{name:"annotation",type:"regionFilter",locationType:"region",start:null,end:null,color:null,shape:[]})},n.prototype.renderInner=function(e){var r=this,i=this.get("start"),a=this.get("end"),o=this.addGroup(e,{id:this.getElementId("region-filter"),capture:!1});$(this.get("shapes"),function(l,c){var u=l.get("type"),f=er(l.attr());r.adjustShapeAttrs(f),r.addShape(o,{id:r.getElementId("shape-"+u+"-"+c),capture:!1,type:u,attrs:f})});var s=yh({start:i,end:a});o.setClip({type:"rect",attrs:{x:s.minX,y:s.minY,width:s.width,height:s.height}})},n.prototype.adjustShapeAttrs=function(e){var r=this.get("color");e.fill&&(e.fill=e.fillStyle=r),e.stroke=e.strokeStyle=r},n}(jn),xQ=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return E(E({},e),{name:"annotation",type:"shape",draw:Co})},n.prototype.renderInner=function(e){var r=this.get("render");ut(r)&&r(e)},n}(jn),FS=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return E(E({},e),{container:null,containerTpl:"<div></div>",updateAutoRender:!0,containerClassName:"",parent:null})},n.prototype.getContainer=function(){return this.get("container")},n.prototype.show=function(){var e=this.get("container");e.style.display="",this.set("visible",!0)},n.prototype.hide=function(){var e=this.get("container");e.style.display="none",this.set("visible",!1)},n.prototype.setCapture=function(e){var r=this.getContainer(),i=e?"auto":"none";r.style.pointerEvents=i,this.set("capture",e)},n.prototype.getBBox=function(){var e=this.getContainer(),r=parseFloat(e.style.left)||0,i=parseFloat(e.style.top)||0;return w0(r,i,e.clientWidth,e.clientHeight)},n.prototype.clear=function(){var e=this.get("container");IS(e)},n.prototype.destroy=function(){this.removeEvent(),this.removeDom(),t.prototype.destroy.call(this)},n.prototype.init=function(){t.prototype.init.call(this),this.initContainer(),this.initDom(),this.resetStyles(),this.applyStyles(),this.initEvent(),this.initCapture(),this.initVisible()},n.prototype.initCapture=function(){this.setCapture(this.get("capture"))},n.prototype.initVisible=function(){this.get("visible")?this.show():this.hide()},n.prototype.initDom=function(){},n.prototype.initContainer=function(){var e=this.get("container");if(J(e)){e=this.createDom();var r=this.get("parent");pt(r)&&(r=document.getElementById(r),this.set("parent",r)),r.appendChild(e),this.get("containerId")&&e.setAttribute("id",this.get("containerId")),this.set("container",e)}else pt(e)&&(e=document.getElementById(e),this.set("container",e));this.get("parent")||this.set("parent",e.parentNode)},n.prototype.resetStyles=function(){var e=this.get("domStyles"),r=this.get("defaultStyles");e?e=ot({},r,e):e=r,this.set("domStyles",e)},n.prototype.applyStyles=function(){var e=this.get("domStyles");if(e){var r=this.getContainer();this.applyChildrenStyles(r,e);var i=this.get("containerClassName");if(i&&ZK(r,i)){var a=e[i];Wn(r,a)}}},n.prototype.applyChildrenStyles=function(e,r){$(r,function(i,a){var o=e.getElementsByClassName(a);$(o,function(s){Wn(s,i)})})},n.prototype.applyStyle=function(e,r){var i=this.get("domStyles");Wn(r,i[e])},n.prototype.createDom=function(){var e=this.get("containerTpl");return Do(e)},n.prototype.initEvent=function(){},n.prototype.removeDom=function(){var e=this.get("container");e&&e.parentNode&&e.parentNode.removeChild(e)},n.prototype.removeEvent=function(){},n.prototype.updateInner=function(e){Vo(e,"domStyles")&&(this.resetStyles(),this.applyStyles()),this.resetPosition()},n.prototype.resetPosition=function(){},n}(N5),bQ=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return E(E({},e),{name:"annotation",type:"html",locationType:"point",x:0,y:0,containerTpl:'<div class="g2-html-annotation" style="position:absolute"></div>',alignX:"left",alignY:"top",html:"",zIndex:7})},n.prototype.render=function(){var e=this.getContainer(),r=this.get("html");IS(e);var i=ut(r)?r(e):r;if(QD(i))e.appendChild(i);else if(pt(i)||bt(i)){var a=Do(""+i);a&&e.appendChild(a)}this.resetPosition()},n.prototype.resetPosition=function(){var e=this.getContainer(),r=this.getLocation(),i=r.x,a=r.y,o=this.get("alignX"),s=this.get("alignY"),l=this.get("offsetX"),c=this.get("offsetY"),u=gX(e),f=pX(e),h={x:i,y:a};o==="middle"?h.x-=Math.round(u/2):o==="right"&&(h.x-=Math.round(u)),s==="middle"?h.y-=Math.round(f/2):s==="bottom"&&(h.y-=Math.round(f)),l&&(h.x+=l),c&&(h.y+=c),Wn(e,{position:"absolute",left:h.x+"px",top:h.y+"px",zIndex:this.get("zIndex")})},n}(FS);const wQ=Object.freeze(Object.defineProperty({__proto__:null,Arc:dQ,DataMarker:gQ,DataRegion:yQ,Html:bQ,Image:vQ,Line:fQ,Region:pQ,RegionFilter:mQ,Shape:xQ,Text:hQ},Symbol.toStringTag,{value:"Module"}));function mf(t,n,e){var r=n+"Style",i=null;return $(e,function(a,o){t[o]&&a[r]&&(i||(i={}),Jt(i,a[r]))}),i}var $5=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return E(E({},e),{name:"axis",ticks:[],line:{},tickLine:{},subTickLine:null,title:null,label:{},verticalFactor:1,verticalLimitLength:null,overlapOrder:["autoRotate","autoEllipsis","autoHide"],tickStates:{},optimize:{},defaultCfg:{line:{style:{lineWidth:1,stroke:It.lineColor}},tickLine:{style:{lineWidth:1,stroke:It.lineColor},alignTick:!0,length:5,displayWithLabel:!0},subTickLine:{style:{lineWidth:1,stroke:It.lineColor},count:4,length:2},label:{autoRotate:!0,autoHide:!1,autoEllipsis:!1,style:{fontSize:12,fill:It.textColor,fontFamily:It.fontFamily,fontWeight:"normal"},offset:10,offsetX:0,offsetY:0},title:{autoRotate:!0,spacing:5,position:"center",style:{fontSize:12,fill:It.textColor,textBaseline:"middle",fontFamily:It.fontFamily,textAlign:"center"},iconStyle:{fill:It.descriptionIconFill,stroke:It.descriptionIconStroke},description:""},tickStates:{active:{labelStyle:{fontWeight:500},tickLineStyle:{lineWidth:2}},inactive:{labelStyle:{fill:It.uncheckedColor}}},optimize:{enable:!0,threshold:400}},theme:{}})},n.prototype.renderInner=function(e){this.get("line")&&this.drawLine(e),this.drawTicks(e),this.get("title")&&this.drawTitle(e)},n.prototype.isList=function(){return!0},n.prototype.getItems=function(){return this.get("ticks")},n.prototype.setItems=function(e){this.update({ticks:e})},n.prototype.updateItem=function(e,r){Jt(e,r),this.clear(),this.render()},n.prototype.clearItems=function(){var e=this.getElementByLocalId("label-group");e&&e.clear()},n.prototype.setItemState=function(e,r,i){e[r]=i,this.updateTickStates(e)},n.prototype.hasState=function(e,r){return!!e[r]},n.prototype.getItemStates=function(e){var r=this.get("tickStates"),i=[];return $(r,function(a,o){e[o]&&i.push(o)}),i},n.prototype.clearItemsState=function(e){var r=this,i=this.getItemsByState(e);$(i,function(a){r.setItemState(a,e,!1)})},n.prototype.getItemsByState=function(e){var r=this,i=this.getItems();return Ln(i,function(a){return r.hasState(a,e)})},n.prototype.getSidePoint=function(e,r){var i=this,a=i.getSideVector(r,e);return{x:e.x+a[0],y:e.y+a[1]}},n.prototype.getTextAnchor=function(e){var r;return Cn(e[0],0)?r="center":e[0]>0?r="start":e[0]<0&&(r="end"),r},n.prototype.getTextBaseline=function(e){var r;return Cn(e[1],0)?r="middle":e[1]>0?r="top":e[1]<0&&(r="bottom"),r},n.prototype.processOverlap=function(e){},n.prototype.drawLine=function(e){var r=this.getLinePath(),i=this.get("line");this.addShape(e,{type:"path",id:this.getElementId("line"),name:"axis-line",attrs:Jt({path:r},i.style)})},n.prototype.getTickLineItems=function(e){var r=this,i=[],a=this.get("tickLine"),o=a.alignTick,s=a.length,l=1,c=e.length;return c>=2&&(l=e[1].value-e[0].value),$(e,function(u){var f=u.point;o||(f=r.getTickPoint(u.value-l/2));var h=r.getSidePoint(f,s);i.push({startPoint:f,tickValue:u.value,endPoint:h,tickId:u.id,id:"tickline-"+u.id})}),i},n.prototype.getSubTickLineItems=function(e){var r=[],i=this.get("subTickLine"),a=i.count,o=e.length;if(o>=2)for(var s=0;s<o-1;s++)for(var l=e[s],c=e[s+1],u=0;u<a;u++){var f=(u+1)/(a+1),h=(1-f)*l.tickValue+f*c.tickValue,d=this.getTickPoint(h),p=this.getSidePoint(d,i.length);r.push({startPoint:d,endPoint:p,tickValue:h,id:"sub-"+l.id+"-"+u})}return r},n.prototype.getTickLineAttrs=function(e,r,i,a){var o=this.get(r).style,s={points:[e.startPoint,e.endPoint]},l=z(this.get("theme"),["tickLine","style"],{});o=ut(o)?Jt({},l,o(s,i,a)):o;var c=e.startPoint,u=e.endPoint;return E({x1:c.x,y1:c.y,x2:u.x,y2:u.y},o)},n.prototype.drawTick=function(e,r,i,a,o){this.addShape(r,{type:"line",id:this.getElementId(e.id),name:"axis-"+i,attrs:this.getTickLineAttrs(e,i,a,o)})},n.prototype.drawTickLines=function(e){var r=this,i=this.get("ticks"),a=this.get("subTickLine"),o=this.getTickLineItems(i),s=this.addGroup(e,{name:"axis-tickline-group",id:this.getElementId("tickline-group")}),l=this.get("tickLine");if($(o,function(u,f){if(l.displayWithLabel){var h=r.getElementId("label-"+u.tickId);e.findById(h)&&r.drawTick(u,s,"tickLine",f,o)}else r.drawTick(u,s,"tickLine",f,o)}),a){var c=this.getSubTickLineItems(o);$(c,function(u,f){r.drawTick(u,s,"subTickLine",f,c)})}},n.prototype.processTicks=function(){var e=this,r=this.get("ticks");$(r,function(i){i.point=e.getTickPoint(i.value),J(i.id)&&(i.id=i.name)})},n.prototype.drawTicks=function(e){var r=this;this.optimizeTicks(),this.processTicks(),this.get("label")&&this.drawLabels(e),this.get("tickLine")&&this.drawTickLines(e);var i=this.get("ticks");$(i,function(a){r.applyTickStates(a,e)})},n.prototype.optimizeTicks=function(){var e=this.get("optimize"),r=this.get("ticks");if(e&&e.enable&&e.threshold>0){var i=mn(r);if(i>e.threshold){var a=Math.ceil(i/e.threshold),o=r.filter(function(s,l){return l%a===0});this.set("ticks",o),this.set("originalTicks",r)}}},n.prototype.getLabelAttrs=function(e,r,i){var a=this.get("label"),o=a.offset,s=a.offsetX,l=a.offsetY,c=a.rotate,u=a.formatter,f=this.getSidePoint(e.point,o),h=this.getSideVector(o,f),d=u?u(e.name,e,r):e.name,p=a.style;p=ut(p)?z(this.get("theme"),["label","style"],{}):p;var v=Jt({x:f.x+s,y:f.y+l,text:d,textAlign:this.getTextAnchor(h),textBaseline:this.getTextBaseline(h)},p);return c&&(v.matrix=cl(f,c)),v},n.prototype.drawLabels=function(e){var r=this,i=this.get("ticks"),a=this.addGroup(e,{name:"axis-label-group",id:this.getElementId("label-group")});$(i,function(h,d){r.addShape(a,{type:"text",name:"axis-label",id:r.getElementId("label-"+h.id),attrs:r.getLabelAttrs(h,d,i),delegateObject:{tick:h,item:h,index:d}})}),this.processOverlap(a);var o=a.getChildren(),s=z(this.get("theme"),["label","style"],{}),l=this.get("label"),c=l.style,u=l.formatter;if(ut(c)){var f=o.map(function(h){return z(h.get("delegateObject"),"tick")});$(o,function(h,d){var p=h.get("delegateObject").tick,v=u?u(p.name,p,d):p.name,g=Jt({},s,c(v,d,f));h.attr(g)})}},n.prototype.getTitleAttrs=function(){var e=this.get("title"),r=e.style,i=e.position,a=e.offset,o=e.spacing,s=o===void 0?0:o,l=e.autoRotate,c=r.fontSize,u=.5;i==="start"?u=0:i==="end"&&(u=1);var f=this.getTickPoint(u),h=this.getSidePoint(f,a||s+c/2),d=Jt({x:h.x,y:h.y,text:e.text},r),p=e.rotate,v=p;if(J(p)&&l){var g=this.getAxisVector(f),y=[1,0];v=pS(g,y,!0)}if(v){var m=cl(h,v);d.matrix=m}return d},n.prototype.drawTitle=function(e){var r,i=this.getTitleAttrs(),a=this.addShape(e,{type:"text",id:this.getElementId("title"),name:"axis-title",attrs:i});!((r=this.get("title"))===null||r===void 0)&&r.description&&this.drawDescriptionIcon(e,a,i.matrix)},n.prototype.drawDescriptionIcon=function(e,r,i){var a=this.addGroup(e,{name:"axis-description",id:this.getElementById("description")}),o=r.getBBox(),s=o.maxX,l=o.maxY,c=o.height,u=this.get("title").iconStyle,f=4,h=c/2,d=h/6,p=s+f,v=l-c/2,g=[p+h,v-h],y=g[0],m=g[1],x=[y+h,m+h],b=x[0],w=x[1],S=[y,w+h],O=S[0],M=S[1],A=[p,m+h],T=A[0],C=A[1],P=[p+h,v-c/4],_=P[0],k=P[1],I=[_,k+d],L=I[0],F=I[1],B=[L,F+d],D=B[0],N=B[1],j=[D,N+h*3/4],Y=j[0],W=j[1];this.addShape(a,{type:"path",id:this.getElementId("title-description-icon"),name:"axis-title-description-icon",attrs:E({path:[["M",y,m],["A",h,h,0,0,1,b,w],["A",h,h,0,0,1,O,M],["A",h,h,0,0,1,T,C],["A",h,h,0,0,1,y,m],["M",_,k],["L",L,F],["M",D,N],["L",Y,W]],lineWidth:d,matrix:i},u)}),this.addShape(a,{type:"rect",id:this.getElementId("title-description-rect"),name:"axis-title-description-rect",attrs:{x:p,y:v-c/2,width:c,height:c,stroke:"#000",fill:"#000",opacity:0,matrix:i,cursor:"pointer"}})},n.prototype.applyTickStates=function(e,r){var i=this.getItemStates(e);if(i.length){var a=this.get("tickStates"),o=this.getElementId("label-"+e.id),s=r.findById(o);if(s){var l=mf(e,"label",a);l&&s.attr(l)}var c=this.getElementId("tickline-"+e.id),u=r.findById(c);if(u){var f=mf(e,"tickLine",a);f&&u.attr(f)}}},n.prototype.updateTickStates=function(e){var r=this.getItemStates(e),i=this.get("tickStates"),a=this.get("label"),o=this.getElementByLocalId("label-"+e.id),s=this.get("tickLine"),l=this.getElementByLocalId("tickline-"+e.id);if(r.length){if(o){var c=mf(e,"label",i);c&&o.attr(c)}if(l){var u=mf(e,"tickLine",i);u&&l.attr(u)}}else o&&o.attr(a.style),l&&l.attr(s.style)},n}(jn);function DS(t,n,e,r){var i=n.getChildren(),a=!1;return $(i,function(o){var s=Gf(t,o,e,r);a=a||s}),a}function SQ(){return j5}function OQ(t,n,e){return DS(t,n,e,"head")}function j5(t,n,e){return DS(t,n,e,"tail")}function MQ(t,n,e){return DS(t,n,e,"middle")}const AQ=Object.freeze(Object.defineProperty({__proto__:null,ellipsisHead:OQ,ellipsisMiddle:MQ,ellipsisTail:j5,getDefault:SQ},Symbol.toStringTag,{value:"Module"}));function EQ(t){var n=t.attr("matrix");return n&&n[0]!==1}function z5(t){var n=EQ(t)?UK(t.attr("matrix")):0;return n%360}function Db(t,n,e,r){var i=!1,a=z5(n),o=Math.abs(t?e.attr("y")-n.attr("y"):e.attr("x")-n.attr("x")),s=(t?e.attr("y")>n.attr("y"):e.attr("x")>n.attr("x"))?n.getBBox():e.getBBox();if(t){var l=Math.abs(Math.cos(a));Sg(l,0,Math.PI/180)?i=s.width+r>o:i=s.height/l+r>o}else{var l=Math.abs(Math.sin(a));Sg(l,0,Math.PI/180)?i=s.width+r>o:i=s.height/l+r>o}return i}function mh(t,n,e,r){var i=(r==null?void 0:r.minGap)||0,a=n.getChildren().slice().filter(function(d){return d.get("visible")});if(!a.length)return!1;var o=!1;e&&a.reverse();for(var s=a.length,l=a[0],c=l,u=1;u<s;u++){var f=a[u];f.getBBox();var h=Db(t,c,f,i);h?(f.hide(),o=!0):c=f}return o}function G5(t,n,e){var r=(e==null?void 0:e.minGap)||0,i=n.getChildren().slice();if(i.length<2)return!1;var a=!1,o=i[0],s=o.getBBox(),l=i[1],c=i.length,u=z5(o),f=Math.abs(t?l.attr("y")-o.attr("y"):l.attr("x")-o.attr("x")),h=0;if(t){var d=Math.abs(Math.cos(u));if(Sg(d,0,Math.PI/180)){var p=Fb(i);h=(p+r)/f}else h=(s.height/d+r)/f}else{var d=Math.abs(Math.sin(u));if(Sg(d,0,Math.PI/180)){var p=Fb(i);h=(p+r)/f}else h=(s.height/d+r)/f}if(h>1){h=Math.ceil(h);for(var v=0;v<c;v++)v%h!==0&&(i[v].hide(),a=!0)}return a}function TQ(){return Y5}function CQ(t,n,e,r){return mh(t,n,!1,r)}function PQ(t,n,e,r){return mh(t,n,!0,r)}function kQ(t,n,e,r){var i=(r==null?void 0:r.minGap)||0,a=n.getChildren().slice();if(a.length<=2)return!1;for(var o=!1,s=a.length,l=a[0],c=a[s-1],u=l,f=1;f<s-1;f++){var h=a[f];h.getBBox();var d=Db(t,u,h,i);d?(h.hide(),o=!0):u=h}var p=Db(t,u,c,i);return p&&(u.hide(),o=!0),o}function Y5(t,n,e,r){var i=G5(t,n,r);return mh(t,n,!1)&&(i=!0),i}function _Q(t,n,e,r){var i=n.getChildren().slice(),a=G5(t,n,r);if(i.length>2){var o=i[0],s=i[i.length-1];o.get("visible")||(o.show(),mh(t,n,!1,r)&&(a=!0)),s.get("visible")||(s.show(),mh(t,n,!0,r)&&(a=!0))}return a}const LQ=Object.freeze(Object.defineProperty({__proto__:null,equidistance:Y5,equidistanceWithReverseBoth:_Q,getDefault:TQ,reserveBoth:kQ,reserveFirst:CQ,reserveLast:PQ},Symbol.toStringTag,{value:"Module"}));function IQ(t,n){$(t,function(e){var r=e.attr("x"),i=e.attr("y"),a=cl({x:r,y:i},n);e.attr("matrix",a)})}function W5(t,n,e,r){var i=n.getChildren();if(!i.length||!t&&i.length<2)return!1;var a=Fb(i),o=!1;if(t)o=!!e&&a>e;else{var s=Math.abs(i[1].attr("x")-i[0].attr("x"));o=a>s}if(o){var l=r(e,a);IQ(i,l)}return o}function FQ(){return V5}function V5(t,n,e,r){return W5(t,n,e,function(){return bt(r)?r:t?It.verticalAxisRotate:It.horizontalAxisRotate})}function DQ(t,n,e){return W5(t,n,e,function(r,i){if(!r)return t?It.verticalAxisRotate:It.horizontalAxisRotate;if(t)return-Math.acos(r/i);var a=0;return r>i?a=Math.PI/4:(a=Math.asin(r/i),a>Math.PI/4&&(a=Math.PI/4)),a})}const RQ=Object.freeze(Object.defineProperty({__proto__:null,fixedAngle:V5,getDefault:FQ,unfixedAngle:DQ},Symbol.toStringTag,{value:"Module"})),H5=Object.freeze(Object.defineProperty({__proto__:null,autoEllipsis:AQ,autoHide:LQ,autoRotate:RQ},Symbol.toStringTag,{value:"Module"}));var BQ=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return E(E({},e),{type:"line",locationType:"region",start:null,end:null})},n.prototype.getLinePath=function(){var e=this.get("start"),r=this.get("end"),i=[];return i.push(["M",e.x,e.y]),i.push(["L",r.x,r.y]),i},n.prototype.getInnerLayoutBBox=function(){var e=this.get("start"),r=this.get("end"),i=t.prototype.getInnerLayoutBBox.call(this),a=Math.min(e.x,r.x,i.x),o=Math.min(e.y,r.y,i.y),s=Math.max(e.x,r.x,i.maxX),l=Math.max(e.y,r.y,i.maxY);return{x:a,y:o,minX:a,minY:o,maxX:s,maxY:l,width:s-a,height:l-o}},n.prototype.isVertical=function(){var e=this.get("start"),r=this.get("end");return Cn(e.x,r.x)},n.prototype.isHorizontal=function(){var e=this.get("start"),r=this.get("end");return Cn(e.y,r.y)},n.prototype.getTickPoint=function(e){var r=this,i=r.get("start"),a=r.get("end"),o=a.x-i.x,s=a.y-i.y;return{x:i.x+o*e,y:i.y+s*e}},n.prototype.getSideVector=function(e){var r=this.getAxisVector(),i=hS([0,0],r),a=this.get("verticalFactor"),o=[i[1],i[0]*-1];return nr([0,0],o,e*a)},n.prototype.getAxisVector=function(){var e=this.get("start"),r=this.get("end");return[r.x-e.x,r.y-e.y]},n.prototype.processOverlap=function(e){var r=this,i=this.isVertical(),a=this.isHorizontal();if(!(!i&&!a)){var o=this.get("label"),s=this.get("title"),l=this.get("verticalLimitLength"),c=o.offset,u=l,f=0,h=0;s&&(f=s.style.fontSize,h=s.spacing),u&&(u=u-c-h-f);var d=this.get("overlapOrder");if($(d,function(g){o[g]&&r.canProcessOverlap(g)&&r.autoProcessOverlap(g,o[g],e,u)}),s&&J(s.offset)){var p=e.getCanvasBBox(),v=i?p.width:p.height;s.offset=c+v+h+f/2}}},n.prototype.canProcessOverlap=function(e){var r=this.get("label");return e==="autoRotate"?J(r.rotate):!0},n.prototype.autoProcessOverlap=function(e,r,i,a){var o=this,s=this.isVertical(),l=!1,c=H5[e];if(r===!0)this.get("label"),l=c.getDefault()(s,i,a);else if(ut(r))l=r(s,i,a);else if(Qt(r)){var u=r;c[u.type]&&(l=c[u.type](s,i,a,u.cfg))}else c[r]&&(l=c[r](s,i,a));if(e==="autoRotate"){if(l){var f=i.getChildren(),h=this.get("verticalFactor");$(f,function(p){var v=p.attr("textAlign");if(v==="center"){var g=h>0?"end":"start";p.attr("textAlign",g)}})}}else if(e==="autoHide"){var d=i.getChildren().slice(0);$(d,function(p){p.get("visible")||(o.get("isRegister")&&o.unregisterElement(p),p.remove())})}},n}($5),NQ=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return E(E({},e),{type:"circle",locationType:"circle",center:null,radius:null,startAngle:-Math.PI/2,endAngle:Math.PI*3/2})},n.prototype.getLinePath=function(){var e=this.get("center"),r=e.x,i=e.y,a=this.get("radius"),o=a,s=this.get("startAngle"),l=this.get("endAngle"),c=[];if(Math.abs(l-s)===Math.PI*2)c=[["M",r,i-o],["A",a,o,0,1,1,r,i+o],["A",a,o,0,1,1,r,i-o],["Z"]];else{var u=this.getCirclePoint(s),f=this.getCirclePoint(l),h=Math.abs(l-s)>Math.PI?1:0,d=s>l?0:1;c=[["M",r,i],["L",u.x,u.y],["A",a,o,0,h,d,f.x,f.y],["L",r,i]]}return c},n.prototype.getTickPoint=function(e){var r=this.get("startAngle"),i=this.get("endAngle"),a=r+(i-r)*e;return this.getCirclePoint(a)},n.prototype.getSideVector=function(e,r){var i=this.get("center"),a=[r.x-i.x,r.y-i.y],o=this.get("verticalFactor"),s=fc(a);return nr(a,a,o*e/s),a},n.prototype.getAxisVector=function(e){var r=this.get("center"),i=[e.x-r.x,e.y-r.y];return[i[1],-1*i[0]]},n.prototype.getCirclePoint=function(e,r){var i=this.get("center");return r=r||this.get("radius"),{x:i.x+Math.cos(e)*r,y:i.y+Math.sin(e)*r}},n.prototype.canProcessOverlap=function(e){var r=this.get("label");return e==="autoRotate"?J(r.rotate):!0},n.prototype.processOverlap=function(e){var r=this,i=this.get("label"),a=this.get("title"),o=this.get("verticalLimitLength"),s=i.offset,l=o,c=0,u=0;a&&(c=a.style.fontSize,u=a.spacing),l&&(l=l-s-u-c);var f=this.get("overlapOrder");if($(f,function(d){i[d]&&r.canProcessOverlap(d)&&r.autoProcessOverlap(d,i[d],e,l)}),a&&J(a.offset)){var h=e.getCanvasBBox().height;a.offset=s+h+u+c/2}},n.prototype.autoProcessOverlap=function(e,r,i,a){var o=this,s=!1,l=H5[e];if(a>0)if(r===!0)s=l.getDefault()(!1,i,a);else if(ut(r))s=r(!1,i,a);else if(Qt(r)){var c=r;l[c.type]&&(s=l[c.type](!1,i,a,c.cfg))}else l[r]&&(s=l[r](!1,i,a));if(e==="autoRotate"){if(s){var u=i.getChildren(),f=this.get("verticalFactor");$(u,function(d){var p=d.attr("textAlign");if(p==="center"){var v=f>0?"end":"start";d.attr("textAlign",v)}})}}else if(e==="autoHide"){var h=i.getChildren().slice(0);$(h,function(d){d.get("visible")||(o.get("isRegister")&&o.unregisterElement(d),d.remove())})}},n}($5),RS=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return E(E({},e),{name:"crosshair",type:"base",line:{},text:null,textBackground:{},capture:!1,defaultCfg:{line:{style:{lineWidth:1,stroke:It.lineColor}},text:{position:"start",offset:10,autoRotate:!1,content:null,style:{fill:It.textColor,textAlign:"center",textBaseline:"middle",fontFamily:It.fontFamily}},textBackground:{padding:5,style:{stroke:It.lineColor}}}})},n.prototype.renderInner=function(e){this.get("line")&&this.renderLine(e),this.get("text")&&(this.renderText(e),this.renderBackground(e))},n.prototype.renderText=function(e){var r=this.get("text"),i=r.style,a=r.autoRotate,o=r.content;if(!J(o)){var s=this.getTextPoint(),l=null;if(a){var c=this.getRotateAngle();l=cl(s,c)}this.addShape(e,{type:"text",name:"crosshair-text",id:this.getElementId("text"),attrs:E(E(E({},s),{text:o,matrix:l}),i)})}},n.prototype.renderLine=function(e){var r=this.getLinePath(),i=this.get("line"),a=i.style;this.addShape(e,{type:"path",name:"crosshair-line",id:this.getElementId("line"),attrs:E({path:r},a)})},n.prototype.renderBackground=function(e){var r=this.getElementId("text"),i=e.findById(r),a=this.get("textBackground");if(a&&i){var o=i.getBBox(),s=wg(a.padding),l=a.style,c=this.addShape(e,{type:"rect",name:"crosshair-text-background",id:this.getElementId("text-background"),attrs:E({x:o.x-s[3],y:o.y-s[0],width:o.width+s[1]+s[3],height:o.height+s[0]+s[2],matrix:i.attr("matrix")},l)});c.toBack()}},n}(jn),X5=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return E(E({},e),{type:"line",locationType:"region",start:null,end:null})},n.prototype.getRotateAngle=function(){var e=this.getLocation(),r=e.start,i=e.end,a=this.get("text").position,o=Math.atan2(i.y-r.y,i.x-r.x),s=a==="start"?o-Math.PI/2:o+Math.PI/2;return s},n.prototype.getTextPoint=function(){var e=this.getLocation(),r=e.start,i=e.end,a=this.get("text"),o=a.position,s=a.offset;return B5(r,i,o,s)},n.prototype.getLinePath=function(){var e=this.getLocation(),r=e.start,i=e.end;return[["M",r.x,r.y],["L",i.x,i.y]]},n}(RS),$Q=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return E(E({},e),{type:"circle",locationType:"circle",center:null,radius:100,startAngle:-Math.PI/2,endAngle:Math.PI*3/2})},n.prototype.getRotateAngle=function(){var e=this.getLocation(),r=e.startAngle,i=e.endAngle,a=this.get("text").position,o=a==="start"?r+Math.PI/2:i-Math.PI/2;return o},n.prototype.getTextPoint=function(){var e=this.get("text"),r=e.position,i=e.offset,a=this.getLocation(),o=a.center,s=a.radius,l=a.startAngle,c=a.endAngle,u=r==="start"?l:c,f=this.getRotateAngle()-Math.PI,h=Oc(o,s,u),d=Math.cos(f)*i,p=Math.sin(f)*i;return{x:h.x+d,y:h.y+p}},n.prototype.getLinePath=function(){var e=this.getLocation(),r=e.center,i=e.radius,a=e.startAngle,o=e.endAngle,s=null;if(o-a===Math.PI*2){var l=r.x,c=r.y;s=[["M",l,c-i],["A",i,i,0,1,1,l,c+i],["A",i,i,0,1,1,l,c-i],["Z"]]}else{var u=Oc(r,i,a),f=Oc(r,i,o),h=Math.abs(o-a)>Math.PI?1:0,d=a>o?0:1;s=[["M",u.x,u.y],["A",i,i,0,h,d,f.x,f.y]]}return s},n}(RS),xh="g2-crosshair",Rb=xh+"-line",Bb=xh+"-text",Ju;const jQ=(Ju={},Ju[""+xh]={position:"relative"},Ju[""+Rb]={position:"absolute",backgroundColor:"rgba(0, 0, 0, 0.25)"},Ju[""+Bb]={position:"absolute",color:It.textColor,fontFamily:It.fontFamily},Ju);var zQ=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return E(E({},e),{name:"crosshair",type:"html",locationType:"region",start:{x:0,y:0},end:{x:0,y:0},capture:!1,text:null,containerTpl:'<div class="'+xh+'"></div>',crosshairTpl:'<div class="'+Rb+'"></div>',textTpl:'<span class="'+Bb+'">{content}</span>',domStyles:null,containerClassName:xh,defaultStyles:jQ,defaultCfg:{text:{position:"start",content:null,align:"center",offset:10}}})},n.prototype.render=function(){this.resetText(),this.resetPosition()},n.prototype.initCrossHair=function(){var e=this.getContainer(),r=this.get("crosshairTpl"),i=Do(r);e.appendChild(i),this.applyStyle(Rb,i),this.set("crosshairEl",i)},n.prototype.getTextPoint=function(){var e=this.getLocation(),r=e.start,i=e.end,a=this.get("text"),o=a.position,s=a.offset;return B5(r,i,o,s)},n.prototype.resetText=function(){var e=this.get("text"),r=this.get("textEl");if(e){var i=e.content;if(!r){var a=this.getContainer(),o=qD(this.get("textTpl"),e);r=Do(o),a.appendChild(r),this.applyStyle(Bb,r),this.set("textEl",r)}r.innerHTML=i}else r&&r.remove()},n.prototype.isVertical=function(e,r){return e.x===r.x},n.prototype.resetPosition=function(){var e=this.get("crosshairEl");e||(this.initCrossHair(),e=this.get("crosshairEl"));var r=this.get("start"),i=this.get("end"),a=Math.min(r.x,i.x),o=Math.min(r.y,i.y);this.isVertical(r,i)?Wn(e,{width:"1px",height:yr(Math.abs(i.y-r.y))}):Wn(e,{height:"1px",width:yr(Math.abs(i.x-r.x))}),Wn(e,{top:yr(o),left:yr(a)}),this.alignText()},n.prototype.alignText=function(){var e=this.get("textEl");if(e){var r=this.get("text").align,i=e.clientWidth,a=this.getTextPoint();switch(r){case"center":a.x=a.x-i/2;break;case"right":a.x=a.x-i}Wn(e,{top:yr(a.y),left:yr(a.x)})}},n.prototype.updateInner=function(e){Vo(e,"text")&&this.resetText(),t.prototype.updateInner.call(this,e)},n}(FS);const hC=Object.freeze(Object.defineProperty({__proto__:null,Base:RS,Circle:$Q,Html:zQ,Line:X5},Symbol.toStringTag,{value:"Module"}));var U5=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return E(E({},e),{name:"grid",line:{},alternateColor:null,capture:!1,items:[],closed:!1,defaultCfg:{line:{type:"line",style:{lineWidth:1,stroke:It.lineColor}}}})},n.prototype.getLineType=function(){var e=this.get("line")||this.get("defaultCfg").line;return e.type},n.prototype.renderInner=function(e){this.drawGrid(e)},n.prototype.getAlternatePath=function(e,r){var i=this.getGridPath(e),a=r.slice(0).reverse(),o=this.getGridPath(a,!0),s=this.get("closed");return s?i=i.concat(o):(o[0][0]="L",i=i.concat(o),i.push(["Z"])),i},n.prototype.getPathStyle=function(){return this.get("line").style},n.prototype.drawGrid=function(e){var r=this,i=this.get("line"),a=this.get("items"),o=this.get("alternateColor"),s=null;$(a,function(l,c){var u=l.id||c;if(i){var f=r.getPathStyle();f=ut(f)?f(l,c,a):f;var h=r.getElementId("line-"+u),d=r.getGridPath(l.points);r.addShape(e,{type:"path",name:"grid-line",id:h,attrs:Jt({path:d},f)})}if(o&&c>0){var p=r.getElementId("region-"+u),v=c%2===0;if(pt(o))v&&r.drawAlternateRegion(p,e,s.points,l.points,o);else{var g=v?o[1]:o[0];r.drawAlternateRegion(p,e,s.points,l.points,g)}}s=l})},n.prototype.drawAlternateRegion=function(e,r,i,a,o){var s=this.getAlternatePath(i,a);this.addShape(r,{type:"path",id:e,name:"grid-region",attrs:{path:s,fill:o}})},n}(jn);function GQ(t,n,e,r){var i=e-t,a=r-n;return Math.sqrt(i*i+a*a)}var YQ=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return E(E({},e),{type:"circle",center:null,closed:!0})},n.prototype.getGridPath=function(e,r){var i=this.getLineType(),a=this.get("closed"),o=[];if(e.length)if(i==="circle"){var s=this.get("center"),l=e[0],c=GQ(s.x,s.y,l.x,l.y),u=r?0:1;a?(o.push(["M",s.x,s.y-c]),o.push(["A",c,c,0,0,u,s.x,s.y+c]),o.push(["A",c,c,0,0,u,s.x,s.y-c]),o.push(["Z"])):$(e,function(f,h){h===0?o.push(["M",f.x,f.y]):o.push(["A",c,c,0,0,u,f.x,f.y])})}else $(e,function(f,h){h===0?o.push(["M",f.x,f.y]):o.push(["L",f.x,f.y])}),a&&o.push(["Z"]);return o},n}(U5),WQ=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return E(E({},e),{type:"line"})},n.prototype.getGridPath=function(e){var r=[];return $(e,function(i,a){a===0?r.push(["M",i.x,i.y]):r.push(["L",i.x,i.y])}),r},n}(U5),q5=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return E(E({},e),{name:"legend",layout:"horizontal",locationType:"point",x:0,y:0,offsetX:0,offsetY:0,title:null,background:null})},n.prototype.getLayoutBBox=function(){var e=t.prototype.getLayoutBBox.call(this),r=this.get("maxWidth"),i=this.get("maxHeight"),a=e.width,o=e.height;return r&&(a=Math.min(a,r)),i&&(o=Math.min(o,i)),w0(e.minX,e.minY,a,o)},n.prototype.setLocation=function(e){this.set("x",e.x),this.set("y",e.y),this.resetLocation()},n.prototype.resetLocation=function(){var e=this.get("x"),r=this.get("y"),i=this.get("offsetX"),a=this.get("offsetY");this.moveElementTo(this.get("group"),{x:e+i,y:r+a})},n.prototype.applyOffset=function(){this.resetLocation()},n.prototype.getDrawPoint=function(){return this.get("currentPoint")},n.prototype.setDrawPoint=function(e){return this.set("currentPoint",e)},n.prototype.renderInner=function(e){this.resetDraw(),this.get("title")&&this.drawTitle(e),this.drawLegendContent(e),this.get("background")&&this.drawBackground(e)},n.prototype.drawBackground=function(e){var r=this.get("background"),i=e.getBBox(),a=wg(r.padding),o=E({x:0,y:0,width:i.width+a[1]+a[3],height:i.height+a[0]+a[2]},r.style),s=this.addShape(e,{type:"rect",id:this.getElementId("background"),name:"legend-background",attrs:o});s.toBack()},n.prototype.drawTitle=function(e){var r=this.get("currentPoint"),i=this.get("title"),a=i.spacing,o=i.style,s=i.text,l=this.addShape(e,{type:"text",id:this.getElementId("title"),name:"legend-title",attrs:E({text:s,x:r.x,y:r.y},o)}),c=l.getBBox();this.set("currentPoint",{x:r.x,y:c.maxY+a})},n.prototype.resetDraw=function(){var e=this.get("background"),r={x:0,y:0};if(e){var i=wg(e.padding);r.x=i[3],r.y=i[0]}this.set("currentPoint",r)},n}(jn),O1={marker:{style:{inactiveFill:"#000",inactiveOpacity:.45,fill:"#000",opacity:1,size:12}},text:{style:{fill:"#ccc",fontSize:12}}},mp={fill:It.textColor,fontSize:12,textAlign:"start",textBaseline:"middle",fontFamily:It.fontFamily,fontWeight:"normal",lineHeight:12},M1="navigation-arrow-right",A1="navigation-arrow-left",dC={right:90*Math.PI/180,left:(360-90)*Math.PI/180,up:0,down:180*Math.PI/180},VQ=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.currentPageIndex=1,e.totalPagesCnt=1,e.pageWidth=0,e.pageHeight=0,e.startX=0,e.startY=0,e.onNavigationBack=function(){var r=e.getElementByLocalId("item-group");if(e.currentPageIndex>1){e.currentPageIndex-=1,e.updateNavigation();var i=e.getCurrentNavigationMatrix();e.get("animate")?r.animate({matrix:i},100):r.attr({matrix:i})}},e.onNavigationAfter=function(){var r=e.getElementByLocalId("item-group");if(e.currentPageIndex<e.totalPagesCnt){e.currentPageIndex+=1,e.updateNavigation();var i=e.getCurrentNavigationMatrix();e.get("animate")?r.animate({matrix:i},100):r.attr({matrix:i})}},e}return n.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return E(E({},e),{name:"legend",type:"category",itemSpacing:24,itemMarginBottom:8,maxItemWidth:null,itemWidth:null,itemHeight:null,itemName:{},itemValue:null,maxWidth:null,maxHeight:null,marker:{},radio:null,items:[],itemStates:{},itemBackground:{},pageNavigator:{},defaultCfg:{title:{spacing:5,style:{fill:It.textColor,fontSize:12,textAlign:"start",textBaseline:"top"}},background:{padding:5,style:{stroke:It.lineColor}},itemBackground:{style:{opacity:0,fill:"#fff"}},pageNavigator:O1,itemName:{spacing:16,style:mp},marker:{spacing:8,style:{r:6,symbol:"circle"}},itemValue:{alignRight:!1,formatter:null,style:mp,spacing:6},itemStates:{active:{nameStyle:{opacity:.8}},unchecked:{nameStyle:{fill:It.uncheckedColor},markerStyle:{fill:It.uncheckedColor,stroke:It.uncheckedColor}},inactive:{nameStyle:{fill:It.uncheckedColor},markerStyle:{opacity:.2}}}}})},n.prototype.isList=function(){return!0},n.prototype.getItems=function(){return this.get("items")},n.prototype.setItems=function(e){this.update({items:e})},n.prototype.updateItem=function(e,r){Jt(e,r),this.clear(),this.render()},n.prototype.clearItems=function(){var e=this.getElementByLocalId("item-group");e&&e.clear()},n.prototype.setItemState=function(e,r,i){e[r]=i;var a=this.getElementByLocalId("item-"+e.id);if(a){var o=this.getItems(),s=o.indexOf(e),l=this.createOffScreenGroup(),c=this.drawItem(e,s,this.getItemHeight(),l);this.updateElements(c,a),this.clearUpdateStatus(a)}},n.prototype.hasState=function(e,r){return!!e[r]},n.prototype.getItemStates=function(e){var r=this.get("itemStates"),i=[];return $(r,function(a,o){e[o]&&i.push(o)}),i},n.prototype.clearItemsState=function(e){var r=this,i=this.getItemsByState(e);$(i,function(a){r.setItemState(a,e,!1)})},n.prototype.getItemsByState=function(e){var r=this,i=this.getItems();return Ln(i,function(a){return r.hasState(a,e)})},n.prototype.drawLegendContent=function(e){this.processItems(),this.drawItems(e)},n.prototype.processItems=function(){var e=this.get("items");$(e,function(r){r.id||(r.id=r.name)})},n.prototype.drawItems=function(e){var r=this,i=this.addGroup(e,{id:this.getElementId("item-container-group"),name:"legend-item-container-group"}),a=this.addGroup(i,{id:this.getElementId("item-group"),name:"legend-item-group"}),o=this.getItemHeight(),s=this.get("itemWidth"),l=this.get("itemSpacing"),c=this.get("itemMarginBottom"),u=this.get("currentPoint"),f=u.x,h=u.y,d=this.get("layout"),p=this.get("items"),v=!1,g=0,y=this.get("maxWidth"),m=this.get("maxHeight");$(p,function(x,b){var w=r.drawItem(x,b,o,a),S=w.getBBox(),O=s||S.width;O>g&&(g=O),d==="horizontal"?(y&&y<u.x+O-f&&(v=!0,u.x=f,u.y+=o+c),r.moveElementTo(w,u),u.x+=O+l):(m&&m<u.y+o+c-h&&(v=!0,u.x+=g+l,u.y=h,g=0),r.moveElementTo(w,u),u.y+=o+c)}),v&&this.get("flipPage")&&(this.pageHeight=0,this.pageWidth=0,this.totalPagesCnt=1,this.startX=f,this.startY=h,this.adjustNavigation(e,a))},n.prototype.getItemHeight=function(){var e=this.get("itemHeight");if(!e){var r=(this.get("itemName")||{}).style;if(ut(r)){var i=this.getItems();i.forEach(function(a,o){var s=E(E({},mp),r(a,o,i)).fontSize;e<s&&(e=s)})}else r&&(e=r.fontSize)}return e},n.prototype.drawMarker=function(e,r,i,a){var o=E(E(E({x:0,y:a/2},r.style),{symbol:z(i.marker,"symbol","circle")}),z(i.marker,"style",{})),s=this.addShape(e,{type:"marker",id:this.getElementId("item-"+i.id+"-marker"),name:"legend-item-marker",attrs:o}),l=s.getBBox();s.attr("x",l.width/2);var c=s.attr(),u=c.stroke,f=c.fill;return u&&s.set("isStroke",!0),f&&s.set("isFill",!0),s},n.prototype.drawItemText=function(e,r,i,a,o,s,l){var c=i.formatter,u=i.style,f=E(E({x:s,y:o/2,text:c?c(a[r],a,l):a[r]},mp),ut(u)?u(a,l,this.getItems()):u);return this.addShape(e,{type:"text",id:this.getElementId("item-"+a.id+"-"+r),name:"legend-item-"+r,attrs:f})},n.prototype.drawRadio=function(e,r,i,a,o){var s,l,c=r.style||{},u=(s=c.r)!==null&&s!==void 0?s:a/2,f=u*3.6/8,h=[o+u,a/2-u],d=h[0],p=h[1],v=[d+u,p+u],g=v[0],y=v[1],m=[d,y+u],x=m[0],b=m[1],w=[o,p+u],S=w[0],O=w[1],M=i.showRadio,A=E(E({path:[["M",d,p],["A",u,u,0,0,1,g,y],["L",g-f,y],["L",g,y],["A",u,u,0,0,1,x,b],["L",x,b-f],["L",x,b],["A",u,u,0,0,1,S,O],["L",S+f,O],["L",S,O],["A",u,u,0,0,1,d,p],["L",d,p+f]],stroke:"#000000",fill:"#ffffff"},c),{opacity:M?(l=c==null?void 0:c.opacity)!==null&&l!==void 0?l:.45:0}),T=this.addShape(e,{type:"path",id:this.getElementId("item-"+i.id+"-radio"),name:"legend-item-radio",attrs:A});return T.set("tip",r.tip),T},n.prototype.drawItem=function(e,r,i,a){var o="item-"+e.id,s=this.addGroup(a,{name:"legend-item-container",id:this.getElementId("item-container-"+o),delegateObject:{item:e,index:r}}),l=this.addGroup(s,{name:"legend-item",id:this.getElementId(o),delegateObject:{item:e,index:r}}),c=this.get("marker"),u=this.get("itemName"),f=this.get("itemValue"),h=this.get("itemBackground"),d=this.get("radio"),p=this.getLimitItemWidth(),v=0;if(c){var g=this.drawMarker(l,c,e,i),y=c.spacing,m=z(e,["marker","spacing"]);bt(m)&&(y=m),v=g.getBBox().maxX+y}if(u){var x=this.drawItemText(l,"name",u,e,i,v,r);p&&Gf(!0,x,we(p-v,0,p)),v=x.getBBox().maxX+u.spacing}if(f){var b=this.drawItemText(l,"value",f,e,i,v,r);p&&(f.alignRight?(b.attr({textAlign:"right",x:p}),Gf(!0,b,we(p-v,0,p),"head")):Gf(!0,b,we(p-v,0,p))),v=b.getBBox().maxX+f.spacing}if(d&&this.drawRadio(l,d,e,i,v),h){var w=l.getBBox(),S=this.addShape(l,{type:"rect",name:"legend-item-background",id:this.getElementId(o+"-background"),attrs:E({x:0,y:0,width:w.width,height:i},h.style)});S.toBack()}return this.applyItemStates(e,l),l},n.prototype.adjustNavigation=function(e,r){var i=this,a=this.startX,o=this.startY,s=this.get("layout"),l=r.findAll(function(P){return P.get("name")==="legend-item"}),c=this.get("maxWidth"),u=this.get("maxHeight"),f=this.get("itemWidth"),h=this.get("itemSpacing"),d=this.getItemHeight(),p=ot({},O1,this.get("pageNavigator")),v=this.drawNavigation(e,s,"00/00",p),g=v.getBBox(),y={x:a,y:o},m=1,x=0,b=0,w=0,S=this.get("itemMarginBottom");function O(P,_){var k=P.getBBox(),I=f||k.width,L=_.x+I+h+g.width;return L>c}if(s==="horizontal"){var M=this.get("maxRow")||1,A=d+(M===1?0:S),T=c-h-g.width-g.minX;this.pageHeight=A*M,this.pageWidth=T,$(l,function(P){var _=P.getBBox(),k=f||_.width;(x&&x<y.x+k+h||O(P,y))&&(m===1&&(x=y.x+h,i.moveElementTo(v,{x:T,y:y.y+d/2-g.height/2-g.minY})),m+=1,y.x=a,y.y+=A),i.moveElementTo(P,y),P.getParent().setClip({type:"rect",attrs:{x:y.x,y:y.y,width:k+h,height:d}}),y.x+=k+h})}else{$(l,function(P){var _=P.getBBox();_.width>b&&(b=_.width)}),w=b,b+=h,c&&(b=Math.min(c,b),w=Math.min(c,w)),this.pageWidth=b,this.pageHeight=u-Math.max(g.height,d+S);var C=Math.floor(this.pageHeight/(d+S));$(l,function(P,_){_!==0&&_%C===0&&(m+=1,y.x+=b,y.y=o),i.moveElementTo(P,y),P.getParent().setClip({type:"rect",attrs:{x:y.x,y:y.y,width:b,height:d}}),y.y+=d+S}),this.totalPagesCnt=m,this.moveElementTo(v,{x:a+w/2-g.width/2-g.minX,y:u-g.height-g.minY})}this.pageHeight&&this.pageWidth&&r.getParent().setClip({type:"rect",attrs:{x:this.startX,y:this.startY,width:this.pageWidth,height:this.pageHeight}}),s==="horizontal"&&this.get("maxRow")?this.totalPagesCnt=Math.ceil(m/this.get("maxRow")):this.totalPagesCnt=m,this.currentPageIndex>this.totalPagesCnt&&(this.currentPageIndex=1),this.updateNavigation(v),r.attr("matrix",this.getCurrentNavigationMatrix())},n.prototype.drawNavigation=function(e,r,i,a){var o={x:0,y:0},s=this.addGroup(e,{id:this.getElementId("navigation-group"),name:"legend-navigation"}),l=z(a.marker,"style",{}),c=l.size,u=c===void 0?12:c,f=vt(l,["size"]),h=this.drawArrow(s,o,A1,r==="horizontal"?"up":"left",u,f);h.on("click",this.onNavigationBack);var d=h.getBBox();o.x+=d.width+2;var p=this.addShape(s,{type:"text",id:this.getElementId("navigation-text"),name:"navigation-text",attrs:E({x:o.x,y:o.y+u/2,text:i,textBaseline:"middle"},z(a.text,"style"))}),v=p.getBBox();o.x+=v.width+2;var g=this.drawArrow(s,o,M1,r==="horizontal"?"down":"right",u,f);return g.on("click",this.onNavigationAfter),s},n.prototype.updateNavigation=function(e){var r=ot({},O1,this.get("pageNavigator")),i=r.marker.style,a=i.fill,o=i.opacity,s=i.inactiveFill,l=i.inactiveOpacity,c=this.currentPageIndex+"/"+this.totalPagesCnt,u=e?e.getChildren()[1]:this.getElementByLocalId("navigation-text"),f=e?e.findById(this.getElementId(A1)):this.getElementByLocalId(A1),h=e?e.findById(this.getElementId(M1)):this.getElementByLocalId(M1);u.attr("text",c),f.attr("opacity",this.currentPageIndex===1?l:o),f.attr("fill",this.currentPageIndex===1?s:a),f.attr("cursor",this.currentPageIndex===1?"not-allowed":"pointer"),h.attr("opacity",this.currentPageIndex===this.totalPagesCnt?l:o),h.attr("fill",this.currentPageIndex===this.totalPagesCnt?s:a),h.attr("cursor",this.currentPageIndex===this.totalPagesCnt?"not-allowed":"pointer");var d=f.getBBox().maxX+2;u.attr("x",d),d+=u.getBBox().width+2,this.updateArrowPath(h,{x:d,y:0})},n.prototype.drawArrow=function(e,r,i,a,o,s){var l=r.x,c=r.y,u=this.addShape(e,{type:"path",id:this.getElementId(i),name:i,attrs:E({size:o,direction:a,path:[["M",l+o/2,c],["L",l,c+o],["L",l+o,c+o],["Z"]],cursor:"pointer"},s)});return u.attr("matrix",cl({x:l+o/2,y:c+o/2},dC[a])),u},n.prototype.updateArrowPath=function(e,r){var i=r.x,a=r.y,o=e.attr(),s=o.size,l=o.direction,c=cl({x:i+s/2,y:a+s/2},dC[l]);e.attr("path",[["M",i+s/2,a],["L",i,a+s],["L",i+s,a+s],["Z"]]),e.attr("matrix",c)},n.prototype.getCurrentNavigationMatrix=function(){var e=this,r=e.currentPageIndex,i=e.pageWidth,a=e.pageHeight,o=this.get("layout"),s=o==="horizontal"?{x:0,y:a*(1-r)}:{x:i*(1-r),y:0};return _S(s)},n.prototype.applyItemStates=function(e,r){var i=this.getItemStates(e),a=i.length>0;if(a){var o=r.getChildren(),s=this.get("itemStates");$(o,function(l){var c=l.get("name"),u=c.split("-")[2],f=mf(e,u,s);f&&(l.attr(f),u==="marker"&&!(l.get("isStroke")&&l.get("isFill"))&&(l.get("isStroke")&&l.attr("fill",null),l.get("isFill")&&l.attr("stroke",null)))})}},n.prototype.getLimitItemWidth=function(){var e=this.get("itemWidth"),r=this.get("maxItemWidth");return r?e&&(r=e<=r?e:r):e&&(r=e),r},n}(q5),HQ=1.4,pC=.4,XQ=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return E(E({},e),{type:"continue",min:0,max:100,value:null,colors:[],track:{},rail:{},label:{},handler:{},slidable:!0,tip:null,step:null,maxWidth:null,maxHeight:null,defaultCfg:{label:{align:"rail",spacing:5,formatter:null,style:{fontSize:12,fill:It.textColor,textBaseline:"middle",fontFamily:It.fontFamily}},handler:{size:10,style:{fill:"#fff",stroke:"#333"}},track:{},rail:{type:"color",size:20,defaultLength:100,style:{fill:"#DCDEE2"}},title:{spacing:5,style:{fill:It.textColor,fontSize:12,textAlign:"start",textBaseline:"top"}}}})},n.prototype.isSlider=function(){return!0},n.prototype.getValue=function(){return this.getCurrentValue()},n.prototype.getRange=function(){return{min:this.get("min"),max:this.get("max")}},n.prototype.setRange=function(e,r){this.update({min:e,max:r})},n.prototype.setValue=function(e){var r=this.getValue();this.set("value",e);var i=this.get("group");this.resetTrackClip(),this.get("slidable")&&this.resetHandlers(i),this.delegateEmit("valuechanged",{originValue:r,value:e})},n.prototype.initEvent=function(){var e=this.get("group");this.bindSliderEvent(e),this.bindRailEvent(e),this.bindTrackEvent(e)},n.prototype.drawLegendContent=function(e){this.drawRail(e),this.drawLabels(e),this.fixedElements(e),this.resetTrack(e),this.resetTrackClip(e),this.get("slidable")&&this.resetHandlers(e)},n.prototype.bindSliderEvent=function(e){this.bindHandlersEvent(e)},n.prototype.bindHandlersEvent=function(e){var r=this;e.on("legend-handler-min:drag",function(i){var a=r.getValueByCanvasPoint(i.x,i.y),o=r.getCurrentValue(),s=o[1];s<a&&(s=a),r.setValue([a,s])}),e.on("legend-handler-max:drag",function(i){var a=r.getValueByCanvasPoint(i.x,i.y),o=r.getCurrentValue(),s=o[0];s>a&&(s=a),r.setValue([s,a])})},n.prototype.bindRailEvent=function(e){},n.prototype.bindTrackEvent=function(e){var r=this,i=null;e.on("legend-track:dragstart",function(a){i={x:a.x,y:a.y}}),e.on("legend-track:drag",function(a){if(i){var o=r.getValueByCanvasPoint(i.x,i.y),s=r.getValueByCanvasPoint(a.x,a.y),l=r.getCurrentValue(),c=l[1]-l[0],u=r.getRange(),f=s-o;f<0?l[0]+f>u.min?r.setValue([l[0]+f,l[1]+f]):r.setValue([u.min,u.min+c]):f>0&&(f>0&&l[1]+f<u.max?r.setValue([l[0]+f,l[1]+f]):r.setValue([u.max-c,u.max])),i={x:a.x,y:a.y}}}),e.on("legend-track:dragend",function(a){i=null})},n.prototype.drawLabels=function(e){this.drawLabel("min",e),this.drawLabel("max",e)},n.prototype.drawLabel=function(e,r){var i=this.get("label"),a=i.style,o=i.align,s=i.formatter,l=this.get(e),c=this.getLabelAlignAttrs(e,o),u="label-"+e;this.addShape(r,{type:"text",id:this.getElementId(u),name:"legend-label-"+e,attrs:E(E({x:0,y:0,text:ut(s)?s(l):l},a),c)})},n.prototype.getLabelAlignAttrs=function(e,r){var i=this.isVertical(),a="center",o="middle";return i?(a="start",r!=="rail"?e==="min"?o="top":o="bottom":o="top"):r!=="rail"?(o="top",e==="min"?a="start":a="end"):(a="start",o="middle"),{textAlign:a,textBaseline:o}},n.prototype.getRailPath=function(e,r,i,a){var o=this.get("rail"),s=o.size,l=o.defaultLength,c=o.type,u=this.isVertical(),f=l,h=i,d=a;h||(h=u?s:f),d||(d=u?f:s);var p=[];return c==="color"?(p.push(["M",e,r]),p.push(["L",e+h,r]),p.push(["L",e+h,r+d]),p.push(["L",e,r+d]),p.push(["Z"])):(p.push(["M",e+h,r]),p.push(["L",e+h,r+d]),p.push(["L",e,r+d]),p.push(["Z"])),p},n.prototype.drawRail=function(e){var r=this.get("rail"),i=r.style;this.addShape(e,{type:"path",id:this.getElementId("rail"),name:"legend-rail",attrs:E({path:this.getRailPath(0,0)},i)})},n.prototype.getTrackColor=function(e){var r=e.length;if(!r)return null;if(r===1)return e[0];var i;this.isVertical()?i="l(90)":i="l(0)";for(var a=0;a<r;a++){var o=a/(r-1);i+=" "+o+":"+e[a]}return i},n.prototype.getTrackPath=function(e){var r=this.getRailShape(e),i=r.attr("path");return er(i)},n.prototype.getClipTrackAttrs=function(e){var r=this.getCurrentValue(),i=r[0],a=r[1],o=this.getRailBBox(e),s=this.getPointByValue(i,e),l=this.getPointByValue(a,e),c=this.isVertical(),u,f,h,d;return c?(u=o.minX,f=s.y,h=o.width,d=l.y-s.y):(u=s.x,f=o.minY,h=l.x-s.x,d=o.height),{x:u,y:f,width:h,height:d}},n.prototype.getTrackAttrs=function(e){var r=this.get("track"),i=this.get("colors"),a=this.getTrackPath(e);return Jt({path:a,fill:this.getTrackColor(i)},r.style)},n.prototype.resetTrackClip=function(e){var r=e||this.get("group"),i=this.getElementId("track"),a=r.findById(i),o=a.getClip(),s=this.getClipTrackAttrs(e);o?o.attr(s):a.setClip({type:"rect",attrs:s})},n.prototype.resetTrack=function(e){var r=this.getElementId("track"),i=e.findById(r),a=this.getTrackAttrs(e);i?i.attr(a):this.addShape(e,{type:"path",id:r,draggable:this.get("slidable"),name:"legend-track",attrs:a})},n.prototype.getPointByValue=function(e,r){var i=this.getRange(),a=i.min,o=i.max,s=(e-a)/(o-a),l=this.getRailBBox(r),c=this.isVertical(),u={x:0,y:0};return c?(u.x=l.minX+l.width/2,u.y=Ks(l.minY,l.maxY,s)):(u.x=Ks(l.minX,l.maxX,s),u.y=l.minY+l.height/2),u},n.prototype.getRailShape=function(e){var r=e||this.get("group");return r.findById(this.getElementId("rail"))},n.prototype.getRailBBox=function(e){var r=this.getRailShape(e),i=r.getBBox();return i},n.prototype.getRailCanvasBBox=function(){var e=this.get("group"),r=e.findById(this.getElementId("rail")),i=r.getCanvasBBox();return i},n.prototype.isVertical=function(){return this.get("layout")==="vertical"},n.prototype.getValueByCanvasPoint=function(e,r){var i=this.getRange(),a=i.min,o=i.max,s=this.getRailCanvasBBox(),l=this.isVertical(),c=this.get("step"),u;l?u=(r-s.minY)/s.height:u=(e-s.minX)/s.width;var f=Ks(a,o,u);if(c){var h=Math.round((f-a)/c);f=a+h*c}return f>o&&(f=o),f<a&&(f=a),f},n.prototype.getCurrentValue=function(){var e=this.get("value");if(!e){var r=this.get("values");return r?[Math.max(Math.min.apply(Math,rl(r,[this.get("max")])),this.get("min")),Math.min(Math.max.apply(Math,rl(r,[this.get("min")])),this.get("max"))]:[this.get("min"),this.get("max")]}return e},n.prototype.resetHandlers=function(e){var r=this.getCurrentValue(),i=r[0],a=r[1];this.resetHandler(e,"min",i),this.resetHandler(e,"max",a)},n.prototype.getHandlerPath=function(e,r){var i=this.isVertical(),a=[],o=e.size,s=r.x,l=r.y,c=o*HQ,u=o/2,f=o/6;if(i){var h=s+c*pC;a.push(["M",s,l]),a.push(["L",h,l+u]),a.push(["L",s+c,l+u]),a.push(["L",s+c,l-u]),a.push(["L",h,l-u]),a.push(["Z"]),a.push(["M",h,l+f]),a.push(["L",s+c-2,l+f]),a.push(["M",h,l-f]),a.push(["L",s+c-2,l-f])}else{var d=l+c*pC;a.push(["M",s,l]),a.push(["L",s-u,d]),a.push(["L",s-u,l+c]),a.push(["L",s+u,l+c]),a.push(["L",s+u,d]),a.push(["Z"]),a.push(["M",s-f,d]),a.push(["L",s-f,l+c-2]),a.push(["M",s+f,d]),a.push(["L",s+f,l+c-2])}return a},n.prototype.resetHandler=function(e,r,i){var a=this.getPointByValue(i,e),o=this.get("handler"),s=this.getHandlerPath(o,a),l=this.getElementId("handler-"+r),c=e.findById(l),u=this.isVertical();c?c.attr("path",s):this.addShape(e,{type:"path",name:"legend-handler-"+r,draggable:!0,id:l,attrs:E(E({path:s},o.style),{cursor:u?"ns-resize":"ew-resize"})})},n.prototype.fixedElements=function(e){var r=e.findById(this.getElementId("rail")),i=e.findById(this.getElementId("label-min")),a=e.findById(this.getElementId("label-max")),o=this.getDrawPoint();this.isVertical()?this.fixedVertail(i,a,r,o):this.fixedHorizontal(i,a,r,o)},n.prototype.fitRailLength=function(e,r,i,a){var o=this.isVertical(),s=o?"height":"width",l=this.get("label"),c=l.align,u=l.spacing,f=this.get("max"+Cl(s));if(f){var h=c==="rail"?i[s]+e[s]+r[s]+u*2:i[s],d=h-f;d>0&&this.changeRailLength(a,s,i[s]-d)}},n.prototype.changeRailLength=function(e,r,i){var a=e.getBBox(),o;r==="height"?o=this.getRailPath(a.x,a.y,a.width,i):o=this.getRailPath(a.x,a.y,i,a.height),e.attr("path",o)},n.prototype.changeRailPosition=function(e,r,i){var a=e.getBBox(),o=this.getRailPath(r,i,a.width,a.height);e.attr("path",o)},n.prototype.fixedHorizontal=function(e,r,i,a){var o=this.get("label"),s=o.align,l=o.spacing,c=i.getBBox(),u=e.getBBox(),f=r.getBBox(),h=c.height;this.fitRailLength(u,f,c,i),c=i.getBBox(),s==="rail"?(e.attr({x:a.x,y:a.y+h/2}),this.changeRailPosition(i,a.x+u.width+l,a.y),r.attr({x:a.x+u.width+c.width+l*2,y:a.y+h/2})):s==="top"?(e.attr({x:a.x,y:a.y}),r.attr({x:a.x+c.width,y:a.y}),this.changeRailPosition(i,a.x,a.y+u.height+l)):(this.changeRailPosition(i,a.x,a.y),e.attr({x:a.x,y:a.y+c.height+l}),r.attr({x:a.x+c.width,y:a.y+c.height+l}))},n.prototype.fixedVertail=function(e,r,i,a){var o=this.get("label"),s=o.align,l=o.spacing,c=i.getBBox(),u=e.getBBox(),f=r.getBBox();if(this.fitRailLength(u,f,c,i),c=i.getBBox(),s==="rail")e.attr({x:a.x,y:a.y}),this.changeRailPosition(i,a.x,a.y+u.height+l),r.attr({x:a.x,y:a.y+u.height+c.height+l*2});else if(s==="right")e.attr({x:a.x+c.width+l,y:a.y}),this.changeRailPosition(i,a.x,a.y),r.attr({x:a.x+c.width+l,y:a.y+c.height});else{var h=Math.max(u.width,f.width);e.attr({x:a.x,y:a.y}),this.changeRailPosition(i,a.x+h+l,a.y),r.attr({x:a.x,y:a.y+c.height})}},n}(q5),Za="g2-tooltip",Ka="g2-tooltip-title",bh="g2-tooltip-list",O0="g2-tooltip-list-item",M0="g2-tooltip-marker",A0="g2-tooltip-value",Z5="g2-tooltip-name",BS="g2-tooltip-crosshair-x",NS="g2-tooltip-crosshair-y";const UQ=Object.freeze(Object.defineProperty({__proto__:null,CONTAINER_CLASS:Za,CROSSHAIR_X:BS,CROSSHAIR_Y:NS,LIST_CLASS:bh,LIST_ITEM_CLASS:O0,MARKER_CLASS:M0,NAME_CLASS:Z5,TITLE_CLASS:Ka,VALUE_CLASS:A0},Symbol.toStringTag,{value:"Module"}));var Wi;const qQ=(Wi={},Wi[""+Za]={position:"absolute",visibility:"visible",zIndex:8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)",backgroundColor:"rgba(255, 255, 255, 0.9)",boxShadow:"0px 0px 10px #aeaeae",borderRadius:"3px",color:"rgb(87, 87, 87)",fontSize:"12px",fontFamily:It.fontFamily,lineHeight:"20px",padding:"10px 10px 6px 10px"},Wi[""+Ka]={marginBottom:"4px"},Wi[""+bh]={margin:"0px",listStyleType:"none",padding:"0px"},Wi[""+O0]={listStyleType:"none",marginBottom:"4px"},Wi[""+M0]={width:"8px",height:"8px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},Wi[""+A0]={display:"inline-block",float:"right",marginLeft:"30px"},Wi[""+BS]={position:"absolute",width:"1px",backgroundColor:"rgba(0, 0, 0, 0.25)"},Wi[""+NS]={position:"absolute",height:"1px",backgroundColor:"rgba(0, 0, 0, 0.25)"},Wi);function ZQ(t,n,e,r,i){var a={left:t<i.x,right:t+e>i.x+i.width,top:n<i.y,bottom:n+r>i.y+i.height};return a}function KQ(t,n,e,r,i,a){var o=t,s=n;switch(a){case"left":o=t-r-e,s=n-i/2;break;case"right":o=t+e,s=n-i/2;break;case"top":o=t-r/2,s=n-i-e;break;case"bottom":o=t-r/2,s=n+e;break;default:o=t+e,s=n-i-e;break}return{x:o,y:s}}function QQ(t,n,e,r,i,a,o){var s=KQ(t,n,e,r,i,a);if(o){var l=ZQ(s.x,s.y,r,i,o);a==="auto"?(l.right&&(s.x=Math.max(0,t-r-e)),l.top&&(s.y=Math.max(0,n-i-e))):a==="top"||a==="bottom"?(l.left&&(s.x=o.x),l.right&&(s.x=o.x+o.width-r),a==="top"&&l.top&&(s.y=n+e),a==="bottom"&&l.bottom&&(s.y=n-i-e)):(l.top&&(s.y=o.y),l.bottom&&(s.y=o.y+o.height-i),a==="left"&&l.left&&(s.x=t+e),a==="right"&&l.right&&(s.x=t-r-e))}return s}function JQ(t,n){var e=!1;return $(n,function(r){if(Vo(t,r))return e=!0,!1}),e}var tJ=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return E(E({},e),{name:"tooltip",type:"html",x:0,y:0,items:[],customContent:null,containerTpl:'<div class="'+Za+'"><div class="'+Ka+'"></div><ul class="'+bh+'"></ul></div>',itemTpl:'<li class="'+O0+`" data-index={index}>
          <span class="`+M0+`" style="background:{color}"></span>
          <span class="`+Z5+`">{name}</span>:
          <span class="`+A0+`">{value}</span>
        </li>`,xCrosshairTpl:'<div class="'+BS+'"></div>',yCrosshairTpl:'<div class="'+NS+'"></div>',title:null,showTitle:!0,region:null,crosshairsRegion:null,containerClassName:Za,crosshairs:null,offset:10,position:"right",domStyles:null,defaultStyles:qQ})},n.prototype.render=function(){this.get("customContent")?this.renderCustomContent():(this.resetTitle(),this.renderItems()),this.resetPosition()},n.prototype.clear=function(){this.clearCrosshairs(),this.setTitle(""),this.clearItemDoms()},n.prototype.show=function(){var e=this.getContainer();!e||this.destroyed||(this.set("visible",!0),Wn(e,{visibility:"visible"}),this.setCrossHairsVisible(!0))},n.prototype.hide=function(){var e=this.getContainer();!e||this.destroyed||(this.set("visible",!1),Wn(e,{visibility:"hidden"}),this.setCrossHairsVisible(!1))},n.prototype.getLocation=function(){return{x:this.get("x"),y:this.get("y")}},n.prototype.setLocation=function(e){this.set("x",e.x),this.set("y",e.y),this.resetPosition()},n.prototype.setCrossHairsVisible=function(e){var r=e?"":"none",i=this.get("xCrosshairDom"),a=this.get("yCrosshairDom");i&&Wn(i,{display:r}),a&&Wn(a,{display:r})},n.prototype.initContainer=function(){if(t.prototype.initContainer.call(this),this.get("customContent")){this.get("container")&&this.get("container").remove();var e=this.getHtmlContentNode();this.get("parent").appendChild(e),this.set("container",e),this.resetStyles(),this.applyStyles()}},n.prototype.updateInner=function(e){this.get("customContent")?this.renderCustomContent():(JQ(e,["title","showTitle"])&&this.resetTitle(),Vo(e,"items")&&this.renderItems()),t.prototype.updateInner.call(this,e)},n.prototype.initDom=function(){this.cacheDoms()},n.prototype.removeDom=function(){t.prototype.removeDom.call(this),this.clearCrosshairs()},n.prototype.resetPosition=function(){var e=this.get("x"),r=this.get("y"),i=this.get("offset"),a=this.getOffset(),o=a.offsetX,s=a.offsetY,l=this.get("position"),c=this.get("region"),u=this.getContainer(),f=this.getBBox(),h=f.width,d=f.height,p;c&&(p=yh(c));var v=QQ(e,r,i,h,d,l,p);Wn(u,{left:yr(v.x+o),top:yr(v.y+s)}),this.resetCrosshairs()},n.prototype.renderCustomContent=function(){var e=this.getHtmlContentNode(),r=this.get("parent"),i=this.get("container");i&&i.parentNode===r?r.replaceChild(e,i):r.appendChild(e),this.set("container",e),this.resetStyles(),this.applyStyles()},n.prototype.getHtmlContentNode=function(){var e,r=this.get("customContent");if(r){var i=r(this.get("title"),this.get("items"));QD(i)?e=i:e=Do(i)}return e},n.prototype.cacheDoms=function(){var e=this.getContainer(),r=e.getElementsByClassName(Ka)[0],i=e.getElementsByClassName(bh)[0];this.set("titleDom",r),this.set("listDom",i)},n.prototype.resetTitle=function(){var e=this.get("title"),r=this.get("showTitle");r&&e?this.setTitle(e):this.setTitle("")},n.prototype.setTitle=function(e){var r=this.get("titleDom");r&&(r.innerText=e)},n.prototype.resetCrosshairs=function(){var e=this.get("crosshairsRegion"),r=this.get("crosshairs");if(!e||!r)this.clearCrosshairs();else{var i=yh(e),a=this.get("xCrosshairDom"),o=this.get("yCrosshairDom");r==="x"?(this.resetCrosshair("x",i),o&&(o.remove(),this.set("yCrosshairDom",null))):r==="y"?(this.resetCrosshair("y",i),a&&(a.remove(),this.set("xCrosshairDom",null))):(this.resetCrosshair("x",i),this.resetCrosshair("y",i)),this.setCrossHairsVisible(this.get("visible"))}},n.prototype.resetCrosshair=function(e,r){var i=this.checkCrosshair(e),a=this.get(e);e==="x"?Wn(i,{left:yr(a),top:yr(r.y),height:yr(r.height)}):Wn(i,{top:yr(a),left:yr(r.x),width:yr(r.width)})},n.prototype.checkCrosshair=function(e){var r=e+"CrosshairDom",i=e+"CrosshairTpl",a="CROSSHAIR_"+e.toUpperCase(),o=UQ[a],s=this.get(r),l=this.get("parent");return s||(s=Do(this.get(i)),this.applyStyle(o,s),l.appendChild(s),this.set(r,s)),s},n.prototype.renderItems=function(){this.clearItemDoms();var e=this.get("items"),r=this.get("itemTpl"),i=this.get("listDom");i&&($(e,function(a){var o=No.toCSSGradient(a.color),s=E(E({},a),{color:o}),l=qD(r,s),c=Do(l);i.appendChild(c)}),this.applyChildrenStyles(i,this.get("domStyles")))},n.prototype.clearItemDoms=function(){this.get("listDom")&&IS(this.get("listDom"))},n.prototype.clearCrosshairs=function(){var e=this.get("xCrosshairDom"),r=this.get("yCrosshairDom");e&&e.remove(),r&&r.remove(),this.set("xCrosshairDom",null),this.set("yCrosshairDom",null)},n}(FS),eJ={opacity:0},nJ={stroke:"#C5C5C5",strokeOpacity:.85},rJ={fill:"#CACED4",opacity:.85};function iJ(t,n,e,r){var i=[],a=!!r,o,s,l,c,u,f,h;if(a){l=r[0],c=r[1];for(var d=0,p=t.length;d<p;d+=1){var v=t[d];l=An([0,0],l,v),c=En([0,0],c,v)}}for(var d=0,g=t.length;d<g;d+=1){var v=t[d];if(d===0&&!e)h=v;else if(d===g-1&&!e)f=v,i.push(h),i.push(f);else{var y=[d?d-1:g-1,d-1][e?0:1];o=t[y],s=t[e?(d+1)%g:d+1];var m=[0,0];m=Xs(m,s,o),m=nr(m,m,n);var x=Nc(v,o),b=Nc(v,s),w=x+b;w!==0&&(x/=w,b/=w);var S=nr([0,0],m,-x),O=nr([0,0],m,b);f=na([0,0],v,S),u=na([0,0],v,O),u=An([0,0],u,En([0,0],s,v)),u=En([0,0],u,An([0,0],s,v)),S=Xs([0,0],u,v),S=nr([0,0],S,-x/b),f=na([0,0],v,S),f=An([0,0],f,En([0,0],o,v)),f=En([0,0],f,An([0,0],o,v)),O=Xs([0,0],v,f),O=nr([0,0],O,b/x),u=na([0,0],v,O),a&&(f=En([0,0],f,l),f=An([0,0],f,c),u=En([0,0],u,l),u=An([0,0],u,c)),i.push(h),i.push(f),h=u}}return e&&i.push(i.shift()),i}function aJ(t,n,e){n===void 0&&(n=!1),e===void 0&&(e=[[0,0],[1,1]]);for(var r=!!n,i=[],a=0,o=t.length;a<o;a+=2)i.push([t[a],t[a+1]]);for(var s=iJ(i,.4,r,e),l=i.length,c=[],u,f,h,a=0;a<l-1;a+=1)u=s[a*2],f=s[a*2+1],h=i[a+1],c.push(["C",u[0],u[1],f[0],f[1],h[0],h[1]]);return r&&(u=s[l],f=s[l+1],h=i[0],c.push(["C",u[0],u[1],f[0],f[1],h[0],h[1]])),c}function oJ(t){return Ae(t,function(n,e){var r=e===0?"M":"L",i=n[0],a=n[1];return[r,i,a]})}function K5(t){return oJ(t)}function sJ(t){if(t.length<=2)return K5(t);var n=[];$(t,function(o){Ne(o,n.slice(n.length-2))||n.push(o[0],o[1])});var e=aJ(n,!1),r=zr(t),i=r[0],a=r[1];return e.unshift(["M",i,a]),e}function lJ(t,n,e,r){r===void 0&&(r=!0);var i=new x0({values:t}),a=new y0({values:Ae(t,function(s,l){return l})}),o=Ae(t,function(s,l){return[a.scale(l)*n,e-i.scale(s)*e]});return r?sJ(o):K5(o)}function cJ(t,n){var e=new x0({values:t}),r=e.max<0?e.max:Math.max(0,e.min);return n-e.scale(r)*n}function uJ(t,n,e,r){var i=rl(t),a=cJ(r,e);return i.push(["L",n,a]),i.push(["L",0,a]),i.push(["Z"]),i}var fJ=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return E(E({},e),{name:"trend",x:0,y:0,width:200,height:16,smooth:!0,isArea:!1,data:[],backgroundStyle:eJ,lineStyle:nJ,areaStyle:rJ})},n.prototype.renderInner=function(e){var r=this.cfg,i=r.width,a=r.height,o=r.data,s=r.smooth,l=r.isArea,c=r.backgroundStyle,u=r.lineStyle,f=r.areaStyle;this.addShape(e,{id:this.getElementId("background"),type:"rect",attrs:E({x:0,y:0,width:i,height:a},c)});var h=lJ(o,i,a,s);if(this.addShape(e,{id:this.getElementId("line"),type:"path",attrs:E({path:h},u)}),l){var d=uJ(h,i,a,o);this.addShape(e,{id:this.getElementId("area"),type:"path",attrs:E({path:d},f)})}},n.prototype.applyOffset=function(){var e=this.cfg,r=e.x,i=e.y;this.moveElementTo(this.get("group"),{x:r,y:i})},n}(jn),Q5={fill:"#F7F7F7",stroke:"#BFBFBF",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#FFF"},vC=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return E(E({},e),{name:"handler",x:0,y:0,width:10,height:24,style:Q5})},n.prototype.renderInner=function(e){var r=this.cfg,i=r.width,a=r.height,o=r.style,s=o.fill,l=o.stroke,c=o.radius,u=o.opacity,f=o.cursor;this.addShape(e,{type:"rect",id:this.getElementId("background"),attrs:{x:0,y:0,width:i,height:a,fill:s,stroke:l,radius:c,opacity:u,cursor:f}});var h=1/3*i,d=2/3*i,p=1/4*a,v=3/4*a;this.addShape(e,{id:this.getElementId("line-left"),type:"line",attrs:{x1:h,y1:p,x2:h,y2:v,stroke:l,cursor:f}}),this.addShape(e,{id:this.getElementId("line-right"),type:"line",attrs:{x1:d,y1:p,x2:d,y2:v,stroke:l,cursor:f}})},n.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},n.prototype.initEvent=function(){this.bindEvents()},n.prototype.bindEvents=function(){var e=this;this.get("group").on("mouseenter",function(){var r=e.get("style").highLightFill;e.getElementByLocalId("background").attr("fill",r),e.draw()}),this.get("group").on("mouseleave",function(){var r=e.get("style").fill;e.getElementByLocalId("background").attr("fill",r),e.draw()})},n.prototype.draw=function(){var e=this.get("container").get("canvas");e&&e.draw()},n}(jn),hJ={fill:"#416180",opacity:.05},dJ={fill:"#5B8FF9",opacity:.15,cursor:"move"},Dv=10,pJ={width:Dv,height:24},vJ={textBaseline:"middle",fill:"#000",opacity:.45},gJ="sliderchange",yJ=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.onMouseDown=function(r){return function(i){e.currentTarget=r;var a=i.originalEvent;a.stopPropagation(),a.preventDefault(),e.prevX=z(a,"touches.0.pageX",a.pageX),e.prevY=z(a,"touches.0.pageY",a.pageY);var o=e.getContainerDOM();o.addEventListener("mousemove",e.onMouseMove),o.addEventListener("mouseup",e.onMouseUp),o.addEventListener("mouseleave",e.onMouseUp),o.addEventListener("touchmove",e.onMouseMove),o.addEventListener("touchend",e.onMouseUp),o.addEventListener("touchcancel",e.onMouseUp)}},e.onMouseMove=function(r){var i=e.cfg.width,a=[e.get("start"),e.get("end")];r.stopPropagation(),r.preventDefault();var o=z(r,"touches.0.pageX",r.pageX),s=z(r,"touches.0.pageY",r.pageY),l=o-e.prevX,c=e.adjustOffsetRange(l/i);e.updateStartEnd(c),e.updateUI(e.getElementByLocalId("foreground"),e.getElementByLocalId("minText"),e.getElementByLocalId("maxText")),e.prevX=o,e.prevY=s,e.draw(),e.emit(gJ,[e.get("start"),e.get("end")].sort()),e.delegateEmit("valuechanged",{originValue:a,value:[e.get("start"),e.get("end")]})},e.onMouseUp=function(){e.currentTarget&&(e.currentTarget=void 0);var r=e.getContainerDOM();r&&(r.removeEventListener("mousemove",e.onMouseMove),r.removeEventListener("mouseup",e.onMouseUp),r.removeEventListener("mouseleave",e.onMouseUp),r.removeEventListener("touchmove",e.onMouseMove),r.removeEventListener("touchend",e.onMouseUp),r.removeEventListener("touchcancel",e.onMouseUp))},e}return n.prototype.setRange=function(e,r){this.set("minLimit",e),this.set("maxLimit",r);var i=this.get("start"),a=this.get("end"),o=we(i,e,r),s=we(a,e,r);!this.get("isInit")&&(i!==o||a!==s)&&this.setValue([o,s])},n.prototype.getRange=function(){return{min:this.get("minLimit")||0,max:this.get("maxLimit")||1}},n.prototype.setValue=function(e){var r=this.getRange();if(et(e)&&e.length===2){var i=[this.get("start"),this.get("end")];this.update({start:we(e[0],r.min,r.max),end:we(e[1],r.min,r.max)}),this.get("updateAutoRender")||this.render(),this.delegateEmit("valuechanged",{originValue:i,value:e})}},n.prototype.getValue=function(){return[this.get("start"),this.get("end")]},n.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return E(E({},e),{name:"slider",x:0,y:0,width:100,height:16,backgroundStyle:{},foregroundStyle:{},handlerStyle:{},textStyle:{},defaultCfg:{backgroundStyle:hJ,foregroundStyle:dJ,handlerStyle:pJ,textStyle:vJ}})},n.prototype.update=function(e){var r=e.start,i=e.end,a=E({},e);J(r)||(a.start=we(r,0,1)),J(i)||(a.end=we(i,0,1)),t.prototype.update.call(this,a),this.minHandler=this.getChildComponentById(this.getElementId("minHandler")),this.maxHandler=this.getChildComponentById(this.getElementId("maxHandler")),this.trend=this.getChildComponentById(this.getElementId("trend"))},n.prototype.init=function(){this.set("start",we(this.get("start"),0,1)),this.set("end",we(this.get("end"),0,1)),t.prototype.init.call(this)},n.prototype.render=function(){t.prototype.render.call(this),this.updateUI(this.getElementByLocalId("foreground"),this.getElementByLocalId("minText"),this.getElementByLocalId("maxText"))},n.prototype.renderInner=function(e){var r=this.cfg;r.start,r.end;var i=r.width,a=r.height,o=r.trendCfg,s=o===void 0?{}:o,l=r.minText,c=r.maxText,u=r.backgroundStyle,f=u===void 0?{}:u,h=r.foregroundStyle,d=h===void 0?{}:h,p=r.textStyle,v=p===void 0?{}:p,g=ot({},Q5,this.cfg.handlerStyle);mn(z(s,"data"))&&(this.trend=this.addComponent(e,E({component:fJ,id:this.getElementId("trend"),x:0,y:0,width:i,height:a},s))),this.addShape(e,{id:this.getElementId("background"),type:"rect",attrs:E({x:0,y:0,width:i,height:a},f)}),this.addShape(e,{id:this.getElementId("minText"),type:"text",attrs:E({y:a/2,textAlign:"right",text:l,silent:!1},v)}),this.addShape(e,{id:this.getElementId("maxText"),type:"text",attrs:E({y:a/2,textAlign:"left",text:c,silent:!1},v)}),this.addShape(e,{id:this.getElementId("foreground"),name:"foreground",type:"rect",attrs:E({y:0,height:a},d)});var y=z(g,"width",Dv),m=z(g,"height",24);this.minHandler=this.addComponent(e,{component:vC,id:this.getElementId("minHandler"),name:"handler-min",x:0,y:(a-m)/2,width:y,height:m,cursor:"ew-resize",style:g}),this.maxHandler=this.addComponent(e,{component:vC,id:this.getElementId("maxHandler"),name:"handler-max",x:0,y:(a-m)/2,width:y,height:m,cursor:"ew-resize",style:g})},n.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},n.prototype.initEvent=function(){this.bindEvents()},n.prototype.updateUI=function(e,r,i){var a=this.cfg,o=a.start,s=a.end,l=a.width,c=a.minText,u=a.maxText,f=a.handlerStyle,h=a.height,d=o*l,p=s*l;this.trend&&(this.trend.update({width:l,height:h}),this.get("updateAutoRender")||this.trend.render()),e.attr("x",d),e.attr("width",p-d);var v=z(f,"width",Dv);r.attr("text",c),i.attr("text",u);var g=this._dodgeText([d,p],r,i),y=g[0],m=g[1];this.minHandler&&(this.minHandler.update({x:d-v/2}),this.get("updateAutoRender")||this.minHandler.render()),$(y,function(x,b){return r.attr(b,x)}),this.maxHandler&&(this.maxHandler.update({x:p-v/2}),this.get("updateAutoRender")||this.maxHandler.render()),$(m,function(x,b){return i.attr(b,x)})},n.prototype.bindEvents=function(){var e=this.get("group");e.on("handler-min:mousedown",this.onMouseDown("minHandler")),e.on("handler-min:touchstart",this.onMouseDown("minHandler")),e.on("handler-max:mousedown",this.onMouseDown("maxHandler")),e.on("handler-max:touchstart",this.onMouseDown("maxHandler"));var r=e.findById(this.getElementId("foreground"));r.on("mousedown",this.onMouseDown("foreground")),r.on("touchstart",this.onMouseDown("foreground"))},n.prototype.adjustOffsetRange=function(e){var r=this.cfg,i=r.start,a=r.end;switch(this.currentTarget){case"minHandler":{var o=0-i,s=1-i;return Math.min(s,Math.max(o,e))}case"maxHandler":{var o=0-a,s=1-a;return Math.min(s,Math.max(o,e))}case"foreground":{var o=0-i,s=1-a;return Math.min(s,Math.max(o,e))}}},n.prototype.updateStartEnd=function(e){var r=this.cfg,i=r.start,a=r.end;switch(this.currentTarget){case"minHandler":i+=e;break;case"maxHandler":a+=e;break;case"foreground":i+=e,a+=e;break}this.set("start",i),this.set("end",a)},n.prototype._dodgeText=function(e,r,i){var a,o,s=this.cfg,l=s.handlerStyle,c=s.width,u=2,f=z(l,"width",Dv),h=e[0],d=e[1],p=!1;h>d&&(a=[d,h],h=a[0],d=a[1],o=[i,r],r=o[0],i=o[1],p=!0);var v=r.getBBox(),g=i.getBBox(),y=v.width>h-u?{x:h+f/2+u,textAlign:"left"}:{x:h-f/2-u,textAlign:"right"},m=g.width>c-d-u?{x:d-f/2-u,textAlign:"right"}:{x:d+f/2+u,textAlign:"left"};return p?[m,y]:[y,m]},n.prototype.draw=function(){var e=this.get("container"),r=e&&e.get("canvas");r&&r.draw()},n.prototype.getContainerDOM=function(){var e=this.get("container"),r=e&&e.get("canvas");return r&&r.get("container")},n}(jn),mJ={trackColor:"rgba(0,0,0,0)",thumbColor:"rgba(0,0,0,0.15)",size:8,lineCap:"round"},E1={default:mJ,hover:{thumbColor:"rgba(0,0,0,0.2)"}},xJ=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.clearEvents=Co,e.onStartEvent=function(r){return function(i){e.isMobile=r,i.originalEvent.preventDefault();var a=r?z(i.originalEvent,"touches.0.clientX"):i.clientX,o=r?z(i.originalEvent,"touches.0.clientY"):i.clientY;e.startPos=e.cfg.isHorizontal?a:o,e.bindLaterEvent()}},e.bindLaterEvent=function(){var r=e.getContainerDOM(),i=[];e.isMobile?i=[Gl(r,"touchmove",e.onMouseMove),Gl(r,"touchend",e.onMouseUp),Gl(r,"touchcancel",e.onMouseUp)]:i=[Gl(r,"mousemove",e.onMouseMove),Gl(r,"mouseup",e.onMouseUp),Gl(r,"mouseleave",e.onMouseUp)],e.clearEvents=function(){i.forEach(function(a){a.remove()})}},e.onMouseMove=function(r){var i=e.cfg,a=i.isHorizontal,o=i.thumbOffset;r.preventDefault();var s=e.isMobile?z(r,"touches.0.clientX"):r.clientX,l=e.isMobile?z(r,"touches.0.clientY"):r.clientY,c=a?s:l,u=c-e.startPos;e.startPos=c,e.updateThumbOffset(o+u)},e.onMouseUp=function(r){r.preventDefault(),e.clearEvents()},e.onTrackClick=function(r){var i=e.cfg,a=i.isHorizontal,o=i.x,s=i.y,l=i.thumbLen,c=e.getContainerDOM(),u=c.getBoundingClientRect(),f=r.clientX,h=r.clientY,d=a?f-u.left-o-l/2:h-u.top-s-l/2,p=e.validateRange(d);e.updateThumbOffset(p)},e.onThumbMouseOver=function(){var r=e.cfg.theme.hover.thumbColor;e.getElementByLocalId("thumb").attr("stroke",r),e.draw()},e.onThumbMouseOut=function(){var r=e.cfg.theme.default.thumbColor;e.getElementByLocalId("thumb").attr("stroke",r),e.draw()},e}return n.prototype.setRange=function(e,r){this.set("minLimit",e),this.set("maxLimit",r);var i=this.getValue(),a=we(i,e,r);i!==a&&!this.get("isInit")&&this.setValue(a)},n.prototype.getRange=function(){var e=this.get("minLimit")||0,r=this.get("maxLimit")||1;return{min:e,max:r}},n.prototype.setValue=function(e){var r=this.getRange(),i=this.getValue();this.update({thumbOffset:(this.get("trackLen")-this.get("thumbLen"))*we(e,r.min,r.max)}),this.delegateEmit("valuechange",{originalValue:i,value:this.getValue()})},n.prototype.getValue=function(){return we(this.get("thumbOffset")/(this.get("trackLen")-this.get("thumbLen")),0,1)},n.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return E(E({},e),{name:"scrollbar",isHorizontal:!0,minThumbLen:20,thumbOffset:0,theme:E1})},n.prototype.renderInner=function(e){this.renderTrackShape(e),this.renderThumbShape(e)},n.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},n.prototype.initEvent=function(){this.bindEvents()},n.prototype.renderTrackShape=function(e){var r=this.cfg,i=r.trackLen,a=r.theme,o=a===void 0?{default:{}}:a,s=ot({},E1,o).default,l=s.lineCap,c=s.trackColor,u=s.size,f=z(this.cfg,"size",u),h=this.get("isHorizontal")?{x1:0+f/2,y1:f/2,x2:i-f/2,y2:f/2,lineWidth:f,stroke:c,lineCap:l}:{x1:f/2,y1:0+f/2,x2:f/2,y2:i-f/2,lineWidth:f,stroke:c,lineCap:l};return this.addShape(e,{id:this.getElementId("track"),name:"track",type:"line",attrs:h})},n.prototype.renderThumbShape=function(e){var r=this.cfg,i=r.thumbOffset,a=r.thumbLen,o=r.theme,s=ot({},E1,o).default,l=s.size,c=s.lineCap,u=s.thumbColor,f=z(this.cfg,"size",l),h=this.get("isHorizontal")?{x1:i+f/2,y1:f/2,x2:i+a-f/2,y2:f/2,lineWidth:f,stroke:u,lineCap:c,cursor:"default"}:{x1:f/2,y1:i+f/2,x2:f/2,y2:i+a-f/2,lineWidth:f,stroke:u,lineCap:c,cursor:"default"};return this.addShape(e,{id:this.getElementId("thumb"),name:"thumb",type:"line",attrs:h})},n.prototype.bindEvents=function(){var e=this.get("group");e.on("mousedown",this.onStartEvent(!1)),e.on("mouseup",this.onMouseUp),e.on("touchstart",this.onStartEvent(!0)),e.on("touchend",this.onMouseUp);var r=e.findById(this.getElementId("track"));r.on("click",this.onTrackClick);var i=e.findById(this.getElementId("thumb"));i.on("mouseover",this.onThumbMouseOver),i.on("mouseout",this.onThumbMouseOut)},n.prototype.getContainerDOM=function(){var e=this.get("container"),r=e&&e.get("canvas");return r&&r.get("container")},n.prototype.validateRange=function(e){var r=this.cfg,i=r.thumbLen,a=r.trackLen,o=e;return e+i>a?o=a-i:e+i<i&&(o=0),o},n.prototype.draw=function(){var e=this.get("container"),r=e&&e.get("canvas");r&&r.draw()},n.prototype.updateThumbOffset=function(e){var r=this.cfg,i=r.thumbOffset,a=r.isHorizontal,o=r.thumbLen,s=r.size,l=this.validateRange(e);if(l!==i){var c=this.getElementByLocalId("thumb");a?c.attr({x1:l+s/2,x2:l+o-s/2}):c.attr({y1:l+s/2,y2:l+o-s/2}),this.emitOffsetChange(l)}},n.prototype.emitOffsetChange=function(e){var r=this.cfg,i=r.thumbOffset,a=r.trackLen,o=r.thumbLen;this.cfg.thumbOffset=e,this.emit("scrollchange",{thumbOffset:e,ratio:we(e/(a-o),0,1)}),this.delegateEmit("valuechange",{originalValue:i,value:e})},n}(jn),bJ=BQ,wJ=NQ,SJ=WQ,OJ=YQ,gC=VQ,MJ=XQ,E0=tJ;function AJ(t){if(Mr(t))return null;var n=t[0].x,e=t[0].x,r=t[0].y,i=t[0].y;return $(t,function(a){n=n>a.x?a.x:n,e=e<a.x?a.x:e,r=r>a.y?a.y:r,i=i<a.y?a.y:i}),{minX:n,maxX:e,minY:r,maxY:i,centerX:(n+e)/2,centerY:(r+i)/2}}function yC(t){return Array.from(new Set(t)).length===1}function mC(t){return(hi(t)+Vr(t))/2}function tn(t,n,e,r){return{x:t+e*Math.cos(r),y:n+e*Math.sin(r)}}function $o(t,n,e,r,i,a){a===void 0&&(a=0);var o=tn(t,n,e,r),s=tn(t,n,e,i),l=tn(t,n,a,r),c=tn(t,n,a,i);if(i-r===Math.PI*2){var u=tn(t,n,e,r+Math.PI),f=tn(t,n,a,r+Math.PI),h=[["M",o.x,o.y],["A",e,e,0,1,1,u.x,u.y],["A",e,e,0,1,1,s.x,s.y],["M",l.x,l.y]];return a&&(h.push(["A",a,a,0,1,0,f.x,f.y]),h.push(["A",a,a,0,1,0,c.x,c.y])),h.push(["M",o.x,o.y]),h.push(["Z"]),h}var d=i-r<=Math.PI?0:1,p=[["M",o.x,o.y],["A",e,e,0,d,1,s.x,s.y],["L",c.x,c.y]];return a&&p.push(["A",a,a,0,d,0,l.x,l.y]),p.push(["L",o.x,o.y]),p.push(["Z"]),p}function J5(t,n,e,r,i){var a=tn(t,n,e,r),o=tn(t,n,e,i);if(Cn(i-r,Math.PI*2)){var s=tn(t,n,e,r+Math.PI);return[["M",a.x,a.y],["A",e,e,0,1,1,s.x,s.y],["A",e,e,0,1,1,a.x,a.y],["A",e,e,0,1,0,s.x,s.y],["A",e,e,0,1,0,a.x,a.y],["Z"]]}var l=i-r<=Math.PI?0:1;return[["M",a.x,a.y],["A",e,e,0,l,1,o.x,o.y]]}function wh(t,n){var e=t.points,r=AJ(e),i,a,o=n.startAngle,s=n.endAngle,l=s-o;return n.isTransposed?(i=r.maxY*l,a=r.minY*l):(i=r.maxX*l,a=r.minX*l),i+=o,a+=o,{startAngle:a,endAngle:i}}function EJ(t,n){if(bt(t)&&bt(n))return[t,n];if(t=t,n=n,yC(t)||yC(n))return[mC(t),mC(n)];for(var e=-1,r=0,i=0,a,o=t.length-1,s,l=0;++e<t.length;)a=o,o=e,l+=s=t[a]*n[o]-t[o]*n[a],r+=(t[a]+t[o])*s,i+=(n[a]+n[o])*s;return l*=3,[r/l,i/l]}function tB(t,n){var e=t.attr(),r=n.attr();return $(e,function(i,a){r[a]===void 0&&(r[a]=void 0)}),r}function hc(t,n,e){var r=Math.min(n,e),i=Math.max(n,e);return t>=r&&t<=i}function TJ(t,n,e){if(pt(t))return t.padEnd(n,e);if(et(t)){var r=t.length;if(r<n)for(var i=n-r,a=0;a<i;a++)t.push(e)}return t}function mr(t,n){return typeof t=="object"&&n.forEach(function(e){delete t[e]}),t}function Oo(t,n,e){var r,i;n===void 0&&(n=[]),e===void 0&&(e=new Map);try{for(var a=Ct(t),o=a.next();!o.done;o=a.next()){var s=o.value;e.has(s)||(n.push(s),e.set(s,!0))}}catch(l){r={error:l}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return n}var ar=function(){function t(n,e,r,i){n===void 0&&(n=0),e===void 0&&(e=0),r===void 0&&(r=0),i===void 0&&(i=0),this.x=n,this.y=e,this.height=i,this.width=r}return t.fromRange=function(n,e,r,i){return new t(n,e,r-n,i-e)},t.fromObject=function(n){return new t(n.minX,n.minY,n.width,n.height)},Object.defineProperty(t.prototype,"minX",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxX",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minY",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxY",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tl",{get:function(){return{x:this.x,y:this.y}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tr",{get:function(){return{x:this.maxX,y:this.y}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bl",{get:function(){return{x:this.x,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"br",{get:function(){return{x:this.maxX,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return{x:this.x+this.width/2,y:this.minY}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return{x:this.maxX,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return{x:this.x+this.width/2,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){return{x:this.minX,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(n){return this.x===n.x&&this.y===n.y&&this.width===n.width&&this.height===n.height},t.prototype.contains=function(n){return n.minX>=this.minX&&n.maxX<=this.maxX&&n.minY>=this.minY&&n.maxY<=this.maxY},t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.add=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var r=this.clone();return $(n,function(i){r.x=Math.min(i.x,r.x),r.y=Math.min(i.y,r.y),r.width=Math.max(i.maxX,r.maxX)-r.x,r.height=Math.max(i.maxY,r.maxY)-r.y}),r},t.prototype.merge=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var r=this.clone();return $(n,function(i){r.x=Math.max(i.x,r.x),r.y=Math.max(i.y,r.y),r.width=Math.min(i.maxX,r.maxX)-r.x,r.height=Math.min(i.maxY,r.maxY)-r.y}),r},t.prototype.cut=function(n,e){var r=n.width,i=n.height;switch(e){case at.TOP:case at.TOP_LEFT:case at.TOP_RIGHT:return t.fromRange(this.minX,this.minY+i,this.maxX,this.maxY);case at.RIGHT:case at.RIGHT_TOP:case at.RIGHT_BOTTOM:return t.fromRange(this.minX,this.minY,this.maxX-r,this.maxY);case at.BOTTOM:case at.BOTTOM_LEFT:case at.BOTTOM_RIGHT:return t.fromRange(this.minX,this.minY,this.maxX,this.maxY-i);case at.LEFT:case at.LEFT_TOP:case at.LEFT_BOTTOM:return t.fromRange(this.minX+r,this.minY,this.maxX,this.maxY);default:return this}},t.prototype.shrink=function(n){var e=R(n,4),r=e[0],i=e[1],a=e[2],o=e[3];return new t(this.x+o,this.y+r,this.width-o-i,this.height-r-a)},t.prototype.expand=function(n){var e=R(n,4),r=e[0],i=e[1],a=e[2],o=e[3];return new t(this.x-o,this.y-r,this.width+o+i,this.height+r+a)},t.prototype.exceed=function(n){return[Math.max(-this.minY+n.minY,0),Math.max(this.maxX-n.maxX,0),Math.max(this.maxY-n.maxY,0),Math.max(-this.minX+n.minX,0)]},t.prototype.collide=function(n){return this.minX<n.maxX&&this.maxX>n.minX&&this.minY<n.maxY&&this.maxY>n.minY},t.prototype.size=function(){return this.width*this.height},t.prototype.isPointIn=function(n){return n.x>=this.minX&&n.x<=this.maxX&&n.y>=this.minY&&n.y<=this.maxY},t}();function CJ(t){return[[t.minX,t.minY],[t.maxX,t.minY],[t.maxX,t.maxY],[t.minX,t.maxY]]}function xd(t){if(t.isPolar&&!t.isTransposed)return(t.endAngle-t.startAngle)*t.getRadius();var n=t.convert({x:0,y:0}),e=t.convert({x:1,y:0});return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function PJ(t){if(t.isPolar){var n=t.startAngle,e=t.endAngle;return e-n===Math.PI*2}return!1}function T0(t,n){var e=t.getCenter();return Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2))}function kJ(t,n){var e=!1;if(t)if(t.type==="theta"){var r=t.start,i=t.end;e=hc(n.x,r.x,i.x)&&hc(n.y,r.y,i.y)}else{var a=t.invert(n);e=hc(a.x,0,1)&&hc(a.y,0,1)}return e}function Yc(t,n){var e=t.getCenter();return Math.atan2(n.y-e.y,n.x-e.x)}function $S(t,n){n===void 0&&(n=0);var e=t.start,r=t.end,i=t.getWidth(),a=t.getHeight();if(t.isPolar){var o=t.startAngle,s=t.endAngle,l=t.getCenter(),c=t.getRadius();return{type:"path",startState:{path:$o(l.x,l.y,c+n,o,o)},endState:function(f){var h=(s-o)*f+o,d=$o(l.x,l.y,c+n,o,h);return{path:d}},attrs:{path:$o(l.x,l.y,c+n,o,s)}}}var u;return t.isTransposed?u={height:a+n*2}:u={width:i+n*2},{type:"rect",startState:{x:e.x-n,y:r.y-n,width:t.isTransposed?i+n*2:0,height:t.isTransposed?0:a+n*2},endState:u,attrs:{x:e.x-n,y:r.y-n,width:i+n*2,height:a+n*2}}}function _J(t,n){n===void 0&&(n=0);var e=t.start,r=t.end,i=t.getWidth(),a=t.getHeight(),o=Math.min(e.x,r.x),s=Math.min(e.y,r.y);return ar.fromRange(o-n,s-n,o+i+n,s+a+n)}var LJ=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]+)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/;function IJ(t){var n="linear";return LJ.test(t)?n="timeCat":pt(t)&&(n="cat"),n}function eB(t,n,e,r){return n===void 0&&(n={}),n.type?n.type:t.type!=="identity"&&sc.includes(e)&&["interval"].includes(r)||t.isCategory?"cat":t.type}function FJ(t,n,e){var r=n||[];if(bt(t)||J(zH(r,t))&&Mr(e)){var i=Lb("identity");return new i({field:t.toString(),values:[t]})}var a=Ni(r,t),o=z(e,"type",IJ(a[0])),s=Lb(o);return new s(E({field:t,values:a},e))}function DJ(t,n){if(t.type!=="identity"&&n.type!=="identity"){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);t.change(e)}}function Sh(t){return t.alias||t.field}function nB(t,n,e){var r=t.values,i=r.length,a;if(i===1)a=[.5,1];else{var o=1,s=0;PJ(n)?n.isTransposed?(o=z(e,"widthRatio.multiplePie",1/1.3),s=1/i*o,a=[s/2,1-s/2]):a=[0,1-1/i]:(s=1/i/2,a=[s,1-s])}return a}function RJ(t){var n=t.values.filter(function(e){return!J(e)&&!isNaN(e)});return Math.max.apply(Math,X(X([],R(n),!1),[J(t.max)?-1/0:t.max],!1))}function BJ(t){var n,e;switch(t){case at.TOP:n={x:0,y:1},e={x:1,y:1};break;case at.RIGHT:n={x:1,y:0},e={x:1,y:1};break;case at.BOTTOM:n={x:0,y:0},e={x:1,y:0};break;case at.LEFT:n={x:0,y:0},e={x:0,y:1};break;default:n=e={x:0,y:0}}return{start:n,end:e}}function NJ(t){var n,e;return t.isTransposed?(n={x:0,y:0},e={x:1,y:0}):(n={x:0,y:0},e={x:0,y:1}),{start:n,end:e}}function xp(t,n){var e={start:{x:0,y:0},end:{x:0,y:0}};t.isRect?e=BJ(n):t.isPolar&&(e=NJ(t));var r=e.start,i=e.end;return{start:t.convert(r),end:t.convert(i)}}function rB(t){var n=t.start,e=t.end;return n.x===e.x}function xC(t,n){var e=t.start,r=t.end,i=rB(t);return i?(e.y-r.y)*(n.x-e.x)>0?1:-1:(r.x-e.x)*(e.y-n.y)>0?-1:1}function bp(t,n){var e=z(t,["components","axis"],{});return ot({},z(e,["common"],{}),ot({},z(e,[n],{})))}function bC(t,n,e){var r=z(t,["components","axis"],{});return ot({},z(r,["common","title"],{}),ot({},z(r,[n,"title"],{})),e)}function T1(t){var n=t.x,e=t.y,r=t.circleCenter,i=e.start>e.end,a=t.isTransposed?t.convert({x:i?0:1,y:0}):t.convert({x:0,y:i?0:1}),o=[a.x-r.x,a.y-r.y],s=[1,0],l=a.y>r.y?bb(o,s):bb(o,s)*-1,c=l+(n.end-n.start),u=Math.sqrt(Math.pow(a.x-r.x,2)+Math.pow(a.y-r.y,2));return{center:r,radius:u,startAngle:l,endAngle:c}}function Og(t,n){return Dc(t)?t===!1?!1:{}:z(t,[n])}function wC(t,n){return z(t,"position",n)}function SC(t,n){return z(n,["title","text"],Sh(t))}var Pu=function(){function t(n,e){this.destroyed=!1,this.facets=[],this.view=n,this.cfg=ot({},this.getDefaultCfg(),e)}return t.prototype.init=function(){this.container||(this.container=this.createContainer());var n=this.view.getData();this.facets=this.generateFacets(n)},t.prototype.render=function(){this.renderViews()},t.prototype.update=function(){},t.prototype.clear=function(){this.clearFacetViews()},t.prototype.destroy=function(){this.clear(),this.container&&(this.container.remove(!0),this.container=void 0),this.destroyed=!0,this.view=void 0,this.facets=[]},t.prototype.facetToView=function(n){var e=n.region,r=n.data,i=n.padding,a=i===void 0?this.cfg.padding:i,o=this.view.createView({region:e,padding:a});o.data(r||[]),n.view=o,this.beforeEachView(o,n);var s=this.cfg.eachView;return s&&s(o,n),this.afterEachView(o,n),o},t.prototype.createContainer=function(){var n=this.view.getLayer(qe.FORE);return n.addGroup()},t.prototype.renderViews=function(){this.createFacetViews()},t.prototype.createFacetViews=function(){var n=this;return this.facets.map(function(e){return n.facetToView(e)})},t.prototype.clearFacetViews=function(){var n=this;$(this.facets,function(e){e.view&&(n.view.removeView(e.view),e.view=void 0)})},t.prototype.parseSpacing=function(){var n=this.view.viewBBox,e=n.width,r=n.height,i=this.cfg.spacing;return i.map(function(a,o){return bt(a)?a/(o===0?e:r):parseFloat(a)/100})},t.prototype.getFieldValues=function(n,e){var r=[],i={};return $(n,function(a){var o=a[e];!J(o)&&!i[o]&&(r.push(o),i[o]=!0)}),r},t.prototype.getRegion=function(n,e,r,i){var a=R(this.parseSpacing(),2),o=a[0],s=a[1],l=(1+o)/(e===0?1:e)-o,c=(1+s)/(n===0?1:n)-s,u={x:(l+o)*r,y:(c+s)*i},f={x:u.x+l,y:u.y+c};return{start:u,end:f}},t.prototype.getDefaultCfg=function(){return{eachView:void 0,showTitle:!0,spacing:[0,0],padding:10,fields:[]}},t.prototype.getDefaultTitleCfg=function(){var n=this.view.getTheme().fontFamily;return{style:{fontSize:14,fill:"#666",fontFamily:n}}},t.prototype.processAxis=function(n,e){var r=n.getOptions(),i=r.coordinate,a=n.geometries,o=z(i,"type","rect");if(o==="rect"&&a.length){J(r.axes)&&(r.axes={});var s=r.axes,l=R(a[0].getXYFields(),2),c=l[0],u=l[1],f=Og(s,c),h=Og(s,u);f!==!1&&(r.axes[c]=this.getXAxisOption(c,s,f,e)),h!==!1&&(r.axes[u]=this.getYAxisOption(u,s,h,e))}},t.prototype.getFacetDataFilter=function(n){return function(e){return rS(n,function(r){var i=r.field,a=r.value;return!J(a)&&i?e[i]===a:!0})}},t}(),iB={},$J=function(t){return iB[Ou(t)]},ku=function(t,n){iB[Ou(t)]=n},be=function(){function t(n,e){this.context=n,this.cfg=e,n.addAction(this)}return t.prototype.applyCfg=function(n){Jt(this,n)},t.prototype.init=function(){this.applyCfg(this.cfg)},t.prototype.destroy=function(){this.context.removeAction(this),this.context=null},t}(),jJ=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.execute=function(){this.callback&&this.callback(this.context)},n.prototype.destroy=function(){t.prototype.destroy.call(this),this.callback=null},n}(be),jS={};function zJ(t,n){var e=jS[t],r=null;if(e){var i=e.ActionClass,a=e.cfg;r=new i(n,a),r.name=t,r.init()}return r}function C0(t){var n=jS[t];return z(n,"ActionClass")}function ht(t,n,e){jS[t]={ActionClass:n,cfg:e}}function GJ(t,n){var e=new jJ(n);return e.callback=t,e.name="callback",e}function YJ(t,n){var e=[];if(t.length){e.push(["M",t[0].x,t[0].y]);for(var r=1,i=t.length;r<i;r+=1){var a=t[r];e.push(["L",a.x,a.y])}n&&e.push(["Z"])}return e}function Nb(t,n){for(var e=[t[0]],r=1,i=t.length;r<i;r=r+2){var a=n.convert({x:t[r],y:t[r+1]});e.push(a.x,a.y)}return e}function aB(t,n){var e=n.isTransposed,r=t[1],i=t[6],a=t[7],o=n.convert({x:i,y:a}),s=e?0:1;return["A",r,r,0,0,s,o.x,o.y]}function WJ(t,n,e){var r=e.isTransposed,i=e.startAngle,a=e.endAngle,o=t[0].toLowerCase()==="a"?{x:t[6],y:t[7]}:{x:t[1],y:t[2]},s={x:n[1],y:n[2]},l=[],c=r?"y":"x",u=Math.abs(s[c]-o[c])*(a-i),f=s[c]>=o[c]?1:0,h=u>Math.PI?1:0,d=e.convert(s),p=T0(e,d);if(p>=.5)if(u===Math.PI*2){var v={x:(s.x+o.x)/2,y:(s.y+o.y)/2},g=e.convert(v);l.push(["A",p,p,0,h,f,g.x,g.y]),l.push(["A",p,p,0,h,f,d.x,d.y])}else l.push(["A",p,p,0,h,f,d.x,d.y]);return l}function VJ(t){$(t,function(n,e){var r=n;if(r[0].toLowerCase()==="a"){var i=t[e-1],a=t[e+1];a&&a[0].toLowerCase()==="a"?i&&i[0].toLowerCase()==="l"&&(i[0]="M"):i&&i[0].toLowerCase()==="a"&&a&&a[0].toLowerCase()==="l"&&(a[0]="M")}})}var HJ=function(t,n,e,r){var i,a=[],o=!!r,s,l,c,u,f,h,d;if(o){i=R(r,2),c=i[0],u=i[1];for(var p=0,v=t.length;p<v;p++){var g=t[p];c=An([0,0],c,g),u=En([0,0],u,g)}}for(var p=0,y=t.length;p<y;p++){var g=t[p];if(p===0&&!e)d=g;else if(p===y-1&&!e)h=g,a.push(d),a.push(h);else{s=t[e?p?p-1:y-1:p-1],l=t[e?(p+1)%y:p+1];var m=[0,0];m=Xs(m,l,s),m=nr(m,m,n);var x=Nc(g,s),b=Nc(g,l),w=x+b;w!==0&&(x/=w,b/=w);var S=nr([0,0],m,-x),O=nr([0,0],m,b);h=na([0,0],g,S),f=na([0,0],g,O),f=An([0,0],f,En([0,0],l,g)),f=En([0,0],f,An([0,0],l,g)),S=Xs([0,0],f,g),S=nr([0,0],S,-x/b),h=na([0,0],g,S),h=An([0,0],h,En([0,0],s,g)),h=En([0,0],h,An([0,0],s,g)),O=Xs([0,0],g,h),O=nr([0,0],O,b/x),f=na([0,0],g,O),o&&(h=En([0,0],h,c),h=An([0,0],h,u),f=En([0,0],f,c),f=An([0,0],f,u)),a.push(d),a.push(h),d=f}}return e&&a.push(a.shift()),a};function oB(t,n,e){for(var r=!!n,i=[],a=0,o=t.length;a<o;a+=2)i.push([t[a],t[a+1]]);for(var s=HJ(i,.4,r,e),l=i.length,c=[],u,f,h,a=0;a<l-1;a++)u=s[a*2],f=s[a*2+1],h=i[a+1],c.push(["C",u[0],u[1],f[0],f[1],h[0],h[1]]);return r&&(u=s[l],f=s[l+1],h=i[0],c.push(["C",u[0],u[1],f[0],f[1],h[0],h[1]])),c}function bd(t,n){return YJ(t,n)}function Mg(t,n,e){var r=[],i=t[0],a=null;if(t.length<=2)return bd(t,n);for(var o=0,s=t.length;o<s;o++){var l=t[o];(!a||!(a.x===l.x&&a.y===l.y))&&(r.push(l.x),r.push(l.y),a=l)}var c=e||[[0,0],[1,1]],u=oB(r,n,c);return u.unshift(["M",i.x,i.y]),u}function XJ(t,n){var e=[];return $(n,function(r){var i=r[0];switch(i.toLowerCase()){case"m":case"l":case"c":e.push(Nb(r,t));break;case"a":e.push(aB(r,t));break;case"z":default:e.push(r);break}}),e}function UJ(t,n){var e=[],r,i,a,o;return $(n,function(s,l){var c=s[0];switch(c.toLowerCase()){case"m":case"c":case"q":e.push(Nb(s,t));break;case"l":r=n[l-1],i=s,a=t.isTransposed,o=a?r[r.length-2]===i[1]:r[r.length-1]===i[2],o?e=e.concat(WJ(r,i,t)):e.push(Nb(s,t));break;case"a":e.push(aB(s,t));break;case"z":default:e.push(s);break}}),VJ(e),e}var Yf=`	
\v\f\r   ᠎             　\u2028\u2029`,qJ=new RegExp("([a-z])["+Yf+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+Yf+"]*,?["+Yf+"]*)+)","ig"),ZJ=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+Yf+"]*,?["+Yf+"]*","ig");function KJ(t){if(!t)return null;if(et(t))return t;var n={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},e=[];return String(t).replace(qJ,function(r,i,a){var o=[],s=i.toLowerCase();if(a.replace(ZJ,function(l,c){c&&o.push(+c)}),s==="m"&&o.length>2&&(e.push([i].concat(o.splice(0,2))),s="l",i=i==="m"?"l":"L"),s==="o"&&o.length===1&&e.push([i,o[0]]),s==="r")e.push([i].concat(o));else for(;o.length>=n[s]&&(e.push([i].concat(o.splice(0,n[s]))),!!n[s]););return""}),e}var OC=function(t,n,e){return t>=n&&t<=e};function QJ(t,n,e,r){var i=.001,a={x:e.x-t.x,y:e.y-t.y},o={x:n.x-t.x,y:n.y-t.y},s={x:r.x-e.x,y:r.y-e.y},l=o.x*s.y-o.y*s.x,c=l*l,u=o.x*o.x+o.y*o.y,f=s.x*s.x+s.y*s.y,h=null;if(c>i*u*f){var d=(a.x*s.y-a.y*s.x)/l,p=(a.x*o.y-a.y*o.x)/l;OC(d,0,1)&&OC(p,0,1)&&(h={x:t.x+d*o.x,y:t.y+d*o.y})}return h}var JJ=1e-6;function C1(t){return Math.abs(t)<JJ?0:t<0?-1:1}function ttt(t,n,e){return(e[0]-t[0])*(n[1]-t[1])===(n[0]-t[0])*(e[1]-t[1])&&Math.min(t[0],n[0])<=e[0]&&e[0]<=Math.max(t[0],n[0])&&Math.min(t[1],n[1])<=e[1]&&e[1]<=Math.max(t[1],n[1])}function MC(t,n,e){var r=!1,i=t.length;if(i<=2)return!1;for(var a=0;a<i;a++){var o=t[a],s=t[(a+1)%i];if(ttt(o,s,[n,e]))return!0;C1(o[1]-e)>0!=C1(s[1]-e)>0&&C1(n-(e-o[1])*(o[0]-s[0])/(o[1]-s[1])-o[0])<0&&(r=!r)}return r}function AC(t){for(var n=[],e=t.length,r=0;r<e-1;r++){var i=t[r],a=t[r+1];n.push({from:{x:i[0],y:i[1]},to:{x:a[0],y:a[1]}})}if(n.length>1){var o=t[0],s=t[e-1];n.push({from:{x:s[0],y:s[1]},to:{x:o[0],y:o[1]}})}return n}function ett(t,n){var e=!1;return $(t,function(r){if(QJ(r.from,r.to,n.from,n.to))return e=!0,!1}),e}function EC(t){var n=t.map(function(r){return r[0]}),e=t.map(function(r){return r[1]});return{minX:Math.min.apply(null,n),maxX:Math.max.apply(null,n),minY:Math.min.apply(null,e),maxY:Math.max.apply(null,e)}}function ntt(t,n){return!(n.minX>t.maxX||n.maxX<t.minX||n.minY>t.maxY||n.maxY<t.minY)}function rtt(t,n){if(t.length<2||n.length<2)return!1;var e=EC(t),r=EC(n);if(!ntt(e,r))return!1;var i=!1;if($(n,function(l){if(MC(t,l[0],l[1]))return i=!0,!1}),i||($(t,function(l){if(MC(n,l[0],l[1]))return i=!0,!1}),i))return!0;var a=AC(t),o=AC(n),s=!1;return $(o,function(l){if(ett(a,l))return s=!0,!1}),s}function sB(t,n){var e=t.event,r=e.target;return cB(r,n)}function lB(t,n){var e=t.getCanvasBBox(),r=e.width,i=e.height;return r>0&&i>0&&(r>=n||i>=n)}function cB(t,n){var e=t.getCanvasBBox();return lB(t,n)?e:null}function uB(t,n){var e=t.event.maskShapes;return e.map(function(r){return cB(r,n)}).filter(function(r){return!!r})}function itt(t,n){var e=t.event,r=e.target;return fB(r,n)}function fB(t,n){return lB(t,n)?t.attr("path"):null}function att(t,n){var e=t.event.maskShapes;return e.map(function(r){return fB(r,n)})}function Uo(t){var n=t.event,e,r=n.target;return r&&(e=r.get("element")),e}function ul(t){var n=t.event,e=n.target,r;return e&&(r=e.get("delegateObject")),r}function hB(t){var n=t.event.gEvent;return!(n&&n.fromShape&&n.toShape&&n.fromShape.get("element")===n.toShape.get("element"))}function Oh(t){return t&&t.component&&t.component.isList()}function dB(t){return t&&t.component&&t.component.isSlider()}function Mh(t){var n=t.event,e=n.target;return e&&(e==null?void 0:e.get("name"))==="mask"||P0(t)}function P0(t){var n;return((n=t.event.target)===null||n===void 0?void 0:n.get("name"))==="multi-mask"}function zS(t,n){var e=t.event.target;if(P0(t))return ott(t,n);if(e.get("type")==="path"){var r=itt(t,n);return r?yB(t.view,r):void 0}var i=sB(t,n);return i?k0(t.view,i):null}function ott(t,n){var e=t.event.target;if(e.get("type")==="path"){var r=att(t,n);return r.length>0?r.flatMap(function(a){return yB(t.view,a)}):null}var i=uB(t,n);return i.length>0?i.flatMap(function(a){return k0(t.view,a)}):null}function pB(t,n,e){if(P0(t))return stt(t,n,e);var r=sB(t,e);return r?vB(r,t,n):null}function vB(t,n,e){var r=n.view,i=$b(r,e,{x:t.x,y:t.y}),a=$b(r,e,{x:t.maxX,y:t.maxY}),o={minX:i.x,minY:i.y,maxX:a.x,maxY:a.y};return k0(e,o)}function stt(t,n,e){var r=uB(t,e);return r.length>0?r.flatMap(function(i){return vB(i,t,n)}):null}function _n(t){var n=t.geometries,e=[];return $(n,function(r){var i=r.elements;e=e.concat(i)}),t.views&&t.views.length&&$(t.views,function(r){e=e.concat(_n(r))}),e}function ltt(t,n,e){var r=_n(t);return r.filter(function(i){return $i(i,n)===e})}function gB(t,n){var e=t.geometries,r=[];return $(e,function(i){var a=i.getElementsBy(function(o){return o.hasState(n)});r=r.concat(a)}),r}function $i(t,n){var e=t.getModel(),r=e.data,i;return et(r)?i=r[0][n]:i=r[n],i}function ctt(t,n){return!(n.minX>t.maxX||n.maxX<t.minX||n.minY>t.maxY||n.maxY<t.minY)}function k0(t,n){var e=_n(t),r=[];return $(e,function(i){var a=i.shape,o=a.getCanvasBBox();ctt(n,o)&&r.push(i)}),r}function TC(t){var n=[];return $(t,function(e){var r=e[0];if(r!=="A")for(var i=1;i<e.length;i=i+2)n.push([e[i],e[i+1]]);else{var a=e.length;n.push([e[a-2],e[a-1]])}}),n}function yB(t,n){var e=_n(t),r=TC(n),i=e.filter(function(a){var o=a.shape,s;if(o.get("type")==="path")s=TC(o.attr("path"));else{var l=o.getCanvasBBox();s=CJ(l)}return rtt(r,s)});return i}function mB(t){return t.getComponents().map(function(n){return n.component})}function GS(t,n){var e=n.x-t.x,r=n.y-t.y;return Math.sqrt(e*e+r*r)}function utt(t,n){if(t.length<=2)return bd(t,!1);var e=t[0],r=[];$(t,function(a){r.push(a.x),r.push(a.y)});var i=oB(r,n,null);return i.unshift(["M",e.x,e.y]),i}function CC(t,n){return t.x<=n.x&&t.maxX>=n.x&&t.y<=n.y&&t.maxY>n.y}function ca(t){var n=t.parent,e=null;return n&&(e=n.views.filter(function(r){return r!==t})),e}function ftt(t,n){var e=t.getCoordinate();return e.invert(n)}function $b(t,n,e){var r=ftt(t,e);return n.getCoordinate().convert(r)}function xB(t,n,e,r){var i=!1;return $(t,function(a){if(a[e]===n[e]&&a[r]===n[r])return i=!0,!1}),i}function Wc(t,n){var e=t.getScaleByField(n);return!e&&t.views&&$(t.views,function(r){if(e=Wc(r,n),e)return!1}),e}var htt=function(){function t(n){this.actions=[],this.event=null,this.cacheMap={},this.view=n}return t.prototype.cache=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];if(n.length===1)return this.cacheMap[n[0]];n.length===2&&(this.cacheMap[n[0]]=n[1])},t.prototype.getAction=function(n){return this.actions.find(function(e){return e.name===n})},t.prototype.addAction=function(n){this.actions.push(n)},t.prototype.removeAction=function(n){var e=this.actions,r=this.actions.indexOf(n);r>=0&&e.splice(r,1)},t.prototype.getCurrentPoint=function(){var n=this.event;if(n)if(n.target instanceof HTMLElement){var e=this.view.getCanvas(),r=e.getPointByClient(n.clientX,n.clientY);return r}else return{x:n.x,y:n.y};return null},t.prototype.getCurrentShape=function(){return z(this.event,["gEvent","shape"])},t.prototype.isInPlot=function(){var n=this.getCurrentPoint();return n?this.view.isPointInPlot(n):!1},t.prototype.isInShape=function(n){var e=this.getCurrentShape();return e?e.get("name")===n:!1},t.prototype.isInComponent=function(n){var e=mB(this.view),r=this.getCurrentPoint();return r?!!e.find(function(i){var a=i.getBBox();return n?i.get("name")===n&&CC(a,r):CC(a,r)}):!1},t.prototype.destroy=function(){$(this.actions.slice(),function(n){n.destroy()}),this.view=null,this.event=null,this.actions=null,this.cacheMap=null},t}(),dtt=function(){function t(n,e){this.view=n,this.cfg=e}return t.prototype.init=function(){this.initEvents()},t.prototype.initEvents=function(){},t.prototype.clearEvents=function(){},t.prototype.destroy=function(){this.clearEvents()},t}();function PC(t,n,e){var r=t.split(":"),i=r[0],a=n.getAction(i)||zJ(i,n);if(!a)throw new Error("There is no action named ".concat(i));var o=r[1];return{action:a,methodName:o,arg:e}}function kC(t){var n=t.action,e=t.methodName,r=t.arg;if(n[e])n[e](r);else throw new Error("Action(".concat(n.name,") doesn't have a method called ").concat(e))}var Lr={START:"start",SHOW_ENABLE:"showEnable",END:"end",ROLLBACK:"rollback",PROCESSING:"processing"},ptt=function(t){G(n,t);function n(e,r){var i=t.call(this,e,r)||this;return i.callbackCaches={},i.emitCaches={},i.steps=r,i}return n.prototype.init=function(){this.initContext(),t.prototype.init.call(this)},n.prototype.destroy=function(){t.prototype.destroy.call(this),this.steps=null,this.context&&(this.context.destroy(),this.context=null),this.callbackCaches=null,this.view=null},n.prototype.initEvents=function(){var e=this;$(this.steps,function(r,i){$(r,function(a){var o=e.getActionCallback(i,a);o&&e.bindEvent(a.trigger,o)})})},n.prototype.clearEvents=function(){var e=this;$(this.steps,function(r,i){$(r,function(a){var o=e.getActionCallback(i,a);o&&e.offEvent(a.trigger,o)})})},n.prototype.initContext=function(){var e=this.view,r=new htt(e);this.context=r;var i=this.steps;$(i,function(a){$(a,function(o){if(ut(o.action))o.actionObject={action:GJ(o.action,r),methodName:"execute"};else if(pt(o.action))o.actionObject=PC(o.action,r,o.arg);else if(et(o.action)){var s=o.action,l=et(o.arg)?o.arg:[o.arg];o.actionObject=[],$(s,function(c,u){o.actionObject.push(PC(c,r,l[u]))})}})})},n.prototype.isAllowStep=function(e){var r=this.currentStepName,i=this.steps;if(r===e||e===Lr.SHOW_ENABLE)return!0;if(e===Lr.PROCESSING)return r===Lr.START;if(e===Lr.START)return r!==Lr.PROCESSING;if(e===Lr.END)return r===Lr.PROCESSING||r===Lr.START;if(e===Lr.ROLLBACK){if(i[Lr.END])return r===Lr.END;if(r===Lr.START)return!0}return!1},n.prototype.isAllowExecute=function(e,r){if(this.isAllowStep(e)){var i=this.getKey(e,r);return r.once&&this.emitCaches[i]?!1:r.isEnable?r.isEnable(this.context):!0}return!1},n.prototype.enterStep=function(e){this.currentStepName=e,this.emitCaches={}},n.prototype.afterExecute=function(e,r){e!==Lr.SHOW_ENABLE&&this.currentStepName!==e&&this.enterStep(e);var i=this.getKey(e,r);this.emitCaches[i]=!0},n.prototype.getKey=function(e,r){return e+r.trigger+r.action},n.prototype.getActionCallback=function(e,r){var i=this,a=this.context,o=this.callbackCaches,s=r.actionObject;if(r.action&&s){var l=this.getKey(e,r);if(!o[l]){var c=function(u){a.event=u,i.isAllowExecute(e,r)?(et(s)?$(s,function(f){a.event=u,kC(f)}):(a.event=u,kC(s)),i.afterExecute(e,r),r.callback&&(a.event=u,r.callback(a))):a.event=null};r.debounce?o[l]=JD(c,r.debounce.wait,r.debounce.immediate):r.throttle?o[l]=aS(c,r.throttle.wait,{leading:r.throttle.leading,trailing:r.throttle.trailing}):o[l]=c}return o[l]}return null},n.prototype.bindEvent=function(e,r){var i=e.split(":");i[0]==="window"?window.addEventListener(i[1],r):i[0]==="document"?document.addEventListener(i[1],r):this.view.on(e,r)},n.prototype.offEvent=function(e,r){var i=e.split(":");i[0]==="window"?window.removeEventListener(i[1],r):i[0]==="document"?document.removeEventListener(i[1],r):this.view.off(e,r)},n}(dtt),bB={};function vtt(t){return bB[Ou(t)]}function wt(t,n){bB[Ou(t)]=n}function gtt(t,n,e){var r=vtt(t);if(!r)return null;if(sa(r)){var i=Jt(er(r),e);return new ptt(n,i)}else{var a=r;return new a(n,e)}}function ytt(t){return{title:{autoRotate:!0,position:"center",spacing:t.axisTitleSpacing,style:{fill:t.axisTitleTextFillColor,fontSize:t.axisTitleTextFontSize,lineHeight:t.axisTitleTextLineHeight,textBaseline:"middle",fontFamily:t.fontFamily},iconStyle:{fill:t.axisDescriptionIconFillColor}},label:{autoRotate:!1,autoEllipsis:!1,autoHide:{type:"equidistance",cfg:{minGap:6}},offset:t.axisLabelOffset,style:{fill:t.axisLabelFillColor,fontSize:t.axisLabelFontSize,lineHeight:t.axisLabelLineHeight,fontFamily:t.fontFamily}},line:{style:{lineWidth:t.axisLineBorder,stroke:t.axisLineBorderColor}},grid:{line:{type:"line",style:{stroke:t.axisGridBorderColor,lineWidth:t.axisGridBorder,lineDash:t.axisGridLineDash}},alignTick:!0,animate:!0},tickLine:{style:{lineWidth:t.axisTickLineBorder,stroke:t.axisTickLineBorderColor},alignTick:!0,length:t.axisTickLineLength},subTickLine:null,animate:!0}}function mtt(t){return{title:null,marker:{symbol:"circle",spacing:t.legendMarkerSpacing,style:{r:t.legendCircleMarkerSize,fill:t.legendMarkerColor}},itemName:{spacing:5,style:{fill:t.legendItemNameFillColor,fontFamily:t.fontFamily,fontSize:t.legendItemNameFontSize,lineHeight:t.legendItemNameLineHeight,fontWeight:t.legendItemNameFontWeight,textAlign:"start",textBaseline:"middle"}},itemStates:{active:{nameStyle:{opacity:.8}},unchecked:{nameStyle:{fill:"#D8D8D8"},markerStyle:{fill:"#D8D8D8",stroke:"#D8D8D8"}},inactive:{nameStyle:{fill:"#D8D8D8"},markerStyle:{opacity:.2}}},flipPage:!0,pageNavigator:{marker:{style:{size:t.legendPageNavigatorMarkerSize,inactiveFill:t.legendPageNavigatorMarkerInactiveFillColor,inactiveOpacity:t.legendPageNavigatorMarkerInactiveFillOpacity,fill:t.legendPageNavigatorMarkerFillColor,opacity:t.legendPageNavigatorMarkerFillOpacity}},text:{style:{fill:t.legendPageNavigatorTextFillColor,fontSize:t.legendPageNavigatorTextFontSize}}},animate:!1,maxItemWidth:200,itemSpacing:t.legendItemSpacing,itemMarginBottom:t.legendItemMarginBottom,padding:t.legendPadding}}function wB(t){var n,e={point:{default:{fill:t.pointFillColor,r:t.pointSize,stroke:t.pointBorderColor,lineWidth:t.pointBorder,fillOpacity:t.pointFillOpacity},active:{stroke:t.pointActiveBorderColor,lineWidth:t.pointActiveBorder},selected:{stroke:t.pointSelectedBorderColor,lineWidth:t.pointSelectedBorder},inactive:{fillOpacity:t.pointInactiveFillOpacity,strokeOpacity:t.pointInactiveBorderOpacity}},hollowPoint:{default:{fill:t.hollowPointFillColor,lineWidth:t.hollowPointBorder,stroke:t.hollowPointBorderColor,strokeOpacity:t.hollowPointBorderOpacity,r:t.hollowPointSize},active:{stroke:t.hollowPointActiveBorderColor,strokeOpacity:t.hollowPointActiveBorderOpacity},selected:{lineWidth:t.hollowPointSelectedBorder,stroke:t.hollowPointSelectedBorderColor,strokeOpacity:t.hollowPointSelectedBorderOpacity},inactive:{strokeOpacity:t.hollowPointInactiveBorderOpacity}},area:{default:{fill:t.areaFillColor,fillOpacity:t.areaFillOpacity,stroke:null},active:{fillOpacity:t.areaActiveFillOpacity},selected:{fillOpacity:t.areaSelectedFillOpacity},inactive:{fillOpacity:t.areaInactiveFillOpacity}},hollowArea:{default:{fill:null,stroke:t.hollowAreaBorderColor,lineWidth:t.hollowAreaBorder,strokeOpacity:t.hollowAreaBorderOpacity},active:{fill:null,lineWidth:t.hollowAreaActiveBorder},selected:{fill:null,lineWidth:t.hollowAreaSelectedBorder},inactive:{strokeOpacity:t.hollowAreaInactiveBorderOpacity}},interval:{default:{fill:t.intervalFillColor,fillOpacity:t.intervalFillOpacity},active:{stroke:t.intervalActiveBorderColor,lineWidth:t.intervalActiveBorder},selected:{stroke:t.intervalSelectedBorderColor,lineWidth:t.intervalSelectedBorder},inactive:{fillOpacity:t.intervalInactiveFillOpacity,strokeOpacity:t.intervalInactiveBorderOpacity}},hollowInterval:{default:{fill:t.hollowIntervalFillColor,stroke:t.hollowIntervalBorderColor,lineWidth:t.hollowIntervalBorder,strokeOpacity:t.hollowIntervalBorderOpacity},active:{stroke:t.hollowIntervalActiveBorderColor,lineWidth:t.hollowIntervalActiveBorder,strokeOpacity:t.hollowIntervalActiveBorderOpacity},selected:{stroke:t.hollowIntervalSelectedBorderColor,lineWidth:t.hollowIntervalSelectedBorder,strokeOpacity:t.hollowIntervalSelectedBorderOpacity},inactive:{stroke:t.hollowIntervalInactiveBorderColor,lineWidth:t.hollowIntervalInactiveBorder,strokeOpacity:t.hollowIntervalInactiveBorderOpacity}},line:{default:{stroke:t.lineBorderColor,lineWidth:t.lineBorder,strokeOpacity:t.lineBorderOpacity,fill:null,lineAppendWidth:10,lineCap:"round",lineJoin:"round"},active:{lineWidth:t.lineActiveBorder},selected:{lineWidth:t.lineSelectedBorder},inactive:{strokeOpacity:t.lineInactiveBorderOpacity}}},r=ytt(t),i=mtt(t);return{background:t.backgroundColor,defaultColor:t.brandColor,subColor:t.subColor,semanticRed:t.paletteSemanticRed,semanticGreen:t.paletteSemanticGreen,padding:"auto",fontFamily:t.fontFamily,columnWidthRatio:1/2,maxColumnWidth:null,minColumnWidth:null,roseWidthRatio:.9999999,multiplePieWidthRatio:1/1.3,colors10:t.paletteQualitative10,colors20:t.paletteQualitative20,sequenceColors:t.paletteSequence,shapes:{point:["hollow-circle","hollow-square","hollow-bowtie","hollow-diamond","hollow-hexagon","hollow-triangle","hollow-triangle-down","circle","square","bowtie","diamond","hexagon","triangle","triangle-down","cross","tick","plus","hyphen","line"],line:["line","dash","dot","smooth"],area:["area","smooth","line","smooth-line"],interval:["rect","hollow-rect","line","tick"]},sizes:[1,10],geometries:{interval:{rect:{default:{style:e.interval.default},active:{style:e.interval.active},inactive:{style:e.interval.inactive},selected:{style:function(a){var o=a.geometry.coordinate;if(o.isPolar&&o.isTransposed){var s=wh(a.getModel(),o),l=s.startAngle,c=s.endAngle,u=(l+c)/2,f=7.5,h=f*Math.cos(u),d=f*Math.sin(u);return{matrix:sn(null,[["t",h,d]])}}return e.interval.selected}}},"hollow-rect":{default:{style:e.hollowInterval.default},active:{style:e.hollowInterval.active},inactive:{style:e.hollowInterval.inactive},selected:{style:e.hollowInterval.selected}},line:{default:{style:e.hollowInterval.default},active:{style:e.hollowInterval.active},inactive:{style:e.hollowInterval.inactive},selected:{style:e.hollowInterval.selected}},tick:{default:{style:e.hollowInterval.default},active:{style:e.hollowInterval.active},inactive:{style:e.hollowInterval.inactive},selected:{style:e.hollowInterval.selected}},funnel:{default:{style:e.interval.default},active:{style:e.interval.active},inactive:{style:e.interval.inactive},selected:{style:e.interval.selected}},pyramid:{default:{style:e.interval.default},active:{style:e.interval.active},inactive:{style:e.interval.inactive},selected:{style:e.interval.selected}}},line:{line:{default:{style:e.line.default},active:{style:e.line.active},inactive:{style:e.line.inactive},selected:{style:e.line.selected}},dot:{default:{style:E(E({},e.line.default),{lineCap:null,lineDash:[1,1]})},active:{style:E(E({},e.line.active),{lineCap:null,lineDash:[1,1]})},inactive:{style:E(E({},e.line.inactive),{lineCap:null,lineDash:[1,1]})},selected:{style:E(E({},e.line.selected),{lineCap:null,lineDash:[1,1]})}},dash:{default:{style:E(E({},e.line.default),{lineCap:null,lineDash:[5.5,1]})},active:{style:E(E({},e.line.active),{lineCap:null,lineDash:[5.5,1]})},inactive:{style:E(E({},e.line.inactive),{lineCap:null,lineDash:[5.5,1]})},selected:{style:E(E({},e.line.selected),{lineCap:null,lineDash:[5.5,1]})}},smooth:{default:{style:e.line.default},active:{style:e.line.active},inactive:{style:e.line.inactive},selected:{style:e.line.selected}},hv:{default:{style:e.line.default},active:{style:e.line.active},inactive:{style:e.line.inactive},selected:{style:e.line.selected}},vh:{default:{style:e.line.default},active:{style:e.line.active},inactive:{style:e.line.inactive},selected:{style:e.line.selected}},hvh:{default:{style:e.line.default},active:{style:e.line.active},inactive:{style:e.line.inactive},selected:{style:e.line.selected}},vhv:{default:{style:e.line.default},active:{style:e.line.active},inactive:{style:e.line.inactive},selected:{style:e.line.selected}}},polygon:{polygon:{default:{style:e.interval.default},active:{style:e.interval.active},inactive:{style:e.interval.inactive},selected:{style:e.interval.selected}}},point:{circle:{default:{style:e.point.default},active:{style:e.point.active},inactive:{style:e.point.inactive},selected:{style:e.point.selected}},square:{default:{style:e.point.default},active:{style:e.point.active},inactive:{style:e.point.inactive},selected:{style:e.point.selected}},bowtie:{default:{style:e.point.default},active:{style:e.point.active},inactive:{style:e.point.inactive},selected:{style:e.point.selected}},diamond:{default:{style:e.point.default},active:{style:e.point.active},inactive:{style:e.point.inactive},selected:{style:e.point.selected}},hexagon:{default:{style:e.point.default},active:{style:e.point.active},inactive:{style:e.point.inactive},selected:{style:e.point.selected}},triangle:{default:{style:e.point.default},active:{style:e.point.active},inactive:{style:e.point.inactive},selected:{style:e.point.selected}},"triangle-down":{default:{style:e.point.default},active:{style:e.point.active},inactive:{style:e.point.inactive},selected:{style:e.point.selected}},"hollow-circle":{default:{style:e.hollowPoint.default},active:{style:e.hollowPoint.active},inactive:{style:e.hollowPoint.inactive},selected:{style:e.hollowPoint.selected}},"hollow-square":{default:{style:e.hollowPoint.default},active:{style:e.hollowPoint.active},inactive:{style:e.hollowPoint.inactive},selected:{style:e.hollowPoint.selected}},"hollow-bowtie":{default:{style:e.hollowPoint.default},active:{style:e.hollowPoint.active},inactive:{style:e.hollowPoint.inactive},selected:{style:e.hollowPoint.selected}},"hollow-diamond":{default:{style:e.hollowPoint.default},active:{style:e.hollowPoint.active},inactive:{style:e.hollowPoint.inactive},selected:{style:e.hollowPoint.selected}},"hollow-hexagon":{default:{style:e.hollowPoint.default},active:{style:e.hollowPoint.active},inactive:{style:e.hollowPoint.inactive},selected:{style:e.hollowPoint.selected}},"hollow-triangle":{default:{style:e.hollowPoint.default},active:{style:e.hollowPoint.active},inactive:{style:e.hollowPoint.inactive},selected:{style:e.hollowPoint.selected}},"hollow-triangle-down":{default:{style:e.hollowPoint.default},active:{style:e.hollowPoint.active},inactive:{style:e.hollowPoint.inactive},selected:{style:e.hollowPoint.selected}},cross:{default:{style:e.hollowPoint.default},active:{style:e.hollowPoint.active},inactive:{style:e.hollowPoint.inactive},selected:{style:e.hollowPoint.selected}},tick:{default:{style:e.hollowPoint.default},active:{style:e.hollowPoint.active},inactive:{style:e.hollowPoint.inactive},selected:{style:e.hollowPoint.selected}},plus:{default:{style:e.hollowPoint.default},active:{style:e.hollowPoint.active},inactive:{style:e.hollowPoint.inactive},selected:{style:e.hollowPoint.selected}},hyphen:{default:{style:e.hollowPoint.default},active:{style:e.hollowPoint.active},inactive:{style:e.hollowPoint.inactive},selected:{style:e.hollowPoint.selected}},line:{default:{style:e.hollowPoint.default},active:{style:e.hollowPoint.active},inactive:{style:e.hollowPoint.inactive},selected:{style:e.hollowPoint.selected}}},area:{area:{default:{style:e.area.default},active:{style:e.area.active},inactive:{style:e.area.inactive},selected:{style:e.area.selected}},smooth:{default:{style:e.area.default},active:{style:e.area.active},inactive:{style:e.area.inactive},selected:{style:e.area.selected}},line:{default:{style:e.hollowArea.default},active:{style:e.hollowArea.active},inactive:{style:e.hollowArea.inactive},selected:{style:e.hollowArea.selected}},"smooth-line":{default:{style:e.hollowArea.default},active:{style:e.hollowArea.active},inactive:{style:e.hollowArea.inactive},selected:{style:e.hollowArea.selected}}},schema:{candle:{default:{style:e.hollowInterval.default},active:{style:e.hollowInterval.active},inactive:{style:e.hollowInterval.inactive},selected:{style:e.hollowInterval.selected}},box:{default:{style:e.hollowInterval.default},active:{style:e.hollowInterval.active},inactive:{style:e.hollowInterval.inactive},selected:{style:e.hollowInterval.selected}}},edge:{line:{default:{style:e.line.default},active:{style:e.line.active},inactive:{style:e.line.inactive},selected:{style:e.line.selected}},vhv:{default:{style:e.line.default},active:{style:e.line.active},inactive:{style:e.line.inactive},selected:{style:e.line.selected}},smooth:{default:{style:e.line.default},active:{style:e.line.active},inactive:{style:e.line.inactive},selected:{style:e.line.selected}},arc:{default:{style:e.line.default},active:{style:e.line.active},inactive:{style:e.line.inactive},selected:{style:e.line.selected}}},violin:{violin:{default:{style:e.line.default},active:{style:e.line.active},inactive:{style:e.line.inactive},selected:{style:e.line.selected}},smooth:{default:{style:e.line.default},active:{style:e.line.active},inactive:{style:e.line.inactive},selected:{style:e.line.selected}},hollow:{default:{style:e.hollowArea.default},active:{style:e.hollowArea.active},inactive:{style:e.hollowArea.inactive},selected:{style:e.hollowArea.selected}},"hollow-smooth":{default:{style:e.hollowArea.default},active:{style:e.hollowArea.active},inactive:{style:e.hollowArea.inactive},selected:{style:e.hollowArea.selected}}}},components:{axis:{common:r,top:{position:"top",grid:null,title:null,verticalLimitLength:1/2},bottom:{position:"bottom",grid:null,title:null,verticalLimitLength:1/2},left:{position:"left",title:null,line:null,tickLine:null,verticalLimitLength:1/3},right:{position:"right",title:null,line:null,tickLine:null,verticalLimitLength:1/3},circle:{title:null,grid:ot({},r.grid,{line:{type:"line"}})},radius:{title:null,grid:ot({},r.grid,{line:{type:"circle"}})}},legend:{common:i,right:{layout:"vertical",padding:t.legendVerticalPadding},left:{layout:"vertical",padding:t.legendVerticalPadding},top:{layout:"horizontal",padding:t.legendHorizontalPadding},bottom:{layout:"horizontal",padding:t.legendHorizontalPadding},continuous:{title:null,background:null,track:{},rail:{type:"color",size:t.sliderRailHeight,defaultLength:t.sliderRailWidth,style:{fill:t.sliderRailFillColor,stroke:t.sliderRailBorderColor,lineWidth:t.sliderRailBorder}},label:{align:"rail",spacing:4,formatter:null,style:{fill:t.sliderLabelTextFillColor,fontSize:t.sliderLabelTextFontSize,lineHeight:t.sliderLabelTextLineHeight,textBaseline:"middle",fontFamily:t.fontFamily}},handler:{size:t.sliderHandlerWidth,style:{fill:t.sliderHandlerFillColor,stroke:t.sliderHandlerBorderColor}},slidable:!0,padding:i.padding}},tooltip:{showContent:!0,follow:!0,showCrosshairs:!1,showMarkers:!0,shared:!1,enterable:!1,position:"auto",marker:{symbol:"circle",stroke:"#fff",shadowBlur:10,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"rgba(0,0,0,0.09)",lineWidth:2,r:4},crosshairs:{line:{style:{stroke:t.tooltipCrosshairsBorderColor,lineWidth:t.tooltipCrosshairsBorder}},text:null,textBackground:{padding:2,style:{fill:"rgba(0, 0, 0, 0.25)",lineWidth:0,stroke:null}},follow:!1},domStyles:(n={},n["".concat(Za)]={position:"absolute",visibility:"hidden",zIndex:8,transition:"left 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s, top 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s",backgroundColor:t.tooltipContainerFillColor,opacity:t.tooltipContainerFillOpacity,boxShadow:t.tooltipContainerShadow,borderRadius:"".concat(t.tooltipContainerBorderRadius,"px"),color:t.tooltipTextFillColor,fontSize:"".concat(t.tooltipTextFontSize,"px"),fontFamily:t.fontFamily,lineHeight:"".concat(t.tooltipTextLineHeight,"px"),padding:"0 12px 0 12px"},n["".concat(Ka)]={marginBottom:"12px",marginTop:"12px"},n["".concat(bh)]={margin:0,listStyleType:"none",padding:0},n["".concat(O0)]={listStyleType:"none",padding:0,marginBottom:"12px",marginTop:"12px",marginLeft:0,marginRight:0},n["".concat(M0)]={width:"8px",height:"8px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},n["".concat(A0)]={display:"inline-block",float:"right",marginLeft:"30px"},n)},annotation:{arc:{style:{stroke:t.annotationArcBorderColor,lineWidth:t.annotationArcBorder},animate:!0},line:{style:{stroke:t.annotationLineBorderColor,lineDash:t.annotationLineDash,lineWidth:t.annotationLineBorder},text:{position:"start",autoRotate:!0,style:{fill:t.annotationTextFillColor,stroke:t.annotationTextBorderColor,lineWidth:t.annotationTextBorder,fontSize:t.annotationTextFontSize,textAlign:"start",fontFamily:t.fontFamily,textBaseline:"bottom"}},animate:!0},text:{style:{fill:t.annotationTextFillColor,stroke:t.annotationTextBorderColor,lineWidth:t.annotationTextBorder,fontSize:t.annotationTextFontSize,textBaseline:"middle",textAlign:"start",fontFamily:t.fontFamily},animate:!0},region:{top:!1,style:{lineWidth:t.annotationRegionBorder,stroke:t.annotationRegionBorderColor,fill:t.annotationRegionFillColor,fillOpacity:t.annotationRegionFillOpacity},animate:!0},image:{top:!1,animate:!0},dataMarker:{top:!0,point:{style:{r:3,stroke:t.brandColor,lineWidth:2}},line:{style:{stroke:t.annotationLineBorderColor,lineWidth:t.annotationLineBorder},length:t.annotationDataMarkerLineLength},text:{style:{textAlign:"start",fill:t.annotationTextFillColor,stroke:t.annotationTextBorderColor,lineWidth:t.annotationTextBorder,fontSize:t.annotationTextFontSize,fontFamily:t.fontFamily}},direction:"upward",autoAdjust:!0,animate:!0},dataRegion:{style:{region:{fill:t.annotationRegionFillColor,fillOpacity:t.annotationRegionFillOpacity},text:{textAlign:"center",textBaseline:"bottom",fill:t.annotationTextFillColor,stroke:t.annotationTextBorderColor,lineWidth:t.annotationTextBorder,fontSize:t.annotationTextFontSize,fontFamily:t.fontFamily}},animate:!0}},slider:{common:{padding:[8,8,8,8],backgroundStyle:{fill:t.cSliderBackgroundFillColor,opacity:t.cSliderBackgroundFillOpacity},foregroundStyle:{fill:t.cSliderForegroundFillColor,opacity:t.cSliderForegroundFillOpacity},handlerStyle:{width:t.cSliderHandlerWidth,height:t.cSliderHandlerHeight,fill:t.cSliderHandlerFillColor,opacity:t.cSliderHandlerFillOpacity,stroke:t.cSliderHandlerBorderColor,lineWidth:t.cSliderHandlerBorder,radius:t.cSliderHandlerBorderRadius,highLightFill:t.cSliderHandlerHighlightFillColor},textStyle:{fill:t.cSliderTextFillColor,opacity:t.cSliderTextFillOpacity,fontSize:t.cSliderTextFontSize,lineHeight:t.cSliderTextLineHeight,fontWeight:t.cSliderTextFontWeight,stroke:t.cSliderTextBorderColor,lineWidth:t.cSliderTextBorder}}},scrollbar:{common:{padding:[8,8,8,8]},default:{style:{trackColor:t.scrollbarTrackFillColor,thumbColor:t.scrollbarThumbFillColor}},hover:{style:{thumbColor:t.scrollbarThumbHighlightFillColor}}}},labels:{offset:12,style:{fill:t.labelFillColor,fontSize:t.labelFontSize,fontFamily:t.fontFamily,stroke:t.labelBorderColor,lineWidth:t.labelBorder},fillColorDark:t.labelFillColorDark,fillColorLight:t.labelFillColorLight,autoRotate:!0},innerLabels:{style:{fill:t.innerLabelFillColor,fontSize:t.innerLabelFontSize,fontFamily:t.fontFamily,stroke:t.innerLabelBorderColor,lineWidth:t.innerLabelBorder},autoRotate:!0},overflowLabels:{style:{fill:t.overflowLabelFillColor,fontSize:t.overflowLabelFontSize,fontFamily:t.fontFamily,stroke:t.overflowLabelBorderColor,lineWidth:t.overflowLabelBorder}},pieLabels:{labelHeight:14,offset:10,labelLine:{style:{lineWidth:t.labelLineBorder}},autoRotate:!0}}}var qt={100:"#000",95:"#0D0D0D",85:"#262626",65:"#595959",45:"#8C8C8C",25:"#BFBFBF",15:"#D9D9D9",6:"#F0F0F0"},Yl={100:"#FFFFFF",95:"#F2F2F2",85:"#D9D9D9",65:"#A6A6A6",45:"#737373",25:"#404040",15:"#262626",6:"#0F0F0F"},xtt=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#6F5EF9","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"],btt=["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#6F5EF9","#D3CEFD","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"],wtt=["#B8E1FF","#9AC5FF","#7DAAFF","#5B8FF9","#3D76DD","#085EC0","#0047A5","#00318A","#001D70"],SB=function(t){t===void 0&&(t={});var n=t.paletteQualitative10,e=n===void 0?xtt:n,r=t.paletteQualitative20,i=r===void 0?btt:r,a=t.brandColor,o=a===void 0?e[0]:a,s={backgroundColor:"transparent",brandColor:o,subColor:"rgba(0,0,0,0.05)",paletteQualitative10:e,paletteQualitative20:i,paletteSemanticRed:"#F4664A",paletteSemanticGreen:"#30BF78",paletteSemanticYellow:"#FAAD14",paletteSequence:wtt,fontFamily:`"Segoe UI", Roboto, "Helvetica Neue", Arial,
    "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",
    "Noto Color Emoji"`,axisLineBorderColor:qt[25],axisLineBorder:1,axisLineDash:null,axisTitleTextFillColor:qt[65],axisTitleTextFontSize:12,axisTitleTextLineHeight:12,axisTitleTextFontWeight:"normal",axisTitleSpacing:12,axisDescriptionIconFillColor:Yl[85],axisTickLineBorderColor:qt[25],axisTickLineLength:4,axisTickLineBorder:1,axisSubTickLineBorderColor:qt[15],axisSubTickLineLength:2,axisSubTickLineBorder:1,axisLabelFillColor:qt[45],axisLabelFontSize:12,axisLabelLineHeight:12,axisLabelFontWeight:"normal",axisLabelOffset:8,axisGridBorderColor:qt[15],axisGridBorder:1,axisGridLineDash:null,legendTitleTextFillColor:qt[45],legendTitleTextFontSize:12,legendTitleTextLineHeight:21,legendTitleTextFontWeight:"normal",legendMarkerColor:o,legendMarkerSpacing:8,legendMarkerSize:4,legendCircleMarkerSize:4,legendSquareMarkerSize:4,legendLineMarkerSize:5,legendItemNameFillColor:qt[65],legendItemNameFontSize:12,legendItemNameLineHeight:12,legendItemNameFontWeight:"normal",legendItemSpacing:24,legendItemMarginBottom:12,legendPadding:[8,8,8,8],legendHorizontalPadding:[8,0,8,0],legendVerticalPadding:[0,8,0,8],legendPageNavigatorMarkerSize:12,legendPageNavigatorMarkerInactiveFillColor:qt[100],legendPageNavigatorMarkerInactiveFillOpacity:.45,legendPageNavigatorMarkerFillColor:qt[100],legendPageNavigatorMarkerFillOpacity:1,legendPageNavigatorTextFillColor:qt[45],legendPageNavigatorTextFontSize:12,sliderRailFillColor:qt[15],sliderRailBorder:0,sliderRailBorderColor:null,sliderRailWidth:100,sliderRailHeight:12,sliderLabelTextFillColor:qt[45],sliderLabelTextFontSize:12,sliderLabelTextLineHeight:12,sliderLabelTextFontWeight:"normal",sliderHandlerFillColor:qt[6],sliderHandlerWidth:10,sliderHandlerHeight:14,sliderHandlerBorder:1,sliderHandlerBorderColor:qt[25],annotationArcBorderColor:qt[15],annotationArcBorder:1,annotationLineBorderColor:qt[25],annotationLineBorder:1,annotationLineDash:null,annotationTextFillColor:qt[65],annotationTextFontSize:12,annotationTextLineHeight:12,annotationTextFontWeight:"normal",annotationTextBorderColor:null,annotationTextBorder:0,annotationRegionFillColor:qt[100],annotationRegionFillOpacity:.06,annotationRegionBorder:0,annotationRegionBorderColor:null,annotationDataMarkerLineLength:16,tooltipCrosshairsBorderColor:qt[25],tooltipCrosshairsBorder:1,tooltipCrosshairsLineDash:null,tooltipContainerFillColor:"rgb(255, 255, 255)",tooltipContainerFillOpacity:.95,tooltipContainerShadow:"0px 0px 10px #aeaeae",tooltipContainerBorderRadius:3,tooltipTextFillColor:qt[65],tooltipTextFontSize:12,tooltipTextLineHeight:12,tooltipTextFontWeight:"bold",labelFillColor:qt[65],labelFillColorDark:"#2c3542",labelFillColorLight:"#ffffff",labelFontSize:12,labelLineHeight:12,labelFontWeight:"normal",labelBorderColor:null,labelBorder:0,innerLabelFillColor:Yl[100],innerLabelFontSize:12,innerLabelLineHeight:12,innerLabelFontWeight:"normal",innerLabelBorderColor:null,innerLabelBorder:0,overflowLabelFillColor:qt[65],overflowLabelFontSize:12,overflowLabelLineHeight:12,overflowLabelFontWeight:"normal",overflowLabelBorderColor:Yl[100],overflowLabelBorder:1,labelLineBorder:1,labelLineBorderColor:qt[25],cSliderRailHieght:16,cSliderBackgroundFillColor:"#416180",cSliderBackgroundFillOpacity:.05,cSliderForegroundFillColor:"#5B8FF9",cSliderForegroundFillOpacity:.15,cSliderHandlerHeight:24,cSliderHandlerWidth:10,cSliderHandlerFillColor:"#F7F7F7",cSliderHandlerFillOpacity:1,cSliderHandlerHighlightFillColor:"#FFF",cSliderHandlerBorderColor:"#BFBFBF",cSliderHandlerBorder:1,cSliderHandlerBorderRadius:2,cSliderTextFillColor:"#000",cSliderTextFillOpacity:.45,cSliderTextFontSize:12,cSliderTextLineHeight:12,cSliderTextFontWeight:"normal",cSliderTextBorderColor:null,cSliderTextBorder:0,scrollbarTrackFillColor:"rgba(0,0,0,0)",scrollbarThumbFillColor:"rgba(0,0,0,0.15)",scrollbarThumbHighlightFillColor:"rgba(0,0,0,0.2)",pointFillColor:o,pointFillOpacity:.95,pointSize:4,pointBorder:1,pointBorderColor:Yl[100],pointBorderOpacity:1,pointActiveBorderColor:qt[100],pointSelectedBorder:2,pointSelectedBorderColor:qt[100],pointInactiveFillOpacity:.3,pointInactiveBorderOpacity:.3,hollowPointSize:4,hollowPointBorder:1,hollowPointBorderColor:o,hollowPointBorderOpacity:.95,hollowPointFillColor:Yl[100],hollowPointActiveBorder:1,hollowPointActiveBorderColor:qt[100],hollowPointActiveBorderOpacity:1,hollowPointSelectedBorder:2,hollowPointSelectedBorderColor:qt[100],hollowPointSelectedBorderOpacity:1,hollowPointInactiveBorderOpacity:.3,lineBorder:2,lineBorderColor:o,lineBorderOpacity:1,lineActiveBorder:3,lineSelectedBorder:3,lineInactiveBorderOpacity:.3,areaFillColor:o,areaFillOpacity:.25,areaActiveFillColor:o,areaActiveFillOpacity:.5,areaSelectedFillColor:o,areaSelectedFillOpacity:.5,areaInactiveFillOpacity:.3,hollowAreaBorderColor:o,hollowAreaBorder:2,hollowAreaBorderOpacity:1,hollowAreaActiveBorder:3,hollowAreaActiveBorderColor:qt[100],hollowAreaSelectedBorder:3,hollowAreaSelectedBorderColor:qt[100],hollowAreaInactiveBorderOpacity:.3,intervalFillColor:o,intervalFillOpacity:.95,intervalActiveBorder:1,intervalActiveBorderColor:qt[100],intervalActiveBorderOpacity:1,intervalSelectedBorder:2,intervalSelectedBorderColor:qt[100],intervalSelectedBorderOpacity:1,intervalInactiveBorderOpacity:.3,intervalInactiveFillOpacity:.3,hollowIntervalBorder:2,hollowIntervalBorderColor:o,hollowIntervalBorderOpacity:1,hollowIntervalFillColor:Yl[100],hollowIntervalActiveBorder:2,hollowIntervalActiveBorderColor:qt[100],hollowIntervalSelectedBorder:3,hollowIntervalSelectedBorderColor:qt[100],hollowIntervalSelectedBorderOpacity:1,hollowIntervalInactiveBorderOpacity:.3};return E(E({},s),t)};SB();function Ag(t){var n=t.styleSheet,e=n===void 0?{}:n,r=vt(t,["styleSheet"]),i=SB(e);return ot({},wB(i),r)}var Stt=Ag({}),jb={default:Stt};function Wf(t){return z(jb,Ou(t),jb.default)}function Ott(t,n){jb[Ou(t)]=Ag(n)}function _C(t,n,e){var r=e.translate(t),i=e.translate(n);return Cn(r,i)}function Mtt(t,n){var e=n.coordinate,r=n.getXScale(),i=r.range,a=i[i.length-1],o=i[0],s=e.invert(t),l=s.x;return e.isPolar&&l>(1+a)/2&&(l=o),r.translate(r.invert(l))}function LC(t,n,e){var r=e.coordinate,i=e.getYScale(),a=i.field,o=r.invert(n),s=i.invert(o.y),l=Li(t,function(c){var u=c[ae];return u[a][0]<=s&&u[a][1]>=s});return l||t[t.length-1]}var Att=Mu(function(t){if(t.isCategory)return 1;for(var n=t.values,e=n.length,r=t.translate(n[0]),i=r,a=0;a<e;a++){var o=n[a],s=t.translate(o);s<r&&(r=s),s>i&&(i=s)}return(i-r)/(e-1)});function Ett(t,n,e){var r=n.getAttribute("position"),i=r.getFields(),a=n.scales,o=ut(e)||!e?i[0]:e,s=a[o],l=s?s.getText(t[o]):t[o]||o;return ut(e)?e(l,t):l}function Ttt(t){var n=Qy(t.attributes);return Ln(n,function(e){return Rs(sc,e.type)})}function OB(t){var n,e,r=Ttt(t),i;try{for(var a=Ct(r),o=a.next();!o.done;o=a.next()){var s=o.value,l=s.getScale(s.type);if(l&&l.isLinear){var c=z(t.scaleDefs,l.field),u=eB(l,c,s.type,t.type);if(u!=="cat"){i=l;break}}}}catch(d){n={error:d}}finally{try{o&&!o.done&&(e=a.return)&&e.call(a)}finally{if(n)throw n.error}}var f=t.getXScale(),h=t.getYScale();return i||h||f}function Ctt(t,n){var e=n.field,r=t[e];if(et(r)){var i=r.map(function(a){return n.getText(a)});return i.join("-")}return n.getText(r)}function Ptt(t,n){var e,r=n.getGroupScales();if(r.length&&(e=r[0]),e){var i=e.field;return e.getText(t[i])}var a=OB(n);return Sh(a)}function MB(t,n,e){if(n.length===0)return null;var r=e.type,i=e.getXScale(),a=e.getYScale(),o=i.field,s=a.field,l=null;if(r==="heatmap"||r==="point"){for(var c=e.coordinate,u=c.invert(t),f=i.invert(u.x),h=a.invert(u.y),d=1/0,p=0;p<n.length;p++){var v=n[p],g=v[ae],y=Math.pow(g[o]-f,2)+Math.pow(g[s]-h,2);y<d&&(d=y,l=v)}return l}var m=n[0],x=n[n.length-1],b=Mtt(t,e),w=m[ae][o],S=m[ae][s],O=x[ae][o],M=a.isLinear&&et(S);if(et(w)){for(var p=0;p<n.length;p++){var A=n[p],g=A[ae];if(i.translate(g[o][0])<=b&&i.translate(g[o][1])>=b)if(M)et(l)||(l=[]),l.push(A);else{l=A;break}}et(l)&&(l=LC(l,t,e))}else{var T=void 0;if(!i.isLinear&&i.type!=="timeCat"){for(var p=0;p<n.length;p++){var A=n[p],g=A[ae];if(_C(g[o],b,i))if(M)et(l)||(l=[]),l.push(A);else{l=A;break}else i.translate(g[o])<=b&&(x=A,T=n[p+1])}et(l)&&(l=LC(l,t,e))}else{if((b>i.translate(O)||b<i.translate(w))&&(b>i.max||b<i.min))return null;for(var C=0,P=n.length-1,_=void 0;C<=P;){_=Math.floor((C+P)/2);var k=n[_][ae][o];if(_C(k,b,i))return n[_];i.translate(k)<=i.translate(b)?(C=_+1,x=n[_],T=n[_+1]):(P===0&&(x=n[0]),P=_-1)}}x&&T&&Math.abs(i.translate(x[ae][o])-b)>Math.abs(i.translate(T[ae][o])-b)&&(x=T)}var I=Att(e.getXScale());return!l&&Math.abs(i.translate(x[ae][o])-b)<=I/2&&(l=x),l}function YS(t,n,e,r){var i,a;e===void 0&&(e=""),r===void 0&&(r=!1);var o=t[ae],s=Ett(o,n,e),l=n.tooltipOption,c=n.theme.defaultColor,u=[],f,h;function d(A,T){if(r||!J(T)&&T!==""){var C={title:s,data:o,mappingData:t,name:A,value:T,color:t.color||c,marker:!0};u.push(C)}}if(Qt(l)){var p=l.fields,v=l.callback;if(v){var g=p.map(function(A){return t[ae][A]}),y=v.apply(void 0,X([],R(g),!1)),m=E({data:t[ae],mappingData:t,title:s,color:t.color||c,marker:!0},y);u.push(m)}else{var x=n.scales;try{for(var b=Ct(p),w=b.next();!w.done;w=b.next()){var S=w.value;if(!J(o[S])){var O=x[S];f=Sh(O),h=O.getText(o[S]),d(f,h)}}}catch(A){i={error:A}}finally{try{w&&!w.done&&(a=b.return)&&a.call(b)}finally{if(i)throw i.error}}}}else{var M=OB(n);h=Ctt(o,M),f=Ptt(o,n),d(f,h)}return u}function IC(t,n,e,r){var i,a,o=r.showNil,s=[],l=t.dataArray;if(!Mr(l)){t.sort(l);try{for(var c=Ct(l),u=c.next();!u.done;u=c.next()){var f=u.value,h=MB(n,f,t);if(h){var d=t.getElementId(h),p=t.elementsMap[d];if(t.type==="heatmap"||p.visible){var v=YS(h,t,e,o);v.length&&s.push(v)}}}}catch(g){i={error:g}}finally{try{u&&!u.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}}return s}function FC(t,n,e,r){var i=r.showNil,a=[],o=t.container,s=o.getShape(n.x,n.y);if(s&&s.get("visible")&&s.get("origin")){var l=s.get("origin").mappingData,c=YS(l,t,e,i);c.length&&a.push(c)}return a}function zb(t,n,e){var r,i,a=[],o=t.geometries,s=e.shared,l=e.title,c=e.reversed;try{for(var u=Ct(o),f=u.next();!f.done;f=u.next()){var h=f.value;if(h.visible&&h.tooltipOption!==!1){var d=h.type,p=void 0;["point","edge","polygon"].includes(d)?p=FC(h,n,l,e):["area","line","path","heatmap"].includes(d)||s!==!1?p=IC(h,n,l,e):p=FC(h,n,l,e),p.length&&(c&&p.reverse(),a.push(p))}}}catch(v){r={error:v}}finally{try{f&&!f.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}return a}function ktt(t,n,e){var r,i,a=zb(t,n,e);try{for(var o=Ct(t.views),s=o.next();!s.done;s=o.next()){var l=s.value;a=a.concat(zb(l,n,e))}}catch(c){r={error:c}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return a}function _tt(t){return!bt(t)&&!et(t)}function WS(t){t===void 0&&(t=0);var n=et(t)?t:[t];switch(n.length){case 0:n=[0,0,0,0];break;case 1:n=new Array(4).fill(n[0]);break;case 2:n=X(X([],R(n),!1),R(n),!1);break;case 3:n=X(X([],R(n),!1),[n[1]],!1);break;default:n=n.slice(0,4);break}return n}var VS={};function Pl(t,n){VS[t]=n}function Ltt(){return Object.keys(VS)}function Itt(t){return VS[t]}var Ftt=function(){function t(n){this.option=this.wrapperOption(n)}return t.prototype.update=function(n){return this.option=this.wrapperOption(n),this},t.prototype.hasAction=function(n){var e=this.option.actions;return qy(e,function(r){return r[0]===n})},t.prototype.create=function(n,e){var r=this.option,i=r.type,a=r.cfg,o=i==="theta",s=E({start:n,end:e},a),l=XK(o?"polar":i);return this.coordinate=new l(s),this.coordinate.type=i,o&&(this.hasAction("transpose")||this.transpose()),this.execActions(),this.coordinate},t.prototype.adjust=function(n,e){return this.coordinate.update({start:n,end:e}),this.coordinate.resetMatrix(),this.execActions(["scale","rotate","translate"]),this.coordinate},t.prototype.rotate=function(n){return this.option.actions.push(["rotate",n]),this},t.prototype.reflect=function(n){return this.option.actions.push(["reflect",n]),this},t.prototype.scale=function(n,e){return this.option.actions.push(["scale",n,e]),this},t.prototype.transpose=function(){return this.option.actions.push(["transpose"]),this},t.prototype.getOption=function(){return this.option},t.prototype.getCoordinate=function(){return this.coordinate},t.prototype.wrapperOption=function(n){return E({type:"rect",actions:[],cfg:{}},n)},t.prototype.execActions=function(n){var e=this,r=this.option.actions;$(r,function(i){var a,o=R(i),s=o[0],l=o.slice(1),c=J(n)?!0:n.includes(s);c&&(a=e.coordinate)[s].apply(a,X([],R(l),!1))})},t}(),ke=function(){function t(n,e,r){this.view=n,this.gEvent=e,this.data=r,this.type=e.type}return t.fromData=function(n,e,r){return new t(n,new pd(e,{}),r)},Object.defineProperty(t.prototype,"target",{get:function(){return this.gEvent.target},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"event",{get:function(){return this.gEvent.originalEvent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return this.gEvent.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.gEvent.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clientX",{get:function(){return this.gEvent.clientX},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clientY",{get:function(){return this.gEvent.clientY},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return"[Event (type=".concat(this.type,")]")},t.prototype.clone=function(){return new t(this.view,this.gEvent,this.data)},t}();function Dtt(t){var n=t.getController("axis"),e=t.getController("legend"),r=t.getController("annotation"),i=t.getController("slider"),a=t.getController("scrollbar");[n,i,a,e,r].forEach(function(o){o&&o.layout()})}var Rtt=function(){function t(){this.scales=new Map,this.syncScales=new Map}return t.prototype.createScale=function(n,e,r,i){var a=r,o=this.getScaleMeta(i);if(e.length===0&&o){var s=o.scale,l={type:s.type};s.isCategory&&(l.values=s.values),a=ot(l,o.scaleDef,r)}var c=FJ(n,e,a);return this.cacheScale(c,r,i),c},t.prototype.sync=function(n,e){var r=this;this.syncScales.forEach(function(i,a){var o=Number.MAX_SAFE_INTEGER,s=Number.MIN_SAFE_INTEGER,l=[];$(i,function(c){var u=r.getScale(c);s=bt(u.max)?Math.max(s,u.max):s,o=bt(u.min)?Math.min(o,u.min):o,$(u.values,function(f){l.includes(f)||l.push(f)})}),$(i,function(c){var u=r.getScale(c);if(u.isContinuous)u.change({min:o,max:s,values:l});else if(u.isCategory){var f=u.range,h=r.getScaleMeta(c);l&&!z(h,["scaleDef","range"])&&(f=nB(ot({},u,{values:l}),n,e)),u.change({values:l,range:f})}})})},t.prototype.cacheScale=function(n,e,r){var i=this.getScaleMeta(r);i&&i.scale.type===n.type?(DJ(i.scale,n),i.scaleDef=e):(i={key:r,scale:n,scaleDef:e},this.scales.set(r,i));var a=this.getSyncKey(i);if(i.syncKey=a,this.removeFromSyncScales(r),a){var o=this.syncScales.get(a);o||(o=[],this.syncScales.set(a,o)),o.push(r)}},t.prototype.getScale=function(n){var e=this.getScaleMeta(n);if(!e){var r=ln(n.split("-")),i=this.syncScales.get(r);i&&i.length&&(e=this.getScaleMeta(i[0]))}return e&&e.scale},t.prototype.deleteScale=function(n){var e=this.getScaleMeta(n);if(e){var r=e.syncKey,i=this.syncScales.get(r);if(i&&i.length){var a=i.indexOf(n);a!==-1&&i.splice(a,1)}}this.scales.delete(n)},t.prototype.clear=function(){this.scales.clear(),this.syncScales.clear()},t.prototype.removeFromSyncScales=function(n){var e=this;this.syncScales.forEach(function(r,i){var a=r.indexOf(n);if(a!==-1)return r.splice(a,1),r.length===0&&e.syncScales.delete(i),!1})},t.prototype.getSyncKey=function(n){var e=n.scale,r=n.scaleDef,i=e.field,a=z(r,["sync"]);return a===!0?i:a===!1?void 0:a},t.prototype.getScaleMeta=function(n){return this.scales.get(n)},t}(),Rv=function(){function t(n,e,r,i){n===void 0&&(n=0),e===void 0&&(e=0),r===void 0&&(r=0),i===void 0&&(i=0),this.top=n,this.right=e,this.bottom=r,this.left=i}return t.instance=function(n,e,r,i){return n===void 0&&(n=0),e===void 0&&(e=0),r===void 0&&(r=0),i===void 0&&(i=0),new t(n,e,r,i)},t.prototype.max=function(n){var e=R(n,4),r=e[0],i=e[1],a=e[2],o=e[3];return this.top=Math.max(this.top,r),this.right=Math.max(this.right,i),this.bottom=Math.max(this.bottom,a),this.left=Math.max(this.left,o),this},t.prototype.shrink=function(n){var e=R(n,4),r=e[0],i=e[1],a=e[2],o=e[3];return this.top+=r,this.right+=i,this.bottom+=a,this.left+=o,this},t.prototype.inc=function(n,e){var r=n.width,i=n.height;switch(e){case at.TOP:case at.TOP_LEFT:case at.TOP_RIGHT:this.top+=i;break;case at.RIGHT:case at.RIGHT_TOP:case at.RIGHT_BOTTOM:this.right+=r;break;case at.BOTTOM:case at.BOTTOM_LEFT:case at.BOTTOM_RIGHT:this.bottom+=i;break;case at.LEFT:case at.LEFT_TOP:case at.LEFT_BOTTOM:this.left+=r;break}return this},t.prototype.getPadding=function(){return[this.top,this.right,this.bottom,this.left]},t.prototype.clone=function(){return new(t.bind.apply(t,X([void 0],R(this.getPadding()),!1)))},t}();function Btt(t){var n=t.padding;if(!_tt(n))return new(Rv.bind.apply(Rv,X([void 0],R(WS(n)),!1)));var e=t.viewBBox,r=new Rv,i=[],a=[],o=[];return $(t.getComponents(),function(s){var l=s.type;l===gn.AXIS?i.push(s):[gn.LEGEND,gn.SLIDER,gn.SCROLLBAR].includes(l)?a.push(s):l!==gn.GRID&&l!==gn.TOOLTIP&&o.push(s)}),$(i,function(s){var l=s.component,c=l.getLayoutBBox(),u=new ar(c.x,c.y,c.width,c.height),f=u.exceed(e);r.max(f)}),$(a,function(s){var l=s.component,c=s.direction,u=l.getLayoutBBox(),f=l.get("padding"),h=new ar(u.x,u.y,u.width,u.height).expand(f);r.inc(h,c)}),$(o,function(s){var l=s.component,c=s.direction,u=l.getLayoutBBox(),f=new ar(u.x,u.y,u.width,u.height);r.inc(f,c)}),r}function Ntt(t,n,e){var r=e.instance();n.forEach(function(i){i.autoPadding=r.max(i.autoPadding.getPadding())})}var AB=function(t){G(n,t);function n(e){var r=t.call(this,{visible:e.visible})||this;r.views=[],r.geometries=[],r.controllers=[],r.interactions={},r.limitInPlot=!1,r.options={data:[],animate:!0},r.usedControllers=Ltt(),r.scalePool=new Rtt,r.layoutFunc=Dtt,r.isPreMouseInPlot=!1,r.isDataChanged=!1,r.isCoordinateChanged=!1,r.createdScaleKeys=new Map,r.onCanvasEvent=function(x){var b=x.name;if(!b.includes(":")){var w=r.createViewEvent(x);r.doPlotEvent(w),r.emit(b,w)}},r.onDelegateEvents=function(x){var b=x.name;if(b.includes(":")){var w=r.createViewEvent(x);r.emit(b,w)}};var i=e.id,a=i===void 0?os("view"):i,o=e.parent,s=e.canvas,l=e.backgroundGroup,c=e.middleGroup,u=e.foregroundGroup,f=e.region,h=f===void 0?{start:{x:0,y:0},end:{x:1,y:1}}:f,d=e.padding,p=e.appendPadding,v=e.theme,g=e.options,y=e.limitInPlot,m=e.syncViewPadding;return r.parent=o,r.canvas=s,r.backgroundGroup=l,r.middleGroup=c,r.foregroundGroup=u,r.region=h,r.padding=d,r.appendPadding=p,r.options=E(E({},r.options),g),r.limitInPlot=y,r.id=a,r.syncViewPadding=m,r.themeObject=Qt(v)?ot({},Wf("default"),Ag(v)):Wf(v),r.init(),r}return n.prototype.setLayout=function(e){this.layoutFunc=e},n.prototype.init=function(){this.calculateViewBBox(),this.initEvents(),this.initComponentController(),this.initOptions()},n.prototype.render=function(e,r){e===void 0&&(e=!1),this.emit(kt.BEFORE_RENDER,ke.fromData(this,kt.BEFORE_RENDER,r)),this.paint(e),this.emit(kt.AFTER_RENDER,ke.fromData(this,kt.AFTER_RENDER,r)),this.visible===!1&&this.changeVisible(!1)},n.prototype.clear=function(){var e=this;this.emit(kt.BEFORE_CLEAR),this.filteredData=[],this.coordinateInstance=void 0,this.isDataChanged=!1,this.isCoordinateChanged=!1;for(var r=this.geometries,i=0;i<r.length;i++)r[i].clear(),r[i].container.remove(!0),r[i].labelsContainer.remove(!0);this.geometries=[];for(var a=this.controllers,i=0;i<a.length;i++)a[i].name==="annotation"?a[i].clear(!0):a[i].clear();this.createdScaleKeys.forEach(function(s,l){e.getRootView().scalePool.deleteScale(l)}),this.createdScaleKeys.clear();for(var o=this.views,i=0;i<o.length;i++)o[i].clear();this.emit(kt.AFTER_CLEAR)},n.prototype.destroy=function(){this.emit(kt.BEFORE_DESTROY);var e=this.interactions;$(e,function(s){s&&s.destroy()}),this.clear();for(var r=this.controllers,i=0,a=r.length;i<a;i++){var o=r[i];o.destroy()}this.backgroundGroup.remove(!0),this.middleGroup.remove(!0),this.foregroundGroup.remove(!0),t.prototype.destroy.call(this)},n.prototype.changeVisible=function(e){t.prototype.changeVisible.call(this,e);for(var r=this.geometries,i=0,a=r.length;i<a;i++){var o=r[i];o.changeVisible(e)}for(var s=this.controllers,i=0,a=s.length;i<a;i++){var l=s[i];l.changeVisible(e)}return this.foregroundGroup.set("visible",e),this.middleGroup.set("visible",e),this.backgroundGroup.set("visible",e),this.getCanvas().draw(),this},n.prototype.data=function(e){return an(this.options,"data",e),this.isDataChanged=!0,this},n.prototype.source=function(e){return console.warn("This method will be removed at G2 V4.1. Please use chart.data() instead."),this.data(e)},n.prototype.filter=function(e,r){return ut(r)?(an(this.options,["filters",e],r),this):(!r&&z(this.options,["filters",e])&&delete this.options.filters[e],this)},n.prototype.axis=function(e,r){return Dc(e)?an(this.options,["axes"],e):an(this.options,["axes",e],r),this},n.prototype.legend=function(e,r){return Dc(e)?an(this.options,["legends"],e):pt(e)?(an(this.options,["legends",e],r),sa(r)&&(r!=null&&r.selected)&&an(this.options,["filters",e],function(i){var a;return(a=r==null?void 0:r.selected[i])!==null&&a!==void 0?a:!0})):an(this.options,["legends"],e),this},n.prototype.scale=function(e,r){var i=this;return pt(e)?an(this.options,["scales",e],r):Qt(e)&&$(e,function(a,o){an(i.options,["scales",o],a)}),this},n.prototype.tooltip=function(e){return an(this.options,"tooltip",e),this},n.prototype.annotation=function(){return this.getController("annotation")},n.prototype.guide=function(){return console.warn("This method will be removed at G2 V4.1. Please use chart.annotation() instead."),this.annotation()},n.prototype.coordinate=function(e,r){return pt(e)?an(this.options,"coordinate",{type:e,cfg:r}):an(this.options,"coordinate",e),this.coordinateController.update(this.options.coordinate),this.coordinateController},n.prototype.coord=function(e,r){return console.warn("This method will be removed at G2 V4.1. Please use chart.coordinate() instead."),this.coordinate(e,r)},n.prototype.facet=function(e,r){this.facetInstance&&this.facetInstance.destroy();var i=$J(e);if(!i)throw new Error("facet '".concat(e,"' is not exist!"));return this.facetInstance=new i(this,E(E({},r),{type:e})),this},n.prototype.animate=function(e){return an(this.options,"animate",e),this},n.prototype.updateOptions=function(e){return this.clear(),Jt(this.options,e),this.views.forEach(function(r){return r.destroy()}),this.views=[],this.initOptions(),this.coordinateBBox=this.viewBBox,this},n.prototype.option=function(e,r){if(n.prototype[e])throw new Error(`Can't use built in variable name "`.concat(e,'", please change another one.'));return an(this.options,e,r),this},n.prototype.theme=function(e){return this.themeObject=Qt(e)?ot({},this.themeObject,Ag(e)):Wf(e),this},n.prototype.interaction=function(e,r){var i=this.interactions[e];i&&i.destroy();var a=gtt(e,this,r);return a&&(a.init(),this.interactions[e]=a),this},n.prototype.removeInteraction=function(e){var r=this.interactions[e];r&&(r.destroy(),this.interactions[e]=void 0)},n.prototype.changeData=function(e){this.isDataChanged=!0,this.emit(kt.BEFORE_CHANGE_DATA,ke.fromData(this,kt.BEFORE_CHANGE_DATA,null)),this.data(e),this.paint(!0);for(var r=this.views,i=0,a=r.length;i<a;i++){var o=r[i];o.changeData(e)}this.emit(kt.AFTER_CHANGE_DATA,ke.fromData(this,kt.AFTER_CHANGE_DATA,null))},n.prototype.createView=function(e){this.parent&&this.parent.parent&&console.warn("The view nesting recursive feature will be removed at G2 V4.1. Please avoid to use it.");var r={data:this.options.data,scales:er(this.options.scales),axes:er(this.options.axes),coordinate:er(this.coordinateController.getOption()),tooltip:er(this.options.tooltip),legends:er(this.options.legends),animate:this.options.animate,visible:this.visible},i=new n(E(E({parent:this,canvas:this.canvas,backgroundGroup:this.backgroundGroup.addGroup({zIndex:xc.BG}),middleGroup:this.middleGroup.addGroup({zIndex:xc.MID}),foregroundGroup:this.foregroundGroup.addGroup({zIndex:xc.FORE}),theme:this.themeObject,padding:this.padding},e),{options:E(E({},r),z(e,"options",{}))}));return this.views.push(i),i},n.prototype.view=function(e){return console.warn("This method will be removed at G2 V4.1. Please use chart.createView() instead."),this.createView(e)},n.prototype.removeView=function(e){var r=WH(this.views,function(i){return i===e})[0];return r&&r.destroy(),r},n.prototype.getCoordinate=function(){return this.coordinateInstance},n.prototype.getTheme=function(){return this.themeObject},n.prototype.getXScale=function(){var e=this.geometries[0];return e?e.getXScale():null},n.prototype.getYScales=function(){var e={},r=[];return this.geometries.forEach(function(i){var a=i.getYScale(),o=a.field;e[o]||(e[o]=!0,r.push(a))}),r},n.prototype.getScalesByDim=function(e){for(var r=this.geometries,i={},a=0,o=r.length;a<o;a++){var s=r[a],l=e==="x"?s.getXScale():s.getYScale();l&&!i[l.field]&&(i[l.field]=l)}return i},n.prototype.getScale=function(e,r){var i=r||this.getScaleKey(e);return this.getRootView().scalePool.getScale(i)},n.prototype.getScaleByField=function(e,r){return this.getScale(e,r)},n.prototype.getOptions=function(){return this.options},n.prototype.getData=function(){return this.filteredData},n.prototype.getOriginalData=function(){return this.options.data},n.prototype.getPadding=function(){return this.autoPadding.getPadding()},n.prototype.getGeometries=function(){return this.geometries},n.prototype.getElements=function(){return Hn(this.geometries,function(e,r){return e.concat(r.getElements())},[])},n.prototype.getElementsBy=function(e){return this.getElements().filter(function(r){return e(r)})},n.prototype.getLayer=function(e){return e===qe.BG?this.backgroundGroup:e===qe.MID?this.middleGroup:e===qe.FORE?this.foregroundGroup:this.foregroundGroup},n.prototype.isPointInPlot=function(e){return kJ(this.getCoordinate(),e)},n.prototype.getLegendAttributes=function(){return Wr(this.geometries.map(function(e){return e.getGroupAttributes()}))},n.prototype.getGroupScales=function(){var e=this.geometries.map(function(r){return r.getGroupScales()});return Oo(Wr(e))},n.prototype.getCanvas=function(){return this.getRootView().canvas},n.prototype.getRootView=function(){for(var e=this;;){if(e.parent){e=e.parent;continue}break}return e},n.prototype.getXY=function(e){var r=this.getCoordinate(),i=this.getScalesByDim("x"),a=this.getScalesByDim("y"),o,s;if($(e,function(l,c){i[c]&&(o=i[c].scale(l)),a[c]&&(s=a[c].scale(l))}),!J(o)&&!J(s))return r.convert({x:o,y:s})},n.prototype.getController=function(e){return Li(this.controllers,function(r){return r.name===e})},n.prototype.showTooltip=function(e){var r=this.getController("tooltip");return r&&r.showTooltip(e),this},n.prototype.hideTooltip=function(){var e=this.getController("tooltip");return e&&e.hideTooltip(),this},n.prototype.lockTooltip=function(){var e=this.getController("tooltip");return e&&e.lockTooltip(),this},n.prototype.unlockTooltip=function(){var e=this.getController("tooltip");return e&&e.unlockTooltip(),this},n.prototype.isTooltipLocked=function(){var e=this.getController("tooltip");return e&&e.isTooltipLocked()},n.prototype.getTooltipItems=function(e){var r=this.getController("tooltip");return r?r.getTooltipItems(e):[]},n.prototype.getSnapRecords=function(e){for(var r=this.geometries,i=[],a=0,o=r.length;a<o;a++){var s=r[a],l=s.dataArray;s.sort(l);for(var c=void 0,u=0,f=l.length;u<f;u++){var h=l[u];c=MB(e,h,s),c&&i.push(c)}}for(var d=this.views,a=0,o=d.length;a<o;a++){var p=d[a],v=p.getSnapRecords(e);i=i.concat(v)}return i},n.prototype.getComponents=function(){for(var e=[],r=this.controllers,i=0,a=r.length;i<a;i++){var o=r[i];e=e.concat(o.getComponents())}return e},n.prototype.filterData=function(e){var r=this.options.filters;return mn(r)===0?e:Ln(e,function(i,a){var o=Object.keys(r);return o.every(function(s){var l=r[s];return l(i[s],i,a)})})},n.prototype.filterFieldData=function(e,r){var i=this.options.filters,a=z(i,e);return To(a)?r:r.filter(function(o,s){return a(o[e],o,s)})},n.prototype.adjustCoordinate=function(){var e=this.getCoordinate(),r=e.start,i=e.end,a=this.coordinateBBox.bl,o=this.coordinateBBox.tr;if(Ne(r,a)&&Ne(i,o)){this.isCoordinateChanged=!1;return}this.isCoordinateChanged=!0,this.coordinateInstance=this.coordinateController.adjust(a,o)},n.prototype.paint=function(e){this.renderDataRecursive(e),this.syncScale(),this.emit(kt.BEFORE_PAINT),this.renderPaddingRecursive(e),this.renderLayoutRecursive(e),this.renderBackgroundStyleShape(),this.renderPaintRecursive(e),this.emit(kt.AFTER_PAINT),this.isDataChanged=!1},n.prototype.renderBackgroundStyleShape=function(){if(!this.parent){var e=z(this.themeObject,"background");if(e){this.backgroundStyleRectShape||(this.backgroundStyleRectShape=this.backgroundGroup.addShape("rect",{attrs:{},zIndex:-1,capture:!1}),this.backgroundStyleRectShape.toBack());var r=this.viewBBox,i=r.x,a=r.y,o=r.width,s=r.height;this.backgroundStyleRectShape.attr({fill:e,x:i,y:a,width:o,height:s})}else this.backgroundStyleRectShape&&(this.backgroundStyleRectShape.remove(!0),this.backgroundStyleRectShape=void 0)}},n.prototype.renderPaddingRecursive=function(e){this.calculateViewBBox(),this.adjustCoordinate(),this.initComponents(e),this.autoPadding=Btt(this).shrink(WS(this.appendPadding)),this.coordinateBBox=this.viewBBox.shrink(this.autoPadding.getPadding()),this.adjustCoordinate();var r=this.controllers.find(function(l){return l.name==="tooltip"});r.update();for(var i=this.views,a=0,o=i.length;a<o;a++){var s=i[a];s.renderPaddingRecursive(e)}},n.prototype.renderLayoutRecursive=function(e){var r=this.syncViewPadding===!0?Ntt:ut(this.syncViewPadding)?this.syncViewPadding:void 0;r&&(r(this,this.views,Rv),this.views.forEach(function(l){l.coordinateBBox=l.viewBBox.shrink(l.autoPadding.getPadding()),l.adjustCoordinate()})),this.doLayout();for(var i=this.views,a=0,o=i.length;a<o;a++){var s=i[a];s.renderLayoutRecursive(e)}},n.prototype.renderPaintRecursive=function(e){var r=this.middleGroup;if(this.limitInPlot){var i=$S(this.coordinateInstance),a=i.type,o=i.attrs;r.setClip({type:a,attrs:o})}else r.setClip(void 0);this.paintGeometries(e),this.renderComponents(e);for(var s=this.views,l=0,c=s.length;l<c;l++){var u=s[l];u.renderPaintRecursive(e)}},n.prototype.createScale=function(e,r,i,a){var o=z(this.options.scales,[e]),s=E(E({},o),i);return this.parent?this.parent.createScale(e,r,s,a):this.scalePool.createScale(e,r,s,a)},n.prototype.renderDataRecursive=function(e){this.doFilterData(),this.createCoordinate(),this.initGeometries(e),this.renderFacet(e);for(var r=this.views,i=0,a=r.length;i<a;i++){var o=r[i];o.renderDataRecursive(e)}},n.prototype.calculateViewBBox=function(){var e,r,i,a;if(this.parent){var o=this.parent.coordinateBBox;e=o.x,r=o.y,i=o.width,a=o.height}else e=0,r=0,i=this.canvas.get("width"),a=this.canvas.get("height");var s=this.region,l=s.start,c=s.end,u=new ar(e+i*l.x,r+a*l.y,i*(c.x-l.x),a*(c.y-l.y));(!this.viewBBox||!this.viewBBox.isEqual(u))&&(this.viewBBox=new ar(e+i*l.x,r+a*l.y,i*(c.x-l.x),a*(c.y-l.y))),this.coordinateBBox=this.viewBBox},n.prototype.initEvents=function(){this.foregroundGroup.on("*",this.onDelegateEvents),this.middleGroup.on("*",this.onDelegateEvents),this.backgroundGroup.on("*",this.onDelegateEvents),this.canvas.on("*",this.onCanvasEvent)},n.prototype.initComponentController=function(){for(var e=this.usedControllers,r=0,i=e.length;r<i;r++){var a=e[r],o=Itt(a);o&&this.controllers.push(new o(this))}},n.prototype.createViewEvent=function(e){var r=e.shape,i=e.name,a=r?r.get("origin"):null,o=new ke(this,e,a);return o.type=i,o},n.prototype.doPlotEvent=function(e){var r=e.type,i=e.x,a=e.y,o={x:i,y:a},s=["mousedown","mouseup","mousemove","mouseleave","mousewheel","touchstart","touchmove","touchend","touchcancel","click","dblclick","contextmenu"];if(s.includes(r)){var l=this.isPointInPlot(o),c=e.clone();if(l){var u="plot:".concat(r);c.type=u,this.emit(u,c),(r==="mouseleave"||r==="touchend")&&(this.isPreMouseInPlot=!1)}r==="mousemove"||r==="touchmove"?(this.isPreMouseInPlot&&!l?(r==="mousemove"&&(c.type=dr.MOUSE_LEAVE,this.emit(dr.MOUSE_LEAVE,c)),c.type=dr.LEAVE,this.emit(dr.LEAVE,c)):!this.isPreMouseInPlot&&l&&(r==="mousemove"&&(c.type=dr.MOUSE_ENTER,this.emit(dr.MOUSE_ENTER,c)),c.type=dr.ENTER,this.emit(dr.ENTER,c)),this.isPreMouseInPlot=l):(r==="mouseleave"||r==="touchend")&&this.isPreMouseInPlot&&(r==="mouseleave"&&(c.type=dr.MOUSE_LEAVE,this.emit(dr.MOUSE_LEAVE,c)),c.type=dr.LEAVE,this.emit(dr.LEAVE,c),this.isPreMouseInPlot=!1)}},n.prototype.doFilterData=function(){var e=this.options.data;this.filteredData=this.filterData(e)},n.prototype.initGeometries=function(e){this.createOrUpdateScales();for(var r=this.getCoordinate(),i=z(this.options,"scales",{}),a=this.geometries,o=0,s=a.length;o<s;o++){var l=a[o];l.scales=this.getGeometryScales();var c={coordinate:r,scaleDefs:i,data:this.filteredData,theme:this.themeObject,isDataChanged:this.isDataChanged,isCoordinateChanged:this.isCoordinateChanged};e?l.update(c):l.init(c)}this.adjustScales()},n.prototype.createOrUpdateScales=function(){for(var e=this.getScaleFields(),r=this.getGroupedFields(),i=this.getOptions(),a=i.data,o=i.scales,s=o===void 0?{}:o,l=this.filteredData,c=0,u=e.length;c<u;c++){var f=e[c],h=s[f],d=this.getScaleKey(f);this.createScale(f,r.includes(f)?a:l,h,d),this.createdScaleKeys.set(d,!0)}},n.prototype.syncScale=function(){this.getRootView().scalePool.sync(this.getCoordinate(),this.theme)},n.prototype.getGeometryScales=function(){for(var e=this.getScaleFields(),r={},i=0;i<e.length;i++){var a=e[i];r[a]=this.getScaleByField(a)}return r},n.prototype.getScaleFields=function(){for(var e=[],r=new Map,i=this.geometries,a=0;a<i.length;a++){var o=i[a],s=o.getScaleFields();Oo(s,e,r)}return e},n.prototype.getGroupedFields=function(){for(var e=[],r=new Map,i=this.geometries,a=0;a<i.length;a++){var o=i[a],s=o.getGroupFields();Oo(s,e,r)}return e},n.prototype.adjustScales=function(){this.adjustCategoryScaleRange()},n.prototype.adjustCategoryScaleRange=function(){var e=this,r=X([this.getXScale()],R(this.getYScales()),!1).filter(function(o){return!!o}),i=this.getCoordinate(),a=this.options.scales;$(r,function(o){var s=o.field,l=o.values,c=o.isCategory,u=o.isIdentity;(c||u)&&l&&!z(a,[s,"range"])&&(o.range=nB(o,i,e.theme))})},n.prototype.initComponents=function(e){for(var r=this.controllers,i=0;i<r.length;i++){var a=r[i];e?a.update():(a.clear(),a.render())}},n.prototype.doLayout=function(){this.layoutFunc(this)},n.prototype.createCoordinate=function(){var e=this.coordinateBBox.bl,r=this.coordinateBBox.tr;this.coordinateInstance=this.coordinateController.create(e,r)},n.prototype.paintGeometries=function(e){for(var r=this.options.animate,i=this.getCoordinate(),a={x:this.viewBBox.x,y:this.viewBBox.y,minX:this.viewBBox.minX,minY:this.viewBBox.minY,maxX:this.viewBBox.maxX,maxY:this.viewBBox.maxY,width:this.viewBBox.width,height:this.viewBBox.height},o=this.geometries,s=0;s<o.length;s++){var l=o[s];l.coordinate=i,l.canvasRegion=a,r||l.animate(!1),l.paint(e)}},n.prototype.renderComponents=function(e){for(var r=this.getComponents(),i=0;i<r.length;i++){var a=r[i];a.component.render()}},n.prototype.renderFacet=function(e){this.facetInstance&&(e?this.facetInstance.update():(this.facetInstance.clear(),this.facetInstance.init(),this.facetInstance.render()))},n.prototype.initOptions=function(){var e=this,r=this.options,i=r.geometries,a=i===void 0?[]:i,o=r.interactions,s=o===void 0?[]:o,l=r.views,c=l===void 0?[]:l,u=r.annotations,f=u===void 0?[]:u,h=r.coordinate,d=r.events,p=r.facets;this.coordinateController?h&&this.coordinateController.update(h):this.coordinateController=new Ftt(h);for(var v=0;v<a.length;v++){var g=a[v];this.createGeometry(g)}for(var y=0;y<s.length;y++){var m=s[y],x=m.type,b=m.cfg;this.interaction(x,b)}for(var w=0;w<c.length;w++){var S=c[w];this.createView(S)}for(var O=this.getController("annotation"),M=0;M<f.length;M++){var A=f[M];O.annotation(A)}d&&$(d,function(T,C){e.on(C,T)}),p&&$(p,function(T){var C=T.type,P=vt(T,["type"]);e.facet(C,P)})},n.prototype.createGeometry=function(e){var r=e.type,i=e.cfg,a=i===void 0?{}:i;if(this[r]){var o=this[r](a);$(e,function(s,l){ut(o[l])&&o[l](s)})}},n.prototype.getScaleKey=function(e){return"".concat(this.id,"-").concat(e)},n}(oS);function wa(t,n){AB.prototype[t.toLowerCase()]=function(e){e===void 0&&(e={});var r=E({container:this.middleGroup.addGroup(),labelsContainer:this.foregroundGroup.addGroup()},e),i=new n(r);return this.geometries.push(i),i}}var $tt=function(t){G(n,t);function n(e){var r=this,i=e.container,a=e.width,o=e.height,s=e.autoFit,l=s===void 0?!1:s,c=e.padding,u=e.appendPadding,f=e.renderer,h=f===void 0?"canvas":f,d=e.pixelRatio,p=e.localRefresh,v=p===void 0?!0:p,g=e.visible,y=g===void 0?!0:g,m=e.supportCSSTransform,x=m===void 0?!1:m,b=e.defaultInteractions,w=b===void 0?["tooltip","legend-filter","legend-active","continuous-filter","ellipsis-text","axis-description"]:b,S=e.options,O=e.limitInPlot,M=e.theme,A=e.syncViewPadding,T=pt(i)?document.getElementById(i):i,C=Do('<div style="position:relative;"></div>');T.appendChild(C);var P=KE(T,l,a,o),_=fX(h),k=new _.Canvas(E({container:C,pixelRatio:d,localRefresh:v,supportCSSTransform:x},P));return r=t.call(this,{parent:null,canvas:k,backgroundGroup:k.addGroup({zIndex:xc.BG}),middleGroup:k.addGroup({zIndex:xc.MID}),foregroundGroup:k.addGroup({zIndex:xc.FORE}),padding:c,appendPadding:u,visible:y,options:S,limitInPlot:O,theme:M,syncViewPadding:A})||this,r.onResize=JD(function(){r.forceFit()},300),r.ele=T,r.canvas=k,r.width=P.width,r.height=P.height,r.autoFit=l,r.localRefresh=v,r.renderer=h,r.wrapperElement=C,r.updateCanvasStyle(),r.bindAutoFit(),r.initDefaultInteractions(w),r}return n.prototype.initDefaultInteractions=function(e){var r=this;$(e,function(i){r.interaction(i)})},n.prototype.aria=function(e){var r="aria-label";e===!1?this.ele.removeAttribute(r):this.ele.setAttribute(r,e.label)},n.prototype.changeSize=function(e,r){return this.width===e&&this.height===r?this:(this.emit(kt.BEFORE_CHANGE_SIZE),this.width=e,this.height=r,this.canvas.changeSize(e,r),this.render(!0),this.emit(kt.AFTER_CHANGE_SIZE),this)},n.prototype.clear=function(){t.prototype.clear.call(this),this.aria(!1)},n.prototype.destroy=function(){t.prototype.destroy.call(this),this.unbindAutoFit(),this.canvas.destroy(),mX(this.wrapperElement),this.wrapperElement=null},n.prototype.changeVisible=function(e){return t.prototype.changeVisible.call(this,e),this.wrapperElement.style.display=e?"":"none",this},n.prototype.forceFit=function(){if(!this.destroyed){var e=KE(this.ele,!0,this.width,this.height),r=e.width,i=e.height;this.changeSize(r,i)}},n.prototype.updateCanvasStyle=function(){Wn(this.canvas.get("el"),{display:"inline-block",verticalAlign:"middle"})},n.prototype.bindAutoFit=function(){this.autoFit&&window.addEventListener("resize",this.onResize)},n.prototype.unbindAutoFit=function(){this.autoFit&&window.removeEventListener("resize",this.onResize)},n}(AB),_u=function(){function t(n){this.visible=!0,this.components=[],this.view=n}return t.prototype.clear=function(n){$(this.components,function(e){e.component.destroy()}),this.components=[]},t.prototype.destroy=function(){this.clear()},t.prototype.getComponents=function(){return this.components},t.prototype.changeVisible=function(n){this.visible!==n&&(this.components.forEach(function(e){n?e.component.show():e.component.hide()}),this.visible=n)},t}();function jtt(t){for(var n=[],e=function(i){var a=t[i],o=Li(n,function(s){return s.color===a.color&&s.name===a.name&&s.value===a.value&&s.title===a.title});o||n.push(a)},r=0;r<t.length;r++)e(r);return n}var EB=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.isLocked=!1,e}return Object.defineProperty(n.prototype,"name",{get:function(){return"tooltip"},enumerable:!1,configurable:!0}),n.prototype.init=function(){},n.prototype.isVisible=function(){var e=this.view.getOptions().tooltip;return e!==!1},n.prototype.render=function(){},n.prototype.showTooltip=function(e){if(this.point=e,!!this.isVisible()){var r=this.view,i=this.getTooltipItems(e);if(!i.length){this.hideTooltip();return}var a=this.getTitle(i),o={x:i[0].x,y:i[0].y};r.emit("tooltip:show",ke.fromData(r,"tooltip:show",E({items:i,title:a},e)));var s=this.getTooltipCfg(),l=s.follow,c=s.showMarkers,u=s.showCrosshairs,f=s.showContent,h=s.marker,d=this.items,p=this.title;if(!Ne(p,a)||!Ne(d,i)?(r.emit("tooltip:change",ke.fromData(r,"tooltip:change",E({items:i,title:a},e))),(ut(f)?f(i):f)&&(this.tooltip||this.renderTooltip(),this.tooltip.update(Jt({},s,{items:this.getItemsAfterProcess(i),title:a},l?e:{})),this.tooltip.show()),c&&this.renderTooltipMarkers(i,h)):(this.tooltip&&l&&(this.tooltip.update(e),this.tooltip.show()),this.tooltipMarkersGroup&&this.tooltipMarkersGroup.show()),this.items=i,this.title=a,u){var v=z(s,["crosshairs","follow"],!1);this.renderCrosshairs(v?e:o,s)}}},n.prototype.hideTooltip=function(){var e=this.getTooltipCfg().follow;if(!e){this.point=null;return}var r=this.tooltipMarkersGroup;r&&r.hide();var i=this.xCrosshair,a=this.yCrosshair;i&&i.hide(),a&&a.hide();var o=this.tooltip;o&&o.hide(),this.view.emit("tooltip:hide",ke.fromData(this.view,"tooltip:hide",{})),this.point=null},n.prototype.lockTooltip=function(){this.isLocked=!0,this.tooltip&&this.tooltip.setCapture(!0)},n.prototype.unlockTooltip=function(){this.isLocked=!1;var e=this.getTooltipCfg();this.tooltip&&this.tooltip.setCapture(e.capture)},n.prototype.isTooltipLocked=function(){return this.isLocked},n.prototype.clear=function(){var e=this,r=e.tooltip,i=e.xCrosshair,a=e.yCrosshair,o=e.tooltipMarkersGroup;r&&(r.hide(),r.clear()),i&&i.clear(),a&&a.clear(),o&&o.clear(),r!=null&&r.get("customContent")&&(this.tooltip.destroy(),this.tooltip=null),this.title=null,this.items=null},n.prototype.destroy=function(){this.tooltip&&this.tooltip.destroy(),this.xCrosshair&&this.xCrosshair.destroy(),this.yCrosshair&&this.yCrosshair.destroy(),this.guideGroup&&this.guideGroup.remove(!0),this.reset()},n.prototype.reset=function(){this.items=null,this.title=null,this.tooltipMarkersGroup=null,this.tooltipCrosshairsGroup=null,this.xCrosshair=null,this.yCrosshair=null,this.tooltip=null,this.guideGroup=null,this.isLocked=!1,this.point=null},n.prototype.changeVisible=function(e){if(this.visible!==e){var r=this,i=r.tooltip,a=r.tooltipMarkersGroup,o=r.xCrosshair,s=r.yCrosshair;e?(i&&i.show(),a&&a.show(),o&&o.show(),s&&s.show()):(i&&i.hide(),a&&a.hide(),o&&o.hide(),s&&s.hide()),this.visible=e}},n.prototype.getTooltipItems=function(e){var r,i,a,o,s,l,c=this.findItemsFromView(this.view,e);if(c.length){c=Wr(c);try{for(var u=Ct(c),f=u.next();!f.done;f=u.next()){var h=f.value;try{for(var d=(a=void 0,Ct(h)),p=d.next();!p.done;p=d.next()){var v=p.value,g=v.mappingData,y=g.x,m=g.y;v.x=et(y)?y[y.length-1]:y,v.y=et(m)?m[m.length-1]:m}}catch(T){a={error:T}}finally{try{p&&!p.done&&(o=d.return)&&o.call(d)}finally{if(a)throw a.error}}}}catch(T){r={error:T}}finally{try{f&&!f.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}var x=this.getTooltipCfg().shared;if(x===!1&&c.length>1){var b=c[0],w=Math.abs(e.y-b[0].y);try{for(var S=Ct(c),O=S.next();!O.done;O=S.next()){var M=O.value,A=Math.abs(e.y-M[0].y);A<=w&&(b=M,w=A)}}catch(T){s={error:T}}finally{try{O&&!O.done&&(l=S.return)&&l.call(S)}finally{if(s)throw s.error}}c=[b]}return jtt(Wr(c))}return[]},n.prototype.layout=function(){},n.prototype.update=function(){if(this.point&&this.showTooltip(this.point),this.tooltip){var e=this.view.getCanvas();this.tooltip.set("region",{start:{x:0,y:0},end:{x:e.get("width"),y:e.get("height")}})}},n.prototype.isCursorEntered=function(e){if(this.tooltip){var r=this.tooltip.getContainer(),i=this.tooltip.get("capture");if(r&&i){var a=r.getBoundingClientRect(),o=a.x,s=a.y,l=a.width,c=a.height;return new ar(o,s,l,c).isPointIn(e)}}return!1},n.prototype.getTooltipCfg=function(){var e=this.view,r=e.getOptions().tooltip,i=this.processCustomContent(r),a=e.getTheme(),o=z(a,["components","tooltip"],{}),s=z(i,"enterable",o.enterable);return ot({},o,i,{capture:!!(s||this.isLocked)})},n.prototype.processCustomContent=function(e){if(Dc(e)||!z(e,"customContent"))return e;var r=e.customContent,i=function(a,o){var s=r(a,o)||"";return pt(s)?'<div class="g2-tooltip">'+s+"</div>":s};return E(E({},e),{customContent:i})},n.prototype.getTitle=function(e){var r=e[0].title||e[0].name;return this.title=r,r},n.prototype.renderTooltip=function(){var e=this.view.getCanvas(),r={start:{x:0,y:0},end:{x:e.get("width"),y:e.get("height")}},i=this.getTooltipCfg(),a=new E0(E(E({parent:e.get("el").parentNode,region:r},i),{visible:!1,crosshairs:null}));a.init(),this.tooltip=a},n.prototype.renderTooltipMarkers=function(e,r){var i,a,o=this.getTooltipMarkersGroup(),s=this.view.getRootView(),l=s.limitInPlot;try{for(var c=Ct(e),u=c.next();!u.done;u=c.next()){var f=u.value,h=f.x,d=f.y;if(l||o!=null&&o.getClip()){var p=$S(s.getCoordinate()),v=p.type,g=p.attrs;o==null||o.setClip({type:v,attrs:g})}else o==null||o.setClip(void 0);var y=this.view.getTheme(),m=z(y,["components","tooltip","marker"],{}),x=E(E({fill:f.color,symbol:"circle",shadowColor:f.color},ut(r)?E(E({},m),r(f)):r),{x:h,y:d});o.addShape("marker",{attrs:x})}}catch(b){i={error:b}}finally{try{u&&!u.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}},n.prototype.renderCrosshairs=function(e,r){var i=z(r,["crosshairs","type"],"x");i==="x"?(this.yCrosshair&&this.yCrosshair.hide(),this.renderXCrosshairs(e,r)):i==="y"?(this.xCrosshair&&this.xCrosshair.hide(),this.renderYCrosshairs(e,r)):i==="xy"&&(this.renderXCrosshairs(e,r),this.renderYCrosshairs(e,r))},n.prototype.renderXCrosshairs=function(e,r){var i=this.getViewWithGeometry(this.view).getCoordinate(),a,o;if(i.isRect)i.isTransposed?(a={x:i.start.x,y:e.y},o={x:i.end.x,y:e.y}):(a={x:e.x,y:i.end.y},o={x:e.x,y:i.start.y});else{var s=Yc(i,e),l=i.getCenter(),c=i.getRadius();o=tn(l.x,l.y,c,s),a=l}var u=ot({start:a,end:o,container:this.getTooltipCrosshairsGroup()},z(r,"crosshairs",{}),this.getCrosshairsText("x",e,r));delete u.type;var f=this.xCrosshair;f?f.update(u):(f=new X5(u),f.init()),f.render(),f.show(),this.xCrosshair=f},n.prototype.renderYCrosshairs=function(e,r){var i=this.getViewWithGeometry(this.view).getCoordinate(),a,o;if(i.isRect){var s=void 0,l=void 0;i.isTransposed?(s={x:e.x,y:i.end.y},l={x:e.x,y:i.start.y}):(s={x:i.start.x,y:e.y},l={x:i.end.x,y:e.y}),a={start:s,end:l},o="Line"}else a={center:i.getCenter(),radius:T0(i,e),startAngle:i.startAngle,endAngle:i.endAngle},o="Circle";a=ot({container:this.getTooltipCrosshairsGroup()},a,z(r,"crosshairs",{}),this.getCrosshairsText("y",e,r)),delete a.type;var c=this.yCrosshair;c?i.isRect&&c.get("type")==="circle"||!i.isRect&&c.get("type")==="line"?(c=new hC[o](a),c.init()):c.update(a):(c=new hC[o](a),c.init()),c.render(),c.show(),this.yCrosshair=c},n.prototype.getCrosshairsText=function(e,r,i){var a=z(i,["crosshairs","text"]),o=z(i,["crosshairs","follow"]),s=this.items;if(a){var l=this.getViewWithGeometry(this.view),c=s[0],u=l.getXScale(),f=l.getYScales()[0],h=void 0,d=void 0;if(o){var p=this.view.getCoordinate().invert(r);h=u.invert(p.x),d=f.invert(p.y)}else h=c.data[u.field],d=c.data[f.field];var v=e==="x"?h:d;return ut(a)?a=a(e,v,s,r):a.content=v,{text:a}}},n.prototype.getGuideGroup=function(){if(!this.guideGroup){var e=this.view.foregroundGroup;this.guideGroup=e.addGroup({name:"tooltipGuide",capture:!1})}return this.guideGroup},n.prototype.getTooltipMarkersGroup=function(){var e=this.tooltipMarkersGroup;return e&&!e.destroyed?(e.clear(),e.show()):(e=this.getGuideGroup().addGroup({name:"tooltipMarkersGroup"}),e.toFront(),this.tooltipMarkersGroup=e),e},n.prototype.getTooltipCrosshairsGroup=function(){var e=this.tooltipCrosshairsGroup;return e||(e=this.getGuideGroup().addGroup({name:"tooltipCrosshairsGroup",capture:!1}),e.toBack(),this.tooltipCrosshairsGroup=e),e},n.prototype.findItemsFromView=function(e,r){var i,a;if(e.getOptions().tooltip===!1)return[];var o=this.getTooltipCfg(),s=zb(e,r,o);try{for(var l=Ct(e.views),c=l.next();!c.done;c=l.next()){var u=c.value;s=s.concat(this.findItemsFromView(u,r))}}catch(f){i={error:f}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}return s},n.prototype.getViewWithGeometry=function(e){var r=this;return e.geometries.length?e:Li(e.views,function(i){return r.getViewWithGeometry(i)})},n.prototype.getItemsAfterProcess=function(e){var r=this.getTooltipCfg().customItems,i=r||function(a){return a};return i(e)},n}(_u),TB={};function CB(t){return TB[t.toLowerCase()]}function Ur(t,n){TB[t.toLowerCase()]=n}var Vc={appear:{duration:450,easing:"easeQuadOut"},update:{duration:400,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut"},leave:{duration:350,easing:"easeQuadIn"}},ztt={interval:function(t){return{enter:{animation:t.isRect?t.isTransposed?"scale-in-x":"scale-in-y":"fade-in"},update:{animation:t.isPolar&&t.isTransposed?"sector-path-update":null},leave:{animation:"fade-out"}}},line:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},path:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},point:{appear:{animation:"zoom-in"},enter:{animation:"zoom-in"},leave:{animation:"zoom-out"}},area:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},polygon:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},schema:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},edge:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},label:{appear:{animation:"fade-in",delay:450},enter:{animation:"fade-in"},update:{animation:"position-update"},leave:{animation:"fade-out"}}},DC={line:function(){return{animation:"wave-in"}},area:function(){return{animation:"wave-in"}},path:function(){return{animation:"fade-in"}},interval:function(t){var n;return t.isRect?n=t.isTransposed?"grow-in-x":"grow-in-y":(n="grow-in-xy",t.isPolar&&t.isTransposed&&(n="wave-in")),{animation:n}},schema:function(t){var n;return t.isRect?n=t.isTransposed?"grow-in-x":"grow-in-y":n="grow-in-xy",{animation:n}},polygon:function(){return{animation:"fade-in",duration:500}},edge:function(){return{animation:"fade-in"}}};function Gtt(t,n){return{delay:ut(t.delay)?t.delay(n):t.delay,easing:ut(t.easing)?t.easing(n):t.easing,duration:ut(t.duration)?t.duration(n):t.duration,callback:t.callback,repeat:t.repeat}}function PB(t,n,e){var r=ztt[t];return r&&(ut(r)&&(r=r(n)),r=ot({},Vc,r),e)?r[e]:r}function Mc(t,n,e){var r=z(t.get("origin"),"data",ae),i=n.animation,a=Gtt(n,r);if(i){var o=CB(i);o&&o(t,a,e)}else t.animate(e.toAttrs,a)}function Ytt(t,n,e,r,i){if(DC[e]){var a=DC[e](r),o=CB(z(a,"animation",""));if(o){var s=E(E(E({},Vc.appear),a),n);t.stopAnimate(),o(t,s,{coordinate:r,minYPoint:i,toAttrs:null})}}}var HS="element-background",kB=function(t){G(n,t);function n(e){var r=t.call(this,e)||this;r.labelShape=[],r.states=[];var i=e.shapeFactory,a=e.container,o=e.offscreenGroup,s=e.elementIndex,l=e.visible,c=l===void 0?!0:l;return r.shapeFactory=i,r.container=a,r.offscreenGroup=o,r.visible=c,r.elementIndex=s,r}return n.prototype.draw=function(e,r){r===void 0&&(r=!1),this.model=e,this.data=e.data,this.shapeType=this.getShapeType(e),this.drawShape(e,r),this.visible===!1&&this.changeVisible(!1)},n.prototype.update=function(e){var r=this,i=r.shapeFactory,a=r.shape;if(a){this.model=e,this.data=e.data,this.shapeType=this.getShapeType(e),this.setShapeInfo(a,e);var o=this.getOffscreenGroup(),s=i.drawShape(this.shapeType,e,o);s.cfg.data=this.data,s.cfg.origin=e,s.cfg.element=this,this.syncShapeStyle(a,s,this.getStates(),this.getAnimateCfg("update"))}},n.prototype.destroy=function(){var e=this,r=e.shapeFactory,i=e.shape;if(i){var a=this.getAnimateCfg("leave");a?Mc(i,a,{coordinate:r.coordinate,toAttrs:E({},i.attr())}):i.remove(!0)}this.states=[],this.shapeFactory=void 0,this.container=void 0,this.shape=void 0,this.animate=void 0,this.geometry=void 0,this.labelShape=[],this.model=void 0,this.data=void 0,this.offscreenGroup=void 0,this.statesStyle=void 0,t.prototype.destroy.call(this)},n.prototype.changeVisible=function(e){t.prototype.changeVisible.call(this,e),e?(this.shape&&this.shape.show(),this.labelShape&&this.labelShape.forEach(function(r){r.show()})):(this.shape&&this.shape.hide(),this.labelShape&&this.labelShape.forEach(function(r){r.hide()}))},n.prototype.setState=function(e,r){var i=this,a=i.states,o=i.shapeFactory,s=i.model,l=i.shape,c=i.shapeType,u=a.indexOf(e);if(r){if(u>-1)return;a.push(e),(e==="active"||e==="selected")&&(l==null||l.toFront())}else{if(u===-1)return;if(a.splice(u,1),e==="active"||e==="selected"){var f=this.geometry,h=f.sortZIndex,d=f.zIndexReversed,p=d?this.geometry.elements.length-this.elementIndex:this.elementIndex;h?l.setZIndex(p):l.set("zIndex",p)}}var v=o.drawShape(c,s,this.getOffscreenGroup());a.length?this.syncShapeStyle(l,v,a,null):this.syncShapeStyle(l,v,["reset"],null),v.remove(!0);var g={state:e,stateStatus:r,element:this,target:this.container};this.container.emit("statechange",g),I5(this.shape,"statechange",g)},n.prototype.clearStates=function(){var e=this,r=this.states;$(r,function(i){e.setState(i,!1)}),this.states=[]},n.prototype.hasState=function(e){return this.states.includes(e)},n.prototype.getStates=function(){return this.states},n.prototype.getData=function(){return this.data},n.prototype.getModel=function(){return this.model},n.prototype.getBBox=function(){var e=this,r=e.shape,i=e.labelShape,a={x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0};return r&&(a=r.getCanvasBBox()),i&&i.forEach(function(o){var s=o.getCanvasBBox();a.x=Math.min(s.x,a.x),a.y=Math.min(s.y,a.y),a.minX=Math.min(s.minX,a.minX),a.minY=Math.min(s.minY,a.minY),a.maxX=Math.max(s.maxX,a.maxX),a.maxY=Math.max(s.maxY,a.maxY)}),a.width=a.maxX-a.minX,a.height=a.maxY-a.minY,a},n.prototype.getStatesStyle=function(){if(!this.statesStyle){var e=this,r=e.shapeType,i=e.geometry,a=e.shapeFactory,o=i.stateOption,s=a.defaultShapeType,l=a.theme[r]||a.theme[s];this.statesStyle=ot({},l,o)}return this.statesStyle},n.prototype.getStateStyle=function(e,r){var i=this.getStatesStyle(),a=z(i,[e,"style"],{}),o=a[r]||a;return ut(o)?o(this):o},n.prototype.getAnimateCfg=function(e){var r=this,i=this.animate;if(i){var a=i[e];return a&&E(E({},a),{callback:function(){var o;ut(a.callback)&&a.callback(),(o=r.geometry)===null||o===void 0||o.emit(Fo.AFTER_DRAW_ANIMATE)}})}return null},n.prototype.drawShape=function(e,r){var i;r===void 0&&(r=!1);var a=this,o=a.shapeFactory,s=a.container,l=a.shapeType;if(this.shape=o.drawShape(l,e,s),this.shape){this.setShapeInfo(this.shape,e);var c=this.shape.cfg.name;c?pt(c)&&(this.shape.cfg.name=["element",c]):this.shape.cfg.name=["element",this.shapeFactory.geometryType];var u=r?"enter":"appear",f=this.getAnimateCfg(u);f&&((i=this.geometry)===null||i===void 0||i.emit(Fo.BEFORE_DRAW_ANIMATE),Mc(this.shape,f,{coordinate:o.coordinate,toAttrs:E({},this.shape.attr())}))}},n.prototype.getOffscreenGroup=function(){if(!this.offscreenGroup){var e=this.container.getGroupBase();this.offscreenGroup=new e({})}return this.offscreenGroup},n.prototype.setShapeInfo=function(e,r){var i=this;if(e.cfg.origin=r,e.cfg.element=this,e.isGroup()){var a=e.get("children");a.forEach(function(o){i.setShapeInfo(o,r)})}},n.prototype.syncShapeStyle=function(e,r,i,a,o){var s=this,l;if(i===void 0&&(i=[]),o===void 0&&(o=0),!(!e||!r)){var c=e.get("clipShape"),u=r.get("clipShape");if(this.syncShapeStyle(c,u,i,a),e.isGroup())for(var f=e.get("children"),h=r.get("children"),d=0;d<f.length;d++)this.syncShapeStyle(f[d],h[d],i,a,o+d);else{if(!Mr(i)&&!Ne(i,["reset"])){var p=e.get("name");et(p)&&(p=p[1]),$(i,function(g){if(r.get("name")!==HS){var y=s.getStateStyle(g,p||o);r.attr(y)}})}var v=tB(e,r);this.animate?a?((l=this.geometry)===null||l===void 0||l.emit(Fo.BEFORE_DRAW_ANIMATE),Mc(e,a,{coordinate:this.shapeFactory.coordinate,toAttrs:v,shapeModel:this.model})):Mr(i)?e.attr(v):(e.stopAnimate(),e.animate(v,{duration:300})):e.attr(v)}}},n.prototype.getShapeType=function(e){var r=z(e,"shape");return et(r)?r[0]:r},n}(oS),_B={},LB={};function Wtt(t){return _B[t.toLowerCase()]}function wd(t,n){_B[t.toLowerCase()]=n}function Vtt(t){return LB[t.toLowerCase()]}function Cr(t,n){LB[t.toLowerCase()]=n}var Htt={coordinate:null,defaultShapeType:null,theme:null,getShapePoints:function(t,n){var e=this.getShape(t);return e.getPoints?e.getPoints(n):this.getDefaultPoints(n)},getShape:function(t){var n=this[t]||this[this.defaultShapeType];return n.coordinate=this.coordinate,n},getDefaultPoints:function(){return[]},getDefaultStyle:function(t){return z(t,[this.defaultShapeType,"default","style"],{})},getMarker:function(t,n){var e=this.getShape(t);if(!e.getMarker){var r=this.defaultShapeType;e=this.getShape(r)}var i=this.theme,a=z(i,[t,"default"],{}),o=e.getMarker(n);return ot({},a,o)},drawShape:function(t,n,e){var r=this.getShape(t);return r.draw(n,e)}},Xtt={coordinate:null,parsePath:function(t){var n=this.coordinate,e=KJ(t);return n.isPolar?e=UJ(n,e):e=XJ(n,e),e},parsePoint:function(t){var n=this.coordinate;return n.convert(t)},parsePoints:function(t){var n=this.coordinate;return t.map(function(e){return n.convert(e)})},draw:function(t,n){}},XS={};function ss(t,n){var e=Cl(t),r=E(E(E({},Htt),n),{geometryType:t});return XS[e]=r,r}function Xt(t,n,e){var r=Cl(t),i=XS[r],a=E(E({},Xtt),e);return i[n]=a,a}function RC(t){var n=Cl(t);return XS[n]}function Utt(t,n,e){var r,i;if(e===void 0&&(e={}),!n)return[t];var a=XD(t,n),o=[];if(n.length===1&&e[n[0]]){var s=e[n[0]];try{for(var l=Ct(s),c=l.next();!c.done;c=l.next()){var u=c.value,f=a["_".concat(u)];f&&o.push(f)}}catch(p){r={error:p}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}}else for(var h in a)if(a.hasOwnProperty(h)){var d=a[h];o.push(d)}return o}function IB(t,n){return qy(["color","shape","size","x","y","isInCircle","data","style","defaultStyle","points","mappingData"],function(e){return!Ne(t[e],n[e])})}function tf(t){return et(t)?t:t.split("*")}function FB(t,n){for(var e=[],r=[],i=[],a=new Map,o=0;o<n.length;o++){var s=n[o];t[s]?r.push(s):e.push(s),a.set(s,!0)}return Object.keys(t).forEach(function(l){a.has(l)||i.push(l)}),{added:e,updated:r,removed:i}}var ls=function(t){G(n,t);function n(e){var r=t.call(this,e)||this;r.type="base",r.attributes={},r.elements=[],r.elementsMap={},r.animateOption=!0,r.attributeOption={},r.lastElementsMap={},r.generatePoints=!1,r.beforeMappingData=null,r.adjusts={},r.idFields=[],r.hasSorted=!1,r.isCoordinateChanged=!1;var i=e.container,a=e.labelsContainer,o=e.coordinate,s=e.data,l=e.sortable,c=l===void 0?!1:l,u=e.visible,f=u===void 0?!0:u,h=e.theme,d=e.scales,p=d===void 0?{}:d,v=e.scaleDefs,g=v===void 0?{}:v,y=e.intervalPadding,m=e.dodgePadding,x=e.maxColumnWidth,b=e.minColumnWidth,w=e.columnWidthRatio,S=e.roseWidthRatio,O=e.multiplePieWidthRatio,M=e.zIndexReversed,A=e.sortZIndex,T=e.useDeferredLabel;return r.container=i,r.labelsContainer=a,r.coordinate=o,r.data=s,r.sortable=c,r.visible=f,r.userTheme=h,r.scales=p,r.scaleDefs=g,r.intervalPadding=y,r.dodgePadding=m,r.maxColumnWidth=x,r.minColumnWidth=b,r.columnWidthRatio=w,r.roseWidthRatio=S,r.multiplePieWidthRatio=O,r.zIndexReversed=M,r.sortZIndex=A,r.useDeferredLabel=T?typeof T=="number"?T:1/0:null,r}return n.prototype.position=function(e){var r=e;sa(e)||(r={fields:tf(e)});var i=z(r,"fields");return i.length===1&&(i.unshift("1"),an(r,"fields",i)),an(this.attributeOption,"position",r),this},n.prototype.color=function(e,r){return this.createAttrOption("color",e,r),this},n.prototype.shape=function(e,r){return this.createAttrOption("shape",e,r),this},n.prototype.size=function(e,r){return this.createAttrOption("size",e,r),this},n.prototype.adjust=function(e){var r=e;return(pt(e)||sa(e))&&(r=[e]),$(r,function(i,a){Qt(i)||(r[a]={type:i})}),this.adjustOption=r,this},n.prototype.style=function(e,r){if(pt(e)){var i=tf(e);this.styleOption={fields:i,callback:r}}else{var a=e,i=a.fields,o=a.callback,s=a.cfg;i||o||s?this.styleOption=e:this.styleOption={cfg:e}}return this},n.prototype.tooltip=function(e,r){if(pt(e)){var i=tf(e);this.tooltipOption={fields:i,callback:r}}else this.tooltipOption=e;return this},n.prototype.animate=function(e){return this.animateOption=e,this},n.prototype.label=function(e,r,i){if(pt(e)){var a={},o=tf(e);a.fields=o,ut(r)?a.callback=r:sa(r)&&(a.cfg=r),i&&(a.cfg=i),this.labelOption=a}else this.labelOption=e;return this},n.prototype.state=function(e){return this.stateOption=e,this},n.prototype.customInfo=function(e){return this.customOption=e,this},n.prototype.init=function(e){e===void 0&&(e={}),this.setCfg(e),this.initAttributes(),this.processData(this.data),this.adjustScale()},n.prototype.update=function(e){e===void 0&&(e={});var r=e.data,i=e.isDataChanged,a=e.isCoordinateChanged,o=this,s=o.attributeOption,l=o.lastAttributeOption;Ne(s,l)?r&&(i||!Ne(r,this.data))?(this.setCfg(e),this.initAttributes(),this.processData(r)):this.setCfg(e):this.init(e),this.adjustScale(),this.isCoordinateChanged=a},n.prototype.paint=function(e){var r=this;e===void 0&&(e=!1),this.animateOption&&(this.animateOption=ot({},PB(this.type,this.coordinate),this.animateOption)),this.defaultSize=void 0,this.elementsMap={},this.elements=[];var i=this.getOffscreenGroup();i.clear();var a=this.beforeMappingData,o=this.beforeMapping(a);this.dataArray=new Array(o.length);for(var s=0;s<o.length;s++){var l=o[s];this.dataArray[s]=this.mapping(l)}if(this.updateElements(this.dataArray,e),this.lastElementsMap=this.elementsMap,this.canDoGroupAnimation(e)){var c=this.container,u=this.type,f=this.coordinate,h=z(this.animateOption,"appear"),d=this.getYScale(),p=f.convert({x:0,y:d.scale(this.getYMinValue())});Ytt(c,h,u,f,p)}if(this.labelOption){var v=this.useDeferredLabel,g=(function(){return r.renderLabels(Wr(r.dataArray),e)}).bind(this);if(typeof v=="number"){var y=typeof v=="number"&&v!==1/0?v:0;if(!window.requestIdleCallback)setTimeout(g,y);else{var m=y&&y!==1/0?{timeout:y}:void 0;window.requestIdleCallback(g,m)}}else g()}this.lastAttributeOption=E({},this.attributeOption),this.visible===!1&&this.changeVisible(!1)},n.prototype.clear=function(){var e=this,r=e.container,i=e.geometryLabel,a=e.offscreenGroup;r&&r.clear(),i&&i.clear(),a&&a.clear(),this.scaleDefs=void 0,this.attributes={},this.scales={},this.elementsMap={},this.lastElementsMap={},this.elements=[],this.adjusts={},this.dataArray=null,this.beforeMappingData=null,this.lastAttributeOption=void 0,this.defaultSize=void 0,this.idFields=[],this.groupScales=void 0,this.hasSorted=!1,this.isCoordinateChanged=!1},n.prototype.destroy=function(){this.clear();var e=this.container;e.remove(!0),this.offscreenGroup&&(this.offscreenGroup.remove(!0),this.offscreenGroup=null),this.geometryLabel&&(this.geometryLabel.destroy(),this.geometryLabel=null),this.theme=void 0,this.shapeFactory=void 0,t.prototype.destroy.call(this)},n.prototype.getGroupScales=function(){return this.groupScales},n.prototype.getAttribute=function(e){return this.attributes[e]},n.prototype.getXScale=function(){return this.getAttribute("position").scales[0]},n.prototype.getYScale=function(){return this.getAttribute("position").scales[1]},n.prototype.getGroupAttributes=function(){var e=[];return $(this.attributes,function(r){sc.includes(r.type)&&e.push(r)}),e},n.prototype.getDefaultValue=function(e){var r,i=this.getAttribute(e);return i&&Mr(i.scales)&&(r=i.values[0]),r},n.prototype.getAttributeValues=function(e,r){for(var i=[],a=e.scales,o=0,s=a.length;o<s;o++){var l=a[o],c=l.field;l.isIdentity?i.push(l.values):i.push(r[c])}return e.mapping.apply(e,X([],R(i),!1))},n.prototype.getAdjust=function(e){return this.adjusts[e]},n.prototype.getCoordinate=function(){return this.coordinate},n.prototype.getData=function(){return this.data},n.prototype.getShapeMarker=function(e,r){var i=this.getShapeFactory();return i.getMarker(e,r)},n.prototype.getElementsBy=function(e){return this.elements.filter(function(r){return e(r)})},n.prototype.getElements=function(){return this.elements},n.prototype.getElementId=function(e){e=et(e)?e[0]:e;var r=e[ae];if(this.idFields.length){for(var i=r[this.idFields[0]],a=1;a<this.idFields.length;a++)i+="-"+r[this.idFields[a]];return i}var o=this.type,s=this.getXScale(),l=this.getYScale(),c=s.field||"x",u=l.field||"y",f=r[u],h;s.type==="identity"?h=s.values[0]:h=r[c];var d;o==="interval"||o==="schema"?d="".concat(h):o==="line"||o==="area"||o==="path"?d=o:d="".concat(h,"-").concat(f);for(var p=this.groupScales,a=0,v=p.length;a<v;a++){var g=p[a],y=g.field;d="".concat(d,"-").concat(r[y])}var m=this.getAdjust("dodge");if(m){var x=m.dodgeBy;x&&(d="".concat(d,"-").concat(r[x]))}return this.getAdjust("jitter")&&(d="".concat(d,"-").concat(e.x,"-").concat(e.y)),d},n.prototype.getScaleFields=function(){var e=[],r=new Map,i=this,a=i.attributeOption,o=i.labelOption,s=i.tooltipOption;for(var l in a)if(a.hasOwnProperty(l)){var c=a[l];c.fields?Oo(c.fields,e,r):c.values&&Oo(c.values,e,r)}return o&&o.fields&&Oo(o.fields,e,r),Qt(s)&&s.fields&&Oo(s.fields,e,r),e},n.prototype.changeVisible=function(e){t.prototype.changeVisible.call(this,e);for(var r=this.elements,i=0,a=r.length;i<a;i++){var o=r[i];o.changeVisible(e)}e?(this.container&&this.container.show(),this.labelsContainer&&this.labelsContainer.show()):(this.container&&this.container.hide(),this.labelsContainer&&this.labelsContainer.hide())},n.prototype.getFields=function(){var e=new Map,r=[];return Object.values(this.attributeOption).forEach(function(i){var a=(i==null?void 0:i.fields)||[];a.forEach(function(o){e.has(o)||r.push(o),e.set(o,!0)})},[]),r},n.prototype.getGroupFields=function(){for(var e=[],r=new Map,i=0,a=sc.length;i<a;i++){var o=sc[i],s=this.attributeOption[o];s&&s.fields&&Oo(s.fields,e,r)}return e},n.prototype.getXYFields=function(){var e=R(this.attributeOption.position.fields,2),r=e[0],i=e[1];return[r,i]},n.prototype.getXField=function(){return z(this.getXYFields(),[0])},n.prototype.getYField=function(){return z(this.getXYFields(),[1])},n.prototype.getShapes=function(){return this.elements.map(function(e){return e.shape})},n.prototype.getOffscreenGroup=function(){if(!this.offscreenGroup){var e=this.container.getGroupBase();this.offscreenGroup=new e({})}return this.offscreenGroup},n.prototype.sort=function(e){if(!this.hasSorted)for(var r=this.getXScale(),i=r.field,a=0;a<e.length;a++){var o=e[a];o.sort(function(s,l){return r.translate(s[ae][i])-r.translate(l[ae][i])})}this.hasSorted=!0},n.prototype.adjustScale=function(){var e=this.getYScale();e&&this.getAdjust("stack")&&this.updateStackRange(e,this.beforeMappingData)},n.prototype.getShapeFactory=function(){var e=this.shapeType;if(RC(e))return this.shapeFactory||(this.shapeFactory=er(RC(e))),this.shapeFactory.coordinate=this.coordinate,this.shapeFactory.theme=this.theme.geometries[e]||{},this.shapeFactory},n.prototype.createShapePointsCfg=function(e){var r=this.getXScale(),i=this.getYScale(),a=this.normalizeValues(e[r.field],r),o;return i?o=this.normalizeValues(e[i.field],i):o=e.y?e.y:.1,{x:a,y:o,y0:i?i.scale(this.getYMinValue()):void 0}},n.prototype.createElement=function(e,r,i){i===void 0&&(i=!1);var a=this.container,o=this.getDrawCfg(e),s=this.getShapeFactory(),l=new kB({shapeFactory:s,container:a,offscreenGroup:this.getOffscreenGroup(),elementIndex:r});return l.animate=this.animateOption,l.geometry=this,l.draw(o,i),l},n.prototype.getDrawCfg=function(e){var r=e[ae],i={mappingData:e,data:r,x:e.x,y:e.y,color:e.color,size:e.size,isInCircle:this.coordinate.isPolar,customInfo:this.customOption},a=e.shape;!a&&this.getShapeFactory()&&(a=this.getShapeFactory().defaultShapeType),i.shape=a;var o=this.theme.geometries[this.shapeType];i.defaultStyle=z(o,[a,"default"],{}).style,!i.defaultStyle&&this.getShapeFactory()&&(i.defaultStyle=this.getShapeFactory().getDefaultStyle(o));var s=this.styleOption;return s&&(i.style=this.getStyleCfg(s,r)),this.generatePoints&&(i.points=e.points,i.nextPoints=e.nextPoints),i},n.prototype.updateElements=function(e,r){var i,a,o,s,l,c;r===void 0&&(r=!1);for(var u=new Map,f=[],h=new Map,d=0,p=0;p<e.length;p++)for(var v=e[p],g=0;g<v.length;g++){var y=v[g],m=this.getElementId(y),x=u.has(m)?"".concat(m,"-").concat(p,"-").concat(g):m;f.push(x),u.set(x,y),h.set(x,d),d++}this.elements=new Array(d);var b=FB(this.lastElementsMap,f),w=b.added,S=b.updated,O=b.removed;try{for(var M=Ct(w),A=M.next();!A.done;A=M.next()){var m=A.value,y=u.get(m),p=h.get(m),T=this.createElement(y,p,r);this.elements[p]=T,this.elementsMap[m]=T,T.shape&&T.shape.set("zIndex",this.zIndexReversed?this.elements.length-p:p)}}catch(F){i={error:F}}finally{try{A&&!A.done&&(a=M.return)&&a.call(M)}finally{if(i)throw i.error}}try{for(var C=Ct(S),P=C.next();!P.done;P=C.next()){var m=P.value,T=this.lastElementsMap[m],y=u.get(m),_=this.getDrawCfg(y),k=T.getModel(),p=h.get(m);(this.isCoordinateChanged||IB(_,k))&&(T.animate=this.animateOption,T.update(_)),this.elements[p]=T,this.elementsMap[m]=T,T.shape&&T.shape.set("zIndex",this.zIndexReversed?this.elements.length-p:p)}}catch(F){o={error:F}}finally{try{P&&!P.done&&(s=C.return)&&s.call(C)}finally{if(o)throw o.error}}this.container&&this.container.sort();try{for(var I=Ct(O),L=I.next();!L.done;L=I.next()){var m=L.value,T=this.lastElementsMap[m];T.animate=this.animateOption,T.destroy()}}catch(F){l={error:F}}finally{try{L&&!L.done&&(c=I.return)&&c.call(I)}finally{if(l)throw l.error}}},n.prototype.getLabelType=function(){var e=this,r=e.labelOption,i=e.coordinate,a=e.type,o=i.type,s=i.isTransposed,l=z(r,["cfg","type"]);return l||(o==="polar"?l=s?"pie":"polar":o==="theta"?l="pie":a==="interval"||a==="polygon"?l="interval":l="base"),l},n.prototype.getYMinValue=function(){var e=this.getYScale(),r=e.min,i=e.max,a;return r>=0?a=r:i<=0?a=i:a=0,a},n.prototype.createAttrOption=function(e,r,i){if(J(r)||Qt(r))Qt(r)&&Ne(Object.keys(r),["values"])?an(this.attributeOption,e,{fields:r.values}):an(this.attributeOption,e,r);else{var a={};bt(r)?a.values=[r]:a.fields=tf(r),i&&(ut(i)?a.callback=i:a.values=i),an(this.attributeOption,e,a)}},n.prototype.initAttributes=function(){var e=this,r=this,i=r.attributes,a=r.attributeOption,o=r.theme,s=r.shapeType;this.groupScales=[];var l={},c=function(h){if(a.hasOwnProperty(h)){var d=a[h];if(!d)return{value:void 0};var p=E({},d),v=p.callback,g=p.values,y=p.fields,m=y===void 0?[]:y,x=m.map(function(w){var S=e.scales[w];if(!l[w]&&sc.includes(h)){var O=eB(S,z(e.scaleDefs,w),h,e.type);O==="cat"&&(e.groupScales.push(S),l[w]=!0)}return S});p.scales=x,h!=="position"&&x.length===1&&x[0].type==="identity"?p.values=x[0].values:!v&&!g&&(h==="size"?p.values=o.sizes:h==="shape"?p.values=o.shapes[s]||[]:h==="color"&&(x.length?p.values=x[0].values.length<=10?o.colors10:o.colors20:p.values=o.colors10));var b=k5(h);i[h]=new b(p)}};for(var u in a){var f=c(u);if(typeof f=="object")return f.value}},n.prototype.processData=function(e){var r,i;this.hasSorted=!1;for(var a=this.getAttribute("position").scales,o=a.filter(function(O){return O.isCategory}),s=this.groupData(e),l=[],c=0,u=s.length;c<u;c++){for(var f=s[c],h=[],d=0,p=f.length;d<p;d++){var v=f[d],g={};for(var y in v)g[y]=v[y];g[ae]=v;try{for(var m=(r=void 0,Ct(o)),x=m.next();!x.done;x=m.next()){var b=x.value,w=b.field;g[w]=b.translate(g[w])}}catch(O){r={error:O}}finally{try{x&&!x.done&&(i=m.return)&&i.call(m)}finally{if(r)throw r.error}}h.push(g)}l.push(h)}var S=this.adjustData(l);return this.beforeMappingData=S,S},n.prototype.adjustData=function(e){var r=this.adjustOption,i=this,a=i.intervalPadding,o=i.dodgePadding,s=i.theme,l=this.maxColumnWidth||s.maxColumnWidth,c=this.minColumnWidth||s.minColumnWidth,u=this.columnWidthRatio||s.columnWidthRatio,f=e;if(r){var h=this.getXScale(),d=this.getYScale(),p=h.field,v=d?d.field:null,g=xd(this.coordinate),y=h.values.length,m=this.getAttribute("size"),x=void 0;m&&(x=m.values[0]);for(var b=0,w=r.length;b<w;b++){var S=r[b],O=E({xField:p,yField:v,intervalPadding:a,dodgePadding:o,xDimensionLength:g,groupNum:y,defaultSize:x,maxColumnWidth:l,minColumnWidth:c,columnWidthRatio:u},S),M=S.type;if(M==="dodge"){var A=[];if(h.isCategory||h.type==="identity")A.push("x");else if(!d)A.push("y");else throw new Error("dodge is not support linear attribute, please use category attribute!");O.adjustNames=A,O.dodgeRatio=u}else if(M==="stack"){var T=this.coordinate;if(!d){O.height=T.getHeight();var C=this.getDefaultValue("size")||3;O.size=C}!T.isTransposed&&J(O.reverseOrder)&&(O.reverseOrder=!0)}var P=c5(M);O.dimValuesMap={},h&&h.values&&(O.dimValuesMap[h.field]=h.values.map(function(k){return h.translate(k)}));var _=new P(O);f=_.process(f),this.adjusts[M]=_}}return f},n.prototype.groupData=function(e){for(var r=this.getGroupScales(),i=this.scaleDefs,a={},o=[],s=0;s<r.length;s++){var l=r[s],c=l.field;o.push(c),z(i,[c,"values"])&&(a[c]=i[c].values)}return Utt(e,o,a)},n.prototype.updateStackRange=function(e,r){for(var i=Wr(r),a=e.field,o=e.min,s=e.max,l=0;l<i.length;l++){var c=i[l],u=Math.min.apply(null,c[a]),f=Math.max.apply(null,c[a]);u<o&&(o=u),f>s&&(s=f)}var h=this.scaleDefs,d={};o<e.min&&!z(h,[a,"min"])&&(d.min=o),s>e.max&&!z(h,[a,"max"])&&(d.max=s),e.change(d)},n.prototype.beforeMapping=function(e){var r=e;if(this.sortable&&this.sort(r),this.generatePoints)for(var i=0,a=r.length;i<a;i++){var o=r[i];this.generateShapePoints(o);var s=r[i+1];s&&(this.generateShapePoints(s),o[0].nextPoints=s[0].points)}return r},n.prototype.generateShapePoints=function(e){for(var r=this.getShapeFactory(),i=this.getAttribute("shape"),a=0;a<e.length;a++){var o=e[a],s=this.createShapePointsCfg(o),l=i?this.getAttributeValues(i,o):null,c=r.getShapePoints(l,s);o.points=c}},n.prototype.normalizeValues=function(e,r){var i=[];if(et(e))for(var a=0;a<e.length;a++){var o=e[a];i.push(r.scale(o))}else i=r.scale(e);return i},n.prototype.mapping=function(e){for(var r=this.attributes,i=[],a=0;a<e.length;a++){var o=e[a],s={_origin:o[ae],points:o.points,nextPoints:o.nextPoints};for(var l in r)if(r.hasOwnProperty(l)){var c=r[l],u=c.names,f=this.getAttributeValues(c,o);if(u.length>1)for(var h=0;h<f.length;h+=1){var d=f[h],p=u[h];s[p]=et(d)&&d.length===1?d[0]:d}else s[u[0]]=f.length===1?f[0]:f}this.convertPoint(s),i.push(s)}return i},n.prototype.convertPoint=function(e){var r=e.x,i=e.y,a,o,s,l=this.coordinate;if(et(r)&&et(i)){a=[],o=[];for(var c=0,u=0,f=r.length,h=i.length;c<f&&u<h;c+=1,u+=1)s=l.convert({x:r[c],y:i[u]}),a.push(s.x),o.push(s.y)}else if(et(i)){o=[];for(var d=0;d<i.length;d++){var p=i[d];s=l.convert({x:r,y:p}),a&&a!==s.x?(et(a)||(a=[a]),a.push(s.x)):a=s.x,o.push(s.y)}}else if(et(r)){a=[];for(var d=0;d<r.length;d++){var v=r[d];s=l.convert({x:v,y:i}),o&&o!==s.y?(et(o)||(o=[o]),o.push(s.y)):o=s.y,a.push(s.x)}}else{var g=l.convert({x:r,y:i});a=g.x,o=g.y}e.x=a,e.y=o},n.prototype.getStyleCfg=function(e,r){var i=e.fields,a=i===void 0?[]:i,o=e.callback,s=e.cfg;if(s)return s;var l=a.map(function(c){return r[c]});return o.apply(void 0,X([],R(l),!1))},n.prototype.setCfg=function(e){var r=this,i=e.coordinate,a=e.data,o=e.theme,s=e.scaleDefs;i&&(this.coordinate=i),a&&(this.data=a),s&&(this.scaleDefs=s,this.idFields=[],$(s,function(l,c){l&&l.key&&r.idFields.push(c)})),o&&(this.theme=this.userTheme?ot({},o,this.userTheme):o)},n.prototype.renderLabels=function(e,r){return r===void 0&&(r=!1),Ri(this,void 0,void 0,function(){var i,a,o,s,l,c,u,f,h,d,p,v,g=this;return Bi(this,function(y){switch(y.label){case 0:return i=this.geometryLabel,this.emit(Fo.BEFORE_RENDER_LABEL),i||(a=this.getLabelType(),o=Wtt(a),i=new o(this),this.geometryLabel=i),[4,i.render(e,r)];case 1:y.sent(),s=i.labelsRenderer.shapesMap,l=new Map,$(s,function(m,x){for(var b=m.getChildren()||[],w=0;w<b.length;w++){var S=b[w],O=g.elementsMap[S.get("elementId")||x.split(" ")[0]];if(O){S.cfg.name=["element","label"],S.cfg.element=O;var M=l.get(O)||new Set;M.add(m),l.set(O,M)}}});try{for(c=Ct(l.entries()),u=c.next();!u.done;u=c.next())f=R(u.value,2),h=f[0],d=f[1],h.labelShape=X([],R(d),!1)}catch(m){p={error:m}}finally{try{u&&!u.done&&(v=c.return)&&v.call(c)}finally{if(p)throw p.error}}return this.emit(Fo.AFTER_RENDER_LABEL),[2]}})})},n.prototype.canDoGroupAnimation=function(e){return!e&&this.animateOption&&(z(this.animateOption,"appear")===void 0||z(this.animateOption,"appear")&&z(this.animateOption,["appear","animation"])===void 0)},n}(oS),_0=sn;function Sd(t,n,e){var r=_0(t.getMatrix(),[["t",n,e]]);t.setMatrix(r)}function qtt(t,n){var e=t.attr(),r=e.x,i=e.y,a=_0(t.getMatrix(),[["t",-r,-i],["r",n],["t",r,i]]);return a}function US(t,n){var e=qtt(t,n);t.setMatrix(e)}function Ztt(t,n){var e=t.getBBox(),r=(e.minX+e.maxX)/2,i=(e.minY+e.maxY)/2;t.applyToMatrix([r,i,1]);var a=_0(t.getMatrix(),[["t",-r,-i],["s",n,n],["t",r,i]]);t.setMatrix(a)}function qo(t){return t.find(function(n){return n.get("type")==="text"})}function DB(t,n,e){e===void 0&&(e=[0,0,0,0]);var r=t&&t.getChildren()[0];if(r){var i=r.clone();n!=null&&n.rotate&&US(i,-n.rotate);var a=i.getCanvasBBox(),o=a.x,s=a.y,l=a.width,c=a.height;i.destroy();var u=e;return J(u)?u=[2,2,2,2]:bt(u)&&(u=new Array(4).fill(u)),{x:o-u[3],y:s-u[0],width:l+u[1]+u[3],height:c+u[0]+u[2],rotation:(n==null?void 0:n.rotate)||0}}return{x:0,y:0,width:0,height:0,rotation:0}}function Ktt(t,n,e){e===void 0&&(e=0);var r=Math.max(0,Math.min(t.x+t.width+e,n.x+n.width+e)-Math.max(t.x-e,n.x-e)),i=Math.max(0,Math.min(t.y+t.height+e,n.y+n.height+e)-Math.max(t.y-e,n.y-e));return r*i}function Qtt(t,n){var e=t.getBBox();return qy(n,function(r){var i=r.getBBox();return Ktt(e,i,2)>0})}function RB(t,n,e){var r=e.data,i=e.origin,a=e.animateCfg,o=e.coordinate,s=z(a,"update");t.set("data",r),t.set("origin",i),t.set("animateCfg",a),t.set("coordinate",o),t.set("visible",n.get("visible")),(t.getChildren()||[]).forEach(function(l,c){var u=n.getChildByIndex(c);if(!u)t.removeChild(l),l.remove(!0);else{l.set("data",r),l.set("origin",i),l.set("animateCfg",a),l.set("coordinate",o);var f=tB(l,u);s?Mc(l,s,{toAttrs:f,coordinate:o}):l.attr(f),u.isGroup()&&RB(l,u,e)}}),$(n.getChildren(),function(l,c){c>=t.getCount()&&(l.destroyed||t.add(l))})}var Jtt=function(){function t(n){this.shapesMap={};var e=n.layout,r=n.container;this.layout=e,this.container=r}return t.prototype.render=function(n,e,r){return r===void 0&&(r=!1),Ri(this,void 0,void 0,function(){var i,a,o,s,l,c,u,f,h=this;return Bi(this,function(d){switch(d.label){case 0:if(i={},a=this.createOffscreenGroup(),!n.length)return[3,2];try{for(o=Ct(n),s=o.next();!s.done;s=o.next())l=s.value,l&&(i[l.id]=this.renderLabel(l,a))}catch(p){u={error:p}}finally{try{s&&!s.done&&(f=o.return)&&f.call(o)}finally{if(u)throw u.error}}return[4,this.doLayout(n,e,i)];case 1:d.sent(),this.renderLabelLine(n,i),this.renderLabelBackground(n,i),this.adjustLabel(n,i),d.label=2;case 2:return c=this.shapesMap,$(i,function(p,v){if(p.destroyed)delete i[v];else{if(c[v]){var g=p.get("data"),y=p.get("origin"),m=p.get("coordinate"),x=p.get("animateCfg"),b=c[v];RB(b,i[v],{data:g,origin:y,animateCfg:x,coordinate:m}),i[v]=b}else{if(h.container.destroyed)return;h.container.add(p);var w=z(p.get("animateCfg"),r?"enter":"appear");w&&Mc(p,w,{toAttrs:E({},p.attr()),coordinate:p.get("coordinate")})}delete c[v]}}),$(c,function(p){var v=z(p.get("animateCfg"),"leave");v?Mc(p,v,{toAttrs:null,coordinate:p.get("coordinate")}):p.remove(!0)}),this.shapesMap=i,a.destroy(),[2]}})})},t.prototype.clear=function(){this.container.clear(),this.shapesMap={}},t.prototype.destroy=function(){this.container.destroy(),this.shapesMap=null},t.prototype.renderLabel=function(n,e){var r=n.id,i=n.elementId,a=n.data,o=n.mappingData,s=n.coordinate,l=n.animate,c=n.content,u=n.capture,f={id:r,elementId:i,capture:u,data:a,origin:E(E({},o),{data:o[ae]}),coordinate:s},h=e.addGroup(E({name:"label",animateCfg:this.animate===!1||l===null||l===!1?!1:ot({},this.animate,l)},f)),d;if(c.isGroup&&c.isGroup()||c.isShape&&c.isShape()){var p=c.getCanvasBBox(),v=p.width,g=p.height,y=z(n,"textAlign","left"),m=n.x,x=n.y-g/2;y==="center"?m=m-v/2:(y==="right"||y==="end")&&(m=m-v),Sd(c,m,x),d=c,h.add(c)}else{var b=z(n,["style","fill"]);d=h.addShape("text",E({attrs:E(E({x:n.x,y:n.y,textAlign:n.textAlign,textBaseline:z(n,"textBaseline","middle"),text:n.content},n.style),{fill:KD(b)?n.color:b})},f))}return n.rotate&&US(d,n.rotate),h},t.prototype.doLayout=function(n,e,r){return Ri(this,void 0,void 0,function(){var i,a=this;return Bi(this,function(o){switch(o.label){case 0:return this.layout?(i=et(this.layout)?this.layout:[this.layout],[4,Promise.all(i.map(function(s){var l=Vtt(z(s,"type",""));if(l){var c=[],u=[];return $(r,function(f,h){c.push(f),u.push(e[f.get("elementId")])}),l(n,c,u,a.region,s.cfg)}}))]):[3,2];case 1:o.sent(),o.label=2;case 2:return[2]}})})},t.prototype.renderLabelLine=function(n,e){$(n,function(r){var i=z(r,"coordinate");if(!(!r||!i)){var a=i.getCenter(),o=i.getRadius();if(r.labelLine){var s=z(r,"labelLine",{}),l=r.id,c=s.path;if(!c){var u=tn(a.x,a.y,o,r.angle);c=[["M",u.x,u.y],["L",r.x,r.y]]}var f=e[l];f.destroyed||f.addShape("path",{capture:!1,attrs:E({path:c,stroke:r.color?r.color:z(r,["style","fill"],"#000"),fill:null},s.style),id:l,origin:r.mappingData,data:r.data,coordinate:r.coordinate})}}})},t.prototype.renderLabelBackground=function(n,e){$(n,function(r){var i=z(r,"coordinate"),a=z(r,"background");if(!(!a||!i)){var o=r.id,s=e[o];if(!s.destroyed){var l=s.getChildren()[0];if(l){var c=DB(s,r,a.padding),u=c.rotation,f=vt(c,["rotation"]),h=s.addShape("rect",{attrs:E(E({},f),a.style||{}),id:o,origin:r.mappingData,data:r.data,coordinate:r.coordinate});if(h.setZIndex(-1),u){var d=l.getMatrix();h.setMatrix(d)}}}}})},t.prototype.createOffscreenGroup=function(){var n=this.container,e=n.getGroupBase(),r=new e({});return r},t.prototype.adjustLabel=function(n,e){$(n,function(r){if(r){var i=r.id,a=e[i];if(!a.destroyed){var o=a.findAll(function(s){return s.get("type")!=="path"});$(o,function(s){s&&(r.offsetX&&s.attr("x",s.attr("x")+r.offsetX),r.offsetY&&s.attr("y",s.attr("y")+r.offsetY))})}}})},t}();function BC(t){var n=0;return $(t,function(e){n+=e}),n/t.length}var L0=function(){function t(n){this.geometry=n}return t.prototype.getLabelItems=function(n){var e=this,r=[],i=this.getLabelCfgs(n);return $(n,function(a,o){var s=i[o];if(!s||J(a.x)||J(a.y)){r.push(null);return}var l=et(s.content)?s.content:[s.content];s.content=l;var c=l.length;$(l,function(u,f){if(J(u)||u===""){r.push(null);return}var h=E(E({},s),e.getLabelPoint(s,a,f));h.textAlign||(h.textAlign=e.getLabelAlign(h,f,c)),h.offset<=0&&(h.labelLine=null),r.push(h)})}),r},t.prototype.render=function(n,e){return e===void 0&&(e=!1),Ri(this,void 0,void 0,function(){var r,i,a;return Bi(this,function(o){switch(o.label){case 0:return r=this.getLabelItems(n),i=this.getLabelsRenderer(),a=this.getGeometryShapes(),[4,i.render(r,a,e)];case 1:return o.sent(),[2]}})})},t.prototype.clear=function(){var n=this.labelsRenderer;n&&n.clear()},t.prototype.destroy=function(){var n=this.labelsRenderer;n&&n.destroy(),this.labelsRenderer=null},t.prototype.getCoordinate=function(){return this.geometry.coordinate},t.prototype.getDefaultLabelCfg=function(n,e){var r=this.geometry,i=r.type,a=r.theme;return i==="polygon"||i==="interval"&&e==="middle"||n<0&&!["line","point","path"].includes(i)?z(a,"innerLabels",{}):z(a,"labels",{})},t.prototype.getThemedLabelCfg=function(n){var e=this.geometry,r=this.getDefaultLabelCfg(),i=e.type,a=e.theme,o;return i==="polygon"||n.offset<0&&!["line","point","path"].includes(i)?o=ot({},r,a.innerLabels,n):o=ot({},r,a.labels,n),o},t.prototype.setLabelPosition=function(n,e,r,i){},t.prototype.getLabelOffset=function(n){var e=this.getCoordinate(),r=this.getOffsetVector(n);return e.isTransposed?r[0]:r[1]},t.prototype.getLabelOffsetPoint=function(n,e,r){var i=n.offset,a=this.getCoordinate(),o=a.isTransposed,s=o?"x":"y",l=o?1:-1,c={x:0,y:0};return e>0||r===1?c[s]=i*l:c[s]=i*l*-1,c},t.prototype.getLabelPoint=function(n,e,r){var i=this.getCoordinate(),a=n.content.length;function o(g,y,m){m===void 0&&(m=!1);var x=g;return et(x)&&(n.content.length===1?m?x=BC(x):x.length<=2?x=x[g.length-1]:x=BC(x):x=x[y]),x}var s={content:n.content[r],x:0,y:0,start:{x:0,y:0},color:"#fff"},l=et(e.shape)?e.shape[0]:e.shape,c=l==="funnel"||l==="pyramid";if(this.geometry.type==="polygon"){var u=EJ(e.x,e.y);s.x=u[0],s.y=u[1]}else this.geometry.type==="interval"&&!c?(s.x=o(e.x,r,!0),s.y=o(e.y,r)):(s.x=o(e.x,r),s.y=o(e.y,r));if(c){var f=z(e,"nextPoints"),h=z(e,"points");if(f){var d=i.convert(h[1]),p=i.convert(f[1]);s.x=(d.x+p.x)/2,s.y=(d.y+p.y)/2}else if(l==="pyramid"){var d=i.convert(h[1]),p=i.convert(h[2]);s.x=(d.x+p.x)/2,s.y=(d.y+p.y)/2}}n.position&&this.setLabelPosition(s,e,r,n.position);var v=this.getLabelOffsetPoint(n,r,a);return s.start={x:s.x,y:s.y},s.x+=v.x,s.y+=v.y,s.color=e.color,s},t.prototype.getLabelAlign=function(n,e,r){var i="center",a=this.getCoordinate();if(a.isTransposed){var o=n.offset;o<0?i="right":o===0?i="center":i="left",r>1&&e===0&&(i==="right"?i="left":i==="left"&&(i="right"))}return i},t.prototype.getLabelId=function(n){var e=this.geometry,r=e.type,i=e.getXScale(),a=e.getYScale(),o=n[ae],s=e.getElementId(n);return r==="line"||r==="area"?s+=" ".concat(o[i.field]):r==="path"&&(s+=" ".concat(o[i.field],"-").concat(o[a.field])),s},t.prototype.getLabelsRenderer=function(){var n=this.geometry,e=n.labelsContainer,r=n.labelOption,i=n.canvasRegion,a=n.animateOption,o=this.geometry.coordinate,s=this.labelsRenderer;return s||(s=new Jtt({container:e,layout:z(r,["cfg","layout"],{type:this.defaultLayout})}),this.labelsRenderer=s),s.region=i,s.animate=a?PB("label",o):!1,s},t.prototype.getLabelCfgs=function(n){var e=this,r=this.geometry,i=r.labelOption,a=r.scales,o=r.coordinate,s=i,l=s.fields,c=s.callback,u=s.cfg,f=l.map(function(d){return a[d]}),h=[];return $(n,function(d,p){var v=d[ae],g=e.getLabelText(v,f),y;if(c){var m=l.map(function(O){return v[O]});if(y=c.apply(void 0,X([],R(m),!1)),J(y)){h.push(null);return}}var x=E(E({id:e.getLabelId(d),elementId:e.geometry.getElementId(d),data:v,mappingData:d,coordinate:o},u),y);ut(x.position)&&(x.position=x.position(v,d,p));var b=e.getLabelOffset(x.offset||0),w=e.getDefaultLabelCfg(b,x.position);x=ot({},w,x),x.offset=e.getLabelOffset(x.offset||0);var S=x.content;ut(S)?x.content=S(v,d,p):To(S)&&(x.content=g[0]),h.push(x)}),h},t.prototype.getLabelText=function(n,e){var r=[];return $(e,function(i){var a=n[i.field];et(a)?a=a.map(function(o){return i.getText(o)}):a=i.getText(a),J(a)||a===""?r.push(null):r.push(a)}),r},t.prototype.getOffsetVector=function(n){n===void 0&&(n=0);var e=this.getCoordinate(),r=0;return bt(n)&&(r=n),e.isTransposed?e.applyMatrix(r,0):e.applyMatrix(0,r)},t.prototype.getGeometryShapes=function(){var n=this.geometry,e={};return $(n.elementsMap,function(r,i){e[i]=r.shape}),$(n.getOffscreenGroup().getChildren(),function(r){var i=n.getElementId(r.get("origin").mappingData);e[i]=r}),e},t}();function Gb(t,n,e){if(!t)return e;var r;if(t.callback&&t.callback.length>1){var i=Array(t.callback.length-1).fill("");r=t.mapping.apply(t,X([n],R(i),!1)).join("")}else r=t.mapping(n).join("");return r||e}var fl={hexagon:function(t,n,e){var r=e/2*Math.sqrt(3);return[["M",t,n-e],["L",t+r,n-e/2],["L",t+r,n+e/2],["L",t,n+e],["L",t-r,n+e/2],["L",t-r,n-e/2],["Z"]]},bowtie:function(t,n,e){var r=e-1.5;return[["M",t-e,n-r],["L",t+e,n+r],["L",t+e,n-r],["L",t-e,n+r],["Z"]]},cross:function(t,n,e){return[["M",t-e,n-e],["L",t+e,n+e],["M",t+e,n-e],["L",t-e,n+e]]},tick:function(t,n,e){return[["M",t-e/2,n-e],["L",t+e/2,n-e],["M",t,n-e],["L",t,n+e],["M",t-e/2,n+e],["L",t+e/2,n+e]]},plus:function(t,n,e){return[["M",t-e,n],["L",t+e,n],["M",t,n-e],["L",t,n+e]]},hyphen:function(t,n,e){return[["M",t-e,n],["L",t+e,n]]},line:function(t,n,e){return[["M",t,n-e],["L",t,n+e]]}},tet=["line","cross","tick","plus","hyphen"];function eet(t,n){return ut(n)?n(t):ot({},t,n)}function net(t,n){var e=t.symbol;if(pt(e)&&tet.indexOf(e)!==-1){var r=z(t,"style",{}),i=z(r,"lineWidth",1),a=r.stroke||r.fill||n;t.style=ot({},t.style,{lineWidth:i,stroke:a,fill:null})}}function BB(t){var n=t.symbol;pt(n)&&fl[n]&&(t.symbol=fl[n])}function P1(t){return t.startsWith(at.LEFT)||t.startsWith(at.RIGHT)?"vertical":"horizontal"}function NB(t,n,e,r,i){var a=e.getScale(e.type);if(a.isCategory){var o=a.field,s=n.getAttribute("color"),l=n.getAttribute("shape"),c=t.getTheme().defaultColor,u=n.coordinate.isPolar;return a.getTicks().map(function(f,h){var d,p=f.text,v=f.value,g=p,y=a.invert(v),m=t.filterFieldData(o,[(d={},d[o]=y,d)]).length===0;$(t.views,function(O){var M;O.filterFieldData(o,[(M={},M[o]=y,M)]).length||(m=!0)});var x=Gb(s,y,c),b=Gb(l,y,"point"),w=n.getShapeMarker(b,{color:x,isInPolar:u}),S=i;return ut(S)&&(S=S(g,h,E({name:g,value:y},ot({},r,w)))),w=ot({},r,w,mr(E({},S),["style"])),net(w,x),S&&S.style&&(w.style=eet(w.style,S.style)),BB(w),{id:y,name:g,value:y,marker:w,unchecked:m}})}return[]}function ret(t,n,e){return e.map(function(r,i){var a=n;ut(a)&&(a=a(r.name,i,ot({},t,r)));var o=ut(r.marker)?r.marker(r.name,i,ot({},t,r)):r.marker,s=ot({},t,a,o);return BB(s),r.marker=s,r})}function NC(t,n){var e=z(t,["components","legend"],{});return ot({},z(e,["common"],{}),ot({},z(e,[n],{})))}function k1(t){return t?!1:t==null||isNaN(t)}function $C(t){if(et(t))return k1(t[1].y);var n=t.y;return et(n)?k1(n[0]):k1(n)}function I0(t,n,e){if(n===void 0&&(n=!1),e===void 0&&(e=!0),!t.length||t.length===1&&!e)return[];if(n){for(var r=[],i=0,a=t.length;i<a;i++){var o=t[i];$C(o)||r.push(o)}return[r]}for(var s=[],l=[],i=0,a=t.length;i<a;i++){var o=t[i];$C(o)?l.length&&(l.length===1&&!e||s.push(l),l=[]):l.push(o)}return l.length&&s.push(l),s}function $B(t){for(var n=[],e=0;e<t.length;e++){var r=t[e];if(r){var i=e===0?"M":"L";n.push([i,r.x,r.y])}}var a=t[0];return a&&(n.push(["L",a.x,a.y]),n.push(["z"])),n}function jB(t){for(var n=t.length/2,e=[],r=[],i=0;i<t.length;i++)i<n?e.push(t[i]):r.push(t[i]);var a=Mg(e,!1),o=Mg(r,!1);r.length&&a.push(["L",r[0].x,r[0].y]),o.shift();var s=a.concat(o);return e.length&&s.push(["L",e[0].x,e[0].y]),s.push(["z"]),s}function Ke(t,n,e,r){r===void 0&&(r="");var i=t.style,a=i===void 0?{}:i,o=t.defaultStyle,s=t.color,l=t.size,c=E(E({},o),a);return s&&(n&&(a.stroke||(c.stroke=s)),e&&(a.fill||(c.fill=s))),r&&J(a[r])&&!J(l)&&(c[r]=l),c}function zB(t){return ot({},{fill:"#CCD6EC",fillOpacity:.3},z(t,["background","style"]))}function qS(t){var n=t.x,e=et(t.y)?t.y:[t.y];return e.map(function(r,i){return{x:et(n)?n[i]:n,y:r}})}var iet={line:function(t,n,e){return[["M",t-e,n],["L",t+e,n]]},dot:function(t,n,e){return[["M",t-e,n],["L",t+e,n]]},dash:function(t,n,e){return[["M",t-e,n],["L",t+e,n]]},smooth:function(t,n,e){return[["M",t-e,n],["A",e/2,e/2,0,1,1,t,n],["A",e/2,e/2,0,1,0,t+e,n]]},hv:function(t,n,e){return[["M",t-e-1,n-2.5],["L",t,n-2.5],["L",t,n+2.5],["L",t+e+1,n+2.5]]},vh:function(t,n,e){return[["M",t-e-1,n+2.5],["L",t,n+2.5],["L",t,n-2.5],["L",t+e+1,n-2.5]]},hvh:function(t,n,e){return[["M",t-(e+1),n+2.5],["L",t-e/2,n+2.5],["L",t-e/2,n-2.5],["L",t+e/2,n-2.5],["L",t+e/2,n+2.5],["L",t+e+1,n+2.5]]},vhv:function(t,n){return[["M",t-5,n+2.5],["L",t-5,n],["L",t,n],["L",t,n-3],["L",t,n+3],["L",t+6.5,n+3]]}};function GB(t,n){var e=t.color;return{symbol:iet[n],style:{lineWidth:2,r:6,stroke:e}}}function aet(t,n,e){for(var r=t.isStack,i=t.connectNulls,a=t.isInCircle,o=t.showSinglePoint,s=Ke(t,!0,!1,"lineWidth"),l=I0(t.points,i,o),c=[],u=0,f=l.length;u<f;u++){var h=l[u];c=c.concat(YB(h,a,r,n,e,s))}return s.path=c,s}function Yb(t,n,e,r,i){if(t.length===1)return[["M",t[0].x,t[0].y-i.lineWidth/2],["L",t[0].x,t[0].y],["L",t[0].x,t[0].y+i.lineWidth/2]];var a;return e?(n&&t.length&&t.push({x:t[0].x,y:t[0].y}),a=Mg(t,!1,r)):(a=bd(t,!1),n&&a.push(["Z"])),a}function oet(t,n,e,r,i,a){var o=[],s=[];$(t,function(u){var f=qS(u);o.push(f[1]),s.push(f[0])});var l=Yb(o,n,r,i,a),c=Yb(s,n,r,i,a);return e?l:l.concat(c)}function YB(t,n,e,r,i,a){if(t.length){var o=t[0];return et(o.y)?oet(t,n,e,r,i,a):Yb(t,n,r,i,a)}return[]}ss("line",{defaultShapeType:"line"});$(["line","dot","dash","smooth"],function(t){Xt("line",t,{draw:function(n,e){var r=t==="smooth",i;if(r){var a=this.coordinate,o=a.start,s=a.end;i=[[o.x,s.y],[s.x,o.y]]}var l=aet(n,r,i),c=e.addShape({type:"path",attrs:l,name:"line",capture:!r});return c},getMarker:function(n){return GB(n,t)}})});var Ar={getLegendItems:NB,translate:Sd,rotate:US,zoom:Ztt,transform:_0,getAngle:wh,getSectorPath:$o,polarToCartesian:tn,getDelegationObject:ul,getTooltipItems:YS,getMappingValue:Gb,getPath:YB,getPathPoints:I0},uo={100:"#000",95:"#0D0D0D",85:"#262626",65:"#595959",45:"#8C8C8C",25:"#BFBFBF",15:"#D9D9D9",6:"#F0F0F0"},ie={100:"#FFFFFF",95:"#F2F2F2",85:"#D9D9D9",65:"#A6A6A6",45:"#737373",25:"#404040",15:"#262626",6:"#0F0F0F"},Ai=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#E86452","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"],set=["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#E86452","#F8D0CB","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"],cet=["#B8E1FF","#9AC5FF","#7DAAFF","#5B8FF9","#3D76DD","#085EC0","#0047A5","#00318A","#001D70"],uet=function(t){t===void 0&&(t={});var n=t.paletteQualitative10,e=n===void 0?Ai:n,r=t.paletteQualitative20,i=r===void 0?set:r,a=t.brandColor,o=a===void 0?e[0]:a,s={backgroundColor:"#141414",brandColor:o,subColor:"rgba(255,255,255,0.05)",paletteQualitative10:e,paletteQualitative20:i,paletteSemanticRed:"#F4664A",paletteSemanticGreen:"#30BF78",paletteSemanticYellow:"#FAAD14",paletteSequence:cet,fontFamily:`"Segoe UI", Roboto, "Helvetica Neue", Arial,
    "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",
    "Noto Color Emoji"`,axisLineBorderColor:ie[25],axisLineBorder:1,axisLineDash:null,axisTitleTextFillColor:ie[65],axisTitleTextFontSize:12,axisTitleTextLineHeight:12,axisTitleTextFontWeight:"normal",axisTitleSpacing:12,axisDescriptionIconFillColor:uo[85],axisTickLineBorderColor:ie[25],axisTickLineLength:4,axisTickLineBorder:1,axisSubTickLineBorderColor:ie[15],axisSubTickLineLength:2,axisSubTickLineBorder:1,axisLabelFillColor:ie[45],axisLabelFontSize:12,axisLabelLineHeight:12,axisLabelFontWeight:"normal",axisLabelOffset:8,axisGridBorderColor:ie[15],axisGridBorder:1,axisGridLineDash:null,legendTitleTextFillColor:ie[45],legendTitleTextFontSize:12,legendTitleTextLineHeight:21,legendTitleTextFontWeight:"normal",legendMarkerColor:Ai[0],legendMarkerSpacing:8,legendMarkerSize:4,legendCircleMarkerSize:4,legendSquareMarkerSize:4,legendLineMarkerSize:5,legendItemNameFillColor:ie[65],legendItemNameFontSize:12,legendItemNameLineHeight:12,legendItemNameFontWeight:"normal",legendItemSpacing:24,legendItemMarginBottom:12,legendSpacing:16,legendPadding:[8,8,8,8],legendHorizontalPadding:[8,0,8,0],legendVerticalPadding:[0,8,0,8],legendPageNavigatorMarkerSize:12,legendPageNavigatorMarkerInactiveFillColor:ie[45],legendPageNavigatorMarkerInactiveFillOpacity:.45,legendPageNavigatorMarkerFillColor:ie[45],legendPageNavigatorMarkerFillOpacity:1,legendPageNavigatorTextFillColor:ie[65],legendPageNavigatorTextFontSize:12,sliderRailFillColor:ie[15],sliderRailBorder:0,sliderRailBorderColor:null,sliderRailWidth:100,sliderRailHeight:12,sliderLabelTextFillColor:ie[45],sliderLabelTextFontSize:12,sliderLabelTextLineHeight:12,sliderLabelTextFontWeight:"normal",sliderHandlerFillColor:uo[6],sliderHandlerWidth:10,sliderHandlerHeight:14,sliderHandlerBorder:1,sliderHandlerBorderColor:uo[25],annotationArcBorderColor:ie[15],annotationArcBorder:1,annotationLineBorderColor:ie[25],annotationLineBorder:1,annotationLineDash:null,annotationTextFillColor:ie[65],annotationTextFontSize:12,annotationTextLineHeight:12,annotationTextFontWeight:"normal",annotationTextBorderColor:null,annotationTextBorder:0,annotationRegionFillColor:ie[100],annotationRegionFillOpacity:.06,annotationRegionBorder:0,annotationRegionBorderColor:null,annotationDataMarkerLineLength:16,tooltipCrosshairsBorderColor:ie[25],tooltipCrosshairsBorder:1,tooltipCrosshairsLineDash:null,tooltipContainerFillColor:"#1f1f1f",tooltipContainerFillOpacity:.95,tooltipContainerShadow:"0px 2px 4px rgba(0,0,0,.5)",tooltipContainerBorderRadius:3,tooltipTextFillColor:ie[65],tooltipTextFontSize:12,tooltipTextLineHeight:12,tooltipTextFontWeight:"bold",labelFillColor:ie[65],labelFillColorDark:"#2c3542",labelFillColorLight:"#ffffff",labelFontSize:12,labelLineHeight:12,labelFontWeight:"normal",labelBorderColor:null,labelBorder:0,innerLabelFillColor:uo[100],innerLabelFontSize:12,innerLabelLineHeight:12,innerLabelFontWeight:"normal",innerLabelBorderColor:null,innerLabelBorder:0,overflowLabelFillColor:ie[65],overflowLabelFillColorDark:"#2c3542",overflowLabelFillColorLight:"#ffffff",overflowLabelFontSize:12,overflowLabelLineHeight:12,overflowLabelFontWeight:"normal",overflowLabelBorderColor:uo[100],overflowLabelBorder:1,labelLineBorder:1,labelLineBorderColor:ie[25],cSliderRailHieght:16,cSliderBackgroundFillColor:"#416180",cSliderBackgroundFillOpacity:.05,cSliderForegroundFillColor:"#5B8FF9",cSliderForegroundFillOpacity:.15,cSliderHandlerHeight:24,cSliderHandlerWidth:10,cSliderHandlerFillColor:"#F7F7F7",cSliderHandlerFillOpacity:1,cSliderHandlerHighlightFillColor:"#FFF",cSliderHandlerBorderColor:"#BFBFBF",cSliderHandlerBorder:1,cSliderHandlerBorderRadius:2,cSliderTextFillColor:"#fff",cSliderTextFillOpacity:.45,cSliderTextFontSize:12,cSliderTextLineHeight:12,cSliderTextFontWeight:"normal",cSliderTextBorderColor:null,cSliderTextBorder:0,scrollbarTrackFillColor:"rgba(255,255,255,0.65)",scrollbarThumbFillColor:"rgba(0,0,0,0.35)",scrollbarThumbHighlightFillColor:"rgba(0,0,0,0.45)",pointFillColor:Ai[0],pointFillOpacity:.95,pointSize:4,pointBorder:1,pointBorderColor:uo[100],pointBorderOpacity:1,pointActiveBorderColor:ie[100],pointSelectedBorder:2,pointSelectedBorderColor:ie[100],pointInactiveFillOpacity:.3,pointInactiveBorderOpacity:.3,hollowPointSize:4,hollowPointBorder:1,hollowPointBorderColor:Ai[0],hollowPointBorderOpacity:.95,hollowPointFillColor:uo[100],hollowPointActiveBorder:1,hollowPointActiveBorderColor:ie[100],hollowPointActiveBorderOpacity:1,hollowPointSelectedBorder:2,hollowPointSelectedBorderColor:ie[100],hollowPointSelectedBorderOpacity:1,hollowPointInactiveBorderOpacity:.3,lineBorder:2,lineBorderColor:Ai[0],lineBorderOpacity:1,lineActiveBorder:3,lineSelectedBorder:3,lineInactiveBorderOpacity:.3,areaFillColor:Ai[0],areaFillOpacity:.25,areaActiveFillColor:Ai[0],areaActiveFillOpacity:.5,areaSelectedFillColor:Ai[0],areaSelectedFillOpacity:.5,areaInactiveFillOpacity:.3,hollowAreaBorderColor:Ai[0],hollowAreaBorder:2,hollowAreaBorderOpacity:1,hollowAreaActiveBorder:3,hollowAreaActiveBorderColor:ie[100],hollowAreaSelectedBorder:3,hollowAreaSelectedBorderColor:ie[100],hollowAreaInactiveBorderOpacity:.3,intervalFillColor:Ai[0],intervalFillOpacity:.95,intervalActiveBorder:1,intervalActiveBorderColor:ie[100],intervalActiveBorderOpacity:1,intervalSelectedBorder:2,intervalSelectedBorderColor:ie[100],intervalSelectedBorderOpacity:1,intervalInactiveBorderOpacity:.3,intervalInactiveFillOpacity:.3,hollowIntervalBorder:2,hollowIntervalBorderColor:Ai[0],hollowIntervalBorderOpacity:1,hollowIntervalFillColor:uo[100],hollowIntervalActiveBorder:2,hollowIntervalActiveBorderColor:ie[100],hollowIntervalSelectedBorder:3,hollowIntervalSelectedBorderColor:ie[100],hollowIntervalSelectedBorderOpacity:1,hollowIntervalInactiveBorderOpacity:.3};return E(E({},s),t)},fet=uet();function het(){return window?window.devicePixelRatio:1}function WB(t,n,e,r){var i=t-e,a=n-r;return Math.sqrt(i*i+a*a)}function $s(t,n,e,r,i,a){return i>=t&&i<=t+e&&a>=n&&a<=n+r}function Ah(t,n){return!(n.minX>t.maxX||n.maxX<t.minX||n.minY>t.maxY||n.maxY<t.minY)}function det(t,n){return!t||!n?t||n:{minX:Math.min(t.minX,n.minX),minY:Math.min(t.minY,n.minY),maxX:Math.max(t.maxX,n.maxX),maxY:Math.max(t.maxY,n.maxY)}}function jC(t,n){return t[0]===n[0]&&t[1]===n[1]}var pet=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,vet=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,get=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,VB=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function HB(t,n){var e=t.match(VB);$(e,function(r){var i=r.split(":");n.addColorStop(i[0],i[1])})}function yet(t,n,e){var r=pet.exec(e),i=parseFloat(r[1])%360*(Math.PI/180),a=r[2],o=n.getBBox(),s,l;i>=0&&i<1/2*Math.PI?(s={x:o.minX,y:o.minY},l={x:o.maxX,y:o.maxY}):1/2*Math.PI<=i&&i<Math.PI?(s={x:o.maxX,y:o.minY},l={x:o.minX,y:o.maxY}):Math.PI<=i&&i<3/2*Math.PI?(s={x:o.maxX,y:o.maxY},l={x:o.minX,y:o.minY}):(s={x:o.minX,y:o.maxY},l={x:o.maxX,y:o.minY});var c=Math.tan(i),u=c*c,f=(l.x-s.x+c*(l.y-s.y))/(u+1)+s.x,h=c*(l.x-s.x+c*(l.y-s.y))/(u+1)+s.y,d=t.createLinearGradient(s.x,s.y,f,h);return HB(a,d),d}function met(t,n,e){var r=vet.exec(e),i=parseFloat(r[1]),a=parseFloat(r[2]),o=parseFloat(r[3]),s=r[4];if(o===0){var l=s.match(VB);return l[l.length-1].split(":")[1]}var c=n.getBBox(),u=c.maxX-c.minX,f=c.maxY-c.minY,h=Math.sqrt(u*u+f*f)/2,d=t.createRadialGradient(c.minX+u*i,c.minY+f*a,0,c.minX+u/2,c.minY+f/2,o*h);return HB(s,d),d}function xet(t,n,e){if(n.get("patternSource")&&n.get("patternSource")===e)return n.get("pattern");var r,i,a=get.exec(e),o=a[1],s=a[2];function l(){r=t.createPattern(i,o),n.set("pattern",r),n.set("patternSource",e)}switch(o){case"a":o="repeat";break;case"x":o="repeat-x";break;case"y":o="repeat-y";break;case"n":o="no-repeat";break;default:o="no-repeat"}return i=new Image,s.match(/^data:/i)||(i.crossOrigin="Anonymous"),i.src=s,i.complete?l():(i.onload=l,i.src=i.src),r}function bet(t,n,e){var r=n.getBBox();if(isNaN(r.x)||isNaN(r.y)||isNaN(r.width)||isNaN(r.height))return e;if(pt(e)){if(e[1]==="("||e[2]==="("){if(e[0]==="l")return yet(t,n,e);if(e[0]==="r")return met(t,n,e);if(e[0]==="p")return xet(t,n,e)}return e}if(e instanceof CanvasPattern)return e}function wet(t){var n=0,e=0,r=0,i=0;return et(t)?t.length===1?n=e=r=i=t[0]:t.length===2?(n=r=t[0],e=i=t[1]):t.length===3?(n=t[0],e=i=t[1],r=t[2]):(n=t[0],e=t[1],r=t[2],i=t[3]):n=e=r=i=t,[n,e,r,i]}function wp(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Wb(t,n){return wp(t)*wp(n)?(t[0]*n[0]+t[1]*n[1])/(wp(t)*wp(n)):1}function zC(t,n){return(t[0]*n[1]<t[1]*n[0]?-1:1)*Math.acos(Wb(t,n))}function Eg(t,n){var e=n[1],r=n[2],i=Zy(Ky(n[3]),Math.PI*2),a=n[4],o=n[5],s=t[0],l=t[1],c=n[6],u=n[7],f=Math.cos(i)*(s-c)/2+Math.sin(i)*(l-u)/2,h=-1*Math.sin(i)*(s-c)/2+Math.cos(i)*(l-u)/2,d=f*f/(e*e)+h*h/(r*r);d>1&&(e*=Math.sqrt(d),r*=Math.sqrt(d));var p=e*e*(h*h)+r*r*(f*f),v=p?Math.sqrt((e*e*(r*r)-p)/p):1;a===o&&(v*=-1),isNaN(v)&&(v=0);var g=r?v*e*h/r:0,y=e?v*-r*f/e:0,m=(s+c)/2+Math.cos(i)*g-Math.sin(i)*y,x=(l+u)/2+Math.sin(i)*g+Math.cos(i)*y,b=[(f-g)/e,(h-y)/r],w=[(-1*f-g)/e,(-1*h-y)/r],S=zC([1,0],b),O=zC(b,w);return Wb(b,w)<=-1&&(O=Math.PI),Wb(b,w)>=1&&(O=0),o===0&&O>0&&(O=O-2*Math.PI),o===1&&O<0&&(O=O+2*Math.PI),{cx:m,cy:x,rx:jC(t,[c,u])?0:e,ry:jC(t,[c,u])?0:r,startAngle:S,endAngle:S+O,xRotation:i,arcFlag:a,sweepFlag:o}}var Tg=Math.sin,Cg=Math.cos,ZS=Math.atan2,Sp=Math.PI;function XB(t,n,e,r,i,a,o){var s=n.stroke,l=n.lineWidth,c=e-i,u=r-a,f=ZS(u,c),h=new eO({type:"path",canvas:t.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*Cg(Sp/6)+","+10*Tg(Sp/6)+" L0,0 L"+10*Cg(Sp/6)+",-"+10*Tg(Sp/6),stroke:s,lineWidth:l}});h.translate(i,a),h.rotateAtPoint(i,a,f),t.set(o?"startArrowShape":"endArrowShape",h)}function UB(t,n,e,r,i,a,o){var s=n.startArrow,l=n.endArrow,c=n.stroke,u=n.lineWidth,f=o?s:l,h=f.d,d=f.fill,p=f.stroke,v=f.lineWidth,g=vt(f,["d","fill","stroke","lineWidth"]),y=e-i,m=r-a,x=ZS(m,y);h&&(i=i-Cg(x)*h,a=a-Tg(x)*h);var b=new eO({type:"path",canvas:t.get("canvas"),isArrowShape:!0,attrs:E(E({},g),{stroke:p||c,lineWidth:v||u,fill:d})});b.translate(i,a),b.rotateAtPoint(i,a,x),t.set(o?"startArrowShape":"endArrowShape",b)}function Qs(t,n,e,r,i){var a=ZS(r-n,e-t);return{dx:Cg(a)*i,dy:Tg(a)*i}}function KS(t,n,e,r,i,a){typeof n.startArrow=="object"?UB(t,n,e,r,i,a,!0):n.startArrow?XB(t,n,e,r,i,a,!0):t.set("startArrowShape",null)}function QS(t,n,e,r,i,a){typeof n.endArrow=="object"?UB(t,n,e,r,i,a,!1):n.endArrow?XB(t,n,e,r,i,a,!1):t.set("startArrowShape",null)}var GC={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function Hc(t,n){var e=n.attr();for(var r in e){var i=e[r],a=GC[r]?GC[r]:r;a==="matrix"&&i?t.transform(i[0],i[1],i[3],i[4],i[6],i[7]):a==="lineDash"&&t.setLineDash?et(i)&&t.setLineDash(i):(a==="strokeStyle"||a==="fillStyle"?i=bet(t,n,i):a==="globalAlpha"&&(i=i*t.globalAlpha),t[a]=i)}}function Vb(t,n,e){for(var r=0;r<n.length;r++){var i=n[r];i.cfg.visible?i.draw(t,e):i.skipDraw()}}function Oet(t,n,e){var r=t.get("refreshElements");$(r,function(i){if(i!==t)for(var a=i.cfg.parent;a&&a!==t&&!a.cfg.refresh;)a.cfg.refresh=!0,a=a.cfg.parent}),r[0]===t?JS(n):Hb(n,e)}function Hb(t,n){for(var e=0;e<t.length;e++){var r=t[e];if(r.cfg.visible)if(r.cfg.hasChanged)r.cfg.refresh=!0,r.isGroup()&&JS(r.cfg.children);else if(r.cfg.refresh)r.isGroup()&&Hb(r.cfg.children,n);else{var i=Met(r,n);r.cfg.refresh=i,i&&r.isGroup()&&Hb(r.cfg.children,n)}}}function qB(t){for(var n=0;n<t.length;n++){var e=t[n];e.cfg.hasChanged=!1,e.isGroup()&&!e.destroyed&&qB(e.cfg.children)}}function JS(t,n){for(var e=0;e<t.length;e++){var r=t[e];r.cfg.visible&&(r.cfg.refresh=!0,r.isGroup()&&JS(r.get("children")))}}function Met(t,n){var e=t.cfg.cacheCanvasBBox,r=t.cfg.isInView&&e&&Ah(e,n);return r}function ZB(t,n,e,r){var i=e.path,a=e.startArrow,o=e.endArrow;if(i){var s=[0,0],l=[0,0],c={dx:0,dy:0};n.beginPath();for(var u=0;u<i.length;u++){var f=i[u],h=f[0];if(u===0&&a&&a.d){var d=t.getStartTangent();c=Qs(d[0][0],d[0][1],d[1][0],d[1][1],a.d)}else if(u===i.length-2&&i[u+1][0]==="Z"&&o&&o.d){var p=i[u+1];if(p[0]==="Z"){var d=t.getEndTangent();c=Qs(d[0][0],d[0][1],d[1][0],d[1][1],o.d)}}else if(u===i.length-1&&o&&o.d&&i[0]!=="Z"){var d=t.getEndTangent();c=Qs(d[0][0],d[0][1],d[1][0],d[1][1],o.d)}var v=c.dx,g=c.dy;switch(h){case"M":n.moveTo(f[1]-v,f[2]-g),l=[f[1],f[2]];break;case"L":n.lineTo(f[1]-v,f[2]-g);break;case"Q":n.quadraticCurveTo(f[1],f[2],f[3]-v,f[4]-g);break;case"C":n.bezierCurveTo(f[1],f[2],f[3],f[4],f[5]-v,f[6]-g);break;case"A":{var y=void 0;r?(y=r[u],y||(y=Eg(s,f),r[u]=y)):y=Eg(s,f);var m=y.cx,x=y.cy,b=y.rx,w=y.ry,S=y.startAngle,O=y.endAngle,M=y.xRotation,A=y.sweepFlag;if(n.ellipse)n.ellipse(m,x,b,w,M,S,O,1-A);else{var T=b>w?b:w,C=b>w?1:b/w,P=b>w?w/b:1;n.translate(m,x),n.rotate(M),n.scale(C,P),n.arc(0,0,T,S,O,1-A),n.scale(1/C,1/P),n.rotate(-M),n.translate(-m,-x)}break}case"Z":n.closePath();break}if(h==="Z")s=l;else{var _=f.length;s=[f[_-2],f[_-1]]}}}}function KB(t,n){var e=t.get("canvas");e&&(n==="remove"&&(t._cacheCanvasBBox=t.get("cacheCanvasBBox")),t.get("hasChanged")||(t.set("hasChanged",!0),t.cfg.parent&&t.cfg.parent.get("hasChanged")||(e.refreshElement(t,n,e),e.get("autoDraw")&&e.draw())))}function Aet(t){var n;if(t.destroyed)n=t._cacheCanvasBBox;else{var e=t.get("cacheCanvasBBox"),r=e&&!!(e.width&&e.height),i=t.getCanvasBBox(),a=i&&!!(i.width&&i.height);r&&a?n=det(e,i):r?n=e:a&&(n=i)}return n}function Eet(t){if(!t.length)return null;var n=[],e=[],r=[],i=[];return $(t,function(a){var o=Aet(a);o&&(n.push(o.minX),e.push(o.minY),r.push(o.maxX),i.push(o.maxY))}),{minX:hi(n),minY:hi(e),maxX:Vr(r),maxY:Vr(i)}}function Tet(t,n){return!t||!n||!Ah(t,n)?null:{minX:Math.max(t.minX,n.minX),minY:Math.max(t.minY,n.minY),maxX:Math.min(t.maxX,n.maxX),maxY:Math.min(t.maxY,n.maxY)}}var tO=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.onCanvasChange=function(e){KB(this,e)},n.prototype.getShapeBase=function(){return Xy},n.prototype.getGroupBase=function(){return n},n.prototype._applyClip=function(e,r){r&&(e.save(),Hc(e,r),r.createPath(e),e.restore(),e.clip(),r._afterDraw())},n.prototype.cacheCanvasBBox=function(){var e=this.cfg.children,r=[],i=[];$(e,function(h){var d=h.cfg.cacheCanvasBBox;d&&h.cfg.isInView&&(r.push(d.minX,d.maxX),i.push(d.minY,d.maxY))});var a=null;if(r.length){var o=hi(r),s=Vr(r),l=hi(i),c=Vr(i);a={minX:o,minY:l,x:o,y:l,maxX:s,maxY:c,width:s-o,height:c-l};var u=this.cfg.canvas;if(u){var f=u.getViewRange();this.set("isInView",Ah(a,f))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",a)},n.prototype.draw=function(e,r){var i=this.cfg.children,a=r?this.cfg.refresh:!0;i.length&&a&&(e.save(),Hc(e,this),this._applyClip(e,this.getClip()),Vb(e,i,r),e.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},n.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},n}(s0),Gi=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return E(E({},e),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},n.prototype.getShapeBase=function(){return Xy},n.prototype.getGroupBase=function(){return tO},n.prototype.onCanvasChange=function(e){KB(this,e)},n.prototype.calculateBBox=function(){var e=this.get("type"),r=this.getHitLineWidth(),i=c0(e),a=i(this),o=r/2,s=a.x-o,l=a.y-o,c=a.x+a.width+o,u=a.y+a.height+o;return{x:s,minX:s,y:l,minY:l,width:a.width+r,height:a.height+r,maxX:c,maxY:u}},n.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},n.prototype.isStroke=function(){return!!this.attrs.stroke},n.prototype._applyClip=function(e,r){r&&(e.save(),Hc(e,r),r.createPath(e),e.restore(),e.clip(),r._afterDraw())},n.prototype.draw=function(e,r){var i=this.cfg.clipShape;if(r){if(this.cfg.refresh===!1){this.set("hasChanged",!1);return}var a=this.getCanvasBBox();if(!Ah(r,a)){this.set("hasChanged",!1),this.cfg.isInView&&this._afterDraw();return}}e.save(),Hc(e,this),this._applyClip(e,i),this.drawPath(e),e.restore(),this._afterDraw()},n.prototype.getCanvasViewBox=function(){var e=this.cfg.canvas;return e?e.getViewRange():null},n.prototype.cacheCanvasBBox=function(){var e=this.getCanvasViewBox();if(e){var r=this.getCanvasBBox(),i=Ah(r,e);this.set("isInView",i),i?this.set("cacheCanvasBBox",r):this.set("cacheCanvasBBox",null)}},n.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},n.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},n.prototype.drawPath=function(e){this.createPath(e),this.strokeAndFill(e),this.afterDrawPath(e)},n.prototype.fill=function(e){e.fill()},n.prototype.stroke=function(e){e.stroke()},n.prototype.strokeAndFill=function(e){var r=this.attrs,i=r.lineWidth,a=r.opacity,o=r.strokeOpacity,s=r.fillOpacity;this.isFill()&&(!J(s)&&s!==1?(e.globalAlpha=s,this.fill(e),e.globalAlpha=a):this.fill(e)),this.isStroke()&&i>0&&(!J(o)&&o!==1&&(e.globalAlpha=o),this.stroke(e)),this.afterDrawPath(e)},n.prototype.createPath=function(e){},n.prototype.afterDrawPath=function(e){},n.prototype.isInShape=function(e,r){var i=this.isStroke(),a=this.isFill(),o=this.getHitLineWidth();return this.isInStrokeOrPath(e,r,i,a,o)},n.prototype.isInStrokeOrPath=function(e,r,i,a,o){return!1},n.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var e=this.attrs;return e.lineWidth+e.lineAppendWidth},n}(l0),Cet=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return E(E({},e),{x:0,y:0,r:0})},n.prototype.isInStrokeOrPath=function(e,r,i,a,o){var s=this.attr(),l=s.x,c=s.y,u=s.r,f=o/2,h=WB(l,c,e,r);return a&&i?h<=u+f:a?h<=u:i?h>=u-f&&h<=u+f:!1},n.prototype.createPath=function(e){var r=this.attr(),i=r.x,a=r.y,o=r.r;e.beginPath(),e.arc(i,a,o,0,Math.PI*2,!1),e.closePath()},n}(Gi);function Op(t,n,e,r){return t/(e*e)+n/(r*r)}var Pet=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return E(E({},e),{x:0,y:0,rx:0,ry:0})},n.prototype.isInStrokeOrPath=function(e,r,i,a,o){var s=this.attr(),l=o/2,c=s.x,u=s.y,f=s.rx,h=s.ry,d=(e-c)*(e-c),p=(r-u)*(r-u);return a&&i?Op(d,p,f+l,h+l)<=1:a?Op(d,p,f,h)<=1:i?Op(d,p,f-l,h-l)>=1&&Op(d,p,f+l,h+l)<=1:!1},n.prototype.createPath=function(e){var r=this.attr(),i=r.x,a=r.y,o=r.rx,s=r.ry;if(e.beginPath(),e.ellipse)e.ellipse(i,a,o,s,0,0,Math.PI*2,!1);else{var l=o>s?o:s,c=o>s?1:o/s,u=o>s?s/o:1;e.save(),e.translate(i,a),e.scale(c,u),e.arc(0,0,l,0,Math.PI*2),e.restore(),e.closePath()}},n}(Gi);function YC(t){return t instanceof HTMLElement&&pt(t.nodeName)&&t.nodeName.toUpperCase()==="CANVAS"}var ket=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return E(E({},e),{x:0,y:0,width:0,height:0})},n.prototype.initAttrs=function(e){this._setImage(e.img)},n.prototype.isStroke=function(){return!1},n.prototype.isOnlyHitBox=function(){return!0},n.prototype._afterLoading=function(){if(this.get("toDraw")===!0){var e=this.get("canvas");e?e.draw():this.createPath(this.get("context"))}},n.prototype._setImage=function(e){var r=this,i=this.attrs;if(pt(e)){var a=new Image;a.onload=function(){if(r.destroyed)return!1;r.attr("img",a),r.set("loading",!1),r._afterLoading();var o=r.get("callback");o&&o.call(r)},a.crossOrigin="Anonymous",a.src=e,this.set("loading",!0)}else e instanceof Image?(i.width||(i.width=e.width),i.height||(i.height=e.height)):YC(e)&&(i.width||(i.width=Number(e.getAttribute("width"))),i.height||(i.height,Number(e.getAttribute("height"))))},n.prototype.onAttrChange=function(e,r,i){t.prototype.onAttrChange.call(this,e,r,i),e==="img"&&this._setImage(r)},n.prototype.createPath=function(e){if(this.get("loading")){this.set("toDraw",!0),this.set("context",e);return}var r=this.attr(),i=r.x,a=r.y,o=r.width,s=r.height,l=r.sx,c=r.sy,u=r.swidth,f=r.sheight,h=r.img;(h instanceof Image||YC(h))&&(!J(l)&&!J(c)&&!J(u)&&!J(f)?e.drawImage(h,l,c,u,f,i,a,o,s):e.drawImage(h,i,a,o,s))},n}(Gi);function ko(t,n,e,r,i,a,o){var s=Math.min(t,e),l=Math.max(t,e),c=Math.min(n,r),u=Math.max(n,r),f=i/2;return a>=s-f&&a<=l+f&&o>=c-f&&o<=u+f?Pn.pointToLine(t,n,e,r,a,o)<=i/2:!1}var _et=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return E(E({},e),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},n.prototype.initAttrs=function(e){this.setArrow()},n.prototype.onAttrChange=function(e,r,i){t.prototype.onAttrChange.call(this,e,r,i),this.setArrow()},n.prototype.setArrow=function(){var e=this.attr(),r=e.x1,i=e.y1,a=e.x2,o=e.y2,s=e.startArrow,l=e.endArrow;s&&KS(this,e,a,o,r,i),l&&QS(this,e,r,i,a,o)},n.prototype.isInStrokeOrPath=function(e,r,i,a,o){if(!i||!o)return!1;var s=this.attr(),l=s.x1,c=s.y1,u=s.x2,f=s.y2;return ko(l,c,u,f,o,e,r)},n.prototype.createPath=function(e){var r=this.attr(),i=r.x1,a=r.y1,o=r.x2,s=r.y2,l=r.startArrow,c=r.endArrow,u={dx:0,dy:0},f={dx:0,dy:0};l&&l.d&&(u=Qs(i,a,o,s,r.startArrow.d)),c&&c.d&&(f=Qs(i,a,o,s,r.endArrow.d)),e.beginPath(),e.moveTo(i+u.dx,a+u.dy),e.lineTo(o-f.dx,s-f.dy)},n.prototype.afterDrawPath=function(e){var r=this.get("startArrowShape"),i=this.get("endArrowShape");r&&r.draw(e),i&&i.draw(e)},n.prototype.getTotalLength=function(){var e=this.attr(),r=e.x1,i=e.y1,a=e.x2,o=e.y2;return Pn.length(r,i,a,o)},n.prototype.getPoint=function(e){var r=this.attr(),i=r.x1,a=r.y1,o=r.x2,s=r.y2;return Pn.pointAt(i,a,o,s,e)},n}(Gi),Let=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,Iet=/[^\s\,]+/ig;function Fet(t){var n=t||[];if(et(n))return n;if(pt(n))return n=n.match(Let),$(n,function(e,r){if(e=e.match(Iet),e[0].length>1){var i=e[0].charAt(0);e.splice(1,0,e[0].substr(1)),e[0]=i}$(e,function(a,o){isNaN(a)||(e[o]=+a)}),n[r]=e}),n}var Vf=`	
\v\f\r   ᠎             　\u2028\u2029`,Det=new RegExp("([a-z])["+Vf+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+Vf+"]*,?["+Vf+"]*)+)","ig"),Ret=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+Vf+"]*,?["+Vf+"]*","ig");function Bet(t){if(!t)return null;if(et(t))return t;var n={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},e=[];return String(t).replace(Det,function(r,i,a){var o=[],s=i.toLowerCase();if(a.replace(Ret,function(l,c){c&&o.push(+c)}),s==="m"&&o.length>2&&(e.push([i].concat(o.splice(0,2))),s="l",i=i==="m"?"l":"L"),s==="o"&&o.length===1&&e.push([i,o[0]]),s==="r")e.push([i].concat(o));else for(;o.length>=n[s]&&(e.push([i].concat(o.splice(0,n[s]))),!!n[s]););return""}),e}var Net=/[a-z]/;function WC(t,n){return[n[0]+(n[0]-t[0]),n[1]+(n[1]-t[1])]}function QB(t){var n=Bet(t);if(!n||!n.length)return[["M",0,0]];for(var e=!1,r=0;r<n.length;r++){var i=n[r][0];if(Net.test(i)||["V","H","T","S"].indexOf(i)>=0){e=!0;break}}if(!e)return n;var a=[],o=0,s=0,l=0,c=0,u=0,f=n[0];(f[0]==="M"||f[0]==="m")&&(o=+f[1],s=+f[2],l=o,c=s,u++,a[0]=["M",o,s]);for(var r=u,h=n.length;r<h;r++){var d=n[r],p=a[r-1],v=[],i=d[0],g=i.toUpperCase();if(i!==g)switch(v[0]=g,g){case"A":v[1]=d[1],v[2]=d[2],v[3]=d[3],v[4]=d[4],v[5]=d[5],v[6]=+d[6]+o,v[7]=+d[7]+s;break;case"V":v[1]=+d[1]+s;break;case"H":v[1]=+d[1]+o;break;case"M":l=+d[1]+o,c=+d[2]+s,v[1]=l,v[2]=c;break;default:for(var y=1,m=d.length;y<m;y++)v[y]=+d[y]+(y%2?o:s)}else v=n[r];switch(g){case"Z":o=+l,s=+c;break;case"H":o=v[1],v=["L",o,s];break;case"V":s=v[1],v=["L",o,s];break;case"T":o=v[1],s=v[2];var x=WC([p[1],p[2]],[p[3],p[4]]);v=["Q",x[0],x[1],o,s];break;case"S":o=v[v.length-2],s=v[v.length-1];var b=p.length,w=WC([p[b-4],p[b-3]],[p[b-2],p[b-1]]);v=["C",w[0],w[1],v[1],v[2],o,s];break;case"M":l=v[v.length-2],c=v[v.length-1];break;default:o=v[v.length-2],s=v[v.length-1]}a.push(v)}return a}function Mp(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Xb(t,n){return Mp(t)*Mp(n)?(t[0]*n[0]+t[1]*n[1])/(Mp(t)*Mp(n)):1}function VC(t,n){return(t[0]*n[1]<t[1]*n[0]?-1:1)*Math.acos(Xb(t,n))}function Ub(t,n){return t[0]===n[0]&&t[1]===n[1]}function $et(t,n){var e=n[1],r=n[2],i=Zy(Ky(n[3]),Math.PI*2),a=n[4],o=n[5],s=t[0],l=t[1],c=n[6],u=n[7],f=Math.cos(i)*(s-c)/2+Math.sin(i)*(l-u)/2,h=-1*Math.sin(i)*(s-c)/2+Math.cos(i)*(l-u)/2,d=f*f/(e*e)+h*h/(r*r);d>1&&(e*=Math.sqrt(d),r*=Math.sqrt(d));var p=e*e*(h*h)+r*r*(f*f),v=p?Math.sqrt((e*e*(r*r)-p)/p):1;a===o&&(v*=-1),isNaN(v)&&(v=0);var g=r?v*e*h/r:0,y=e?v*-r*f/e:0,m=(s+c)/2+Math.cos(i)*g-Math.sin(i)*y,x=(l+u)/2+Math.sin(i)*g+Math.cos(i)*y,b=[(f-g)/e,(h-y)/r],w=[(-1*f-g)/e,(-1*h-y)/r],S=VC([1,0],b),O=VC(b,w);return Xb(b,w)<=-1&&(O=Math.PI),Xb(b,w)>=1&&(O=0),o===0&&O>0&&(O=O-2*Math.PI),o===1&&O<0&&(O=O+2*Math.PI),{cx:m,cy:x,rx:Ub(t,[c,u])?0:e,ry:Ub(t,[c,u])?0:r,startAngle:S,endAngle:S+O,xRotation:i,arcFlag:a,sweepFlag:o}}function HC(t,n){return[n[0]+(n[0]-t[0]),n[1]+(n[1]-t[1])]}function jet(t){t=Fet(t);for(var n=[],e=null,r=null,i=null,a=0,o=t.length,s=0;s<o;s++){var l=t[s];r=t[s+1];var c=l[0],u={command:c,prePoint:e,params:l,startTangent:null,endTangent:null};switch(c){case"M":i=[l[1],l[2]],a=s;break;case"A":var f=$et(e,l);u.arcParams=f;break}if(c==="Z")e=i,r=t[a+1];else{var h=l.length;e=[l[h-2],l[h-1]]}r&&r[0]==="Z"&&(r=t[a],n[a]&&(n[a].prePoint=e)),u.currentPoint=e,n[a]&&Ub(e,n[a].currentPoint)&&(n[a].prePoint=u.prePoint);var d=r?[r[r.length-2],r[r.length-1]]:null;u.nextPoint=d;var p=u.prePoint;if(["L","H","V"].includes(c))u.startTangent=[p[0]-e[0],p[1]-e[1]],u.endTangent=[e[0]-p[0],e[1]-p[1]];else if(c==="Q"){var v=[l[1],l[2]];u.startTangent=[p[0]-v[0],p[1]-v[1]],u.endTangent=[e[0]-v[0],e[1]-v[1]]}else if(c==="T"){var g=n[s-1],v=HC(g.currentPoint,p);g.command==="Q"?(u.command="Q",u.startTangent=[p[0]-v[0],p[1]-v[1]],u.endTangent=[e[0]-v[0],e[1]-v[1]]):(u.command="TL",u.startTangent=[p[0]-e[0],p[1]-e[1]],u.endTangent=[e[0]-p[0],e[1]-p[1]])}else if(c==="C"){var y=[l[1],l[2]],m=[l[3],l[4]];u.startTangent=[p[0]-y[0],p[1]-y[1]],u.endTangent=[e[0]-m[0],e[1]-m[1]],u.startTangent[0]===0&&u.startTangent[1]===0&&(u.startTangent=[y[0]-m[0],y[1]-m[1]]),u.endTangent[0]===0&&u.endTangent[1]===0&&(u.endTangent=[m[0]-y[0],m[1]-y[1]])}else if(c==="S"){var g=n[s-1],y=HC(g.currentPoint,p),m=[l[1],l[2]];g.command==="C"?(u.command="C",u.startTangent=[p[0]-y[0],p[1]-y[1]],u.endTangent=[e[0]-m[0],e[1]-m[1]]):(u.command="SQ",u.startTangent=[p[0]-m[0],p[1]-m[1]],u.endTangent=[e[0]-m[0],e[1]-m[1]])}else if(c==="A"){var x=.001,b=u.arcParams||{},w=b.cx,S=w===void 0?0:w,O=b.cy,M=O===void 0?0:O,A=b.rx,T=A===void 0?0:A,C=b.ry,P=C===void 0?0:C,_=b.sweepFlag,k=_===void 0?0:_,I=b.startAngle,L=I===void 0?0:I,F=b.endAngle,B=F===void 0?0:F;k===0&&(x*=-1);var D=T*Math.cos(L-x)+S,N=P*Math.sin(L-x)+M;u.startTangent=[D-i[0],N-i[1]];var j=T*Math.cos(L+B+x)+S,Y=P*Math.sin(L+B-x)+M;u.endTangent=[p[0]-j,p[1]-Y]}n.push(u)}return n}var zet={circle:function(t,n,e){return[["M",t-e,n],["A",e,e,0,1,0,t+e,n],["A",e,e,0,1,0,t-e,n]]},square:function(t,n,e){return[["M",t-e,n-e],["L",t+e,n-e],["L",t+e,n+e],["L",t-e,n+e],["Z"]]},diamond:function(t,n,e){return[["M",t-e,n],["L",t,n-e],["L",t+e,n],["L",t,n+e],["Z"]]},triangle:function(t,n,e){var r=e*Math.sin(.3333333333333333*Math.PI);return[["M",t-e,n+r],["L",t,n-r],["L",t+e,n+r],["Z"]]},"triangle-down":function(t,n,e){var r=e*Math.sin(.3333333333333333*Math.PI);return[["M",t-e,n-r],["L",t+e,n-r],["L",t,n+r],["Z"]]}},Get=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.initAttrs=function(e){this._resetParamsCache()},n.prototype._resetParamsCache=function(){this.set("paramsCache",{})},n.prototype.onAttrChange=function(e,r,i){t.prototype.onAttrChange.call(this,e,r,i),["symbol","x","y","r","radius"].indexOf(e)!==-1&&this._resetParamsCache()},n.prototype.isOnlyHitBox=function(){return!0},n.prototype._getR=function(e){return J(e.r)?e.radius:e.r},n.prototype._getPath=function(){var e=this.attr(),r=e.x,i=e.y,a=e.symbol||"circle",o=this._getR(e),s,l;if(ut(a))s=a,l=s(r,i,o),l=QB(l);else{if(s=n.Symbols[a],!s)return console.warn(a+" marker is not supported."),null;l=s(r,i,o)}return l},n.prototype.createPath=function(e){var r=this._getPath(),i=this.get("paramsCache");ZB(this,e,{path:r},i)},n.Symbols=zet,n}(Gi);function JB(t,n,e){var r=f0();return t.createPath(r),r.isPointInPath(n,e)}var Yet=1e-6;function _1(t){return Math.abs(t)<Yet?0:t<0?-1:1}function Wet(t,n,e){return(e[0]-t[0])*(n[1]-t[1])===(n[0]-t[0])*(e[1]-t[1])&&Math.min(t[0],n[0])<=e[0]&&e[0]<=Math.max(t[0],n[0])&&Math.min(t[1],n[1])<=e[1]&&e[1]<=Math.max(t[1],n[1])}function t3(t,n,e){var r=!1,i=t.length;if(i<=2)return!1;for(var a=0;a<i;a++){var o=t[a],s=t[(a+1)%i];if(Wet(o,s,[n,e]))return!0;_1(o[1]-e)>0!=_1(s[1]-e)>0&&_1(n-(e-o[1])*(o[0]-s[0])/(o[1]-s[1])-o[0])<0&&(r=!r)}return r}function xf(t,n,e,r,i,a,o,s){var l=(Math.atan2(s-n,o-t)+Math.PI*2)%(Math.PI*2);if(l<r||l>i)return!1;var c={x:t+e*Math.cos(l),y:n+e*Math.sin(l)};return WB(c.x,c.y,o,s)<=a/2}var Vet=sn;function Het(t){for(var n=!1,e=t.length,r=0;r<e;r++){var i=t[r],a=i[0];if(a==="C"||a==="A"||a==="Q"){n=!0;break}}return n}function Xet(t,n,e,r,i){for(var a=!1,o=n/2,s=0;s<t.length;s++){var l=t[s],c=l.currentPoint,u=l.params,f=l.prePoint,h=l.box;if(!(h&&!$s(h.x-o,h.y-o,h.width+n,h.height+n,e,r))){switch(l.command){case"L":case"Z":a=ko(f[0],f[1],c[0],c[1],n,e,r);break;case"Q":var d=i5.pointDistance(f[0],f[1],u[1],u[2],u[3],u[4],e,r);a=d<=n/2;break;case"C":var p=$f.pointDistance(f[0],f[1],u[1],u[2],u[3],u[4],u[5],u[6],e,r,i);a=p<=n/2;break;case"A":var v=l.arcParams,g=v.cx,y=v.cy,m=v.rx,x=v.ry,b=v.startAngle,w=v.endAngle,S=v.xRotation,O=[e,r,1],M=m>x?m:x,A=m>x?1:m/x,T=m>x?x/m:1,C=Vet(null,[["t",-g,-y],["r",-S],["s",1/A,1/T]]);ol(O,O,C),a=xf(0,0,M,b,w,n,O[0],O[1]);break}if(a)break}}return a}function Uet(t){for(var n=t.length,e=[],r=[],i=[],a=0;a<n;a++){var o=t[a],s=o[0];s==="M"?(i.length&&(r.push(i),i=[]),i.push([o[1],o[2]])):s==="Z"?i.length&&(e.push(i),i=[]):i.push([o[1],o[2]])}return i.length>0&&r.push(i),{polygons:e,polylines:r}}const Ap=E({hasArc:Het,extractPolygons:Uet,isPointInStroke:Xet},sS);function XC(t,n,e){for(var r=!1,i=0;i<t.length;i++){var a=t[i];if(r=t3(a,n,e),r)break}return r}var eO=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return E(E({},e),{startArrow:!1,endArrow:!1})},n.prototype.initAttrs=function(e){this._setPathArr(e.path),this.setArrow()},n.prototype.onAttrChange=function(e,r,i){t.prototype.onAttrChange.call(this,e,r,i),e==="path"&&this._setPathArr(r),this.setArrow()},n.prototype._setPathArr=function(e){this.attrs.path=QB(e);var r=Ap.hasArc(e);this.set("hasArc",r),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},n.prototype.getSegments=function(){var e=this.get("segements");return e||(e=jet(this.attr("path")),this.set("segments",e)),e},n.prototype.setArrow=function(){var e=this.attr(),r=e.startArrow,i=e.endArrow;if(r){var a=this.getStartTangent();KS(this,e,a[0][0],a[0][1],a[1][0],a[1][1])}if(i){var a=this.getEndTangent();QS(this,e,a[0][0],a[0][1],a[1][0],a[1][1])}},n.prototype.isInStrokeOrPath=function(e,r,i,a,o){var s=this.getSegments(),l=this.get("hasArc"),c=!1;if(i){var u=this.getTotalLength();c=Ap.isPointInStroke(s,o,e,r,u)}if(!c&&a)if(l)c=JB(this,e,r);else{var f=this.attr("path"),h=Ap.extractPolygons(f);c=XC(h.polygons,e,r)||XC(h.polylines,e,r)}return c},n.prototype.createPath=function(e){var r=this.attr(),i=this.get("paramsCache");ZB(this,e,r,i)},n.prototype.afterDrawPath=function(e){var r=this.get("startArrowShape"),i=this.get("endArrowShape");r&&r.draw(e),i&&i.draw(e)},n.prototype.getTotalLength=function(){var e=this.get("totalLength");return J(e)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):e},n.prototype.getPoint=function(e){var r=this.get("tCache");r||(this._calculateCurve(),this._setTcache(),r=this.get("tCache"));var i,a,o=this.get("curve");if(!r||r.length===0)return o?{x:o[0][1],y:o[0][2]}:null;$(r,function(u,f){e>=u[0]&&e<=u[1]&&(i=(e-u[0])/(u[1]-u[0]),a=f)});var s=o[a];if(J(s)||J(a))return null;var l=s.length,c=o[a+1];return $f.pointAt(s[l-2],s[l-1],c[1],c[2],c[3],c[4],c[5],c[6],i)},n.prototype._calculateCurve=function(){var e=this.attr().path;this.set("curve",Ap.pathToCurve(e))},n.prototype._setTcache=function(){var e=0,r=0,i=[],a,o,s,l,c=this.get("curve");if(c){if($(c,function(u,f){s=c[f+1],l=u.length,s&&(e+=$f.length(u[l-2],u[l-1],s[1],s[2],s[3],s[4],s[5],s[6])||0)}),this.set("totalLength",e),e===0){this.set("tCache",[]);return}$(c,function(u,f){s=c[f+1],l=u.length,s&&(a=[],a[0]=r/e,o=$f.length(u[l-2],u[l-1],s[1],s[2],s[3],s[4],s[5],s[6]),r+=o||0,a[1]=r/e,i.push(a))}),this.set("tCache",i)}},n.prototype.getStartTangent=function(){var e=this.getSegments(),r;if(e.length>1){var i=e[0].currentPoint,a=e[1].currentPoint,o=e[1].startTangent;r=[],o?(r.push([i[0]-o[0],i[1]-o[1]]),r.push([i[0],i[1]])):(r.push([a[0],a[1]]),r.push([i[0],i[1]]))}return r},n.prototype.getEndTangent=function(){var e=this.getSegments(),r=e.length,i;if(r>1){var a=e[r-2].currentPoint,o=e[r-1].currentPoint,s=e[r-1].endTangent;i=[],s?(i.push([o[0]-s[0],o[1]-s[1]]),i.push([o[0],o[1]])):(i.push([a[0],a[1]]),i.push([o[0],o[1]]))}return i},n}(Gi);function e3(t,n,e,r,i){var a=t.length;if(a<2)return!1;for(var o=0;o<a-1;o++){var s=t[o][0],l=t[o][1],c=t[o+1][0],u=t[o+1][1];if(ko(s,l,c,u,n,e,r))return!0}if(i){var f=t[0],h=t[a-1];if(ko(f[0],f[1],h[0],h[1],n,e,r))return!0}return!1}var qet=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.isInStrokeOrPath=function(e,r,i,a,o){var s=this.attr().points,l=!1;return i&&(l=e3(s,o,e,r,!0)),!l&&a&&(l=t3(s,e,r)),l},n.prototype.createPath=function(e){var r=this.attr(),i=r.points;if(!(i.length<2)){e.beginPath();for(var a=0;a<i.length;a++){var o=i[a];a===0?e.moveTo(o[0],o[1]):e.lineTo(o[0],o[1])}e.closePath()}},n}(Gi),Zet=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return E(E({},e),{startArrow:!1,endArrow:!1})},n.prototype.initAttrs=function(e){this.setArrow()},n.prototype.onAttrChange=function(e,r,i){t.prototype.onAttrChange.call(this,e,r,i),this.setArrow(),["points"].indexOf(e)!==-1&&this._resetCache()},n.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},n.prototype.setArrow=function(){var e=this.attr(),r=this.attrs,i=r.points,a=r.startArrow,o=r.endArrow,s=i.length,l=i[0][0],c=i[0][1],u=i[s-1][0],f=i[s-1][1];a&&KS(this,e,i[1][0],i[1][1],l,c),o&&QS(this,e,i[s-2][0],i[s-2][1],u,f)},n.prototype.isFill=function(){return!1},n.prototype.isInStrokeOrPath=function(e,r,i,a,o){if(!i||!o)return!1;var s=this.attr().points;return e3(s,o,e,r,!1)},n.prototype.isStroke=function(){return!0},n.prototype.createPath=function(e){var r=this.attr(),i=r.points,a=r.startArrow,o=r.endArrow,s=i.length;if(!(i.length<2)){var l=i[0][0],c=i[0][1],u=i[s-1][0],f=i[s-1][1];if(a&&a.d){var h=Qs(l,c,i[1][0],i[1][1],a.d);l+=h.dx,c+=h.dy}if(o&&o.d){var h=Qs(i[s-2][0],i[s-2][1],u,f,o.d);u-=h.dx,f-=h.dy}e.beginPath(),e.moveTo(l,c);for(var d=0;d<s-1;d++){var p=i[d];e.lineTo(p[0],p[1])}e.lineTo(u,f)}},n.prototype.afterDrawPath=function(e){var r=this.get("startArrowShape"),i=this.get("endArrowShape");r&&r.draw(e),i&&i.draw(e)},n.prototype.getTotalLength=function(){var e=this.attr().points,r=this.get("totalLength");return J(r)?(this.set("totalLength",s5.length(e)),this.get("totalLength")):r},n.prototype.getPoint=function(e){var r=this.attr().points,i=this.get("tCache");i||(this._setTcache(),i=this.get("tCache"));var a,o;return $(i,function(s,l){e>=s[0]&&e<=s[1]&&(a=(e-s[0])/(s[1]-s[0]),o=l)}),Pn.pointAt(r[o][0],r[o][1],r[o+1][0],r[o+1][1],a)},n.prototype._setTcache=function(){var e=this.attr().points;if(!(!e||e.length===0)){var r=this.getTotalLength();if(!(r<=0)){var i=0,a=[],o,s;$(e,function(l,c){e[c+1]&&(o=[],o[0]=i/r,s=Pn.length(l[0],l[1],e[c+1][0],e[c+1][1]),i+=s,o[1]=i/r,a.push(o))}),this.set("tCache",a)}}},n.prototype.getStartTangent=function(){var e=this.attr().points,r=[];return r.push([e[1][0],e[1][1]]),r.push([e[0][0],e[0][1]]),r},n.prototype.getEndTangent=function(){var e=this.attr().points,r=e.length-1,i=[];return i.push([e[r-1][0],e[r-1][1]]),i.push([e[r][0],e[r][1]]),i},n}(Gi);function Ket(t,n,e,r,i,a,o){var s=i/2;return $s(t-s,n-s,e,i,a,o)||$s(t+e-s,n-s,i,r,a,o)||$s(t+s,n+r-s,e,i,a,o)||$s(t-s,n+s,i,r,a,o)}function Qet(t,n,e,r,i,a,o,s){return ko(t+i,n,t+e-i,n,a,o,s)||ko(t+e,n+i,t+e,n+r-i,a,o,s)||ko(t+e-i,n+r,t+i,n+r,a,o,s)||ko(t,n+r-i,t,n+i,a,o,s)||xf(t+e-i,n+i,i,1.5*Math.PI,2*Math.PI,a,o,s)||xf(t+e-i,n+r-i,i,0,.5*Math.PI,a,o,s)||xf(t+i,n+r-i,i,.5*Math.PI,Math.PI,a,o,s)||xf(t+i,n+i,i,Math.PI,1.5*Math.PI,a,o,s)}var Jet=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return E(E({},e),{x:0,y:0,width:0,height:0,radius:0})},n.prototype.isInStrokeOrPath=function(e,r,i,a,o){var s=this.attr(),l=s.x,c=s.y,u=s.width,f=s.height,h=s.radius;if(h){var p=!1;return i&&(p=Qet(l,c,u,f,h,o,e,r)),!p&&a&&(p=JB(this,e,r)),p}else{var d=o/2;if(a&&i)return $s(l-d,c-d,u+d,f+d,e,r);if(a)return $s(l,c,u,f,e,r);if(i)return Ket(l,c,u,f,o,e,r)}},n.prototype.createPath=function(e){var r=this.attr(),i=r.x,a=r.y,o=r.width,s=r.height,l=r.radius;if(e.beginPath(),l===0)e.rect(i,a,o,s);else{var c=wet(l),u=c[0],f=c[1],h=c[2],d=c[3];e.moveTo(i+u,a),e.lineTo(i+o-f,a),f!==0&&e.arc(i+o-f,a+f,f,-Math.PI/2,0),e.lineTo(i+o,a+s-h),h!==0&&e.arc(i+o-h,a+s-h,h,0,Math.PI/2),e.lineTo(i+d,a+s),d!==0&&e.arc(i+d,a+s-d,d,Math.PI/2,Math.PI),e.lineTo(i,a+u),u!==0&&e.arc(i+u,a+u,u,Math.PI,Math.PI*1.5),e.closePath()}},n}(Gi),tnt=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return E(E({},e),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},n.prototype.isOnlyHitBox=function(){return!0},n.prototype.initAttrs=function(e){this._assembleFont(),e.text&&this._setText(e.text)},n.prototype._assembleFont=function(){var e=this.attrs;e.font=d0(e)},n.prototype._setText=function(e){var r=null;pt(e)&&e.indexOf(`
`)!==-1&&(r=e.split(`
`)),this.set("textArr",r)},n.prototype.onAttrChange=function(e,r,i){t.prototype.onAttrChange.call(this,e,r,i),e.startsWith("font")&&this._assembleFont(),e==="text"&&this._setText(r)},n.prototype._getSpaceingY=function(){var e=this.attrs,r=e.lineHeight,i=e.fontSize*1;return r?r-i:i*.14},n.prototype._drawTextArr=function(e,r,i){var a=this.attrs,o=a.textBaseline,s=a.x,l=a.y,c=a.fontSize*1,u=this._getSpaceingY(),f=h0(a.text,a.fontSize,a.lineHeight),h;$(r,function(d,p){h=l+p*(u+c)-f+c,o==="middle"&&(h+=f-c-(f-c)/2),o==="top"&&(h+=f-c),J(d)||(i?e.fillText(d,s,h):e.strokeText(d,s,h))})},n.prototype._drawText=function(e,r){var i=this.attr(),a=i.x,o=i.y,s=this.get("textArr");if(s)this._drawTextArr(e,s,r);else{var l=i.text;J(l)||(r?e.fillText(l,a,o):e.strokeText(l,a,o))}},n.prototype.strokeAndFill=function(e){var r=this.attrs,i=r.lineWidth,a=r.opacity,o=r.strokeOpacity,s=r.fillOpacity;this.isStroke()&&i>0&&(!J(o)&&o!==1&&(e.globalAlpha=a),this.stroke(e)),this.isFill()&&(!J(s)&&s!==1?(e.globalAlpha=s,this.fill(e),e.globalAlpha=a):this.fill(e)),this.afterDrawPath(e)},n.prototype.fill=function(e){this._drawText(e,!0)},n.prototype.stroke=function(e){this._drawText(e,!1)},n}(Gi);function ent(t,n){if(n){var e=e0(n);return Da(e,t)}return t}function n3(t,n,e){var r=t.getTotalMatrix();if(r){var i=ent([n,e,1],r),a=i[0],o=i[1];return[a,o]}return[n,e]}function UC(t,n,e){if(t.isCanvas&&t.isCanvas())return!0;if(!fh(t)||t.cfg.isInView===!1)return!1;if(t.cfg.clipShape){var r=n3(t,n,e),i=r[0],a=r[1];if(t.isClipped(i,a))return!1}var o=t.cfg.cacheCanvasBBox||t.getCanvasBBox();return n>=o.minX&&n<=o.maxX&&e>=o.minY&&e<=o.maxY}function r3(t,n,e){if(!UC(t,n,e))return null;for(var r=null,i=t.getChildren(),a=i.length,o=a-1;o>=0;o--){var s=i[o];if(s.isGroup())r=r3(s,n,e);else if(UC(s,n,e)){var l=s,c=n3(s,n,e),u=c[0],f=c[1];l.isInShape(u,f)&&(r=s)}if(r)break}return r}var nnt=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.renderer="canvas",e.autoDraw=!0,e.localRefresh=!0,e.refreshElements=[],e.clipView=!0,e.quickHit=!1,e},n.prototype.onCanvasChange=function(e){(e==="attr"||e==="sort"||e==="changeSize")&&(this.set("refreshElements",[this]),this.draw())},n.prototype.getShapeBase=function(){return Xy},n.prototype.getGroupBase=function(){return tO},n.prototype.getPixelRatio=function(){var e=this.get("pixelRatio")||het();return e>=1?Math.ceil(e):1},n.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},n.prototype.createDom=function(){var e=document.createElement("canvas"),r=e.getContext("2d");return this.set("context",r),e},n.prototype.setDOMSize=function(e,r){t.prototype.setDOMSize.call(this,e,r);var i=this.get("context"),a=this.get("el"),o=this.getPixelRatio();a.width=o*e,a.height=o*r,o>1&&i.scale(o,o)},n.prototype.clear=function(){t.prototype.clear.call(this),this._clearFrame();var e=this.get("context"),r=this.get("el");e.clearRect(0,0,r.width,r.height)},n.prototype.getShape=function(e,r){var i;return this.get("quickHit")?i=r3(this,e,r):i=t.prototype.getShape.call(this,e,r,null),i},n.prototype._getRefreshRegion=function(){var e=this.get("refreshElements"),r=this.getViewRange(),i;if(e.length&&e[0]===this)i=r;else if(i=Eet(e),i){i.minX=Math.floor(i.minX),i.minY=Math.floor(i.minY),i.maxX=Math.ceil(i.maxX),i.maxY=Math.ceil(i.maxY),i.maxY+=1;var a=this.get("clipView");a&&(i=Tet(i,r))}return i},n.prototype.refreshElement=function(e){var r=this.get("refreshElements");r.push(e)},n.prototype._clearFrame=function(){var e=this.get("drawFrame");e&&(nX(e),this.set("drawFrame",null),this.set("refreshElements",[]))},n.prototype.draw=function(){var e=this.get("drawFrame");this.get("autoDraw")&&e||this._startDraw()},n.prototype._drawAll=function(){var e=this.get("context"),r=this.get("el"),i=this.getChildren();e.clearRect(0,0,r.width,r.height),Hc(e,this),Vb(e,i),this.set("refreshElements",[])},n.prototype._drawRegion=function(){var e=this.get("context"),r=this.get("refreshElements"),i=this.getChildren(),a=this._getRefreshRegion();a?(e.clearRect(a.minX,a.minY,a.maxX-a.minX,a.maxY-a.minY),e.save(),e.beginPath(),e.rect(a.minX,a.minY,a.maxX-a.minX,a.maxY-a.minY),e.clip(),Hc(e,this),Oet(this,i,a),Vb(e,i,a),e.restore()):r.length&&qB(r),$(r,function(o){o.get("hasChanged")&&o.set("hasChanged",!1)}),this.set("refreshElements",[])},n.prototype._startDraw=function(){var e=this,r=this.get("drawFrame");r||(r=eX(function(){e.get("localRefresh")?e._drawRegion():e._drawAll(),e.set("drawFrame",null)}),this.set("drawFrame",r))},n.prototype.skipDraw=function(){},n.prototype.removeDom=function(){var e=this.get("el");e.width=0,e.height=0,e.parentNode.removeChild(e)},n}(o0),rnt="0.5.12";const int=Object.freeze(Object.defineProperty({__proto__:null,AbstractCanvas:o0,AbstractGroup:s0,AbstractShape:l0,Base:t0,Canvas:nnt,Event:pd,Group:tO,PathUtil:sS,Shape:Xy,assembleFont:d0,getArcParams:Eg,getBBoxMethod:c0,getOffScreenContext:f0,getTextHeight:h0,invert:e0,isAllowCapture:fh,multiplyVec2:Da,registerBBox:yi,registerEasing:QR,version:rnt},Symbol.toStringTag,{value:"Module"}));var qb={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},Vt={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"};function di(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function i3(t){var n=qb[t.type],e=t.getParent();if(!n)throw new Error("the type "+t.type+" is not supported by svg");var r=di(n);if(t.get("id")&&(r.id=t.get("id")),t.set("el",r),t.set("attrs",{}),e){var i=e.get("el");i||(i=e.createDom(),e.set("el",i)),i.appendChild(r)}return r}function a3(t,n){var e=t.get("el"),r=lX(e.children).sort(n),i=document.createDocumentFragment();r.forEach(function(a){i.appendChild(a)}),e.appendChild(i)}function ant(t,n){var e=t.parentNode,r=Array.from(e.childNodes).filter(function(s){return s.nodeType===1&&s.nodeName.toLowerCase()!=="defs"}),i=r[n],a=r.indexOf(t);if(i){if(a>n)e.insertBefore(t,i);else if(a<n){var o=r[n+1];o?e.insertBefore(t,o):e.appendChild(t)}}else e.appendChild(t)}function ont(t,n){var e=t.cfg.el,r=t.attr(),i={dx:r.shadowOffsetX,dy:r.shadowOffsetY,blur:r.shadowBlur,color:r.shadowColor};if(!i.dx&&!i.dy&&!i.blur&&!i.color)e.removeAttribute("filter");else{var a=n.find("filter",i);a||(a=n.addShadow(i)),e.setAttribute("filter","url(#"+a+")")}}function Od(t){var n=t.attr().matrix;if(n){for(var e=t.cfg.el,r=[],i=0;i<9;i+=3)r.push(n[i]+","+n[i+1]);r=r.join(","),r.indexOf("NaN")===-1?e.setAttribute("transform","matrix("+r+")"):console.warn("invalid matrix:",n)}}function Eh(t,n){var e=t.getClip(),r=t.get("el");if(!e)r.removeAttribute("clip-path");else if(e&&!r.hasAttribute("clip-path")){i3(e),e.createPath(n);var i=n.addClip(e);r.setAttribute("clip-path","url(#"+i+")")}}function o3(t,n){n.forEach(function(e){e.draw(t)})}function s3(t,n){var e=t.get("canvas");if(e&&e.get("autoDraw")){var r=e.get("context"),i=t.getParent(),a=i?i.getChildren():[e],o=t.get("el");if(n==="remove"){var s=t.get("isClipShape");if(s){var l=o&&o.parentNode,c=l&&l.parentNode;l&&c&&c.removeChild(l)}else o&&o.parentNode&&o.parentNode.removeChild(o)}else if(n==="show")o.setAttribute("visibility","visible");else if(n==="hide")o.setAttribute("visibility","hidden");else if(n==="zIndex")ant(o,a.indexOf(t));else if(n==="sort"){var u=t.get("children");u&&u.length&&a3(t,function(f,h){return u.indexOf(f)-u.indexOf(h)?1:0})}else n==="clear"?o&&(o.innerHTML=""):n==="matrix"?Od(t):n==="clip"?Eh(t,r):n==="attr"||n==="add"&&t.draw(r)}}var nO=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.isEntityGroup=function(){return!0},n.prototype.createDom=function(){var e=di("g");this.set("el",e);var r=this.getParent();if(r){var i=r.get("el");i||(i=r.createDom(),r.set("el",i)),i.appendChild(e)}return e},n.prototype.afterAttrsChange=function(e){t.prototype.afterAttrsChange.call(this,e);var r=this.get("canvas");if(r&&r.get("autoDraw")){var i=r.get("context");this.createPath(i,e)}},n.prototype.onCanvasChange=function(e){s3(this,e)},n.prototype.getShapeBase=function(){return Uy},n.prototype.getGroupBase=function(){return n},n.prototype.draw=function(e){var r=this.getChildren(),i=this.get("el");this.get("destroyed")?i&&i.parentNode.removeChild(i):(i||this.createDom(),Eh(this,e),this.createPath(e),r.length&&o3(e,r))},n.prototype.createPath=function(e,r){var i=this.attr(),a=this.get("el");$(r||i,function(o,s){Vt[s]&&a.setAttribute(Vt[s],o)}),Od(this)},n}(s0),mi=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="svg",e.canFill=!1,e.canStroke=!1,e}return n.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return E(E({},e),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},n.prototype.afterAttrsChange=function(e){t.prototype.afterAttrsChange.call(this,e);var r=this.get("canvas");if(r&&r.get("autoDraw")){var i=r.get("context");this.draw(i,e)}},n.prototype.getShapeBase=function(){return Uy},n.prototype.getGroupBase=function(){return nO},n.prototype.onCanvasChange=function(e){s3(this,e)},n.prototype.calculateBBox=function(){var e=this.get("el"),r=null;if(e)r=e.getBBox();else{var i=c0(this.get("type"));i&&(r=i(this))}if(r){var a=r.x,o=r.y,s=r.width,l=r.height,c=this.getHitLineWidth(),u=c/2,f=a-u,h=o-u,d=a+s+u,p=o+l+u;return{x:f,y:h,minX:f,minY:h,maxX:d,maxY:p,width:s+c,height:l+c}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},n.prototype.isFill=function(){var e=this.attr(),r=e.fill,i=e.fillStyle;return(r||i||this.isClipShape())&&this.canFill},n.prototype.isStroke=function(){var e=this.attr(),r=e.stroke,i=e.strokeStyle;return(r||i)&&this.canStroke},n.prototype.draw=function(e,r){var i=this.get("el");this.get("destroyed")?i&&i.parentNode.removeChild(i):(i||i3(this),Eh(this,e),this.createPath(e,r),this.shadow(e,r),this.strokeAndFill(e,r),this.transform(r))},n.prototype.createPath=function(e,r){},n.prototype.strokeAndFill=function(e,r){var i=r||this.attr(),a=i.fill,o=i.fillStyle,s=i.stroke,l=i.strokeStyle,c=i.fillOpacity,u=i.strokeOpacity,f=i.lineWidth,h=this.get("el");this.canFill&&(r?"fill"in i?this._setColor(e,"fill",a):"fillStyle"in i&&this._setColor(e,"fill",o):this._setColor(e,"fill",a||o),c&&h.setAttribute(Vt.fillOpacity,c)),this.canStroke&&f>0&&(r?"stroke"in i?this._setColor(e,"stroke",s):"strokeStyle"in i&&this._setColor(e,"stroke",l):this._setColor(e,"stroke",s||l),u&&h.setAttribute(Vt.strokeOpacity,u),f&&h.setAttribute(Vt.lineWidth,f))},n.prototype._setColor=function(e,r,i){var a=this.get("el");if(!i){a.setAttribute(Vt[r],"none");return}if(i=i.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(i)){var o=e.find("gradient",i);o||(o=e.addGradient(i)),a.setAttribute(Vt[r],"url(#"+o+")")}else if(/^[p,P]{1}[\s]*\(/.test(i)){var o=e.find("pattern",i);o||(o=e.addPattern(i)),a.setAttribute(Vt[r],"url(#"+o+")")}else a.setAttribute(Vt[r],i)},n.prototype.shadow=function(e,r){var i=this.attr(),a=r||i,o=a.shadowOffsetX,s=a.shadowOffsetY,l=a.shadowBlur,c=a.shadowColor;(o||s||l||c)&&ont(this,e)},n.prototype.transform=function(e){var r=this.attr(),i=(e||r).matrix;i&&Od(this)},n.prototype.isInShape=function(e,r){return this.isPointInPath(e,r)},n.prototype.isPointInPath=function(e,r){var i=this.get("el"),a=this.get("canvas"),o=a.get("el").getBoundingClientRect(),s=e+o.left,l=r+o.top,c=document.elementFromPoint(s,l);return!!(c&&c.isEqualNode(i))},n.prototype.getHitLineWidth=function(){var e=this.attrs,r=e.lineWidth,i=e.lineAppendWidth;return this.isStroke()?r+i:0},n}(l0),snt=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="circle",e.canFill=!0,e.canStroke=!0,e}return n.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return E(E({},e),{x:0,y:0,r:0})},n.prototype.createPath=function(e,r){var i=this.attr(),a=this.get("el");$(r||i,function(o,s){s==="x"||s==="y"?a.setAttribute("c"+s,o):Vt[s]&&a.setAttribute(Vt[s],o)})},n}(mi),lnt=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="dom",e.canFill=!1,e.canStroke=!1,e}return n.prototype.createPath=function(e,r){var i=this.attr(),a=this.get("el");if($(r||i,function(c,u){Vt[u]&&a.setAttribute(Vt[u],c)}),typeof i.html=="function"){var o=i.html.call(this,i);if(o instanceof Element||o instanceof HTMLDocument){for(var s=a.childNodes,l=s.length-1;l>=0;l--)a.removeChild(s[l]);a.appendChild(o)}else a.innerHTML=o}else a.innerHTML=i.html},n}(mi),cnt=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="ellipse",e.canFill=!0,e.canStroke=!0,e}return n.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return E(E({},e),{x:0,y:0,rx:0,ry:0})},n.prototype.createPath=function(e,r){var i=this.attr(),a=this.get("el");$(r||i,function(o,s){s==="x"||s==="y"?a.setAttribute("c"+s,o):Vt[s]&&a.setAttribute(Vt[s],o)})},n}(mi),unt=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="image",e.canFill=!1,e.canStroke=!1,e}return n.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return E(E({},e),{x:0,y:0,width:0,height:0})},n.prototype.createPath=function(e,r){var i=this,a=this.attr(),o=this.get("el");$(r||a,function(s,l){l==="img"?i._setImage(a.img):Vt[l]&&o.setAttribute(Vt[l],s)})},n.prototype.setAttr=function(e,r){this.attrs[e]=r,e==="img"&&this._setImage(r)},n.prototype._setImage=function(e){var r=this.attr(),i=this.get("el");if(pt(e))i.setAttribute("href",e);else if(e instanceof window.Image)r.width||(i.setAttribute("width",e.width),this.attr("width",e.width)),r.height||(i.setAttribute("height",e.height),this.attr("height",e.height)),i.setAttribute("href",e.src);else if(e instanceof HTMLElement&&pt(e.nodeName)&&e.nodeName.toUpperCase()==="CANVAS")i.setAttribute("href",e.toDataURL());else if(e instanceof ImageData){var a=document.createElement("canvas");a.setAttribute("width",""+e.width),a.setAttribute("height",""+e.height),a.getContext("2d").putImageData(e,0,0),r.width||(i.setAttribute("width",""+e.width),this.attr("width",e.width)),r.height||(i.setAttribute("height",""+e.height),this.attr("height",e.height)),i.setAttribute("href",a.toDataURL())}},n}(mi),fnt=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="line",e.canFill=!1,e.canStroke=!0,e}return n.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return E(E({},e),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},n.prototype.createPath=function(e,r){var i=this.attr(),a=this.get("el");$(r||i,function(o,s){if(s==="startArrow"||s==="endArrow")if(o){var l=Qt(o)?e.addArrow(i,Vt[s]):e.getDefaultArrow(i,Vt[s]);a.setAttribute(Vt[s],"url(#"+l+")")}else a.removeAttribute(Vt[s]);else Vt[s]&&a.setAttribute(Vt[s],o)})},n.prototype.getTotalLength=function(){var e=this.attr(),r=e.x1,i=e.y1,a=e.x2,o=e.y2;return Pn.length(r,i,a,o)},n.prototype.getPoint=function(e){var r=this.attr(),i=r.x1,a=r.y1,o=r.x2,s=r.y2;return Pn.pointAt(i,a,o,s,e)},n}(mi),Ep={circle:function(t,n,e){return[["M",t,n],["m",-e,0],["a",e,e,0,1,0,e*2,0],["a",e,e,0,1,0,-e*2,0]]},square:function(t,n,e){return[["M",t-e,n-e],["L",t+e,n-e],["L",t+e,n+e],["L",t-e,n+e],["Z"]]},diamond:function(t,n,e){return[["M",t-e,n],["L",t,n-e],["L",t+e,n],["L",t,n+e],["Z"]]},triangle:function(t,n,e){var r=e*Math.sin(.3333333333333333*Math.PI);return[["M",t-e,n+r],["L",t,n-r],["L",t+e,n+r],["z"]]},triangleDown:function(t,n,e){var r=e*Math.sin(.3333333333333333*Math.PI);return[["M",t-e,n-r],["L",t+e,n-r],["L",t,n+r],["Z"]]}};const qC={get:function(t){return Ep[t]},register:function(t,n){Ep[t]=n},remove:function(t){delete Ep[t]},getAll:function(){return Ep}};var hnt=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="marker",e.canFill=!0,e.canStroke=!0,e}return n.prototype.createPath=function(e){var r=this.get("el");r.setAttribute("d",this._assembleMarker())},n.prototype._assembleMarker=function(){var e=this._getPath();return et(e)?e.map(function(r){return r.join(" ")}).join(""):e},n.prototype._getPath=function(){var e=this.attr(),r=e.x,i=e.y,a=e.r||e.radius,o=e.symbol||"circle",s;return ut(o)?s=o:s=qC.get(o),s?s(r,i,a):(console.warn(s+" symbol is not exist."),null)},n.symbolsFactory=qC,n}(mi),dnt=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="path",e.canFill=!0,e.canStroke=!0,e}return n.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return E(E({},e),{startArrow:!1,endArrow:!1})},n.prototype.createPath=function(e,r){var i=this,a=this.attr(),o=this.get("el");$(r||a,function(s,l){if(l==="path"&&et(s))o.setAttribute("d",i._formatPath(s));else if(l==="startArrow"||l==="endArrow")if(s){var c=Qt(s)?e.addArrow(a,Vt[l]):e.getDefaultArrow(a,Vt[l]);o.setAttribute(Vt[l],"url(#"+c+")")}else o.removeAttribute(Vt[l]);else Vt[l]&&o.setAttribute(Vt[l],s)})},n.prototype._formatPath=function(e){var r=e.map(function(i){return i.join(" ")}).join("");return~r.indexOf("NaN")?"":r},n.prototype.getTotalLength=function(){var e=this.get("el");return e?e.getTotalLength():null},n.prototype.getPoint=function(e){var r=this.get("el"),i=this.getTotalLength();if(i===0)return null;var a=r?r.getPointAtLength(e*i):null;return a?{x:a.x,y:a.y}:null},n}(mi),pnt=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="polygon",e.canFill=!0,e.canStroke=!0,e}return n.prototype.createPath=function(e,r){var i=this.attr(),a=this.get("el");$(r||i,function(o,s){s==="points"&&et(o)&&o.length>=2?a.setAttribute("points",o.map(function(l){return l[0]+","+l[1]}).join(" ")):Vt[s]&&a.setAttribute(Vt[s],o)})},n}(mi),vnt=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="polyline",e.canFill=!0,e.canStroke=!0,e}return n.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return E(E({},e),{startArrow:!1,endArrow:!1})},n.prototype.onAttrChange=function(e,r,i){t.prototype.onAttrChange.call(this,e,r,i),["points"].indexOf(e)!==-1&&this._resetCache()},n.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},n.prototype.createPath=function(e,r){var i=this.attr(),a=this.get("el");$(r||i,function(o,s){s==="points"&&et(o)&&o.length>=2?a.setAttribute("points",o.map(function(l){return l[0]+","+l[1]}).join(" ")):Vt[s]&&a.setAttribute(Vt[s],o)})},n.prototype.getTotalLength=function(){var e=this.attr().points,r=this.get("totalLength");return J(r)?(this.set("totalLength",s5.length(e)),this.get("totalLength")):r},n.prototype.getPoint=function(e){var r=this.attr().points,i=this.get("tCache");i||(this._setTcache(),i=this.get("tCache"));var a,o;return $(i,function(s,l){e>=s[0]&&e<=s[1]&&(a=(e-s[0])/(s[1]-s[0]),o=l)}),Pn.pointAt(r[o][0],r[o][1],r[o+1][0],r[o+1][1],a)},n.prototype._setTcache=function(){var e=this.attr().points;if(!(!e||e.length===0)){var r=this.getTotalLength();if(!(r<=0)){var i=0,a=[],o,s;$(e,function(l,c){e[c+1]&&(o=[],o[0]=i/r,s=Pn.length(l[0],l[1],e[c+1][0],e[c+1][1]),i+=s,o[1]=i/r,a.push(o))}),this.set("tCache",a)}}},n.prototype.getStartTangent=function(){var e=this.attr().points,r=[];return r.push([e[1][0],e[1][1]]),r.push([e[0][0],e[0][1]]),r},n.prototype.getEndTangent=function(){var e=this.attr().points,r=e.length-1,i=[];return i.push([e[r-1][0],e[r-1][1]]),i.push([e[r][0],e[r][1]]),i},n}(mi);function gnt(t){var n=0,e=0,r=0,i=0;return et(t)?t.length===1?n=e=r=i=t[0]:t.length===2?(n=r=t[0],e=i=t[1]):t.length===3?(n=t[0],e=i=t[1],r=t[2]):(n=t[0],e=t[1],r=t[2],i=t[3]):n=e=r=i=t,{r1:n,r2:e,r3:r,r4:i}}var ynt=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="rect",e.canFill=!0,e.canStroke=!0,e}return n.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return E(E({},e),{x:0,y:0,width:0,height:0,radius:0})},n.prototype.createPath=function(e,r){var i=this,a=this.attr(),o=this.get("el"),s=!1,l=["x","y","width","height","radius"];$(r||a,function(c,u){l.indexOf(u)!==-1&&!s?(o.setAttribute("d",i._assembleRect(a)),s=!0):l.indexOf(u)===-1&&Vt[u]&&o.setAttribute(Vt[u],c)})},n.prototype._assembleRect=function(e){var r=e.x,i=e.y,a=e.width,o=e.height,s=e.radius;if(!s)return"M "+r+","+i+" l "+a+",0 l 0,"+o+" l"+-a+" 0 z";var l=gnt(s);et(s)?s.length===1?l.r1=l.r2=l.r3=l.r4=s[0]:s.length===2?(l.r1=l.r3=s[0],l.r2=l.r4=s[1]):s.length===3?(l.r1=s[0],l.r2=l.r4=s[1],l.r3=s[2]):(l.r1=s[0],l.r2=s[1],l.r3=s[2],l.r4=s[3]):l.r1=l.r2=l.r3=l.r4=s;var c=[["M "+(r+l.r1)+","+i],["l "+(a-l.r1-l.r2)+",0"],["a "+l.r2+","+l.r2+",0,0,1,"+l.r2+","+l.r2],["l 0,"+(o-l.r2-l.r3)],["a "+l.r3+","+l.r3+",0,0,1,"+-l.r3+","+l.r3],["l "+(l.r3+l.r4-a)+",0"],["a "+l.r4+","+l.r4+",0,0,1,"+-l.r4+","+-l.r4],["l 0,"+(l.r4+l.r1-o)],["a "+l.r1+","+l.r1+",0,0,1,"+l.r1+","+-l.r1],["z"]];return c.join(" ")},n}(mi),ZC=.3,mnt={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},xnt={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},bnt={left:"left",start:"left",center:"middle",right:"end",end:"end"},wnt=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="text",e.canFill=!0,e.canStroke=!0,e}return n.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return E(E({},e),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},n.prototype.createPath=function(e,r){var i=this,a=this.attr(),o=this.get("el");this._setFont(),$(r||a,function(s,l){l==="text"?i._setText(""+s):l==="matrix"&&s?Od(i):Vt[l]&&o.setAttribute(Vt[l],s)}),o.setAttribute("paint-order","stroke"),o.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},n.prototype._setFont=function(){var e=this.get("el"),r=this.attr(),i=r.textBaseline,a=r.textAlign,o=hR();o&&o.name==="firefox"?e.setAttribute("dominant-baseline",xnt[i]||"alphabetic"):e.setAttribute("alignment-baseline",mnt[i]||"baseline"),e.setAttribute("text-anchor",bnt[a]||"left")},n.prototype._setText=function(e){var r=this.get("el"),i=this.attr(),a=i.x,o=i.textBaseline,s=o===void 0?"bottom":o;if(!e)r.innerHTML="";else if(~e.indexOf(`
`)){var l=e.split(`
`),c=l.length-1,u="";$(l,function(f,h){h===0?s==="alphabetic"?u+='<tspan x="'+a+'" dy="'+-c+'em">'+f+"</tspan>":s==="top"?u+='<tspan x="'+a+'" dy="0.9em">'+f+"</tspan>":s==="middle"?u+='<tspan x="'+a+'" dy="'+-(c-1)/2+'em">'+f+"</tspan>":s==="bottom"?u+='<tspan x="'+a+'" dy="-'+(c+ZC)+'em">'+f+"</tspan>":s==="hanging"&&(u+='<tspan x="'+a+'" dy="'+(-(c-1)-ZC)+'em">'+f+"</tspan>"):u+='<tspan x="'+a+'" dy="1em">'+f+"</tspan>"}),r.innerHTML=u}else r.innerHTML=e},n}(mi),Snt=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,Ont=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,Mnt=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function l3(t){var n=t.match(Mnt);if(!n)return"";var e="";return n.sort(function(r,i){return r=r.split(":"),i=i.split(":"),Number(r[0])-Number(i[0])}),$(n,function(r){r=r.split(":"),e+='<stop offset="'+r[0]+'" stop-color="'+r[1]+'"></stop>'}),e}function Ant(t,n){var e=Snt.exec(t),r=Zy(Ky(parseFloat(e[1])),Math.PI*2),i=e[2],a,o;r>=0&&r<.5*Math.PI?(a={x:0,y:0},o={x:1,y:1}):.5*Math.PI<=r&&r<Math.PI?(a={x:1,y:0},o={x:0,y:1}):Math.PI<=r&&r<1.5*Math.PI?(a={x:1,y:1},o={x:0,y:0}):(a={x:0,y:1},o={x:1,y:0});var s=Math.tan(r),l=s*s,c=(o.x-a.x+s*(o.y-a.y))/(l+1)+a.x,u=s*(o.x-a.x+s*(o.y-a.y))/(l+1)+a.y;n.setAttribute("x1",a.x),n.setAttribute("y1",a.y),n.setAttribute("x2",c),n.setAttribute("y2",u),n.innerHTML=l3(i)}function Ent(t,n){var e=Ont.exec(t),r=parseFloat(e[1]),i=parseFloat(e[2]),a=parseFloat(e[3]),o=e[4];n.setAttribute("cx",r),n.setAttribute("cy",i),n.setAttribute("r",a),n.innerHTML=l3(o)}var Tnt=function(){function t(n){this.cfg={};var e=null,r=os("gradient_");return n.toLowerCase()[0]==="l"?(e=di("linearGradient"),Ant(n,e)):(e=di("radialGradient"),Ent(n,e)),e.setAttribute("id",r),this.el=e,this.id=r,this.cfg=n,this}return t.prototype.match=function(n,e){return this.cfg===e},t}(),Cnt={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},Pnt={x:"-40%",y:"-40%",width:"200%",height:"200%"},knt=function(){function t(n){this.type="filter",this.cfg={},this.type="filter";var e=di("filter");return $(Pnt,function(r,i){e.setAttribute(i,r)}),this.el=e,this.id=os("filter_"),this.el.id=this.id,this.cfg=n,this._parseShadow(n,e),this}return t.prototype.match=function(n,e){if(this.type!==n)return!1;var r=!0,i=this.cfg;return $(Object.keys(i),function(a){if(i[a]!==e[a])return r=!1,!1}),r},t.prototype.update=function(n,e){var r=this.cfg;return r[Cnt[n]]=e,this._parseShadow(r,this.el),this},t.prototype._parseShadow=function(n,e){var r=`<feDropShadow
      dx="`+(n.dx||0)+`"
      dy="`+(n.dy||0)+`"
      stdDeviation="`+(n.blur?n.blur/10:0)+`"
      flood-color="`+(n.color?n.color:"#000")+`"
      flood-opacity="`+(n.opacity?n.opacity:1)+`"
      />`;e.innerHTML=r},t}(),KC=function(){function t(n,e){this.cfg={};var r=di("marker"),i=os("marker_");r.setAttribute("id",i);var a=di("path");a.setAttribute("stroke",n.stroke||"none"),a.setAttribute("fill",n.fill||"none"),r.appendChild(a),r.setAttribute("overflow","visible"),r.setAttribute("orient","auto-start-reverse"),this.el=r,this.child=a,this.id=i;var o=n[e==="marker-start"?"startArrow":"endArrow"];return this.stroke=n.stroke||"#000",o===!0?this._setDefaultPath(e,a):(this.cfg=o,this._setMarker(n.lineWidth,a)),this}return t.prototype.match=function(){return!1},t.prototype._setDefaultPath=function(n,e){var r=this.el;e.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),r.setAttribute("refX",""+10*Math.cos(Math.PI/6)),r.setAttribute("refY","5")},t.prototype._setMarker=function(n,e){var r=this.el,i=this.cfg.path,a=this.cfg.d;et(i)&&(i=i.map(function(o){return o.join(" ")}).join("")),e.setAttribute("d",i),r.appendChild(e),a&&r.setAttribute("refX",""+a/n)},t.prototype.update=function(n){var e=this.child;e.attr?e.attr("fill",n):e.setAttribute("fill",n)},t}(),_nt=function(){function t(n){this.type="clip",this.cfg={};var e=di("clipPath");this.el=e,this.id=os("clip_"),e.id=this.id;var r=n.cfg.el;return e.appendChild(r),this.cfg=n,this}return t.prototype.match=function(){return!1},t.prototype.remove=function(){var n=this.el;n.parentNode.removeChild(n)},t}(),Lnt=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,Int=function(){function t(n){this.cfg={};var e=di("pattern");e.setAttribute("patternUnits","userSpaceOnUse");var r=di("image");e.appendChild(r);var i=os("pattern_");e.id=i,this.el=e,this.id=i,this.cfg=n;var a=Lnt.exec(n),o=a[2];r.setAttribute("href",o);var s=new Image;o.match(/^data:/i)||(s.crossOrigin="Anonymous"),s.src=o;function l(){e.setAttribute("width",""+s.width),e.setAttribute("height",""+s.height)}return s.complete?l():(s.onload=l,s.src=s.src),this}return t.prototype.match=function(n,e){return this.cfg===e},t}(),Fnt=function(){function t(n){var e=di("defs"),r=os("defs_");e.id=r,n.appendChild(e),this.children=[],this.defaultArrow={},this.el=e,this.canvas=n}return t.prototype.find=function(n,e){for(var r=this.children,i=null,a=0;a<r.length;a++)if(r[a].match(n,e)){i=r[a].id;break}return i},t.prototype.findById=function(n){for(var e=this.children,r=null,i=0;i<e.length;i++)if(e[i].id===n){r=e[i];break}return r},t.prototype.add=function(n){this.children.push(n),n.canvas=this.canvas,n.parent=this},t.prototype.getDefaultArrow=function(n,e){var r=n.stroke||n.strokeStyle;if(this.defaultArrow[r])return this.defaultArrow[r].id;var i=new KC(n,e);return this.defaultArrow[r]=i,this.el.appendChild(i.el),this.add(i),i.id},t.prototype.addGradient=function(n){var e=new Tnt(n);return this.el.appendChild(e.el),this.add(e),e.id},t.prototype.addArrow=function(n,e){var r=new KC(n,e);return this.el.appendChild(r.el),this.add(r),r.id},t.prototype.addShadow=function(n){var e=new knt(n);return this.el.appendChild(e.el),this.add(e),e.id},t.prototype.addPattern=function(n){var e=new Int(n);return this.el.appendChild(e.el),this.add(e),e.id},t.prototype.addClip=function(n){var e=new _nt(n);return this.el.appendChild(e.el),this.add(e),e.id},t}(),Dnt=function(t){G(n,t);function n(e){return t.call(this,E(E({},e),{autoDraw:!0,renderer:"svg"}))||this}return n.prototype.getShapeBase=function(){return Uy},n.prototype.getGroupBase=function(){return nO},n.prototype.getShape=function(e,r,i){var a=i.target||i.srcElement;if(!qb[a.tagName]){for(var o=a.parentNode;o&&!qb[o.tagName];)o=o.parentNode;a=o}return this.find(function(s){return s.get("el")===a})},n.prototype.createDom=function(){var e=di("svg"),r=new Fnt(e);return e.setAttribute("width",""+this.get("width")),e.setAttribute("height",""+this.get("height")),this.set("context",r),e},n.prototype.onCanvasChange=function(e){var r=this.get("context"),i=this.get("el");if(e==="sort"){var a=this.get("children");a&&a.length&&a3(this,function(s,l){return a.indexOf(s)-a.indexOf(l)?1:0})}else if(e==="clear"){if(i){i.innerHTML="";var o=r.el;o.innerHTML="",i.appendChild(o)}}else e==="matrix"?Od(this):e==="clip"?Eh(this,r):e==="changeSize"&&(i.setAttribute("width",""+this.get("width")),i.setAttribute("height",""+this.get("height")))},n.prototype.draw=function(){var e=this.get("context"),r=this.getChildren();Eh(this,e),r.length&&o3(e,r)},n}(o0),Rnt="0.5.6";const Bnt=Object.freeze(Object.defineProperty({__proto__:null,AbstractCanvas:o0,AbstractGroup:s0,AbstractShape:l0,Base:t0,Canvas:Dnt,Event:pd,Group:nO,PathUtil:sS,Shape:Uy,assembleFont:d0,getBBoxMethod:c0,getOffScreenContext:f0,getTextHeight:h0,invert:e0,isAllowCapture:fh,multiplyVec2:Da,registerBBox:yi,registerEasing:QR,version:Rnt},Symbol.toStringTag,{value:"Module"}));var rO=function(t){G(n,t);function n(e){var r=t.call(this,e)||this;r.type="path",r.shapeType="line";var i=e.connectNulls,a=i===void 0?!1:i,o=e.showSinglePoint,s=o===void 0?!0:o;return r.connectNulls=a,r.showSinglePoint=s,r}return n.prototype.updateElements=function(e,r){var i,a,o,s,l,c;r===void 0&&(r=!1);for(var u=new Map,f=new Map,h=[],d=0,p=0;p<e.length;p++){var v=e[p],g=this.getElementId(v);h.push(g),u.set(g,v),f.set(g,d),d++}this.elements=new Array(d);var y=FB(this.lastElementsMap,h),m=y.added,x=y.updated,b=y.removed;try{for(var w=Ct(m),S=w.next();!S.done;S=w.next()){var g=S.value,v=u.get(g),O=this.getShapeFactory(),M=this.getShapeInfo(v),p=f.get(g),A=new kB({shapeFactory:O,container:this.container,offscreenGroup:this.getOffscreenGroup(),elementIndex:p});A.geometry=this,A.animate=this.animateOption,A.draw(M,r),this.elementsMap[g]=A,this.elements[p]=A}}catch(I){i={error:I}}finally{try{S&&!S.done&&(a=w.return)&&a.call(w)}finally{if(i)throw i.error}}try{for(var T=Ct(x),C=T.next();!C.done;C=T.next()){var g=C.value,v=u.get(g),A=this.lastElementsMap[g],p=f.get(g),M=this.getShapeInfo(v),P=A.getModel();(this.isCoordinateChanged||IB(P,M))&&(A.animate=this.animateOption,A.update(M)),this.elementsMap[g]=A,this.elements[p]=A}}catch(I){o={error:I}}finally{try{C&&!C.done&&(s=T.return)&&s.call(T)}finally{if(o)throw o.error}}try{for(var _=Ct(b),k=_.next();!k.done;k=_.next()){var g=k.value,A=this.lastElementsMap[g];A.animate=this.animateOption,A.destroy()}}catch(I){l={error:I}}finally{try{k&&!k.done&&(c=_.return)&&c.call(_)}finally{if(l)throw l.error}}},n.prototype.getPointsAndData=function(e){for(var r=[],i=[],a=0,o=e.length;a<o;a++){var s=e[a];r.push({x:s.x,y:s.y}),i.push(s[ae])}return{points:r,data:i}},n.prototype.getShapeInfo=function(e){var r=this.getDrawCfg(e[0]),i=this.getPointsAndData(e),a=i.points,o=i.data;return r.mappingData=e,r.data=o,r.isStack=!!this.getAdjust("stack"),r.points=a,r.connectNulls=this.connectNulls,r.showSinglePoint=this.showSinglePoint,r},n}(ls);function Nnt(t,n,e,r,i){var a=[];if(t.length){for(var o=[],s=[],l=0,c=t.length;l<c;l++){var u=t[l];o.push(u[1]),s.push(u[0])}s=s.reverse(),$([o,s],function(f,h){var d=[],p=r.parsePoints(f),v=p[0];o.length===1&&s.length===1?d=h===0?[["M",v.x-.5,v.y],["L",v.x+.5,v.y]]:[["L",v.x+.5,v.y],["L",v.x-.5,v.y]]:(n&&p.push({x:v.x,y:v.y}),e?d=Mg(p,!1,i):d=bd(p,!1),h>0&&(d[0][0]="L")),a=a.concat(d)}),a.push(["Z"])}return a}function F0(t,n,e,r,i){for(var a=Ke(t,n,!n,"lineWidth"),o=t.connectNulls,s=t.isInCircle,l=t.points,c=t.showSinglePoint,u=I0(l,o,c),f=[],h=0,d=u.length;h<d;h++){var p=u[h];f=f.concat(Nnt(p,s,e,r,i))}return a.path=f,a}function c3(t){var n=t.start,e=t.end;return[[n.x,e.y],[e.x,n.y]]}ss("area",{defaultShapeType:"area",getDefaultPoints:function(t){var n=t.x,e=t.y0,r=et(t.y)?t.y:[e,t.y];return r.map(function(i){return{x:n,y:i}})}});Xt("area","area",{draw:function(t,n){var e=F0(t,!1,!1,this),r=n.addShape({type:"path",attrs:e,name:"area"});return r},getMarker:function(t){var n=t.color;return{symbol:function(e,r,i){return i===void 0&&(i=5.5),[["M",e-i,r-4],["L",e+i,r-4],["L",e+i,r+4],["L",e-i,r+4],["Z"]]},style:{r:5,fill:n,fillOpacity:1}}}});var $nt=function(t){G(n,t);function n(e){var r=t.call(this,e)||this;r.type="area",r.shapeType="area",r.generatePoints=!0,r.startOnZero=!0;var i=e.startOnZero,a=i===void 0?!0:i,o=e.sortable,s=o===void 0?!1:o,l=e.showSinglePoint,c=l===void 0?!1:l;return r.startOnZero=a,r.sortable=s,r.showSinglePoint=c,r}return n.prototype.getPointsAndData=function(e){for(var r=[],i=[],a=0,o=e.length;a<o;a++){var s=e[a];r.push(s.points),i.push(s[ae])}return{points:r,data:i}},n.prototype.getYMinValue=function(){if(this.startOnZero)return t.prototype.getYMinValue.call(this);var e=this.getYScale();return e.min},n}(rO);ss("edge",{defaultShapeType:"line",getDefaultPoints:function(t){return qS(t)}});Xt("edge","line",{draw:function(t,n){var e=Ke(t,!0,!1,"lineWidth"),r=bd(this.parsePoints(t.points),this.coordinate.isPolar);return n.addShape("path",{attrs:E(E({},e),{path:r})})},getMarker:function(t){return{symbol:"circle",style:{r:4.5,fill:t.color}}}});var jnt=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="edge",e.shapeType="edge",e.generatePoints=!0,e}return n}(ls),znt=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="heatmap",e.paletteCache={},e}return n.prototype.updateElements=function(e,r){for(var i=0;i<e.length;i++){var a=e[i],o=this.prepareRange(a),s=this.prepareSize(),l=z(this.styleOption,["cfg","shadowBlur"]);bt(l)||(l=s/2),this.prepareGreyScaleBlurredCircle(s,l),this.drawWithRange(a,o,s,l)}},n.prototype.color=function(e,r){return this.createAttrOption("color",e,typeof r!="function"?r:""),this},n.prototype.clear=function(){t.prototype.clear.call(this),this.clearShadowCanvasCtx(),this.paletteCache={}},n.prototype.prepareRange=function(e){var r=this.getAttribute("color"),i=r.getFields()[0],a=1/0,o=-1/0;return e.forEach(function(s){var l=s[ae][i];l>o&&(o=l),l<a&&(a=l)}),a===o&&(a=o-1),[a,o]},n.prototype.prepareSize=function(){var e=this.getDefaultValue("size");return bt(e)||(e=this.getDefaultSize()),e},n.prototype.prepareGreyScaleBlurredCircle=function(e,r){var i=this.getGrayScaleBlurredCanvas(),a=e+r,o=i.getContext("2d");i.width=i.height=a*2,o.clearRect(0,0,i.width,i.height),o.shadowOffsetX=o.shadowOffsetY=a*2,o.shadowBlur=r,o.shadowColor="black",o.beginPath(),o.arc(-a,-a,e,0,Math.PI*2,!0),o.closePath(),o.fill()},n.prototype.drawWithRange=function(e,r,i,a){var o,s,l=this.coordinate,c=l.start,u=l.end,f=this.coordinate.getWidth(),h=this.coordinate.getHeight(),d=this.getAttribute("color"),p=d.getFields()[0];this.clearShadowCanvasCtx();var v=this.getShadowCanvasCtx();r&&(e=e.filter(function(T){return T[ae][p]<=r[1]&&T[ae][p]>=r[0]}));var g=this.scales[p];try{for(var y=Ct(e),m=y.next();!m.done;m=y.next()){var x=m.value,b=this.getDrawCfg(x),w=b.x,S=b.y,O=g.scale(x[ae][p]);this.drawGrayScaleBlurredCircle(w-c.x,S-u.y,i+a,O,v)}}catch(T){o={error:T}}finally{try{m&&!m.done&&(s=y.return)&&s.call(y)}finally{if(o)throw o.error}}var M=v.getImageData(0,0,f,h);this.clearShadowCanvasCtx(),this.colorize(M),v.putImageData(M,0,0);var A=this.getImageShape();A.attr("x",c.x),A.attr("y",u.y),A.attr("width",f),A.attr("height",h),A.attr("img",v.canvas),A.set("origin",this.getShapeInfo(e))},n.prototype.getDefaultSize=function(){var e=this.getAttribute("position"),r=this.coordinate;return Math.min(r.getWidth()/(e.scales[0].ticks.length*4),r.getHeight()/(e.scales[1].ticks.length*4))},n.prototype.clearShadowCanvasCtx=function(){var e=this.getShadowCanvasCtx();e.clearRect(0,0,e.canvas.width,e.canvas.height)},n.prototype.getShadowCanvasCtx=function(){var e=this.shadowCanvas;return e||(e=document.createElement("canvas"),this.shadowCanvas=e),e.width=this.coordinate.getWidth(),e.height=this.coordinate.getHeight(),e.getContext("2d")},n.prototype.getGrayScaleBlurredCanvas=function(){return this.grayScaleBlurredCanvas||(this.grayScaleBlurredCanvas=document.createElement("canvas")),this.grayScaleBlurredCanvas},n.prototype.drawGrayScaleBlurredCircle=function(e,r,i,a,o){var s=this.getGrayScaleBlurredCanvas();o.globalAlpha=a,o.drawImage(s,e-i,r-i)},n.prototype.colorize=function(e){for(var r=this.getAttribute("color"),i=e.data,a=this.paletteCache,o=3;o<i.length;o+=4){var s=i[o];if(bt(s)){var l=a[s]?a[s]:No.rgb2arr(r.gradient(s/256));i[o-3]=l[0],i[o-2]=l[1],i[o-1]=l[2],i[o]=s}}},n.prototype.getImageShape=function(){var e=this.imageShape;if(e)return e;var r=this.container;return e=r.addShape({type:"image",attrs:{}}),this.imageShape=e,e},n.prototype.getShapeInfo=function(e){var r=this.getDrawCfg(e[0]),i=e.map(function(a){return a[ae]});return E(E({},r),{mappingData:e,data:i})},n}(ls);function iO(t){var n,e,r=t.x,i=t.y,a=t.y0,o=t.size,s,l;et(i)?(n=R(i,2),s=n[0],l=n[1]):(s=a,l=i);var c,u;et(r)?(e=R(r,2),c=e[0],u=e[1]):(c=r-o/2,u=r+o/2);var f=[{x:c,y:s},{x:c,y:l}];return f.push({x:u,y:l},{x:u,y:s}),f}function aO(t,n){n===void 0&&(n=!0);var e=[],r=t[0];e.push(["M",r.x,r.y]);for(var i=1,a=t.length;i<a;i++)e.push(["L",t[i].x,t[i].y]);return n&&(e.push(["L",r.x,r.y]),e.push(["z"])),e}function u3(t,n){var e=0,r=0,i=0,a=0;return et(t)?t.length===1?e=r=i=a=t[0]:t.length===2?(e=i=t[0],r=a=t[1]):t.length===3?(e=t[0],r=a=t[1],i=t[2]):(e=t[0],r=t[1],i=t[2],a=t[3]):e=r=i=a=t,e+r>n&&(e=e?n/(1+r/e):0,r=n-e),i+a>n&&(i=i?n/(1+a/i):0,a=n-i),[e||0,r||0,i||0,a||0]}function f3(t,n,e){var r=[];if(e.isRect){var i=e.isTransposed?{x:e.start.x,y:n[0].y}:{x:n[0].x,y:e.start.y},a=e.isTransposed?{x:e.end.x,y:n[2].y}:{x:n[3].x,y:e.end.y},o=z(t,["background","style","radius"]);if(o){var s=e.isTransposed?Math.abs(n[0].y-n[2].y):n[2].x-n[1].x,l=e.isTransposed?e.getWidth():e.getHeight(),c=R(u3(o,Math.min(s,l)),4),u=c[0],f=c[1],h=c[2],d=c[3],p=e.isTransposed&&e.isReflect("y"),v=p?0:1,g=function(S){return p?-S:S};r.push(["M",i.x,a.y+g(u)]),u!==0&&r.push(["A",u,u,0,0,v,i.x+u,a.y]),r.push(["L",a.x-f,a.y]),f!==0&&r.push(["A",f,f,0,0,v,a.x,a.y+g(f)]),r.push(["L",a.x,i.y-g(h)]),h!==0&&r.push(["A",h,h,0,0,v,a.x-h,i.y]),r.push(["L",i.x+d,i.y]),d!==0&&r.push(["A",d,d,0,0,v,i.x,i.y-g(d)])}else r.push(["M",i.x,i.y]),r.push(["L",a.x,i.y]),r.push(["L",a.x,a.y]),r.push(["L",i.x,a.y]),r.push(["L",i.x,i.y]);r.push(["z"])}if(e.isPolar){var y=e.getCenter(),m=wh(t,e),x=m.startAngle,b=m.endAngle;if(e.type!=="theta"&&!e.isTransposed)r=$o(y.x,y.y,e.getRadius(),x,b);else{var w=function(M){return Math.pow(M,2)},u=Math.sqrt(w(y.x-n[0].x)+w(y.y-n[0].y)),f=Math.sqrt(w(y.x-n[2].x)+w(y.y-n[2].y));r=$o(y.x,y.y,u,e.startAngle,e.endAngle,f)}}return r}function Gnt(t,n,e){var r=e.getWidth(),i=e.getHeight(),a=e.type==="rect",o=[],s=(t[2].x-t[1].x)/2,l=e.isTransposed?s*i/r:s*r/i;return n==="round"?(a?(o.push(["M",t[0].x,t[0].y+l]),o.push(["L",t[1].x,t[1].y-l]),o.push(["A",s,s,0,0,1,t[2].x,t[2].y-l]),o.push(["L",t[3].x,t[3].y+l]),o.push(["A",s,s,0,0,1,t[0].x,t[0].y+l])):(o.push(["M",t[0].x,t[0].y]),o.push(["L",t[1].x,t[1].y]),o.push(["A",s,s,0,0,1,t[2].x,t[2].y]),o.push(["L",t[3].x,t[3].y]),o.push(["A",s,s,0,0,1,t[0].x,t[0].y])),o.push(["z"])):o=aO(t),o}function h3(t,n,e){var r=[];return J(n)?e?r.push(["M",t[0].x,t[0].y],["L",t[1].x,t[1].y],["L",(t[2].x+t[3].x)/2,(t[2].y+t[3].y)/2],["Z"]):r.push(["M",t[0].x,t[0].y],["L",t[1].x,t[1].y],["L",t[2].x,t[2].y],["L",t[3].x,t[3].y],["Z"]):r.push(["M",t[0].x,t[0].y],["L",t[1].x,t[1].y],["L",n[1].x,n[1].y],["L",n[0].x,n[0].y],["Z"]),r}function ef(t,n){return[n,t]}function Ynt(t,n,e){var r,i,a,o,s,l,c,u=R(X([],R(t),!1),4),f=u[0],h=u[1],d=u[2],p=u[3],v=R(typeof e=="number"?Array(4).fill(e):e,4),g=v[0],y=v[1],m=v[2],x=v[3];n.isTransposed&&(r=R(ef(h,p),2),h=r[0],p=r[1]),n.isReflect("y")&&(i=R(ef(f,h),2),f=i[0],h=i[1],a=R(ef(d,p),2),d=a[0],p=a[1]),n.isReflect("x")&&(o=R(ef(f,p),2),f=o[0],p=o[1],s=R(ef(h,d),2),h=s[0],d=s[1]);var b=[],w=function(S){return Math.abs(S)};return l=R(u3([g,y,m,x],Math.min(w(p.x-f.x),w(h.y-f.y))).map(function(S){return w(S)}),4),g=l[0],y=l[1],m=l[2],x=l[3],n.isTransposed&&(c=R([x,g,y,m],4),g=c[0],y=c[1],m=c[2],x=c[3]),f.y<h.y?(b.push(["M",p.x,p.y+m]),m!==0&&b.push(["A",m,m,0,0,0,p.x-m,p.y]),b.push(["L",f.x+x,f.y]),x!==0&&b.push(["A",x,x,0,0,0,f.x,f.y+x]),b.push(["L",h.x,h.y-g]),g!==0&&b.push(["A",g,g,0,0,0,h.x+g,h.y]),b.push(["L",d.x-y,d.y]),y!==0&&b.push(["A",y,y,0,0,0,d.x,d.y-y]),b.push(["L",p.x,p.y+m]),b.push(["z"])):p.x<f.x?(b.push(["M",d.x+y,d.y]),y!==0&&b.push(["A",y,y,0,0,0,d.x,d.y+y]),b.push(["L",p.x,p.y-m]),m!==0&&b.push(["A",m,m,0,0,0,p.x+m,p.y]),b.push(["L",f.x-x,f.y]),x!==0&&b.push(["A",x,x,0,0,0,f.x,f.y-x]),b.push(["L",h.x,h.y+g]),g!==0&&b.push(["A",g,g,0,0,0,h.x-g,h.y]),b.push(["L",d.x+y,d.y]),b.push(["z"])):(b.push(["M",h.x,h.y+g]),g!==0&&b.push(["A",g,g,0,0,1,h.x+g,h.y]),b.push(["L",d.x-y,d.y]),y!==0&&b.push(["A",y,y,0,0,1,d.x,d.y+y]),b.push(["L",p.x,p.y-m]),m!==0&&b.push(["A",m,m,0,0,1,p.x-m,p.y]),b.push(["L",f.x+x,f.y]),x!==0&&b.push(["A",x,x,0,0,1,f.x,f.y-x]),b.push(["L",h.x,h.y+g]),b.push(["z"])),b}ss("interval",{defaultShapeType:"rect",getDefaultPoints:function(t){return iO(t)}});Xt("interval","rect",{draw:function(t,n){var e=Ke(t,!1,!0),r=n,i=t==null?void 0:t.background;if(i){r=n.addGroup({name:"interval-group"});var a=zB(t),o=f3(t,this.parsePoints(t.points),this.coordinate);r.addShape("path",{attrs:E(E({},a),{path:o}),capture:!1,zIndex:-1,name:HS})}var s;e.radius&&this.coordinate.isRect?s=Ynt(this.parsePoints(t.points),this.coordinate,e.radius):s=this.parsePath(Gnt(t.points,e.lineCap,this.coordinate));var l=r.addShape("path",{attrs:E(E({},e),{path:s}),name:"interval"});return i?r:l},getMarker:function(t){var n=t.color,e=t.isInPolar;return e?{symbol:"circle",style:{r:4.5,fill:n}}:{symbol:"square",style:{r:4,fill:n}}}});function Wnt(t,n){var e=t.length,r=t;pt(r[0])&&(r=t.map(function(s){return n.translate(s)}));for(var i=r[1]-r[0],a=2;a<e;a++){var o=r[a]-r[a-1];i>o&&(i=o)}return i}function Vnt(t,n){if(n){var e=Wr(t),r=Ni(e,n);return r.length}return t.length}function oO(t){var n=t.theme,e=t.coordinate,r=t.getXScale(),i=r.values,a=t.beforeMappingData,o=i.length,s=xd(t.coordinate),l=t.intervalPadding,c=t.dodgePadding,u=t.maxColumnWidth||n.maxColumnWidth,f=t.minColumnWidth||n.minColumnWidth,h=t.columnWidthRatio||n.columnWidthRatio,d=t.multiplePieWidthRatio||n.multiplePieWidthRatio,p=t.roseWidthRatio||n.roseWidthRatio;if(r.isLinear&&i.length>1){i.sort();var v=Wnt(i,r);o=(r.max-r.min)/v,i.length>o&&(o=i.length)}var g=r.range,y=1/o,m=1;if(e.isPolar?e.isTransposed&&o>1?m=d:m=p:(r.isLinear&&(y*=g[1]-g[0]),m=h),!J(l)&&l>=0){var x=l/s;y=(1-(o-1)*x)/o}else y*=m;if(t.getAdjust("dodge")){var b=t.getAdjust("dodge"),w=b.dodgeBy,S=Vnt(a,w);if(!J(c)&&c>=0){var O=c/s;y=(y-O*(S-1))/S}else!J(l)&&l>=0&&(y*=m),y=y/S;y=y>=0?y:0}if(!J(u)&&u>=0){var M=u/s;y>M&&(y=M)}if(!J(f)&&f>=0){var A=f/s;y<A&&(y=A)}return y}var Hnt=function(t){G(n,t);function n(e){var r=t.call(this,e)||this;r.type="interval",r.shapeType="interval",r.generatePoints=!0;var i=e.background;return r.background=i,r}return n.prototype.createShapePointsCfg=function(e){var r=t.prototype.createShapePointsCfg.call(this,e),i,a=this.getAttribute("size");if(a){i=this.getAttributeValues(a,e)[0];var o=this.coordinate,s=xd(o);i=i/s}else this.defaultSize||(this.defaultSize=oO(this)),i=this.defaultSize;return r.size=i,r},n.prototype.adjustScale=function(){t.prototype.adjustScale.call(this);var e=this.getYScale();if(this.coordinate.type==="theta")e.change({nice:!1,min:0,max:RJ(e)});else{var r=this.scaleDefs,i=e.field,a=e.min,o=e.max,s=e.type;s!=="time"&&(a>0&&!z(r,[i,"min"])&&e.change({min:0}),o<=0&&!z(r,[i,"max"])&&e.change({max:0}))}},n.prototype.getDrawCfg=function(e){var r=t.prototype.getDrawCfg.call(this,e);return r.background=this.background,r},n}(ls),Xnt=function(t){G(n,t);function n(e){var r=t.call(this,e)||this;r.type="line";var i=e.sortable,a=i===void 0?!1:i;return r.sortable=a,r}return n}(rO),d3=["circle","square","bowtie","diamond","hexagon","triangle","triangle-down"],Unt=["cross","tick","plus","hyphen","line"];function sO(t,n,e,r,i){var a,o,s=Ke(n,i,!i,"r"),l=t.parsePoints(n.points),c=l[0];if(n.isStack)c=l[1];else if(l.length>1){var u=e.addGroup();try{for(var f=Ct(l),h=f.next();!h.done;h=f.next()){var d=h.value;u.addShape({type:"marker",attrs:E(E(E({},s),{symbol:fl[r]||r}),d)})}}catch(p){a={error:p}}finally{try{h&&!h.done&&(o=f.return)&&o.call(f)}finally{if(a)throw a.error}}return u}return e.addShape({type:"marker",attrs:E(E(E({},s),{symbol:fl[r]||r}),c)})}ss("point",{defaultShapeType:"hollow-circle",getDefaultPoints:function(t){return qS(t)}});$(d3,function(t){Xt("point","hollow-".concat(t),{draw:function(n,e){return sO(this,n,e,t,!0)},getMarker:function(n){var e=n.color;return{symbol:fl[t]||t,style:{r:4.5,stroke:e,fill:null}}}})});var qnt=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="point",e.shapeType="point",e.generatePoints=!0,e}return n.prototype.getDrawCfg=function(e){var r=t.prototype.getDrawCfg.call(this,e);return E(E({},r),{isStack:!!this.getAdjust("stack")})},n}(ls);function Znt(t){for(var n=t[0],e=1,r=[["M",n.x,n.y]];e<t.length;){var i=t[e];(i.x!==t[e-1].x||i.y!==t[e-1].y)&&(r.push(["L",i.x,i.y]),i.x===n.x&&i.y===n.y&&e<t.length-1&&(n=t[e+1],r.push(["Z"]),r.push(["M",n.x,n.y]),e++)),e++}return Ne(ln(r),n)||r.push(["L",n.x,n.y]),r.push(["Z"]),r}ss("polygon",{defaultShapeType:"polygon",getDefaultPoints:function(t){var n=[];return $(t.x,function(e,r){var i=t.y[r];n.push({x:e,y:i})}),n}});Xt("polygon","polygon",{draw:function(t,n){if(!Mr(t.points)){var e=Ke(t,!0,!0),r=this.parsePath(Znt(t.points));return n.addShape("path",{attrs:E(E({},e),{path:r}),name:"polygon"})}},getMarker:function(t){var n=t.color;return{symbol:"square",style:{r:4,fill:n}}}});var Knt=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="polygon",e.shapeType="polygon",e.generatePoints=!0,e}return n.prototype.createShapePointsCfg=function(e){var r=t.prototype.createShapePointsCfg.call(this,e),i=r.x,a=r.y,o;if(!(et(i)&&et(a))){var s=this.getXScale(),l=this.getYScale(),c=s.values.length,u=l.values.length,f=.5*1/c,h=.5*1/u;s.isCategory&&l.isCategory?(i=[i-f,i-f,i+f,i+f],a=[a-h,a+h,a+h,a-h]):et(i)?(o=i,i=[o[0],o[0],o[1],o[1]],a=[a-h/2,a+h/2,a+h/2,a-h/2]):et(a)&&(o=a,a=[o[0],o[1],o[1],o[0]],i=[i-f/2,i-f/2,i+f/2,i+f/2]),r.x=i,r.y=a}return r},n}(ls);ss("schema",{defaultShapeType:""});var Qnt=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="schema",e.shapeType="schema",e.generatePoints=!0,e}return n.prototype.createShapePointsCfg=function(e){var r=t.prototype.createShapePointsCfg.call(this,e),i,a=this.getAttribute("size");if(a){i=this.getAttributeValues(a,e)[0];var o=this.coordinate,s=xd(o);i=i/s}else this.defaultSize||(this.defaultSize=oO(this)),i=this.defaultSize;return r.size=i,r},n}(ls);function Jnt(t){if(!et(t))return[];var n=Vr(t);return Ae(t,function(e){return e/n})}ss("violin",{defaultShapeType:"violin",getDefaultPoints:function(t){var n=t.size/2,e=[],r=Jnt(t._size);return $(t.y,function(i,a){var o=r[a]*n,s=a===0,l=a===t.y.length-1;e.push({isMin:s,isMax:l,x:t.x-o,y:i}),e.unshift({isMin:s,isMax:l,x:t.x+o,y:i})}),e}});Xt("violin","violin",{draw:function(t,n){var e=Ke(t,!0,!0),r=this.parsePath($B(t.points));return n.addShape("path",{attrs:E(E({},e),{path:r}),name:"violin"})},getMarker:function(t){var n=t.color;return{symbol:"circle",style:{r:4,fill:n}}}});var trt=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="violin",e.shapeType="violin",e.generatePoints=!0,e}return n.prototype.createShapePointsCfg=function(e){var r=t.prototype.createShapePointsCfg.call(this,e),i,a=this.getAttribute("size");if(a){i=this.getAttributeValues(a,e)[0];var o=this.coordinate,s=xd(o);i=i/s}else this.defaultSize||(this.defaultSize=oO(this)),i=this.defaultSize;return r.size=i,r._size=z(e[ae],[this._sizeField]),r},n.prototype.initAttributes=function(){var e=this.attributeOption,r=e.size?e.size.fields[0]:this._sizeField?this._sizeField:"size";this._sizeField=r,delete e.size,t.prototype.initAttributes.call(this)},n}(ls);Xt("area","line",{draw:function(t,n){var e=F0(t,!0,!1,this),r=n.addShape({type:"path",attrs:e,name:"area"});return r},getMarker:function(t){var n=t.color;return{symbol:function(e,r,i){return i===void 0&&(i=5.5),[["M",e-i,r-4],["L",e+i,r-4],["L",e+i,r+4],["L",e-i,r+4],["Z"]]},style:{r:5,stroke:n,fill:null}}}});Xt("area","smooth",{draw:function(t,n){var e=this.coordinate,r=F0(t,!1,!0,this,c3(e)),i=n.addShape({type:"path",attrs:r,name:"area"});return i},getMarker:function(t){var n=t.color;return{symbol:function(e,r,i){return i===void 0&&(i=5.5),[["M",e-i,r-4],["L",e+i,r-4],["L",e+i,r+4],["L",e-i,r+4],["Z"]]},style:{r:5,fill:n,fillOpacity:1}}}});Xt("area","smooth-line",{draw:function(t,n){var e=this.coordinate,r=F0(t,!0,!0,this,c3(e)),i=n.addShape({type:"path",attrs:r,name:"area"});return i},getMarker:function(t){var n=t.color;return{symbol:function(e,r,i){return i===void 0&&(i=5.5),[["M",e-i,r-4],["L",e+i,r-4],["L",e+i,r+4],["L",e-i,r+4],["Z"]]},style:{r:5,stroke:n,fill:null}}}});function Zb(t,n){return["C",t.x*1/2+n.x*1/2,t.y,t.x*1/2+n.x*1/2,n.y,n.x,n.y]}function Kb(t,n){var e=[];e.push({x:n.x,y:n.y}),e.push(t);var r=["Q"];return $(e,function(i){r.push(i.x,i.y)}),r}function ert(t,n,e){var r=Kb(n,e),i=[["M",t.x,t.y]];return i.push(r),i}function nrt(t,n){var e=Kb(t[1],n),r=Kb(t[3],n),i=[["M",t[0].x,t[0].y]];return i.push(r),i.push(["L",t[3].x,t[3].y]),i.push(["L",t[2].x,t[2].y]),i.push(e),i.push(["L",t[1].x,t[1].y]),i.push(["L",t[0].x,t[0].y]),i.push(["Z"]),i}Xt("edge","arc",{draw:function(t,n){var e=Ke(t,!0,!1,"lineWidth"),r=t.points,i=r.length>2?"weight":"normal",a;if(t.isInCircle){var o={x:0,y:1};return i==="normal"?a=ert(r[0],r[1],o):(e.fill=e.stroke,a=nrt(r,o)),a=this.parsePath(a),n.addShape("path",{attrs:E(E({},e),{path:a})})}else{if(i==="normal")return r=this.parsePoints(r),a=J5((r[1].x+r[0].x)/2,r[0].y,Math.abs(r[1].x-r[0].x)/2,Math.PI,Math.PI*2),n.addShape("path",{attrs:E(E({},e),{path:a})});var s=Zb(r[1],r[3]),l=Zb(r[2],r[0]);return a=[["M",r[0].x,r[0].y],["L",r[1].x,r[1].y],s,["L",r[3].x,r[3].y],["L",r[2].x,r[2].y],l,["Z"]],a=this.parsePath(a),e.fill=e.stroke,n.addShape("path",{attrs:E(E({},e),{path:a})})}},getMarker:function(t){return{symbol:"circle",style:{r:4.5,fill:t.color}}}});function rrt(t,n){var e=Zb(t,n),r=[["M",t.x,t.y]];return r.push(e),r}Xt("edge","smooth",{draw:function(t,n){var e=Ke(t,!0,!1,"lineWidth"),r=t.points,i=this.parsePath(rrt(r[0],r[1]));return n.addShape("path",{attrs:E(E({},e),{path:i})})},getMarker:function(t){return{symbol:"circle",style:{r:4.5,fill:t.color}}}});var Tp=1/3;function irt(t,n){var e=[];e.push({x:t.x,y:t.y*(1-Tp)+n.y*Tp}),e.push({x:n.x,y:t.y*(1-Tp)+n.y*Tp}),e.push(n);var r=[["M",t.x,t.y]];return $(e,function(i){r.push(["L",i.x,i.y])}),r}Xt("edge","vhv",{draw:function(t,n){var e=Ke(t,!0,!1,"lineWidth"),r=t.points,i=this.parsePath(irt(r[0],r[1]));return n.addShape("path",{attrs:E(E({},e),{path:i})})},getMarker:function(t){return{symbol:"circle",style:{r:4.5,fill:t.color}}}});Xt("interval","funnel",{getPoints:function(t){return t.size=t.size*2,iO(t)},draw:function(t,n){var e=Ke(t,!1,!0),r=this.parsePath(h3(t.points,t.nextPoints,!1)),i=n.addShape("path",{attrs:E(E({},e),{path:r}),name:"interval"});return i},getMarker:function(t){var n=t.color;return{symbol:"square",style:{r:4,fill:n}}}});Xt("interval","hollow-rect",{draw:function(t,n){var e=Ke(t,!0,!1),r=n,i=t==null?void 0:t.background;if(i){r=n.addGroup();var a=zB(t),o=f3(t,this.parsePoints(t.points),this.coordinate);r.addShape("path",{attrs:E(E({},a),{path:o}),capture:!1,zIndex:-1,name:HS})}var s=this.parsePath(aO(t.points)),l=r.addShape("path",{attrs:E(E({},e),{path:s}),name:"interval"});return i?r:l},getMarker:function(t){var n=t.color,e=t.isInPolar;return e?{symbol:"circle",style:{r:4.5,stroke:n,fill:null}}:{symbol:"square",style:{r:4,stroke:n,fill:null}}}});function art(t){var n=t.x,e=t.y,r=t.y0;return et(e)?e.map(function(i,a){return{x:et(n)?n[a]:n,y:i}}):[{x:n,y:r},{x:n,y:e}]}Xt("interval","line",{getPoints:function(t){return art(t)},draw:function(t,n){var e=Ke(t,!0,!1,"lineWidth"),r=mr(E({},e),["fill"]),i=this.parsePath(aO(t.points,!1)),a=n.addShape("path",{attrs:E(E({},r),{path:i}),name:"interval"});return a},getMarker:function(t){var n=t.color;return{symbol:function(e,r,i){return[["M",e,r-i],["L",e,r+i]]},style:{r:5,stroke:n}}}});Xt("interval","pyramid",{getPoints:function(t){return t.size=t.size*2,iO(t)},draw:function(t,n){var e=Ke(t,!1,!0),r=this.parsePath(h3(t.points,t.nextPoints,!0)),i=n.addShape("path",{attrs:E(E({},e),{path:r}),name:"interval"});return i},getMarker:function(t){var n=t.color;return{symbol:"square",style:{r:4,fill:n}}}});function ort(t){var n,e=t.x,r=t.y,i=t.y0,a=t.size,o,s;et(r)?(n=R(r,2),o=n[0],s=n[1]):(o=i,s=r);var l=e+a/2,c=e-a/2;return[{x:e,y:o},{x:e,y:s},{x:c,y:o},{x:l,y:o},{x:c,y:s},{x:l,y:s}]}function srt(t){return[["M",t[0].x,t[0].y],["L",t[1].x,t[1].y],["M",t[2].x,t[2].y],["L",t[3].x,t[3].y],["M",t[4].x,t[4].y],["L",t[5].x,t[5].y]]}Xt("interval","tick",{getPoints:function(t){return ort(t)},draw:function(t,n){var e=Ke(t,!0,!1),r=this.parsePath(srt(t.points)),i=n.addShape("path",{attrs:E(E({},e),{path:r}),name:"interval"});return i},getMarker:function(t){var n=t.color;return{symbol:function(e,r,i){return[["M",e-i/2,r-i],["L",e+i/2,r-i],["M",e,r-i],["L",e,r+i],["M",e-i/2,r+i],["L",e+i/2,r+i]]},style:{r:5,stroke:n}}}});var lrt=function(t,n,e){var r=t.x,i=t.y,a=n.x,o=n.y,s;switch(e){case"hv":s=[{x:a,y:i}];break;case"vh":s=[{x:r,y:o}];break;case"hvh":var l=(a+r)/2;s=[{x:l,y:i},{x:l,y:o}];break;case"vhv":var c=(i+o)/2;s=[{x:r,y:c},{x:a,y:c}];break}return s};function crt(t,n){var e=[];return $(t,function(r,i){var a=t[i+1];if(e.push(r),a){var o=lrt(r,a,n);e=e.concat(o)}}),e}function urt(t){return t.map(function(n,e){return e===0?["M",n.x,n.y]:["L",n.x,n.y]})}function frt(t,n){var e=I0(t.points,t.connectNulls,t.showSinglePoint),r=[];return $(e,function(i){var a=crt(i,n);r=r.concat(urt(a))}),E(E({},Ke(t,!0,!1,"lineWidth")),{path:r})}$(["hv","vh","hvh","vhv"],function(t){Xt("line",t,{draw:function(n,e){var r=frt(n,t),i=e.addShape({type:"path",attrs:r,name:"line"});return i},getMarker:function(n){return GB(n,t)}})});$(Unt,function(t){Xt("point",t,{draw:function(n,e){return sO(this,n,e,t,!0)},getMarker:function(n){var e=n.color;return{symbol:fl[t],style:{r:4.5,stroke:e,fill:null}}}})});Xt("point","image",{draw:function(t,n){var e,r,i=Ke(t,!1,!1,"r").r,a=this.parsePoints(t.points),o=a[0];if(t.isStack)o=a[1];else if(a.length>1){var s=n.addGroup();try{for(var l=Ct(a),c=l.next();!c.done;c=l.next()){var u=c.value;s.addShape("image",{attrs:{x:u.x-i/2,y:u.y-i,width:i,height:i,img:t.shape[1]}})}}catch(f){e={error:f}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(e)throw e.error}}return s}return n.addShape("image",{attrs:{x:o.x-i/2,y:o.y-i,width:i,height:i,img:t.shape[1]}})},getMarker:function(t){var n=t.color;return{symbol:"circle",style:{r:4.5,fill:n}}}});$(d3,function(t){Xt("point",t,{draw:function(n,e){return sO(this,n,e,t,!1)},getMarker:function(n){var e=n.color;return{symbol:fl[t]||t,style:{r:4.5,fill:e}}}})});function QC(t){var n=et(t)?t:[t],e=n[0],r=n[n.length-1],i=n.length>1?n[1]:e,a=n.length>3?n[3]:r,o=n.length>2?n[2]:i;return{min:e,max:r,min1:i,max1:a,median:o}}function JC(t,n,e){var r=e/2,i;if(et(n)){var a=QC(n),o=a.min,s=a.max,l=a.median,c=a.min1,u=a.max1,f=t-r,h=t+r;i=[[f,s],[h,s],[t,s],[t,u],[f,c],[f,u],[h,u],[h,c],[t,c],[t,o],[f,o],[h,o],[f,l],[h,l]]}else{n=J(n)?.5:n;var d=QC(t),o=d.min,s=d.max,l=d.median,c=d.min1,u=d.max1,p=n-r,v=n+r;i=[[o,p],[o,v],[o,n],[c,n],[c,p],[c,v],[u,v],[u,p],[u,n],[s,n],[s,p],[s,v],[l,p],[l,v]]}return i.map(function(g){return{x:g[0],y:g[1]}})}function hrt(t){return[["M",t[0].x,t[0].y],["L",t[1].x,t[1].y],["M",t[2].x,t[2].y],["L",t[3].x,t[3].y],["M",t[4].x,t[4].y],["L",t[5].x,t[5].y],["L",t[6].x,t[6].y],["L",t[7].x,t[7].y],["L",t[4].x,t[4].y],["Z"],["M",t[8].x,t[8].y],["L",t[9].x,t[9].y],["M",t[10].x,t[10].y],["L",t[11].x,t[11].y],["M",t[12].x,t[12].y],["L",t[13].x,t[13].y]]}Xt("schema","box",{getPoints:function(t){var n=t.x,e=t.y,r=t.size;return JC(n,e,r)},draw:function(t,n){var e=Ke(t,!0,!1),r=this.parsePath(hrt(t.points)),i=n.addShape("path",{attrs:E(E({},e),{path:r,name:"schema"})});return i},getMarker:function(t){var n=t.color;return{symbol:function(e,r,i){var a=[r-6,r-3,r,r+3,r+6],o=JC(e,a,i);return[["M",o[0].x+1,o[0].y],["L",o[1].x-1,o[1].y],["M",o[2].x,o[2].y],["L",o[3].x,o[3].y],["M",o[4].x,o[4].y],["L",o[5].x,o[5].y],["L",o[6].x,o[6].y],["L",o[7].x,o[7].y],["L",o[4].x,o[4].y],["Z"],["M",o[8].x,o[8].y],["L",o[9].x,o[9].y],["M",o[10].x+1,o[10].y],["L",o[11].x-1,o[11].y],["M",o[12].x,o[12].y],["L",o[13].x,o[13].y]]},style:{r:6,lineWidth:1,stroke:n}}}});function drt(t){var n=et(t)?t:[t],e=n.sort(function(r,i){return i-r});return TJ(e,4,e[e.length-1])}function tP(t,n,e){var r=drt(n);return[{x:t,y:r[0]},{x:t,y:r[1]},{x:t-e/2,y:r[2]},{x:t-e/2,y:r[1]},{x:t+e/2,y:r[1]},{x:t+e/2,y:r[2]},{x:t,y:r[2]},{x:t,y:r[3]}]}function prt(t){return[["M",t[0].x,t[0].y],["L",t[1].x,t[1].y],["M",t[2].x,t[2].y],["L",t[3].x,t[3].y],["L",t[4].x,t[4].y],["L",t[5].x,t[5].y],["Z"],["M",t[6].x,t[6].y],["L",t[7].x,t[7].y]]}Xt("schema","candle",{getPoints:function(t){var n=t.x,e=t.y,r=t.size;return tP(n,e,r)},draw:function(t,n){var e=Ke(t,!0,!0),r=this.parsePath(prt(t.points)),i=n.addShape("path",{attrs:E(E({},e),{path:r,name:"schema"})});return i},getMarker:function(t){var n=t.color;return{symbol:function(e,r,i){var a=[r+7.5,r+3,r-3,r-7.5],o=tP(e,a,i);return[["M",o[0].x,o[0].y],["L",o[1].x,o[1].y],["M",o[2].x,o[2].y],["L",o[3].x,o[3].y],["L",o[4].x,o[4].y],["L",o[5].x,o[5].y],["Z"],["M",o[6].x,o[6].y],["L",o[7].x,o[7].y]]},style:{lineWidth:1,stroke:n,fill:n,r:6}}}});function vrt(t,n){var e=Math.abs(t[0].x-t[2].x),r=Math.abs(t[0].y-t[2].y),i=Math.min(e,r);n&&(i=we(n,0,Math.min(e,r))),i=i/2;var a=(t[0].x+t[2].x)/2,o=(t[0].y+t[2].y)/2;return{x:a-i,y:o-i,width:i*2,height:i*2}}Xt("polygon","square",{draw:function(t,n){if(!Mr(t.points)){var e=Ke(t,!0,!0),r=this.parsePoints(t.points);return n.addShape("rect",{attrs:E(E({},e),vrt(r,t.size)),name:"polygon"})}},getMarker:function(t){var n=t.color;return{symbol:"square",style:{r:4,fill:n}}}});Xt("violin","smooth",{draw:function(t,n){var e=Ke(t,!0,!0),r=this.parsePath(jB(t.points));return n.addShape("path",{attrs:E(E({},e),{path:r})})},getMarker:function(t){var n=t.color;return{symbol:"circle",style:{stroke:null,r:4,fill:n}}}});Xt("violin","hollow",{draw:function(t,n){var e=Ke(t,!0,!1),r=this.parsePath($B(t.points));return n.addShape("path",{attrs:E(E({},e),{path:r})})},getMarker:function(t){var n=t.color;return{symbol:"circle",style:{r:4,fill:null,stroke:n}}}});Xt("violin","hollow-smooth",{draw:function(t,n){var e=Ke(t,!0,!1),r=this.parsePath(jB(t.points));return n.addShape("path",{attrs:E(E({},e),{path:r})})},getMarker:function(t){var n=t.color;return{symbol:"circle",style:{r:4,fill:null,stroke:n}}}});var grt=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getLabelValueDir=function(e){var r="y",i=e.points;return i[0][r]<=i[2][r]?1:-1},n.prototype.getLabelOffsetPoint=function(e,r,i,a){var o,s=t.prototype.getLabelOffsetPoint.call(this,e,r,i),l=this.getCoordinate(),c=l.isTransposed,u=c?"x":"y",f=this.getLabelValueDir(e.mappingData);return s=E(E({},s),(o={},o[u]=s[u]*f,o)),l.isReflect("x")&&(s=E(E({},s),{x:s.x*-1})),l.isReflect("y")&&(s=E(E({},s),{y:s.y*-1})),s},n.prototype.getThemedLabelCfg=function(e){var r=this.geometry,i=this.getDefaultLabelCfg(),a=r.theme;return ot({},i,a.labels,e.position==="middle"?{offset:0}:{},e)},n.prototype.setLabelPosition=function(e,r,i,a){var o=this.getCoordinate(),s=o.isTransposed,l=r.points,c=o.convert(l[0]),u=o.convert(l[2]),f=this.getLabelValueDir(r),h,d,p,v,g=et(r.shape)?r.shape[0]:r.shape;if(g==="funnel"||g==="pyramid"){var y=z(r,"nextPoints"),m=z(r,"points");if(y){var x=o.convert(m[0]),b=o.convert(m[1]),w=o.convert(y[0]),S=o.convert(y[1]);s?(h=Math.min(w.y,x.y),p=Math.max(w.y,x.y),d=(b.x+S.x)/2,v=(x.x+w.x)/2):(h=Math.min((b.y+S.y)/2,(x.y+w.y)/2),p=Math.max((b.y+S.y)/2,(x.y+w.y)/2),d=S.x,v=x.x)}else h=Math.min(u.y,c.y),p=Math.max(u.y,c.y),d=u.x,v=c.x}else h=Math.min(u.y,c.y),p=Math.max(u.y,c.y),d=u.x,v=c.x;switch(a){case"right":e.x=d,e.y=(h+p)/2,e.textAlign=z(e,"textAlign",f>0?"left":"right");break;case"left":e.x=v,e.y=(h+p)/2,e.textAlign=z(e,"textAlign",f>0?"left":"right");break;case"bottom":s&&(e.x=(d+v)/2),e.y=p,e.textAlign=z(e,"textAlign","center"),e.textBaseline=z(e,"textBaseline",f>0?"bottom":"top");break;case"middle":s&&(e.x=(d+v)/2),e.y=(h+p)/2,e.textAlign=z(e,"textAlign","center"),e.textBaseline=z(e,"textBaseline","middle");break;case"top":s&&(e.x=(d+v)/2),e.y=h,e.textAlign=z(e,"textAlign","center"),e.textBaseline=z(e,"textBaseline",f>0?"bottom":"top");break}},n}(L0),Cp=Math.PI/2,p3=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getLabelOffset=function(e){var r=this.getCoordinate(),i=0;if(bt(e))i=e;else if(pt(e)&&e.indexOf("%")!==-1){var a=r.getRadius();r.innerRadius>0&&(a=a*(1-r.innerRadius)),i=parseFloat(e)*.01*a}return i},n.prototype.getLabelItems=function(e){var r=t.prototype.getLabelItems.call(this,e),i=this.geometry.getYScale();return Ae(r,function(a){if(a&&i){var o=i.scale(z(a.data,i.field));return E(E({},a),{percent:o})}return a})},n.prototype.getLabelAlign=function(e){var r=this.getCoordinate(),i;if(e.labelEmit)i=e.angle<=Math.PI/2&&e.angle>=-Math.PI/2?"left":"right";else if(!r.isTransposed)i="center";else{var a=r.getCenter(),o=e.offset;Math.abs(e.x-a.x)<1?i="center":e.angle>Math.PI||e.angle<=0?i=o>0?"left":"right":i=o>0?"right":"left"}return i},n.prototype.getLabelPoint=function(e,r,i){var a=1,o,s=e.content[i];this.isToMiddle(r)?o=this.getMiddlePoint(r.points):(e.content.length===1&&i===0?i=1:i===0&&(a=-1),o=this.getArcPoint(r,i));var l=e.offset*a,c=this.getPointAngle(o),u=e.labelEmit,f=this.getCirclePoint(c,l,o,u);return f.r===0?f.content="":(f.content=s,f.angle=c,f.color=r.color),f.rotate=e.autoRotate?this.getLabelRotate(c,l,u):e.rotate,f.start={x:o.x,y:o.y},f},n.prototype.getArcPoint=function(e,r){return r===void 0&&(r=0),!et(e.x)&&!et(e.y)?{x:e.x,y:e.y}:{x:et(e.x)?e.x[r]:e.x,y:et(e.y)?e.y[r]:e.y}},n.prototype.getPointAngle=function(e){return Yc(this.getCoordinate(),e)},n.prototype.getCirclePoint=function(e,r,i,a){var o=this.getCoordinate(),s=o.getCenter(),l=T0(o,i);if(l===0)return E(E({},s),{r:l});var c=e;if(o.isTransposed&&l>r&&!a){var u=Math.asin(r/(2*l));c=e+u*2}else l=l+r;return{x:s.x+l*Math.cos(c),y:s.y+l*Math.sin(c),r:l}},n.prototype.getLabelRotate=function(e,r,i){var a=e+Cp;return i&&(a-=Cp),a&&(a>Cp?a=a-Math.PI:a<-Cp&&(a=a+Math.PI)),a},n.prototype.getMiddlePoint=function(e){var r=this.getCoordinate(),i=e.length,a={x:0,y:0};return $(e,function(o){a.x+=o.x,a.y+=o.y}),a.x/=i,a.y/=i,a=r.convert(a),a},n.prototype.isToMiddle=function(e){return e.x.length>2},n}(L0),yrt=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.defaultLayout="distribute",e}return n.prototype.getDefaultLabelCfg=function(e,r){var i=t.prototype.getDefaultLabelCfg.call(this,e,r);return ot({},i,z(this.geometry.theme,"pieLabels",{}))},n.prototype.getLabelOffset=function(e){return t.prototype.getLabelOffset.call(this,e)||0},n.prototype.getLabelRotate=function(e,r,i){var a;return r<0&&(a=e,a>Math.PI/2&&(a=a-Math.PI),a<-Math.PI/2&&(a=a+Math.PI)),a},n.prototype.getLabelAlign=function(e){var r=this.getCoordinate(),i=r.getCenter(),a;return e.angle<=Math.PI/2&&e.x>=i.x?a="left":a="right",e.offset<=0&&(a==="right"?a="left":a="right"),a},n.prototype.getArcPoint=function(e){return e},n.prototype.getPointAngle=function(e){var r=this.getCoordinate(),i={x:et(e.x)?e.x[0]:e.x,y:e.y[0]},a={x:et(e.x)?e.x[1]:e.x,y:e.y[1]},o,s=Yc(r,i);if(e.points&&e.points[0].y===e.points[1].y)o=s;else{var l=Yc(r,a);s>=l&&(l=l+Math.PI*2),o=s+(l-s)/2}return o},n.prototype.getCirclePoint=function(e,r){var i=this.getCoordinate(),a=i.getCenter(),o=i.getRadius()+r;return E(E({},tn(a.x,a.y,o,e)),{angle:e,r:o})},n}(p3),eP=4;function mrt(t,n,e,r,i,a){var o,s,l=!0,c=r.start,u=r.end,f=Math.min(c.y,u.y),h=Math.abs(c.y-u.y),d,p=0,v=Number.MIN_VALUE,g=n.map(function(O){return O.y>p&&(p=O.y),O.y<v&&(v=O.y),{size:e,targets:[O.y-f]}});for(v-=f,p-f>h&&(h=p-f);l;)for(g.forEach(function(O){var M=(Math.min.apply(v,O.targets)+Math.max.apply(v,O.targets))/2;O.pos=Math.min(Math.max(v,M-O.size/2),h-O.size)}),l=!1,d=g.length;d--;)if(d>0){var y=g[d-1],m=g[d];y.pos+y.size>m.pos&&(y.size+=m.size,y.targets=y.targets.concat(m.targets),y.pos+y.size>h&&(y.pos=h-y.size),g.splice(d,1),l=!0)}d=0,g.forEach(function(O){var M=f+e/2;O.targets.forEach(function(){n[d].y=O.pos+M,M+=e,d++})});var x={};try{for(var b=Ct(t),w=b.next();!w.done;w=b.next()){var S=w.value;x[S.get("id")]=S}}catch(O){o={error:O}}finally{try{w&&!w.done&&(s=b.return)&&s.call(b)}finally{if(o)throw o.error}}n.forEach(function(O){var M=O.r*O.r,A=Math.pow(Math.abs(O.y-i.y),2);if(M<A)O.x=i.x;else{var T=Math.sqrt(M-A);a?O.x=i.x+T:O.x=i.x-T}var C=x[O.id];C.attr("x",O.x),C.attr("y",O.y);var P=Li(C.getChildren(),function(_){return _.get("type")==="text"});P&&(P.attr("y",O.y),P.attr("x",O.x))})}function xrt(t,n,e,r){if(!(!t.length||!n.length)){var i=t[0]?t[0].offset:0,a=n[0].get("coordinate"),o=a.getRadius(),s=a.getCenter();if(i>0){var l=14,c=o+i,u=c*2+l*2,f={start:a.start,end:a.end},h=[[],[]];t.forEach(function(d){d&&(d.textAlign==="right"?h[0].push(d):h[1].push(d))}),h.forEach(function(d,p){var v=u/l;d.length>v&&(d.sort(function(g,y){return y["..percent"]-g["..percent"]}),d.splice(v,d.length-v)),d.sort(function(g,y){return g.y-y.y}),mrt(n,d,l,f,s,p)})}$(t,function(d){if(d&&d.labelLine){var p=d.offset,v=d.angle,g=tn(s.x,s.y,o,v),y=tn(s.x,s.y,o+p/2,v),m=d.x+z(d,"offsetX",0),x=d.y+z(d,"offsetY",0),b={x:m-Math.cos(v)*eP,y:x-Math.sin(v)*eP};Qt(d.labelLine)||(d.labelLine={}),d.labelLine.path=["M ".concat(g.x),"".concat(g.y," Q").concat(y.x),"".concat(y.y," ").concat(b.x),b.y].join(",")}})}}function v3(t,n,e){var r=t.filter(function(p){return!p.invisible});r.sort(function(p,v){return p.y-v.y});var i=!0,a=e.minY,o=e.maxY,s=Math.abs(a-o),l,c=0,u=Number.MIN_VALUE,f=r.map(function(p){return p.y>c&&(c=p.y),p.y<u&&(u=p.y),{content:p.content,size:n,targets:[p.y-a],pos:null}});for(u-=a,c-a>s&&(s=c-a);i;)for(f.forEach(function(p){var v=(Math.min.apply(u,p.targets)+Math.max.apply(u,p.targets))/2;p.pos=Math.min(Math.max(u,v-p.size/2),s-p.size),p.pos=Math.max(0,p.pos)}),i=!1,l=f.length;l--;)if(l>0){var h=f[l-1],d=f[l];h.pos+h.size>d.pos&&(h.size+=d.size,h.targets=h.targets.concat(d.targets),h.pos+h.size>s&&(h.pos=s-h.size),f.splice(l,1),i=!0)}l=0,f.forEach(function(p){var v=a+n/2;p.targets.forEach(function(){r[l].y=p.pos+v,v+=n,l++})})}var nP=4;function brt(t,n){var e=n.getCenter(),r=n.getRadius();if(t&&t.labelLine){var i=t.angle,a=t.offset,o=tn(e.x,e.y,r,i),s=t.x+z(t,"offsetX",0)*(Math.cos(i)>0?1:-1),l=t.y+z(t,"offsetY",0)*(Math.sin(i)>0?1:-1),c={x:s-Math.cos(i)*nP,y:l-Math.sin(i)*nP},u=t.labelLine.smooth,f=[],h=c.x-e.x,d=c.y-e.y,p=Math.atan(d/h);if(h<0&&(p+=Math.PI),u===!1){Qt(t.labelLine)||(t.labelLine={});var v=0;(i<0&&i>-Math.PI/2||i>Math.PI*1.5)&&c.y>o.y&&(v=1),i>=0&&i<Math.PI/2&&c.y>o.y&&(v=1),i>=Math.PI/2&&i<Math.PI&&o.y>c.y&&(v=1),(i<-Math.PI/2||i>=Math.PI&&i<Math.PI*1.5)&&o.y>c.y&&(v=1);var g=a/2>4?4:Math.max(a/2-1,0),y=tn(e.x,e.y,r+g,i),m=tn(e.x,e.y,r+a/2,p),x=0;f.push("M ".concat(o.x," ").concat(o.y)),f.push("L ".concat(y.x," ").concat(y.y)),f.push("A ".concat(e.x," ").concat(e.y," 0 ").concat(x," ").concat(v," ").concat(m.x," ").concat(m.y)),f.push("L ".concat(c.x," ").concat(c.y))}else{var y=tn(e.x,e.y,r+(a/2>4?4:Math.max(a/2-1,0)),i),b=o.x<e.x?1:-1;f.push("M ".concat(c.x," ").concat(c.y));var w=(o.y-e.y)/(o.x-e.x),S=(c.y-e.y)/(c.x-e.x);Math.abs(w-S)>Math.pow(Math.E,-16)&&f.push.apply(f,["C",c.x+b*4,c.y,2*y.x-o.x,2*y.y-o.y,o.x,o.y]),f.push("L ".concat(o.x," ").concat(o.y))}t.labelLine.path=f.join(" ")}}function wrt(t,n,e,r){var i,a,o=Ln(t,function(M){return!J(M)}),s=n[0]&&n[0].get("coordinate");if(s){var l=s.getCenter(),c=s.getRadius(),u={};try{for(var f=Ct(n),h=f.next();!h.done;h=f.next()){var d=h.value;u[d.get("id")]=d}}catch(M){i={error:M}}finally{try{h&&!h.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}var p=z(o[0],"labelHeight",14),v=z(o[0],"offset",0);if(!(v<=0)){var g="left",y="right",m=Gr(o,function(M){return M.x<l.x?g:y}),x=s.start,b=s.end,w=Math.min((c+v+p)*2,s.getHeight()),S=w/2,O={minX:x.x,maxX:b.x,minY:l.y-S,maxY:l.y+S};$(m,function(M,A){var T=Math.floor(w/p);M.length>T&&(M.sort(function(C,P){return P.percent-C.percent}),$(M,function(C,P){P+1>T&&(u[C.id].set("visible",!1),C.invisible=!0)})),v3(M,p,O)}),$(m,function(M,A){$(M,function(T){var C=A===y,P=u[T.id],_=P.getChildByIndex(0);if(_){var k=c+v,I=T.y-l.y,L=Math.pow(k,2),F=Math.pow(I,2),B=L-F>0?L-F:0,D=Math.sqrt(B),N=Math.abs(Math.cos(T.angle)*k);C?T.x=l.x+Math.max(D,N):T.x=l.x-Math.max(D,N)}_&&(_.attr("y",T.y),_.attr("x",T.x)),brt(T,s)})})}}}var Qb=4,Srt=4,rP=4;function Ort(t,n,e){var r=n.getCenter(),i=n.getRadius(),a={x:t.x-(e?rP:-rP),y:t.y},o=tn(r.x,r.y,i+Qb,t.angle),s={x:a.x,y:a.y},l={x:o.x,y:o.y},c=tn(r.x,r.y,i,t.angle),u="";if(a.y!==o.y){var f=e?4:-4;s.y=a.y,t.angle<0&&t.angle>=-Math.PI/2&&(s.x=Math.max(o.x,a.x-f),a.y<o.y?l.y=s.y:(l.y=o.y,l.x=Math.max(l.x,s.x-f))),t.angle>0&&t.angle<Math.PI/2&&(s.x=Math.max(o.x,a.x-f),a.y>o.y?l.y=s.y:(l.y=o.y,l.x=Math.max(l.x,s.x-f))),t.angle>Math.PI/2&&(s.x=Math.min(o.x,a.x-f),a.y>o.y?l.y=s.y:(l.y=o.y,l.x=Math.min(l.x,s.x-f))),t.angle<-Math.PI/2&&(s.x=Math.min(o.x,a.x-f),a.y<o.y?l.y=s.y:(l.y=o.y,l.x=Math.min(l.x,s.x-f)))}u=["M ".concat(a.x,",").concat(a.y),"L ".concat(s.x,",").concat(s.y),"L ".concat(l.x,",").concat(l.y),"L ".concat(o.x,",").concat(o.y),"L ".concat(c.x,",").concat(c.y)].join(" "),t.labelLine=ot({},t.labelLine,{path:u})}function Mrt(t,n,e,r){var i,a,o=n[0]&&n[0].get("coordinate");if(o){var s=o.getCenter(),l=o.getRadius(),c={};try{for(var u=Ct(n),f=u.next();!f.done;f=u.next()){var h=f.value;c[h.get("id")]=h}}catch(M){i={error:M}}finally{try{f&&!f.done&&(a=u.return)&&a.call(u)}finally{if(i)throw i.error}}var d=z(t[0],"labelHeight",14),p=Math.max(z(t[0],"offset",0),Qb);$(t,function(M){if(M){var A=z(c,[M.id]);if(A){var T=M.x>s.x||M.x===s.x&&M.y>s.y,C=J(M.offsetX)?Srt:M.offsetX,P=tn(s.x,s.y,l+Qb,M.angle),_=p+C;M.x=s.x+(T?1:-1)*(l+_),M.y=P.y}}});var v=o.start,g=o.end,y="left",m="right",x=Gr(t,function(M){return M.x<s.x?y:m}),b=(l+p)*2+d;$(x,function(M){var A=M.length*d;A>b&&(b=Math.min(A,Math.abs(v.y-g.y)))});var w={minX:v.x,maxX:g.x,minY:s.y-b/2,maxY:s.y+b/2};$(x,function(M,A){var T=b/d;M.length>T&&(M.sort(function(C,P){return P.percent-C.percent}),$(M,function(C,P){P>T&&(c[C.id].set("visible",!1),C.invisible=!0)})),v3(M,d,w)});var S=w.minY,O=w.maxY;$(x,function(M,A){var T=A===m;$(M,function(C){var P=z(c,C&&[C.id]);if(P){if(C.y<S||C.y>O){P.set("visible",!1);return}var _=P.getChildByIndex(0),k=_.getCanvasBBox(),I={x:T?k.x:k.maxX,y:k.y+k.height/2};Sd(_,C.x-I.x,C.y-I.y),C.labelLine&&Ort(C,o,T)}})})}}function Art(t,n,e,r){$(n,function(i){var a=r.minX,o=r.minY,s=r.maxX,l=r.maxY,c=i.getCanvasBBox(),u=c.minX,f=c.minY,h=c.maxX,d=c.maxY,p=c.x,v=c.y,g=c.width,y=c.height,m=p,x=v;(u<a||h<a)&&(m=a),(f<o||d<o)&&(x=o),u>s?m=s-g:h>s&&(m=m-(h-s)),f>l?x=l-y:d>l&&(x=x-(d-l)),(m!==p||x!==v)&&Sd(i,m-p,x-v)})}function Ert(t,n,e,r){$(n,function(i,a){var o=i.getCanvasBBox(),s=e[a].getBBox();(o.minX<s.minX||o.minY<s.minY||o.maxX>s.maxX||o.maxY>s.maxY)&&i.remove(!0)})}var Trt=100,g3=function(){function t(n){n===void 0&&(n={}),this.bitmap={};var e=n.xGap,r=e===void 0?1:e,i=n.yGap,a=i===void 0?8:i;this.xGap=r,this.yGap=a}return t.prototype.hasGap=function(n){for(var e=!0,r=this.bitmap,i=Math.round(n.minX),a=Math.round(n.maxX),o=Math.round(n.minY),s=Math.round(n.maxY),l=i;l<=a;l+=1){if(!r[l]){r[l]={};continue}if(l===i||l===a){for(var c=o;c<=s;c++)if(r[l][c]){e=!1;break}}else if(r[l][o]||r[l][s]){e=!1;break}}return e},t.prototype.fillGap=function(n){for(var e=this.bitmap,r=Math.round(n.minX),i=Math.round(n.maxX),a=Math.round(n.minY),o=Math.round(n.maxY),s=r;s<=i;s+=1)e[s]||(e[s]={});for(var s=r;s<=i;s+=this.xGap){for(var l=a;l<=o;l+=this.yGap)e[s][l]=!0;e[s][o]=!0}if(this.yGap!==1)for(var s=a;s<=o;s+=1)e[r][s]=!0,e[i][s]=!0;if(this.xGap!==1)for(var s=r;s<=i;s+=1)e[s][a]=!0,e[s][o]=!0},t.prototype.destroy=function(){this.bitmap={}},t}();function Crt(t,n,e){e===void 0&&(e=Trt);var r=-1,i=t.attr(),a=i.x,o=i.y,s=t.getCanvasBBox(),l=Math.sqrt(s.width*s.width+s.height*s.height),c,u=-r,f=0,h=0,d=function(y){var m=y*.1;return[m*Math.cos(m),m*Math.sin(m)]};if(n.hasGap(s))return n.fillGap(s),!0;for(var p=!1,v=0,g={};Math.min(Math.abs(f),Math.abs(h))<l&&v<e;)if(c=d(u+=r),f=~~c[0],h=~~c[1],!(!f&&!h||g["".concat(f,"-").concat(h)])&&(t.attr({x:a+f,y:o+h}),f+h<0&&t.attr("textAlign","right"),v++,n.hasGap(t.getCanvasBBox()))){n.fillGap(t.getCanvasBBox()),p=!0,g["".concat(f,"-").concat(h)]=!0;break}return p}function Prt(t,n,e,r){var i=t.getCanvasBBox(),a=i.width,o=i.height,s={x:n,y:e,textAlign:"center"};switch(r){case 0:s.y-=o+1,s.x+=1,s.textAlign="left";break;case 1:s.y-=o+1,s.x-=1,s.textAlign="right";break;case 2:s.y+=o+1,s.x-=1,s.textAlign="right";break;case 3:s.y+=o+1,s.x+=1,s.textAlign="left";break;case 5:s.y-=o*2+2;break;case 6:s.y+=o*2+2;break;case 7:s.x+=a+1,s.textAlign="left";break;case 8:s.x-=a+1,s.textAlign="right";break}return t.attr(s),t.getCanvasBBox()}function krt(t,n,e,r){var i=new g3;$(n,function(a){var o=a.find(function(s){return s.get("type")==="text"});Crt(o,i)||a.remove(!0)}),i.destroy()}function _rt(t,n,e,r){var i=new g3;$(n,function(a){for(var o=a.find(function(d){return d.get("type")==="text"}),s=o.attr(),l=s.x,c=s.y,u=!1,f=0;f<=8;f++){var h=Prt(o,l,c,f);if(i.hasGap(h)){i.fillGap(h),u=!0;break}}u||a.remove(!0)}),i.destroy()}function Lrt(t,n){return(t[0]||0)*(n[0]||0)+(t[1]||0)*(n[1]||0)+(t[2]||0)*(n[2]||0)}function iP(t){if(t.length>4)return[];var n=function(i,a){return[a.x-i.x,a.y-i.y]},e=n(t[0],t[1]),r=n(t[1],t[2]);return[e,r]}function Pp(t,n,e){n===void 0&&(n=0),e===void 0&&(e={x:0,y:0});var r=t.x,i=t.y;return{x:(r-e.x)*Math.cos(-n)+(i-e.y)*Math.sin(-n)+e.x,y:(e.x-r)*Math.sin(-n)+(i-e.y)*Math.cos(-n)+e.y}}function aP(t){var n=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}],e=t.rotation;return e?[Pp(n[0],e,n[0]),Pp(n[1],e,n[0]),Pp(n[2],e,n[0]),Pp(n[3],e,n[0])]:n}function oP(t,n){if(t.length>4)return{min:0,max:0};var e=[];return t.forEach(function(r){e.push(Lrt([r.x,r.y],n))}),{min:Math.min.apply(Math,X([],R(e),!1)),max:Math.max.apply(Math,X([],R(e),!1))}}function Irt(t,n){return t.max>n.min&&t.min<n.max}function Frt(t){return typeof t=="number"&&!Number.isNaN(t)&&t!==1/0&&t!==-1/0}function sP(t){return["x","y","width","height"].every(function(n){return Frt(t[n])})}function Drt(t,n,e){return e===void 0&&(e=0),!(n.x>t.x+t.width+e||n.x+n.width<t.x-e||n.y>t.y+t.height+e||n.y+n.height<t.y-e)}function Rrt(t,n,e){if(e===void 0&&(e=0),!sP(t)||!sP(n))return!1;if(!t.rotation&&!n.rotation)return Drt(t,n,e);for(var r=aP(t),i=aP(n),a=iP(r).concat(iP(i)),o=0;o<a.length;o++){var s=a[o],l=oP(r,s),c=oP(i,s);if(!Irt(l,c))return!1}return!0}var Brt=function(){function t(n){var e=this;this.queue=[],this.worker=new Worker(n),this.worker.onmessage=function(r){var i;(i=e.queue.shift())===null||i===void 0||i.resolve(r)},this.worker.onmessageerror=function(r){var i;console.warn("[AntV G2] Web worker is not available"),(i=e.queue.shift())===null||i===void 0||i.reject(r)}}return t.prototype.post=function(n,e){var r=this;return new Promise(function(i,a){r.queue.push({resolve:i,reject:a});try{r.worker.postMessage(n)}catch{console.warn("[AntV G2] Web worker is not available"),ut(e)&&e()}})},t.prototype.destroy=function(){this.worker.terminate()},t}();function Nrt(t){if(!(typeof window>"u")){var n;try{n=new Blob([t.toString()],{type:"application/javascript"})}catch{n=new window.BlobBuilder,n.append(t.toString()),n=n.getBlob()}return new Brt(URL.createObjectURL(n))}}var $rt=function(t){function n(){function c(x,b){return(x[0]||0)*(b[0]||0)+(x[1]||0)*(b[1]||0)+(x[2]||0)*(b[2]||0)}function u(x){if(x.length>4)return[];var b=function(O,M){return[M.x-O.x,M.y-O.y]},w=b(x[0],x[1]),S=b(x[1],x[2]);return[w,S]}function f(x,b,w){b===void 0&&(b=0),w===void 0&&(w={x:0,y:0});var S=x.x,O=x.y;return{x:(S-w.x)*Math.cos(-b)+(O-w.y)*Math.sin(-b)+w.x,y:(w.x-S)*Math.sin(-b)+(O-w.y)*Math.cos(-b)+w.y}}function h(x){var b=[{x:x.x,y:x.y},{x:x.x+x.width,y:x.y},{x:x.x+x.width,y:x.y+x.height},{x:x.x,y:x.y+x.height}],w=x.rotation;return w?[f(b[0],w,b[0]),f(b[1],w,b[0]),f(b[2],w,b[0]),f(b[3],w,b[0])]:b}function d(x,b){if(x.length>4)return{min:0,max:0};var w=[];return x.forEach(function(S){w.push(c([S.x,S.y],b))}),{min:Math.min.apply(null,w),max:Math.max.apply(null,w)}}function p(x,b){return x.max>b.min&&x.min<b.max}function v(x){return typeof x=="number"&&!Number.isNaN(x)&&x!==1/0&&x!==-1/0}function g(x){return["x","y","width","height"].every(function(b){return v(x[b])})}function y(x,b,w){return w===void 0&&(w=0),!(b.x>x.x+x.width+w||b.x+b.width<x.x-w||b.y>x.y+x.height+w||b.y+b.height<x.y-w)}function m(x,b,w){if(w===void 0&&(w=0),!g(x)||!g(b))return!1;if(!x.rotation&&!b.rotation)return y(x,b,w);for(var S=h(x),O=h(b),M=u(S).concat(u(O)),A=0;A<M.length;A++){var T=M[A],C=d(S,T),P=d(O,T);if(!p(C,P))return!1}return!0}return{intersect:m}}var e=n().intersect;function r(c){for(var u=c.slice(),f=0;f<u.length;f++){var h=u[f];if(h.visible)for(var d=f+1;d<u.length;d++){var p=u[d];h!==p&&p.visible&&e(h,p)&&(p.visible=!1)}}return u}var i={"hide-overlap":r};try{var a=JSON.parse(t.data);if(!a||!a.type||!i[a.type])return;var o=a.type,s=a.items,l=i[o](s);self.postMessage(l)}catch(c){throw c}},jrt=`
   self.onmessage = `.concat($rt.toString(),`
`),L1=function(t){for(var n=t.slice(),e=0;e<n.length;e++){var r=n[e];if(r.visible)for(var i=e+1;i<n.length;i++){var a=n[i];r!==a&&a.visible&&Rrt(r,a)&&(a.visible=!1)}}return n},I1=new Map,lP=Nrt(jrt);function zrt(t,n,e,r){return Ri(this,void 0,void 0,function(){var i,a,o,s,l,c;return Bi(this,function(u){switch(u.label){case 0:return i=n.map(function(f,h){return E(E({},DB(f,t[h],z(t[h],"background.padding"))),{visible:!0})}),a=JSON.stringify(i),o=function(f){return I1.set(a,f),$(f,function(h,d){var p=h.visible,v=n[d];p?v==null||v.show():v==null||v.hide()}),f},I1.get(a)?(o(I1.get(a)),[3,7]):[3,1];case 1:if(!lP)return[3,6];u.label=2;case 2:return u.trys.push([2,4,,5]),s=JSON.stringify({type:"hide-overlap",items:i}),[4,lP.post(s,function(){return o(L1(i))})];case 3:return l=u.sent(),o(Array.isArray(l.data)?l.data:[]),[3,5];case 4:return c=u.sent(),console.error(c),o(L1(i)),[3,5];case 5:return[3,7];case 6:o(L1(i)),u.label=7;case 7:return[2]}})})}var cP={"#5B8FF9":!0},Grt=function(t){var n=No.toRGB(t).toUpperCase();if(cP[n])return cP[n];var e=R(No.rgb2arr(n),3),r=e[0],i=e[1],a=e[2],o=(r*299+i*587+a*114)/1e3<128;return o};function Yrt(t,n,e){if(e.length!==0){var r=e[0].get("element"),i=r.geometry.theme,a=i.labels||{},o=a.fillColorLight,s=a.fillColorDark;e.forEach(function(l,c){var u=n[c],f=u.find(function(y){return y.get("type")==="text"}),h=ar.fromObject(l.getBBox()),d=ar.fromObject(f.getCanvasBBox()),p=!h.contains(d),v=l.attr("fill"),g=Grt(v);p?f.attr(i.overflowLabels.style):g?o&&f.attr("fill",o):s&&f.attr("fill",s)})}}function Wrt(t,n,e){var r=t.coordinate,i=qo(n),a=ar.fromObject(i.getCanvasBBox()),o=ar.fromObject(e.getBBox());return r.isTransposed?o.height>=a.height:o.width>=a.width}function Vrt(t,n,e){var r=!!t.getAdjust("stack");return r||n.every(function(i,a){var o=e[a];return Wrt(t,i,o)})}function Hrt(t,n,e){var r=t.coordinate,i=ar.fromObject(e.getBBox()),a=qo(n);r.isTransposed?a.attr({x:i.minX+i.width/2,textAlign:"center"}):a.attr({y:i.minY+i.height/2,textBaseline:"middle"})}function Xrt(t,n,e){var r;if(e.length!==0){var i=(r=e[0])===null||r===void 0?void 0:r.get("element"),a=i==null?void 0:i.geometry;if(!(!a||a.type!=="interval")){var o=Vrt(a,n,e);o&&e.forEach(function(s,l){var c=n[l];Hrt(a,c,s)})}}}function Urt(t){var n=500,e=[],r=Math.max(Math.floor(t.length/n),1);return $(t,function(i,a){a%r===0?e.push(i):i.set("visible",!1)}),e}function qrt(t,n,e){var r;if(e.length!==0){var i=(r=e[0])===null||r===void 0?void 0:r.get("element"),a=i==null?void 0:i.geometry;if(!(!a||a.type!=="interval")){var o=Urt(n),s=R(a.getXYFields(),1),l=s[0],c=[],u=[],f=Gr(o,function(g){return g.get("data")[l]}),h=il(Ae(o,function(g){return g.get("data")[l]})),d;o.forEach(function(g){g.set("visible",!0)});var p=function(g){g&&(g.length&&u.push(g.pop()),u.push.apply(u,X([],R(g),!1)))};for(mn(h)>0&&(d=h.shift(),p(f[d])),mn(h)>0&&(d=h.pop(),p(f[d])),$(h.reverse(),function(g){p(f[g])});u.length>0;){var v=u.shift();v.get("visible")&&(Qtt(v,c)?v.set("visible",!1):c.push(v))}}}}function Zrt(t,n){var e=t.getXYFields()[1],r=[],i=n.sort(function(a,o){return a.get("data")[e]-a.get("data")[e]});return i.length>0&&r.push(i.shift()),i.length>0&&r.push(i.pop()),r.push.apply(r,X([],R(i),!1)),r}function y3(t,n,e){return t.some(function(r){return e(r,n)})}function Krt(t,n,e){e===void 0&&(e=0);var r=Math.max(0,Math.min(t.x+t.width+e,n.x+n.width+e)-Math.max(t.x-e,n.x-e)),i=Math.max(0,Math.min(t.y+t.height+e,n.y+n.height+e)-Math.max(t.y-e,n.y-e));return r*i}function uP(t,n){return y3(t,n,function(e,r){var i=qo(e),a=qo(r);return Krt(i.getCanvasBBox(),a.getCanvasBBox(),2)>0})}function Qrt(t,n,e,r,i){var a,o;if(e.length!==0){var s=(a=e[0])===null||a===void 0?void 0:a.get("element"),l=s==null?void 0:s.geometry;if(!(!l||l.type!=="point")){var c=R(l.getXYFields(),2),u=c[0],f=c[1],h=Gr(n,function(v){return v.get("data")[u]}),d=[],p=i&&i.offset||((o=t[0])===null||o===void 0?void 0:o.offset)||12;Ae(Su(h).reverse(),function(v){for(var g=Zrt(l,h[v]);g.length;){var y=g.shift(),m=qo(y);if(y3(d,y,function(w,S){return w.get("data")[u]===S.get("data")[u]&&w.get("data")[f]===S.get("data")[f]})){m.set("visible",!1);continue}var x=uP(d,y),b=!1;if(x&&(m.attr("y",m.attr("y")+2*p),b=uP(d,y)),b){m.set("visible",!1);continue}d.push(y)}})}}}function Jrt(t,n){var e=t.getXYFields()[1],r=[],i=n.sort(function(a,o){return a.get("data")[e]-a.get("data")[e]});return i.length>0&&r.push(i.shift()),i.length>0&&r.push(i.pop()),r.push.apply(r,X([],R(i),!1)),r}function m3(t,n,e){return t.some(function(r){return e(r,n)})}function tit(t,n,e){e===void 0&&(e=0);var r=Math.max(0,Math.min(t.x+t.width+e,n.x+n.width+e)-Math.max(t.x-e,n.x-e)),i=Math.max(0,Math.min(t.y+t.height+e,n.y+n.height+e)-Math.max(t.y-e,n.y-e));return r*i}function fP(t,n){return m3(t,n,function(e,r){var i=qo(e),a=qo(r);return tit(i.getCanvasBBox(),a.getCanvasBBox(),2)>0})}function eit(t,n,e,r,i){var a,o;if(e.length!==0){var s=(a=e[0])===null||a===void 0?void 0:a.get("element"),l=s==null?void 0:s.geometry;if(!(!l||["path","line","area"].indexOf(l.type)<0)){var c=R(l.getXYFields(),2),u=c[0],f=c[1],h=Gr(n,function(v){return v.get("data")[u]}),d=[],p=i&&i.offset||((o=t[0])===null||o===void 0?void 0:o.offset)||12;Ae(Su(h).reverse(),function(v){for(var g=Jrt(l,h[v]);g.length;){var y=g.shift(),m=qo(y);if(m3(d,y,function(w,S){return w.get("data")[u]===S.get("data")[u]&&w.get("data")[f]===S.get("data")[f]})){m.set("visible",!1);continue}var x=fP(d,y),b=!1;if(x&&(m.attr("y",m.attr("y")+2*p),b=fP(d,y)),b){m.set("visible",!1);continue}d.push(y)}})}}}var F1;function nit(){return F1||(F1=document.createElement("canvas").getContext("2d")),F1}var kp=Mu(function(t,n){n===void 0&&(n={});var e=n.fontSize,r=n.fontFamily,i=n.fontWeight,a=n.fontStyle,o=n.fontVariant,s=nit();return s.font=[a,o,i,"".concat(e,"px"),r].join(" "),s.measureText(pt(t)?t:"").width},function(t,n){return n===void 0&&(n={}),X([t],R(Qy(n)),!1).join("")}),rit=function(t,n,e){var r=16,i=kp("...",e),a;pt(t)?a=t:a=dd(t);var o=n,s=[],l,c;if(kp(t,e)<=n)return t;for(;l=a.substr(0,r),c=kp(l,e),!(c+i>o&&c>o);)if(s.push(l),o-=c,a=a.substr(r),!a)return s.join("");for(;l=a.substr(0,1),c=kp(l,e),!(c+i>o);)if(s.push(l),o-=c,a=a.substr(1),!a)return s.join("");return"".concat(s.join(""),"...")};function iit(t,n,e,r,i){if(!(n.length<=0)){var a=(i==null?void 0:i.direction)||["top","right","bottom","left"],o=(i==null?void 0:i.action)||"translate",s=(i==null?void 0:i.margin)||0,l=n[0].get("coordinate");if(l){var c=_J(l,s),u=c.minX,f=c.minY,h=c.maxX,d=c.maxY;$(n,function(p){var v=p.getCanvasBBox(),g=v.minX,y=v.minY,m=v.maxX,x=v.maxY,b=v.x,w=v.y,S=v.width,O=v.height,M=b,A=w;if(a.indexOf("left")>=0&&(g<u||m<u)&&(M=u),a.indexOf("top")>=0&&(y<f||x<f)&&(A=f),a.indexOf("right")>=0&&(g>h?M=h-S:m>h&&(M=M-(m-h))),a.indexOf("bottom")>=0&&(y>d?A=d-O:x>d&&(A=A-(x-d))),M!==b||A!==w){var T=M-b;if(o==="translate")Sd(p,T,A-w);else if(o==="ellipsis"){var C=p.findAll(function(P){return P.get("type")==="text"});C.forEach(function(P){var _=iS(P.attr(),["fontSize","fontFamily","fontWeight","fontStyle","fontVariant"]),k=P.getCanvasBBox(),I=rit(P.attr("text"),k.width-Math.abs(T),_);P.attr("text",I)})}else p.hide()}})}}}function ait(t,n,e){var r={fillOpacity:J(t.attr("fillOpacity"))?1:t.attr("fillOpacity"),strokeOpacity:J(t.attr("strokeOpacity"))?1:t.attr("strokeOpacity"),opacity:J(t.attr("opacity"))?1:t.attr("opacity")};t.attr({fillOpacity:0,strokeOpacity:0,opacity:0}),t.animate(r,n)}function oit(t,n,e){var r={fillOpacity:0,strokeOpacity:0,opacity:0},i=n.easing,a=n.duration,o=n.delay;t.animate(r,a,i,function(){t.remove(!0)},o)}function sit(t,n,e){var r,i=R(n,2),a=i[0],o=i[1];return t.applyToMatrix([a,o,1]),e==="x"?(t.setMatrix(sn(t.getMatrix(),[["t",-a,-o],["s",.01,1],["t",a,o]])),r=sn(t.getMatrix(),[["t",-a,-o],["s",100,1],["t",a,o]])):e==="y"?(t.setMatrix(sn(t.getMatrix(),[["t",-a,-o],["s",1,.01],["t",a,o]])),r=sn(t.getMatrix(),[["t",-a,-o],["s",1,100],["t",a,o]])):e==="xy"&&(t.setMatrix(sn(t.getMatrix(),[["t",-a,-o],["s",.01,.01],["t",a,o]])),r=sn(t.getMatrix(),[["t",-a,-o],["s",100,100],["t",a,o]])),r}function lO(t,n,e,r,i){var a=e.start,o=e.end,s=e.getWidth(),l=e.getHeight(),c,u;i==="y"?(c=a.x+s/2,u=r.y<a.y?r.y:a.y):i==="x"?(c=r.x>a.x?r.x:a.x,u=a.y+l/2):i==="xy"&&(e.isPolar?(c=e.getCenter().x,u=e.getCenter().y):(c=(a.x+o.x)/2,u=(a.y+o.y)/2));var f=sit(t,[c,u],i);t.animate({matrix:f},n)}function lit(t,n,e){var r=e.coordinate,i=e.minYPoint;lO(t,n,r,i,"x")}function cit(t,n,e){var r=e.coordinate,i=e.minYPoint;lO(t,n,r,i,"y")}function uit(t,n,e){var r=e.coordinate,i=e.minYPoint;lO(t,n,r,i,"xy")}function fit(t,n,e){var r=t.getTotalLength();t.attr("lineDash",[r]),t.animate(function(i){return{lineDashOffset:(1-i)*r}},n)}function hit(t,n,e){var r=e.toAttrs,i=r.x,a=r.y;delete r.x,delete r.y,t.attr(r),t.animate({x:i,y:a},n)}function dit(t,n,e){var r=t.getBBox(),i=t.get("origin").mappingData,a=i.points,o=a[0].y-a[1].y>0?r.maxX:r.minX,s=(r.minY+r.maxY)/2;t.applyToMatrix([o,s,1]);var l=sn(t.getMatrix(),[["t",-o,-s],["s",.01,1],["t",o,s]]);t.setMatrix(l),t.animate({matrix:sn(t.getMatrix(),[["t",-o,-s],["s",100,1],["t",o,s]])},n)}function pit(t,n,e){var r=t.getBBox(),i=t.get("origin").mappingData,a=(r.minX+r.maxX)/2,o=i.points,s=o[0].y-o[1].y<=0?r.maxY:r.minY;t.applyToMatrix([a,s,1]);var l=sn(t.getMatrix(),[["t",-a,-s],["s",1,.01],["t",a,s]]);t.setMatrix(l),t.animate({matrix:sn(t.getMatrix(),[["t",-a,-s],["s",1,100],["t",a,s]])},n)}function hP(t,n){var e,r=Eg(t,n),i=r.startAngle,a=r.endAngle;return!Cn(i,-Math.PI*.5)&&i<-Math.PI*.5&&(i+=Math.PI*2),!Cn(a,-Math.PI*.5)&&a<-Math.PI*.5&&(a+=Math.PI*2),n[5]===0&&(e=R([a,i],2),i=e[0],a=e[1]),Cn(i,Math.PI*1.5)&&(i=Math.PI*-.5),Cn(a,Math.PI*-.5)&&!Cn(i,a)&&(a=Math.PI*1.5),{startAngle:i,endAngle:a}}function dP(t){var n;return t[0]==="M"||t[0]==="L"?n=[t[1],t[2]]:(t[0]==="a"||t[0]==="A"||t[0]==="C")&&(n=[t[t.length-2],t[t.length-1]]),n}function pP(t){var n,e,r,i=t.filter(function(x){return x[0]==="A"||x[0]==="a"});if(i.length===0)return{startAngle:0,endAngle:0,radius:0,innerRadius:0};var a=i[0],o=i.length>1?i[1]:i[0],s=t.indexOf(a),l=t.indexOf(o),c=dP(t[s-1]),u=dP(t[l-1]),f=hP(c,a),h=f.startAngle,d=f.endAngle,p=hP(u,o),v=p.startAngle,g=p.endAngle;Cn(h,v)&&Cn(d,g)?(e=h,r=d):(e=Math.min(h,v),r=Math.max(d,g));var y=a[1],m=i[i.length-1][1];return y<m?(n=R([m,y],2),y=n[0],m=n[1]):y===m&&(m=0),{startAngle:e,endAngle:r,radius:y,innerRadius:m}}function vit(t,n,e){var r=e.toAttrs,i=e.coordinate,a=r.path||[],o=a.map(function(m){return m[0]});if(!(a.length<1)){var s=pP(a),l=s.startAngle,c=s.endAngle,u=s.radius,f=s.innerRadius,h=pP(t.attr("path")),d=h.startAngle,p=h.endAngle,v=i.getCenter(),g=l-d,y=c-p;if(g===0&&y===0){t.attr("path",a);return}t.animate(function(m){var x=d+m*g,b=p+m*y;return E(E({},r),{path:Ne(o,["M","A","A","Z"])?J5(v.x,v.y,u,x,b):$o(v.x,v.y,u,x,b,f)})},E(E({},n),{callback:function(){t.attr("path",a),ut(n.callback)&&n.callback()}}))}}function git(t,n,e){var r=$S(e.coordinate,20),i=r.type,a=r.startState,o=r.endState,s=t.setClip({type:i,attrs:a});e.toAttrs&&t.attr(e.toAttrs),s.animate(o,E(E({},n),{callback:function(){t&&!t.get("destroyed")&&t.set("clipShape",null),s.remove(!0),ut(n.callback)&&n.callback()}}))}function cO(t,n,e){if(t.isGroup())$(t.getChildren(),function(s){cO(s,n,e)});else{var r=t.getBBox(),i=(r.minX+r.maxX)/2,a=(r.minY+r.maxY)/2;if(t.applyToMatrix([i,a,1]),e==="zoomIn"){var o=sn(t.getMatrix(),[["t",-i,-a],["s",.01,.01],["t",i,a]]);t.setMatrix(o),t.animate({matrix:sn(t.getMatrix(),[["t",-i,-a],["s",100,100],["t",i,a]])},n)}else t.animate({matrix:sn(t.getMatrix(),[["t",-i,-a],["s",.01,.01],["t",i,a]])},E(E({},n),{callback:function(){t.remove(!0),ut(n.callback)&&n.callback()}}))}}function yit(t,n,e){cO(t,n,"zoomIn")}function mit(t,n,e){cO(t,n,"zoomOut")}function Qa(t){return[at.TOP,at.BOTTOM].includes(t)?{offsetX:0,offsetY:t===at.TOP?-8:8,style:{textAlign:"center",textBaseline:t===at.TOP?"bottom":"top"}}:[at.LEFT,at.RIGHT].includes(t)?{offsetX:t===at.LEFT?-8:8,offsetY:0,style:{textAlign:t===at.LEFT?"right":"left",textBaseline:"middle",rotate:Math.PI/2}}:{}}function D1(t,n,e){return{x:t.x+n*Math.cos(e),y:t.y+n*Math.sin(e)}}var xit=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){return ot({},t.prototype.getDefaultCfg.call(this),{type:"circle",showTitle:!0,title:t.prototype.getDefaultTitleCfg.call(this)})},n.prototype.render=function(){t.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},n.prototype.getRegion=function(e,r){var i=.5,a={x:.5,y:.5},o=Math.PI*2/e,s=-1*Math.PI/2+o*r,l=i/(1+1/Math.sin(o/2)),c=D1(a,i-l,s),u=Math.PI*5/4,f=Math.PI*1/4;return{start:D1(c,l,u),end:D1(c,l,f)}},n.prototype.afterEachView=function(e,r){this.processAxis(e,r)},n.prototype.beforeEachView=function(e,r){},n.prototype.generateFacets=function(e){var r=this,i=this.cfg,a=i.fields,o=i.type,s=R(a,1),l=s[0];if(!l)throw new Error("No `fields` specified!");var c=this.getFieldValues(e,l),u=c.length,f=[];return c.forEach(function(h,d){var p=[{field:l,value:h,values:c}],v=Ln(e,r.getFacetDataFilter(p)),g={type:o,data:v,region:r.getRegion(u,d),columnValue:h,columnField:l,columnIndex:d,columnValuesLength:u,rowValue:null,rowField:null,rowIndex:0,rowValuesLength:1};f.push(g)}),f},n.prototype.getXAxisOption=function(e,r,i,a){return i},n.prototype.getYAxisOption=function(e,r,i,a){return i},n.prototype.renderTitle=function(){var e=this;$(this.facets,function(r){var i=r.columnValue,a=r.view,o=z(e.cfg.title,"formatter"),s=ot({position:["50%","0%"],content:o?o(i):i},Qa(at.TOP),e.cfg.title);a.annotation().text(s)})},n}(Pu),bit=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){return ot({},t.prototype.getDefaultCfg.call(this),{type:"list",cols:null,showTitle:!0,title:t.prototype.getDefaultTitleCfg.call(this)})},n.prototype.render=function(){t.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},n.prototype.afterEachView=function(e,r){this.processAxis(e,r)},n.prototype.beforeEachView=function(e,r){},n.prototype.generateFacets=function(e){var r=this,i=this.cfg.fields,a=this.cfg.cols,o=R(i,1),s=o[0];if(!s)throw new Error("No `fields` specified!");var l=this.getFieldValues(e,s),c=l.length;a=a||c;var u=this.getPageCount(c,a),f=[];return l.forEach(function(h,d){var p=r.getRowCol(d,a),v=p.row,g=p.col,y=[{field:s,value:h,values:l}],m=Ln(e,r.getFacetDataFilter(y)),x={type:r.cfg.type,data:m,region:r.getRegion(u,a,g,v),columnValue:h,rowValue:h,columnField:s,rowField:null,columnIndex:g,rowIndex:v,columnValuesLength:a,rowValuesLength:u,total:c};f.push(x)}),f},n.prototype.getXAxisOption=function(e,r,i,a){return a.rowIndex!==a.rowValuesLength-1&&a.columnValuesLength*a.rowIndex+a.columnIndex+1+a.columnValuesLength<=a.total?E(E({},i),{label:null,title:null}):i},n.prototype.getYAxisOption=function(e,r,i,a){return a.columnIndex!==0?E(E({},i),{title:null,label:null}):i},n.prototype.renderTitle=function(){var e=this;$(this.facets,function(r){var i=r.columnValue,a=r.view,o=z(e.cfg.title,"formatter"),s=ot({position:["50%","0%"],content:o?o(i):i},Qa(at.TOP),e.cfg.title);a.annotation().text(s)})},n.prototype.getPageCount=function(e,r){return Math.floor((e+r-1)/r)},n.prototype.getRowCol=function(e,r){var i=Math.floor(e/r),a=e%r;return{row:i,col:a}},n}(Pu),wit=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){return ot({},t.prototype.getDefaultCfg.call(this),{type:"matrix",showTitle:!1,columnTitle:E({},t.prototype.getDefaultTitleCfg.call(this)),rowTitle:E({},t.prototype.getDefaultTitleCfg.call(this))})},n.prototype.render=function(){t.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},n.prototype.afterEachView=function(e,r){this.processAxis(e,r)},n.prototype.beforeEachView=function(e,r){},n.prototype.generateFacets=function(e){for(var r=this.cfg,i=r.fields,a=r.type,o=i.length,s=o,l=[],c=0;c<s;c++)for(var u=i[c],f=0;f<o;f++){var h=i[f],d={type:a,data:e,region:this.getRegion(o,s,c,f),columnValue:u,rowValue:h,columnField:u,rowField:h,columnIndex:c,rowIndex:f,columnValuesLength:s,rowValuesLength:o};l.push(d)}return l},n.prototype.getXAxisOption=function(e,r,i,a){return a.rowIndex!==a.rowValuesLength-1?E(E({},i),{label:null,title:null}):i},n.prototype.getYAxisOption=function(e,r,i,a){return a.columnIndex!==0?E(E({},i),{title:null,label:null}):i},n.prototype.renderTitle=function(){var e=this;$(this.facets,function(r,i){var a=r.columnIndex,o=r.rowIndex,s=r.columnValuesLength;r.rowValuesLength;var l=r.columnValue,c=r.rowValue,u=r.view;if(o===0){var f=z(e.cfg.columnTitle,"formatter"),h=ot({position:["50%","0%"],content:f?f(l):l},Qa(at.TOP),e.cfg.columnTitle);u.annotation().text(h)}if(a===s-1){var f=z(e.cfg.rowTitle,"formatter"),h=ot({position:["100%","50%"],content:f?f(c):c},Qa(at.RIGHT),e.cfg.rowTitle);u.annotation().text(h)}})},n}(Pu),Sit=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){return ot({},t.prototype.getDefaultCfg.call(this),{type:"mirror",showTitle:!0,title:t.prototype.getDefaultTitleCfg.call(this),transpose:!1})},n.prototype.render=function(){t.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},n.prototype.beforeEachView=function(e,r){this.cfg.transpose?r.columnIndex%2===0?e.coordinate().transpose().reflect("x"):e.coordinate().transpose():r.rowIndex%2!==0&&e.coordinate().reflect("y")},n.prototype.afterEachView=function(e,r){this.processAxis(e,r)},n.prototype.generateFacets=function(e){var r=this,i=R(this.cfg.fields,1),a=i[0],o=[],s=1,l=1,c=[""],u=[""],f,h;return this.cfg.transpose?(f=a,c=this.getFieldValues(e,f).slice(0,2),s=c.length):(h=a,u=this.getFieldValues(e,h).slice(0,2),l=u.length),c.forEach(function(d,p){u.forEach(function(v,g){var y=[{field:f,value:d,values:c},{field:h,value:v,values:u}],m=Ln(e,r.getFacetDataFilter(y)),x={type:r.cfg.type,data:m,region:r.getRegion(l,s,p,g),columnValue:d,rowValue:v,columnField:f,rowField:h,columnIndex:p,rowIndex:g,columnValuesLength:s,rowValuesLength:l};o.push(x)})}),o},n.prototype.getXAxisOption=function(e,r,i,a){return a.columnIndex===1||a.rowIndex===1?E(E({},i),{label:null,title:null}):i},n.prototype.getYAxisOption=function(e,r,i,a){return i},n.prototype.renderTitle=function(){var e=this;$(this.facets,function(r,i){var a=r.columnValue,o=r.rowValue,s=r.view,l=z(e.cfg.title,"formatter");if(e.cfg.transpose){var c=ot({position:["50%","0%"],content:l?l(a):a},Qa(at.TOP),e.cfg.title);s.annotation().text(c)}else{var c=ot({position:["100%","50%"],content:l?l(o):o},Qa(at.RIGHT),e.cfg.title);s.annotation().text(c)}})},n}(Pu),Oit=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.afterEachView=function(e,r){this.processAxis(e,r)},n.prototype.beforeEachView=function(e,r){},n.prototype.getDefaultCfg=function(){return ot({},t.prototype.getDefaultCfg.call(this),{type:"rect",columnTitle:E({},t.prototype.getDefaultTitleCfg.call(this)),rowTitle:E({},t.prototype.getDefaultTitleCfg.call(this))})},n.prototype.render=function(){t.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},n.prototype.generateFacets=function(e){var r=this,i=R(this.cfg.fields,2),a=i[0],o=i[1],s=[],l=1,c=1,u=[""],f=[""];return a&&(u=this.getFieldValues(e,a),l=u.length),o&&(f=this.getFieldValues(e,o),c=f.length),u.forEach(function(h,d){f.forEach(function(p,v){var g=[{field:a,value:h,values:u},{field:o,value:p,values:f}],y=Ln(e,r.getFacetDataFilter(g)),m={type:r.cfg.type,data:y,region:r.getRegion(c,l,d,v),columnValue:h,rowValue:p,columnField:a,rowField:o,columnIndex:d,rowIndex:v,columnValuesLength:l,rowValuesLength:c};s.push(m)})}),s},n.prototype.renderTitle=function(){var e=this;$(this.facets,function(r,i){var a=r.columnIndex,o=r.rowIndex,s=r.columnValuesLength,l=r.columnValue,c=r.rowValue,u=r.view;if(o===0){var f=z(e.cfg.columnTitle,"formatter"),h=ot({position:["50%","0%"],content:f?f(l):l},Qa(at.TOP),e.cfg.columnTitle);u.annotation().text(h)}if(a===s-1){var f=z(e.cfg.rowTitle,"formatter"),h=ot({position:["100%","50%"],content:f?f(c):c},Qa(at.RIGHT),e.cfg.rowTitle);u.annotation().text(h)}})},n.prototype.getXAxisOption=function(e,r,i,a){return a.rowIndex!==a.rowValuesLength-1?E(E({},i),{title:null,label:null}):a.columnIndex!==Math.floor((a.columnValuesLength-1)/2)?E(E({},i),{title:null}):i},n.prototype.getYAxisOption=function(e,r,i,a){return a.columnIndex!==0?E(E({},i),{title:null,label:null}):a.rowIndex!==Math.floor((a.rowValuesLength-1)/2)?E(E({},i),{title:null}):i},n}(Pu),Mit=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.afterChartRender=function(){e.facets&&e.cfg.line&&(e.container.clear(),e.drawLines(e.facets))},e}return n.prototype.afterEachView=function(e,r){this.processAxis(e,r)},n.prototype.beforeEachView=function(e,r){},n.prototype.init=function(){t.prototype.init.call(this),this.view.on(kt.AFTER_RENDER,this.afterChartRender)},n.prototype.getDefaultCfg=function(){return ot({},t.prototype.getDefaultCfg.call(this),{type:"tree",line:{style:{lineWidth:1,stroke:"#ddd"},smooth:!1},showTitle:!0,title:t.prototype.getDefaultTitleCfg.call(this)})},n.prototype.generateFacets=function(e){var r=this.cfg.fields;if(!r.length)throw new Error("Please specify for the fields for rootFacet!");var i=[],a={type:this.cfg.type,data:e,region:null,rowValuesLength:this.getRows(),columnValuesLength:1,rowIndex:0,columnIndex:0,rowField:"",columnField:"",rowValue:"",columnValue:""};return i.push(a),a.children=this.getChildFacets(e,1,i),this.setRegion(i),i},n.prototype.setRegion=function(e){var r=this;this.forceColIndex(e),e.forEach(function(i){i.region=r.getRegion(i.rowValuesLength,i.columnValuesLength,i.columnIndex,i.rowIndex)})},n.prototype.getRegion=function(e,r,i,a){var o=1/r,s=1/e,l={x:o*i,y:s*a},c={x:l.x+o,y:l.y+s*2/3};return{start:l,end:c}},n.prototype.forceColIndex=function(e){var r,i,a=this,o=[],s=0;e.forEach(function(p){a.isLeaf(p)&&(o.push(p),p.columnIndex=s,s++)}),o.forEach(function(p){p.columnValuesLength=o.length});for(var l=this.cfg.fields.length,c=l-1;c>=0;c--){var u=this.getFacetsByLevel(e,c);try{for(var f=(r=void 0,Ct(u)),h=f.next();!h.done;h=f.next()){var d=h.value;this.isLeaf(d)||(d.originColIndex=d.columnIndex,d.columnIndex=this.getRegionIndex(d.children),d.columnValuesLength=o.length)}}catch(p){r={error:p}}finally{try{h&&!h.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}}},n.prototype.getFacetsByLevel=function(e,r){var i=[];return e.forEach(function(a){a.rowIndex===r&&i.push(a)}),i},n.prototype.getRegionIndex=function(e){var r=e[0],i=e[e.length-1];return(i.columnIndex-r.columnIndex)/2+r.columnIndex},n.prototype.isLeaf=function(e){return!e.children||!e.children.length},n.prototype.getRows=function(){return this.cfg.fields.length+1},n.prototype.getChildFacets=function(e,r,i){var a=this,o=this.cfg.fields,s=o.length;if(!(s<r)){var l=[],c=o[r-1],u=this.getFieldValues(e,c);return u.forEach(function(f,h){var d=[{field:c,value:f,values:u}],p=e.filter(a.getFacetDataFilter(d));if(p.length){var v={type:a.cfg.type,data:p,region:null,columnValue:f,rowValue:"",columnField:c,rowField:"",columnIndex:h,rowValuesLength:a.getRows(),columnValuesLength:1,rowIndex:r,children:a.getChildFacets(p,r+1,i)};l.push(v),i.push(v)}}),l}},n.prototype.render=function(){t.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},n.prototype.renderTitle=function(){var e=this;$(this.facets,function(r){var i=r.columnValue,a=r.view,o=z(e.cfg.title,"formatter"),s=ot({position:["50%","0%"],content:o?o(i):i},Qa(at.TOP),e.cfg.title);a.annotation().text(s)})},n.prototype.drawLines=function(e){var r=this;e.forEach(function(i){if(!r.isLeaf(i)){var a=i.children;r.addFacetLines(i,a)}})},n.prototype.addFacetLines=function(e,r){var i=this,a=e.view,o=a.coordinateBBox,s={x:o.x+o.width/2,y:o.y+o.height};r.forEach(function(l){var c=l.view.coordinateBBox,u={x:c.bl.x+(c.tr.x-c.bl.x)/2,y:c.tr.y},f={x:s.x,y:s.y+(u.y-s.y)/2},h={x:u.x,y:f.y};i.drawLine([s,f,h,u])})},n.prototype.getPath=function(e){var r=[],i=this.cfg.line.smooth;return i?(r.push(["M",e[0].x,e[0].y]),r.push(["C",e[1].x,e[1].y,e[2].x,e[2].y,e[3].x,e[3].y])):e.forEach(function(a,o){o===0?r.push(["M",a.x,a.y]):r.push(["L",a.x,a.y])}),r},n.prototype.drawLine=function(e){var r=this.getPath(e),i=this.cfg.line.style;this.container.addShape("path",{attrs:Jt({path:r},i)})},n.prototype.getXAxisOption=function(e,r,i,a){return a.rowIndex!==a.rowValuesLength-1?E(E({},i),{title:null,label:null}):i},n.prototype.getYAxisOption=function(e,r,i,a){return a.originColIndex!==0&&a.columnIndex!==0?E(E({},i),{title:null,label:null}):i},n}(Pu);function vP(t){var n=X([],R(t),!1);n.sort(function(r,i){return r-i});var e=n.length;return e===0?0:e%2===1?n[(e-1)/2]:(n[e/2]+n[e/2-1])/2}function Ait(t){var n=Hn(t,function(e,r){return e+=isNaN(r)||!bt(r)?0:r},0);return t.length===0?0:n/t.length}function _p(t,n){if(!n)return null;var e;switch(t){case"start":return 0;case"center":return .5;case"end":return 1;case"median":{e=n.isCategory?vP(n.values.map(function(r,i){return i})):vP(n.values);break}case"mean":{e=n.isCategory?(n.values.length-1)/2:Ait(n.values);break}case"min":e=n.isCategory?0:n[t];break;case"max":e=n.isCategory?n.values.length-1:n[t];break;default:e=t;break}return n.scale(e)}var Lp=["regionFilter","shape"],Eit=function(t){G(n,t);function n(e){var r=t.call(this,e)||this;return r.cache=new Map,r.foregroundContainer=r.view.getLayer(qe.FORE).addGroup(),r.backgroundContainer=r.view.getLayer(qe.BG).addGroup(),r.option=[],r}return Object.defineProperty(n.prototype,"name",{get:function(){return"annotation"},enumerable:!1,configurable:!0}),n.prototype.init=function(){},n.prototype.layout=function(){this.update()},n.prototype.render=function(){},n.prototype.update=function(){var e=this;this.onAfterRender(function(){var i=new Map;$(e.option,function(a){if(Rs(Lp,a.type)){var o=e.updateOrCreate(a);o&&i.set(e.getCacheKey(a),o)}}),e.cache=e.syncCache(i)});var r=new Map;$(this.option,function(i){if(!Rs(Lp,i.type)){var a=e.updateOrCreate(i);a&&r.set(e.getCacheKey(i),a)}}),this.cache=this.syncCache(r)},n.prototype.clear=function(e){e===void 0&&(e=!1),t.prototype.clear.call(this),this.clearComponents(),this.foregroundContainer.clear(),this.backgroundContainer.clear(),e&&(this.option=[])},n.prototype.destroy=function(){this.clear(!0),this.foregroundContainer.remove(!0),this.backgroundContainer.remove(!0)},n.prototype.getComponents=function(){var e=[];return this.cache.forEach(function(r){e.push(r)}),e},n.prototype.clearComponents=function(){this.getComponents().forEach(function(e){e.component.destroy()}),this.cache.clear()},n.prototype.onAfterRender=function(e){var r=!1;this.view.getOptions().animate&&this.view.geometries.forEach(function(i){i.animateOption&&(i.once(Fo.AFTER_DRAW_ANIMATE,function(){e()}),r=!0)}),r||this.view.getRootView().once(kt.AFTER_RENDER,function(){e()})},n.prototype.createAnnotation=function(e){var r=e.type,i=wQ[Cl(r)];if(i){var a=this.getAnnotationTheme(r),o=this.getAnnotationCfg(r,e,a);if(!o)return null;var s=new i(o);return{component:s,layer:this.isTop(o)?qe.FORE:qe.BG,direction:at.NONE,type:gn.ANNOTATION,extra:e}}},n.prototype.annotation=function(e){this.option.push(e)},n.prototype.arc=function(e){return this.annotation(E({type:"arc"},e)),this},n.prototype.image=function(e){return this.annotation(E({type:"image"},e)),this},n.prototype.line=function(e){return this.annotation(E({type:"line"},e)),this},n.prototype.region=function(e){return this.annotation(E({type:"region"},e)),this},n.prototype.text=function(e){return this.annotation(E({type:"text"},e)),this},n.prototype.dataMarker=function(e){return this.annotation(E({type:"dataMarker"},e)),this},n.prototype.dataRegion=function(e){this.annotation(E({type:"dataRegion"},e))},n.prototype.regionFilter=function(e){this.annotation(E({type:"regionFilter"},e))},n.prototype.shape=function(e){this.annotation(E({type:"shape"},e))},n.prototype.html=function(e){this.annotation(E({type:"html"},e))},n.prototype.parsePosition=function(e){var r,i,a=this.view.getXScale(),o=this.view.getScalesByDim("y"),s=ut(e)?e.call(null,a,o):e,l=0,c=0;if(et(s)){var u=R(s,2),f=u[0],h=u[1];if(pt(f)&&f.indexOf("%")!==-1&&!isNaN(f.slice(0,-1)))return this.parsePercentPosition(s);l=_p(f,a),c=_p(h,Object.values(o)[0])}else if(!J(s))try{for(var d=Ct(Su(s)),p=d.next();!p.done;p=d.next()){var v=p.value,g=s[v];v===a.field&&(l=_p(g,a)),o[v]&&(c=_p(g,o[v]))}}catch(y){r={error:y}}finally{try{p&&!p.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}return isNaN(l)||isNaN(c)?null:this.view.getCoordinate().convert({x:l,y:c})},n.prototype.getRegionPoints=function(e,r){var i=this,a=this.view.getXScale(),o=this.view.getScalesByDim("y"),s=Object.values(o)[0],l=a.field,c=this.view.getData(),u=et(e)?e[0]:e[l],f=et(r)?r[0]:r[l],h=[],d;return $(c,function(p,v){if(p[l]===u&&(d=v),v>=d){var g=i.parsePosition([p[l],p[s.field]]);g&&h.push(g)}if(p[l]===f)return!1}),h},n.prototype.parsePercentPosition=function(e){var r=parseFloat(e[0])/100,i=parseFloat(e[1])/100,a=this.view.getCoordinate(),o=a.start,s=a.end,l={x:Math.min(o.x,s.x),y:Math.min(o.y,s.y)},c=a.getWidth()*r+l.x,u=a.getHeight()*i+l.y;return{x:c,y:u}},n.prototype.getCoordinateBBox=function(){var e=this.view.getCoordinate(),r=e.start,i=e.end,a=e.getWidth(),o=e.getHeight(),s={x:Math.min(r.x,i.x),y:Math.min(r.y,i.y)};return{x:s.x,y:s.y,minX:s.x,minY:s.y,maxX:s.x+a,maxY:s.y+o,width:a,height:o}},n.prototype.getAnnotationCfg=function(e,r,i){var a=this,o=this.view.getCoordinate(),s=this.view.getCanvas(),l={};if(J(r))return null;var c=r.start,u=r.end,f=r.position,h=this.parsePosition(c),d=this.parsePosition(u),p=this.parsePosition(f);if(["arc","image","line","region","regionFilter"].includes(e)&&(!h||!d))return null;if(["text","dataMarker","html"].includes(e)&&!p)return null;if(e==="arc"){var v=r;v.start,v.end;var g=vt(v,["start","end"]),y=Yc(o,h),m=Yc(o,d);y>m&&(m=Math.PI*2+m),l=E(E({},g),{center:o.getCenter(),radius:T0(o,h),startAngle:y,endAngle:m})}else if(e==="image"){var x=r;x.start,x.end;var g=vt(x,["start","end"]);l=E(E({},g),{start:h,end:d,src:r.src})}else if(e==="line"){var b=r;b.start,b.end;var g=vt(b,["start","end"]);l=E(E({},g),{start:h,end:d,text:z(r,"text",null)})}else if(e==="region"){var w=r;w.start,w.end;var g=vt(w,["start","end"]);l=E(E({},g),{start:h,end:d})}else if(e==="text"){var S=this.view.getData(),O=r;O.position;var M=O.content,g=vt(O,["position","content"]),A=M;ut(M)&&(A=M(S)),l=E(E(E({},p),g),{content:A})}else if(e==="dataMarker"){var T=r;T.position;var C=T.point,P=T.line,_=T.text,k=T.autoAdjust,I=T.direction,g=vt(T,["position","point","line","text","autoAdjust","direction"]);l=E(E(E({},g),p),{coordinateBBox:this.getCoordinateBBox(),point:C,line:P,text:_,autoAdjust:k,direction:I})}else if(e==="dataRegion"){var L=r,F=L.start,B=L.end,D=L.region,_=L.text,N=L.lineLength,g=vt(L,["start","end","region","text","lineLength"]);l=E(E({},g),{points:this.getRegionPoints(F,B),region:D,text:_,lineLength:N})}else if(e==="regionFilter"){var j=r;j.start,j.end;var Y=j.apply,W=j.color,g=vt(j,["start","end","apply","color"]),V=this.view.geometries,H=[],Q=function(Ft){Ft&&(Ft.isGroup()?Ft.getChildren().forEach(function(ne){return Q(ne)}):H.push(Ft))};$(V,function(Ft){Y?Rs(Y,Ft.type)&&$(Ft.elements,function(ne){Q(ne.shape)}):$(Ft.elements,function(ne){Q(ne.shape)})}),l=E(E({},g),{color:W,shapes:H,start:h,end:d})}else if(e==="shape"){var Z=r,q=Z.render,rt=vt(Z,["render"]),it=function(Wt){if(ut(r.render))return q(Wt,a.view,{parsePosition:a.parsePosition.bind(a)})};l=E(E({},rt),{render:it})}else if(e==="html"){var ft=r,yt=ft.html;ft.position;var rt=vt(ft,["html","position"]),mt=function(Ft){return ut(yt)?yt(Ft,a.view):yt};l=E(E(E({},rt),p),{parent:s.get("el").parentNode,html:mt})}var St=ot({},i,E(E({},l),{top:r.top,style:r.style,offsetX:r.offsetX,offsetY:r.offsetY}));return e!=="html"&&(St.container=this.getComponentContainer(St)),St.animate=this.view.getOptions().animate&&St.animate&&z(r,"animate",St.animate),St.animateOption=ot({},Vc,St.animateOption,r.animateOption),St},n.prototype.isTop=function(e){return z(e,"top",!0)},n.prototype.getComponentContainer=function(e){return this.isTop(e)?this.foregroundContainer:this.backgroundContainer},n.prototype.getAnnotationTheme=function(e){return z(this.view.getTheme(),["components","annotation",e],{})},n.prototype.updateOrCreate=function(e){var r=this.cache.get(this.getCacheKey(e));if(r){var i=e.type,a=this.getAnnotationTheme(i),o=this.getAnnotationCfg(i,e,a);o&&mr(o,["container"]),r.component.update(E(E({},o||{}),{visible:!!o})),Rs(Lp,e.type)&&r.component.render()}else r=this.createAnnotation(e),r&&(r.component.init(),Rs(Lp,e.type)&&r.component.render());return r},n.prototype.syncCache=function(e){var r=this,i=new Map(this.cache);return e.forEach(function(a,o){i.set(o,a)}),i.forEach(function(a,o){Li(r.option,function(s){return o===r.getCacheKey(s)})||(a.component.destroy(),i.delete(o))}),i},n.prototype.getCacheKey=function(e){return e},n}(_u);function gP(t,n){var e=ot({},z(t,["components","axis","common"]),z(t,["components","axis",n]));return z(e,["grid"],{})}function Ip(t,n,e,r){var i=[],a=n.getTicks();return t.isPolar&&a.push({value:1,text:"",tickValue:""}),a.reduce(function(o,s,l){var c=s.value;if(r)i.push({points:[t.convert(e==="y"?{x:0,y:c}:{x:c,y:0}),t.convert(e==="y"?{x:1,y:c}:{x:c,y:1})]});else if(l){var u=o.value,f=(u+c)/2;i.push({points:[t.convert(e==="y"?{x:0,y:f}:{x:f,y:0}),t.convert(e==="y"?{x:1,y:f}:{x:f,y:1})]})}return s},a[0]),i}function R1(t,n,e,r,i){var a=n.values.length,o=[],s=e.getTicks();return s.reduce(function(l,c){var u=l?l.value:c.value,f=c.value,h=(u+f)/2;return i==="x"?o.push({points:[t.convert({x:r?f:h,y:0}),t.convert({x:r?f:h,y:1})]}):o.push({points:Ae(Array(a+1),function(d,p){return t.convert({x:p/a,y:r?f:h})})}),c},s[0]),o}function yP(t,n){var e=z(n,"grid");if(e===null)return!1;var r=z(t,"grid");return!(e===void 0&&r===null)}var fo=["container"],mP=E(E({},Vc),{appear:null}),Tit=function(t){G(n,t);function n(e){var r=t.call(this,e)||this;return r.cache=new Map,r.gridContainer=r.view.getLayer(qe.BG).addGroup(),r.gridForeContainer=r.view.getLayer(qe.FORE).addGroup(),r.axisContainer=r.view.getLayer(qe.BG).addGroup(),r.axisForeContainer=r.view.getLayer(qe.FORE).addGroup(),r}return Object.defineProperty(n.prototype,"name",{get:function(){return"axis"},enumerable:!1,configurable:!0}),n.prototype.init=function(){},n.prototype.render=function(){this.update()},n.prototype.layout=function(){var e=this,r=this.view.getCoordinate();$(this.getComponents(),function(i){var a=i.component,o=i.direction,s=i.type,l=i.extra,c=l.dim,u=l.scale,f=l.alignTick,h;if(s===gn.AXIS)r.isPolar?c==="x"?h=r.isTransposed?xp(r,o):T1(r):c==="y"&&(h=r.isTransposed?T1(r):xp(r,o)):h=xp(r,o);else if(s===gn.GRID)if(r.isPolar){var d=void 0;r.isTransposed?d=c==="x"?R1(r,e.view.getYScales()[0],u,f,c):Ip(r,u,c,f):d=c==="x"?Ip(r,u,c,f):R1(r,e.view.getXScale(),u,f,c),h={items:d,center:e.view.getCoordinate().getCenter()}}else h={items:Ip(r,u,c,f)};a.update(h)})},n.prototype.update=function(){this.option=this.view.getOptions().axes;var e=new Map;this.updateXAxes(e),this.updateYAxes(e);var r=new Map;this.cache.forEach(function(i,a){e.has(a)?r.set(a,i):i.component.destroy()}),this.cache=r},n.prototype.clear=function(){t.prototype.clear.call(this),this.cache.clear(),this.gridContainer.clear(),this.gridForeContainer.clear(),this.axisContainer.clear(),this.axisForeContainer.clear()},n.prototype.destroy=function(){t.prototype.destroy.call(this),this.gridContainer.remove(!0),this.gridForeContainer.remove(!0),this.axisContainer.remove(!0),this.axisForeContainer.remove(!0)},n.prototype.getComponents=function(){var e=[];return this.cache.forEach(function(r){e.push(r)}),e},n.prototype.updateXAxes=function(e){var r=this.view.getXScale();if(!(!r||r.isIdentity)){var i=Og(this.option,r.field);if(i!==!1){var a=wC(i,at.BOTTOM),o=qe.BG,s="x",l=this.view.getCoordinate(),c=this.getId("axis",r.field),u=this.getId("grid",r.field);if(l.isRect){var f=this.cache.get(c);if(f){var h=this.getLineAxisCfg(r,i,a);mr(h,fo),f.component.update(h),e.set(c,f)}else f=this.createLineAxis(r,i,o,a,s),this.cache.set(c,f),e.set(c,f);var d=this.cache.get(u);if(d){var h=this.getLineGridCfg(r,i,a,s);mr(h,fo),d.component.update(h),e.set(u,d)}else d=this.createLineGrid(r,i,o,a,s),d&&(this.cache.set(u,d),e.set(u,d))}else if(l.isPolar){var f=this.cache.get(c);if(f){var h=l.isTransposed?this.getLineAxisCfg(r,i,at.RADIUS):this.getCircleAxisCfg(r,i,a);mr(h,fo),f.component.update(h),e.set(c,f)}else{if(l.isTransposed){if(To(i))return;f=this.createLineAxis(r,i,o,at.RADIUS,s)}else f=this.createCircleAxis(r,i,o,a,s);this.cache.set(c,f),e.set(c,f)}var d=this.cache.get(u);if(d){var h=l.isTransposed?this.getCircleGridCfg(r,i,at.RADIUS,s):this.getLineGridCfg(r,i,at.CIRCLE,s);mr(h,fo),d.component.update(h),e.set(u,d)}else{if(l.isTransposed){if(To(i))return;d=this.createCircleGrid(r,i,o,at.RADIUS,s)}else d=this.createLineGrid(r,i,o,at.CIRCLE,s);d&&(this.cache.set(u,d),e.set(u,d))}}}}},n.prototype.updateYAxes=function(e){var r=this,i=this.view.getYScales();$(i,function(a,o){if(!(!a||a.isIdentity)){var s=a.field,l=Og(r.option,s);if(l!==!1){var c=qe.BG,u="y",f=r.getId("axis",s),h=r.getId("grid",s),d=r.view.getCoordinate();if(d.isRect){var p=wC(l,o===0?at.LEFT:at.RIGHT),v=r.cache.get(f);if(v){var g=r.getLineAxisCfg(a,l,p);mr(g,fo),v.component.update(g),e.set(f,v)}else v=r.createLineAxis(a,l,c,p,u),r.cache.set(f,v),e.set(f,v);var y=r.cache.get(h);if(y){var g=r.getLineGridCfg(a,l,p,u);mr(g,fo),y.component.update(g),e.set(h,y)}else y=r.createLineGrid(a,l,c,p,u),y&&(r.cache.set(h,y),e.set(h,y))}else if(d.isPolar){var v=r.cache.get(f);if(v){var g=d.isTransposed?r.getCircleAxisCfg(a,l,at.CIRCLE):r.getLineAxisCfg(a,l,at.RADIUS);mr(g,fo),v.component.update(g),e.set(f,v)}else{if(d.isTransposed){if(To(l))return;v=r.createCircleAxis(a,l,c,at.CIRCLE,u)}else v=r.createLineAxis(a,l,c,at.RADIUS,u);r.cache.set(f,v),e.set(f,v)}var y=r.cache.get(h);if(y){var g=d.isTransposed?r.getLineGridCfg(a,l,at.CIRCLE,u):r.getCircleGridCfg(a,l,at.RADIUS,u);mr(g,fo),y.component.update(g),e.set(h,y)}else{if(d.isTransposed){if(To(l))return;y=r.createLineGrid(a,l,c,at.CIRCLE,u)}else y=r.createCircleGrid(a,l,c,at.RADIUS,u);y&&(r.cache.set(h,y),e.set(h,y))}}}}})},n.prototype.createLineAxis=function(e,r,i,a,o){var s={component:new bJ(this.getLineAxisCfg(e,r,a)),layer:i,direction:a===at.RADIUS?at.NONE:a,type:gn.AXIS,extra:{dim:o,scale:e}};return s.component.set("field",e.field),s.component.init(),s},n.prototype.createLineGrid=function(e,r,i,a,o){var s=this.getLineGridCfg(e,r,a,o);if(s){var l={component:new SJ(s),layer:i,direction:at.NONE,type:gn.GRID,extra:{dim:o,scale:e,alignTick:z(s,"alignTick",!0)}};return l.component.init(),l}},n.prototype.createCircleAxis=function(e,r,i,a,o){var s={component:new wJ(this.getCircleAxisCfg(e,r,a)),layer:i,direction:a,type:gn.AXIS,extra:{dim:o,scale:e}};return s.component.set("field",e.field),s.component.init(),s},n.prototype.createCircleGrid=function(e,r,i,a,o){var s=this.getCircleGridCfg(e,r,a,o);if(s){var l={component:new OJ(s),layer:i,direction:at.NONE,type:gn.GRID,extra:{dim:o,scale:e,alignTick:z(s,"alignTick",!0)}};return l.component.init(),l}},n.prototype.getLineAxisCfg=function(e,r,i){var a=z(r,["top"])?this.axisForeContainer:this.axisContainer,o=this.view.getCoordinate(),s=xp(o,i),l=SC(e,r),c=bp(this.view.getTheme(),i),u=z(r,["title"])?ot({title:{style:{text:l}}},{title:bC(this.view.getTheme(),i,r.title)},r):r,f=ot(E(E({container:a},s),{ticks:e.getTicks().map(function(x){return{id:"".concat(x.tickValue),name:x.text,value:x.value}}),verticalFactor:o.isPolar?xC(s,o.getCenter())*-1:xC(s,o.getCenter()),theme:c}),c,u),h=this.getAnimateCfg(f),d=h.animate,p=h.animateOption;f.animateOption=p,f.animate=d;var v=rB(s),g=z(f,"verticalLimitLength",v?1/3:1/2);if(g<=1){var y=this.view.getCanvas().get("width"),m=this.view.getCanvas().get("height");f.verticalLimitLength=g*(v?y:m)}return f},n.prototype.getLineGridCfg=function(e,r,i,a){if(yP(bp(this.view.getTheme(),i),r)){var o=gP(this.view.getTheme(),i),s=ot({container:z(r,["top"])?this.gridForeContainer:this.gridContainer},o,z(r,"grid"),this.getAnimateCfg(r));return s.items=Ip(this.view.getCoordinate(),e,a,z(s,"alignTick",!0)),s}},n.prototype.getCircleAxisCfg=function(e,r,i){var a=z(r,["top"])?this.axisForeContainer:this.axisContainer,o=this.view.getCoordinate(),s=e.getTicks().map(function(v){return{id:"".concat(v.tickValue),name:v.text,value:v.value}});!e.isCategory&&Math.abs(o.endAngle-o.startAngle)===Math.PI*2&&s.length&&(s[s.length-1].name="");var l=SC(e,r),c=bp(this.view.getTheme(),at.CIRCLE),u=z(r,["title"])?ot({title:{style:{text:l}}},{title:bC(this.view.getTheme(),i,r.title)},r):r,f=ot(E(E({container:a},T1(this.view.getCoordinate())),{ticks:s,verticalFactor:1,theme:c}),c,u),h=this.getAnimateCfg(f),d=h.animate,p=h.animateOption;return f.animate=d,f.animateOption=p,f},n.prototype.getCircleGridCfg=function(e,r,i,a){if(yP(bp(this.view.getTheme(),i),r)){var o=gP(this.view.getTheme(),at.RADIUS),s=ot({container:z(r,["top"])?this.gridForeContainer:this.gridContainer,center:this.view.getCoordinate().getCenter()},o,z(r,"grid"),this.getAnimateCfg(r)),l=z(s,"alignTick",!0),c=a==="x"?this.view.getYScales()[0]:this.view.getXScale();return s.items=R1(this.view.getCoordinate(),c,e,l,a),s}},n.prototype.getId=function(e,r){var i=this.view.getCoordinate();return"".concat(e,"-").concat(r,"-").concat(i.type)},n.prototype.getAnimateCfg=function(e){return{animate:this.view.getOptions().animate&&z(e,"animate"),animateOption:e&&e.animateOption?ot({},mP,e.animateOption):mP}},n}(_u);function _o(t,n,e){return e===at.TOP?[t.minX+t.width/2-n.width/2,t.minY]:e===at.BOTTOM?[t.minX+t.width/2-n.width/2,t.maxY-n.height]:e===at.LEFT?[t.minX,t.minY+t.height/2-n.height/2]:e===at.RIGHT?[t.maxX-n.width,t.minY+t.height/2-n.height/2]:e===at.TOP_LEFT||e===at.LEFT_TOP?[t.tl.x,t.tl.y]:e===at.TOP_RIGHT||e===at.RIGHT_TOP?[t.tr.x-n.width,t.tr.y]:e===at.BOTTOM_LEFT||e===at.LEFT_BOTTOM?[t.bl.x,t.bl.y-n.height]:e===at.BOTTOM_RIGHT||e===at.RIGHT_BOTTOM?[t.br.x-n.width,t.br.y-n.height]:[0,0]}function xP(t,n){return Dc(t)?t===!1?!1:{}:z(t,[n],t)}function Fp(t){return z(t,"position",at.BOTTOM)}var Cit=function(t){G(n,t);function n(e){var r=t.call(this,e)||this;return r.container=r.view.getLayer(qe.FORE).addGroup(),r}return Object.defineProperty(n.prototype,"name",{get:function(){return"legend"},enumerable:!1,configurable:!0}),n.prototype.init=function(){},n.prototype.render=function(){this.update()},n.prototype.layout=function(){var e=this;this.layoutBBox=this.view.viewBBox,$(this.components,function(r){var i=r.component,a=r.direction,o=P1(a),s=i.get("maxWidthRatio"),l=i.get("maxHeightRatio"),c=e.getCategoryLegendSizeCfg(o,s,l),u=i.get("maxWidth"),f=i.get("maxHeight");i.update({maxWidth:Math.min(c.maxWidth,u||0),maxHeight:Math.min(c.maxHeight,f||0)});var h=i.get("padding"),d=i.getLayoutBBox(),p=new ar(d.x,d.y,d.width,d.height).expand(h),v=R(_o(e.view.viewBBox,p,a),2),g=v[0],y=v[1],m=R(_o(e.layoutBBox,p,a),2),x=m[0],b=m[1],w=0,S=0;a.startsWith("top")||a.startsWith("bottom")?(w=g,S=b):(w=x,S=y),i.setLocation({x:w+h[3],y:S+h[0]}),e.layoutBBox=e.layoutBBox.cut(p,a)})},n.prototype.update=function(){var e=this;this.option=this.view.getOptions().legends;var r={},i=function(h,d,p){var v=e.getId(p.field),g=e.getComponentById(v);if(g){var y=void 0,m=xP(e.option,p.field);m!==!1&&(z(m,"custom")?y=e.getCategoryCfg(h,d,p,m,!0):p.isLinear?y=e.getContinuousCfg(h,d,p,m):p.isCategory&&(y=e.getCategoryCfg(h,d,p,m))),y&&(mr(y,["container"]),g.direction=Fp(m),g.component.update(y),r[v]=!0)}else{var x=e.createFieldLegend(h,d,p);x&&(x.component.init(),e.components.push(x),r[v]=!0)}};if(z(this.option,"custom")){var a="global-custom",o=this.getComponentById(a);if(o){var s=this.getCategoryCfg(void 0,void 0,void 0,this.option,!0);mr(s,["container"]),o.component.update(s),r[a]=!0}else{var l=this.createCustomLegend(void 0,void 0,void 0,this.option);if(l){l.init();var c=qe.FORE,u=Fp(this.option);this.components.push({id:a,component:l,layer:c,direction:u,type:gn.LEGEND,extra:void 0}),r[a]=!0}}}else this.loopLegends(i);var f=[];$(this.getComponents(),function(h){r[h.id]?f.push(h):h.component.destroy()}),this.components=f},n.prototype.clear=function(){t.prototype.clear.call(this),this.container.clear()},n.prototype.destroy=function(){t.prototype.destroy.call(this),this.container.remove(!0)},n.prototype.getGeometries=function(e){var r=this,i=e.geometries;return $(e.views,function(a){i=i.concat(r.getGeometries(a))}),i},n.prototype.loopLegends=function(e){var r=this.view.getRootView()===this.view;if(r){var i=this.getGeometries(this.view),a={};$(i,function(o){var s=o.getGroupAttributes();$(s,function(l){var c=l.getScale(l.type);!c||c.type==="identity"||a[c.field]||(e(o,l,c),a[c.field]=!0)})})}},n.prototype.createFieldLegend=function(e,r,i){var a,o=xP(this.option,i.field),s=qe.FORE,l=Fp(o);if(o!==!1&&(z(o,"custom")?a=this.createCustomLegend(e,r,i,o):i.isLinear?a=this.createContinuousLegend(e,r,i,o):i.isCategory&&(a=this.createCategoryLegend(e,r,i,o))),a)return a.set("field",i.field),{id:this.getId(i.field),component:a,layer:s,direction:l,type:gn.LEGEND,extra:{scale:i}}},n.prototype.createCustomLegend=function(e,r,i,a){var o=this.getCategoryCfg(e,r,i,a,!0);return new gC(o)},n.prototype.createContinuousLegend=function(e,r,i,a){var o=this.getContinuousCfg(e,r,i,mr(a,["value"]));return new MJ(o)},n.prototype.createCategoryLegend=function(e,r,i,a){var o=this.getCategoryCfg(e,r,i,a);return new gC(o)},n.prototype.getContinuousCfg=function(e,r,i,a){var o=i.getTicks(),s=Li(o,function(v){return v.value===0}),l=Li(o,function(v){return v.value===1}),c=o.map(function(v){var g=v.value,y=v.tickValue,m=r.mapping(i.invert(g)).join("");return{value:y,attrValue:m,color:m,scaleValue:g}});s||c.push({value:i.min,attrValue:r.mapping(i.invert(0)).join(""),color:r.mapping(i.invert(0)).join(""),scaleValue:0}),l||c.push({value:i.max,attrValue:r.mapping(i.invert(1)).join(""),color:r.mapping(i.invert(1)).join(""),scaleValue:1}),c.sort(function(v,g){return v.value-g.value});var u={min:zr(c).value,max:ln(c).value,colors:[],rail:{type:r.type},track:{}};r.type==="size"&&(u.track={style:{fill:r.type==="size"?this.view.getTheme().defaultColor:void 0}}),r.type==="color"&&(u.colors=c.map(function(v){return v.attrValue}));var f=this.container,h=Fp(a),d=P1(h),p=z(a,"title");return p&&(p=ot({text:Sh(i)},p)),u.container=f,u.layout=d,u.title=p,u.animateOption=Vc,this.mergeLegendCfg(u,a,"continuous")},n.prototype.getCategoryCfg=function(e,r,i,a,o){var s=this.container,l=z(a,"position",at.BOTTOM),c=NC(this.view.getTheme(),l),u=z(c,["marker"]),f=z(a,"marker"),h=P1(l),d=z(c,["pageNavigator"]),p=z(a,"pageNavigator"),v=o?ret(u,f,a.items):NB(this.view,e,r,u,f),g=z(a,"title");g&&(g=ot({text:i?Sh(i):""},g));var y=z(a,"maxWidthRatio"),m=z(a,"maxHeightRatio"),x=this.getCategoryLegendSizeCfg(h,y,m);x.container=s,x.layout=h,x.items=v,x.title=g,x.animateOption=Vc,x.pageNavigator=ot({},d,p);var b=this.mergeLegendCfg(x,a,l);b.reversed&&b.items.reverse();var w=z(b,"maxItemWidth");return w&&w<=1&&(b.maxItemWidth=this.view.viewBBox.width*w),b},n.prototype.mergeLegendCfg=function(e,r,i){var a=i.split("-")[0],o=NC(this.view.getTheme(),a);return ot({},o,e,r)},n.prototype.getId=function(e){return"".concat(this.name,"-").concat(e)},n.prototype.getComponentById=function(e){return Li(this.components,function(r){return r.id===e})},n.prototype.getCategoryLegendSizeCfg=function(e,r,i){r===void 0&&(r=qE),i===void 0&&(i=qE);var a=this.view.viewBBox,o=a.width,s=a.height;return e==="vertical"?{maxWidth:o*r,maxHeight:s}:{maxWidth:o,maxHeight:s*i}},n}(_u),Pit=function(t){G(n,t);function n(e){var r=t.call(this,e)||this;return r.onChangeFn=Co,r.resetMeasure=function(){r.clear()},r.onValueChange=function(i){var a=R(i,2),o=a[0],s=a[1];r.start=o,r.end=s,r.changeViewData(o,s)},r.container=r.view.getLayer(qe.FORE).addGroup(),r.onChangeFn=aS(r.onValueChange,20,{leading:!0}),r.width=0,r.view.on(kt.BEFORE_CHANGE_DATA,r.resetMeasure),r.view.on(kt.BEFORE_CHANGE_SIZE,r.resetMeasure),r}return Object.defineProperty(n.prototype,"name",{get:function(){return"slider"},enumerable:!1,configurable:!0}),n.prototype.destroy=function(){t.prototype.destroy.call(this),this.view.off(kt.BEFORE_CHANGE_DATA,this.resetMeasure),this.view.off(kt.BEFORE_CHANGE_SIZE,this.resetMeasure)},n.prototype.init=function(){},n.prototype.render=function(){this.option=this.view.getOptions().slider;var e=this.getSliderCfg(),r=e.start,i=e.end;J(this.start)&&(this.start=r,this.end=i);var a=this.view.getOptions().data;this.option&&!Mr(a)?this.slider?this.slider=this.updateSlider():(this.slider=this.createSlider(),this.slider.component.on("sliderchange",this.onChangeFn)):this.slider&&(this.slider.component.destroy(),this.slider=void 0)},n.prototype.layout=function(){var e=this;if(this.option&&!this.width&&(this.measureSlider(),setTimeout(function(){e.view.destroyed||e.changeViewData(e.start,e.end)},0)),this.slider){var r=this.view.coordinateBBox.width,i=this.slider.component.get("padding"),a=R(i,4),o=a[0];a[1],a[2];var s=a[3],l=this.slider.component.getLayoutBBox(),c=new ar(l.x,l.y,Math.min(l.width,r),l.height).expand(i),u=this.getMinMaxText(this.start,this.end),f=u.minText,h=u.maxText,d=R(_o(this.view.viewBBox,c,at.BOTTOM),2);d[0];var p=d[1],v=R(_o(this.view.coordinateBBox,c,at.BOTTOM),2),g=v[0];v[1],this.slider.component.update(E(E({},this.getSliderCfg()),{x:g+s,y:p+o,width:this.width,start:this.start,end:this.end,minText:f,maxText:h})),this.view.viewBBox=this.view.viewBBox.cut(c,at.BOTTOM)}},n.prototype.update=function(){this.render()},n.prototype.createSlider=function(){var e=this.getSliderCfg(),r=new yJ(E({container:this.container},e));return r.init(),{component:r,layer:qe.FORE,direction:at.BOTTOM,type:gn.SLIDER}},n.prototype.updateSlider=function(){var e=this.getSliderCfg();if(this.width){var r=this.getMinMaxText(this.start,this.end),i=r.minText,a=r.maxText;e=E(E({},e),{width:this.width,start:this.start,end:this.end,minText:i,maxText:a})}return this.slider.component.update(e),this.slider},n.prototype.measureSlider=function(){var e=this.getSliderCfg().width;this.width=e},n.prototype.getSliderCfg=function(){var e={height:16,start:0,end:1,minText:"",maxText:"",x:0,y:0,width:this.view.coordinateBBox.width};if(Qt(this.option)){var r=E({data:this.getData()},z(this.option,"trendCfg",{}));e=ot({},e,this.getThemeOptions(),this.option),e=E(E({},e),{trendCfg:r})}return e.start=we(Math.min(J(e.start)?0:e.start,J(e.end)?1:e.end),0,1),e.end=we(Math.max(J(e.start)?0:e.start,J(e.end)?1:e.end),0,1),e},n.prototype.getData=function(){var e=this.view.getOptions().data,r=R(this.view.getYScales(),1),i=r[0],a=this.view.getGroupScales();if(a.length){var o=a[0],s=o.field,l=o.ticks;return e.reduce(function(c,u){return u[s]===l[0]&&c.push(u[i.field]),c},[])}return e.map(function(c){return c[i.field]||0})},n.prototype.getThemeOptions=function(){var e=this.view.getTheme();return z(e,["components","slider","common"],{})},n.prototype.getMinMaxText=function(e,r){var i=this.view.getOptions().data,a=this.view.getXScale(),o=Ni(i,a.field);a.isLinear&&(o=o.sort());var s=o,l=mn(i);if(!a||!l)return{};var c=mn(s),u=Math.round(e*(c-1)),f=Math.round(r*(c-1)),h=z(s,[u]),d=z(s,[f]),p=this.getSliderCfg().formatter;return p&&(h=p(h,i[u],u),d=p(d,i[f],f)),{minText:h,maxText:d}},n.prototype.changeViewData=function(e,r){var i=this.view.getOptions().data,a=this.view.getXScale(),o=mn(i);if(!(!a||!o)){var s=Ni(i,a.field),l=this.view.getXScale().isLinear?s.sort(function(d,p){return Number(d)-Number(p)}):s,c=l,u=mn(c),f=Math.round(e*(u-1)),h=Math.round(r*(u-1));this.view.filter(a.field,function(d,p){var v=c.indexOf(d);return v>-1?hc(v,f,h):!0}),this.view.render(!0)}},n.prototype.getComponents=function(){return this.slider?[this.slider]:[]},n.prototype.clear=function(){this.slider&&(this.slider.component.destroy(),this.slider=void 0),this.width=0,this.start=void 0,this.end=void 0},n}(_u),Dp=0,bP=8,kit=32,_it=20,Lit=function(t){G(n,t);function n(e){var r=t.call(this,e)||this;return r.onChangeFn=Co,r.resetMeasure=function(){r.clear()},r.onValueChange=function(i){var a=i.ratio,o=r.getValidScrollbarCfg().animate;r.ratio=we(a,0,1);var s=r.view.getOptions().animate;o||r.view.animate(!1),r.changeViewData(r.getScrollRange(),!0),r.view.animate(s)},r.container=r.view.getLayer(qe.FORE).addGroup(),r.onChangeFn=aS(r.onValueChange,20,{leading:!0}),r.trackLen=0,r.thumbLen=0,r.ratio=0,r.view.on(kt.BEFORE_CHANGE_DATA,r.resetMeasure),r.view.on(kt.BEFORE_CHANGE_SIZE,r.resetMeasure),r}return Object.defineProperty(n.prototype,"name",{get:function(){return"scrollbar"},enumerable:!1,configurable:!0}),n.prototype.destroy=function(){t.prototype.destroy.call(this),this.view.off(kt.BEFORE_CHANGE_DATA,this.resetMeasure),this.view.off(kt.BEFORE_CHANGE_SIZE,this.resetMeasure)},n.prototype.init=function(){},n.prototype.render=function(){this.option=this.view.getOptions().scrollbar,this.option?this.scrollbar?this.scrollbar=this.updateScrollbar():(this.scrollbar=this.createScrollbar(),this.scrollbar.component.on("scrollchange",this.onChangeFn)):this.scrollbar&&(this.scrollbar.component.destroy(),this.scrollbar=void 0)},n.prototype.layout=function(){var e=this;if(this.option&&!this.trackLen&&(this.measureScrollbar(),setTimeout(function(){e.view.destroyed||e.changeViewData(e.getScrollRange(),!0)})),this.scrollbar){var r=this.view.coordinateBBox.width,i=this.scrollbar.component.get("padding"),a=this.scrollbar.component.getLayoutBBox(),o=new ar(a.x,a.y,Math.min(a.width,r),a.height).expand(i),s=this.getScrollbarComponentCfg(),l=void 0,c=void 0;if(s.isHorizontal){var u=R(_o(this.view.viewBBox,o,at.BOTTOM),2);u[0];var f=u[1],h=R(_o(this.view.coordinateBBox,o,at.BOTTOM),2),d=h[0];h[1],l=d,c=f}else{var p=R(_o(this.view.viewBBox,o,at.RIGHT),2);p[0];var f=p[1],v=R(_o(this.view.viewBBox,o,at.RIGHT),2),d=v[0];v[1],l=d,c=f}l+=i[3],c+=i[0],this.trackLen?this.scrollbar.component.update(E(E({},s),{x:l,y:c,trackLen:this.trackLen,thumbLen:this.thumbLen,thumbOffset:(this.trackLen-this.thumbLen)*this.ratio})):this.scrollbar.component.update(E(E({},s),{x:l,y:c})),this.view.viewBBox=this.view.viewBBox.cut(o,s.isHorizontal?at.BOTTOM:at.RIGHT)}},n.prototype.update=function(){this.render()},n.prototype.getComponents=function(){return this.scrollbar?[this.scrollbar]:[]},n.prototype.clear=function(){this.scrollbar&&(this.scrollbar.component.destroy(),this.scrollbar=void 0),this.trackLen=0,this.thumbLen=0,this.ratio=0,this.cnt=0,this.step=0,this.data=void 0,this.xScaleCfg=void 0,this.yScalesCfg=[]},n.prototype.setValue=function(e){this.onValueChange({ratio:e})},n.prototype.getValue=function(){return this.ratio},n.prototype.getThemeOptions=function(){var e=this.view.getTheme();return z(e,["components","scrollbar","common"],{})},n.prototype.getScrollbarTheme=function(e){var r=z(this.view.getTheme(),["components","scrollbar"]),i=e||{},a=i.thumbHighlightColor,o=vt(i,["thumbHighlightColor"]);return{default:ot({},z(r,["default","style"],{}),o),hover:ot({},z(r,["hover","style"],{}),{thumbColor:a})}},n.prototype.measureScrollbar=function(){var e=this.view.getXScale(),r=this.view.getYScales().slice();this.data=this.getScrollbarData(),this.step=this.getStep(),this.cnt=this.getCnt();var i=this.getScrollbarComponentCfg(),a=i.trackLen,o=i.thumbLen;this.trackLen=a,this.thumbLen=o,this.xScaleCfg={field:e.field,values:e.values||[]},this.yScalesCfg=r},n.prototype.getScrollRange=function(){var e=Math.floor((this.cnt-this.step)*we(this.ratio,0,1)),r=Math.min(e+this.step-1,this.cnt-1);return[e,r]},n.prototype.changeViewData=function(e,r){var i=this,a=R(e,2),o=a[0],s=a[1],l=this.getValidScrollbarCfg().type,c=l!=="vertical",u=Ni(this.data,this.xScaleCfg.field),f=this.view.getXScale().isLinear?u.sort(function(d,p){return Number(d)-Number(p)}):u,h=c?f:f.reverse();this.yScalesCfg.forEach(function(d){i.view.scale(d.field,{formatter:d.formatter,type:d.type,min:d.min,max:d.max,tickMethod:d.tickMethod})}),this.view.filter(this.xScaleCfg.field,function(d){var p=h.indexOf(d);return p>-1?hc(p,o,s):!0}),this.view.render(!0)},n.prototype.createScrollbar=function(){var e=this.getValidScrollbarCfg().type,r=e!=="vertical",i=new xJ(E(E({container:this.container},this.getScrollbarComponentCfg()),{x:0,y:0}));return i.init(),{component:i,layer:qe.FORE,direction:r?at.BOTTOM:at.RIGHT,type:gn.SCROLLBAR}},n.prototype.updateScrollbar=function(){var e=this.getScrollbarComponentCfg(),r=this.trackLen?E(E({},e),{trackLen:this.trackLen,thumbLen:this.thumbLen,thumbOffset:(this.trackLen-this.thumbLen)*this.ratio}):E({},e);return this.scrollbar.component.update(r),this.scrollbar},n.prototype.getStep=function(){if(this.step)return this.step;var e=this.view.coordinateBBox,r=this.getValidScrollbarCfg(),i=r.type,a=r.categorySize,o=i!=="vertical";return Math.floor((o?e.width:e.height)/a)},n.prototype.getCnt=function(){if(this.cnt)return this.cnt;var e=this.view.getXScale(),r=this.getScrollbarData(),i=Ni(r,e.field);return mn(i)},n.prototype.getScrollbarComponentCfg=function(){var e=this.view,r=e.coordinateBBox,i=e.viewBBox,a=this.getValidScrollbarCfg(),o=a.type,s=a.padding,l=a.width,c=a.height,u=a.style,f=o!=="vertical",h=R(s,4),d=h[0],p=h[1],v=h[2],g=h[3],y=f?{x:r.minX+g,y:i.maxY-c-v}:{x:i.maxX-l-p,y:r.minY+d},m=this.getStep(),x=this.getCnt(),b=f?r.width-g-p:r.height-d-v,w=Math.max(b*we(m/x,0,1),_it);return E(E({},this.getThemeOptions()),{x:y.x,y:y.y,size:f?c:l,isHorizontal:f,trackLen:b,thumbLen:w,thumbOffset:0,theme:this.getScrollbarTheme(u)})},n.prototype.getValidScrollbarCfg=function(){var e={type:"horizontal",categorySize:kit,width:bP,height:bP,padding:[0,0,0,0],animate:!0,style:{}};return Qt(this.option)&&(e=E(E({},e),this.option)),(!Qt(this.option)||!this.option.padding)&&(e.padding=e.type==="horizontal"?[Dp,0,Dp,0]:[0,Dp,0,Dp]),e},n.prototype.getScrollbarData=function(){var e=this.view.getCoordinate(),r=this.getValidScrollbarCfg(),i=this.view.getOptions().data||[];return e.isReflect("y")&&r.type==="vertical"&&(i=X([],R(i),!1).reverse()),i},n}(_u),Iit={fill:"#CCD6EC",opacity:.3};function Fit(t,n,e){var r,i,a,o,s,l,c=ktt(t,n,e);if(c.length){c=Wr(c);try{for(var u=Ct(c),f=u.next();!f.done;f=u.next()){var h=f.value;try{for(var d=(a=void 0,Ct(h)),p=d.next();!p.done;p=d.next()){var v=p.value,g=v.mappingData,y=g.x,m=g.y;v.x=et(y)?y[y.length-1]:y,v.y=et(m)?m[m.length-1]:m}}catch(T){a={error:T}}finally{try{p&&!p.done&&(o=d.return)&&o.call(d)}finally{if(a)throw a.error}}}}catch(T){r={error:T}}finally{try{f&&!f.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}var x=e.shared;if(x===!1&&c.length>1){var b=c[0],w=Math.abs(n.y-b[0].y);try{for(var S=Ct(c),O=S.next();!O.done;O=S.next()){var M=O.value,A=Math.abs(n.y-M[0].y);A<=w&&(b=M,w=A)}}catch(T){s={error:T}}finally{try{O&&!O.done&&(l=S.return)&&l.call(S)}finally{if(s)throw s.error}}c=[b]}return il(Wr(c))}return[]}var Dit=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.show=function(e){var r=this.context.view,i=this.context.event,a=r.getController("tooltip").getTooltipCfg(),o=Fit(r,{x:i.x,y:i.y},a);if(!Ne(o,this.items)&&(this.items=o,o.length)){var s=r.getXScale().field,l=o[0].data[s],c=[],u=r.geometries;if($(u,function(B){if(B.type==="interval"||B.type==="schema"){var D=B.getElementsBy(function(N){var j=N.getData();return j[s]===l});c=c.concat(D)}}),c.length){var f=r.getCoordinate(),h=c[0].shape.getCanvasBBox(),d=c[0].shape.getCanvasBBox(),p=h;$(c,function(B){var D=B.shape.getCanvasBBox();f.isTransposed?(D.minY<h.minY&&(h=D),D.maxY>d.maxY&&(d=D)):(D.minX<h.minX&&(h=D),D.maxX>d.maxX&&(d=D)),p.x=Math.min(D.minX,p.minX),p.y=Math.min(D.minY,p.minY),p.width=Math.max(D.maxX,p.maxX)-p.x,p.height=Math.max(D.maxY,p.maxY)-p.y});var v=r.backgroundGroup,g=r.coordinateBBox,y=void 0;if(f.isRect){var m=r.getXScale(),x=e||{},b=x.appendRatio,w=x.appendWidth;J(w)&&(b=J(b)?m.isLinear?0:.25:b,w=f.isTransposed?b*d.height:b*h.width);var S=void 0,O=void 0,M=void 0,A=void 0;f.isTransposed?(S=g.minX,O=Math.min(d.minY,h.minY)-w,M=g.width,A=p.height+w*2):(S=Math.min(h.minX,d.minX)-w,O=g.minY,M=p.width+w*2,A=g.height),y=[["M",S,O],["L",S+M,O],["L",S+M,O+A],["L",S,O+A],["Z"]]}else{var T=zr(c),C=ln(c),P=wh(T.getModel(),f).startAngle,_=wh(C.getModel(),f).endAngle,k=f.getCenter(),I=f.getRadius(),L=f.innerRadius*I;y=$o(k.x,k.y,I,P,_,L)}if(this.regionPath)this.regionPath.attr("path",y),this.regionPath.show();else{var F=z(e,"style",Iit);this.regionPath=v.addShape({type:"path",name:"active-region",capture:!1,attrs:E(E({},F),{path:y})})}}}},n.prototype.hide=function(){this.regionPath&&this.regionPath.hide(),this.items=null},n.prototype.destroy=function(){this.hide(),this.regionPath&&this.regionPath.remove(!0),t.prototype.destroy.call(this)},n}(be),x3=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.timeStamp=0,e}return n.prototype.show=function(){var e=this.context,r=e.event,i=e.view,a=i.isTooltipLocked();if(!a){var o=this.timeStamp,s=+new Date,l=z(e.view.getOptions(),"tooltip.showDelay",16);if(s-o>l){var c=this.location,u={x:r.x,y:r.y};(!c||!Ne(c,u))&&this.showTooltip(i,u),this.timeStamp=s,this.location=u}}},n.prototype.hide=function(){var e=this.context.view,r=e.getController("tooltip"),i=this.context.event,a=i.clientX,o=i.clientY;r.isCursorEntered({x:a,y:o})||e.isTooltipLocked()||(this.hideTooltip(e),this.location=null)},n.prototype.showTooltip=function(e,r){e.showTooltip(r)},n.prototype.hideTooltip=function(e){e.hideTooltip()},n}(be),Rit=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.showTooltip=function(e,r){var i=ca(e);$(i,function(a){var o=$b(e,a,r);a.showTooltip(o)})},n.prototype.hideTooltip=function(e){var r=ca(e);$(r,function(i){i.hideTooltip()})},n}(x3),Bit=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.timeStamp=0,e}return n.prototype.destroy=function(){t.prototype.destroy.call(this),this.tooltip&&this.tooltip.destroy()},n.prototype.show=function(){var e=this.context,r=e.event,i=this.timeStamp,a=+new Date;if(a-i>16){var o=this.location,s={x:r.x,y:r.y};(!o||!Ne(o,s))&&this.showTooltip(s),this.timeStamp=a,this.location=s}},n.prototype.hide=function(){this.hideTooltip(),this.location=null},n.prototype.showTooltip=function(e){var r=this.context,i=r.event,a=i.target;if(a&&a.get("tip")){this.tooltip||this.renderTooltip();var o=a.get("tip");this.tooltip.update(E({title:o},e)),this.tooltip.show()}},n.prototype.hideTooltip=function(){this.tooltip&&this.tooltip.hide()},n.prototype.renderTooltip=function(){var e,r=this.context.view,i=r.canvas,a={start:{x:0,y:0},end:{x:i.get("width"),y:i.get("height")}},o=r.getTheme(),s=z(o,["components","tooltip","domStyles"],{}),l=new E0({parent:i.get("el").parentNode,region:a,visible:!1,crosshairs:null,domStyles:E({},ot({},s,(e={},e[Za]={"max-width":"50%"},e[Ka]={"word-break":"break-all"},e)))});l.init(),l.setCapture(!1),this.tooltip=l},n}(be),uO=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.stateName="",e}return n.prototype.hasState=function(e){return e.hasState(this.stateName)},n.prototype.setElementState=function(e,r){e.setState(this.stateName,r)},n.prototype.setState=function(){this.setStateEnable(!0)},n.prototype.clear=function(){var e=this.context.view;this.clearViewState(e)},n.prototype.clearViewState=function(e){var r=this,i=gB(e,this.stateName);$(i,function(a){r.setElementState(a,!1)})},n}(be);function wP(t){return z(t.get("delegateObject"),"item")}var fO=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.ignoreListItemStates=["unchecked"],e}return n.prototype.isItemIgnore=function(e,r){var i=this.ignoreListItemStates,a=i.filter(function(o){return r.hasState(e,o)});return!!a.length},n.prototype.setStateByComponent=function(e,r,i){var a=this.context.view,o=e.get("field"),s=_n(a);this.setElementsStateByItem(s,o,r,i)},n.prototype.setStateByElement=function(e,r){this.setElementState(e,r)},n.prototype.isMathItem=function(e,r,i){var a=this.context.view,o=Wc(a,r),s=$i(e,r);return!J(s)&&i.name===o.getText(s)},n.prototype.setElementsStateByItem=function(e,r,i,a){var o=this;$(e,function(s){o.isMathItem(s,r,i)&&s.setState(o.stateName,a)})},n.prototype.setStateEnable=function(e){var r=Uo(this.context);if(r)hB(this.context)&&this.setStateByElement(r,e);else{var i=ul(this.context);if(Oh(i)){var a=i.item,o=i.component;if(a&&o&&!this.isItemIgnore(a,o)){var s=this.context.event.gEvent;if(s&&s.fromShape&&s.toShape&&wP(s.fromShape)===wP(s.toShape))return;this.setStateByComponent(o,a,e)}}}},n.prototype.toggle=function(){var e=Uo(this.context);if(e){var r=e.hasState(this.stateName);this.setElementState(e,!r)}},n.prototype.reset=function(){this.setStateEnable(!1)},n}(uO),Nit=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.stateName="active",e}return n.prototype.active=function(){this.setState()},n}(fO),$it=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.cache={},e}return n.prototype.getColorScale=function(e,r){var i=r.geometry.getAttribute("color");if(!i)return null;var a=e.getScaleByField(i.getFields()[0]);return a},n.prototype.getLinkPath=function(e,r){var i=this.context.view,a=i.getCoordinate().isTransposed,o=e.shape.getCanvasBBox(),s=r.shape.getCanvasBBox(),l=a?[["M",o.minX,o.minY],["L",s.minX,s.maxY],["L",s.maxX,s.maxY],["L",o.maxX,o.minY],["Z"]]:[["M",o.maxX,o.minY],["L",s.minX,s.minY],["L",s.minX,s.maxY],["L",o.maxX,o.maxY],["Z"]];return l},n.prototype.addLinkShape=function(e,r,i,a){var o={opacity:.4,fill:r.shape.attr("fill")};e.addShape({type:"path",attrs:E(E({},ot({},o,ut(a)?a(o,r):a)),{path:this.getLinkPath(r,i)})})},n.prototype.linkByElement=function(e,r){var i=this,a=this.context.view,o=this.getColorScale(a,e);if(o){var s=$i(e,o.field);if(!this.cache[s]){var l=ltt(a,o.field,s),c=this.linkGroup,u=c.addGroup();this.cache[s]=u;var f=l.length;$(l,function(h,d){if(d<f-1){var p=l[d+1];i.addLinkShape(u,h,p,r)}})}}},n.prototype.removeLink=function(e){var r=this.getColorScale(this.context.view,e);if(r){var i=$i(e,r.field);this.cache[i]&&(this.cache[i].remove(),this.cache[i]=null)}},n.prototype.link=function(e){var r=this.context;this.linkGroup||(this.linkGroup=r.view.foregroundGroup.addGroup({id:"link-by-color-group",capture:!1}));var i=Uo(r);i&&this.linkByElement(i,e==null?void 0:e.style)},n.prototype.unlink=function(){var e=Uo(this.context);e&&this.removeLink(e)},n.prototype.clear=function(){this.linkGroup&&this.linkGroup.clear(),this.cache={}},n.prototype.destroy=function(){t.prototype.destroy.call(this),this.linkGroup&&this.linkGroup.remove()},n}(be),hO=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.startPoint=null,e.endPoint=null,e.isStarted=!1,e.effectSiblings=!1,e.effectByRecord=!1,e}return n.prototype.getCurrentPoint=function(){var e=this.context.event;return{x:e.x,y:e.y}},n.prototype.start=function(){this.clear(),this.startPoint=this.getCurrentPoint(),this.isStarted=!0},n.prototype.getIntersectElements=function(){var e=null;if(Mh(this.context))e=zS(this.context,10);else{var r=this.startPoint,i=this.isStarted?this.getCurrentPoint():this.endPoint;if(!r||!i)return;var a={minX:Math.min(r.x,i.x),minY:Math.min(r.y,i.y),maxX:Math.max(r.x,i.x),maxY:Math.max(r.y,i.y)},o=this.context.view;e=k0(o,a)}return e},n.prototype.setStateEnable=function(e){if(this.effectSiblings&&!this.effectByRecord)this.setSiblingsState(e);else{var r=_n(this.context.view),i=this.getIntersectElements();i&&i.length?this.effectByRecord?this.setSiblingsStateByRecord(i,e):this.setElementsState(i,e,r):this.clear()}},n.prototype.setSiblingsStateByRecord=function(e,r){var i=this,a=this.context.view,o=ca(a),s=e.map(function(u){return u.getModel().data}),l=a.getXScale().field,c=a.getYScales()[0].field;$(o,function(u){var f=_n(u),h=f.filter(function(d){var p=d.getModel().data;return xB(s,p,l,c)});i.setElementsState(h,r,f)})},n.prototype.setSiblingsState=function(e){var r=this,i=this.context.view,a=ca(i);Mh(this.context)&&$(a,function(o){var s=_n(o),l=pB(r.context,o,10);l&&l.length?r.setElementsState(l,e,s):r.clearViewState(o)})},n.prototype.setElementsState=function(e,r,i){var a=this;$(i,function(o){e.includes(o)?a.setElementState(o,r):a.setElementState(o,!1)})},n.prototype.end=function(){this.isStarted=!1,this.endPoint=this.getCurrentPoint()},n.prototype.clear=function(){var e=this,r=this.context.view;if(this.effectSiblings){var i=ca(r);$(i,function(a){e.clearViewState(a)})}else this.clearViewState(r)},n}(uO),jit=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.stateName="active",e}return n.prototype.active=function(){this.setState()},n}(hO),dO=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.setStateEnable=function(e){var r=Uo(this.context);if(r){if(!hB(this.context))return;e?(this.clear(),this.setElementState(r,!0)):this.hasState(r)&&this.setElementState(r,!1)}},n.prototype.toggle=function(){var e=Uo(this.context);if(e){var r=this.hasState(e);r||this.clear(),this.setElementState(e,!r)}},n.prototype.reset=function(){this.setStateEnable(!1)},n}(uO),zit=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.stateName="active",e}return n.prototype.active=function(){this.setState()},n}(dO),Hf="inactive",Xf="active";function pO(t){var n=_n(t);$(n,function(e){e.hasState(Xf)&&e.setState(Xf,!1),e.hasState(Hf)&&e.setState(Hf,!1)})}function b3(t,n,e){$(t,function(r){n(r)?(r.hasState(Hf)&&r.setState(Hf,!1),r.setState(Xf,e)):(r.hasState(Xf)&&r.setState(Xf,!1),r.setState(Hf,e))})}var js=cg.INACTIVE,ka=cg.ACTIVE,vO=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.stateName=ka,e}return n.prototype.setElementsStateByItem=function(e,r,i,a){var o=this,s=function(l){return o.isMathItem(l,r,i)};this.setHighlightBy(e,s,a)},n.prototype.setElementHighlight=function(e,r){r(e)?(e.hasState(js)&&e.setState(js,!1),e.setState(ka,!0)):e.hasState(ka)||e.setState(js,!0)},n.prototype.setHighlightBy=function(e,r,i){var a=this;if(i)$(e,function(l){a.setElementHighlight(l,r)});else{var o=gB(this.context.view,ka),s=!0;$(o,function(l){if(!r(l))return s=!1,!1}),s?this.clear():$(e,function(l){r(l)&&(l.hasState(ka)&&l.setState(ka,!1),l.setState(js,!0))})}},n.prototype.setElementState=function(e,r){var i=this.context.view,a=_n(i);this.setHighlightBy(a,function(o){return e===o},r)},n.prototype.highlight=function(){this.setState()},n.prototype.clear=function(){var e=this.context.view;pO(e)},n}(fO),Git=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.setStateByElement=function(e,r){var i=this.context.view,a=e.geometry.getAttribute("color");if(a){var o=i.getScaleByField(a.getFields()[0]),s=$i(e,o.field),l=_n(i),c=l.filter(function(u){return $i(u,o.field)===s});this.setHighlightBy(l,function(u){return c.includes(u)},r)}},n}(vO),Yit=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.setElementHighlight=function(e,r){r(e)?(e.hasState(js)&&e.setState(js,!1),e.setState(ka,!0)):(e.setState(js,!0),e.hasState(ka)&&e.setState(ka,!1))},n.prototype.setStateByElement=function(e,r){var i=this.context.view,a=i.getXScale(),o=$i(e,a.field),s=_n(i),l=s.filter(function(c){return $i(c,a.field)===o});this.setHighlightBy(s,function(c){return l.includes(c)},r)},n.prototype.toggle=function(){var e=Uo(this.context);if(e){var r=e.hasState(this.stateName);this.setStateByElement(e,!r)}},n}(vO),Ui;(function(t){t.BEFORE_HIGHLIGHT="element-range-highlight:beforehighlight",t.AFTER_HIGHLIGHT="element-range-highlight:afterhighlight",t.BEFORE_CLEAR="element-range-highlight:beforeclear",t.AFTER_CLEAR="element-range-highlight:afterclear"})(Ui||(Ui={}));var w3=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.stateName="active",e}return n.prototype.clearViewState=function(e){pO(e)},n.prototype.highlight=function(){var e=this.context,r=e.view,i=e.event,a=this.getIntersectElements(),o={view:r,event:i,highlightElements:a};r.emit(Ui.BEFORE_HIGHLIGHT,ke.fromData(r,Ui.BEFORE_HIGHLIGHT,o)),this.setState(),r.emit(Ui.AFTER_HIGHLIGHT,ke.fromData(r,Ui.AFTER_HIGHLIGHT,o))},n.prototype.clear=function(){var e=this.context.view;e.emit(Ui.BEFORE_CLEAR,ke.fromData(e,Ui.BEFORE_CLEAR,{})),t.prototype.clear.call(this),e.emit(Ui.AFTER_CLEAR,ke.fromData(e,Ui.AFTER_CLEAR,{}))},n.prototype.setElementsState=function(e,r,i){b3(i,function(a){return e.indexOf(a)>=0},r)},n}(hO),Wit=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.stateName="active",e}return n.prototype.highlight=function(){this.setState()},n.prototype.setElementState=function(e,r){var i=this.context.view,a=_n(i);b3(a,function(o){return e===o},r)},n.prototype.clear=function(){var e=this.context.view;pO(e)},n}(dO),Vit=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.stateName="selected",e}return n.prototype.selected=function(){this.setState()},n}(hO),Hit=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.stateName="selected",e}return n.prototype.selected=function(){this.setState()},n}(fO),Xit=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.stateName="selected",e}return n.prototype.selected=function(){this.setState()},n}(dO),kl=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.stateName="",e.ignoreItemStates=[],e}return n.prototype.getTriggerListInfo=function(){var e=ul(this.context),r=null;return Oh(e)&&(r={item:e.item,list:e.component}),r},n.prototype.getAllowComponents=function(){var e=this,r=this.context.view,i=mB(r),a=[];return $(i,function(o){o.isList()&&e.allowSetStateByElement(o)&&a.push(o)}),a},n.prototype.hasState=function(e,r){return e.hasState(r,this.stateName)},n.prototype.clearAllComponentsState=function(){var e=this,r=this.getAllowComponents();$(r,function(i){i.clearItemsState(e.stateName)})},n.prototype.allowSetStateByElement=function(e){var r=e.get("field");if(!r)return!1;if(this.cfg&&this.cfg.componentNames){var i=e.get("name");if(this.cfg.componentNames.indexOf(i)===-1)return!1}var a=this.context.view,o=Wc(a,r);return o&&o.isCategory},n.prototype.allowSetStateByItem=function(e,r){var i=this.ignoreItemStates;if(i.length){var a=i.filter(function(o){return r.hasState(e,o)});return a.length===0}return!0},n.prototype.setStateByElement=function(e,r,i){var a=e.get("field"),o=this.context.view,s=Wc(o,a),l=$i(r,a),c=s.getText(l);this.setItemsState(e,c,i)},n.prototype.setStateEnable=function(e){var r=this,i=Uo(this.context);if(i){var a=this.getAllowComponents();$(a,function(c){r.setStateByElement(c,i,e)})}else{var o=ul(this.context);if(Oh(o)){var s=o.item,l=o.component;this.allowSetStateByElement(l)&&this.allowSetStateByItem(s,l)&&this.setItemState(l,s,e)}}},n.prototype.setItemsState=function(e,r,i){var a=this,o=e.getItems();$(o,function(s){s.name===r&&a.setItemState(e,s,i)})},n.prototype.setItemState=function(e,r,i){e.setItemState(r,this.stateName,i)},n.prototype.setState=function(){this.setStateEnable(!0)},n.prototype.reset=function(){this.setStateEnable(!1)},n.prototype.toggle=function(){var e=this.getTriggerListInfo();if(e&&e.item){var r=e.list,i=e.item,a=this.hasState(r,i);this.setItemState(r,i,!a)}},n.prototype.clear=function(){var e=this.getTriggerListInfo();e?e.list.clearItemsState(this.stateName):this.clearAllComponentsState()},n}(be),Uit=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.stateName="active",e}return n.prototype.active=function(){this.setState()},n}(kl),SP="inactive",OP="active";function qit(t){var n=t.getItems();$(n,function(e){t.hasState(e,OP)&&t.setItemState(e,OP,!1),t.hasState(e,SP)&&t.setItemState(e,SP,!1)})}var nf="inactive",As="active",gO=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.stateName=As,e.ignoreItemStates=["unchecked"],e}return n.prototype.setItemsState=function(e,r,i){this.setHighlightBy(e,function(a){return a.name===r},i)},n.prototype.setItemState=function(e,r,i){e.getItems(),this.setHighlightBy(e,function(a){return a===r},i)},n.prototype.setHighlightBy=function(e,r,i){var a=e.getItems();if(i)$(a,function(l){r(l)?(e.hasState(l,nf)&&e.setItemState(l,nf,!1),e.setItemState(l,As,!0)):e.hasState(l,As)||e.setItemState(l,nf,!0)});else{var o=e.getItemsByState(As),s=!0;$(o,function(l){if(!r(l))return s=!1,!1}),s?this.clear():$(a,function(l){r(l)&&(e.hasState(l,As)&&e.setItemState(l,As,!1),e.setItemState(l,nf,!0))})}},n.prototype.highlight=function(){this.setState()},n.prototype.clear=function(){var e=this.getTriggerListInfo();if(e)qit(e.list);else{var r=this.getAllowComponents();$(r,function(i){i.clearItemsState(As),i.clearItemsState(nf)})}},n}(kl),Zit=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.stateName="selected",e}return n.prototype.selected=function(){this.setState()},n}(kl),Kit=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.stateName="unchecked",e}return n.prototype.unchecked=function(){this.setState()},n}(kl),Wl="unchecked",Rp="checked",Qit=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.stateName=Rp,e}return n.prototype.setItemState=function(e,r,i){this.setCheckedBy(e,function(a){return a===r},i)},n.prototype.setCheckedBy=function(e,r,i){var a=e.getItems();i&&$(a,function(o){r(o)?(e.hasState(o,Wl)&&e.setItemState(o,Wl,!1),e.setItemState(o,Rp,!0)):e.hasState(o,Rp)||e.setItemState(o,Wl,!0)})},n.prototype.toggle=function(){var e=this.getTriggerListInfo();if(e&&e.item){var r=e.list,i=e.item,a=!qy(r.getItems(),function(o){return r.hasState(o,Wl)});a||r.hasState(i,Wl)?this.setItemState(r,i,!0):this.reset()}},n.prototype.checked=function(){this.setState()},n.prototype.reset=function(){var e=this.getAllowComponents();$(e,function(r){r.clearItemsState(Rp),r.clearItemsState(Wl)})},n}(kl),Vl="unchecked",Jit=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.toggle=function(){var e,r,i,a,o,s,l,c,u=this.getTriggerListInfo();if(u!=null&&u.item){var f=u.list,h=u.item,d=f.getItems(),p=d.filter(function(T){return!f.hasState(T,Vl)}),v=d.filter(function(T){return f.hasState(T,Vl)}),g=p[0];if(d.length===p.length)try{for(var y=Ct(d),m=y.next();!m.done;m=y.next()){var x=m.value;f.setItemState(x,Vl,x.id!==h.id)}}catch(T){e={error:T}}finally{try{m&&!m.done&&(r=y.return)&&r.call(y)}finally{if(e)throw e.error}}else if(d.length-v.length===1)if(g.id===h.id)try{for(var b=Ct(d),w=b.next();!w.done;w=b.next()){var x=w.value;f.setItemState(x,Vl,!1)}}catch(T){i={error:T}}finally{try{w&&!w.done&&(a=b.return)&&a.call(b)}finally{if(i)throw i.error}}else try{for(var S=Ct(d),O=S.next();!O.done;O=S.next()){var x=O.value;f.setItemState(x,Vl,x.id!==h.id)}}catch(T){o={error:T}}finally{try{O&&!O.done&&(s=S.return)&&s.call(S)}finally{if(o)throw o.error}}else try{for(var M=Ct(d),A=M.next();!A.done;A=M.next()){var x=A.value;f.setItemState(x,Vl,x.id!==h.id)}}catch(T){l={error:T}}finally{try{A&&!A.done&&(c=M.return)&&c.call(M)}finally{if(l)throw l.error}}}},n}(kl),MP="showRadio",B1="legend-radio-tip",tat=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.timeStamp=0,e}return n.prototype.show=function(){var e=this.getTriggerListInfo();if(e!=null&&e.item){var r=e.list,i=e.item;r.setItemState(i,MP,!0)}},n.prototype.hide=function(){var e=this.getTriggerListInfo();if(e!=null&&e.item){var r=e.list,i=e.item;r.setItemState(i,MP,!1)}},n.prototype.destroy=function(){t.prototype.destroy.call(this),this.tooltip&&this.tooltip.destroy()},n.prototype.showTip=function(){var e=this.context,r=e.event,i=this.timeStamp,a=+new Date,o=this.context.event.target;if(a-i>16&&o.get("name")==="legend-item-radio"){var s=this.location,l={x:r.x,y:r.y};this.timeStamp=a,this.location=l,(!s||!Ne(s,l))&&this.showTooltip(l)}},n.prototype.hideTip=function(){this.hideTooltip(),this.location=null},n.prototype.showTooltip=function(e){var r=this.context,i=r.event,a=i.target;if(a&&a.get("tip")){this.tooltip||this.renderTooltip();var o=r.view.getCanvas().get("el").getBoundingClientRect(),s=o.x,l=o.y;this.tooltip.update(E(E({title:a.get("tip")},e),{x:e.x+s,y:e.y+l})),this.tooltip.show()}},n.prototype.hideTooltip=function(){this.tooltip&&this.tooltip.hide()},n.prototype.renderTooltip=function(){var e,r=(e={},e[Za]={padding:"6px 8px",transform:"translate(-50%, -80%)",background:"rgba(0,0,0,0.75)",color:"#fff","border-radius":"2px","z-index":100},e[Ka]={"font-size":"12px","line-height":"14px","margin-bottom":0,"word-break":"break-all"},e);document.getElementById(B1)&&document.body.removeChild(document.getElementById(B1));var i=new E0({parent:document.body,region:null,visible:!1,crosshairs:null,domStyles:r,containerId:B1});i.init(),i.setCapture(!1),this.tooltip=i},n}(kl),yO=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.maskShape=null,e.points=[],e.starting=!1,e.moving=!1,e.preMovePoint=null,e.shapeType="path",e}return n.prototype.getCurrentPoint=function(){var e=this.context.event;return{x:e.x,y:e.y}},n.prototype.emitEvent=function(e){var r="mask:".concat(e),i=this.context.view,a=this.context.event;i.emit(r,{target:this.maskShape,shape:this.maskShape,points:this.points,x:a.x,y:a.y})},n.prototype.createMask=function(){var e=this.context.view,r=this.getMaskAttrs(),i=e.foregroundGroup.addShape({type:this.shapeType,name:"mask",draggable:!0,attrs:E({fill:"#C5D4EB",opacity:.3},r)});return i},n.prototype.getMaskPath=function(){return[]},n.prototype.show=function(){this.maskShape&&(this.maskShape.show(),this.emitEvent("show"))},n.prototype.start=function(e){this.starting=!0,this.moving=!1,this.points=[this.getCurrentPoint()],this.maskShape||(this.maskShape=this.createMask(),this.maskShape.set("capture",!1)),this.updateMask(e==null?void 0:e.maskStyle),this.emitEvent("start")},n.prototype.moveStart=function(){this.moving=!0,this.preMovePoint=this.getCurrentPoint()},n.prototype.move=function(){if(!(!this.moving||!this.maskShape)){var e=this.getCurrentPoint(),r=this.preMovePoint,i=e.x-r.x,a=e.y-r.y,o=this.points;$(o,function(s){s.x+=i,s.y+=a}),this.updateMask(),this.emitEvent("change"),this.preMovePoint=e}},n.prototype.updateMask=function(e){var r=ot({},this.getMaskAttrs(),e);this.maskShape.attr(r)},n.prototype.moveEnd=function(){this.moving=!1,this.preMovePoint=null},n.prototype.end=function(){this.starting=!1,this.emitEvent("end"),this.maskShape&&this.maskShape.set("capture",!0)},n.prototype.hide=function(){this.maskShape&&(this.maskShape.hide(),this.emitEvent("hide"))},n.prototype.resize=function(){this.starting&&this.maskShape&&(this.points.push(this.getCurrentPoint()),this.updateMask(),this.emitEvent("change"))},n.prototype.destroy=function(){this.points=[],this.maskShape&&this.maskShape.remove(),this.maskShape=null,this.preMovePoint=null,t.prototype.destroy.call(this)},n}(be);function S3(t){var n=ln(t),e=0,r=0,i=0;if(t.length){var a=t[0];e=GS(a,n)/2,r=(n.x+a.x)/2,i=(n.y+a.y)/2}return{x:r,y:i,r:e}}var eat=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.shapeType="circle",e}return n.prototype.getMaskAttrs=function(){return S3(this.points)},n}(yO);function O3(t){return{start:zr(t),end:ln(t)}}function M3(t,n){var e=Math.min(t.x,n.x),r=Math.min(t.y,n.y),i=Math.abs(n.x-t.x),a=Math.abs(n.y-t.y);return{x:e,y:r,width:i,height:a}}var A3=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.shapeType="rect",e}return n.prototype.getRegion=function(){return O3(this.points)},n.prototype.getMaskAttrs=function(){var e=this.getRegion(),r=e.start,i=e.end;return M3(r,i)},n}(yO);function AP(t){t.x=we(t.x,0,1),t.y=we(t.y,0,1)}function E3(t,n,e,r){var i=null,a=null,o=r.invert(zr(t)),s=r.invert(ln(t));return e&&(AP(o),AP(s)),n==="x"?(i=r.convert({x:o.x,y:0}),a=r.convert({x:s.x,y:1})):(i=r.convert({x:0,y:o.y}),a=r.convert({x:1,y:s.y})),{start:i,end:a}}var T3=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.dim="x",e.inPlot=!0,e}return n.prototype.getRegion=function(){var e=this.context.view.getCoordinate();return E3(this.points,this.dim,this.inPlot,e)},n}(A3);function mO(t){var n=[];return t.length&&($(t,function(e,r){r===0?n.push(["M",e.x,e.y]):n.push(["L",e.x,e.y])}),n.push(["L",t[0].x,t[0].y])),n}function C3(t){return{path:mO(t)}}var P3=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getMaskPath=function(){return mO(this.points)},n.prototype.getMaskAttrs=function(){return C3(this.points)},n.prototype.addPoint=function(){this.resize()},n}(yO);function xO(t){return utt(t,!0)}function k3(t){return{path:xO(t)}}var nat=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getMaskPath=function(){return xO(this.points)},n.prototype.getMaskAttrs=function(){return k3(this.points)},n}(P3),bO=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.maskShapes=[],e.starting=!1,e.moving=!1,e.recordPoints=null,e.preMovePoint=null,e.shapeType="path",e.maskType="multi-mask",e}return n.prototype.getCurrentPoint=function(){var e=this.context.event;return{x:e.x,y:e.y}},n.prototype.emitEvent=function(e){var r="".concat(this.maskType,":").concat(e),i=this.context.view,a=this.context.event,o={type:this.shapeType,name:this.maskType,get:function(s){return o.hasOwnProperty(s)?o[s]:void 0}};i.emit(r,{target:o,maskShapes:this.maskShapes,multiPoints:this.recordPoints,x:a.x,y:a.y})},n.prototype.createMask=function(e){var r=this.context.view,i=this.recordPoints[e],a=this.getMaskAttrs(i),o=r.foregroundGroup.addShape({type:this.shapeType,name:"mask",draggable:!0,attrs:E({fill:"#C5D4EB",opacity:.3},a)});this.maskShapes.push(o)},n.prototype.getMaskPath=function(e){return[]},n.prototype.show=function(){this.maskShapes.length>0&&(this.maskShapes.forEach(function(e){return e.show()}),this.emitEvent("show"))},n.prototype.start=function(e){this.recordPointStart(),this.starting=!0,this.moving=!1;var r=this.recordPoints.length-1;this.createMask(r),this.updateShapesCapture(!1),this.updateMask(e==null?void 0:e.maskStyle),this.emitEvent("start")},n.prototype.moveStart=function(){this.moving=!0,this.preMovePoint=this.getCurrentPoint(),this.updateShapesCapture(!1)},n.prototype.move=function(){if(!(!this.moving||this.maskShapes.length===0)){var e=this.getCurrentPoint(),r=this.preMovePoint,i=e.x-r.x,a=e.y-r.y,o=this.getCurMaskShapeIndex();o>-1&&(this.recordPoints[o].forEach(function(s){s.x+=i,s.y+=a}),this.updateMask(),this.emitEvent("change"),this.preMovePoint=e)}},n.prototype.updateMask=function(e){var r=this;this.recordPoints.forEach(function(i,a){var o=ot({},r.getMaskAttrs(i),e);r.maskShapes[a].attr(o)})},n.prototype.resize=function(){this.starting&&this.maskShapes.length>0&&(this.recordPointContinue(),this.updateMask(),this.emitEvent("change"))},n.prototype.moveEnd=function(){this.moving=!1,this.preMovePoint=null,this.updateShapesCapture(!0)},n.prototype.end=function(){this.starting=!1,this.emitEvent("end"),this.updateShapesCapture(!0)},n.prototype.hide=function(){this.maskShapes.length>0&&(this.maskShapes.forEach(function(e){return e.hide()}),this.emitEvent("hide"))},n.prototype.remove=function(){var e=this.getCurMaskShapeIndex();e>-1&&(this.recordPoints.splice(e,1),this.maskShapes[e].remove(),this.maskShapes.splice(e,1),this.preMovePoint=null,this.updateShapesCapture(!0),this.emitEvent("change"))},n.prototype.clearAll=function(){this.recordPointClear(),this.maskShapes.forEach(function(e){return e.remove()}),this.maskShapes=[],this.preMovePoint=null},n.prototype.clear=function(){var e=this.getCurMaskShapeIndex();e===-1?(this.recordPointClear(),this.maskShapes.forEach(function(r){return r.remove()}),this.maskShapes=[],this.emitEvent("clearAll")):(this.recordPoints.splice(e,1),this.maskShapes[e].remove(),this.maskShapes.splice(e,1),this.preMovePoint=null,this.emitEvent("clearSingle")),this.preMovePoint=null},n.prototype.destroy=function(){this.clear(),t.prototype.destroy.call(this)},n.prototype.getRecordPoints=function(){var e;return X([],R((e=this.recordPoints)!==null&&e!==void 0?e:[]),!1)},n.prototype.recordPointStart=function(){var e=this.getRecordPoints(),r=this.getCurrentPoint();this.recordPoints=X(X([],R(e),!1),[[r]],!1)},n.prototype.recordPointContinue=function(){var e=this.getRecordPoints(),r=this.getCurrentPoint(),i=e.splice(-1,1)[0]||[];i.push(r),this.recordPoints=X(X([],R(e),!1),[i],!1)},n.prototype.recordPointClear=function(){this.recordPoints=[]},n.prototype.updateShapesCapture=function(e){this.maskShapes.forEach(function(r){return r.set("capture",e)})},n.prototype.getCurMaskShapeIndex=function(){var e=this.getCurrentPoint();return this.maskShapes.findIndex(function(r){var i=r.attrs,a=i.width,o=i.height,s=i.r,l=a===0||o===0||s===0;return!l&&r.isHit(e.x,e.y)})},n}(be),_3=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.shapeType="rect",e}return n.prototype.getRegion=function(e){return O3(e)},n.prototype.getMaskAttrs=function(e){var r=this.getRegion(e),i=r.start,a=r.end;return M3(i,a)},n}(bO),L3=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.dim="x",e.inPlot=!0,e}return n.prototype.getRegion=function(e){var r=this.context.view.getCoordinate();return E3(e,this.dim,this.inPlot,r)},n}(_3),rat=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.shapeType="circle",e.getMaskAttrs=S3,e}return n}(bO),I3=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.getMaskPath=mO,e.getMaskAttrs=C3,e}return n.prototype.addPoint=function(){this.resize()},n}(bO),iat=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.getMaskPath=xO,e.getMaskAttrs=k3,e}return n}(I3),aat=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.setCursor=function(e){var r=this.context.view;r.getCanvas().setCursor(e)},n.prototype.default=function(){this.setCursor("default")},n.prototype.pointer=function(){this.setCursor("pointer")},n.prototype.move=function(){this.setCursor("move")},n.prototype.crosshair=function(){this.setCursor("crosshair")},n.prototype.wait=function(){this.setCursor("wait")},n.prototype.help=function(){this.setCursor("help")},n.prototype.text=function(){this.setCursor("text")},n.prototype.eResize=function(){this.setCursor("e-resize")},n.prototype.wResize=function(){this.setCursor("w-resize")},n.prototype.nResize=function(){this.setCursor("n-resize")},n.prototype.sResize=function(){this.setCursor("s-resize")},n.prototype.neResize=function(){this.setCursor("ne-resize")},n.prototype.nwResize=function(){this.setCursor("nw-resize")},n.prototype.seResize=function(){this.setCursor("se-resize")},n.prototype.swResize=function(){this.setCursor("sw-resize")},n.prototype.nsResize=function(){this.setCursor("ns-resize")},n.prototype.ewResize=function(){this.setCursor("ew-resize")},n.prototype.zoomIn=function(){this.setCursor("zoom-in")},n.prototype.zoomOut=function(){this.setCursor("zoom-out")},n}(be),oat=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.filterView=function(e,r,i){var a=this;e.getScaleByField(r)&&e.filter(r,i),e.views&&e.views.length&&$(e.views,function(o){a.filterView(o,r,i)})},n.prototype.filter=function(){var e=ul(this.context);if(e){var r=this.context.view,i=e.component,a=i.get("field");if(Oh(e)){if(a){var o=i.getItemsByState("unchecked"),s=Wc(r,a),l=o.map(function(d){return d.name});l.length?this.filterView(r,a,function(d){var p=s.getText(d);return!l.includes(p)}):this.filterView(r,a,null),r.render(!0)}}else if(dB(e)){var c=i.getValue(),u=R(c,2),f=u[0],h=u[1];this.filterView(r,a,function(d){return d>=f&&d<=h}),r.render(!0)}}},n}(be);function EP(t,n,e,r){var i=Math.min(e[n],r[n]),a=Math.max(e[n],r[n]),o=R(t.range,2),s=o[0],l=o[1];if(i<s&&(i=s),a>l&&(a=l),i===l&&a===l)return null;var c=t.invert(i),u=t.invert(a);if(t.isCategory){var f=t.values.indexOf(c),h=t.values.indexOf(u),d=t.values.slice(f,h+1);return function(p){return d.includes(p)}}else return function(p){return p>=c&&p<=u}}var gr;(function(t){t.FILTER="brush-filter-processing",t.RESET="brush-filter-reset",t.BEFORE_FILTER="brush-filter:beforefilter",t.AFTER_FILTER="brush-filter:afterfilter",t.BEFORE_RESET="brush-filter:beforereset",t.AFTER_RESET="brush-filter:afterreset"})(gr||(gr={}));var D0=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.dims=["x","y"],e.startPoint=null,e.isStarted=!1,e}return n.prototype.hasDim=function(e){return this.dims.includes(e)},n.prototype.start=function(){var e=this.context;this.isStarted=!0,this.startPoint=e.getCurrentPoint()},n.prototype.filter=function(){var e,r;if(Mh(this.context)){var i=this.context.event.target,a=i.getCanvasBBox();e={x:a.x,y:a.y},r={x:a.maxX,y:a.maxY}}else{if(!this.isStarted)return;e=this.startPoint,r=this.context.getCurrentPoint()}if(!(Math.abs(e.x-r.x)<5||Math.abs(e.x-r.y)<5)){var o=this.context,s=o.view,l=o.event,c={view:s,event:l,dims:this.dims};s.emit(gr.BEFORE_FILTER,ke.fromData(s,gr.BEFORE_FILTER,c));var u=s.getCoordinate(),f=u.invert(r),h=u.invert(e);if(this.hasDim("x")){var d=s.getXScale(),p=EP(d,"x",f,h);this.filterView(s,d.field,p)}if(this.hasDim("y")){var v=s.getYScales()[0],p=EP(v,"y",f,h);this.filterView(s,v.field,p)}this.reRender(s,{source:gr.FILTER}),s.emit(gr.AFTER_FILTER,ke.fromData(s,gr.AFTER_FILTER,c))}},n.prototype.end=function(){this.isStarted=!1},n.prototype.reset=function(){var e=this.context.view;if(e.emit(gr.BEFORE_RESET,ke.fromData(e,gr.BEFORE_RESET,{})),this.isStarted=!1,this.hasDim("x")){var r=e.getXScale();this.filterView(e,r.field,null)}if(this.hasDim("y")){var i=e.getYScales()[0];this.filterView(e,i.field,null)}this.reRender(e,{source:gr.RESET}),e.emit(gr.AFTER_RESET,ke.fromData(e,gr.AFTER_RESET,{}))},n.prototype.filterView=function(e,r,i){e.filter(r,i)},n.prototype.reRender=function(e,r){e.render(!0,r)},n}(be),wO=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.filterView=function(e,r,i){var a=ca(e);$(a,function(o){o.filter(r,i)})},n.prototype.reRender=function(e){var r=ca(e);$(r,function(i){i.render(!0)})},n}(D0),sat=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.filter=function(){var e=ul(this.context),r=this.context.view,i=_n(r);if(Mh(this.context)){var a=zS(this.context,10);a&&$(i,function(v){a.includes(v)?v.show():v.hide()})}else if(e){var o=e.component,s=o.get("field");if(Oh(e)){if(s){var l=o.getItemsByState("unchecked"),c=Wc(r,s),u=l.map(function(v){return v.name});$(i,function(v){var g=$i(v,s),y=c.getText(g);u.indexOf(y)>=0?v.hide():v.show()})}}else if(dB(e)){var f=o.getValue(),h=R(f,2),d=h[0],p=h[1];$(i,function(v){var g=$i(v,s);g>=d&&g<=p?v.show():v.hide()})}}},n.prototype.clear=function(){var e=_n(this.context.view);$(e,function(r){r.show()})},n.prototype.reset=function(){this.clear()},n}(be),F3=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.byRecord=!1,e}return n.prototype.filter=function(){Mh(this.context)&&(this.byRecord?this.filterByRecord():this.filterByBBox())},n.prototype.filterByRecord=function(){var e=this.context.view,r=zS(this.context,10);if(r){var i=e.getXScale().field,a=e.getYScales()[0].field,o=r.map(function(l){return l.getModel().data}),s=ca(e);$(s,function(l){var c=_n(l);$(c,function(u){var f=u.getModel().data;xB(o,f,i,a)?u.show():u.hide()})})}},n.prototype.filterByBBox=function(){var e=this,r=this.context.view,i=ca(r);$(i,function(a){var o=pB(e.context,a,10),s=_n(a);o&&$(s,function(l){o.includes(l)?l.show():l.hide()})})},n.prototype.reset=function(){var e=ca(this.context.view);$(e,function(r){var i=_n(r);$(i,function(a){a.show()})})},n}(be),lat=10,cat=5,uat=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.buttonGroup=null,e.buttonCfg={name:"button",text:"button",textStyle:{x:0,y:0,fontSize:12,fill:"#333333",cursor:"pointer"},padding:[8,10],style:{fill:"#f7f7f7",stroke:"#cccccc",cursor:"pointer"},activeStyle:{fill:"#e6e6e6"}},e}return n.prototype.getButtonCfg=function(){return ot(this.buttonCfg,this.cfg)},n.prototype.drawButton=function(){var e=this.getButtonCfg(),r=this.context.view.foregroundGroup.addGroup({name:e.name}),i=r.addShape({type:"text",name:"button-text",attrs:E({text:e.text},e.textStyle)}),a=i.getBBox(),o=WS(e.padding),s=r.addShape({type:"rect",name:"button-rect",attrs:E({x:a.x-o[3],y:a.y-o[0],width:a.width+o[1]+o[3],height:a.height+o[0]+o[2]},e.style)});s.toBack(),r.on("mouseenter",function(){s.attr(e.activeStyle)}),r.on("mouseleave",function(){s.attr(e.style)}),this.buttonGroup=r},n.prototype.resetPosition=function(){var e=this.context.view,r=e.getCoordinate(),i=r.convert({x:1,y:1}),a=this.buttonGroup,o=a.getBBox(),s=sn(null,[["t",i.x-o.width-lat,i.y+o.height+cat]]);a.setMatrix(s)},n.prototype.show=function(){this.buttonGroup||this.drawButton(),this.resetPosition(),this.buttonGroup.show()},n.prototype.hide=function(){this.buttonGroup&&this.buttonGroup.hide()},n.prototype.destroy=function(){var e=this.buttonGroup;e&&e.remove(),t.prototype.destroy.call(this)},n}(be),fat=4,hat=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.starting=!1,e.dragStart=!1,e}return n.prototype.start=function(){this.starting=!0,this.startPoint=this.context.getCurrentPoint()},n.prototype.drag=function(){if(this.startPoint){var e=this.context.getCurrentPoint(),r=this.context.view,i=this.context.event;this.dragStart?r.emit("drag",{target:i.target,x:i.x,y:i.y}):GS(e,this.startPoint)>fat&&(r.emit("dragstart",{target:i.target,x:i.x,y:i.y}),this.dragStart=!0)}},n.prototype.end=function(){if(this.dragStart){var e=this.context.view,r=this.context.event;e.emit("dragend",{target:r.target,x:r.x,y:r.y})}this.starting=!1,this.dragStart=!1},n}(be),dat=5,pat=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.starting=!1,e.isMoving=!1,e.startPoint=null,e.startMatrix=null,e}return n.prototype.start=function(){this.starting=!0,this.startPoint=this.context.getCurrentPoint(),this.startMatrix=this.context.view.middleGroup.getMatrix()},n.prototype.move=function(){if(this.starting){var e=this.startPoint,r=this.context.getCurrentPoint(),i=GS(e,r);if(i>dat&&!this.isMoving&&(this.isMoving=!0),this.isMoving){var a=this.context.view,o=sn(this.startMatrix,[["t",r.x-e.x,r.y-e.y]]);a.backgroundGroup.setMatrix(o),a.foregroundGroup.setMatrix(o),a.middleGroup.setMatrix(o)}}},n.prototype.end=function(){this.isMoving&&(this.isMoving=!1),this.startMatrix=null,this.starting=!1,this.startPoint=null},n.prototype.reset=function(){this.starting=!1,this.startPoint=null,this.isMoving=!1;var e=this.context.view;e.backgroundGroup.resetMatrix(),e.foregroundGroup.resetMatrix(),e.middleGroup.resetMatrix(),this.isMoving=!1},n}(be),TP="x",CP="y",D3=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.dims=[TP,CP],e.cfgFields=["dims"],e.cacheScaleDefs={},e}return n.prototype.hasDim=function(e){return this.dims.includes(e)},n.prototype.getScale=function(e){var r=this.context.view;return e==="x"?r.getXScale():r.getYScales()[0]},n.prototype.resetDim=function(e){var r=this.context.view;if(this.hasDim(e)&&this.cacheScaleDefs[e]){var i=this.getScale(e);r.scale(i.field,this.cacheScaleDefs[e]),this.cacheScaleDefs[e]=null}},n.prototype.reset=function(){this.resetDim(TP),this.resetDim(CP);var e=this.context.view;e.render(!0)},n}(be),vat=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.startPoint=null,e.starting=!1,e.startCache={},e}return n.prototype.start=function(){var e=this;this.startPoint=this.context.getCurrentPoint(),this.starting=!0;var r=this.dims;$(r,function(i){var a=e.getScale(i),o=a.min,s=a.max,l=a.values;e.startCache[i]={min:o,max:s,values:l}})},n.prototype.end=function(){this.startPoint=null,this.starting=!1,this.startCache={}},n.prototype.translate=function(){var e=this;if(this.starting){var r=this.startPoint,i=this.context.view.getCoordinate(),a=this.context.getCurrentPoint(),o=i.invert(r),s=i.invert(a),l=s.x-o.x,c=s.y-o.y,u=this.context.view,f=this.dims;$(f,function(h){e.translateDim(h,{x:l*-1,y:c*-1})}),u.render(!0)}},n.prototype.translateDim=function(e,r){if(this.hasDim(e)){var i=this.getScale(e);i.isLinear&&this.translateLinear(e,i,r)}},n.prototype.translateLinear=function(e,r,i){var a=this.context.view,o=this.startCache[e],s=o.min,l=o.max,c=l-s,u=i[e]*c;this.cacheScaleDefs[e]||(this.cacheScaleDefs[e]={nice:r.nice,min:s,max:l}),a.scale(r.field,{nice:!1,min:s+u,max:l+u})},n.prototype.reset=function(){t.prototype.reset.call(this),this.startPoint=null,this.starting=!1},n}(D3),gat=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.zoomRatio=.05,e}return n.prototype.zoomIn=function(){this.zoom(this.zoomRatio)},n.prototype.zoom=function(e){var r=this,i=this.dims;$(i,function(a){r.zoomDim(a,e)}),this.context.view.render(!0)},n.prototype.zoomOut=function(){this.zoom(-1*this.zoomRatio)},n.prototype.zoomDim=function(e,r){if(this.hasDim(e)){var i=this.getScale(e);i.isLinear&&this.zoomLinear(e,i,r)}},n.prototype.zoomLinear=function(e,r,i){var a=this.context.view;this.cacheScaleDefs[e]||(this.cacheScaleDefs[e]={nice:r.nice,min:r.min,max:r.max});var o=this.cacheScaleDefs[e],s=o.max-o.min,l=r.min,c=r.max,u=i*s,f=l-u,h=c+u,d=h-f,p=d/s;h>f&&p<100&&p>.01&&a.scale(r.field,{nice:!1,min:l-u,max:c+u})},n}(D3);function yat(t){var n=t.gEvent.originalEvent;return n.deltaY>0}var mat=1,xat=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.scroll=function(e){var r=this.context,i=r.view,a=r.event;if(i.getOptions().scrollbar){var o=(e==null?void 0:e.wheelDelta)||mat,s=i.getController("scrollbar"),l=i.getXScale(),c=i.getOptions().data,u=mn(Ni(c,l.field)),f=mn(l.values),h=s.getValue(),d=Math.floor((u-f)*h),p=d+(yat(a)?o:-o),v=o/(u-f)/1e4,g=we(p/(u-f)+v,0,1);s.setValue(g)}},n}(be),bat="aixs-description-tooltip",wat=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.show=function(){var e=this.context,r=ul(e).axis,i=r.cfg.title,a=i.description,o=i.text,s=i.descriptionTooltipStyle,l=e.event,c=l.x,u=l.y;this.tooltip||this.renderTooltip(),this.tooltip.update({title:o||"",customContent:function(){return`
          <div class="`.concat(Za,'" style={').concat(s,`}>
            <div class="`).concat(Ka,`">
              字段说明：`).concat(a,`
            </div>
          </div>
        `)},x:c,y:u}),this.tooltip.show()},n.prototype.destroy=function(){t.prototype.destroy.call(this),this.tooltip&&this.tooltip.destroy()},n.prototype.hide=function(){this.tooltip&&this.tooltip.hide()},n.prototype.renderTooltip=function(){var e,r=this.context.view,i=r.canvas,a={start:{x:0,y:0},end:{x:i.get("width"),y:i.get("height")}},o=new E0({parent:i.get("el").parentNode,region:a,visible:!1,containerId:bat,domStyles:E({},ot({},(e={},e[Za]={"max-width":"50%",padding:"10px","line-height":"15px","font-size":"12px",color:"rgba(0, 0, 0, .65)"},e[Ka]={"word-break":"break-all","margin-bottom":"3px"},e)))});o.init(),o.setCapture(!1),this.tooltip=o},n}(be);Ott("dark",wB(fet));rR("canvas",int);rR("svg",Bnt);wa("Polygon",Knt);wa("Interval",Hnt);wa("Schema",Qnt);wa("Path",rO);wa("Point",qnt);wa("Line",Xnt);wa("Area",$nt);wa("Edge",jnt);wa("Heatmap",znt);wa("Violin",trt);wd("base",L0);wd("interval",grt);wd("pie",yrt);wd("polar",p3);Cr("overlap",_rt);Cr("distribute",xrt);Cr("fixed-overlap",krt);Cr("hide-overlap",zrt);Cr("limit-in-shape",Ert);Cr("limit-in-canvas",Art);Cr("limit-in-plot",iit);Cr("pie-outer",wrt);Cr("adjust-color",Yrt);Cr("interval-adjust-position",Xrt);Cr("interval-hide-overlap",qrt);Cr("point-adjust-position",Qrt);Cr("pie-spider",Mrt);Cr("path-adjust-position",eit);Ur("fade-in",ait);Ur("fade-out",oit);Ur("grow-in-x",lit);Ur("grow-in-xy",uit);Ur("grow-in-y",cit);Ur("scale-in-x",dit);Ur("scale-in-y",pit);Ur("wave-in",git);Ur("zoom-in",yit);Ur("zoom-out",mit);Ur("position-update",hit);Ur("sector-path-update",vit);Ur("path-in",fit);ku("rect",Oit);ku("mirror",Sit);ku("list",bit);ku("matrix",wit);ku("circle",xit);ku("tree",Mit);Pl("axis",Tit);Pl("legend",Cit);Pl("tooltip",EB);Pl("annotation",Eit);Pl("slider",Pit);Pl("scrollbar",Lit);ht("tooltip",x3);ht("sibling-tooltip",Rit);ht("ellipsis-text",Bit);ht("element-active",Nit);ht("element-single-active",zit);ht("element-range-active",jit);ht("element-highlight",vO);ht("element-highlight-by-x",Yit);ht("element-highlight-by-color",Git);ht("element-single-highlight",Wit);ht("element-range-highlight",w3);ht("element-sibling-highlight",w3,{effectSiblings:!0,effectByRecord:!0});ht("element-selected",Hit);ht("element-single-selected",Xit);ht("element-range-selected",Vit);ht("element-link-by-color",$it);ht("active-region",Dit);ht("list-active",Uit);ht("list-selected",Zit);ht("list-highlight",gO);ht("list-unchecked",Kit);ht("list-checked",Qit);ht("list-focus",Jit);ht("list-radio",tat);ht("legend-item-highlight",gO,{componentNames:["legend"]});ht("axis-label-highlight",gO,{componentNames:["axis"]});ht("axis-description",wat);ht("rect-mask",A3);ht("x-rect-mask",T3,{dim:"x"});ht("y-rect-mask",T3,{dim:"y"});ht("circle-mask",eat);ht("path-mask",P3);ht("smooth-path-mask",nat);ht("rect-multi-mask",_3);ht("x-rect-multi-mask",L3,{dim:"x"});ht("y-rect-multi-mask",L3,{dim:"y"});ht("circle-multi-mask",rat);ht("path-multi-mask",I3);ht("smooth-path-multi-mask",iat);ht("cursor",aat);ht("data-filter",oat);ht("brush",D0);ht("brush-x",D0,{dims:["x"]});ht("brush-y",D0,{dims:["y"]});ht("sibling-filter",wO);ht("sibling-x-filter",wO,{dims:"x"});ht("sibling-y-filter",wO,{dims:"y"});ht("element-filter",sat);ht("element-sibling-filter",F3);ht("element-sibling-filter-record",F3,{byRecord:!0});ht("view-drag",hat);ht("view-move",pat);ht("scale-translate",vat);ht("scale-zoom",gat);ht("reset-button",uat,{name:"reset-button",text:"reset"});ht("mousewheel-scroll",xat);function za(t){return t.isInPlot()}wt("tooltip",{start:[{trigger:"plot:mousemove",action:"tooltip:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"plot:touchmove",action:"tooltip:show",throttle:{wait:50,leading:!0,trailing:!1}}],end:[{trigger:"plot:mouseleave",action:"tooltip:hide"},{trigger:"plot:leave",action:"tooltip:hide"},{trigger:"plot:touchend",action:"tooltip:hide"}]});wt("ellipsis-text",{start:[{trigger:"legend-item-name:mousemove",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"legend-item-name:touchstart",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"axis-label:mousemove",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"axis-label:touchstart",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}}],end:[{trigger:"legend-item-name:mouseleave",action:"ellipsis-text:hide"},{trigger:"legend-item-name:touchend",action:"ellipsis-text:hide"},{trigger:"axis-label:mouseleave",action:"ellipsis-text:hide"},{trigger:"axis-label:mouseout",action:"ellipsis-text:hide"},{trigger:"axis-label:touchend",action:"ellipsis-text:hide"}]});wt("element-active",{start:[{trigger:"element:mouseenter",action:"element-active:active"}],end:[{trigger:"element:mouseleave",action:"element-active:reset"}]});wt("element-selected",{start:[{trigger:"element:click",action:"element-selected:toggle"}]});wt("element-highlight",{start:[{trigger:"element:mouseenter",action:"element-highlight:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight:reset"}]});wt("element-highlight-by-x",{start:[{trigger:"element:mouseenter",action:"element-highlight-by-x:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight-by-x:reset"}]});wt("element-highlight-by-color",{start:[{trigger:"element:mouseenter",action:"element-highlight-by-color:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight-by-color:reset"}]});wt("legend-active",{start:[{trigger:"legend-item:mouseenter",action:["list-active:active","element-active:active"]}],end:[{trigger:"legend-item:mouseleave",action:["list-active:reset","element-active:reset"]}]});wt("legend-highlight",{start:[{trigger:"legend-item:mouseenter",action:["legend-item-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"legend-item:mouseleave",action:["legend-item-highlight:reset","element-highlight:reset"]}]});wt("axis-label-highlight",{start:[{trigger:"axis-label:mouseenter",action:["axis-label-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"axis-label:mouseleave",action:["axis-label-highlight:reset","element-highlight:reset"]}]});wt("element-list-highlight",{start:[{trigger:"element:mouseenter",action:["list-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"element:mouseleave",action:["list-highlight:reset","element-highlight:reset"]}]});wt("element-range-highlight",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"mask:mouseenter",action:"cursor:move"},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:function(t){return!t.isInShape("mask")},action:["rect-mask:start","rect-mask:show"]},{trigger:"mask:dragstart",action:["rect-mask:moveStart"]}],processing:[{trigger:"plot:mousemove",action:["rect-mask:resize"]},{trigger:"mask:drag",action:["rect-mask:move"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["rect-mask:end"]},{trigger:"mask:dragend",action:["rect-mask:moveEnd"]},{trigger:"document:mouseup",isEnable:function(t){return!t.isInPlot()},action:["element-range-highlight:clear","rect-mask:end","rect-mask:hide"]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear","rect-mask:hide"]}]});wt("brush",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:za,action:["brush:start","rect-mask:start","rect-mask:show"]}],processing:[{trigger:"mousemove",isEnable:za,action:["rect-mask:resize"]}],end:[{trigger:"mouseup",isEnable:za,action:["brush:filter","brush:end","rect-mask:end","rect-mask:hide","reset-button:show"]}],rollback:[{trigger:"reset-button:click",action:["brush:reset","reset-button:hide","cursor:crosshair"]}]});wt("brush-visible",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"plot:mousedown",action:["rect-mask:start","rect-mask:show"]}],processing:[{trigger:"plot:mousemove",action:["rect-mask:resize"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["rect-mask:end","rect-mask:hide","element-filter:filter","element-range-highlight:clear"]}],rollback:[{trigger:"dblclick",action:["element-filter:clear"]}]});wt("brush-x",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:za,action:["brush-x:start","x-rect-mask:start","x-rect-mask:show"]}],processing:[{trigger:"mousemove",isEnable:za,action:["x-rect-mask:resize"]}],end:[{trigger:"mouseup",isEnable:za,action:["brush-x:filter","brush-x:end","x-rect-mask:end","x-rect-mask:hide"]}],rollback:[{trigger:"dblclick",action:["brush-x:reset"]}]});wt("element-path-highlight",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:za,action:"path-mask:start"},{trigger:"mousedown",isEnable:za,action:"path-mask:show"}],processing:[{trigger:"mousemove",action:"path-mask:addPoint"}],end:[{trigger:"mouseup",action:"path-mask:end"}],rollback:[{trigger:"dblclick",action:"path-mask:hide"}]});wt("brush-x-multi",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"mask:mouseenter",action:"cursor:move"},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"mousedown",isEnable:za,action:["x-rect-multi-mask:start","x-rect-multi-mask:show"]},{trigger:"mask:dragstart",action:["x-rect-multi-mask:moveStart"]}],processing:[{trigger:"mousemove",isEnable:function(t){return!P0(t)},action:["x-rect-multi-mask:resize"]},{trigger:"multi-mask:change",action:"element-range-highlight:highlight"},{trigger:"mask:drag",action:["x-rect-multi-mask:move"]}],end:[{trigger:"mouseup",action:["x-rect-multi-mask:end"]},{trigger:"mask:dragend",action:["x-rect-multi-mask:moveEnd"]}],rollback:[{trigger:"dblclick",action:["x-rect-multi-mask:clear","cursor:crosshair"]},{trigger:"multi-mask:clearAll",action:["element-range-highlight:clear"]},{trigger:"multi-mask:clearSingle",action:["element-range-highlight:highlight"]}]});wt("element-single-selected",{start:[{trigger:"element:click",action:"element-single-selected:toggle"}]});wt("legend-filter",{showEnable:[{trigger:"legend-item:mouseenter",action:["cursor:pointer","list-radio:show"]},{trigger:"legend-item:mouseleave",action:["cursor:default","list-radio:hide"]}],start:[{trigger:"legend-item:click",isEnable:function(t){return!t.isInShape("legend-item-radio")},action:["legend-item-highlight:reset","element-highlight:reset","list-unchecked:toggle","data-filter:filter","list-radio:show"]},{trigger:"legend-item-radio:mouseenter",action:["list-radio:showTip"]},{trigger:"legend-item-radio:mouseleave",action:["list-radio:hideTip"]},{trigger:"legend-item-radio:click",action:["list-focus:toggle","data-filter:filter","list-radio:show"]}]});wt("continuous-filter",{start:[{trigger:"legend:valuechanged",action:"data-filter:filter"}]});wt("continuous-visible-filter",{start:[{trigger:"legend:valuechanged",action:"element-filter:filter"}]});wt("legend-visible-filter",{showEnable:[{trigger:"legend-item:mouseenter",action:"cursor:pointer"},{trigger:"legend-item:mouseleave",action:"cursor:default"}],start:[{trigger:"legend-item:click",action:["legend-item-highlight:reset","element-highlight:reset","list-unchecked:toggle","element-filter:filter"]}]});wt("active-region",{start:[{trigger:"plot:mousemove",action:"active-region:show"}],end:[{trigger:"plot:mouseleave",action:"active-region:hide"}]});wt("axis-description",{start:[{trigger:"axis-description:mousemove",action:"axis-description:show"}],end:[{trigger:"axis-description:mouseleave",action:"axis-description:hide"}]});function PP(t){return t.gEvent.preventDefault(),t.gEvent.originalEvent.deltaY>0}wt("view-zoom",{start:[{trigger:"plot:mousewheel",isEnable:function(t){return PP(t.event)},action:"scale-zoom:zoomOut",throttle:{wait:100,leading:!0,trailing:!1}},{trigger:"plot:mousewheel",isEnable:function(t){return!PP(t.event)},action:"scale-zoom:zoomIn",throttle:{wait:100,leading:!0,trailing:!1}}]});wt("sibling-tooltip",{start:[{trigger:"plot:mousemove",action:"sibling-tooltip:show"}],end:[{trigger:"plot:mouseleave",action:"sibling-tooltip:hide"}]});wt("plot-mousewheel-scroll",{start:[{trigger:"plot:mousewheel",action:"mousewheel-scroll:scroll"}]});var Sr=["type","alias","tickCount","tickInterval","min","max","nice","minLimit","maxLimit","range","tickMethod","base","exponent","mask","sync"],ji;(function(t){t.ERROR="error",t.WARN="warn",t.INFO="log"})(ji||(ji={}));var Sat="AntV/G2Plot";function Oat(t){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];var r=0;return"".concat(Sat,": ").concat(t.replace(/%s/g,function(){return"".concat(n[r++])}))}function Ja(t,n,e){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];n||console[t](Oat.apply(void 0,X([e],r,!1)))}function Kt(t,n){var e={};return t!==null&&typeof t=="object"&&n.forEach(function(r){var i=t[r];i!==void 0&&(e[r]=i)}),e}function SO(t,n){if(!t)return{};var e=t.filter(function(a){var o=z(a,[n]);return bt(o)&&!isNaN(o)}),r=e.every(function(a){return z(a,[n])>=0}),i=e.every(function(a){return z(a,[n])<=0});return r?{min:0}:i?{max:0}:{}}function R3(t,n,e,r,i){if(i===void 0&&(i=[]),!Array.isArray(t))return{nodes:[],links:[]};var a=[],o={},s=-1;return t.forEach(function(l){var c=l[n],u=l[e],f=l[r],h=Kt(l,i);o[c]||(o[c]=E({id:++s,name:c},h)),o[u]||(o[u]=E({id:++s,name:u},h)),a.push(E({source:o[c].id,target:o[u].id,value:f},h))}),{nodes:Object.values(o).sort(function(l,c){return l.id-c.id}),links:a}}function Xc(t,n){var e=Ln(t,function(r){var i=r[n];return i===null||typeof i=="number"&&!isNaN(i)});return Ja(ji.WARN,e.length===t.length,"illegal data existed in chart data."),e}var Mat=5,Aat={}.toString,B3=function(t,n){return Aat.call(t)==="[object "+n+"]"},Eat=function(t){return B3(t,"Array")},Tat=function(t){return typeof t=="object"&&t!==null},kP=function(t){if(!Tat(t)||!B3(t,"Object"))return!1;for(var n=t;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(t)===n},N3=function(t,n,e,r){e=e||0,r=r||Mat;for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){var a=n[i];a?kP(a)?(kP(t[i])||(t[i]={}),e<r?N3(t[i],a,e+1,r):t[i]=n[i]):Eat(a)?(t[i]=[],t[i]=t[i].concat(a)):t[i]=a:t[i]=a}},U=function(t){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];for(var r=0;r<n.length;r+=1)N3(t,n[r]);return t};function Jb(t){if(!t)return{width:0,height:0};var n=getComputedStyle(t);return{width:(t.clientWidth||parseInt(n.width,10))-parseInt(n.paddingLeft,10)-parseInt(n.paddingRight,10),height:(t.clientHeight||parseInt(n.height,10))-parseInt(n.paddingTop,10)-parseInt(n.paddingBottom,10)}}function xt(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return function(e){return t.reduce(function(r,i){return i(r)},e)}}function Bn(t,n){return t.geometries.find(function(e){return e.type===n})}function Pg(t){return Hn(t.geometries,function(n,e){return n.concat(e.elements)},[])}function Th(t){return z(t,["views","length"],0)<=0?Pg(t):Hn(t.views,function(n,e){return n.concat(Th(e))},Pg(t))}function Cat(t){return z(t,["views","length"],0)<=0?t.geometries:Hn(t.views,function(n,e){return n.concat(e.geometries)},t.geometries)}function _P(t){if(!t)return t;var n=t.match(/(([A-Z]{0,1}[a-z]*[^A-Z])|([A-Z]{1}))/g);return n.map(function(e){return e.toLowerCase()}).join("-")}function xn(t){if(!as(t,"Object"))return t;var n=E({},t);return n.formatter&&!n.content&&(n.content=n.formatter),n}var N1;function Pat(){return N1||(N1=document.createElement("canvas").getContext("2d")),N1}Mu(function(t,n){n===void 0&&(n={});var e=n.fontSize,r=n.fontFamily,i=r===void 0?"sans-serif":r,a=n.fontWeight,o=n.fontStyle,s=n.fontVariant,l=Pat();l.font=[o,a,s,"".concat(e,"px"),i].join(" ");var c=l.measureText(pt(t)?t:"");return c.width},function(t,n){return n===void 0&&(n={}),X([t],Qy(n),!0).join("")});function hl(t){return typeof t=="number"&&!isNaN(t)}function kat(t,n,e){var r=Math.min(n,e),i=Math.max(n,e);return t>=r&&t<=i}function Zo(t){if(bt(t))return[t,t,t,t];if(et(t)){var n=t.length;if(n===1)return[t[0],t[0],t[0],t[0]];if(n===2)return[t[0],t[1],t[0],t[1]];if(n===3)return[t[0],t[1],t[2],t[1]];if(n===4)return t}return[0,0,0,0]}function R0(t,n,e){n===void 0&&(n="bottom"),e===void 0&&(e=25);var r=Zo(t),i=[n.startsWith("top")?e:0,n.startsWith("right")?e:0,n.startsWith("bottom")?e:0,n.startsWith("left")?e:0];return[r[0]+i[0],r[1]+i[1],r[2]+i[2],r[3]+i[3]]}function OO(t){var n=t.map(function(r){return Zo(r)}),e=[0,0,0,0];return n.length>0&&(e=e.map(function(r,i){return n.forEach(function(a,o){r+=n[o][i]}),r})),e}function _at(t,n){var e=[];if(t.length){e.push(["M",t[0].x,t[0].y]);for(var r=1,i=t.length;r<i;r+=1){var a=t[r];e.push(["L",a.x,a.y])}n&&e.push(["Z"])}return e}var Lat=function(t,n,e,r){var i=[],a,o,s=!!r,l,c;if(s){l=[1/0,1/0],c=[-1/0,-1/0];for(var u=0,f=t.length;u<f;u++){var h=t[u];l=An([0,0],l,h),c=En([0,0],c,h)}l=An([0,0],l,r[0]),c=En([0,0],c,r[1])}for(var u=0,d=t.length;u<d;u++){var h=t[u];if(e)a=t[u?u-1:d-1],o=t[(u+1)%d];else if(u===0||u===d-1){i.push(h);continue}else a=t[u-1],o=t[u+1];var p=[0,0];p=Xs(p,o,a),p=nr(p,p,n);var v=Nc(h,a),g=Nc(h,o),y=v+g;y!==0&&(v/=y,g/=y);var m=nr([0,0],p,-v),x=nr([0,0],p,g),b=na([0,0],h,m),w=na([0,0],h,x);s&&(b=En([0,0],b,l),b=An([0,0],b,c),w=En([0,0],w,l),w=An([0,0],w,c)),i.push(b),i.push(w)}return e&&i.push(i.shift()),i};function Iat(t,n,e){for(var r=!!n,i=[],a=0,o=t.length;a<o;a+=2)i.push([t[a],t[a+1]]);for(var s=Lat(i,.4,r,e),l=i.length,c=[],u,f,h,a=0;a<l-1;a++)u=s[a*2],f=s[a*2+1],h=i[a+1],c.push(["C",u[0],u[1],f[0],f[1],h[0],h[1]]);return r&&(u=s[l],f=s[l+1],h=i[0],c.push(["C",u[0],u[1],f[0],f[1],h[0],h[1]])),c}function Fat(t,n,e){var r=[],i=t[0],a=null;if(t.length<=2)return _at(t,n);for(var o=0,s=t.length;o<s;o++){var l=t[o];(!a||!(a.x===l.x&&a.y===l.y))&&(r.push(l.x),r.push(l.y),a=l)}var c=e||[[0,0],[1,1]],u=Iat(r,n,c);return u.unshift(["M",i.x,i.y]),u}function $3(t){var n={overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis",display:"flex",justifyContent:"center",alignItems:"center"},e=["stroke","lineWidth","shadowColor","strokeOpacity","shadowBlur","shadowOffsetX","shadowOffsetY","fill"];z(t,"fill")&&(n.color=t.fill);var r=Kt(t,e),i=r.shadowColor,a=r.shadowBlur,o=a===void 0?0:a,s=r.shadowOffsetX,l=s===void 0?0:s,c=r.shadowOffsetY,u=c===void 0?0:c;n["text-shadow"]="".concat([i,"".concat(l,"px"),"".concat(u,"px"),"".concat(o,"px")].join(" "));var f=Kt(t,e),h=f.stroke,d=f.lineWidth,p=d===void 0?0:d;return n["-webkit-text-stroke"]="".concat(["".concat(p,"px"),h].join(" ")),$(t,function(v,g){["fontSize"].includes(g)&&bt(v)?n[_P(g)]="".concat(v,"px"):g&&!e.includes(g)&&(n[_P(g)]="".concat(v))}),n}function j3(t,n){t.style["pointer-events"]="none",$(n,function(e,r){r&&e&&(t.style[r]=e)})}var B0=function(t,n,e){var r=n.statistic,i=n.plotType,a=r.title,o=r.content;[a,o].forEach(function(s,l){if(s){var c="";l===0?c=o?"translate(-50%, -100%)":"translate(-50%, -50%)":c=a?"translate(-50%, 0)":"translate(-50%, -50%)";var u=ut(s.style)?s.style(e):s.style;t.annotation().html(E({position:["50%","50%"],html:function(f,h){var d=h.getCoordinate(),p=0;if(i==="pie"||i==="ring-progress")p=d.getRadius()*d.innerRadius*2;else if(i==="liquid"){var v=z(h.geometries,[0,"elements",0,"shape"]);if(v){var g=v.find(function(b){return b.get("name")==="wrap"}),y=g.getCanvasBBox().width;p=y}}else p||(p=d.getWidth());j3(f,E({width:"".concat(p,"px"),transform:c},$3(u)));var m=h.getData();if(s.customHtml)return s.customHtml(f,h,e,m);var x=s.content;return s.formatter&&(x=s.formatter(e,m)),x?pt(x)?x:"".concat(x):"<div></div>"},key:"".concat(l===0?"top":"bottom","-statistic")},Kt(s,["offsetX","offsetY","rotate","style","formatter"])))}})},Dat=function(t,n,e){var r=n.statistic,i=r.title,a=r.content;[i,a].forEach(function(o){if(o){var s=ut(o.style)?o.style(e):o.style;t.annotation().html(E({position:["50%","100%"],html:function(l,c){var u=c.getCoordinate(),f=c.views[0].getCoordinate(),h=f.getCenter(),d=f.getRadius(),p=Math.max(Math.sin(f.startAngle),Math.sin(f.endAngle))*d,v=h.y+p-u.y.start-parseFloat(z(s,"fontSize",0)),g=u.getRadius()*u.innerRadius*2;j3(l,E({width:"".concat(g,"px"),transform:"translate(-50%, ".concat(v,"px)")},$3(s)));var y=c.getData();if(o.customHtml)return o.customHtml(l,c,e,y);var m=o.content;return o.formatter&&(m=o.formatter(e,y)),m?pt(m)?m:"".concat(m):"<div></div>"}},Kt(o,["offsetX","offsetY","rotate","style","formatter"])))}})};function z3(t,n){return n?Hn(n,function(e,r,i){return e.replace(new RegExp("{\\s*".concat(i,"\\s*}"),"g"),r)},t):t}function Lt(t,n){return t.views.find(function(e){return e.id===n})}function bf(t){var n=t.parent;return n?n.views:[]}function LP(t){return bf(t).filter(function(n){return n!==t})}function Md(t,n,e){e===void 0&&(e=t.geometries),typeof n=="boolean"?t.animate(n):t.animate(!0),$(e,function(r){var i;ut(n)?i=n(r.type||r.shapeType,r)||!0:i=n,r.animate(i)})}function N0(){return typeof window=="object"?window==null?void 0:window.devicePixelRatio:2}function MO(t,n){n===void 0&&(n=t);var e=document.createElement("canvas"),r=N0();e.width=t*r,e.height=n*r,e.style.width="".concat(t,"px"),e.style.height="".concat(n,"px");var i=e.getContext("2d");return i.scale(r,r),e}function AO(t,n,e,r){r===void 0&&(r=e);var i=n.backgroundColor,a=n.opacity;t.globalAlpha=a,t.fillStyle=i,t.beginPath(),t.fillRect(0,0,e,r),t.closePath()}function G3(t,n,e){var r=t+n;return e?r*2:r}function Y3(t,n){var e=n?[[t*.25,t*.25],[t*.75,t*.75]]:[[t*.5,t*.5]];return e}function EO(t,n){var e=n*Math.PI/180,r={a:Math.cos(e)*(1/t),b:Math.sin(e)*(1/t),c:-Math.sin(e)*(1/t),d:Math.cos(e)*(1/t),e:0,f:0};return r}var Rat={size:6,padding:2,backgroundColor:"transparent",opacity:1,rotation:0,fill:"#fff",fillOpacity:.5,stroke:"transparent",lineWidth:0,isStagger:!0};function Bat(t,n,e,r){var i=n.size,a=n.fill,o=n.lineWidth,s=n.stroke,l=n.fillOpacity;t.beginPath(),t.globalAlpha=l,t.fillStyle=a,t.strokeStyle=s,t.lineWidth=o,t.arc(e,r,i/2,0,2*Math.PI,!1),t.fill(),o&&t.stroke(),t.closePath()}function Nat(t){var n=U({},Rat,t),e=n.size,r=n.padding,i=n.isStagger,a=n.rotation,o=G3(e,r,i),s=Y3(o,i),l=MO(o,o),c=l.getContext("2d");AO(c,n,o);for(var u=0,f=s;u<f.length;u++){var h=f[u],d=h[0],p=h[1];Bat(c,n,d,p)}var v=c.createPattern(l,"repeat");if(v){var g=N0(),y=EO(g,a);v.setTransform(y)}return v}var $at={rotation:45,spacing:5,opacity:1,backgroundColor:"transparent",strokeOpacity:.5,stroke:"#fff",lineWidth:2};function jat(t,n,e){var r=n.stroke,i=n.lineWidth,a=n.strokeOpacity,o=new Path2D(e);t.globalAlpha=a,t.lineCap="square",t.strokeStyle=i?r:"transparent",t.lineWidth=i,t.stroke(o)}function zat(t){var n=U({},$at,t),e=n.spacing,r=n.rotation,i=n.lineWidth,a=e+i||1,o=e+i||1,s=`
            M 0 0 L `.concat(a,` 0
            M 0 `).concat(o," L ").concat(a," ").concat(o,`
            `),l=MO(a,o),c=l.getContext("2d");AO(c,n,a,o),jat(c,n,s);var u=c.createPattern(l,"repeat");if(u){var f=N0(),h=EO(f,r);u.setTransform(h)}return u}var Gat={size:6,padding:1,isStagger:!0,backgroundColor:"transparent",opacity:1,rotation:0,fill:"#fff",fillOpacity:.5,stroke:"transparent",lineWidth:0};function Yat(t,n,e,r){var i=n.stroke,a=n.size,o=n.fill,s=n.lineWidth,l=n.fillOpacity;t.globalAlpha=l,t.strokeStyle=i,t.lineWidth=s,t.fillStyle=o,t.strokeRect(e-a/2,r-a/2,a,a),t.fillRect(e-a/2,r-a/2,a,a)}function Wat(t){var n=U({},Gat,t),e=n.size,r=n.padding,i=n.isStagger,a=n.rotation,o=G3(e,r,i),s=Y3(o,i),l=MO(o,o),c=l.getContext("2d");AO(c,n,o);for(var u=0,f=s;u<f.length;u++){var h=f[u],d=h[0],p=h[1];Yat(c,n,d,p)}var v=c.createPattern(l,"repeat");if(v){var g=N0(),y=EO(g,a);v.setTransform(y)}return v}function Vat(t){var n=t.type,e=t.cfg,r;switch(n){case"dot":r=Nat(e);break;case"line":r=zat(e);break;case"square":r=Wat(e);break}return r}function qr(t){var n=this;return function(e){var r,i=e.options,a=e.chart,o=i.pattern;if(!o)return e;var s=function(l){for(var c,u,f,h=[],d=1;d<arguments.length;d++)h[d-1]=arguments[d];var p=a.getTheme().defaultColor,v=p,g=(u=(c=a.geometries)===null||c===void 0?void 0:c[0])===null||u===void 0?void 0:u.getAttribute("color");if(g){var y=g.getFields()[0],m=z(l,y);v=Ar.getMappingValue(g,m,((f=g.values)===null||f===void 0?void 0:f[0])||p)}var x=o;typeof o=="function"&&(x=o.call(n,l,v)),x instanceof CanvasPattern||(x=Vat(U({},{cfg:{backgroundColor:v}},x)));var b=i[t];return E(E({},typeof b=="function"?b.call.apply(b,X([n,l],h,!1)):b||{}),{fill:x||v})};return U({},e,{options:(r={},r[t]=s,r)})}}function Lu(t){var n=t.chart,e=t.options,r=e.legend,i=e.colorField,a=e.seriesField;return r===!1?n.legend(!1):(i||a)&&n.legend(i||a,r),t}function pn(t){var n=t.chart,e=t.options,r=e.tooltip;return r!==void 0&&n.tooltip(r),t}function Ee(t){var n=t.chart,e=t.options,r=e.interactions;return $(r,function(i){i.enable===!1?n.removeInteraction(i.type):n.interaction(i.type,i.cfg||{})}),t}function te(t){var n=t.chart,e=t.options,r=e.animation;return Md(n,r),t}function Yt(t){var n=t.chart,e=t.options,r=e.theme;return r&&n.theme(r),t}function cs(t){var n=t.chart,e=t.options,r=e.state;return r&&$(n.geometries,function(i){i.state(r)}),t}function Ad(t){var n=t.chart,e=t.options,r=e.slider;return n.option("slider",r),t}function TO(t){var n=t.chart,e=t.options,r=e.scrollbar;return n.option("scrollbar",r),t}function Ye(t,n){return function(e){var r=e.chart,i=e.options,a={};return $(t,function(o,s){a[s]=Kt(o,Sr)}),a=U({},n,i.meta,a),r.scale(a),e}}function Ie(t){return function(n){var e=n.chart,r=n.options,i=e.getController("annotation");return $(X(X([],r.annotations||[],!0),t||[],!0),function(a){i.annotation(a)}),n}}function dl(t){var n=t.chart,e=t.options,r=e.yAxis,i=e.limitInPlot,a=i;return Qt(r)&&J(i)&&(Object.values(Kt(r,["min","max","minLimit","maxLimit"])).some(function(o){return!J(o)})?a=!0:a=!1),n.limitInPlot=a,t}function W3(t){return t===void 0&&(t="rect"),function(n){var e=n.chart,r=n.options,i=r.coordinate,a=Array.from(i||[]).map(function(o){return o.type==="reflectX"?["reflect","x"]:o.type==="reflectY"?["reflect","y"]:o.type==="transpose"?["transpose"]:null}).filter(function(o){return!!o});return a.length!==0&&e.coordinate({type:t,actions:a}),n}}var Hat={locale:"en-US"},Bv={};function V3(t,n){Bv[t]=n}function $0(t){return{get:function(n,e){return z3(z(Bv[t],n)||z(Bv[Hat.locale],n)||z(Bv["en-US"],n)||n,e)}}}var Xat={locale:"en-US",general:{increase:"Increase",decrease:"Decrease",root:"Root"},statistic:{total:"Total"},conversionTag:{label:"Rate"},legend:{},tooltip:{},slider:{},scrollbar:{},waterfall:{total:"Total"}},Uat={locale:"zh-CN",general:{increase:"增加",decrease:"减少",root:"初始"},statistic:{total:"总计"},conversionTag:{label:"转化率"},legend:{},tooltip:{},slider:{},scrollbar:{},waterfall:{total:"总计"}};function xi(t,n){if(t===!1)return{fields:!1};var e=z(t,"fields"),r=z(t,"formatter");return r&&!e&&(e=n),{fields:e,formatter:r}}function Bp(t,n){var e=t.type,r=t.xField,i=t.yField,a=t.colorField,o=t.shapeField,s=t.sizeField,l=t.styleField,c=t.rawFields,u=[];if(c=(ut(c)?c(e,n):c)||[],n==="color")u=X([a||r],c,!0);else if(n==="shape")u=X([o||r],c,!0);else if(n==="size")u=X([s||r],c,!0);else{u=X([r,i,a,o,s,l],c,!0);var f=["x","y","color","shape","size","style"].indexOf(n),h=u[f];u.splice(f,1),u.unshift(h)}var d=il(u.filter(function(v){return!!v})),p=e==="line"&&[r,i].includes(d.join("*"))?"":d.join("*");return{mappingFields:d,tileMappingField:p}}function nc(t,n){if(n)return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var i={};return t.forEach(function(a,o){i[a]=e[o]}),delete i.undefined,n(i)}}function Pr(t){var n=t.chart,e=t.options,r=e.type,i=e.args,a=e.mapping,o=e.xField,s=e.yField,l=e.colorField,c=e.shapeField,u=e.sizeField,f=e.tooltipFields,h=e.label,d=e.state,p=e.customInfo;if(!a)return t;var v=a.color,g=a.shape,y=a.size,m=a.style,x=a.tooltip,b=n[r](i).position("".concat(o,"*").concat(s));if(pt(v))l?b.color(l,v):b.color(v);else if(ut(v)){var w=Bp(e,"color"),S=w.mappingFields,O=w.tileMappingField;b.color(O,nc(S,v))}else l&&b.color(l,v);if(pt(g))c?b.shape(c,[g]):b.shape(g);else if(ut(g)){var M=Bp(e,"shape"),S=M.mappingFields,O=M.tileMappingField;b.shape(O,nc(S,g))}else c&&b.shape(c,g);if(bt(y))u?b.size(u,y):b.size(y);else if(ut(y)){var A=Bp(e,"size"),S=A.mappingFields,O=A.tileMappingField;b.size(O,nc(S,y))}else u&&b.size(u,y);if(ut(m)){var T=Bp(e,"style"),S=T.mappingFields,O=T.tileMappingField;b.style(O,nc(S,m))}else Qt(m)&&b.style(m);if(f===!1?b.tooltip(!1):Mr(f)||b.tooltip(f.join("*"),nc(f,x)),h===!1)b.label(!1);else if(h){var C=h.callback,P=h.fields,_=vt(h,["callback","fields"]);b.label({fields:P||[s],callback:C,cfg:xn(_)})}return d&&b.state(d),p&&b.customInfo(p),[o,s].filter(function(k){return k!==l}).forEach(function(k){n.legend(k,!1)}),E(E({},t),{ext:{geometry:b}})}function j0(t){var n=t.options,e=n.area,r=n.xField,i=n.yField,a=n.seriesField,o=n.smooth,s=n.tooltip,l=n.useDeferredLabel,c=xi(s,[r,i,a]),u=c.fields,f=c.formatter;return e?Pr(U({},t,{options:{type:"area",colorField:a,tooltipFields:u,mapping:ot({shape:o?"smooth":"area",tooltip:f},e),args:{useDeferredLabel:l}}})):t}function H3(t){var n=t.options,e=n.edge,r=n.xField,i=n.yField,a=n.seriesField,o=n.tooltip,s=n.useDeferredLabel,l=xi(o,[r,i,a]),c=l.fields,u=l.formatter;return e?Pr(U({},t,{options:{type:"edge",colorField:a,tooltipFields:c,mapping:E({tooltip:u},e),args:{useDeferredLabel:s}}})):t}function qat(t){var n=t.chart,e=t.options,r=t.ext,i=e.seriesField,a=e.isGroup,o=e.isStack,s=e.marginRatio,l=e.widthRatio,c=e.groupField,u=e.theme,f=[];if(i&&(a&&f.push({type:"dodge",dodgeBy:c||i,marginRatio:s}),o&&f.push({type:"stack",marginRatio:s})),f.length&&(r!=null&&r.geometry)){var h=r==null?void 0:r.geometry;h.adjust(f)}return J(l)||n.theme(U({},Qt(u)?u:Wf(u),{columnWidthRatio:l})),t}function Nn(t){var n=t.options,e=n.xField,r=n.yField,i=n.interval,a=n.seriesField,o=n.tooltip,s=n.minColumnWidth,l=n.maxColumnWidth,c=n.columnBackground,u=n.dodgePadding,f=n.intervalPadding,h=n.useDeferredLabel,d=xi(o,[e,r,a]),p=d.fields,v=d.formatter,g=(i?Pr(U({},t,{options:{type:"interval",colorField:a,tooltipFields:p,mapping:E({tooltip:v},i),args:{dodgePadding:u,intervalPadding:f,minColumnWidth:s,maxColumnWidth:l,background:c,useDeferredLabel:h}}})):t).ext;return qat(E(E({},t),{ext:g}))}function Iu(t){var n=t.options,e=n.line,r=n.stepType,i=n.xField,a=n.yField,o=n.seriesField,s=n.smooth,l=n.connectNulls,c=n.tooltip,u=n.useDeferredLabel,f=xi(c,[i,a,o]),h=f.fields,d=f.formatter;return e?Pr(U({},t,{options:{type:"line",colorField:o,tooltipFields:h,mapping:ot({shape:r||(s?"smooth":"line"),tooltip:d},e),args:{connectNulls:l,useDeferredLabel:u}}})):t}function Zr(t){var n=t.options,e=n.point,r=n.xField,i=n.yField,a=n.seriesField,o=n.sizeField,s=n.shapeField,l=n.tooltip,c=n.useDeferredLabel,u=xi(l,[r,i,a,o,s]),f=u.fields,h=u.formatter;return e?Pr(U({},t,{options:{type:"point",colorField:a,shapeField:s,tooltipFields:f,mapping:E({tooltip:h},e),args:{useDeferredLabel:c}}})):t}function z0(t){var n=t.options,e=n.polygon,r=n.xField,i=n.yField,a=n.seriesField,o=n.tooltip,s=n.useDeferredLabel,l=xi(o,[r,i,a]),c=l.fields,u=l.formatter;return e?Pr(U({},t,{options:{type:"polygon",colorField:a,tooltipFields:c,mapping:E({tooltip:u},e),args:{useDeferredLabel:s}}})):t}function CO(t){var n=t.options,e=n.schema,r=n.xField,i=n.yField,a=n.seriesField,o=n.tooltip,s=n.useDeferredLabel,l=xi(o,[r,i,a]),c=l.fields,u=l.formatter;return e?Pr(U({},t,{options:{type:"schema",colorField:a,tooltipFields:c,mapping:E({tooltip:u},e),args:{useDeferredLabel:s}}})):t}function Zat(t){var n=t.options,e=n.violin,r=n.xField,i=n.yField,a=n.seriesField,o=n.sizeField,s=n.tooltip,l=xi(s,[r,i,a,o]),c=l.fields,u=l.formatter;return e?Pr(U({},t,{options:{type:"violin",colorField:a,tooltipFields:c,mapping:E({tooltip:u},e)}})):t}var Js={},jo={},X3={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=1,e=function(){return"".concat(n++)};t.default=e})(X3);var G0={},Y0={},PO={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:60,a=null;return function(){for(var o=this,s=arguments.length,l=new Array(s),c=0;c<s;c++)l[c]=arguments[c];clearTimeout(a),a=setTimeout(function(){r.apply(o,l)},i)}};t.default=n})(PO);var ua={};Object.defineProperty(ua,"__esModule",{value:!0});ua.SizeSensorId=ua.SensorTabIndex=ua.SensorClassName=void 0;var Kat="size-sensor-id";ua.SizeSensorId=Kat;var Qat="size-sensor-object";ua.SensorClassName=Qat;var Jat="-1";ua.SensorTabIndex=Jat;Object.defineProperty(Y0,"__esModule",{value:!0});Y0.createSensor=void 0;var tot=eot(PO),$1=ua;function eot(t){return t&&t.__esModule?t:{default:t}}var not=function(n,e){var r=void 0,i=[],a=function(){getComputedStyle(n).position==="static"&&(n.style.position="relative");var f=document.createElement("object");return f.onload=function(){f.contentDocument.defaultView.addEventListener("resize",o),o()},f.style.display="block",f.style.position="absolute",f.style.top="0",f.style.left="0",f.style.height="100%",f.style.width="100%",f.style.overflow="hidden",f.style.pointerEvents="none",f.style.zIndex="-1",f.style.opacity="0",f.setAttribute("class",$1.SensorClassName),f.setAttribute("tabindex",$1.SensorTabIndex),f.type="text/html",n.appendChild(f),f.data="about:blank",f},o=(0,tot.default)(function(){i.forEach(function(u){u(n)})}),s=function(f){r||(r=a()),i.indexOf(f)===-1&&i.push(f)},l=function(){r&&r.parentNode&&(r.contentDocument&&r.contentDocument.defaultView.removeEventListener("resize",o),r.parentNode.removeChild(r),n.removeAttribute($1.SizeSensorId),r=void 0,i=[],e&&e())},c=function(f){var h=i.indexOf(f);h!==-1&&i.splice(h,1),i.length===0&&r&&l()};return{element:n,bind:s,destroy:l,unbind:c}};Y0.createSensor=not;var W0={};Object.defineProperty(W0,"__esModule",{value:!0});W0.createSensor=void 0;var rot=ua,iot=aot(PO);function aot(t){return t&&t.__esModule?t:{default:t}}var oot=function(n,e){var r=void 0,i=[],a=(0,iot.default)(function(){i.forEach(function(u){u(n)})}),o=function(){var f=new ResizeObserver(a);return f.observe(n),a(),f},s=function(f){r||(r=o()),i.indexOf(f)===-1&&i.push(f)},l=function(){r.disconnect(),i=[],r=void 0,n.removeAttribute(rot.SizeSensorId),e&&e()},c=function(f){var h=i.indexOf(f);h!==-1&&i.splice(h,1),i.length===0&&r&&l()};return{element:n,bind:s,destroy:l,unbind:c}};W0.createSensor=oot;Object.defineProperty(G0,"__esModule",{value:!0});G0.createSensor=void 0;var sot=Y0,lot=W0,cot=typeof ResizeObserver<"u"?lot.createSensor:sot.createSensor;G0.createSensor=cot;Object.defineProperty(jo,"__esModule",{value:!0});jo.removeSensor=jo.getSensor=jo.Sensors=void 0;var uot=hot(X3),fot=G0,tw=ua;function hot(t){return t&&t.__esModule?t:{default:t}}var Ac={};jo.Sensors=Ac;function U3(t){t&&Ac[t]&&delete Ac[t]}var dot=function(n){var e=n.getAttribute(tw.SizeSensorId);if(e&&Ac[e])return Ac[e];var r=(0,uot.default)();n.setAttribute(tw.SizeSensorId,r);var i=(0,fot.createSensor)(n,function(){return U3(r)});return Ac[r]=i,i};jo.getSensor=dot;var pot=function(n){var e=n.element.getAttribute(tw.SizeSensorId);n.destroy(),U3(e)};jo.removeSensor=pot;Object.defineProperty(Js,"__esModule",{value:!0});Js.ver=Js.clear=q3=Js.bind=void 0;var ew=jo,vot=function(n,e){var r=(0,ew.getSensor)(n);return r.bind(e),function(){r.unbind(e)}},q3=Js.bind=vot,got=function(n){var e=(0,ew.getSensor)(n);(0,ew.removeSensor)(e)};Js.clear=got;var yot="1.0.2";Js.ver=yot;var IP="data-chart-source-type",Z3=["padding","appendPadding","renderer","pixelRatio","syncViewPadding","supportCSSTransform","limitInPlot"],Mt=function(t){G(n,t);function n(e,r){var i=t.call(this)||this;return i.container=typeof e=="string"?document.getElementById(e):e,i.options=U({},i.getDefaultOptions(),r),i.createG2(),i.bindEvents(),i}return n.getDefaultOptions=function(){return{renderer:"canvas",xAxis:{nice:!0,label:{autoRotate:!1,autoHide:{type:"equidistance",cfg:{minGap:6}}}},yAxis:{nice:!0,label:{autoHide:!0,autoRotate:!1}},animation:!0}},n.prototype.createG2=function(){var e=this.options,r=e.width,i=e.height,a=e.defaultInteractions;this.chart=new $tt(E(E(E(E({container:this.container,autoFit:!1},this.getChartSize(r,i)),{localRefresh:!1}),Kt(this.options,Z3)),{defaultInteractions:a})),this.container.setAttribute(IP,"G2Plot")},n.prototype.getChartSize=function(e,r){var i=Jb(this.container);return{width:e||i.width||400,height:r||i.height||400}},n.prototype.bindEvents=function(){var e=this;this.chart&&this.chart.on("*",function(r){r!=null&&r.type&&e.emit(r.type,r)})},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.render=function(){this.chart.clear(),this.chart.options={data:[],animate:!0},this.chart.views=[],this.execAdaptor(),this.chart.render(),this.bindSizeSensor()},n.prototype.update=function(e){this.updateOption(e),this.render()},n.prototype.updateOption=function(e){this.options=U({},this.options,e)},n.prototype.setState=function(e,r,i){i===void 0&&(i=!0);var a=Th(this.chart);$(a,function(o){r(o.getData())&&o.setState(e,i)})},n.prototype.getStates=function(){var e=Th(this.chart),r=[];return $(e,function(i){var a=i.getData(),o=i.getStates();$(o,function(s){r.push({data:a,state:s,geometry:i.geometry,element:i})})}),r},n.prototype.changeData=function(e){this.update({data:e})},n.prototype.changeSize=function(e,r){this.chart.changeSize(e,r)},n.prototype.addAnnotations=function(e,r){r=r||this.chart;var i=X([],e,!0),a=r.getController("annotation"),o=a.getComponents().map(function(c){return c.extra});a.clear(!0);for(var s=function(c){var u=o[c],f=i.findIndex(function(h){return h.id&&h.id===u.id});f!==-1&&(u=U({},u,i[f]),i.splice(f,1)),a.annotation(u)},l=0;l<o.length;l++)s(l);i.forEach(function(c){return a.annotation(c)}),r.render(!0)},n.prototype.removeAnnotations=function(e){var r=this.chart.getController("annotation"),i=r.getComponents().map(function(s){return s.extra});r.clear(!0);for(var a=function(s){var l=i[s];e.find(function(c){return c.id&&c.id===l.id})||r.annotation(l)},o=0;o<i.length;o++)a(o);this.chart.render(!0)},n.prototype.destroy=function(){this.unbindSizeSensor(),this.chart.destroy(),this.off(),this.container.removeAttribute(IP)},n.prototype.execAdaptor=function(){var e=this.getSchemaAdaptor(),r=this.options,i=r.padding,a=r.appendPadding;this.chart.padding=i,this.chart.appendPadding=a,e({chart:this.chart,options:this.options})},n.prototype.triggerResize=function(){this.chart.forceFit()},n.prototype.bindSizeSensor=function(){var e=this;if(!this.unbind){var r=this.options.autoFit,i=r===void 0?!0:r;i&&(this.unbind=q3(this.container,function(){var a=Jb(e.container),o=a.width,s=a.height;(o!==e.chart.width||s!==e.chart.height)&&e.triggerResize()}))}},n.prototype.unbindSizeSensor=function(){this.unbind&&(this.unbind(),this.unbind=void 0)},n}(Au);function K3(t,n,e,r){var i=Hn(t,function(a,o){var s=o[e],l=a.has(s)?a.get(s):0,c=o[n];return l=hl(c)?l+c:l,a.set(s,l),a},new Map);return Ae(t,function(a){var o,s=a[n],l=a[e],c=hl(s)&&i.get(l)!==0?s/i.get(l):0;return E(E({},a),(o={},o[r]=c,o))})}function mot(t,n,e,r){var i=Hn(t,function(a,o){var s=Hn(e,function(u,f){return"".concat(u).concat(o[f])},""),l=a.has(s)?a.get(s):0,c=o[n];return l=hl(c)?l+c:l,a.set(s,l),a},new Map);return Ae(t,function(a){var o,s=a[n],l=Hn(e,function(u,f){return"".concat(u).concat(a[f])},""),c=hl(s)&&i.get(l)!==0?s/i.get(l):0;return E(E({},a),(o={},o[r]=c,o))})}function Ed(t,n,e,r,i){return i?K3(t,n,e,r):t}function xot(t){var n=t.chart,e=t.options,r=e.data,i=e.color,a=e.lineStyle,o=e.lineShape,s=e.point,l=e.area,c=e.seriesField,u=s==null?void 0:s.state,f=l==null?void 0:l.state;n.data(r);var h=U({},t,{options:{shapeField:c,line:{color:i,style:a,shape:o},point:s&&E({color:i,shape:"circle"},s),area:l&&E({color:i},l),label:void 0}}),d=U({},h,{options:{tooltip:!1,state:u}}),p=U({},h,{options:{tooltip:!1,state:f}});return Iu(h),Zr(d),j0(p),t}function V0(t){var n,e,r=t.options,i=r.xAxis,a=r.yAxis,o=r.xField,s=r.yField,l=r.data;return xt(Ye((n={},n[o]=i,n[s]=a,n),(e={},e[o]={type:"cat"},e[s]=SO(l,s),e)))(t)}function bot(t){var n=t.chart,e=t.options,r=e.reflect;if(r){var i=r;et(i)||(i=[i]);var a=i.map(function(o){return["reflect",o]});n.coordinate({type:"rect",actions:a})}return t}function Q3(t){var n=t.chart,e=t.options,r=e.xAxis,i=e.yAxis,a=e.xField,o=e.yField;return r===!1?n.axis(a,!1):n.axis(a,r),i===!1?n.axis(o,!1):n.axis(o,i),t}function J3(t){var n=t.chart,e=t.options,r=e.legend,i=e.seriesField;return r&&i?n.legend(i,r):r===!1&&n.legend(!1),t}function wot(t){var n=t.chart,e=t.options,r=e.label,i=e.yField,a=Bn(n,"line");if(!r)a.label(!1);else{var o=r.callback,s=vt(r,["callback"]);a.label({fields:[i],callback:o,cfg:E({layout:[{type:"limit-in-plot"},{type:"path-adjust-position"},{type:"point-adjust-position"},{type:"limit-in-plot",cfg:{action:"hide"}}]},xn(s))})}return t}function Sot(t){var n=t.chart,e=t.options,r=e.isStack;return r&&$(n.geometries,function(i){i.adjust("stack")}),t}function tN(t){return xt(xot,V0,Sot,Yt,bot,Q3,J3,pn,wot,Ad,TO,Ee,te,Ie(),dl)(t)}function Oot(t){var n=t.chart,e=t.options,r=e.data,i=e.areaStyle,a=e.areaShape,o=e.color,s=e.point,l=e.line,c=e.isPercent,u=e.xField,f=e.yField,h=e.tooltip,d=e.seriesField,p=e.startOnZero,v=s==null?void 0:s.state,g=Ed(r,f,u,f,c);n.data(g);var y=c?E({formatter:function(w){return{name:w[d]||w[u],value:(Number(w[f])*100).toFixed(2)+"%"}}},h):h,m=U({},t,{options:{area:{color:o,style:i,shape:a},point:s&&E({color:o},s),tooltip:y,label:void 0,args:{startOnZero:p}}}),x={chart:n,options:U({line:{size:2}},Jy(e,["state"]),{line:l&&E({color:o},l),sizeField:d,state:l==null?void 0:l.state,tooltip:!1,label:void 0,args:{startOnZero:p}})},b=U({},m,{options:{tooltip:!1,state:v}});return j0(m),Iu(x),Zr(b),t}function Mot(t){var n=t.chart,e=t.options,r=e.label,i=e.yField,a=Bn(n,"area");if(!r)a.label(!1);else{var o=r.callback,s=vt(r,["callback"]);a.label({fields:[i],callback:o,cfg:E({layout:[{type:"limit-in-plot"},{type:"path-adjust-position"},{type:"point-adjust-position"},{type:"limit-in-plot",cfg:{action:"hide"}}]},xn(s))})}return t}function Aot(t){var n=t.chart,e=t.options,r=e.isStack,i=e.isPercent,a=e.seriesField;return(i||r)&&a&&$(n.geometries,function(o){o.adjust("stack")}),t}function eN(t){return xt(Yt,qr("areaStyle"),W3("rect"),Oot,V0,Aot,Q3,J3,pn,Mot,Ad,Ie(),Ee,te,dl)(t)}var Eot=U({},Mt.getDefaultOptions(),{tooltip:{shared:!0,showMarkers:!0,showCrosshairs:!0,crosshairs:{type:"x"}},isStack:!0,line:{},legend:{position:"top-left",radio:{}}}),Tot=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="area",e}return n.getDefaultOptions=function(){return Eot},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.changeData=function(e){this.updateOption({data:e});var r=this.options,i=r.isPercent,a=r.xField,o=r.yField,s=this,l=s.chart,c=s.options;V0({chart:l,options:c}),this.chart.changeData(Ed(e,o,a,o,i))},n.prototype.getSchemaAdaptor=function(){return eN},n}(Mt),Cot=10,Pot=5,kot={padding:[8,10],text:"reset",textStyle:{default:{x:0,y:0,fontSize:12,fill:"#333333",cursor:"pointer"}},buttonStyle:{default:{fill:"#f7f7f7",stroke:"#cccccc",cursor:"pointer"},active:{fill:"#e6e6e6"}}},_ot=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.buttonGroup=null,e.buttonCfg=E({name:"button"},kot),e}return n.prototype.getButtonCfg=function(){var e=this.context.view,r=z(e,["interactions","filter-action","cfg","buttonConfig"]);return U(this.buttonCfg,r,this.cfg)},n.prototype.drawButton=function(){var e=this.getButtonCfg(),r=this.context.view.foregroundGroup.addGroup({name:e.name}),i=this.drawText(r);this.drawBackground(r,i.getBBox()),this.buttonGroup=r},n.prototype.drawText=function(e){var r,i=this.getButtonCfg();return e.addShape({type:"text",name:"button-text",attrs:E({text:i.text},(r=i.textStyle)===null||r===void 0?void 0:r.default)})},n.prototype.drawBackground=function(e,r){var i,a=this.getButtonCfg(),o=Zo(a.padding),s=e.addShape({type:"rect",name:"button-rect",attrs:E({x:r.x-o[3],y:r.y-o[0],width:r.width+o[1]+o[3],height:r.height+o[0]+o[2]},(i=a.buttonStyle)===null||i===void 0?void 0:i.default)});return s.toBack(),e.on("mouseenter",function(){var l;s.attr((l=a.buttonStyle)===null||l===void 0?void 0:l.active)}),e.on("mouseleave",function(){var l;s.attr((l=a.buttonStyle)===null||l===void 0?void 0:l.default)}),s},n.prototype.resetPosition=function(){var e=this.context.view,r=e.getCoordinate(),i=r.convert({x:1,y:1}),a=this.buttonGroup,o=a.getBBox(),s=Ar.transform(null,[["t",i.x-o.width-Cot,i.y+o.height+Pot]]);a.setMatrix(s)},n.prototype.show=function(){this.buttonGroup||this.drawButton(),this.resetPosition(),this.buttonGroup.show()},n.prototype.hide=function(){this.buttonGroup&&this.buttonGroup.hide()},n.prototype.destroy=function(){var e=this.buttonGroup;e&&e.remove(),t.prototype.destroy.call(this)},n}(be);ht("brush-reset-button",_ot,{name:"brush-reset-button"});wt("filter-action",{});function Ma(t){return t.isInPlot()}function _l(t,n,e){var r=e||{},i=r.mask,a=r.isStartEnable,o=n||"rect";switch(t){case"brush":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:a||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:a||Ma,action:["brush:start","".concat(o,"-mask:start"),"".concat(o,"-mask:show")],arg:[null,{maskStyle:i==null?void 0:i.style}]}],processing:[{trigger:"mousemove",isEnable:Ma,action:["".concat(o,"-mask:resize")]}],end:[{trigger:"mouseup",isEnable:Ma,action:["brush:filter","brush:end","".concat(o,"-mask:end"),"".concat(o,"-mask:hide"),"brush-reset-button:show"]}],rollback:[{trigger:"brush-reset-button:click",action:["brush:reset","brush-reset-button:hide","cursor:crosshair"]}]};case"brush-highlight":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:a||function(){return!0}},{trigger:"plot:mousemove",action:"cursor:crosshair",isEnable:a||function(){return!0}},{trigger:"plot:mousemove",action:"cursor:default",isEnable:function(s){return a?!a(s):!1}},{trigger:"mask:mouseenter",action:"cursor:move",isEnable:a||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:a||function(s){return!s.isInShape("mask")},action:["".concat(o,"-mask:start"),"".concat(o,"-mask:show")],arg:[{maskStyle:i==null?void 0:i.style}]},{trigger:"mask:dragstart",action:["".concat(o,"-mask:moveStart")]}],processing:[{trigger:"plot:mousemove",action:["".concat(o,"-mask:resize")]},{trigger:"mask:drag",action:["".concat(o,"-mask:move")]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["".concat(o,"-mask:end")]},{trigger:"mask:dragend",action:["".concat(o,"-mask:moveEnd")]},{trigger:"document:mouseup",isEnable:function(s){return!s.isInPlot()},action:["element-range-highlight:clear","".concat(o,"-mask:end"),"".concat(o,"-mask:hide")]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear","".concat(o,"-mask:hide")]}]};case"brush-x":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:a||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:a||Ma,action:["brush-x:start","".concat(o,"-mask:start"),"".concat(o,"-mask:show")],arg:[null,{maskStyle:i==null?void 0:i.style}]}],processing:[{trigger:"mousemove",isEnable:Ma,action:["".concat(o,"-mask:resize")]}],end:[{trigger:"mouseup",isEnable:Ma,action:["brush-x:filter","brush-x:end","".concat(o,"-mask:end"),"".concat(o,"-mask:hide")]}],rollback:[{trigger:"dblclick",action:["brush-x:reset"]}]};case"brush-x-highlight":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:a||function(){return!0}},{trigger:"mask:mouseenter",action:"cursor:move",isEnable:a||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:a||function(s){return!s.isInShape("mask")},action:["".concat(o,"-mask:start"),"".concat(o,"-mask:show")],arg:[{maskStyle:i==null?void 0:i.style}]},{trigger:"mask:dragstart",action:["".concat(o,"-mask:moveStart")]}],processing:[{trigger:"plot:mousemove",action:["".concat(o,"-mask:resize")]},{trigger:"mask:drag",action:["".concat(o,"-mask:move")]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["".concat(o,"-mask:end")]},{trigger:"mask:dragend",action:["".concat(o,"-mask:moveEnd")]},{trigger:"document:mouseup",isEnable:function(s){return!s.isInPlot()},action:["element-range-highlight:clear","".concat(o,"-mask:end"),"".concat(o,"-mask:hide")]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear","".concat(o,"-mask:hide")]}]};case"brush-y":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:a||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:a||Ma,action:["brush-y:start","".concat(o,"-mask:start"),"".concat(o,"-mask:show")],arg:[null,{maskStyle:i==null?void 0:i.style}]}],processing:[{trigger:"mousemove",isEnable:Ma,action:["".concat(o,"-mask:resize")]}],end:[{trigger:"mouseup",isEnable:Ma,action:["brush-y:filter","brush-y:end","".concat(o,"-mask:end"),"".concat(o,"-mask:hide")]}],rollback:[{trigger:"dblclick",action:["brush-y:reset"]}]};case"brush-y-highlight":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:a||function(){return!0}},{trigger:"mask:mouseenter",action:"cursor:move",isEnable:a||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:a||function(s){return!s.isInShape("mask")},action:["".concat(o,"-mask:start"),"".concat(o,"-mask:show")],arg:[{maskStyle:i==null?void 0:i.style}]},{trigger:"mask:dragstart",action:["".concat(o,"-mask:moveStart")]}],processing:[{trigger:"plot:mousemove",action:["".concat(o,"-mask:resize")]},{trigger:"mask:drag",action:["".concat(o,"-mask:move")]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["".concat(o,"-mask:end")]},{trigger:"mask:dragend",action:["".concat(o,"-mask:moveEnd")]},{trigger:"document:mouseup",isEnable:function(s){return!s.isInPlot()},action:["element-range-highlight:clear","".concat(o,"-mask:end"),"".concat(o,"-mask:hide")]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear","".concat(o,"-mask:hide")]}]};default:return{}}}wt("brush",_l("brush"));wt("brush-highlight",_l("brush-highlight"));wt("brush-x",_l("brush-x","x-rect"));wt("brush-y",_l("brush-y","y-rect"));wt("brush-x-highlight",_l("brush-x-highlight","x-rect"));wt("brush-y-highlight",_l("brush-y-highlight","y-rect"));var FP=["brush","brush-x","brush-y","brush-highlight","brush-x-highlight","brush-y-highlight"];function nN(t){var n=t.options,e=n.brush,r=Ln(n.interactions||[],function(i){return FP.indexOf(i.type)===-1});return e!=null&&e.enabled&&(FP.forEach(function(i){var a=!1;switch(e.type){case"x-rect":a=i===(e.action==="highlight"?"brush-x-highlight":"brush-x");break;case"y-rect":a=i===(e.action==="highlight"?"brush-y-highlight":"brush-y");break;default:a=i===(e.action==="highlight"?"brush-highlight":"brush");break}var o={type:i,enable:a};e&&(o.cfg=_l(i,e.type,e)),r.push(o)}),(e==null?void 0:e.action)!=="highlight"&&r.push({type:"filter-action",cfg:{buttonConfig:e.button}})),U({},t,{options:{interactions:r}})}var tl={hover:"__interval-connected-area-hover__",click:"__interval-connected-area-click__"},kO=function(t,n){return t==="hover"?[{trigger:"interval:mouseenter",action:["element-highlight-by-color:highlight","element-link-by-color:link"],arg:[null,{style:n}]}]:[{trigger:"interval:click",action:["element-highlight-by-color:clear","element-highlight-by-color:highlight","element-link-by-color:clear","element-link-by-color:unlink","element-link-by-color:link"],arg:[null,null,null,null,{style:n}]}]};wt(tl.hover,{start:kO(tl.hover),end:[{trigger:"interval:mouseleave",action:["element-highlight-by-color:reset","element-link-by-color:unlink"]}]});wt(tl.click,{start:kO(tl.click),end:[{trigger:"document:mousedown",action:["element-highlight-by-color:clear","element-link-by-color:clear"]}]});function Lot(t){return t===void 0&&(t=!1),function(n){var e=n.chart,r=n.options,i=r.connectedArea,a=function(){e.removeInteraction(tl.hover),e.removeInteraction(tl.click)};if(!t&&i){var o=i.trigger||"hover";a(),e.interaction(tl[o],{start:kO(o,i.style)})}else a();return n}}function rN(t,n){return!bt(t)||!bt(n)||t===0&&n===0?"-":t===n?"100%":t===0?"∞":"".concat((100*n/t).toFixed(2),"%")}function Iot(t,n){return U({size:n?32:80,spacing:n?8:12,offset:n?32:0,arrow:t.arrow!==!1&&{headSize:12,style:{fill:"rgba(0, 0, 0, 0.05)"}},text:t.text!==!1&&{style:{fontSize:12,fill:"rgba(0, 0, 0, 0.85)",textAlign:"center",textBaseline:"middle"},formatter:rN}},t)}function kg(t,n){return Ae(n.getModel().points,function(e){return t.convertPoint(e)})}function Fot(t,n,e){var r=t.view,i=t.geometry,a=t.group,o=t.options,s=t.horizontal,l=o.offset,c=o.size,u=o.arrow,f=r.getCoordinate(),h=kg(f,n)[3],d=kg(f,e)[0],p=d.y-h.y,v=d.x-h.x;if(typeof u!="boolean"){var g=u.headSize,y=o.spacing,m;s?(v-g)/2<y?(y=Math.max(1,(v-g)/2),m=[[h.x+y,h.y-l],[h.x+y,h.y-l-c],[d.x-y,d.y-l-c/2]]):m=[[h.x+y,h.y-l],[h.x+y,h.y-l-c],[d.x-y-g,d.y-l-c],[d.x-y,d.y-l-c/2],[d.x-y-g,d.y-l]]:(p-g)/2<y?(y=Math.max(1,(p-g)/2),m=[[h.x+l,h.y+y],[h.x+l+c,h.y+y],[d.x+l+c/2,d.y-y]]):m=[[h.x+l,h.y+y],[h.x+l+c,h.y+y],[d.x+l+c,d.y-y-g],[d.x+l+c/2,d.y-y],[d.x+l,d.y-y-g]],a.addShape("polygon",{id:"".concat(r.id,"-conversion-tag-arrow-").concat(i.getElementId(n.getModel().mappingData)),name:"conversion-tag-arrow",origin:{element:n,nextElement:e},attrs:E(E({},u.style||{}),{points:m})})}}function Dot(t,n,e){var r,i,a,o=t.view,s=t.geometry,l=t.group,c=t.options,u=t.field,f=t.horizontal,h=c.offset,d=c.size;if(typeof c.text!="boolean"){var p=o.getCoordinate(),v=((r=c.text)===null||r===void 0?void 0:r.formatter)&&((i=c.text)===null||i===void 0?void 0:i.formatter(n.getData()[u],e.getData()[u])),g=kg(p,n)[f?3:0],y=kg(p,e)[f?0:3],m=l.addShape("text",{id:"".concat(o.id,"-conversion-tag-text-").concat(s.getElementId(n.getModel().mappingData)),name:"conversion-tag-text",origin:{element:n,nextElement:e},attrs:E(E({},((a=c.text)===null||a===void 0?void 0:a.style)||{}),{text:v,x:f?(g.x+y.x)/2:g.x+h+d/2,y:f?g.y-h-d/2:(g.y+y.y)/2})});if(f){var x=y.x-g.x,b=m.getBBox().width;if(b>x){var w=b/v.length,S=Math.max(1,Math.ceil(x/w)-1),O="".concat(v.slice(0,S),"...");m.attr("text",O)}}}}function Rot(t,n,e){Fot(t,n,e),Dot(t,n,e)}function Bot(t,n,e){return n===void 0&&(n=!0),e===void 0&&(e=!1),function(r){var i=r.options,a=r.chart,o=i.conversionTag,s=i.theme;return o&&!e&&(a.theme(U({},Qt(s)?s:Wf(s),{columnWidthRatio:1/3})),a.annotation().shape({render:function(l,c){var u=l.addGroup({id:"".concat(a.id,"-conversion-tag-group"),name:"conversion-tag-group"}),f=Li(a.geometries,function(p){return p.type==="interval"}),h={view:c,geometry:f,group:u,field:t,horizontal:n,options:Iot(o,n)},d=f.elements;$(d,function(p,v){v>0&&Rot(h,d[v-1],p)})}})),r}}function Not(t){var n=t.options,e=n.legend,r=n.seriesField,i=n.isStack;return r?e!==!1&&(e=E({position:i?"right-top":"top-left"},e)):e=!1,t.options.legend=e,t}function $ot(t){var n=t.chart,e=t.options,r=e.data,i=e.columnStyle,a=e.color,o=e.columnWidthRatio,s=e.isPercent,l=e.isGroup,c=e.isStack,u=e.xField,f=e.yField,h=e.seriesField,d=e.groupField,p=e.tooltip,v=e.shape,g=s&&l&&c?mot(r,f,[u,d],f):Ed(r,f,u,f,s),y=[];c&&h&&!l?g.forEach(function(b){var w=y.find(function(S){return S[u]===b[u]&&S[h]===b[h]});w?w[f]+=b[f]||0:y.push(E({},b))}):y=g,n.data(y);var m=s?E({formatter:function(b){var w;return{name:l&&c?"".concat(b[h]," - ").concat(b[d]):(w=b[h])!==null&&w!==void 0?w:b[u],value:(Number(b[f])*100).toFixed(2)+"%"}}},p):p,x=U({},t,{options:{data:y,widthRatio:o,tooltip:m,interval:{shape:v,style:i,color:a}}});return Nn(x),x}function _O(t){var n,e,r=t.options,i=r.xAxis,a=r.yAxis,o=r.xField,s=r.yField,l=r.data,c=r.isPercent,u=c?{max:1,min:0,minLimit:0,maxLimit:1}:{};return xt(Ye((n={},n[o]=i,n[s]=a,n),(e={},e[o]={type:"cat"},e[s]=E(E({},SO(l,s)),u),e)))(t)}function jot(t){var n=t.chart,e=t.options,r=e.xAxis,i=e.yAxis,a=e.xField,o=e.yField;return r===!1?n.axis(a,!1):n.axis(a,r),i===!1?n.axis(o,!1):n.axis(o,i),t}function zot(t){var n=t.chart,e=t.options,r=e.legend,i=e.seriesField;return r&&i?n.legend(i,r):r===!1&&n.legend(!1),t}function Got(t){var n=t.chart,e=t.options,r=e.label,i=e.yField,a=e.isRange,o=Bn(n,"interval");if(!r)o.label(!1);else{var s=r.callback,l=vt(r,["callback"]);o.label({fields:[i],callback:s,cfg:E({layout:l!=null&&l.position?void 0:[{type:"interval-adjust-position"},{type:"interval-hide-overlap"},{type:"adjust-color"},{type:"limit-in-plot",cfg:{action:"hide"}}]},xn(a?E({content:function(c){var u;return(u=c[i])===null||u===void 0?void 0:u.join("-")}},l):l))})}return t}function Yot(t){var n=t.chart,e=t.options,r=e.tooltip,i=e.isGroup,a=e.isStack,o=e.groupField,s=e.data,l=e.xField,c=e.yField,u=e.seriesField;if(r===!1)n.tooltip(!1);else{var f=r;if(i&&a){var h=f.customItems,d=(f==null?void 0:f.formatter)||function(p){return{name:"".concat(p[u]," - ").concat(p[o]),value:p[c]}};f=E(E({},f),{customItems:function(p){var v=[];return $(p,function(g){var y=Ln(s,function(m){return WD(m,Kt(g.data,[l,u]))});y.forEach(function(m){v.push(E(E(E({},g),{value:m[c],data:m,mappingData:{_origin:m}}),d(m)))})}),h?h(v):v}})}n.tooltip(f)}return t}function H0(t,n){n===void 0&&(n=!1);var e=t.options,r=e.seriesField;return xt(Not,Yt,qr("columnStyle"),cs,W3("rect"),$ot,_O,jot,zot,Yot,Ad,TO,Got,nN,Ee,te,Ie(),Bot(e.yField,!n,!!r),Lot(!e.isStack),dl)(t)}function Wot(t){var n=t.options,e=n.xField,r=n.yField,i=n.xAxis,a=n.yAxis,o={left:"bottom",right:"top",top:"left",bottom:"right"},s=a!==!1?E({position:o[(a==null?void 0:a.position)||"left"]},a):!1,l=i!==!1?E({position:o[(i==null?void 0:i.position)||"bottom"]},i):!1;return E(E({},t),{options:E(E({},n),{xField:r,yField:e,xAxis:s,yAxis:l})})}function Vot(t){var n=t.options,e=n.label;return e&&!e.position&&(e.position="left",e.layout||(e.layout=[{type:"interval-adjust-position"},{type:"interval-hide-overlap"},{type:"adjust-color"},{type:"limit-in-plot",cfg:{action:"hide"}}])),U({},t,{options:{label:e}})}function Hot(t){var n=t.options,e=n.seriesField,r=n.isStack,i=n.legend;return e?i!==!1&&(i=E({position:r?"top-left":"right-top"},i||{})):i=!1,U({},t,{options:{legend:i}})}function Xot(t){var n=t.options,e=[{type:"transpose"},{type:"reflectY"}].concat(n.coordinate||[]);return U({},t,{options:{coordinate:e}})}function Uot(t){var n=t.chart,e=t.options,r=e.barStyle,i=e.barWidthRatio,a=e.minBarWidth,o=e.maxBarWidth,s=e.barBackground;return H0({chart:n,options:E(E({},e),{columnStyle:r,columnWidthRatio:i,minColumnWidth:a,maxColumnWidth:o,columnBackground:s})},!0)}function iN(t){return xt(Wot,Vot,Hot,pn,Xot,Uot)(t)}var qot=U({},Mt.getDefaultOptions(),{barWidthRatio:.6,marginRatio:1/32,tooltip:{shared:!0,showMarkers:!1,offset:20},legend:{radio:{}},interactions:[{type:"active-region"}]}),Zot=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="bar",e}return n.getDefaultOptions=function(){return qot},n.prototype.changeData=function(e){var r,i;this.updateOption({data:e});var a=this,o=a.chart,s=a.options,l=s.isPercent,c=s.xField,u=s.yField,f=s.xAxis,h=s.yAxis;r=[u,c],c=r[0],u=r[1],i=[h,f],f=i[0],h=i[1];var d=E(E({},s),{xField:c,yField:u,yAxis:h,xAxis:f});_O({chart:o,options:d}),o.changeData(Ed(e,c,u,c,l))},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return iN},n}(Mt),Kot=U({},Mt.getDefaultOptions(),{columnWidthRatio:.6,marginRatio:1/32,tooltip:{shared:!0,showMarkers:!1,offset:20},legend:{radio:{}},interactions:[{type:"active-region"}]}),Qot=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="column",e}return n.getDefaultOptions=function(){return Kot},n.prototype.changeData=function(e){this.updateOption({data:e});var r=this.options,i=r.yField,a=r.xField,o=r.isPercent,s=this,l=s.chart,c=s.options;_O({chart:l,options:c}),this.chart.changeData(Ed(e,i,a,i,o))},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return H0},n}(Mt),j1,Ko="$$percentage$$",Qo="$$mappingValue$$",Ga="$$conversion$$",nw="$$totalPercentage$$",Ch="$$x$$",Ph="$$y$$",Jot={appendPadding:[0,80],minSize:0,maxSize:1,meta:(j1={},j1[Qo]={min:0,max:1,nice:!1},j1),label:{style:{fill:"#fff",fontSize:12}},tooltip:{showTitle:!1,showMarkers:!1,shared:!1},conversionTag:{offsetX:10,offsetY:0,style:{fontSize:12,fill:"rgba(0,0,0,0.45)"}}},aN="CONVERSION_TAG_NAME";function LO(t,n,e){var r=[],i=e.yField,a=e.maxSize,o=e.minSize,s=z(UD(n,i),[i]),l=bt(a)?a:1,c=bt(o)?o:0;return r=Ae(t,function(u,f){var h=(u[i]||0)/s;return u[Ko]=h,u[Qo]=(l-c)*h+c,u[Ga]=[z(t,[f-1,i]),u[i]],u}),r}function IO(t){return function(n){var e=n.chart,r=n.options,i=r.conversionTag,a=r.filteredData,o=a||e.getOptions().data;if(i){var s=i.formatter;o.forEach(function(l,c){if(!(c<=0||Number.isNaN(l[Qo]))){var u=t(l,c,o,{top:!0,name:aN,text:{content:ut(s)?s(l,o):s,offsetX:i.offsetX,offsetY:i.offsetY,position:"end",autoRotate:!1,style:E({textAlign:"start",textBaseline:"middle"},i.style)}});e.annotation().line(u)}})}return n}}function tst(t){var n=t.chart,e=t.options,r=e.data,i=r===void 0?[]:r,a=e.yField,o=e.maxSize,s=e.minSize,l=LO(i,i,{yField:a,maxSize:o,minSize:s});return n.data(l),t}function est(t){var n=t.chart,e=t.options,r=e.xField,i=e.yField,a=e.color,o=e.tooltip,s=e.label,l=e.shape,c=l===void 0?"funnel":l,u=e.funnelStyle,f=e.state,h=xi(o,[r,i]),d=h.fields,p=h.formatter;Pr({chart:n,options:{type:"interval",xField:r,yField:Qo,colorField:r,tooltipFields:et(d)&&d.concat([Ko,Ga]),mapping:{shape:c,tooltip:p,color:a,style:u},label:s,state:f}});var v=Bn(t.chart,"interval");return v.adjust("symmetric"),t}function nst(t){var n=t.chart,e=t.options,r=e.isTransposed;return n.coordinate({type:"rect",actions:r?[]:[["transpose"],["scale",1,-1]]}),t}function oN(t){var n=t.options,e=t.chart,r=n.maxSize,i=z(e,["geometries","0","dataArray"],[]),a=z(e,["options","data","length"]),o=Ae(i,function(l){return z(l,["0","nextPoints","0","x"])*a-.5}),s=function(l,c,u,f){var h=r-(r-l[Qo])/2;return E(E({},f),{start:[o[c-1]||c-.5,h],end:[o[c-1]||c-.5,h+.05]})};return IO(s)(t),t}function sN(t){return xt(tst,est,nst,oN)(t)}function rst(t){var n,e=t.chart,r=t.options,i=r.data,a=i===void 0?[]:i,o=r.yField;return e.data(a),e.scale((n={},n[o]={sync:!0},n)),t}function ist(t){var n=t.chart,e=t.options,r=e.data,i=e.xField,a=e.yField,o=e.color,s=e.compareField,l=e.isTransposed,c=e.tooltip,u=e.maxSize,f=e.minSize,h=e.label,d=e.funnelStyle,p=e.state,v=e.showFacetTitle;return n.facet("mirror",{fields:[s],transpose:!l,padding:l?0:[32,0,0,0],showTitle:v,eachView:function(g,y){var m=l?y.rowIndex:y.columnIndex;l||g.coordinate({type:"rect",actions:[["transpose"],["scale",m===0?-1:1,-1]]});var x=LO(y.data,r,{yField:a,maxSize:u,minSize:f});g.data(x);var b=xi(c,[i,a,s]),w=b.fields,S=b.formatter,O=l?{offset:m===0?10:-23,position:m===0?"bottom":"top"}:{offset:10,position:"left",style:{textAlign:m===0?"end":"start"}};Pr({chart:g,options:{type:"interval",xField:i,yField:Qo,colorField:i,tooltipFields:et(w)&&w.concat([Ko,Ga]),mapping:{shape:"funnel",tooltip:S,color:o,style:d},label:h===!1?!1:U({},O,h),state:p}})}}),t}function lN(t){var n=t.chart,e=t.index,r=t.options,i=r.conversionTag,a=r.isTransposed;(bt(e)?[n]:n.views).forEach(function(o,s){var l=z(o,["geometries","0","dataArray"],[]),c=z(o,["options","data","length"]),u=Ae(l,function(h){return z(h,["0","nextPoints","0","x"])*c-.5}),f=function(h,d,p,v){var g=(e||s)===0?-1:1;return U({},v,{start:[u[d-1]||d-.5,h[Qo]],end:[u[d-1]||d-.5,h[Qo]+.05],text:a?{style:{textAlign:"start"}}:{offsetX:i!==!1?g*i.offsetX:0,style:{textAlign:(e||s)===0?"end":"start"}}})};IO(f)(U({},{chart:o,options:r}))})}function ast(t){var n=t.chart;return n.once("beforepaint",function(){return lN(t)}),t}function ost(t){return xt(rst,ist,ast)(t)}function sst(t){var n=t.chart,e=t.options,r=e.data,i=r===void 0?[]:r,a=e.yField,o=Hn(i,function(c,u){return c+(u[a]||0)},0),s=UD(i,a)[a],l=Ae(i,function(c,u){var f=[],h=[];if(c[nw]=(c[a]||0)/o,u){var d=i[u-1][Ch],p=i[u-1][Ph];f[0]=d[3],h[0]=p[3],f[1]=d[2],h[1]=p[2]}else f[0]=-.5,h[0]=1,f[1]=.5,h[1]=1;return h[2]=h[1]-c[nw],f[2]=(h[2]+1)/4,h[3]=h[2],f[3]=-f[2],c[Ch]=f,c[Ph]=h,c[Ko]=(c[a]||0)/s,c[Ga]=[z(i,[u-1,a]),c[a]],c});return n.data(l),t}function lst(t){var n=t.chart,e=t.options,r=e.xField,i=e.yField,a=e.color,o=e.tooltip,s=e.label,l=e.funnelStyle,c=e.state,u=xi(o,[r,i]),f=u.fields,h=u.formatter;return Pr({chart:n,options:{type:"polygon",xField:Ch,yField:Ph,colorField:r,tooltipFields:et(f)&&f.concat([Ko,Ga]),label:s,state:c,mapping:{tooltip:h,color:a,style:l}}}),t}function cst(t){var n=t.chart,e=t.options,r=e.isTransposed;return n.coordinate({type:"rect",actions:r?[["transpose"],["reflect","x"]]:[]}),t}function ust(t){var n=function(e,r,i,a){return E(E({},a),{start:[e[Ch][1],e[Ph][1]],end:[e[Ch][1]+.05,e[Ph][1]]})};return IO(n)(t),t}function fst(t){return xt(sst,lst,cst,ust)(t)}function hst(t){var n,e=t.chart,r=t.options,i=r.data,a=i===void 0?[]:i,o=r.yField;return e.data(a),e.scale((n={},n[o]={sync:!0},n)),t}function dst(t){var n=t.chart,e=t.options,r=e.seriesField,i=e.isTransposed,a=e.showFacetTitle;return n.facet("rect",{fields:[r],padding:[i?0:32,10,0,10],showTitle:a,eachView:function(o,s){sN(U({},t,{chart:o,options:{data:s.data}}))}}),t}function pst(t){return xt(hst,dst)(t)}var vst=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.rendering=!1,e}return n.prototype.change=function(e){var r=this;if(!this.rendering){var i=e.seriesField,a=e.compareField,o=a?lN:oN,s=this.context.view,l=i||a?s.views:[s];Ae(l,function(c,u){var f=c.getController("annotation"),h=Ln(z(f,["option"],[]),function(p){var v=p.name;return v!==aN});f.clear(!0),$(h,function(p){typeof p=="object"&&c.annotation()[p.type](p)});var d=z(c,["filteredData"],c.getOptions().data);o({chart:c,index:u,options:E(E({},e),{filteredData:LO(d,d,e)})}),c.filterData(d),r.rendering=!0,c.render(!0)})}this.rendering=!1},n}(be),cN="funnel-conversion-tag",rw="funnel-afterrender",uN={trigger:"afterrender",action:"".concat(cN,":change")};ht(cN,vst);wt(rw,{start:[uN]});function gst(t){var n=t.options,e=n.compareField,r=n.xField,i=n.yField,a=n.locale,o=n.funnelStyle,s=n.data,l=$0(a),c={label:e?{fields:[r,i,e,Ko,Ga],formatter:function(f){return"".concat(f[i])}}:{fields:[r,i,Ko,Ga],offset:0,position:"middle",formatter:function(f){return"".concat(f[r]," ").concat(f[i])}},tooltip:{title:r,formatter:function(f){return{name:f[r],value:f[i]}}},conversionTag:{formatter:function(f){return"".concat(l.get(["conversionTag","label"]),": ").concat(rN.apply(void 0,f[Ga]))}}},u;return(e||o)&&(u=function(f){return U({},e&&{lineWidth:1,stroke:"#fff"},ut(o)?o(f):o)}),U({options:c},t,{options:{funnelStyle:u,data:er(s)}})}function yst(t){var n=t.options,e=n.compareField,r=n.dynamicHeight,i=n.seriesField;return i?pst(t):e?ost(t):r?fst(t):sN(t)}function mst(t){var n,e=t.options,r=e.xAxis,i=e.yAxis,a=e.xField,o=e.yField;return xt(Ye((n={},n[a]=r,n[o]=i,n)))(t)}function xst(t){var n=t.chart;return n.axis(!1),t}function bst(t){var n=t.chart,e=t.options,r=e.legend;return r===!1?n.legend(!1):n.legend(r),t}function wst(t){var n=t.chart,e=t.options,r=e.interactions,i=e.dynamicHeight;return $(r,function(a){a.enable===!1?n.removeInteraction(a.type):n.interaction(a.type,a.cfg||{})}),i?n.removeInteraction(rw):n.interaction(rw,{start:[E(E({},uN),{arg:e})]}),t}function fN(t){return xt(gst,yst,mst,xst,pn,wst,bst,te,Yt,Ie())(t)}var Sst=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="funnel",e}return n.getDefaultOptions=function(){return Jot},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return fN},n.prototype.setState=function(e,r,i){i===void 0&&(i=!0);var a=Th(this.chart);$(a,function(o){r(o.getData())&&o.setState(e,i)})},n.prototype.getStates=function(){var e=Th(this.chart),r=[];return $(e,function(i){var a=i.getData(),o=i.getStates();$(o,function(s){r.push({data:a,state:s,geometry:i.geometry,element:i})})}),r},n.CONVERSATION_FIELD=Ga,n.PERCENT_FIELD=Ko,n.TOTAL_PERCENT_FIELD=nw,n}(Mt),Np,FO="range",hN="type",Ba="percent",Ost="#f0f0f0",dN="indicator-view",pN="range-view",Mst={percent:0,range:{ticks:[]},innerRadius:.9,radius:.95,startAngle:-7/6*Math.PI,endAngle:1/6*Math.PI,syncViewPadding:!0,axis:{line:null,label:{offset:-24,style:{textAlign:"center",textBaseline:"middle"}},subTickLine:{length:-8},tickLine:{length:-12},grid:null},indicator:{pointer:{style:{lineWidth:5,lineCap:"round"}},pin:{style:{r:9.75,lineWidth:4.5,fill:"#fff"}}},statistic:{title:!1},meta:(Np={},Np[FO]={sync:"v"},Np[Ba]={sync:"v",tickCount:5,tickInterval:.2},Np),animation:!1};function Ast(t,n){return t.map(function(e,r){var i;return i={},i[FO]=e-(t[r-1]||0),i[hN]="".concat(r),i[Ba]=n,i})}function vN(t){var n;return[(n={},n[Ba]=we(t,0,1),n)]}function gN(t,n){var e=z(n,["ticks"],[]),r=mn(e)?il(e):[0,we(t,0,1),1];return r[0]||r.shift(),Ast(r,t)}function Est(t){var n=t.chart,e=t.options,r=e.percent,i=e.range,a=e.radius,o=e.innerRadius,s=e.startAngle,l=e.endAngle,c=e.axis,u=e.indicator,f=e.gaugeStyle,h=e.type,d=e.meter,p=i.color,v=i.width;if(u){var g=vN(r),y=n.createView({id:dN});y.data(g),y.point().position("".concat(Ba,"*1")).shape(u.shape||"gauge-indicator").customInfo({defaultColor:n.getTheme().defaultColor,indicator:u}),y.coordinate("polar",{startAngle:s,endAngle:l,radius:o*a}),y.axis(Ba,c),y.scale(Ba,Kt(c,Sr))}var m=gN(r,e.range),x=n.createView({id:pN});x.data(m);var b=pt(p)?[p,Ost]:p,w=Nn({chart:x,options:{xField:"1",yField:FO,seriesField:hN,rawFields:[Ba],isStack:!0,interval:{color:b,style:f,shape:h==="meter"?"meter-gauge":null},args:{zIndexReversed:!0,sortZIndex:!0},minColumnWidth:v,maxColumnWidth:v}}).ext,S=w.geometry;return S.customInfo({meter:d}),x.coordinate("polar",{innerRadius:o,radius:a,startAngle:s,endAngle:l}).transpose(),t}function Tst(t){var n;return xt(Ye((n={range:{min:0,max:1,maxLimit:1,minLimit:0}},n[Ba]={},n)))(t)}function yN(t,n){var e=t.chart,r=t.options,i=r.statistic,a=r.percent;if(e.getController("annotation").clear(!0),i){var o=i.content,s=void 0;o&&(s=U({},{content:"".concat((a*100).toFixed(2),"%"),style:{opacity:.75,fontSize:"30px",lineHeight:1,textAlign:"center",color:"rgba(44,53,66,0.85)"}},o)),Dat(e,{statistic:E(E({},i),{content:s})},{percent:a})}return n&&e.render(!0),t}function Cst(t){var n=t.chart,e=t.options,r=e.tooltip;return r?n.tooltip(U({showTitle:!1,showMarkers:!1,containerTpl:'<div class="g2-tooltip"><div class="g2-tooltip-list"></div></div>',domStyles:{"g2-tooltip":{padding:"4px 8px",fontSize:"10px"}},customContent:function(i,a){var o=z(a,[0,"data",Ba],0);return"".concat((o*100).toFixed(2),"%")}},r)):n.tooltip(!1),t}function Pst(t){var n=t.chart;return n.legend(!1),t}function mN(t){return xt(Yt,te,Est,Tst,Cst,yN,Ee,Ie(),Pst)(t)}Xt("point","gauge-indicator",{draw:function(t,n){var e=t.customInfo,r=e.indicator,i=e.defaultColor,a=r,o=a.pointer,s=a.pin,l=n.addGroup(),c=this.parsePoint({x:0,y:0});return o&&l.addShape("line",{name:"pointer",attrs:E({x1:c.x,y1:c.y,x2:t.x,y2:t.y,stroke:i},o.style)}),s&&l.addShape("circle",{name:"pin",attrs:E({x:c.x,y:c.y,stroke:i},s.style)}),l}});Xt("interval","meter-gauge",{draw:function(t,n){var e=t.customInfo.meter,r=e===void 0?{}:e,i=r.steps,a=i===void 0?50:i,o=r.stepRatio,s=o===void 0?.5:o;a=a<1?1:a,s=we(s,0,1);var l=this.coordinate,c=l.startAngle,u=l.endAngle,f=0;if(s>0&&s<1){var h=u-c;f=h/a/(s/(1-s)+1-1/a)}for(var d=f/(1-s)*s,p=n.addGroup(),v=this.coordinate.getCenter(),g=this.coordinate.getRadius(),y=Ar.getAngle(t,this.coordinate),m=y.startAngle,x=y.endAngle,b=m;b<x;){var w=void 0,S=(b-c)%(d+f);S<d?w=b+(d-S):(b+=d+f-S,w=b+d);var O=Ar.getSectorPath(v.x,v.y,g,b,Math.min(w,x),g*this.coordinate.innerRadius);p.addShape("path",{name:"meter-gauge",attrs:{path:O,fill:t.color,stroke:t.color,lineWidth:.5}}),b=w+f}return p}});var kst=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="gauge",e}return n.getDefaultOptions=function(){return Mst},n.prototype.changeData=function(e){this.chart.emit(kt.BEFORE_CHANGE_DATA,ke.fromData(this.chart,kt.BEFORE_CHANGE_DATA,null)),this.updateOption({percent:e});var r=this.chart.views.find(function(a){return a.id===dN});r&&r.data(vN(e));var i=this.chart.views.find(function(a){return a.id===pN});i&&i.data(gN(e,this.options.range)),yN({chart:this.chart,options:this.options},!0),this.chart.emit(kt.AFTER_CHANGE_DATA,ke.fromData(this.chart,kt.AFTER_CHANGE_DATA,null))},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return mN},n}(Mt);function DP(t,n,e){if(e===1)return[0,n];var r=Math.floor(t/n);return[n*r,n*(r+1)]}function _st(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1}function xN(t,n,e,r,i){var a=er(t);VH(a,n);var o=Ni(a,n),s=HD(o),l=s.max-s.min,c=e;if(!e&&r&&(c=r>1?l/(r-1):s.max),!e&&!r){var u=_st(o);c=l/u}var f={},h=Gr(a,i);Mr(h)?$(a,function(p){var v=p[n],g=DP(v,c,r),y="".concat(g[0],"-").concat(g[1]);Vo(f,y)||(f[y]={range:g,count:0}),f[y].count+=1}):Object.keys(h).forEach(function(p){$(h[p],function(v){var g=v[n],y=DP(g,c,r),m="".concat(y[0],"-").concat(y[1]),x="".concat(m,"-").concat(p);Vo(f,x)||(f[x]={range:y,count:0},f[x][i]=p),f[x].count+=1})});var d=[];return $(f,function(p){d.push(p)}),d}var _g="range",kh="count",Lst=U({},Mt.getDefaultOptions(),{columnStyle:{stroke:"#FFFFFF"},tooltip:{shared:!0,showMarkers:!1},interactions:[{type:"active-region"}]});function Ist(t){var n=t.chart,e=t.options,r=e.data,i=e.binField,a=e.binNumber,o=e.binWidth,s=e.color,l=e.stackField,c=e.legend,u=e.columnStyle,f=xN(r,i,o,a,l);n.data(f);var h=U({},t,{options:{xField:_g,yField:kh,seriesField:l,isStack:!0,interval:{color:s,style:u}}});return Nn(h),c&&l?n.legend(l,c):n.legend(!1),t}function Fst(t){var n,e=t.options,r=e.xAxis,i=e.yAxis;return xt(Ye((n={},n[_g]=r,n[kh]=i,n)))(t)}function Dst(t){var n=t.chart,e=t.options,r=e.xAxis,i=e.yAxis;return r===!1?n.axis(_g,!1):n.axis(_g,r),i===!1?n.axis(kh,!1):n.axis(kh,i),t}function Rst(t){var n=t.chart,e=t.options,r=e.label,i=Bn(n,"interval");if(!r)i.label(!1);else{var a=r.callback,o=vt(r,["callback"]);i.label({fields:[kh],callback:a,cfg:xn(o)})}return t}function bN(t){return xt(Yt,qr("columnStyle"),Ist,Fst,Dst,cs,Rst,pn,Ee,te)(t)}var Bst=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="histogram",e}return n.getDefaultOptions=function(){return Lst},n.prototype.changeData=function(e){this.updateOption({data:e});var r=this.options,i=r.binField,a=r.binNumber,o=r.binWidth,s=r.stackField;this.chart.changeData(xN(e,i,o,a,s))},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return bN},n}(Mt),Nst=U({},Mt.getDefaultOptions(),{tooltip:{shared:!0,showMarkers:!0,showCrosshairs:!0,crosshairs:{type:"x"}},legend:{position:"top-left",radio:{}},isStack:!1}),$st=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.active=function(){var e=this.getView(),r=this.context.event;if(r.data){var i=r.data.items,a=e.geometries.filter(function(o){return o.type==="point"});$(a,function(o){$(o.elements,function(s){var l=VD(i,function(c){return c.data===s.data})!==-1;s.setState("active",l)})})}},n.prototype.reset=function(){var e=this.getView(),r=e.geometries.filter(function(i){return i.type==="point"});$(r,function(i){$(i.elements,function(a){a.setState("active",!1)})})},n.prototype.getView=function(){return this.context.view},n}(be);ht("marker-active",$st);wt("marker-active",{start:[{trigger:"tooltip:show",action:"marker-active:active"}],end:[{trigger:"tooltip:hide",action:"marker-active:reset"}]});var jst=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="line",e}return n.getDefaultOptions=function(){return Nst},n.prototype.changeData=function(e){this.updateOption({data:e});var r=this,i=r.chart,a=r.options;V0({chart:i,options:a}),this.chart.changeData(e)},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return tN},n}(Mt),wN=U({},Mt.getDefaultOptions(),{legend:{position:"right",radio:{}},tooltip:{shared:!1,showTitle:!1,showMarkers:!1},label:{layout:{type:"limit-in-plot",cfg:{action:"ellipsis"}}},pieStyle:{stroke:"white",lineWidth:1},statistic:{title:{style:{fontWeight:300,color:"#4B535E",textAlign:"center",fontSize:"20px",lineHeight:1}},content:{style:{fontWeight:"bold",color:"rgba(44,53,66,0.85)",textAlign:"center",fontSize:"32px",lineHeight:1}}},theme:{components:{annotation:{text:{animate:!1}}}}}),zst=[1,0,0,0,1,0,0,0,1];function iw(t,n){var e=n?X([],n,!0):X([],zst,!0);return Ar.transform(e,t)}var Gst=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getActiveElements=function(){var e=Ar.getDelegationObject(this.context);if(e){var r=this.context.view,i=e.component,a=e.item,o=i.get("field");if(o){var s=r.geometries[0].elements;return s.filter(function(l){return l.getModel().data[o]===a.value})}}return[]},n.prototype.getActiveElementLabels=function(){var e=this.context.view,r=this.getActiveElements(),i=e.geometries[0].labelsContainer.getChildren();return i.filter(function(a){return r.find(function(o){return Ne(o.getData(),a.get("data"))})})},n.prototype.transfrom=function(e){e===void 0&&(e=7.5);var r=this.getActiveElements(),i=this.getActiveElementLabels();r.forEach(function(a,o){var s=i[o],l=a.geometry.coordinate;if(l.isPolar&&l.isTransposed){var c=Ar.getAngle(a.getModel(),l),u=c.startAngle,f=c.endAngle,h=(u+f)/2,d=e,p=d*Math.cos(h),v=d*Math.sin(h);a.shape.setMatrix(iw([["t",p,v]])),s.setMatrix(iw([["t",p,v]]))}})},n.prototype.active=function(){this.transfrom()},n.prototype.reset=function(){this.transfrom(0)},n}(be);function Yst(t){var n=t.event,e,r=n.target;return r&&(e=r.get("element")),e}var Wst=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getAnnotations=function(e){var r=e||this.context.view;return r.getController("annotation").option},n.prototype.getInitialAnnotation=function(){return this.initialAnnotation},n.prototype.init=function(){var e=this,r=this.context.view;r.removeInteraction("tooltip"),r.on("afterchangesize",function(){var i=e.getAnnotations(r);e.initialAnnotation=i})},n.prototype.change=function(e){var r=this.context,i=r.view,a=r.event;this.initialAnnotation||(this.initialAnnotation=this.getAnnotations());var o=z(a,["data","data"]);if(a.type.match("legend-item")){var s=Ar.getDelegationObject(this.context),l=i.getGroupedFields()[0];if(s&&l){var c=s.item;o=i.getData().find(function(d){return d[l]===c.value})}}if(o){var u=z(e,"annotations",[]),f=z(e,"statistic",{});i.getController("annotation").clear(!0),$(u,function(d){typeof d=="object"&&i.annotation()[d.type](d)}),B0(i,{statistic:f,plotType:"pie"},o),i.render(!0)}var h=Yst(this.context);h&&h.shape.toFront()},n.prototype.reset=function(){var e=this.context.view,r=e.getController("annotation");r.clear(!0);var i=this.getInitialAnnotation();$(i,function(a){e.annotation()[a.type](a)}),e.render(!0)},n}(be),SN="pie-statistic";ht(SN,Wst);wt("pie-statistic-active",{start:[{trigger:"element:mouseenter",action:"pie-statistic:change"}],end:[{trigger:"element:mouseleave",action:"pie-statistic:reset"}]});ht("pie-legend",Gst);wt("pie-legend-active",{start:[{trigger:"legend-item:mouseenter",action:"pie-legend:active"}],end:[{trigger:"legend-item:mouseleave",action:"pie-legend:reset"}]});function Vst(t,n){var e=null;return $(t,function(r){typeof r[n]=="number"&&(e+=r[n])}),e}function Hst(t,n){var e;switch(t){case"inner":return e="-30%",pt(n)&&n.endsWith("%")?parseFloat(n)*.01>0?e:n:n<0?n:e;case"outer":return e=12,pt(n)&&n.endsWith("%")?parseFloat(n)*.01<0?e:n:n>0?n:e;default:return n}}function Lg(t,n){return rS(Xc(t,n),function(e){return e[n]===0})}function Xst(t){var n=t.chart,e=t.options,r=e.data,i=e.angleField,a=e.colorField,o=e.color,s=e.pieStyle,l=e.shape,c=Xc(r,i);if(Lg(c,i)){var u="$$percentage$$";c=c.map(function(h){var d;return E(E({},h),(d={},d[u]=1/c.length,d))}),n.data(c);var f=U({},t,{options:{xField:"1",yField:u,seriesField:a,isStack:!0,interval:{color:o,shape:l,style:s},args:{zIndexReversed:!0,sortZIndex:!0}}});Nn(f)}else{n.data(c);var f=U({},t,{options:{xField:"1",yField:i,seriesField:a,isStack:!0,interval:{color:o,shape:l,style:s},args:{zIndexReversed:!0,sortZIndex:!0}}});Nn(f)}return t}function Ust(t){var n,e=t.chart,r=t.options,i=r.meta,a=r.colorField,o=U({},i);return e.scale(o,(n={},n[a]={type:"cat"},n)),t}function qst(t){var n=t.chart,e=t.options,r=e.radius,i=e.innerRadius,a=e.startAngle,o=e.endAngle;return n.coordinate({type:"theta",cfg:{radius:r,innerRadius:i,startAngle:a,endAngle:o}}),t}function Zst(t){var n=t.chart,e=t.options,r=e.label,i=e.colorField,a=e.angleField,o=n.geometries[0];if(!r)o.label(!1);else{var s=r.callback,l=vt(r,["callback"]),c=xn(l);if(c.content){var u=c.content;c.content=function(p,v,g){var y=p[i],m=p[a],x=n.getScaleByField(a),b=x==null?void 0:x.scale(m);return ut(u)?u(E(E({},p),{percent:b}),v,g):pt(u)?z3(u,{value:m,name:y,percentage:bt(b)&&!J(m)?"".concat((b*100).toFixed(2),"%"):null}):u}}var f={inner:"",outer:"pie-outer",spider:"pie-spider"},h=c.type?f[c.type]:"pie-outer",d=c.layout?et(c.layout)?c.layout:[c.layout]:[];c.layout=(h?[{type:h}]:[]).concat(d),o.label({fields:i?[a,i]:[a],callback:s,cfg:E(E({},c),{offset:Hst(c.type,c.offset),type:"pie"})})}return t}function ON(t){var n=t.innerRadius,e=t.statistic,r=t.angleField,i=t.colorField,a=t.meta,o=t.locale,s=$0(o);if(n&&e){var l=U({},wN.statistic,e),c=l.title,u=l.content;return c!==!1&&(c=U({},{formatter:function(f){var h=f?f[i]:J(c.content)?s.get(["statistic","total"]):c.content,d=z(a,[i,"formatter"])||function(p){return p};return d(h)}},c)),u!==!1&&(u=U({},{formatter:function(f,h){var d=f?f[r]:Vst(h,r),p=z(a,[r,"formatter"])||function(v){return v};return f||J(u.content)?p(d):u.content}},u)),U({},{statistic:{title:c,content:u}},t)}return t}function MN(t){var n=t.chart,e=t.options,r=ON(e),i=r.innerRadius,a=r.statistic;return n.getController("annotation").clear(!0),xt(Ie())(t),i&&a&&B0(n,{statistic:a,plotType:"pie"}),t}function Kst(t){var n=t.chart,e=t.options,r=e.tooltip,i=e.colorField,a=e.angleField,o=e.data;if(r===!1)n.tooltip(r);else if(n.tooltip(U({},r,{shared:!1})),Lg(o,a)){var s=z(r,"fields"),l=z(r,"formatter");Mr(z(r,"fields"))&&(s=[i,a],l=l||function(c){return{name:c[i],value:dd(c[a])}}),n.geometries[0].tooltip(s.join("*"),nc(s,l))}return t}function Qst(t){var n=t.chart,e=t.options,r=ON(e),i=r.interactions,a=r.statistic,o=r.annotations;return $(i,function(s){var l,c;if(s.enable===!1)n.removeInteraction(s.type);else if(s.type==="pie-statistic-active"){var u=[];!((l=s.cfg)===null||l===void 0)&&l.start||(u=[{trigger:"element:mouseenter",action:"".concat(SN,":change"),arg:{statistic:a,annotations:o}}]),$((c=s.cfg)===null||c===void 0?void 0:c.start,function(f){u.push(E(E({},f),{arg:{statistic:a,annotations:o}}))}),n.interaction(s.type,U({},s.cfg,{start:u}))}else n.interaction(s.type,s.cfg||{})}),t}function AN(t){return xt(qr("pieStyle"),Xst,Ust,Yt,qst,Lu,Kst,Zst,cs,MN,Qst,te)(t)}var EN=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="pie",e}return n.getDefaultOptions=function(){return wN},n.prototype.changeData=function(e){this.chart.emit(kt.BEFORE_CHANGE_DATA,ke.fromData(this.chart,kt.BEFORE_CHANGE_DATA,null));var r=this.options,i=this.options.angleField,a=Xc(r.data,i),o=Xc(e,i);Lg(a,i)||Lg(o,i)?this.update({data:e}):(this.updateOption({data:e}),this.chart.data(o),MN({chart:this.chart,options:this.options}),this.chart.render(!0)),this.chart.emit(kt.AFTER_CHANGE_DATA,ke.fromData(this.chart,kt.AFTER_CHANGE_DATA,null))},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return AN},n}(Mt),TN=["#FAAD14","#E8EDF3"],Jst={percent:.2,color:TN,animation:{}};function DO(t){var n=we(hl(t)?t:0,0,1);return[{current:"".concat(n),type:"current",percent:n},{current:"".concat(n),type:"target",percent:1}]}function CN(t){var n=t.chart,e=t.options,r=e.percent,i=e.progressStyle,a=e.color,o=e.barWidthRatio;n.data(DO(r));var s=U({},t,{options:{xField:"current",yField:"percent",seriesField:"type",widthRatio:o,interval:{style:i,color:pt(a)?[a,TN[1]]:a},args:{zIndexReversed:!0,sortZIndex:!0}}});return Nn(s),n.tooltip(!1),n.axis(!1),n.legend(!1),t}function tlt(t){var n=t.chart;return n.coordinate("rect").transpose(),t}function PN(t){return xt(CN,Ye({}),tlt,te,Yt,Ie())(t)}var elt=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="process",e}return n.getDefaultOptions=function(){return Jst},n.prototype.changeData=function(e){this.updateOption({percent:e}),this.chart.changeData(DO(e))},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return PN},n}(Mt);function nlt(t){var n=t.chart,e=t.options,r=e.innerRadius,i=e.radius;return n.coordinate("theta",{innerRadius:r,radius:i}),t}function kN(t,n){var e=t.chart,r=t.options,i=r.innerRadius,a=r.statistic,o=r.percent,s=r.meta;if(e.getController("annotation").clear(!0),i&&a){var l=z(s,["percent","formatter"])||function(u){return"".concat((u*100).toFixed(2),"%")},c=a.content;c&&(c=U({},c,{content:J(c.content)?l(o):c.content})),B0(e,{statistic:E(E({},a),{content:c}),plotType:"ring-progress"},{percent:o})}return n&&e.render(!0),t}function _N(t){return xt(CN,Ye({}),nlt,kN,te,Yt,Ie())(t)}var rlt={percent:.2,innerRadius:.8,radius:.98,color:["#FAAD14","#E8EDF3"],statistic:{title:!1,content:{style:{fontSize:"14px",fontWeight:300,fill:"#4D4D4D",textAlign:"center",textBaseline:"middle"}}},animation:{}},ilt=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="ring-process",e}return n.getDefaultOptions=function(){return rlt},n.prototype.changeData=function(e){this.chart.emit(kt.BEFORE_CHANGE_DATA,ke.fromData(this.chart,kt.BEFORE_CHANGE_DATA,null)),this.updateOption({percent:e}),this.chart.data(DO(e)),kN({chart:this.chart,options:this.options},!0),this.chart.emit(kt.AFTER_CHANGE_DATA,ke.fromData(this.chart,kt.AFTER_CHANGE_DATA,null))},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return _N},n}(Mt);function Jo(t,n){return alt(t)||olt(t,n)||slt()}function alt(t){if(Array.isArray(t))return t}function olt(t,n){var e=[],r=!0,i=!1,a=void 0;try{for(var o=t[Symbol.iterator](),s;!(r=(s=o.next()).done)&&(e.push(s.value),!(n&&e.length===n));r=!0);}catch(l){i=!0,a=l}finally{try{!r&&o.return!=null&&o.return()}finally{if(i)throw a}}return e}function slt(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function RO(t,n,e,r){t=t.filter(function(p,v){var g=n(p,v),y=e(p,v);return g!=null&&isFinite(g)&&y!=null&&isFinite(y)}),r&&t.sort(function(p,v){return n(p)-n(v)});for(var i=t.length,a=new Float64Array(i),o=new Float64Array(i),s=0,l=0,c,u,f,h=0;h<i;)f=t[h],a[h]=c=+n(f,h,t),o[h]=u=+e(f,h,t),++h,s+=(c-s)/h,l+=(u-l)/h;for(var d=0;d<i;++d)a[d]-=s,o[d]-=l;return[a,o,s,l]}function Ll(t,n,e,r){for(var i=0,a=0,o=t.length;a<o;a++){var s=t[a],l=+n(s,a,t),c=+e(s,a,t);l!=null&&isFinite(l)&&c!=null&&isFinite(c)&&r(l,c,i++)}}function Fu(t,n,e,r,i){var a=0,o=0;return Ll(t,n,e,function(s,l){var c=l-i(s),u=l-r;a+=c*c,o+=u*u}),1-a/o}function RP(t){return Math.atan2(t[1][1]-t[0][1],t[1][0]-t[0][0])*180/Math.PI}function llt(t){return[(t[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2]}function Td(t,n,e){for(var r=Math.log(n-t)*Math.LOG10E+1|0,i=1*Math.pow(10,-r/2-1),a=1e4,o=[l(t),l(n)],s=0;c(o)&&s<a;);return o;function l(u){return[u,e(u)]}function c(u){s++;for(var f=u.length,h=!1,d=0;d<f-1;d++){var p=u[d],v=u[d+1],g=llt([p,v]),y=l(g[0]),m=RP([p,g]),x=RP([p,y]),b=Math.abs(m-x);b>i&&(u.splice(d+1,0,y),h=!0)}return h}}function Cd(t,n,e,r){var i=r-t*t,a=Math.abs(i)<1e-24?0:(e-t*n)/i,o=n-a*t;return[o,a]}function clt(){var t=function(a){return a[0]},n=function(a){return a[1]},e;function r(i){var a=0,o=0,s=0,l=0,c=0,u=0,f=e?+e[0]:1/0,h=e?+e[1]:-1/0;Ll(i,t,n,function(x,b){var w=Math.log(b),S=x*b;++a,o+=(b-o)/a,l+=(S-l)/a,u+=(x*S-u)/a,s+=(b*w-s)/a,c+=(S*w-c)/a,e||(x<f&&(f=x),x>h&&(h=x))});var d=Cd(l/o,s/o,c/o,u/o),p=Jo(d,2),v=p[0],g=p[1];v=Math.exp(v);var y=function(b){return v*Math.exp(g*b)},m=Td(f,h,y);return m.a=v,m.b=g,m.predict=y,m.rSquared=Fu(i,t,n,o,y),m}return r.domain=function(i){return arguments.length?(e=i,r):e},r.x=function(i){return arguments.length?(t=i,r):t},r.y=function(i){return arguments.length?(n=i,r):n},r}function LN(){var t=function(a){return a[0]},n=function(a){return a[1]},e;function r(i){var a=0,o=0,s=0,l=0,c=0,u=e?+e[0]:1/0,f=e?+e[1]:-1/0;Ll(i,t,n,function(m,x){++a,o+=(m-o)/a,s+=(x-s)/a,l+=(m*x-l)/a,c+=(m*m-c)/a,e||(m<u&&(u=m),m>f&&(f=m))});var h=Cd(o,s,l,c),d=Jo(h,2),p=d[0],v=d[1],g=function(x){return v*x+p},y=[[u,g(u)],[f,g(f)]];return y.a=v,y.b=p,y.predict=g,y.rSquared=Fu(i,t,n,s,g),y}return r.domain=function(i){return arguments.length?(e=i,r):e},r.x=function(i){return arguments.length?(t=i,r):t},r.y=function(i){return arguments.length?(n=i,r):n},r}function ult(t){t.sort(function(e,r){return e-r});var n=t.length/2;return n%1===0?(t[n-1]+t[n])/2:t[Math.floor(n)]}var BP=2,NP=1e-12;function flt(){var t=function(a){return a[0]},n=function(a){return a[1]},e=.3;function r(i){for(var a=RO(i,t,n,!0),o=Jo(a,4),s=o[0],l=o[1],c=o[2],u=o[3],f=s.length,h=Math.max(2,~~(e*f)),d=new Float64Array(f),p=new Float64Array(f),v=new Float64Array(f).fill(1),g=-1;++g<=BP;){for(var y=[0,h-1],m=0;m<f;++m){for(var x=s[m],b=y[0],w=y[1],S=x-s[b]>s[w]-x?b:w,O=0,M=0,A=0,T=0,C=0,P=1/Math.abs(s[S]-x||1),_=b;_<=w;++_){var k=s[_],I=l[_],L=hlt(Math.abs(x-k)*P)*v[_],F=k*L;O+=L,M+=F,A+=I*L,T+=I*F,C+=k*F}var B=Cd(M/O,A/O,T/O,C/O),D=Jo(B,2),N=D[0],j=D[1];d[m]=N+j*x,p[m]=Math.abs(l[m]-d[m]),dlt(s,m+1,y)}if(g===BP)break;var Y=ult(p);if(Math.abs(Y)<NP)break;for(var W=0,V,H;W<f;++W)V=p[W]/(6*Y),v[W]=V>=1?NP:(H=1-V*V)*H}return plt(s,d,c,u)}return r.bandwidth=function(i){return arguments.length?(e=i,r):e},r.x=function(i){return arguments.length?(t=i,r):t},r.y=function(i){return arguments.length?(n=i,r):n},r}function hlt(t){return(t=1-t*t*t)*t*t}function dlt(t,n,e){var r=t[n],i=e[0],a=e[1]+1;if(!(a>=t.length))for(;n>i&&t[a]-r<=r-t[i];)e[0]=++i,e[1]=a,++a}function plt(t,n,e,r){for(var i=t.length,a=[],o=0,s=0,l=[],c;o<i;++o)c=t[o]+e,l[0]===c?l[1]+=(n[o]-l[1])/++s:(s=0,l[1]+=r,l=[c,n[o]],a.push(l));return l[1]+=r,a}function vlt(){var t=function(o){return o[0]},n=function(o){return o[1]},e=Math.E,r;function i(a){var o=0,s=0,l=0,c=0,u=0,f=r?+r[0]:1/0,h=r?+r[1]:-1/0,d=Math.log(e);Ll(a,t,n,function(b,w){var S=Math.log(b)/d;++o,s+=(S-s)/o,l+=(w-l)/o,c+=(S*w-c)/o,u+=(S*S-u)/o,r||(b<f&&(f=b),b>h&&(h=b))});var p=Cd(s,l,c,u),v=Jo(p,2),g=v[0],y=v[1],m=function(w){return y*Math.log(w)/d+g},x=Td(f,h,m);return x.a=y,x.b=g,x.predict=m,x.rSquared=Fu(a,t,n,l,m),x}return i.domain=function(a){return arguments.length?(r=a,i):r},i.x=function(a){return arguments.length?(t=a,i):t},i.y=function(a){return arguments.length?(n=a,i):n},i.base=function(a){return arguments.length?(e=a,i):e},i}function IN(){var t=function(a){return a[0]},n=function(a){return a[1]},e;function r(i){var a=RO(i,t,n),o=Jo(a,4),s=o[0],l=o[1],c=o[2],u=o[3],f=s.length,h=0,d=0,p=0,v=0,g=0,y,m,x,b;for(y=0;y<f;)m=s[y],x=l[y++],b=m*m,h+=(b-h)/y,d+=(b*m-d)/y,p+=(b*b-p)/y,v+=(m*x-v)/y,g+=(b*x-g)/y;var w=0,S=0,O=e?+e[0]:1/0,M=e?+e[1]:-1/0;Ll(i,t,n,function(L,F){S++,w+=(F-w)/S,e||(L<O&&(O=L),L>M&&(M=L))});var A=p-h*h,T=h*A-d*d,C=(g*h-v*d)/T,P=(v*A-g*d)/T,_=-C*h,k=function(F){return F=F-c,C*F*F+P*F+_+u},I=Td(O,M,k);return I.a=C,I.b=P-2*C*c,I.c=_-P*c+C*c*c+u,I.predict=k,I.rSquared=Fu(i,t,n,w,k),I}return r.domain=function(i){return arguments.length?(e=i,r):e},r.x=function(i){return arguments.length?(t=i,r):t},r.y=function(i){return arguments.length?(n=i,r):n},r}function glt(){var t=function(o){return o[0]},n=function(o){return o[1]},e=3,r;function i(a){if(e===1){var o=LN().x(t).y(n).domain(r)(a);return o.coefficients=[o.b,o.a],delete o.a,delete o.b,o}if(e===2){var s=IN().x(t).y(n).domain(r)(a);return s.coefficients=[s.c,s.b,s.a],delete s.a,delete s.b,delete s.c,s}var l=RO(a,t,n),c=Jo(l,4),u=c[0],f=c[1],h=c[2],d=c[3],p=u.length,v=[],g=[],y=e+1,m=0,x=0,b=r?+r[0]:1/0,w=r?+r[1]:-1/0;Ll(a,t,n,function(k,I){++x,m+=(I-m)/x,r||(k<b&&(b=k),k>w&&(w=k))});var S,O,M,A,T;for(S=0;S<y;++S){for(M=0,A=0;M<p;++M)A+=Math.pow(u[M],S)*f[M];for(v.push(A),T=new Float64Array(y),O=0;O<y;++O){for(M=0,A=0;M<p;++M)A+=Math.pow(u[M],S+O);T[O]=A}g.push(T)}g.push(v);var C=mlt(g),P=function(I){I-=h;var L=d+C[0]+C[1]*I+C[2]*I*I;for(S=3;S<y;++S)L+=C[S]*Math.pow(I,S);return L},_=Td(b,w,P);return _.coefficients=ylt(y,C,-h,d),_.predict=P,_.rSquared=Fu(a,t,n,m,P),_}return i.domain=function(a){return arguments.length?(r=a,i):r},i.x=function(a){return arguments.length?(t=a,i):t},i.y=function(a){return arguments.length?(n=a,i):n},i.order=function(a){return arguments.length?(e=a,i):e},i}function ylt(t,n,e,r){var i=Array(t),a,o,s,l;for(a=0;a<t;++a)i[a]=0;for(a=t-1;a>=0;--a)for(s=n[a],l=1,i[a]+=s,o=1;o<=a;++o)l*=(a+1-o)/o,i[a-o]+=s*Math.pow(e,o)*l;return i[0]+=r,i}function mlt(t){var n=t.length-1,e=[],r,i,a,o,s;for(r=0;r<n;++r){for(o=r,i=r+1;i<n;++i)Math.abs(t[r][i])>Math.abs(t[r][o])&&(o=i);for(a=r;a<n+1;++a)s=t[a][r],t[a][r]=t[a][o],t[a][o]=s;for(i=r+1;i<n;++i)for(a=n;a>=r;a--)t[a][i]-=t[a][r]*t[r][i]/t[r][r]}for(i=n-1;i>=0;--i){for(s=0,a=i+1;a<n;++a)s+=t[a][i]*e[a];e[i]=(t[n][i]-s)/t[i][i]}return e}function xlt(){var t=function(a){return a[0]},n=function(a){return a[1]},e;function r(i){var a=0,o=0,s=0,l=0,c=0,u=0,f=e?+e[0]:1/0,h=e?+e[1]:-1/0;Ll(i,t,n,function(x,b){var w=Math.log(x),S=Math.log(b);++a,o+=(w-o)/a,s+=(S-s)/a,l+=(w*S-l)/a,c+=(w*w-c)/a,u+=(b-u)/a,e||(x<f&&(f=x),x>h&&(h=x))});var d=Cd(o,s,l,c),p=Jo(d,2),v=p[0],g=p[1];v=Math.exp(v);var y=function(b){return v*Math.pow(b,g)},m=Td(f,h,y);return m.a=v,m.b=g,m.predict=y,m.rSquared=Fu(i,t,n,u,y),m}return r.domain=function(i){return arguments.length?(e=i,r):e},r.x=function(i){return arguments.length?(t=i,r):t},r.y=function(i){return arguments.length?(n=i,r):n},r}var blt={exp:clt,linear:LN,loess:flt,log:vlt,poly:glt,pow:xlt,quad:IN};function wlt(t,n){var e=10,r={regionStyle:[{position:{start:[t,"max"],end:["max",n]},style:{fill:"#d8d0c0",opacity:.4}},{position:{start:["min","max"],end:[t,n]},style:{fill:"#a3dda1",opacity:.4}},{position:{start:["min",n],end:[t,"min"]},style:{fill:"#d8d0c0",opacity:.4}},{position:{start:[t,n],end:["max","min"]},style:{fill:"#a3dda1",opacity:.4}}],lineStyle:{stroke:"#9ba29a",lineWidth:1},labelStyle:[{position:["max",n],offsetX:-e,offsetY:-e,style:{textAlign:"right",textBaseline:"bottom",fontSize:14,fill:"#ccc"}},{position:["min",n],offsetX:e,offsetY:-e,style:{textAlign:"left",textBaseline:"bottom",fontSize:14,fill:"#ccc"}},{position:["min",n],offsetX:e,offsetY:e,style:{textAlign:"left",textBaseline:"top",fontSize:14,fill:"#ccc"}},{position:["max",n],offsetX:-e,offsetY:e,style:{textAlign:"right",textBaseline:"top",fontSize:14,fill:"#ccc"}}]};return r}var Slt=function(t,n){var e=n.view,r=n.options,i=r.xField,a=r.yField,o=e.getScaleByField(i),s=e.getScaleByField(a),l=t.map(function(c){return e.getCoordinate().convert({x:o.scale(c[0]),y:s.scale(c[1])})});return Fat(l,!1)},Olt=function(t){var n=t.options,e=n.xField,r=n.yField,i=n.data,a=n.regressionLine,o=a.type,s=o===void 0?"linear":o,l=a.algorithm,c=a.equation,u,f=null;if(l)u=et(l)?l:l(i),f=c;else{var h=blt[s]().x(function(d){return d[e]}).y(function(d){return d[r]});u=h(i),f=Alt(s,u)}return[Slt(u,t),f]},Mlt=function(t){var n,e=t.meta,r=e===void 0?{}:e,i=t.xField,a=t.yField,o=t.data,s=o[0][i],l=o[0][a],c=s>0,u=l>0;function f(h,d){var p=z(r,[h]);function v(y){return z(p,y)}var g={};return d==="x"?(bt(s)&&(bt(v("min"))||(g.min=c?0:s*2),bt(v("max"))||(g.max=c?s*2:0)),g):(bt(l)&&(bt(v("min"))||(g.min=u?0:l*2),bt(v("max"))||(g.max=u?l*2:0)),g)}return E(E({},r),(n={},n[i]=E(E({},r[i]),f(i,"x")),n[a]=E(E({},r[a]),f(a,"y")),n))};function Alt(t,n){var e,r,i,a=function(c,u){return u===void 0&&(u=4),Math.round(c*Math.pow(10,u))/Math.pow(10,u)},o=function(c){return Number.isFinite(c)?a(c):"?"};switch(t){case"linear":return"y = ".concat(o(n.a),"x + ").concat(o(n.b),", R^2 = ").concat(o(n.rSquared));case"exp":return"y = ".concat(o(n.a),"e^(").concat(o(n.b),"x), R^2 = ").concat(o(n.rSquared));case"log":return"y = ".concat(o(n.a),"ln(x) + ").concat(o(n.b),", R^2 = ").concat(o(n.rSquared));case"quad":return"y = ".concat(o(n.a),"x^2 + ").concat(o(n.b),"x + ").concat(o(n.c),", R^2 = ").concat(o(n.rSquared));case"poly":for(var s="y = ".concat(o((e=n.coefficients)===null||e===void 0?void 0:e[0])," + ").concat(o((r=n.coefficients)===null||r===void 0?void 0:r[1]),"x + ").concat(o((i=n.coefficients)===null||i===void 0?void 0:i[2]),"x^2"),l=3;l<n.coefficients.length;++l)s+=" + ".concat(o(n.coefficients[l]),"x^").concat(l);return"".concat(s,", R^2 = ").concat(o(n.rSquared));case"pow":return"y = ".concat(o(n.a),"x^").concat(o(n.b),", R^2 = ").concat(o(n.rSquared))}return null}function FN(t){var n=t.data,e=n===void 0?[]:n,r=t.xField,i=t.yField;if(e.length){for(var a=!0,o=!0,s=e[0],l=void 0,c=1;c<e.length&&(l=e[c],s[r]!==l[r]&&(a=!1),s[i]!==l[i]&&(o=!1),!(!a&&!o));c++)s=l;var u=[];a&&u.push(r),o&&u.push(i);var f=Kt(Mlt(t),u);return U({},t,{meta:f})}return t}function Elt(t){var n=t.chart,e=t.options,r=e.data,i=e.type,a=e.color,o=e.shape,s=e.pointStyle,l=e.shapeField,c=e.colorField,u=e.xField,f=e.yField,h=e.sizeField,d=e.size,p=e.tooltip;h&&(d||(d=[2,8]),bt(d)&&(d=[d,d])),p&&!p.fields&&(p=E(E({},p),{fields:[u,f,c,h,l]})),n.data(r),Zr(U({},t,{options:{seriesField:c,point:{color:a,shape:o,size:d,style:s},tooltip:p}}));var v=Bn(n,"point");return i&&v.adjust(i),t}function Nv(t){var n,e=t.options,r=e.xAxis,i=e.yAxis,a=e.xField,o=e.yField,s=FN(e);return xt(Ye((n={},n[a]=r,n[o]=i,n)))(U({},t,{options:s}))}function Tlt(t){var n=t.chart,e=t.options,r=e.xAxis,i=e.yAxis,a=e.xField,o=e.yField;return n.axis(a,r),n.axis(o,i),t}function Clt(t){var n=t.chart,e=t.options,r=e.legend,i=e.colorField,a=e.shapeField,o=e.sizeField,s=e.shapeLegend,l=e.sizeLegend,c=r!==!1;return i&&n.legend(i,c?r:!1),a&&(s?n.legend(a,s):n.legend(a,s===!1?!1:r)),o&&n.legend(o,l||!1),!c&&!s&&!l&&n.legend(!1),t}function Plt(t){var n=t.chart,e=t.options,r=e.label,i=e.yField,a=Bn(n,"point");if(!r)a.label(!1);else{var o=r.callback,s=vt(r,["callback"]);a.label({fields:[i],callback:o,cfg:xn(s)})}return t}function klt(t){var n=t.options,e=n.quadrant,r=[];if(e){var i=e.xBaseline,a=i===void 0?0:i,o=e.yBaseline,s=o===void 0?0:o,l=e.labels,c=e.regionStyle,u=e.lineStyle,f=wlt(a,s),h=new Array(4).join(",").split(",");h.forEach(function(d,p){r.push(E(E({type:"region",top:!1},f.regionStyle[p].position),{style:U({},f.regionStyle[p].style,c==null?void 0:c[p])}),E({type:"text",top:!0},U({},f.labelStyle[p],l==null?void 0:l[p])))}),r.push({type:"line",top:!1,start:["min",s],end:["max",s],style:U({},f.lineStyle,u)},{type:"line",top:!1,start:[a,"min"],end:[a,"max"],style:U({},f.lineStyle,u)})}return xt(Ie(r))(t)}function _lt(t){var n=t.options,e=t.chart,r=n.regressionLine;if(r){var i=r.style,a=r.equationStyle,o=a===void 0?{}:a,s=r.top,l=s===void 0?!1:s,c=r.showEquation,u=c===void 0?!1:c,f={stroke:"#9ba29a",lineWidth:2,opacity:.5},h={x:20,y:20,textAlign:"left",textBaseline:"middle",fontSize:14,fillOpacity:.5};e.annotation().shape({top:l,render:function(d,p){var v=d.addGroup({id:"".concat(e.id,"-regression-line"),name:"regression-line-group"}),g=Olt({view:p,options:n}),y=g[0],m=g[1];v.addShape("path",{name:"regression-line",attrs:E(E({path:y},f),i)}),u&&v.addShape("text",{name:"regression-equation",attrs:E(E(E({},h),o),{text:m})})}})}return t}function Llt(t){var n=t.chart,e=t.options,r=e.tooltip;return r?n.tooltip(r):r===!1&&n.tooltip(!1),t}function DN(t){return xt(Elt,Nv,Tlt,Clt,Llt,Plt,nN,Ad,TO,Ee,klt,te,Yt,_lt)(t)}var Ilt=U({},Mt.getDefaultOptions(),{size:4,tooltip:{showTitle:!1,showMarkers:!1,showCrosshairs:!0,crosshairs:{type:"xy"}}});wt("drag-move",{start:[{trigger:"plot:mousedown",action:"scale-translate:start"}],processing:[{trigger:"plot:mousemove",action:"scale-translate:translate",throttle:{wait:100,leading:!0,trailing:!1}}],end:[{trigger:"plot:mouseup",action:"scale-translate:end"}]});var Flt=function(t){G(n,t);function n(e,r){var i=t.call(this,e,r)||this;return i.type="scatter",i.on(kt.BEFORE_RENDER,function(a){var o,s,l=i,c=l.options,u=l.chart;if(((o=a.data)===null||o===void 0?void 0:o.source)===gr.FILTER){var f=i.chart.filterData(i.chart.getData());Nv({chart:u,options:E(E({},c),{data:f})})}((s=a.data)===null||s===void 0?void 0:s.source)===gr.RESET&&Nv({chart:u,options:c})}),i}return n.getDefaultOptions=function(){return Ilt},n.prototype.changeData=function(e){this.updateOption(FN(U({},this.options,{data:e})));var r=this,i=r.options,a=r.chart;Nv({chart:a,options:i}),this.chart.changeData(e)},n.prototype.getSchemaAdaptor=function(){return DN},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n}(Mt),_h="$$stock-range$$",X0="trend",RN="up",BN="down",Dlt={showMarkers:!1,showCrosshairs:!0,shared:!0,crosshairs:{type:"xy",follow:!0,text:function(t,n,e){var r;if(t==="x"){var i=e[0];r=i?i.title:n}else r=n;return{position:t==="y"?"start":"end",content:r,style:{fill:"#dfdfdf"}}},textBackground:{padding:[2,4],style:{fill:"#666"}}}},Rlt=U({},Mt.getDefaultOptions(),{tooltip:Dlt,interactions:[{type:"tooltip"}],legend:{position:"top-left"},risingFill:"#ef5350",fallingFill:"#26a69a"});function NN(t,n){return Ae(t,function(e){var r=e&&E({},e);if(et(n)&&r){var i=n[0],a=n[1],o=n[2],s=n[3];r[X0]=r[i]<=r[a]?RN:BN,r[_h]=[r[i],r[a],r[o],r[s]]}return r})}function Blt(t){var n=t.chart,e=t.options,r=e.yField,i=e.data,a=e.risingFill,o=e.fallingFill,s=e.tooltip,l=e.stockStyle;n.data(NN(i,r));var c=s;return c!==!1&&(c=U({},{fields:r},c)),CO(U({},t,{options:{schema:{shape:"candle",color:[a,o],style:l},yField:_h,seriesField:X0,rawFields:r,tooltip:c}})),t}function Nlt(t){var n,e,r=t.chart,i=t.options,a=i.meta,o=i.xAxis,s=i.yAxis,l=i.xField,c=(n={},n[l]={type:"timeCat",tickCount:6},n[X0]={values:[RN,BN]},n),u=U(c,a,(e={},e[l]=Kt(o,Sr),e[_h]=Kt(s,Sr),e));return r.scale(u),t}function $lt(t){var n=t.chart,e=t.options,r=e.xAxis,i=e.yAxis,a=e.xField;return r===!1?n.axis(a,!1):n.axis(a,r),i===!1?n.axis(_h,!1):n.axis(_h,i),t}function jlt(t){var n=t.chart,e=t.options,r=e.tooltip;return r!==!1?n.tooltip(r):n.tooltip(!1),t}function zlt(t){var n=t.chart,e=t.options,r=e.legend;return r?n.legend(X0,r):r===!1&&n.legend(!1),t}function $N(t){xt(Yt,Blt,Nlt,$lt,jlt,zlt,Ee,te,Ie(),Ad)(t)}var Glt=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="stock",e}return n.getDefaultOptions=function(){return Rlt},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return $N},n.prototype.changeData=function(e){this.updateOption({data:e});var r=this.options.yField;this.chart.changeData(NN(e,r))},n}(Mt);function Il(t){return Ae(t||[],function(n,e){return{x:"".concat(e),y:n}})}var Lh="x",Ec="y",jN={showTitle:!1,shared:!0,showMarkers:!1,customContent:function(t,n){return"".concat(z(n,[0,"data","y"],0))},containerTpl:'<div class="g2-tooltip"><div class="g2-tooltip-list"></div></div>',itemTpl:"<span>{value}</span>",domStyles:{"g2-tooltip":{padding:"2px 4px",fontSize:"10px"}},showCrosshairs:!0,crosshairs:{type:"x"}},Ylt={appendPadding:2,tooltip:E({},jN),animation:{}};function Wlt(t){var n=t.chart,e=t.options,r=e.data,i=e.color,a=e.areaStyle,o=e.point,s=e.line,l=o==null?void 0:o.state,c=Il(r);n.data(c);var u=U({},t,{options:{xField:Lh,yField:Ec,area:{color:i,style:a},line:s,point:o}}),f=U({},u,{options:{tooltip:!1}}),h=U({},u,{options:{tooltip:!1,state:l}});return j0(u),Iu(f),Zr(h),n.axis(!1),n.legend(!1),t}function Du(t){var n,e,r=t.options,i=r.xAxis,a=r.yAxis,o=r.data,s=Il(o);return xt(Ye((n={},n[Lh]=i,n[Ec]=a,n),(e={},e[Lh]={type:"cat"},e[Ec]=SO(s,Ec),e)))(t)}function zN(t){return xt(qr("areaStyle"),Wlt,Du,pn,Yt,te,Ie())(t)}var Vlt={appendPadding:2,tooltip:E({},jN),color:"l(90) 0:#E5EDFE 1:#ffffff",areaStyle:{fillOpacity:.6},line:{size:1,color:"#5B8FF9"},animation:{}},Hlt=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="tiny-area",e}return n.getDefaultOptions=function(){return Vlt},n.prototype.changeData=function(e){this.updateOption({data:e});var r=this,i=r.chart,a=r.options;Du({chart:i,options:a}),i.changeData(Il(e))},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return zN},n}(Mt);function Xlt(t){var n=t.chart,e=t.options,r=e.data,i=e.color,a=e.columnStyle,o=e.columnWidthRatio,s=Il(r);n.data(s);var l=U({},t,{options:{xField:Lh,yField:Ec,widthRatio:o,interval:{style:a,color:i}}});return Nn(l),n.axis(!1),n.legend(!1),n.interaction("element-active"),t}function GN(t){return xt(Yt,qr("columnStyle"),Xlt,Du,pn,te,Ie())(t)}var Ult={showTitle:!1,shared:!0,showMarkers:!1,customContent:function(t,n){return"".concat(z(n,[0,"data","y"],0))},containerTpl:'<div class="g2-tooltip"><div class="g2-tooltip-list"></div></div>',itemTpl:"<span>{value}</span>",domStyles:{"g2-tooltip":{padding:"2px 4px",fontSize:"10px"}}},qlt={appendPadding:2,tooltip:E({},Ult),animation:{}},Zlt=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="tiny-column",e}return n.getDefaultOptions=function(){return qlt},n.prototype.changeData=function(e){this.updateOption({data:e});var r=this,i=r.chart,a=r.options;Du({chart:i,options:a}),i.changeData(Il(e))},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return GN},n}(Mt);function Klt(t){var n=t.chart,e=t.options,r=e.data,i=e.color,a=e.lineStyle,o=e.point,s=o==null?void 0:o.state,l=Il(r);n.data(l);var c=U({},t,{options:{xField:Lh,yField:Ec,line:{color:i,style:a},point:o}}),u=U({},c,{options:{tooltip:!1,state:s}});return Iu(c),Zr(u),n.axis(!1),n.legend(!1),t}function YN(t){return xt(Klt,Du,Yt,pn,te,Ie())(t)}var Qlt=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="tiny-line",e}return n.getDefaultOptions=function(){return Ylt},n.prototype.changeData=function(e){this.updateOption({data:e});var r=this,i=r.chart,a=r.options;Du({chart:i,options:a}),i.changeData(Il(e))},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return YN},n}(Mt),Jlt={line:tN,pie:AN,column:H0,bar:iN,area:eN,gauge:mN,"tiny-line":YN,"tiny-column":GN,"tiny-area":zN,"ring-progress":_N,progress:PN,scatter:DN,histogram:bN,funnel:fN,stock:$N},tct={line:jst,pie:EN,column:Qot,bar:Zot,area:Tot,gauge:kst,"tiny-line":Qlt,"tiny-column":Zlt,"tiny-area":Hlt,"ring-progress":ilt,progress:elt,scatter:Flt,histogram:Bst,funnel:Sst,stock:Glt},ect={pie:{label:!1},column:{tooltip:{showMarkers:!1}},bar:{tooltip:{showMarkers:!1}}};function aw(t,n,e){var r=tct[t];if(!r){console.error("could not find ".concat(t," plot"));return}var i=Jlt[t];i({chart:n,options:U({},r.getDefaultOptions(),z(ect,t,{}),e)})}function nct(t){var n=t.chart,e=t.options,r=e.views,i=e.legend;return $(r,function(a){var o=a.region,s=a.data,l=a.meta,c=a.axes,u=a.coordinate,f=a.interactions,h=a.annotations,d=a.tooltip,p=a.geometries,v=n.createView({region:o});v.data(s);var g={};c&&$(c,function(y,m){g[m]=Kt(y,Sr)}),g=U({},l,g),v.scale(g),c?$(c,function(y,m){v.axis(m,y)}):v.axis(!1),v.coordinate(u),$(p,function(y){var m=Pr({chart:v,options:y}).ext,x=y.adjust;x&&m.geometry.adjust(x)}),$(f,function(y){y.enable===!1?v.removeInteraction(y.type):v.interaction(y.type,y.cfg)}),$(h,function(y){v.annotation()[y.type](E({},y))}),typeof a.animation=="boolean"?v.animate(!1):(v.animate(!0),$(v.geometries,function(y){y.animate(a.animation)})),d&&(v.interaction("tooltip"),v.tooltip(d))}),i?$(i,function(a,o){n.legend(o,a)}):n.legend(!1),n.tooltip(e.tooltip),t}function rct(t){var n=t.chart,e=t.options,r=e.plots,i=e.data,a=i===void 0?[]:i;return $(r,function(o){var s=o.type,l=o.region,c=o.options,u=c===void 0?{}:c,f=o.top,h=u.tooltip;if(f){aw(s,n,E(E({},u),{data:a}));return}var d=n.createView(E({region:l},Kt(u,Z3)));h&&d.interaction("tooltip"),aw(s,d,E({data:a},u))}),t}function ict(t){var n=t.chart,e=t.options;return n.option("slider",e.slider),t}function act(t){return xt(te,nct,rct,Ee,te,Yt,pn,ict,Ie())(t)}function oct(t,n){var e=t.getModel(),r=e.data,i;return et(r)?i=r[0][n]:i=r[n],i}function sct(t){var n=Pg(t);$(n,function(e){e.hasState("active")&&e.setState("active",!1),e.hasState("selected")&&e.setState("selected",!1),e.hasState("inactive")&&e.setState("inactive",!1)})}var lct=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getAssociationItems=function(e,r){var i,a=this.context.event,o=r||{},s=o.linkField,l=o.dim,c=[];if(!((i=a.data)===null||i===void 0)&&i.data){var u=a.data.data;$(e,function(f){var h,d,p=s;if(l==="x"?p=f.getXScale().field:l==="y"?p=(h=f.getYScales().find(function(g){return g.field===p}))===null||h===void 0?void 0:h.field:p||(p=(d=f.getGroupScales()[0])===null||d===void 0?void 0:d.field),!!p){var v=Ae(Pg(f),function(g){var y=!1,m=!1,x=et(u)?z(u[0],p):z(u,p);return oct(g,p)===x?y=!0:m=!0,{element:g,view:f,active:y,inactive:m}});c.push.apply(c,v)}})}return c},n.prototype.showTooltip=function(e){var r=LP(this.context.view),i=this.getAssociationItems(r,e);$(i,function(a){if(a.active){var o=a.element.shape.getCanvasBBox();a.view.showTooltip({x:o.minX+o.width/2,y:o.minY+o.height/2})}})},n.prototype.hideTooltip=function(){var e=LP(this.context.view);$(e,function(r){r.hideTooltip()})},n.prototype.active=function(e){var r=bf(this.context.view),i=this.getAssociationItems(r,e);$(i,function(a){var o=a.active,s=a.element;o&&s.setState("active",!0)})},n.prototype.selected=function(e){var r=bf(this.context.view),i=this.getAssociationItems(r,e);$(i,function(a){var o=a.active,s=a.element;o&&s.setState("selected",!0)})},n.prototype.highlight=function(e){var r=bf(this.context.view),i=this.getAssociationItems(r,e);$(i,function(a){var o=a.inactive,s=a.element;o&&s.setState("inactive",!0)})},n.prototype.reset=function(){var e=bf(this.context.view);$(e,function(r){sct(r)})},n}(be);ht("association",lct);wt("association-active",{start:[{trigger:"element:mouseenter",action:"association:active"}],end:[{trigger:"element:mouseleave",action:"association:reset"}]});wt("association-selected",{start:[{trigger:"element:mouseenter",action:"association:selected"}],end:[{trigger:"element:mouseleave",action:"association:reset"}]});wt("association-highlight",{start:[{trigger:"element:mouseenter",action:"association:highlight"}],end:[{trigger:"element:mouseleave",action:"association:reset"}]});wt("association-tooltip",{start:[{trigger:"element:mousemove",action:"association:showTooltip"}],end:[{trigger:"element:mouseleave",action:"association:hideTooltip"}]});(function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="mix",e}return n.prototype.getSchemaAdaptor=function(){return act},n})(Mt);var $P;(function(t){t.DEV="DEV",t.BETA="BETA",t.STABLE="STABLE"})($P||($P={}));var va="first-axes-view",ga="second-axes-view",zs="series-field-key";function WN(t,n,e,r,i){var a=[];n.forEach(function(f){r.forEach(function(h){var d,p=(d={},d[t]=h[t],d[e]=f,d[f]=h[f],d);a.push(p)})});var o=Object.values(Gr(a,e)),s=o[0],l=s===void 0?[]:s,c=o[1],u=c===void 0?[]:c;return i?[l.reverse(),u.reverse()]:[l,u]}function Na(t){return t!=="vertical"}function cct(t,n,e){var r=n[0],i=n[1],a=r.autoPadding,o=i.autoPadding,s=t.__axisPosition,l=s.layout,c=s.position;if(Na(l)&&c==="top"&&(r.autoPadding=e.instance(a.top,0,a.bottom,a.left),i.autoPadding=e.instance(o.top,a.left,o.bottom,0)),Na(l)&&c==="bottom"&&(r.autoPadding=e.instance(a.top,a.right/2+5,a.bottom,a.left),i.autoPadding=e.instance(o.top,o.right,o.bottom,a.right/2+5)),!Na(l)&&c==="bottom"){var u=a.left>=o.left?a.left:o.left;r.autoPadding=e.instance(a.top,a.right,a.bottom/2+5,u),i.autoPadding=e.instance(a.bottom/2+5,o.right,o.bottom,u)}if(!Na(l)&&c==="top"){var u=a.left>=o.left?a.left:o.left;r.autoPadding=e.instance(a.top,a.right,0,u),i.autoPadding=e.instance(0,o.right,a.top,u)}}function uct(t){var n=t.chart,e=t.options,r=e.data,i=e.xField,a=e.yField,o=e.color,s=e.barStyle,l=e.widthRatio,c=e.legend,u=e.layout,f=WN(i,a,zs,r,Na(u));c?n.legend(zs,c):c===!1&&n.legend(!1);var h,d,p=f[0],v=f[1];Na(u)?(h=n.createView({region:{start:{x:0,y:0},end:{x:.5,y:1}},id:va}),h.coordinate().transpose().reflect("x"),d=n.createView({region:{start:{x:.5,y:0},end:{x:1,y:1}},id:ga}),d.coordinate().transpose(),h.data(p),d.data(v)):(h=n.createView({region:{start:{x:0,y:0},end:{x:1,y:.5}},id:va}),d=n.createView({region:{start:{x:0,y:.5},end:{x:1,y:1}},id:ga}),d.coordinate().reflect("y"),h.data(p),d.data(v));var g=U({},t,{chart:h,options:{widthRatio:l,xField:i,yField:a[0],seriesField:zs,interval:{color:o,style:s}}});Nn(g);var y=U({},t,{chart:d,options:{xField:i,yField:a[1],seriesField:zs,widthRatio:l,interval:{color:o,style:s}}});return Nn(y),t}function fct(t){var n,e,r,i=t.options,a=t.chart,o=i.xAxis,s=i.yAxis,l=i.xField,c=i.yField,u=Lt(a,va),f=Lt(a,ga),h={};return Su((i==null?void 0:i.meta)||{}).map(function(d){z(i==null?void 0:i.meta,[d,"alias"])&&(h[d]=i.meta[d].alias)}),a.scale((n={},n[zs]={sync:!0,formatter:function(d){return z(h,d,d)}},n)),Ye((e={},e[l]=o,e[c[0]]=s[c[0]],e))(U({},t,{chart:u})),Ye((r={},r[l]=o,r[c[1]]=s[c[1]],r))(U({},t,{chart:f})),t}function hct(t){var n=t.chart,e=t.options,r=e.xAxis,i=e.yAxis,a=e.xField,o=e.yField,s=e.layout,l=Lt(n,va),c=Lt(n,ga);return(r==null?void 0:r.position)==="bottom"?c.axis(a,E(E({},r),{label:{formatter:function(){return""}}})):c.axis(a,!1),r===!1?l.axis(a,!1):l.axis(a,E({position:Na(s)?"top":"bottom"},r)),i===!1?(l.axis(o[0],!1),c.axis(o[1],!1)):(l.axis(o[0],i[o[0]]),c.axis(o[1],i[o[1]])),n.__axisPosition={position:l.getOptions().axes[a].position,layout:s},t}function dct(t){var n=t.chart;return Ee(U({},t,{chart:Lt(n,va)})),Ee(U({},t,{chart:Lt(n,ga)})),t}function pct(t){var n=t.chart,e=t.options,r=e.yField,i=e.yAxis;return dl(U({},t,{chart:Lt(n,va),options:{yAxis:i[r[0]]}})),dl(U({},t,{chart:Lt(n,ga),options:{yAxis:i[r[1]]}})),t}function vct(t){var n=t.chart;return Yt(U({},t,{chart:Lt(n,va)})),Yt(U({},t,{chart:Lt(n,ga)})),Yt(t),t}function gct(t){var n=t.chart;return te(U({},t,{chart:Lt(n,va)})),te(U({},t,{chart:Lt(n,ga)})),t}function yct(t){var n=this,e,r,i=t.chart,a=t.options,o=a.label,s=a.yField,l=a.layout,c=Lt(i,va),u=Lt(i,ga),f=Bn(c,"interval"),h=Bn(u,"interval");if(!o)f.label(!1),h.label(!1);else{var d=o.callback,p=vt(o,["callback"]);p.position||(p.position="middle"),p.offset===void 0&&(p.offset=2);var v=E({},p);if(Na(l)){var g=((e=v.style)===null||e===void 0?void 0:e.textAlign)||(p.position==="middle"?"center":"left");p.style=U({},p.style,{textAlign:g});var y={left:"right",right:"left",center:"center"};v.style=U({},v.style,{textAlign:y[g]})}else{var m={top:"bottom",bottom:"top",middle:"middle"};typeof p.position=="string"?p.position=m[p.position]:typeof p.position=="function"&&(p.position=function(){for(var w=[],S=0;S<arguments.length;S++)w[S]=arguments[S];return m[p.position.apply(n,w)]});var x=((r=v.style)===null||r===void 0?void 0:r.textBaseline)||"bottom";v.style=U({},v.style,{textBaseline:x});var b={top:"bottom",bottom:"top",middle:"middle"};p.style=U({},p.style,{textBaseline:b[x]})}f.label({fields:[s[0]],callback:d,cfg:xn(v)}),h.label({fields:[s[1]],callback:d,cfg:xn(p)})}return t}function mct(t){return xt(uct,fct,hct,pct,vct,yct,pn,dct,gct)(t)}(function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="bidirectional-bar",e}return n.getDefaultOptions=function(){return U({},t.getDefaultOptions.call(this),{syncViewPadding:cct})},n.prototype.changeData=function(e){e===void 0&&(e=[]),this.chart.emit(kt.BEFORE_CHANGE_DATA,ke.fromData(this.chart,kt.BEFORE_CHANGE_DATA,null)),this.updateOption({data:e});var r=this.options,i=r.xField,a=r.yField,o=r.layout,s=WN(i,a,zs,e,Na(o)),l=s[0],c=s[1],u=Lt(this.chart,va),f=Lt(this.chart,ga);u.data(l),f.data(c),this.chart.render(!0),this.chart.emit(kt.AFTER_CHANGE_DATA,ke.fromData(this.chart,kt.AFTER_CHANGE_DATA,null))},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return mct},n.SERIES_FIELD_KEY=zs,n})(Mt);var z1,Uc="$$range$$",xct="low-q1-median-q3-high",bct="$$y_outliers$$",VN="outliers_view",wct=U({},Mt.getDefaultOptions(),{meta:(z1={},z1[Uc]={min:0,alias:xct},z1),interactions:[{type:"active-region"}],tooltip:{showMarkers:!1,shared:!0},boxStyle:{lineWidth:1}}),HN=function(t,n){var e=t;if(Array.isArray(n)){var r=n[0],i=n[1],a=n[2],o=n[3],s=n[4];e=Ae(t,function(l){return l[Uc]=[l[r],l[i],l[a],l[o],l[s]],l})}return e};function Sct(t){var n=t.chart,e=t.options,r=e.xField,i=e.yField,a=e.groupField,o=e.color,s=e.tooltip,l=e.boxStyle;n.data(HN(e.data,i));var c=et(i)?Uc:i,u=i?et(i)?i:[i]:[],f=s;f!==!1&&(f=U({},{fields:et(i)?i:[]},f));var h=CO(U({},t,{options:{xField:r,yField:c,seriesField:a,tooltip:f,rawFields:u,label:!1,schema:{shape:"box",color:o,style:l}}})).ext;return a&&h.geometry.adjust("dodge"),t}function Oct(t){var n=t.chart,e=t.options,r=e.xField,i=e.data,a=e.outliersField,o=e.outliersStyle,s=e.padding,l=e.label;if(!a)return t;var c=n.createView({padding:s,id:VN}),u=i.reduce(function(f,h){var d=h[a];return d.forEach(function(p){var v;return f.push(E(E({},h),(v={},v[a]=p,v)))}),f},[]);return c.data(u),Zr({chart:c,options:{xField:r,yField:a,point:{shape:"circle",style:o},label:l}}),c.axis(!1),t}function Mct(t){var n,e,r=t.chart,i=t.options,a=i.meta,o=i.xAxis,s=i.yAxis,l=i.xField,c=i.yField,u=i.outliersField,f=Array.isArray(c)?Uc:c,h={};if(u){var d=bct;h=(n={},n[u]={sync:d,nice:!0},n[f]={sync:d,nice:!0},n)}var p=U(h,a,(e={},e[l]=Kt(o,Sr),e[f]=Kt(s,Sr),e));return r.scale(p),t}function Act(t){var n=t.chart,e=t.options,r=e.xAxis,i=e.yAxis,a=e.xField,o=e.yField,s=Array.isArray(o)?Uc:o;return r===!1?n.axis(a,!1):n.axis(a,r),i===!1?n.axis(Uc,!1):n.axis(s,i),t}function Ect(t){var n=t.chart,e=t.options,r=e.legend,i=e.groupField;return i?r?n.legend(i,r):n.legend(i,{position:"bottom"}):n.legend(!1),t}function Tct(t){return xt(Sct,Oct,Mct,Act,Ect,pn,Ie(),Ee,te,Yt)(t)}(function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="box",e}return n.getDefaultOptions=function(){return wct},n.prototype.changeData=function(e){this.updateOption({data:e});var r=this.options.yField,i=this.chart.views.find(function(a){return a.id===VN});i&&i.data(e),this.chart.changeData(HN(e,r))},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return Tct},n})(Mt);function jP(t,n,e){return t.length>1?"".concat(n,"_").concat(e):"".concat(n)}function XN(t){var n=t.data,e=t.xField,r=t.measureField,i=t.rangeField,a=t.targetField,o=t.layout,s=[],l=[];n.forEach(function(f,h){var d=[f[i]].flat();d.sort(function(g,y){return g-y}),d.forEach(function(g,y){var m,x=y===0?g:d[y]-d[y-1];s.push((m={rKey:"".concat(i,"_").concat(y)},m[e]=e?f[e]:String(h),m[i]=x,m))});var p=[f[r]].flat();p.forEach(function(g,y){var m;s.push((m={mKey:jP(p,r,y)},m[e]=e?f[e]:String(h),m[r]=g,m))});var v=[f[a]].flat();v.forEach(function(g,y){var m;s.push((m={tKey:jP(v,a,y)},m[e]=e?f[e]:String(h),m[a]=g,m))}),l.push(f[i],f[r],f[a])});var c=Math.min.apply(Math,l.flat(1/0)),u=Math.max.apply(Math,l.flat(1/0));return c=c>0?0:c,o==="vertical"&&s.reverse(),{min:c,max:u,ds:s}}function Cct(t){var n=t.chart,e=t.options,r=e.bulletStyle,i=e.targetField,a=e.rangeField,o=e.measureField,s=e.xField,l=e.color,c=e.layout,u=e.size,f=e.label,h=XN(e),d=h.min,p=h.max,v=h.ds;n.data(v);var g=U({},t,{options:{xField:s,yField:a,seriesField:"rKey",isStack:!0,label:z(f,"range"),interval:{color:z(l,"range"),style:z(r,"range"),size:z(u,"range")}}});Nn(g),n.geometries[0].tooltip(!1);var y=U({},t,{options:{xField:s,yField:o,seriesField:"mKey",isStack:!0,label:z(f,"measure"),interval:{color:z(l,"measure"),style:z(r,"measure"),size:z(u,"measure")}}});Nn(y);var m=U({},t,{options:{xField:s,yField:i,seriesField:"tKey",label:z(f,"target"),point:{color:z(l,"target"),style:z(r,"target"),size:ut(z(u,"target"))?function(x){return z(u,"target")(x)/2}:z(u,"target")/2,shape:c==="horizontal"?"line":"hyphen"}}});return Zr(m),c==="horizontal"&&n.coordinate().transpose(),E(E({},t),{ext:{data:{min:d,max:p}}})}function UN(t){var n,e,r=t.options,i=t.ext,a=r.xAxis,o=r.yAxis,s=r.targetField,l=r.rangeField,c=r.measureField,u=r.xField,f=i.data;return xt(Ye((n={},n[u]=a,n[c]=o,n),(e={},e[c]={min:f==null?void 0:f.min,max:f==null?void 0:f.max,sync:!0},e[s]={sync:"".concat(c)},e[l]={sync:"".concat(c)},e)))(t)}function Pct(t){var n=t.chart,e=t.options,r=e.xAxis,i=e.yAxis,a=e.xField,o=e.measureField,s=e.rangeField,l=e.targetField;return n.axis("".concat(s),!1),n.axis("".concat(l),!1),r===!1?n.axis("".concat(a),!1):n.axis("".concat(a),r),i===!1?n.axis("".concat(o),!1):n.axis("".concat(o),i),t}function kct(t){var n=t.chart,e=t.options,r=e.legend;return n.removeInteraction("legend-filter"),n.legend(r),n.legend("rKey",!1),n.legend("mKey",!1),n.legend("tKey",!1),t}function _ct(t){var n=t.chart,e=t.options,r=e.label,i=e.measureField,a=e.targetField,o=e.rangeField,s=n.geometries,l=s[0],c=s[1],u=s[2];return z(r,"range")?l.label("".concat(o),E({layout:[{type:"limit-in-plot"}]},xn(r.range))):l.label(!1),z(r,"measure")?c.label("".concat(i),E({layout:[{type:"limit-in-plot"}]},xn(r.measure))):c.label(!1),z(r,"target")?u.label("".concat(a),E({layout:[{type:"limit-in-plot"}]},xn(r.target))):u.label(!1),t}function Lct(t){xt(Cct,UN,Pct,kct,Yt,_ct,pn,Ee,te)(t)}var Ict=U({},Mt.getDefaultOptions(),{layout:"horizontal",size:{range:30,measure:20,target:20},xAxis:{tickLine:!1,line:null},bulletStyle:{range:{fillOpacity:.5}},label:{measure:{position:"right"}},tooltip:{showMarkers:!1}});(function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="bullet",e}return n.getDefaultOptions=function(){return Ict},n.prototype.changeData=function(e){this.updateOption({data:e});var r=XN(this.options),i=r.min,a=r.max,o=r.ds;UN({options:this.options,ext:{data:{min:i,max:a}},chart:this.chart}),this.chart.changeData(o)},n.prototype.getSchemaAdaptor=function(){return Lct},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n})(Mt);var Fct={y:0,nodeWidthRatio:.05,weight:!1,nodePaddingRatio:.1,id:function(t){return t.id},source:function(t){return t.source},target:function(t){return t.target},sourceWeight:function(t){return t.value||1},targetWeight:function(t){return t.value||1},sortBy:null};function Dct(t,n,e){$(t,function(r,i){r.inEdges=n.filter(function(a){return"".concat(e.target(a))==="".concat(i)}),r.outEdges=n.filter(function(a){return"".concat(e.source(a))==="".concat(i)}),r.edges=r.outEdges.concat(r.inEdges),r.frequency=r.edges.length,r.value=0,r.inEdges.forEach(function(a){r.value+=e.targetWeight(a)}),r.outEdges.forEach(function(a){r.value+=e.sourceWeight(a)})})}function Rct(t,n){var e={weight:function(i,a){return a.value-i.value},frequency:function(i,a){return a.frequency-i.frequency},id:function(i,a){return"".concat(n.id(i)).localeCompare("".concat(n.id(a)))}},r=e[n.sortBy];!r&&ut(n.sortBy)&&(r=n.sortBy),r&&t.sort(r)}function Bct(t,n){var e=t.length;if(!e)throw new TypeError("Invalid nodes: it's empty!");if(n.weight){var r=n.nodePaddingRatio;if(r<0||r>=1)throw new TypeError("Invalid nodePaddingRatio: it must be in range [0, 1)!");var i=r/(2*e),a=n.nodeWidthRatio;if(a<=0||a>=1)throw new TypeError("Invalid nodeWidthRatio: it must be in range (0, 1)!");var o=0;t.forEach(function(l){o+=l.value}),t.forEach(function(l){l.weight=l.value/o,l.width=l.weight*(1-r),l.height=a}),t.forEach(function(l,c){for(var u=0,f=c-1;f>=0;f--)u+=t[f].width+2*i;var h=l.minX=i+u,d=l.maxX=l.minX+l.width,p=l.minY=n.y-a/2,v=l.maxY=p+a;l.x=[h,d,d,h],l.y=[p,p,v,v]})}else{var s=1/e;t.forEach(function(l,c){l.x=(c+.5)*s,l.y=n.y})}return t}function Nct(t,n,e){if(e.weight){var r={};$(t,function(i,a){r[a]=i.value}),n.forEach(function(i){var a=e.source(i),o=e.target(i),s=t[a],l=t[o];if(s&&l){var c=r[a],u=e.sourceWeight(i),f=s.minX+(s.value-c)/s.value*s.width,h=f+u/s.value*s.width;r[a]-=u;var d=r[o],p=e.targetWeight(i),v=l.minX+(l.value-d)/l.value*l.width,g=v+p/l.value*l.width;r[o]-=p;var y=e.y;i.x=[f,h,v,g],i.y=[y,y,y,y],i.source=s,i.target=l}})}else n.forEach(function(i){var a=t[e.source(i)],o=t[e.target(i)];a&&o&&(i.x=[a.x,o.x],i.y=[a.y,o.y],i.source=a,i.target=o)});return n}function $ct(t){return Jt({},Fct,t)}function jct(t,n){var e=$ct(t),r={},i=n.nodes,a=n.links;i.forEach(function(l){var c=e.id(l);r[c]=l}),Dct(r,a,e),Rct(i,e);var o=Bct(i,e),s=Nct(r,a,e);return{nodes:o,links:s}}var qN="x",ZN="y",KN="name",QN="source",zct={nodeStyle:{opacity:1,fillOpacity:1,lineWidth:1},edgeStyle:{opacity:.5,lineWidth:2},label:{fields:["x","name"],callback:function(t,n){var e=(t[0]+t[1])/2,r=e>.5?-4:4;return{offsetX:r,content:n}},labelEmit:!0,style:{fill:"#8c8c8c"}},tooltip:{showTitle:!1,showMarkers:!1,fields:["source","target","value","isNode"],showContent:function(t){return!z(t,[0,"data","isNode"])},formatter:function(t){var n=t.source,e=t.target,r=t.value;return{name:"".concat(n," -> ").concat(e),value:r}}},interactions:[{type:"element-active"}],weight:!0,nodePaddingRatio:.1,nodeWidthRatio:.05};function Gct(t){var n=t.options,e=n.data,r=n.sourceField,i=n.targetField,a=n.weightField,o=n.nodePaddingRatio,s=n.nodeWidthRatio,l=n.rawFields,c=l===void 0?[]:l,u=R3(e,r,i,a),f=jct({weight:!0,nodePaddingRatio:o,nodeWidthRatio:s},u),h=f.nodes,d=f.links,p=h.map(function(g){return E(E({},Kt(g,X(["id","x","y","name"],c,!0))),{isNode:!0})}),v=d.map(function(g){return E(E({source:g.source.name,target:g.target.name,name:g.source.name||g.target.name},Kt(g,X(["x","y","value"],c,!0))),{isNode:!1})});return E(E({},t),{ext:E(E({},t.ext),{chordData:{nodesData:p,edgesData:v}})})}function Yct(t){var n,e=t.chart;return e.scale((n={x:{sync:!0,nice:!0},y:{sync:!0,nice:!0,max:1}},n[KN]={sync:"color"},n[QN]={sync:"color"},n)),t}function Wct(t){var n=t.chart;return n.axis(!1),t}function Vct(t){var n=t.chart;return n.legend(!1),t}function Hct(t){var n=t.chart,e=t.options,r=e.tooltip;return n.tooltip(r),t}function Xct(t){var n=t.chart;return n.coordinate("polar").reflect("y"),t}function Uct(t){var n=t.chart,e=t.options,r=t.ext.chordData.nodesData,i=e.nodeStyle,a=e.label,o=e.tooltip,s=n.createView();return s.data(r),z0({chart:s,options:{xField:qN,yField:ZN,seriesField:KN,polygon:{style:i},label:a,tooltip:o}}),t}function qct(t){var n=t.chart,e=t.options,r=t.ext.chordData.edgesData,i=e.edgeStyle,a=e.tooltip,o=n.createView();o.data(r);var s={xField:qN,yField:ZN,seriesField:QN,edge:{style:i,shape:"arc"},tooltip:a};return H3({chart:o,options:s}),t}function Zct(t){var n=t.chart,e=t.options,r=e.animation;return Md(n,r,Cat(n)),t}function Kct(t){return xt(Yt,Gct,Xct,Yct,Wct,Vct,Hct,qct,Uct,Ee,cs,Zct)(t)}(function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="chord",e}return n.getDefaultOptions=function(){return zct},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return Kct},n})(Mt);var Qct=["x","y","r","name","value","path","depth"],Jct={colorField:"name",autoFit:!0,pointStyle:{lineWidth:0,stroke:"#fff"},legend:!1,hierarchyConfig:{size:[1,1],padding:0},label:{fields:["name"],layout:{type:"limit-in-shape"}},tooltip:{showMarkers:!1,showTitle:!1},drilldown:{enabled:!1}},zP=4,tut=0,GP=5,YP="drilldown-bread-crumb",eut={position:"top-left",dividerText:"/",textStyle:{fontSize:12,fill:"rgba(0, 0, 0, 0.65)",cursor:"pointer"},activeTextStyle:{fill:"#87B5FF"}},Ih="hierarchy-data-transform-params",nut=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.name="drill-down",e.historyCache=[],e.breadCrumbGroup=null,e.breadCrumbCfg=eut,e}return n.prototype.click=function(){var e=z(this.context,["event","data","data"]);if(!e)return!1;this.drill(e),this.drawBreadCrumb()},n.prototype.resetPosition=function(){if(this.breadCrumbGroup){var e=this.context.view.getCoordinate(),r=this.breadCrumbGroup,i=r.getBBox(),a=this.getButtonCfg().position,o={x:e.start.x,y:e.end.y-(i.height+GP*2)};e.isPolar&&(o={x:0,y:0}),a==="bottom-left"&&(o={x:e.start.x,y:e.start.y});var s=Ar.transform(null,[["t",o.x+tut,o.y+i.height+GP]]);r.setMatrix(s)}},n.prototype.back=function(){mn(this.historyCache)&&this.backTo(this.historyCache.slice(0,-1))},n.prototype.reset=function(){this.historyCache[0]&&this.backTo(this.historyCache.slice(0,1)),this.historyCache=[],this.hideCrumbGroup()},n.prototype.drill=function(e){var r=this.context.view,i=z(r,["interactions","drill-down","cfg","transformData"],function(c){return c}),a=i(E({data:e.data},e[Ih]));r.changeData(a);for(var o=[],s=e;s;){var l=s.data;o.unshift({id:"".concat(l.name,"_").concat(s.height,"_").concat(s.depth),name:l.name,children:i(E({data:l},e[Ih]))}),s=s.parent}this.historyCache=(this.historyCache||[]).slice(0,-1).concat(o)},n.prototype.backTo=function(e){if(!(!e||e.length<=0)){var r=this.context.view,i=ln(e).children;r.changeData(i),e.length>1?(this.historyCache=e,this.drawBreadCrumb()):(this.historyCache=[],this.hideCrumbGroup())}},n.prototype.getButtonCfg=function(){var e=this.context.view,r=z(e,["interactions","drill-down","cfg","drillDownConfig"]);return U(this.breadCrumbCfg,r==null?void 0:r.breadCrumb,this.cfg)},n.prototype.drawBreadCrumb=function(){this.drawBreadCrumbGroup(),this.resetPosition(),this.breadCrumbGroup.show()},n.prototype.drawBreadCrumbGroup=function(){var e=this,r=this.getButtonCfg(),i=this.historyCache;this.breadCrumbGroup?this.breadCrumbGroup.clear():this.breadCrumbGroup=this.context.view.foregroundGroup.addGroup({name:YP});var a=0;i.forEach(function(o,s){var l=e.breadCrumbGroup.addShape({type:"text",id:o.id,name:"".concat(YP,"_").concat(o.name,"_text"),attrs:E(E({text:s===0&&!J(r.rootText)?r.rootText:o.name},r.textStyle),{x:a,y:0})}),c=l.getBBox();if(a+=c.width+zP,l.on("click",function(h){var d,p=h.target.get("id");if(p!==((d=ln(i))===null||d===void 0?void 0:d.id)){var v=i.slice(0,i.findIndex(function(g){return g.id===p})+1);e.backTo(v)}}),l.on("mouseenter",function(h){var d,p=h.target.get("id");p!==((d=ln(i))===null||d===void 0?void 0:d.id)?l.attr(r.activeTextStyle):l.attr({cursor:"default"})}),l.on("mouseleave",function(){l.attr(r.textStyle)}),s<i.length-1){var u=e.breadCrumbGroup.addShape({type:"text",name:"".concat(r.name,"_").concat(o.name,"_divider"),attrs:E(E({text:r.dividerText},r.textStyle),{x:a,y:0})}),f=u.getBBox();a+=f.width+zP}})},n.prototype.hideCrumbGroup=function(){this.breadCrumbGroup&&this.breadCrumbGroup.hide()},n.prototype.destroy=function(){this.breadCrumbGroup&&this.breadCrumbGroup.remove(),t.prototype.destroy.call(this)},n}(be);function rut(t,n){return t.parent===n.parent?1:2}function iut(t){return t.reduce(aut,0)/t.length}function aut(t,n){return t+n.x}function out(t){return 1+t.reduce(sut,0)}function sut(t,n){return Math.max(t,n.y)}function lut(t){for(var n;n=t.children;)t=n[0];return t}function cut(t){for(var n;n=t.children;)t=n[n.length-1];return t}function uut(){var t=rut,n=1,e=1,r=!1;function i(a){var o,s=0;a.eachAfter(function(h){var d=h.children;d?(h.x=iut(d),h.y=out(d)):(h.x=o?s+=t(h,o):0,h.y=0,o=h)});var l=lut(a),c=cut(a),u=l.x-t(l,c)/2,f=c.x+t(c,l)/2;return a.eachAfter(r?function(h){h.x=(h.x-a.x)*n,h.y=(a.y-h.y)*e}:function(h){h.x=(h.x-u)/(f-u)*n,h.y=(1-(a.y?h.y/a.y:1))*e})}return i.separation=function(a){return arguments.length?(t=a,i):t},i.size=function(a){return arguments.length?(r=!1,n=+a[0],e=+a[1],i):r?null:[n,e]},i.nodeSize=function(a){return arguments.length?(r=!0,n=+a[0],e=+a[1],i):r?[n,e]:null},i}function fut(t){var n=0,e=t.children,r=e&&e.length;if(!r)n=1;else for(;--r>=0;)n+=e[r].value;t.value=n}function hut(){return this.eachAfter(fut)}function dut(t,n){let e=-1;for(const r of this)t.call(n,r,++e,this);return this}function put(t,n){for(var e=this,r=[e],i,a,o=-1;e=r.pop();)if(t.call(n,e,++o,this),i=e.children)for(a=i.length-1;a>=0;--a)r.push(i[a]);return this}function vut(t,n){for(var e=this,r=[e],i=[],a,o,s,l=-1;e=r.pop();)if(i.push(e),a=e.children)for(o=0,s=a.length;o<s;++o)r.push(a[o]);for(;e=i.pop();)t.call(n,e,++l,this);return this}function gut(t,n){let e=-1;for(const r of this)if(t.call(n,r,++e,this))return r}function yut(t){return this.eachAfter(function(n){for(var e=+t(n.data)||0,r=n.children,i=r&&r.length;--i>=0;)e+=r[i].value;n.value=e})}function mut(t){return this.eachBefore(function(n){n.children&&n.children.sort(t)})}function xut(t){for(var n=this,e=but(n,t),r=[n];n!==e;)n=n.parent,r.push(n);for(var i=r.length;t!==e;)r.splice(i,0,t),t=t.parent;return r}function but(t,n){if(t===n)return t;var e=t.ancestors(),r=n.ancestors(),i=null;for(t=e.pop(),n=r.pop();t===n;)i=t,t=e.pop(),n=r.pop();return i}function wut(){for(var t=this,n=[t];t=t.parent;)n.push(t);return n}function Sut(){return Array.from(this)}function Out(){var t=[];return this.eachBefore(function(n){n.children||t.push(n)}),t}function Mut(){var t=this,n=[];return t.each(function(e){e!==t&&n.push({source:e.parent,target:e})}),n}function*Aut(){var t=this,n,e=[t],r,i,a;do for(n=e.reverse(),e=[];t=n.pop();)if(yield t,r=t.children)for(i=0,a=r.length;i<a;++i)e.push(r[i]);while(e.length)}function Ru(t,n){t instanceof Map?(t=[void 0,t],n===void 0&&(n=Cut)):n===void 0&&(n=Tut);for(var e=new qc(t),r,i=[e],a,o,s,l;r=i.pop();)if((o=n(r.data))&&(l=(o=Array.from(o)).length))for(r.children=o,s=l-1;s>=0;--s)i.push(a=o[s]=new qc(o[s])),a.parent=r,a.depth=r.depth+1;return e.eachBefore(JN)}function Eut(){return Ru(this).eachBefore(Put)}function Tut(t){return t.children}function Cut(t){return Array.isArray(t)?t[1]:null}function Put(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function JN(t){var n=0;do t.height=n;while((t=t.parent)&&t.height<++n)}function qc(t){this.data=t,this.depth=this.height=0,this.parent=null}qc.prototype=Ru.prototype={constructor:qc,count:hut,each:dut,eachAfter:vut,eachBefore:put,find:gut,sum:yut,sort:mut,path:xut,ancestors:wut,descendants:Sut,leaves:Out,links:Mut,copy:Eut,[Symbol.iterator]:Aut};function kut(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function _ut(t){for(var n=t.length,e,r;n;)r=Math.random()*n--|0,e=t[n],t[n]=t[r],t[r]=e;return t}function t$(t){for(var n=0,e=(t=_ut(Array.from(t))).length,r=[],i,a;n<e;)i=t[n],a&&e$(a,i)?++n:(a=Iut(r=Lut(r,i)),n=0);return a}function Lut(t,n){var e,r;if(G1(n,t))return[n];for(e=0;e<t.length;++e)if($p(n,t[e])&&G1(wf(t[e],n),t))return[t[e],n];for(e=0;e<t.length-1;++e)for(r=e+1;r<t.length;++r)if($p(wf(t[e],t[r]),n)&&$p(wf(t[e],n),t[r])&&$p(wf(t[r],n),t[e])&&G1(n$(t[e],t[r],n),t))return[t[e],t[r],n];throw new Error}function $p(t,n){var e=t.r-n.r,r=n.x-t.x,i=n.y-t.y;return e<0||e*e<r*r+i*i}function e$(t,n){var e=t.r-n.r+Math.max(t.r,n.r,1)*1e-9,r=n.x-t.x,i=n.y-t.y;return e>0&&e*e>r*r+i*i}function G1(t,n){for(var e=0;e<n.length;++e)if(!e$(t,n[e]))return!1;return!0}function Iut(t){switch(t.length){case 1:return Fut(t[0]);case 2:return wf(t[0],t[1]);case 3:return n$(t[0],t[1],t[2])}}function Fut(t){return{x:t.x,y:t.y,r:t.r}}function wf(t,n){var e=t.x,r=t.y,i=t.r,a=n.x,o=n.y,s=n.r,l=a-e,c=o-r,u=s-i,f=Math.sqrt(l*l+c*c);return{x:(e+a+l/f*u)/2,y:(r+o+c/f*u)/2,r:(f+i+s)/2}}function n$(t,n,e){var r=t.x,i=t.y,a=t.r,o=n.x,s=n.y,l=n.r,c=e.x,u=e.y,f=e.r,h=r-o,d=r-c,p=i-s,v=i-u,g=l-a,y=f-a,m=r*r+i*i-a*a,x=m-o*o-s*s+l*l,b=m-c*c-u*u+f*f,w=d*p-h*v,S=(p*b-v*x)/(w*2)-r,O=(v*g-p*y)/w,M=(d*x-h*b)/(w*2)-i,A=(h*y-d*g)/w,T=O*O+A*A-1,C=2*(a+S*O+M*A),P=S*S+M*M-a*a,_=-(T?(C+Math.sqrt(C*C-4*T*P))/(2*T):P/C);return{x:r+S+O*_,y:i+M+A*_,r:_}}function WP(t,n,e){var r=t.x-n.x,i,a,o=t.y-n.y,s,l,c=r*r+o*o;c?(a=n.r+e.r,a*=a,l=t.r+e.r,l*=l,a>l?(i=(c+l-a)/(2*c),s=Math.sqrt(Math.max(0,l/c-i*i)),e.x=t.x-i*r-s*o,e.y=t.y-i*o+s*r):(i=(c+a-l)/(2*c),s=Math.sqrt(Math.max(0,a/c-i*i)),e.x=n.x+i*r-s*o,e.y=n.y+i*o+s*r)):(e.x=n.x+e.r,e.y=n.y)}function VP(t,n){var e=t.r+n.r-1e-6,r=n.x-t.x,i=n.y-t.y;return e>0&&e*e>r*r+i*i}function HP(t){var n=t._,e=t.next._,r=n.r+e.r,i=(n.x*e.r+e.x*n.r)/r,a=(n.y*e.r+e.y*n.r)/r;return i*i+a*a}function jp(t){this._=t,this.next=null,this.previous=null}function r$(t){if(!(i=(t=kut(t)).length))return 0;var n,e,r,i,a,o,s,l,c,u,f;if(n=t[0],n.x=0,n.y=0,!(i>1))return n.r;if(e=t[1],n.x=-e.r,e.x=n.r,e.y=0,!(i>2))return n.r+e.r;WP(e,n,r=t[2]),n=new jp(n),e=new jp(e),r=new jp(r),n.next=r.previous=e,e.next=n.previous=r,r.next=e.previous=n;t:for(s=3;s<i;++s){WP(n._,e._,r=t[s]),r=new jp(r),l=e.next,c=n.previous,u=e._.r,f=n._.r;do if(u<=f){if(VP(l._,r._)){e=l,n.next=e,e.previous=n,--s;continue t}u+=l._.r,l=l.next}else{if(VP(c._,r._)){n=c,n.next=e,e.previous=n,--s;continue t}f+=c._.r,c=c.previous}while(l!==c.next);for(r.previous=n,r.next=e,n.next=e.previous=e=r,a=HP(n);(r=r.next)!==e;)(o=HP(r))<a&&(n=r,a=o);e=n.next}for(n=[e._],r=e;(r=r.next)!==e;)n.push(r._);for(r=t$(n),s=0;s<i;++s)n=t[s],n.x-=r.x,n.y-=r.y;return r.r}function Dut(t){return r$(t),t}function Rut(t){return t==null?null:Ig(t)}function Ig(t){if(typeof t!="function")throw new Error;return t}function Bs(){return 0}function rc(t){return function(){return t}}function But(t){return Math.sqrt(t.value)}function i$(){var t=null,n=1,e=1,r=Bs;function i(a){return a.x=n/2,a.y=e/2,t?a.eachBefore(XP(t)).eachAfter(Y1(r,.5)).eachBefore(UP(1)):a.eachBefore(XP(But)).eachAfter(Y1(Bs,1)).eachAfter(Y1(r,a.r/Math.min(n,e))).eachBefore(UP(Math.min(n,e)/(2*a.r))),a}return i.radius=function(a){return arguments.length?(t=Rut(a),i):t},i.size=function(a){return arguments.length?(n=+a[0],e=+a[1],i):[n,e]},i.padding=function(a){return arguments.length?(r=typeof a=="function"?a:rc(+a),i):r},i}function XP(t){return function(n){n.children||(n.r=Math.max(0,+t(n)||0))}}function Y1(t,n){return function(e){if(r=e.children){var r,i,a=r.length,o=t(e)*n||0,s;if(o)for(i=0;i<a;++i)r[i].r+=o;if(s=r$(r),o)for(i=0;i<a;++i)r[i].r-=o;e.r=s+o}}}function UP(t){return function(n){var e=n.parent;n.r*=t,e&&(n.x=e.x+t*n.x,n.y=e.y+t*n.y)}}function a$(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function Pd(t,n,e,r,i){for(var a=t.children,o,s=-1,l=a.length,c=t.value&&(r-n)/t.value;++s<l;)o=a[s],o.y0=e,o.y1=i,o.x0=n,o.x1=n+=o.value*c}function o$(){var t=1,n=1,e=0,r=!1;function i(o){var s=o.height+1;return o.x0=o.y0=e,o.x1=t,o.y1=n/s,o.eachBefore(a(n,s)),r&&o.eachBefore(a$),o}function a(o,s){return function(l){l.children&&Pd(l,l.x0,o*(l.depth+1)/s,l.x1,o*(l.depth+2)/s);var c=l.x0,u=l.y0,f=l.x1-e,h=l.y1-e;f<c&&(c=f=(c+f)/2),h<u&&(u=h=(u+h)/2),l.x0=c,l.y0=u,l.x1=f,l.y1=h}}return i.round=function(o){return arguments.length?(r=!!o,i):r},i.size=function(o){return arguments.length?(t=+o[0],n=+o[1],i):[t,n]},i.padding=function(o){return arguments.length?(e=+o,i):e},i}var Nut={depth:-1},qP={};function $ut(t){return t.id}function jut(t){return t.parentId}function zut(){var t=$ut,n=jut;function e(r){var i=Array.from(r),a=i.length,o,s,l,c,u,f,h,d=new Map;for(s=0;s<a;++s)o=i[s],u=i[s]=new qc(o),(f=t(o,s,r))!=null&&(f+="")&&(h=u.id=f,d.set(h,d.has(h)?qP:u)),(f=n(o,s,r))!=null&&(f+="")&&(u.parent=f);for(s=0;s<a;++s)if(u=i[s],f=u.parent){if(c=d.get(f),!c)throw new Error("missing: "+f);if(c===qP)throw new Error("ambiguous: "+f);c.children?c.children.push(u):c.children=[u],u.parent=c}else{if(l)throw new Error("multiple roots");l=u}if(!l)throw new Error("no root");if(l.parent=Nut,l.eachBefore(function(p){p.depth=p.parent.depth+1,--a}).eachBefore(JN),l.parent=null,a>0)throw new Error("cycle");return l}return e.id=function(r){return arguments.length?(t=Ig(r),e):t},e.parentId=function(r){return arguments.length?(n=Ig(r),e):n},e}function Gut(t,n){return t.parent===n.parent?1:2}function W1(t){var n=t.children;return n?n[0]:t.t}function V1(t){var n=t.children;return n?n[n.length-1]:t.t}function Yut(t,n,e){var r=e/(n.i-t.i);n.c-=r,n.s+=e,t.c+=r,n.z+=e,n.m+=e}function Wut(t){for(var n=0,e=0,r=t.children,i=r.length,a;--i>=0;)a=r[i],a.z+=n,a.m+=n,n+=a.s+(e+=a.c)}function Vut(t,n,e){return t.a.parent===n.parent?t.a:e}function $v(t,n){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=n}$v.prototype=Object.create(qc.prototype);function Hut(t){for(var n=new $v(t,0),e,r=[n],i,a,o,s;e=r.pop();)if(a=e._.children)for(e.children=new Array(s=a.length),o=s-1;o>=0;--o)r.push(i=e.children[o]=new $v(a[o],o)),i.parent=e;return(n.parent=new $v(null,0)).children=[n],n}function Xut(){var t=Gut,n=1,e=1,r=null;function i(c){var u=Hut(c);if(u.eachAfter(a),u.parent.m=-u.z,u.eachBefore(o),r)c.eachBefore(l);else{var f=c,h=c,d=c;c.eachBefore(function(m){m.x<f.x&&(f=m),m.x>h.x&&(h=m),m.depth>d.depth&&(d=m)});var p=f===h?1:t(f,h)/2,v=p-f.x,g=n/(h.x+p+v),y=e/(d.depth||1);c.eachBefore(function(m){m.x=(m.x+v)*g,m.y=m.depth*y})}return c}function a(c){var u=c.children,f=c.parent.children,h=c.i?f[c.i-1]:null;if(u){Wut(c);var d=(u[0].z+u[u.length-1].z)/2;h?(c.z=h.z+t(c._,h._),c.m=c.z-d):c.z=d}else h&&(c.z=h.z+t(c._,h._));c.parent.A=s(c,h,c.parent.A||f[0])}function o(c){c._.x=c.z+c.parent.m,c.m+=c.parent.m}function s(c,u,f){if(u){for(var h=c,d=c,p=u,v=h.parent.children[0],g=h.m,y=d.m,m=p.m,x=v.m,b;p=V1(p),h=W1(h),p&&h;)v=W1(v),d=V1(d),d.a=c,b=p.z+m-h.z-g+t(p._,h._),b>0&&(Yut(Vut(p,c,f),c,b),g+=b,y+=b),m+=p.m,g+=h.m,x+=v.m,y+=d.m;p&&!V1(d)&&(d.t=p,d.m+=m-y),h&&!W1(v)&&(v.t=h,v.m+=g-x,f=c)}return f}function l(c){c.x*=n,c.y=c.depth*e}return i.separation=function(c){return arguments.length?(t=c,i):t},i.size=function(c){return arguments.length?(r=!1,n=+c[0],e=+c[1],i):r?null:[n,e]},i.nodeSize=function(c){return arguments.length?(r=!0,n=+c[0],e=+c[1],i):r?[n,e]:null},i}function U0(t,n,e,r,i){for(var a=t.children,o,s=-1,l=a.length,c=t.value&&(i-e)/t.value;++s<l;)o=a[s],o.x0=n,o.x1=r,o.y0=e,o.y1=e+=o.value*c}var s$=(1+Math.sqrt(5))/2;function l$(t,n,e,r,i,a){for(var o=[],s=n.children,l,c,u=0,f=0,h=s.length,d,p,v=n.value,g,y,m,x,b,w,S;u<h;){d=i-e,p=a-r;do g=s[f++].value;while(!g&&f<h);for(y=m=g,w=Math.max(p/d,d/p)/(v*t),S=g*g*w,b=Math.max(m/S,S/y);f<h;++f){if(g+=c=s[f].value,c<y&&(y=c),c>m&&(m=c),S=g*g*w,x=Math.max(m/S,S/y),x>b){g-=c;break}b=x}o.push(l={value:g,dice:d<p,children:s.slice(u,f)}),l.dice?Pd(l,e,r,i,v?r+=p*g/v:a):U0(l,e,r,v?e+=d*g/v:i,a),v-=g,u=f}return o}const c$=function t(n){function e(r,i,a,o,s){l$(n,r,i,a,o,s)}return e.ratio=function(r){return t((r=+r)>1?r:1)},e}(s$);function u$(){var t=c$,n=!1,e=1,r=1,i=[0],a=Bs,o=Bs,s=Bs,l=Bs,c=Bs;function u(h){return h.x0=h.y0=0,h.x1=e,h.y1=r,h.eachBefore(f),i=[0],n&&h.eachBefore(a$),h}function f(h){var d=i[h.depth],p=h.x0+d,v=h.y0+d,g=h.x1-d,y=h.y1-d;g<p&&(p=g=(p+g)/2),y<v&&(v=y=(v+y)/2),h.x0=p,h.y0=v,h.x1=g,h.y1=y,h.children&&(d=i[h.depth+1]=a(h)/2,p+=c(h)-d,v+=o(h)-d,g-=s(h)-d,y-=l(h)-d,g<p&&(p=g=(p+g)/2),y<v&&(v=y=(v+y)/2),t(h,p,v,g,y))}return u.round=function(h){return arguments.length?(n=!!h,u):n},u.size=function(h){return arguments.length?(e=+h[0],r=+h[1],u):[e,r]},u.tile=function(h){return arguments.length?(t=Ig(h),u):t},u.padding=function(h){return arguments.length?u.paddingInner(h).paddingOuter(h):u.paddingInner()},u.paddingInner=function(h){return arguments.length?(a=typeof h=="function"?h:rc(+h),u):a},u.paddingOuter=function(h){return arguments.length?u.paddingTop(h).paddingRight(h).paddingBottom(h).paddingLeft(h):u.paddingTop()},u.paddingTop=function(h){return arguments.length?(o=typeof h=="function"?h:rc(+h),u):o},u.paddingRight=function(h){return arguments.length?(s=typeof h=="function"?h:rc(+h),u):s},u.paddingBottom=function(h){return arguments.length?(l=typeof h=="function"?h:rc(+h),u):l},u.paddingLeft=function(h){return arguments.length?(c=typeof h=="function"?h:rc(+h),u):c},u}function Uut(t,n,e,r,i){var a=t.children,o,s=a.length,l,c=new Array(s+1);for(c[0]=l=o=0;o<s;++o)c[o+1]=l+=a[o].value;u(0,s,t.value,n,e,r,i);function u(f,h,d,p,v,g,y){if(f>=h-1){var m=a[f];m.x0=p,m.y0=v,m.x1=g,m.y1=y;return}for(var x=c[f],b=d/2+x,w=f+1,S=h-1;w<S;){var O=w+S>>>1;c[O]<b?w=O+1:S=O}b-c[w-1]<c[w]-b&&f+1<w&&--w;var M=c[w]-x,A=d-M;if(g-p>y-v){var T=d?(p*A+g*M)/d:g;u(f,w,M,p,v,T,y),u(w,h,A,T,v,g,y)}else{var C=d?(v*A+y*M)/d:y;u(f,w,M,p,v,g,C),u(w,h,A,p,C,g,y)}}}function qut(t,n,e,r,i){(t.depth&1?U0:Pd)(t,n,e,r,i)}const Zut=function t(n){function e(r,i,a,o,s){if((l=r._squarify)&&l.ratio===n)for(var l,c,u,f,h=-1,d,p=l.length,v=r.value;++h<p;){for(c=l[h],u=c.children,f=c.value=0,d=u.length;f<d;++f)c.value+=u[f].value;c.dice?Pd(c,i,a,o,v?a+=(s-a)*c.value/v:s):U0(c,i,a,v?i+=(o-i)*c.value/v:o,s),v-=c.value}else r._squarify=l=l$(n,r,i,a,o,s),l.ratio=n}return e.ratio=function(r){return t((r=+r)>1?r:1)},e}(s$),ZP=Object.freeze(Object.defineProperty({__proto__:null,cluster:uut,hierarchy:Ru,pack:i$,packEnclose:t$,packSiblings:Dut,partition:o$,stratify:zut,tree:Xut,treemap:u$,treemapBinary:Uut,treemapDice:Pd,treemapResquarify:Zut,treemapSlice:U0,treemapSliceDice:qut,treemapSquarify:c$},Symbol.toStringTag,{value:"Module"}));var f$="nodeIndex",h$="childNodeCount",BO="nodeAncestor",H1="Invalid field: it must be a string!";function NO(t,n){var e=t.field,r=t.fields;if(pt(e))return e;if(et(e))return console.warn(H1),e[0];if(console.warn("".concat(H1," will try to get fields instead.")),pt(r))return r;if(et(r)&&r.length)return r[0];if(n)return n;throw new TypeError(H1)}function $O(t){var n=[];if(t&&t.each){var e,r;t.each(function(i){var a,o;i.parent!==e?(e=i.parent,r=0):r+=1;var s=Ln((((a=i.ancestors)===null||a===void 0?void 0:a.call(i))||[]).map(function(l){return n.find(function(c){return c.name===l.name})||l}),function(l){var c=l.depth;return c>0&&c<i.depth});i[BO]=s,i[h$]=((o=i.children)===null||o===void 0?void 0:o.length)||0,i[f$]=r,n.push(i)})}else t&&t.eachNode&&t.eachNode(function(i){n.push(i)});return n}var Kut={field:"value",as:["x","y","r"],sort:function(t,n){return n.value-t.value}};function Qut(t,n){n=Jt({},Kut,n);var e=n.as;if(!et(e)||e.length!==3)throw new TypeError('Invalid as: it must be an array with 3 strings (e.g. [ "x", "y", "r" ])!');var r;try{r=NO(n)}catch(c){console.warn(c)}var i=function(c){return i$().size(n.size).padding(n.padding)(Ru(c).sum(function(u){return u[r]}).sort(n.sort))},a=i(t),o=e[0],s=e[1],l=e[2];return a.each(function(c){c[o]=c.x,c[s]=c.y,c[l]=c.r}),$O(a)}function d$(t){var n=t.data,e=t.hierarchyConfig,r=t.rawFields,i=r===void 0?[]:r,a=t.enableDrillDown,o=Qut(n,E(E({},e),{field:"value",as:["x","y","r"]})),s=[];return o.forEach(function(l){for(var c,u=l.data.name,f=E({},l);f.depth>1;)u="".concat((c=f.parent.data)===null||c===void 0?void 0:c.name," / ").concat(u),f=f.parent;if(a&&l.depth>2)return null;var h=U({},l.data,E(E(E({},Kt(l.data,i)),{path:u}),l));h.ext=e,h[Ih]={hierarchyConfig:e,rawFields:i,enableDrillDown:a},s.push(h)}),s}function p$(t,n,e){var r=OO([t,n]),i=r[0],a=r[1],o=r[2],s=r[3],l=e.width,c=e.height,u=l-(s+a),f=c-(i+o),h=Math.min(u,f),d=(u-h)/2,p=(f-h)/2,v=i+p,g=a+d,y=o+p,m=s+d,x=[v,g,y,m],b=h<0?0:h;return{finalPadding:x,finalSize:b}}function Jut(t){var n=t.chart,e=Math.min(n.viewBBox.width,n.viewBBox.height);return U({options:{size:function(r){var i=r.r;return i*e}}},t)}function tft(t){var n=t.options,e=t.chart,r=e.viewBBox,i=n.padding,a=n.appendPadding,o=n.drilldown,s=a;if(o!=null&&o.enabled){var l=R0(e.appendPadding,z(o,["breadCrumb","position"]));s=OO([l,a])}var c=p$(i,s,r).finalPadding;return e.padding=c,e.appendPadding=0,t}function eft(t){var n=t.chart,e=t.options,r=n.padding,i=n.appendPadding,a=e.color,o=e.colorField,s=e.pointStyle,l=e.hierarchyConfig,c=e.sizeField,u=e.rawFields,f=u===void 0?[]:u,h=e.drilldown,d=d$({data:e.data,hierarchyConfig:l,enableDrillDown:h==null?void 0:h.enabled,rawFields:f});n.data(d);var p=n.viewBBox,v=p$(r,i,p).finalSize,g=function(y){var m=y.r;return m*v};return c&&(g=function(y){return y[c]*v}),Zr(U({},t,{options:{xField:"x",yField:"y",seriesField:o,sizeField:c,rawFields:X(X([],Qct,!0),f,!0),point:{color:a,style:s,shape:"circle",size:g}}})),t}function nft(t){return xt(Ye({},{x:{min:0,max:1,minLimit:0,maxLimit:1,nice:!0},y:{min:0,max:1,minLimit:0,maxLimit:1,nice:!0}}))(t)}function rft(t){var n=t.chart,e=t.options,r=e.tooltip;if(r===!1)n.tooltip(!1);else{var i=r;z(r,"fields")||(i=U({},{customItems:function(a){return a.map(function(o){var s=z(n.getOptions(),"scales"),l=z(s,["name","formatter"],function(u){return u}),c=z(s,["value","formatter"],function(u){return u});return E(E({},o),{name:l(o.data.name),value:c(o.data.value)})})}},i)),n.tooltip(i)}return t}function ift(t){var n=t.chart;return n.axis(!1),t}function aft(t){var n=t.drilldown,e=t.interactions,r=e===void 0?[]:e;return n!=null&&n.enabled?U({},t,{interactions:X(X([],r,!0),[{type:"drill-down",cfg:{drillDownConfig:n,transformData:d$,enableDrillDown:!0}}],!1)}):t}function oft(t){var n=t.chart,e=t.options;return Ee({chart:n,options:aft(e)}),t}function sft(t){return xt(qr("pointStyle"),Jut,tft,Yt,nft,eft,ift,Lu,rft,oft,te,Ie())(t)}function KP(t){var n=z(t,["event","data","data"],{});return et(n.children)&&n.children.length>0}function QP(t){var n=t.view.getCoordinate(),e=n.innerRadius;if(e){var r=t.event,i=r.x,a=r.y,o=n.center,s=o.x,l=o.y,c=n.getRadius()*e,u=Math.sqrt(Math.pow(s-i,2)+Math.pow(l-a,2));return u<c}return!1}ht("drill-down-action",nut);wt("drill-down",{showEnable:[{trigger:"element:mouseenter",action:"cursor:pointer",isEnable:KP},{trigger:"element:mouseleave",action:"cursor:default"},{trigger:"element:mouseleave",action:"cursor:pointer",isEnable:QP}],start:[{trigger:"element:click",isEnable:KP,action:["drill-down-action:click"]},{trigger:"afterchangesize",action:["drill-down-action:resetPosition"]},{trigger:"click",isEnable:QP,action:["drill-down-action:back"]}]});(function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="circle-packing",e}return n.getDefaultOptions=function(){return Jct},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return sft},n.prototype.triggerResize=function(){this.chart.destroyed||(this.chart.forceFit(),this.chart.clear(),this.execAdaptor(),this.chart.render(!0))},n})(Mt);var Kr="left-axes-view",Qr="right-axes-view",v$={nice:!0,label:{autoHide:!0,autoRotate:!1}},lft=E(E({},v$),{position:"left"}),cft=E(E({},v$),{position:"right",grid:null}),Zc;(function(t){t.Left="Left",t.Right="Right"})(Zc||(Zc={}));var pl;(function(t){t.Line="line",t.Column="column"})(pl||(pl={}));function ow(t){return z(t,"geometry")===pl.Line}function jO(t){return z(t,"geometry")===pl.Column}function JP(t,n,e){return jO(e)?U({},{geometry:pl.Column,label:e.label&&e.isRange?{content:function(r){var i;return(i=r[n])===null||i===void 0?void 0:i.join("-")}}:void 0},e):E({geometry:pl.Line},e)}function tk(t,n){var e=t[0],r=t[1];if(et(n)){var i=n[0],a=n[1];return[i,a]}var o=z(n,e),s=z(n,r);return[o,s]}function ek(t,n){return n===Zc.Left?t===!1?!1:U({},lft,t):n===Zc.Right?t===!1?!1:U({},cft,t):t}function uft(t){var n=t.options,e=t.chart,r=n.geometryOption,i=r.isStack,a=r.color,o=r.seriesField,s=r.groupField,l=r.isGroup,c=["xField","yField"];if(ow(r)){Iu(U({},t,{options:E(E(E({},Kt(n,c)),r),{line:{color:r.color,style:r.lineStyle}})})),Zr(U({},t,{options:E(E(E({},Kt(n,c)),r),{point:r.point&&E({color:a,shape:"circle"},r.point)})}));var u=[];l&&u.push({type:"dodge",dodgeBy:s||o,customOffset:0}),i&&u.push({type:"stack"}),u.length&&$(e.geometries,function(f){f.adjust(u)})}return jO(r)&&H0(U({},t,{options:E(E(E({},Kt(n,c)),r),{widthRatio:r.columnWidthRatio,interval:E(E({},Kt(r,["color"])),{style:r.columnStyle})})})),t}function nk(t){var n=t.view,e=t.geometryOption,r=t.yField,i=t.legend,a=z(i,"marker"),o=Bn(n,ow(e)?"line":"interval");if(!e.seriesField){var s=z(n,"options.scales.".concat(r,".alias"))||r,l=o.getAttribute("color"),c=n.getTheme().defaultColor;l&&(c=Ar.getMappingValue(l,s,z(l,["values",0],c)));var u=(ut(a)?a:!Mr(a)&&U({},{style:{stroke:c,fill:c}},a))||(ow(e)?{symbol:function(h,d,p){return[["M",h-p,d],["L",h+p,d]]},style:{lineWidth:2,r:6,stroke:c}}:{symbol:"square",style:{fill:c}});return[{value:r,name:s,marker:u,isGeometry:!0,viewId:n.id}]}var f=o.getGroupAttributes();return Hn(f,function(h,d){var p=Ar.getLegendItems(n,o,d,n.getTheme(),a);return h.concat(p)},[])}var rk=function(t,n){var e=n[0],r=n[1],i=t.getOptions().data,a=t.getXScale(),o=mn(i);if(!(!a||!o)){var s=Ni(i,a.field),l=s,c=mn(l),u=Math.floor(e*(c-1)),f=Math.floor(r*(c-1));t.filter(a.field,function(h){var d=l.indexOf(h);return d>-1?kat(d,u,f):!0}),t.getRootView().render(!0)}};function fft(t){var n,e=t.options,r=e.geometryOptions,i=r===void 0?[]:r,a=e.xField,o=e.yField,s=rS(i,function(l){var c=l.geometry;return c===pl.Line||c===void 0});return U({},{options:{geometryOptions:[],meta:(n={},n[a]={type:"cat",sync:!0,range:s?[0,1]:void 0},n),tooltip:{showMarkers:s,showCrosshairs:s,shared:!0,crosshairs:{type:"x"}},interactions:s?[{type:"legend-visible-filter"}]:[{type:"legend-visible-filter"},{type:"active-region"}],legend:{position:"top-left"}}},t,{options:{yAxis:tk(o,e.yAxis),geometryOptions:[JP(a,o[0],i[0]),JP(a,o[1],i[1])],annotations:tk(o,e.annotations)}})}function hft(t){var n,e,r=t.chart,i=t.options,a=i.geometryOptions,o={line:0,column:1},s=[{type:(n=a[0])===null||n===void 0?void 0:n.geometry,id:Kr},{type:(e=a[1])===null||e===void 0?void 0:e.geometry,id:Qr}];return s.sort(function(l,c){return-o[l.type]+o[c.type]}).forEach(function(l){return r.createView({id:l.id})}),t}function dft(t){var n=t.chart,e=t.options,r=e.xField,i=e.yField,a=e.geometryOptions,o=e.data,s=e.tooltip,l=[E(E({},a[0]),{id:Kr,data:o[0],yField:i[0]}),E(E({},a[1]),{id:Qr,data:o[1],yField:i[1]})];return l.forEach(function(c){var u=c.id,f=c.data,h=c.yField,d=jO(c)&&c.isPercent,p=d?K3(f,h,r,h):f,v=Lt(n,u).data(p),g=d?E({formatter:function(y){return{name:y[c.seriesField]||h,value:(Number(y[h])*100).toFixed(2)+"%"}}},s):s;uft({chart:v,options:{xField:r,yField:h,tooltip:g,geometryOption:c}})}),t}function pft(t){var n,e=t.chart,r=t.options,i=r.geometryOptions,a=((n=e.getTheme())===null||n===void 0?void 0:n.colors10)||[],o=0;return e.once("beforepaint",function(){$(i,function(s,l){var c=Lt(e,l===0?Kr:Qr);if(!s.color){var u=c.getGroupScales(),f=z(u,[0,"values","length"],1),h=a.slice(o,o+f).concat(l===0?[]:a);c.geometries.forEach(function(d){s.seriesField?d.color(s.seriesField,h):d.color(h[0])}),o+=f}}),e.render(!0)}),t}function vft(t){var n,e,r=t.chart,i=t.options,a=i.xAxis,o=i.yAxis,s=i.xField,l=i.yField;return Ye((n={},n[s]=a,n[l[0]]=o[0],n))(U({},t,{chart:Lt(r,Kr)})),Ye((e={},e[s]=a,e[l[1]]=o[1],e))(U({},t,{chart:Lt(r,Qr)})),t}function gft(t){var n=t.chart,e=t.options,r=Lt(n,Kr),i=Lt(n,Qr),a=e.xField,o=e.yField,s=e.xAxis,l=e.yAxis;return n.axis(a,!1),n.axis(o[0],!1),n.axis(o[1],!1),r.axis(a,s),r.axis(o[0],ek(l[0],Zc.Left)),i.axis(a,!1),i.axis(o[1],ek(l[1],Zc.Right)),t}function yft(t){var n=t.chart,e=t.options,r=e.tooltip,i=Lt(n,Kr),a=Lt(n,Qr);return n.tooltip(r),i.tooltip({shared:!0}),a.tooltip({shared:!0}),t}function mft(t){var n=t.chart;return Ee(U({},t,{chart:Lt(n,Kr)})),Ee(U({},t,{chart:Lt(n,Qr)})),t}function xft(t){var n=t.chart,e=t.options,r=e.annotations,i=z(r,[0]),a=z(r,[1]);return Ie(i)(U({},t,{chart:Lt(n,Kr),options:{annotations:i}})),Ie(a)(U({},t,{chart:Lt(n,Qr),options:{annotations:a}})),t}function bft(t){var n=t.chart;return Yt(U({},t,{chart:Lt(n,Kr)})),Yt(U({},t,{chart:Lt(n,Qr)})),Yt(t),t}function wft(t){var n=t.chart;return te(U({},t,{chart:Lt(n,Kr)})),te(U({},t,{chart:Lt(n,Qr)})),t}function Sft(t){var n=t.chart,e=t.options,r=e.yAxis;return dl(U({},t,{chart:Lt(n,Kr),options:{yAxis:r[0]}})),dl(U({},t,{chart:Lt(n,Qr),options:{yAxis:r[1]}})),t}function Oft(t){var n=t.chart,e=t.options,r=e.legend,i=e.geometryOptions,a=e.yField,o=e.data,s=Lt(n,Kr),l=Lt(n,Qr);if(r===!1)n.legend(!1);else if(Qt(r)&&r.custom===!0)n.legend(r);else{var c=z(i,[0,"legend"],r),u=z(i,[1,"legend"],r);n.once("beforepaint",function(){var f=o[0].length?nk({view:s,geometryOption:i[0],yField:a[0],legend:c}):[],h=o[1].length?nk({view:l,geometryOption:i[1],yField:a[1],legend:u}):[];n.legend(U({},r,{custom:!0,items:f.concat(h)}))}),i[0].seriesField&&s.legend(i[0].seriesField,c),i[1].seriesField&&l.legend(i[1].seriesField,u),n.on("legend-item:click",function(f){var h=z(f,"gEvent.delegateObject",{});if(h&&h.item){var d=h.item,p=d.value,v=d.isGeometry,g=d.viewId;if(v){var y=VD(a,function(b){return b===p});if(y>-1){var m=z(Lt(n,g),"geometries");$(m,function(b){b.changeVisible(!h.item.unchecked)})}}else{var x=z(n.getController("legend"),"option.items",[]);$(n.views,function(b){var w=b.getGroupScales();$(w,function(S){S.values&&S.values.indexOf(p)>-1&&b.filter(S.field,function(O){var M=Li(x,function(A){return A.value===O});return!M.unchecked})}),n.render(!0)})}}})}return t}function Mft(t){var n=t.chart,e=t.options,r=e.slider,i=Lt(n,Kr),a=Lt(n,Qr);return r&&(i.option("slider",r),i.on("slider:valuechanged",function(o){var s=o.event,l=s.value,c=s.originValue;Ne(l,c)||rk(a,l)}),n.once("afterpaint",function(){if(!Dc(r)){var o=r.start,s=r.end;(o||s)&&rk(a,[o,s])}})),t}function Aft(t){return xt(fft,hft,bft,dft,vft,gft,Sft,yft,mft,xft,wft,pft,Oft,Mft)(t)}(function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="dual-axes",e}return n.prototype.getDefaultOptions=function(){return U({},t.prototype.getDefaultOptions.call(this),{yAxis:[],syncViewPadding:!0})},n.prototype.getSchemaAdaptor=function(){return Aft},n})(Mt);function Eft(t,n){var e=n.data,r=n.coordinate,i=n.interactions,a=n.annotations,o=n.animation,s=n.tooltip,l=n.axes,c=n.meta,u=n.geometries;e&&t.data(e);var f={};l&&$(l,function(h,d){f[d]=Kt(h,Sr)}),f=U({},c,f),t.scale(f),r&&t.coordinate(r),l===!1?t.axis(!1):$(l,function(h,d){t.axis(d,h)}),$(u,function(h){var d=Pr({chart:t,options:h}).ext,p=h.adjust;p&&d.geometry.adjust(p)}),$(i,function(h){h.enable===!1?t.removeInteraction(h.type):t.interaction(h.type,h.cfg)}),$(a,function(h){t.annotation()[h.type](E({},h))}),Md(t,o),s?(t.interaction("tooltip"),t.tooltip(s)):s===!1&&t.removeInteraction("tooltip")}function Tft(t){var n=t.chart,e=t.options,r=e.type,i=e.data,a=e.fields,o=e.eachView,s=Jy(e,["type","data","fields","eachView","axes","meta","tooltip","coordinate","theme","legend","interactions","annotations"]);return n.data(i),n.facet(r,E(E({},s),{fields:a,eachView:function(l,c){var u=o(l,c);if(u.geometries)Eft(l,u);else{var f=u,h=f.options;h.tooltip&&l.interaction("tooltip"),aw(f.type,l,h)}}})),t}function Cft(t){var n=t.chart,e=t.options,r=e.axes,i=e.meta,a=e.tooltip,o=e.coordinate,s=e.theme,l=e.legend,c=e.interactions,u=e.annotations,f={};return r&&$(r,function(h,d){f[d]=Kt(h,Sr)}),f=U({},i,f),n.scale(f),n.coordinate(o),r?$(r,function(h,d){n.axis(d,h)}):n.axis(!1),a?(n.interaction("tooltip"),n.tooltip(a)):a===!1&&n.removeInteraction("tooltip"),n.legend(l),s&&n.theme(s),$(c,function(h){h.enable===!1?n.removeInteraction(h.type):n.interaction(h.type,h.cfg)}),$(u,function(h){n.annotation()[h.type](E({},h))}),t}function Pft(t){return xt(Yt,Tft,Cft)(t)}var kft={title:{style:{fontSize:12,fill:"rgba(0,0,0,0.65)"}},rowTitle:{style:{fontSize:12,fill:"rgba(0,0,0,0.65)"}},columnTitle:{style:{fontSize:12,fill:"rgba(0,0,0,0.65)"}}};(function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="area",e}return n.getDefaultOptions=function(){return kft},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return Pft},n})(Mt);function _ft(t){var n=t.chart,e=t.options,r=e.data,i=e.type,a=e.xField,o=e.yField,s=e.colorField,l=e.sizeField,c=e.sizeRatio,u=e.shape,f=e.color,h=e.tooltip,d=e.heatmapStyle,p=e.meta;n.data(r);var v="polygon";i==="density"&&(v="heatmap");var g=xi(h,[a,o,s]),y=g.fields,m=g.formatter,x=1;return(c||c===0)&&(!u&&!l?console.warn("sizeRatio is not in effect: Must define shape or sizeField first"):c<0||c>1?console.warn("sizeRatio is not in effect: It must be a number in [0,1]"):x=c),Pr(U({},t,{options:{type:v,colorField:s,tooltipFields:y,shapeField:l||"",label:void 0,mapping:{tooltip:m,shape:u&&(l?function(b){var w=r.map(function(A){return A[l]}),S=(p==null?void 0:p[l])||{},O=S.min,M=S.max;return O=bt(O)?O:Math.min.apply(Math,w),M=bt(M)?M:Math.max.apply(Math,w),[u,(z(b,l)-O)/(M-O),x]}:function(){return[u,1,x]}),color:f||s&&n.getTheme().sequenceColors.join("-"),style:d}}})),t}function Lft(t){var n,e=t.options,r=e.xAxis,i=e.yAxis,a=e.xField,o=e.yField;return xt(Ye((n={},n[a]=r,n[o]=i,n)))(t)}function Ift(t){var n=t.chart,e=t.options,r=e.xAxis,i=e.yAxis,a=e.xField,o=e.yField;return r===!1?n.axis(a,!1):n.axis(a,r),i===!1?n.axis(o,!1):n.axis(o,i),t}function Fft(t){var n=t.chart,e=t.options,r=e.legend,i=e.colorField,a=e.sizeField,o=e.sizeLegend,s=r!==!1;return i&&n.legend(i,s?r:!1),a&&n.legend(a,o===void 0?r:o),!s&&!o&&n.legend(!1),t}function Dft(t){var n=t.chart,e=t.options,r=e.label,i=e.colorField,a=e.type,o=Bn(n,a==="density"?"heatmap":"polygon");if(!r)o.label(!1);else if(i){var s=r.callback,l=vt(r,["callback"]);o.label({fields:[i],callback:s,cfg:xn(l)})}return t}function Rft(t){var n,e,r=t.chart,i=t.options,a=i.coordinate,o=i.reflect,s=U({actions:[]},a??{type:"rect"});return o&&((e=(n=s.actions)===null||n===void 0?void 0:n.push)===null||e===void 0||e.call(n,["reflect",o])),r.coordinate(s),t}function Bft(t){return xt(Yt,qr("heatmapStyle"),Lft,Rft,_ft,Ift,Fft,pn,Dft,Ie(),Ee,te,cs)(t)}var Nft=U({},Mt.getDefaultOptions(),{type:"polygon",legend:!1,coordinate:{type:"rect"},xAxis:{tickLine:null,line:null,grid:{alignTick:!1,line:{style:{lineWidth:1,lineDash:null,stroke:"#f0f0f0"}}}},yAxis:{grid:{alignTick:!1,line:{style:{lineWidth:1,lineDash:null,stroke:"#f0f0f0"}}}}});Xt("polygon","circle",{draw:function(t,n){var e,r,i=t.x,a=t.y,o=this.parsePoints(t.points),s=Math.abs(o[2].x-o[1].x),l=Math.abs(o[1].y-o[0].y),c=Math.min(s,l)/2,u=Number(t.shape[1]),f=Number(t.shape[2]),h=Math.sqrt(f),d=c*h*Math.sqrt(u),p=((e=t.style)===null||e===void 0?void 0:e.fill)||t.color||((r=t.defaultStyle)===null||r===void 0?void 0:r.fill),v=n.addShape("circle",{attrs:E(E(E({x:i,y:a,r:d},t.defaultStyle),t.style),{fill:p})});return v}});Xt("polygon","square",{draw:function(t,n){var e,r,i=t.x,a=t.y,o=this.parsePoints(t.points),s=Math.abs(o[2].x-o[1].x),l=Math.abs(o[1].y-o[0].y),c=Math.min(s,l),u=Number(t.shape[1]),f=Number(t.shape[2]),h=Math.sqrt(f),d=c*h*Math.sqrt(u),p=((e=t.style)===null||e===void 0?void 0:e.fill)||t.color||((r=t.defaultStyle)===null||r===void 0?void 0:r.fill),v=n.addShape("rect",{attrs:E(E(E({x:i-d/2,y:a-d/2,width:d,height:d},t.defaultStyle),t.style),{fill:p})});return v}});(function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="heatmap",e}return n.getDefaultOptions=function(){return Nft},n.prototype.getSchemaAdaptor=function(){return Bft},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n})(Mt);var $ft="liquid";function g$(t){return[{percent:t,type:$ft}]}function jft(t){var n=t.chart,e=t.options,r=e.percent,i=e.liquidStyle,a=e.radius,o=e.outline,s=e.wave,l=e.shape,c=e.shapeStyle,u=e.animation;n.scale({percent:{min:0,max:1}}),n.data(g$(r));var f=e.color||n.getTheme().defaultColor,h=U({},t,{options:{xField:"type",yField:"percent",widthRatio:a,interval:{color:f,style:i,shape:"liquid-fill-gauge"}}}),d=Nn(h).ext,p=d.geometry,v=n.getTheme().background,g={percent:r,radius:a,outline:o,wave:s,shape:l,shapeStyle:c,background:v,animation:u};return p.customInfo(g),n.legend(!1),n.axis(!1),n.tooltip(!1),t}function y$(t,n){var e=t.chart,r=t.options,i=r.statistic,a=r.percent,o=r.meta;e.getController("annotation").clear(!0);var s=z(o,["percent","formatter"])||function(c){return"".concat((c*100).toFixed(2),"%")},l=i.content;return l&&(l=U({},l,{content:J(l.content)?s(a):l.content})),B0(e,{statistic:E(E({},i),{content:l}),plotType:"liquid"},{percent:a}),n&&e.render(!0),t}function zft(t){return xt(Yt,qr("liquidStyle"),jft,y$,Ye({}),te,Ee)(t)}var Gft={radius:.9,statistic:{title:!1,content:{style:{opacity:.75,fontSize:"30px",lineHeight:"30px",textAlign:"center"}}},outline:{border:2,distance:0},wave:{count:3,length:192},shape:"circle"},ik=5e3;function ak(t,n,e){return t+(n-t)*e}function Yft(t){var n=E({opacity:1},t.style);return t.color&&!n.fill&&(n.fill=t.color),n}function Wft(t){var n={fill:"#fff",fillOpacity:0,lineWidth:4},e=Jt({},n,t.style);return t.color&&!e.stroke&&(e.stroke=t.color),bt(t.opacity)&&(e.opacity=e.strokeOpacity=t.opacity),e}function Vft(t,n,e,r){return n===0?[[t+1/2*e/Math.PI/2,r/2],[t+1/2*e/Math.PI,r],[t+e/4,r]]:n===1?[[t+1/2*e/Math.PI/2*(Math.PI-2),r],[t+1/2*e/Math.PI/2*(Math.PI-1),r/2],[t+e/4,0]]:n===2?[[t+1/2*e/Math.PI/2,-r/2],[t+1/2*e/Math.PI,-r],[t+e/4,-r]]:[[t+1/2*e/Math.PI/2*(Math.PI-2),-r],[t+1/2*e/Math.PI/2*(Math.PI-1),-r/2],[t+e/4,0]]}function Hft(t,n,e,r,i,a,o){for(var s=Math.ceil(2*t/e*4)*4,l=[],c=r;c<-Math.PI*2;)c+=Math.PI*2;for(;c>0;)c-=Math.PI*2;c=c/Math.PI/2*e;var u=a-t+c-t*2;l.push(["M",u,n]);for(var f=0,h=0;h<s;++h){var d=h%4,p=Vft(h*e/4,d,e,i);l.push(["C",p[0][0]+u,-p[0][1]+n,p[1][0]+u,-p[1][1]+n,p[2][0]+u,-p[2][1]+n]),h===s-1&&(f=p[2][0])}return l.push(["L",f+u,o+t]),l.push(["L",u,o+t]),l.push(["Z"]),l}function Xft(t,n,e,r,i,a,o,s,l,c){for(var u=i.fill,f=i.opacity,h=o.getBBox(),d=h.maxX-h.minX,p=h.maxY-h.minY,v=0;v<r;v++){var g=r<=1?1:v/(r-1),y=a.addShape("path",{name:"waterwave-path",attrs:{path:Hft(s,h.minY+p*e,l,0,d/32,t,n),fill:u,opacity:ak(.2,.9,g)*f}});try{if(c===!1)return;var m=iw([["t",l,0]]);y.stopAnimate(),y.animate({matrix:m},{duration:ak(.5*ik,ik,g),repeat:!0})}catch{console.warn("off-screen group animate error!")}}}function Uft(t,n,e,r){var i=e*2/3,a=Math.max(i,r),o=i/2,s=t,l=o+n-a/2,c=Math.asin(o/((a-o)*.85)),u=Math.sin(c)*o,f=Math.cos(c)*o,h=s-f,d=l+u,p=t,v=l+o/Math.sin(c);return`
      M `.concat(h," ").concat(d,`
      A `).concat(o," ").concat(o," 0 1 1 ").concat(h+f*2," ").concat(d,`
      Q `).concat(p," ").concat(v," ").concat(t," ").concat(n+a/2,`
      Q `).concat(p," ").concat(v," ").concat(h," ").concat(d,`
      Z 
    `)}function qft(t,n,e,r){var i=e/2,a=r/2;return`
      M `.concat(t," ").concat(n-a,` 
      a `).concat(i," ").concat(a," 0 1 0 0 ").concat(a*2,`
      a `).concat(i," ").concat(a," 0 1 0 0 ").concat(-a*2,`
      Z
    `)}function Zft(t,n,e,r){var i=r/2,a=e/2;return`
      M `.concat(t," ").concat(n-i,`
      L `).concat(t+a," ").concat(n,`
      L `).concat(t," ").concat(n+i,`
      L `).concat(t-a," ").concat(n,`
      Z
    `)}function Kft(t,n,e,r){var i=r/2,a=e/2;return`
      M `.concat(t," ").concat(n-i,`
      L `).concat(t+a," ").concat(n+i,`
      L `).concat(t-a," ").concat(n+i,`
      Z
    `)}function Qft(t,n,e,r){var i=.618,a=r/2,o=e/2*i;return`
      M `.concat(t-o," ").concat(n-a,`
      L `).concat(t+o," ").concat(n-a,`
      L `).concat(t+o," ").concat(n+a,`
      L `).concat(t-o," ").concat(n+a,`
      Z
    `)}var ok={pin:Uft,circle:qft,diamond:Zft,triangle:Kft,rect:Qft};Xt("interval","liquid-fill-gauge",{draw:function(t,n){var e=.5,r=.5,i=t.customInfo,a=i,o=a.percent,s=a.radius,l=a.shape,c=a.shapeStyle,u=a.background,f=a.animation,h=i.outline,d=i.wave,p=h.border,v=h.distance,g=d.count,y=d.length,m=Hn(t.points,function(k,I){return Math.min(k,I.x)},1/0),x=this.parsePoint({x:e,y:r}),b=this.parsePoint({x:m,y:r}),w=x.x-b.x,S=Math.min(w,b.y*s),O=Yft(t),M=Wft(Jt({},t,h)),A=S-p/2,T=typeof l=="function"?l:ok[l]||ok.circle,C=T(x.x,x.y,A*2,A*2);if(c&&n.addShape("path",{name:"shape",attrs:E({path:C},c)}),o>0){var P=n.addGroup({name:"waves"}),_=P.setClip({type:"path",attrs:{path:C}});Xft(x.x,x.y,1-t.points[1].y,g,O,P,_,S*2,y,f)}return n.addShape("path",{name:"distance",attrs:{path:C,fill:"transparent",lineWidth:p+v*2,stroke:u==="transparent"?"#fff":u}}),n.addShape("path",{name:"wrap",attrs:Jt(M,{path:C,fill:"transparent",lineWidth:p})}),n}});(function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="liquid",e}return n.getDefaultOptions=function(){return Gft},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.changeData=function(e){this.chart.emit(kt.BEFORE_CHANGE_DATA,ke.fromData(this.chart,kt.BEFORE_CHANGE_DATA,null)),this.updateOption({percent:e}),this.chart.data(g$(e)),y$({chart:this.chart,options:this.options},!0),this.chart.emit(kt.AFTER_CHANGE_DATA,ke.fromData(this.chart,kt.AFTER_CHANGE_DATA,null))},n.prototype.getSchemaAdaptor=function(){return zft},n})(Mt);function Jft(t){var n=t.chart,e=t.options,r=e.data,i=e.lineStyle,a=e.color,o=e.point,s=e.area;n.data(r);var l=U({},t,{options:{line:{style:i,color:a},point:o&&E({color:a},o),area:s&&E({color:a},s),label:void 0}}),c=U({},l,{options:{tooltip:!1}}),u=(o==null?void 0:o.state)||e.state,f=U({},l,{options:{tooltip:!1,state:u}});return Iu(l),Zr(f),j0(c),t}function tht(t){var n,e=t.options,r=e.xAxis,i=e.yAxis,a=e.xField,o=e.yField;return xt(Ye((n={},n[a]=r,n[o]=i,n)))(t)}function eht(t){var n=t.chart,e=t.options,r=e.radius,i=e.startAngle,a=e.endAngle;return n.coordinate("polar",{radius:r,startAngle:i,endAngle:a}),t}function nht(t){var n=t.chart,e=t.options,r=e.xField,i=e.xAxis,a=e.yField,o=e.yAxis;return n.axis(r,i),n.axis(a,o),t}function rht(t){var n=t.chart,e=t.options,r=e.label,i=e.yField,a=Bn(n,"line");if(!r)a.label(!1);else{var o=r.callback,s=vt(r,["callback"]);a.label({fields:[i],callback:o,cfg:xn(s)})}return t}function iht(t){return xt(Jft,tht,Yt,eht,nht,Lu,pn,rht,Ee,te,Ie())(t)}var aht=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"name",{get:function(){return"radar-tooltip"},enumerable:!1,configurable:!0}),n.prototype.getTooltipItems=function(e){var r=this.getTooltipCfg(),i=r.shared,a=r.title,o=t.prototype.getTooltipItems.call(this,e);if(o.length>0){var s=this.view.geometries[0],l=s.dataArray,c=o[0].name,u=[];return l.forEach(function(f){f.forEach(function(h){var d=Ar.getTooltipItems(h,s),p=d[0];if(!i&&p&&p.name===c){var v=J(a)?c:a;u.push(E(E({},p),{name:p.title,title:v}))}else if(i&&p){var v=J(a)?p.name||c:a;u.push(E(E({},p),{name:p.title,title:v}))}})}),u}return[]},n}(EB);Pl("radar-tooltip",aht);var oht=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.init=function(){var e=this.context.view;e.removeInteraction("tooltip")},n.prototype.show=function(){var e=this.context.event,r=this.getTooltipController();r.showTooltip({x:e.x,y:e.y})},n.prototype.hide=function(){var e=this.getTooltipController();e.hideTooltip()},n.prototype.getTooltipController=function(){var e=this.context.view;return e.getController("radar-tooltip")},n}(be);ht("radar-tooltip",oht);wt("radar-tooltip",{start:[{trigger:"plot:mousemove",action:"radar-tooltip:show"}],end:[{trigger:"plot:mouseleave",action:"radar-tooltip:hide"}]});(function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="radar",e}return n.prototype.changeData=function(e){this.updateOption({data:e}),this.chart.changeData(e)},n.prototype.getDefaultOptions=function(){return U({},t.prototype.getDefaultOptions.call(this),{xAxis:{label:{offset:15},grid:{line:{type:"line"}}},yAxis:{grid:{line:{type:"circle"}}},legend:{position:"top"},tooltip:{shared:!0,showCrosshairs:!0,showMarkers:!0,crosshairs:{type:"xy",line:{style:{stroke:"#565656",lineDash:[4]}},follow:!0}}})},n.prototype.getSchemaAdaptor=function(){return iht},n})(Mt);function sht(t,n,e){var r=e.map(function(o){return o[n]}).filter(function(o){return o!==void 0}),i=r.length>0?Math.max.apply(Math,r):0,a=Math.abs(t)%360;return a?i*360/a:i}function lht(t,n,e){var r=[];return t.forEach(function(i){var a=r.find(function(o){return o[n]===i[n]});a?a[e]+=i[e]||null:r.push(E({},i))}),r}function cht(t){var n=t.chart,e=t.options,r=e.barStyle,i=e.color,a=e.tooltip,o=e.colorField,s=e.type,l=e.xField,c=e.yField,u=e.data,f=e.shape,h=Xc(u,c);n.data(h);var d=U({},t,{options:{tooltip:a,seriesField:o,interval:{style:r,color:i,shape:f||(s==="line"?"line":"intervel")},minColumnWidth:e.minBarWidth,maxColumnWidth:e.maxBarWidth,columnBackground:e.barBackground}});return Nn(d),s==="line"&&Zr({chart:n,options:{xField:l,yField:c,seriesField:o,point:{shape:"circle",color:i}}}),t}function m$(t){var n,e=t.options,r=e.yField,i=e.xField,a=e.data,o=e.isStack,s=e.isGroup,l=e.colorField,c=e.maxAngle,u=o&&!s&&l?lht(a,i,r):a,f=Xc(u,r);return xt(Ye((n={},n[r]={min:0,max:sht(c,r,f)},n)))(t)}function uht(t){var n=t.chart,e=t.options,r=e.radius,i=e.innerRadius,a=e.startAngle,o=e.endAngle;return n.coordinate({type:"polar",cfg:{radius:r,innerRadius:i,startAngle:a,endAngle:o}}).transpose(),t}function fht(t){var n=t.chart,e=t.options,r=e.xField,i=e.xAxis;return n.axis(r,i),t}function hht(t){var n=t.chart,e=t.options,r=e.label,i=e.yField,a=Bn(n,"interval");if(!r)a.label(!1);else{var o=r.callback,s=vt(r,["callback"]);a.label({fields:[i],callback:o,cfg:E(E({},xn(s)),{type:"polar"})})}return t}function dht(t){return xt(qr("barStyle"),cht,m$,fht,uht,Ee,te,Yt,pn,Lu,Ie(),hht)(t)}var pht=U({},Mt.getDefaultOptions(),{interactions:[{type:"element-active"}],legend:!1,tooltip:{showMarkers:!1},xAxis:{grid:null,tickLine:null,line:null},maxAngle:240});(function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="radial-bar",e}return n.getDefaultOptions=function(){return pht},n.prototype.changeData=function(e){this.updateOption({data:e}),m$({chart:this.chart,options:this.options}),this.chart.changeData(e)},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return dht},n})(Mt);function vht(t){var n=t.chart,e=t.options,r=e.data,i=e.sectorStyle,a=e.shape,o=e.color;return n.data(r),xt(Nn)(U({},t,{options:{marginRatio:1,interval:{style:i,color:o,shape:a}}})),t}function ght(t){var n=t.chart,e=t.options,r=e.label,i=e.xField,a=Bn(n,"interval");if(r===!1)a.label(!1);else if(Qt(r)){var o=r.callback,s=r.fields,l=vt(r,["callback","fields"]),c=l.offset,u=l.layout;(c===void 0||c>=0)&&(u=u?et(u)?u:[u]:[],l.layout=Ln(u,function(f){return f.type!=="limit-in-shape"}),l.layout.length||delete l.layout),a.label({fields:s||[i],callback:o,cfg:xn(l)})}else Ja(ji.WARN,r===null,"the label option must be an Object."),a.label({fields:[i]});return t}function yht(t){var n=t.chart,e=t.options,r=e.legend,i=e.seriesField;return r===!1?n.legend(!1):i&&n.legend(i,r),t}function mht(t){var n=t.chart,e=t.options,r=e.radius,i=e.innerRadius,a=e.startAngle,o=e.endAngle;return n.coordinate({type:"polar",cfg:{radius:r,innerRadius:i,startAngle:a,endAngle:o}}),t}function xht(t){var n,e=t.options,r=e.xAxis,i=e.yAxis,a=e.xField,o=e.yField;return xt(Ye((n={},n[a]=r,n[o]=i,n)))(t)}function bht(t){var n=t.chart,e=t.options,r=e.xAxis,i=e.yAxis,a=e.xField,o=e.yField;return r?n.axis(a,r):n.axis(a,!1),i?n.axis(o,i):n.axis(o,!1),t}function wht(t){xt(qr("sectorStyle"),vht,xht,ght,mht,bht,yht,pn,Ee,te,Yt,Ie(),cs)(t)}var Sht=U({},Mt.getDefaultOptions(),{xAxis:!1,yAxis:!1,legend:{position:"right",radio:{}},sectorStyle:{stroke:"#fff",lineWidth:1},label:{layout:{type:"limit-in-shape"}},tooltip:{shared:!0,showMarkers:!1},interactions:[{type:"active-region"}]});(function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="rose",e}return n.getDefaultOptions=function(){return Sht},n.prototype.changeData=function(e){this.updateOption({data:e}),this.chart.changeData(e)},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return wht},n})(Mt);var sk="x",lk="y",ck="name",q0="nodes",Z0="edges";function Oht(t,n,e){var r=[];return t.forEach(function(i){var a=i[n],o=i[e];r.includes(a)||r.push(a),r.includes(o)||r.push(o)}),r}function Mht(t,n,e,r){var i={};return n.forEach(function(a){i[a]={},n.forEach(function(o){i[a][o]=0})}),t.forEach(function(a){i[a[e]][a[r]]=1}),i}function Aht(t,n,e){if(!et(t))return[];var r=[],i=Oht(t,n,e),a=Mht(t,i,n,e),o={};i.forEach(function(l){o[l]=0});function s(l){o[l]=1,i.forEach(function(c){if(a[l][c]!=0)if(o[c]==1)r.push("".concat(l,"_").concat(c));else{if(o[c]==-1)return;s(c)}}),o[l]=-1}return i.forEach(function(l){o[l]!=-1&&s(l)}),r.length!==0&&console.warn("sankey data contains circle, ".concat(r.length," records removed."),r),t.filter(function(l){return r.findIndex(function(c){return c==="".concat(l[n],"_").concat(l[e])})<0})}function Eht(t){return t.target.depth}function Tht(t){return t.depth}function Cht(t,n){return n-1-t.height}function zO(t,n){return t.sourceLinks.length?t.depth:n-1}function Pht(t){return t.targetLinks.length?t.depth:t.sourceLinks.length?qH(t.sourceLinks,Eht)-1:0}function zp(t){return function(){return t}}function X1(t,n){for(var e=0,r=0;r<t.length;r++)e+=n(t[r]);return e}function U1(t,n){for(var e=-1/0,r=0;r<t.length;r++)e=Math.max(n(t[r]),e);return e}function kht(t,n){for(var e=1/0,r=0;r<t.length;r++)e=Math.min(n(t[r]),e);return e}function uk(t,n){return Fg(t.source,n.source)||t.index-n.index}function fk(t,n){return Fg(t.target,n.target)||t.index-n.index}function Fg(t,n){return t.y0-n.y0}function q1(t){return t.value}function _ht(t){return t.index}function Lht(t){return t.nodes}function Iht(t){return t.links}function hk(t,n){var e=t.get(n);if(!e)throw new Error("missing: "+n);return e}function dk(t){for(var n=t.nodes,e=0,r=n;e<r.length;e++){for(var i=r[e],a=i.y0,o=a,s=0,l=i.sourceLinks;s<l.length;s++){var c=l[s];c.y0=a+c.width/2,a+=c.width}for(var u=0,f=i.targetLinks;u<f.length;u++){var c=f[u];c.y1=o+c.width/2,o+=c.width}}}function Fht(){var t=0,n=0,e=1,r=1,i=24,a=8,o,s=_ht,l=zO,c,u,f,h=Lht,d=Iht,p=6;function v(L){var F={nodes:h(L),links:d(L)};return g(F),y(F),m(F),x(F),S(F),dk(F),F}v.update=function(L){return dk(L),L},v.nodeId=function(L){return arguments.length?(s=typeof L=="function"?L:zp(L),v):s},v.nodeAlign=function(L){return arguments.length?(l=typeof L=="function"?L:zp(L),v):l},v.nodeDepth=function(L){return arguments.length?(c=L,v):c},v.nodeSort=function(L){return arguments.length?(u=L,v):u},v.nodeWidth=function(L){return arguments.length?(i=+L,v):i},v.nodePadding=function(L){return arguments.length?(a=o=+L,v):a},v.nodes=function(L){return arguments.length?(h=typeof L=="function"?L:zp(L),v):h},v.links=function(L){return arguments.length?(d=typeof L=="function"?L:zp(L),v):d},v.linkSort=function(L){return arguments.length?(f=L,v):f},v.size=function(L){return arguments.length?(t=n=0,e=+L[0],r=+L[1],v):[e-t,r-n]},v.extent=function(L){return arguments.length?(t=+L[0][0],e=+L[1][0],n=+L[0][1],r=+L[1][1],v):[[t,n],[e,r]]},v.iterations=function(L){return arguments.length?(p=+L,v):p};function g(L){var F=L.nodes,B=L.links;F.forEach(function(H,Q){H.index=Q,H.sourceLinks=[],H.targetLinks=[]});var D=new Map(F.map(function(H){return[s(H),H]}));if(B.forEach(function(H,Q){H.index=Q;var Z=H.source,q=H.target;typeof Z!="object"&&(Z=H.source=hk(D,Z)),typeof q!="object"&&(q=H.target=hk(D,q)),Z.sourceLinks.push(H),q.targetLinks.push(H)}),f!=null)for(var N=0,j=F;N<j.length;N++){var Y=j[N],W=Y.sourceLinks,V=Y.targetLinks;W.sort(f),V.sort(f)}}function y(L){for(var F=L.nodes,B=0,D=F;B<D.length;B++){var N=D[B];N.value=N.fixedValue===void 0?Math.max(X1(N.sourceLinks,q1),X1(N.targetLinks,q1)):N.fixedValue}}function m(L){for(var F=L.nodes,B=F.length,D=new Set(F),N=new Set,j=0;D.size;){if(D.forEach(function(H){H.depth=j;for(var Q=0,Z=H.sourceLinks;Q<Z.length;Q++){var q=Z[Q].target;N.add(q)}}),++j>B)throw new Error("circular link");D=N,N=new Set}if(c)for(var Y=Math.max(U1(F,function(H){return H.depth})+1,0),W=void 0,V=0;V<F.length;V++)W=F[V],W.depth=c.call(null,W,Y)}function x(L){for(var F=L.nodes,B=F.length,D=new Set(F),N=new Set,j=0;D.size;){if(D.forEach(function(Y){Y.height=j;for(var W=0,V=Y.targetLinks;W<V.length;W++){var H=V[W].source;N.add(H)}}),++j>B)throw new Error("circular link");D=N,N=new Set}}function b(L){for(var F=L.nodes,B=Math.max(U1(F,function(q){return q.depth})+1,0),D=(e-t-i)/(B-1),N=new Array(B).fill(0).map(function(){return[]}),j=0,Y=F;j<Y.length;j++){var W=Y[j],V=Math.max(0,Math.min(B-1,Math.floor(l.call(null,W,B))));W.layer=V,W.x0=t+V*D,W.x1=W.x0+i,N[V]?N[V].push(W):N[V]=[W]}if(u)for(var H=0,Q=N;H<Q.length;H++){var Z=Q[H];Z.sort(u)}return N}function w(L){for(var F=kht(L,function(rt){return(r-n-(rt.length-1)*o)/X1(rt,q1)}),B=0,D=L;B<D.length;B++){for(var N=D[B],j=n,Y=0,W=N;Y<W.length;Y++){var V=W[Y];V.y0=j,V.y1=j+V.value*F,j=V.y1+o;for(var H=0,Q=V.sourceLinks;H<Q.length;H++){var Z=Q[H];Z.width=Z.value*F}}j=(r-j+o)/(N.length+1);for(var q=0;q<N.length;++q){var V=N[q];V.y0+=j*(q+1),V.y1+=j*(q+1)}_(N)}}function S(L){var F=b(L);o=Math.min(a,(r-n)/(U1(F,function(j){return j.length})-1)),w(F);for(var B=0;B<p;++B){var D=Math.pow(.99,B),N=Math.max(1-D,(B+1)/p);M(F,D,N),O(F,D,N)}}function O(L,F,B){for(var D=1,N=L.length;D<N;++D){for(var j=L[D],Y=0,W=j;Y<W.length;Y++){for(var V=W[Y],H=0,Q=0,Z=0,q=V.targetLinks;Z<q.length;Z++){var rt=q[Z],it=rt.source,ft=rt.value,yt=ft*(V.layer-it.layer);H+=k(it,V)*yt,Q+=yt}if(Q>0){var mt=(H/Q-V.y0)*F;V.y0+=mt,V.y1+=mt,P(V)}}u===void 0&&j.sort(Fg),j.length&&A(j,B)}}function M(L,F,B){for(var D=L.length,N=D-2;N>=0;--N){for(var j=L[N],Y=0,W=j;Y<W.length;Y++){for(var V=W[Y],H=0,Q=0,Z=0,q=V.sourceLinks;Z<q.length;Z++){var rt=q[Z],it=rt.target,ft=rt.value,yt=ft*(it.layer-V.layer);H+=I(V,it)*yt,Q+=yt}if(Q>0){var mt=(H/Q-V.y0)*F;V.y0+=mt,V.y1+=mt,P(V)}}u===void 0&&j.sort(Fg),j.length&&A(j,B)}}function A(L,F){var B=L.length>>1,D=L[B];C(L,D.y0-o,B-1,F),T(L,D.y1+o,B+1,F),C(L,r,L.length-1,F),T(L,n,0,F)}function T(L,F,B,D){for(;B<L.length;++B){var N=L[B],j=(F-N.y0)*D;j>1e-6&&(N.y0+=j,N.y1+=j),F=N.y1+o}}function C(L,F,B,D){for(;B>=0;--B){var N=L[B],j=(N.y1-F)*D;j>1e-6&&(N.y0-=j,N.y1-=j),F=N.y0-o}}function P(L){var F=L.sourceLinks,B=L.targetLinks;if(f===void 0){for(var D=0,N=B;D<N.length;D++){var j=N[D].source.sourceLinks;j.sort(fk)}for(var Y=0,W=F;Y<W.length;Y++){var V=W[Y].target.targetLinks;V.sort(uk)}}}function _(L){if(f===void 0)for(var F=0,B=L;F<B.length;F++){var D=B[F],N=D.sourceLinks,j=D.targetLinks;N.sort(fk),j.sort(uk)}}function k(L,F){for(var B=L.y0-(L.sourceLinks.length-1)*o/2,D=0,N=L.sourceLinks;D<N.length;D++){var j=N[D],Y=j.target,W=j.width;if(Y===F)break;B+=W+o}for(var V=0,H=F.targetLinks;V<H.length;V++){var Q=H[V],Y=Q.source,W=Q.width;if(Y===L)break;B-=W}return B}function I(L,F){for(var B=F.y0-(F.targetLinks.length-1)*o/2,D=0,N=F.targetLinks;D<N.length;D++){var j=N[D],Y=j.source,W=j.width;if(Y===L)break;B+=W+o}for(var V=0,H=L.sourceLinks;V<H.length;V++){var Q=H[V],Y=Q.target,W=Q.width;if(Y===F)break;B-=W}return B}return v}var Dht={left:Tht,right:Cht,center:Pht,justify:zO},Rht={nodeId:function(t){return t.index},nodeAlign:"justify",nodeWidth:.008,nodePadding:.03,nodeSort:void 0};function Bht(t){var n=pt(t)?Dht[t]:ut(t)?t:null;return n||zO}function Nht(t){return Jt({},Rht,t)}function $ht(t,n){var e=Nht(t),r=e.nodeId,i=e.nodeSort,a=e.nodeAlign,o=e.nodeWidth,s=e.nodePadding,l=e.nodeDepth,c=Fht().nodeSort(i).nodeWidth(o).nodePadding(s).nodeDepth(l).nodeAlign(Bht(a)).extent([[0,0],[1,1]]).nodeId(r),u=c(n),f=u.nodes.map(function(d){var p=d.x0,v=d.x1,g=d.y0,y=d.y1;return d.x=[p,v,v,p],d.y=[g,g,y,y],d}).filter(function(d){return d.name!==null}),h=u.links.map(function(d){var p=d.source,v=d.target,g=p.x1,y=v.x0;d.x=[g,g,y,y];var m=d.width/2;return d.y=[d.y0+m,d.y0-m,d.y1+m,d.y1-m],d}).filter(function(d){var p=d.source,v=d.target;return p.name!==null&&v.name!==null});return{nodes:f,links:h}}function jht(t){return t==="node-link"}function zht(t,n,e){return hl(t)?t/e:n}function Ght(t,n,e){return hl(t)?t/e:n}function x$(t,n,e){var r=t.dataType,i=t.data,a=t.sourceField,o=t.targetField,s=t.weightField,l=t.nodeAlign,c=t.nodeSort,u=t.nodePadding,f=t.nodePaddingRatio,h=t.nodeWidth,d=t.nodeWidthRatio,p=t.nodeDepth,v=t.rawFields,g=v===void 0?[]:v,y;jht(r)?y=i:y=R3(Aht(i,a,o),a,o,s,g);var m=$ht({nodeAlign:l,nodePadding:Ght(u,f,e),nodeWidth:zht(h,d,n),nodeSort:c,nodeDepth:p},y),x=m.nodes,b=m.links;return{nodes:x.map(function(w){return E(E({},Kt(w,X(["x","y","name"],g,!0))),{isNode:!0})}),edges:b.map(function(w){return E(E({source:w.source.name,target:w.target.name,name:w.source.name||w.target.name},Kt(w,X(["x","y","value"],g,!0))),{isNode:!1})})}}function Yht(t){var n=t.options,e=n.rawFields,r=e===void 0?[]:e;return U({},{options:{tooltip:{fields:il(X(["name","source","target","value","isNode"],r,!0))},label:{fields:il(X(["x","name"],r,!0))}}},t)}function Wht(t){var n=t.chart,e=t.options,r=e.color,i=e.nodeStyle,a=e.edgeStyle,o=e.label,s=e.tooltip,l=e.nodeState,c=e.edgeState,u=e.rawFields,f=u===void 0?[]:u;n.legend(!1),n.tooltip(s),n.axis(!1),n.coordinate().reflect("y");var h=x$(e,n.width,n.height),d=h.nodes,p=h.edges,v=n.createView({id:Z0});v.data(p),H3({chart:v,options:{xField:sk,yField:lk,seriesField:ck,rawFields:X(["source","target"],f,!0),edge:{color:r,style:a,shape:"arc"},tooltip:s,state:c}});var g=n.createView({id:q0});return g.data(d),z0({chart:g,options:{xField:sk,yField:lk,seriesField:ck,polygon:{color:r,style:i},label:o,tooltip:s,state:l}}),n.interaction("element-active"),n.scale({x:{sync:!0,nice:!0,min:0,max:1,minLimit:0,maxLimit:1},y:{sync:!0,nice:!0,min:0,max:1,minLimit:0,maxLimit:1},name:{sync:"color",type:"cat"}}),t}function Vht(t){var n=t.chart,e=t.options,r=e.animation,i=X(X([],n.views[0].geometries,!0),n.views[1].geometries,!0);return Md(n,r,i),t}function Hht(t){var n=t.chart,e=t.options,r=e.nodeDraggable,i="sankey-node-draggable";return r?n.interaction(i):n.removeInteraction(i),t}function Xht(t){var n=t.chart,e=t.options,r=e.interactions,i=r===void 0?[]:r,a=[].concat(i,e.nodeInteractions||[]),o=[].concat(i,e.edgeInteractions||[]),s=Lt(n,q0),l=Lt(n,Z0);return a.forEach(function(c){(c==null?void 0:c.enable)===!1?s.removeInteraction(c.type):s.interaction(c.type,c.cfg||{})}),o.forEach(function(c){(c==null?void 0:c.enable)===!1?l.removeInteraction(c.type):l.interaction(c.type,c.cfg||{})}),t}function Uht(t){return xt(Yht,Wht,Xht,Hht,Vht,Yt)(t)}var qht=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.isDragging=!1,e}return n.prototype.isNodeElement=function(){var e=z(this.context,"event.target");if(e){var r=e.get("element");return r&&r.getModel().data.isNode}return!1},n.prototype.getNodeView=function(){return Lt(this.context.view,q0)},n.prototype.getEdgeView=function(){return Lt(this.context.view,Z0)},n.prototype.getCurrentDatumIdx=function(e){return this.getNodeView().geometries[0].elements.indexOf(e)},n.prototype.start=function(){if(this.isNodeElement()){this.prevPoint={x:z(this.context,"event.x"),y:z(this.context,"event.y")};var e=this.context.event.target.get("element"),r=this.getCurrentDatumIdx(e);if(r===-1)return;this.currentElementIdx=r,this.context.isDragging=!0,this.isDragging=!0,this.prevNodeAnimateCfg=this.getNodeView().getOptions().animate,this.prevEdgeAnimateCfg=this.getEdgeView().getOptions().animate,this.getNodeView().animate(!1),this.getEdgeView().animate(!1)}},n.prototype.translate=function(){if(this.isDragging){var e=this.context.view,r={x:z(this.context,"event.x"),y:z(this.context,"event.y")},i=r.x-this.prevPoint.x,a=r.y-this.prevPoint.y,o=this.getNodeView(),s=o.geometries[0].elements[this.currentElementIdx];if(s&&s.getModel()){var l=s.getModel().data,c=o.getOptions().data,u=o.getCoordinate(),f={x:i/u.getWidth(),y:a/u.getHeight()},h=E(E({},l),{x:l.x.map(function(y){return y+=f.x}),y:l.y.map(function(y){return y+=f.y})}),d=X([],c,!0);d[this.currentElementIdx]=h,o.data(d);var p=l.name,v=this.getEdgeView(),g=v.getOptions().data;g.forEach(function(y){y.source===p&&(y.x[0]+=f.x,y.x[1]+=f.x,y.y[0]+=f.y,y.y[1]+=f.y),y.target===p&&(y.x[2]+=f.x,y.x[3]+=f.x,y.y[2]+=f.y,y.y[3]+=f.y)}),v.data(g),this.prevPoint=r,e.render(!0)}}},n.prototype.end=function(){this.isDragging=!1,this.context.isDragging=!1,this.prevPoint=null,this.currentElementIdx=null,this.getNodeView().animate(this.prevNodeAnimateCfg),this.getEdgeView().animate(this.prevEdgeAnimateCfg)},n}(be);ht("sankey-node-drag",qht);wt("sankey-node-draggable",{showEnable:[{trigger:"polygon:mouseenter",action:"cursor:pointer"},{trigger:"polygon:mouseleave",action:"cursor:default"}],start:[{trigger:"polygon:mousedown",action:"sankey-node-drag:start"}],processing:[{trigger:"plot:mousemove",action:"sankey-node-drag:translate"},{isEnable:function(t){return t.isDragging},trigger:"plot:mousemove",action:"cursor:move"}],end:[{trigger:"plot:mouseup",action:"sankey-node-drag:end"}]});(function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="sankey",e}return n.getDefaultOptions=function(){return{appendPadding:8,syncViewPadding:!0,nodeStyle:{opacity:1,fillOpacity:1,lineWidth:1},edgeStyle:{opacity:.3,lineWidth:0},edgeState:{active:{style:{opacity:.8,lineWidth:0}}},label:{formatter:function(e){var r=e.name;return r},callback:function(e){var r=e[1]===1;return{style:{fill:"#545454",textAlign:r?"end":"start"},offsetX:r?-8:8}},layout:[{type:"hide-overlap"}]},tooltip:{showTitle:!1,showMarkers:!1,shared:!1,showContent:function(e){return!z(e,[0,"data","isNode"])},formatter:function(e){var r=e.source,i=e.target,a=e.value;return{name:r+" -> "+i,value:a}}},nodeWidthRatio:.008,nodePaddingRatio:.01,animation:{appear:{animation:"wave-in"},enter:{animation:"wave-in"}}}},n.prototype.changeData=function(e){this.updateOption({data:e});var r=x$(this.options,this.chart.width,this.chart.height),i=r.nodes,a=r.edges,o=Lt(this.chart,q0),s=Lt(this.chart,Z0);o.changeData(i),s.changeData(a)},n.prototype.getSchemaAdaptor=function(){return Uht},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n})(Mt);var GO="ancestor-node",b$="value",Fh="path",Zht=[Fh,f$,BO,h$,"name","depth","height"],Kht=U({},Mt.getDefaultOptions(),{innerRadius:0,radius:.85,hierarchyConfig:{field:"value"},tooltip:{shared:!0,showMarkers:!1,offset:20,showTitle:!1},legend:!1,sunburstStyle:{lineWidth:.5,stroke:"#FFF"},drilldown:{enabled:!0}}),Qht={field:"value",size:[1,1],round:!1,padding:0,sort:function(t,n){return n.value-t.value},as:["x","y"],ignoreParentValue:!0};function Jht(t,n){n=Jt({},Qht,n);var e=n.as;if(!et(e)||e.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var r;try{r=NO(n)}catch(l){console.warn(l)}var i=function(l){return o$().size(n.size).round(n.round).padding(n.padding)(Ru(l).sum(function(c){return mn(c.children)?n.ignoreParentValue?0:c[r]-Hn(c.children,function(u,f){return u+f[r]},0):c[r]}).sort(n.sort))},a=i(t),o=e[0],s=e[1];return a.each(function(l){var c,u;l[o]=[l.x0,l.x1,l.x1,l.x0],l[s]=[l.y1,l.y1,l.y0,l.y0],l.name=l.name||((c=l.data)===null||c===void 0?void 0:c.name)||((u=l.data)===null||u===void 0?void 0:u.label),l.data.name=l.name,["x0","x1","y0","y1"].forEach(function(f){e.indexOf(f)===-1&&delete l[f]})}),$O(a)}var tdt={field:"value",tile:"treemapSquarify",size:[1,1],round:!1,ignoreParentValue:!0,padding:0,paddingInner:0,paddingOuter:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,as:["x","y"],sort:function(t,n){return n.value-t.value},ratio:.5*(1+Math.sqrt(5))};function edt(t,n){return t==="treemapSquarify"?ZP[t].ratio(n):ZP[t]}function w$(t,n){n=Jt({},tdt,n);var e=n.as;if(!et(e)||e.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var r;try{r=NO(n)}catch(c){console.warn(c)}var i=edt(n.tile,n.ratio),a=function(c){return u$().tile(i).size(n.size).round(n.round).padding(n.padding).paddingInner(n.paddingInner).paddingOuter(n.paddingOuter).paddingTop(n.paddingTop).paddingRight(n.paddingRight).paddingBottom(n.paddingBottom).paddingLeft(n.paddingLeft)(Ru(c).sum(function(u){return n.ignoreParentValue&&u.children?0:u[r]}).sort(n.sort))},o=a(t),s=e[0],l=e[1];return o.each(function(c){c[s]=[c.x0,c.x1,c.x1,c.x0],c[l]=[c.y1,c.y1,c.y0,c.y0],["x0","x1","y0","y1"].forEach(function(u){e.indexOf(u)===-1&&delete c[u]})}),$O(o)}function S$(t){var n=t.data,e=t.colorField,r=t.rawFields,i=t.hierarchyConfig,a=i===void 0?{}:i,o=a.activeDepth,s={partition:Jht,treemap:w$},l=t.seriesField,c=t.type||"partition",u=s[c](n,E(E({field:l||"value"},Jy(a,["activeDepth"])),{type:"hierarchy.".concat(c),as:["x","y"]})),f=[];return u.forEach(function(h){var d,p,v,g,y,m;if(h.depth===0||o>0&&h.depth>o)return null;for(var x=h.data.name,b=E({},h);b.depth>1;)x="".concat((p=b.parent.data)===null||p===void 0?void 0:p.name," / ").concat(x),b=b.parent;var w=E(E(E({},Kt(h.data,X(X([],r||[],!0),[a.field],!1))),(d={},d[Fh]=x,d[GO]=b.data.name,d)),h);l&&(w[l]=h.data[l]||((g=(v=h.parent)===null||v===void 0?void 0:v.data)===null||g===void 0?void 0:g[l])),e&&(w[e]=h.data[e]||((m=(y=h.parent)===null||y===void 0?void 0:y.data)===null||m===void 0?void 0:m[e])),w.ext=a,w[Ih]={hierarchyConfig:a,colorField:e,rawFields:r},f.push(w)}),f}function ndt(t){var n=t.chart,e=t.options,r=e.color,i=e.colorField,a=i===void 0?GO:i,o=e.sunburstStyle,s=e.rawFields,l=s===void 0?[]:s,c=e.shape,u=S$(e);n.data(u);var f;return o&&(f=function(h){return U({},{fillOpacity:Math.pow(.85,h.depth)},ut(o)?o(h):o)}),z0(U({},t,{options:{xField:"x",yField:"y",seriesField:a,rawFields:il(X(X([],Zht,!0),l,!0)),polygon:{color:r,style:f,shape:c}}})),t}function rdt(t){var n=t.chart;return n.axis(!1),t}function idt(t){var n=t.chart,e=t.options,r=e.label,i=Bn(n,"polygon");if(!r)i.label(!1);else{var a=r.fields,o=a===void 0?["name"]:a,s=r.callback,l=vt(r,["fields","callback"]);i.label({fields:o,callback:s,cfg:xn(l)})}return t}function adt(t){var n=t.chart,e=t.options,r=e.innerRadius,i=e.radius,a=e.reflect,o=n.coordinate({type:"polar",cfg:{innerRadius:r,radius:i}});return a&&o.reflect(a),t}function odt(t){var n,e=t.options,r=e.hierarchyConfig,i=e.meta;return xt(Ye({},(n={},n[b$]=z(i,z(r,["field"],"value")),n)))(t)}function sdt(t){var n=t.chart,e=t.options,r=e.tooltip;if(r===!1)n.tooltip(!1);else{var i=r;z(r,"fields")||(i=U({},{customItems:function(a){return a.map(function(o){var s=z(n.getOptions(),"scales"),l=z(s,[Fh,"formatter"],function(u){return u}),c=z(s,[b$,"formatter"],function(u){return u});return E(E({},o),{name:l(o.data[Fh]),value:c(o.data.value)})})}},i)),n.tooltip(i)}return t}function ldt(t){var n=t.drilldown,e=t.interactions,r=e===void 0?[]:e;return n!=null&&n.enabled?U({},t,{interactions:X(X([],r,!0),[{type:"drill-down",cfg:{drillDownConfig:n,transformData:S$}}],!1)}):t}function cdt(t){var n=t.chart,e=t.options,r=e.drilldown;return Ee({chart:n,options:ldt(e)}),r!=null&&r.enabled&&(n.appendPadding=R0(n.appendPadding,z(r,["breadCrumb","position"]))),t}function udt(t){return xt(Yt,qr("sunburstStyle"),ndt,rdt,odt,Lu,adt,sdt,idt,cdt,te,Ie())(t)}(function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="sunburst",e}return n.getDefaultOptions=function(){return Kht},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return udt},n.SUNBURST_ANCESTOR_FIELD=GO,n.SUNBURST_PATH_FIELD=Fh,n.NODE_ANCESTORS_FIELD=BO,n})(Mt);function O$(t,n){if(et(t))return t.find(function(e){return e.type===n})}function M$(t,n){var e=O$(t,n);return e&&e.enable!==!1}function YO(t){var n=t.interactions,e=t.drilldown;return z(e,"enabled")||M$(n,"treemap-drill-down")}function fdt(t){var n=t.interactions["drill-down"];if(n){var e=n.context.actions.find(function(r){return r.name==="drill-down-action"});e.reset()}}function WO(t){var n=t.data,e=t.colorField,r=t.enableDrillDown,i=t.hierarchyConfig,a=w$(n,E(E({},i),{type:"hierarchy.treemap",field:"value",as:["x","y"]})),o=[];return a.forEach(function(s){if(s.depth===0||r&&s.depth!==1||!r&&s.children)return null;var l=s.ancestors().map(function(h){return{data:h.data,height:h.height,value:h.value}}),c=r&&et(n.path)?l.concat(n.path.slice(1)):l,u=Object.assign({},s.data,E({x:s.x,y:s.y,depth:s.depth,value:s.value,path:c},s));if(!s.data[e]&&s.parent){var f=s.ancestors().find(function(h){return h.data[e]});u[e]=f==null?void 0:f.data[e]}else u[e]=s.data[e];u[Ih]={hierarchyConfig:i,colorField:e,enableDrillDown:r},o.push(u)}),o}function hdt(t){var n=t.options,e=n.colorField;return U({options:{rawFields:["value"],tooltip:{fields:["name","value",e,"path"],formatter:function(r){return{name:r.name,value:r.value}}}}},t)}function ddt(t){var n=t.chart,e=t.options,r=e.color,i=e.colorField,a=e.rectStyle,o=e.hierarchyConfig,s=e.rawFields,l=WO({data:e.data,colorField:e.colorField,enableDrillDown:YO(e),hierarchyConfig:o});return n.data(l),z0(U({},t,{options:{xField:"x",yField:"y",seriesField:i,rawFields:s,polygon:{color:r,style:a}}})),n.coordinate().reflect("y"),t}function pdt(t){var n=t.chart;return n.axis(!1),t}function vdt(t){var n=t.drilldown,e=t.interactions,r=e===void 0?[]:e,i=YO(t);return i?U({},t,{interactions:X(X([],r,!0),[{type:"drill-down",cfg:{drillDownConfig:n,transformData:WO}}],!1)}):t}function gdt(t){var n=t.chart,e=t.options,r=e.interactions,i=e.drilldown;Ee({chart:n,options:vdt(e)});var a=O$(r,"view-zoom");a&&(a.enable!==!1?n.getCanvas().on("mousewheel",function(s){s.preventDefault()}):n.getCanvas().off("mousewheel"));var o=YO(e);return o&&(n.appendPadding=R0(n.appendPadding,z(i,["breadCrumb","position"]))),t}function ydt(t){return xt(hdt,Yt,qr("rectStyle"),ddt,pdt,Lu,pn,gdt,te,Ie())(t)}var mdt={colorField:"name",rectStyle:{lineWidth:1,stroke:"#fff"},hierarchyConfig:{tile:"treemapSquarify"},label:{fields:["name"],layout:{type:"limit-in-shape"}},tooltip:{showMarkers:!1,showTitle:!1},drilldown:{enabled:!1,breadCrumb:{position:"bottom-left",rootText:"初始",dividerText:"/",textStyle:{fontSize:12,fill:"rgba(0, 0, 0, 0.65)",cursor:"pointer"},activeTextStyle:{fill:"#87B5FF"}}}};(function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="treemap",e}return n.getDefaultOptions=function(){return mdt},n.prototype.changeData=function(e){var r=this.options,i=r.colorField,a=r.interactions,o=r.hierarchyConfig;this.updateOption({data:e});var s=WO({data:e,colorField:i,enableDrillDown:M$(a,"treemap-drill-down"),hierarchyConfig:o});this.chart.changeData(s),fdt(this.chart)},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return ydt},n})(Mt);var Ya="id",sw="path",xdt={appendPadding:[10,0,20,0],blendMode:"multiply",tooltip:{showTitle:!1,showMarkers:!1,fields:["id","size"],formatter:function(t){return{name:t.id,value:t.size}}},legend:{position:"top-left"},label:{style:{textAlign:"center",fill:"#fff"}},interactions:[{type:"legend-filter",enable:!1}],state:{active:{style:{stroke:"#000"}},selected:{style:{stroke:"#000",lineWidth:2}},inactive:{style:{fillOpacity:.3,strokeOpacity:.3}}},defaultInteractions:["tooltip","venn-legend-active"]};function K0(t){if(t){var n=t.geometries[0].elements;n.forEach(function(e){e.shape.toFront()})}}var bdt=C0("element-active"),wdt=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.syncElementsPos=function(){K0(this.context.view)},n.prototype.active=function(){t.prototype.active.call(this),this.syncElementsPos()},n.prototype.toggle=function(){t.prototype.toggle.call(this),this.syncElementsPos()},n.prototype.reset=function(){t.prototype.reset.call(this),this.syncElementsPos()},n}(bdt),Sdt=C0("element-highlight"),Odt=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.syncElementsPos=function(){K0(this.context.view)},n.prototype.highlight=function(){t.prototype.highlight.call(this),this.syncElementsPos()},n.prototype.toggle=function(){t.prototype.toggle.call(this),this.syncElementsPos()},n.prototype.clear=function(){t.prototype.clear.call(this),this.syncElementsPos()},n.prototype.reset=function(){t.prototype.reset.call(this),this.syncElementsPos()},n}(Sdt),Mdt=C0("element-selected"),Adt=C0("element-single-selected"),Edt=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.syncElementsPos=function(){K0(this.context.view)},n.prototype.selected=function(){t.prototype.selected.call(this),this.syncElementsPos()},n.prototype.toggle=function(){t.prototype.toggle.call(this),this.syncElementsPos()},n.prototype.reset=function(){t.prototype.reset.call(this),this.syncElementsPos()},n}(Mdt),Tdt=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.syncElementsPos=function(){K0(this.context.view)},n.prototype.selected=function(){t.prototype.selected.call(this),this.syncElementsPos()},n.prototype.toggle=function(){t.prototype.toggle.call(this),this.syncElementsPos()},n.prototype.reset=function(){t.prototype.reset.call(this),this.syncElementsPos()},n}(Adt);ht("venn-element-active",wdt);ht("venn-element-highlight",Odt);ht("venn-element-selected",Edt);ht("venn-element-single-selected",Tdt);wt("venn-element-active",{start:[{trigger:"element:mouseenter",action:"venn-element-active:active"}],end:[{trigger:"element:mouseleave",action:"venn-element-active:reset"}]});wt("venn-element-highlight",{start:[{trigger:"element:mouseenter",action:"venn-element-highlight:highlight"}],end:[{trigger:"element:mouseleave",action:"venn-element-highlight:reset"}]});wt("venn-element-selected",{start:[{trigger:"element:click",action:"venn-element-selected:toggle"}],rollback:[{trigger:"dblclick",action:["venn-element-selected:reset"]}]});wt("venn-element-single-selected",{start:[{trigger:"element:click",action:"venn-element-single-selected:toggle"}],rollback:[{trigger:"dblclick",action:["venn-element-single-selected:reset"]}]});wt("venn-legend-active",{start:[{trigger:"legend-item:mouseenter",action:["list-active:active","venn-element-active:active"]}],end:[{trigger:"legend-item:mouseleave",action:["list-active:reset","venn-element-active:reset"]}]});wt("venn-legend-highlight",{start:[{trigger:"legend-item:mouseenter",action:["legend-item-highlight:highlight","venn-element-highlight:highlight"]}],end:[{trigger:"legend-item:mouseleave",action:["legend-item-highlight:reset","venn-element-highlight:reset"]}]});var Cdt=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getLabelPoint=function(e,r,i){var a=e.data,o=a.x,s=a.y,l=e.customLabelInfo,c=l.offsetX,u=l.offsetY;return{content:e.content[i],x:o+c,y:s+u}},n}(L0);wd("venn",Cdt);var Pdt=0/0;function pk(t){return typeof t=="number"?t:tH(t)?Pdt:+t}function kdt(t,n){return function(e,r){var i;if(e===void 0&&r===void 0)return n;if(e!==void 0&&(i=e),r!==void 0){if(i===void 0)return r;typeof e=="string"||typeof r=="string"?(e=$E(e),r=$E(r)):(e=pk(e),r=pk(r)),i=t(e,r)}return i}}var _dt=jE&&new jE;const vk=_dt;var gk=Object.create,Ldt=function(){function t(){}return function(n){if(!Fc(n))return{};if(gk)return gk(n);t.prototype=n;var e=new t;return t.prototype=void 0,e}}();const VO=Ldt;function HO(){}var Idt=4294967295;function Kc(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Idt,this.__views__=[]}Kc.prototype=VO(HO.prototype);Kc.prototype.constructor=Kc;var Fdt=vk?function(t){return vk.get(t)}:eH;const A$=Fdt;var Ddt={};const yk=Ddt;var Rdt=Object.prototype,Bdt=Rdt.hasOwnProperty;function jv(t){for(var n=t.name+"",e=yk[n],r=Bdt.call(yk,n)?e.length:0;r--;){var i=e[r],a=i.func;if(a==null||a==t)return i.name}return n}function ts(t,n){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=void 0}ts.prototype=VO(HO.prototype);ts.prototype.constructor=ts;function E$(t,n){var e=-1,r=t.length;for(n||(n=Array(r));++e<r;)n[e]=t[e];return n}function Ndt(t){if(t instanceof Kc)return t.clone();var n=new ts(t.__wrapped__,t.__chain__);return n.__actions__=E$(t.__actions__),n.__index__=t.__index__,n.__values__=t.__values__,n}var $dt=Object.prototype,jdt=$dt.hasOwnProperty;function Dg(t){if(Tl(t)&&!Un(t)&&!(t instanceof Kc)){if(t instanceof ts)return t;if(jdt.call(t,"__wrapped__"))return Ndt(t)}return new ts(t)}Dg.prototype=HO.prototype;Dg.prototype.constructor=Dg;function mk(t){var n=jv(t),e=Dg[n];if(typeof e!="function"||!(n in Kc.prototype))return!1;if(t===e)return!0;var r=A$(e);return!!r&&t===r[0]}function zdt(t,n){for(var e=-1,r=t==null?0:t.length;++e<r&&n(t[e],e,t)!==!1;);return t}function XO(t,n,e){n=="__proto__"&&zE?zE(t,n,{configurable:!0,enumerable:!0,value:e,writable:!0}):t[n]=e}var Gdt=Object.prototype,Ydt=Gdt.hasOwnProperty;function Q0(t,n,e){var r=t[n];(!(Ydt.call(t,n)&&nH(r,e))||e===void 0&&!(n in t))&&XO(t,n,e)}function Bu(t,n,e,r){var i=!e;e||(e={});for(var a=-1,o=n.length;++a<o;){var s=n[a],l=r?r(e[s],t[s],s,e,t):void 0;l===void 0&&(l=t[s]),i?XO(e,s,l):Q0(e,s,l)}return e}function Wdt(t){return rH(function(n,e){var r=-1,i=e.length,a=i>1?e[i-1]:void 0,o=i>2?e[2]:void 0;for(a=t.length>3&&typeof a=="function"?(i--,a):void 0,o&&iH(e[0],e[1],o)&&(a=i<3?void 0:a,i=1),n=Object(n);++r<i;){var s=e[r];s&&t(n,s,r,a)}return n})}var Vdt=Object.prototype,Hdt=Vdt.hasOwnProperty,Xdt=Wdt(function(t,n){if(K2(n)||fd(n)){Bu(n,hd(n),t);return}for(var e in n)Hdt.call(n,e)&&Q0(t,e,n[e])});const xk=Xdt;function Udt(t){var n=[];if(t!=null)for(var e in Object(t))n.push(e);return n}var qdt=Object.prototype,Zdt=qdt.hasOwnProperty;function Kdt(t){if(!Fc(t))return Udt(t);var n=K2(t),e=[];for(var r in t)r=="constructor"&&(n||!Zdt.call(t,r))||e.push(r);return e}function UO(t){return fd(t)?aH(t,!0):Kdt(t)}function Qdt(t){var n=t==null?0:t.length;return n?oH(t,1):[]}function qO(t){return sH(lH(t,void 0,Qdt),t+"")}var Jdt=cH(Object.getPrototypeOf,Object);const ZO=Jdt;var tpt="[object Object]",ept=Function.prototype,npt=Object.prototype,T$=ept.toString,rpt=npt.hasOwnProperty,ipt=T$.call(Object);function C$(t){if(!Tl(t)||Wy(t)!=tpt)return!1;var n=ZO(t);if(n===null)return!0;var e=rpt.call(n,"constructor")&&n.constructor;return typeof e=="function"&&e instanceof e&&T$.call(e)==ipt}var apt=ID.isFinite,opt=Math.min;function spt(t){var n=Math[t];return function(e,r){if(e=uH(e),r=r==null?0:opt(FD(r),292),r&&apt(e)){var i=(GE(e)+"e").split("e"),a=n(i[0]+"e"+(+i[1]+r));return i=(GE(a)+"e").split("e"),+(i[0]+"e"+(+i[1]-r))}return n(e)}}var lpt=spt("ceil");const cpt=lpt;function upt(t,n){return t&&Bu(n,hd(n),t)}function fpt(t,n){return t&&Bu(n,UO(n),t)}var P$=typeof exports=="object"&&exports&&!exports.nodeType&&exports,bk=P$&&typeof module=="object"&&module&&!module.nodeType&&module,hpt=bk&&bk.exports===P$,wk=hpt?ID.Buffer:void 0,Sk=wk?wk.allocUnsafe:void 0;function dpt(t,n){if(n)return t.slice();var e=t.length,r=Sk?Sk(e):new t.constructor(e);return t.copy(r),r}function ppt(t,n){return Bu(t,DD(t),n)}var vpt=Object.getOwnPropertySymbols,gpt=vpt?function(t){for(var n=[];t;)hH(n,DD(t)),t=ZO(t);return n}:fH;const k$=gpt;function ypt(t,n){return Bu(t,k$(t),n)}function _$(t){return dH(t,UO,k$)}var mpt=Object.prototype,xpt=mpt.hasOwnProperty;function bpt(t){var n=t.length,e=new t.constructor(n);return n&&typeof t[0]=="string"&&xpt.call(t,"index")&&(e.index=t.index,e.input=t.input),e}function KO(t){var n=new t.constructor(t.byteLength);return new YE(n).set(new YE(t)),n}function wpt(t,n){var e=n?KO(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.byteLength)}var Spt=/\w*$/;function Opt(t){var n=new t.constructor(t.source,Spt.exec(t));return n.lastIndex=t.lastIndex,n}var Ok=WE?WE.prototype:void 0,Mk=Ok?Ok.valueOf:void 0;function Mpt(t){return Mk?Object(Mk.call(t)):{}}function Apt(t,n){var e=n?KO(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.length)}var Ept="[object Boolean]",Tpt="[object Date]",Cpt="[object Map]",Ppt="[object Number]",kpt="[object RegExp]",_pt="[object Set]",Lpt="[object String]",Ipt="[object Symbol]",Fpt="[object ArrayBuffer]",Dpt="[object DataView]",Rpt="[object Float32Array]",Bpt="[object Float64Array]",Npt="[object Int8Array]",$pt="[object Int16Array]",jpt="[object Int32Array]",zpt="[object Uint8Array]",Gpt="[object Uint8ClampedArray]",Ypt="[object Uint16Array]",Wpt="[object Uint32Array]";function Vpt(t,n,e){var r=t.constructor;switch(n){case Fpt:return KO(t);case Ept:case Tpt:return new r(+t);case Dpt:return wpt(t,e);case Rpt:case Bpt:case Npt:case $pt:case jpt:case zpt:case Gpt:case Ypt:case Wpt:return Apt(t,e);case Cpt:return new r;case Ppt:case Lpt:return new r(t);case kpt:return Opt(t);case _pt:return new r;case Ipt:return Mpt(t)}}function Hpt(t){return typeof t.constructor=="function"&&!K2(t)?VO(ZO(t)):{}}var Xpt="[object Map]";function Upt(t){return Tl(t)&&Q2(t)==Xpt}var Ak=lg&&lg.isMap,qpt=Ak?RD(Ak):Upt;const Zpt=qpt;var Kpt="[object Set]";function Qpt(t){return Tl(t)&&Q2(t)==Kpt}var Ek=lg&&lg.isSet,Jpt=Ek?RD(Ek):Qpt;const tvt=Jpt;var evt=1,nvt=2,rvt=4,L$="[object Arguments]",ivt="[object Array]",avt="[object Boolean]",ovt="[object Date]",svt="[object Error]",I$="[object Function]",lvt="[object GeneratorFunction]",cvt="[object Map]",uvt="[object Number]",F$="[object Object]",fvt="[object RegExp]",hvt="[object Set]",dvt="[object String]",pvt="[object Symbol]",vvt="[object WeakMap]",gvt="[object ArrayBuffer]",yvt="[object DataView]",mvt="[object Float32Array]",xvt="[object Float64Array]",bvt="[object Int8Array]",wvt="[object Int16Array]",Svt="[object Int32Array]",Ovt="[object Uint8Array]",Mvt="[object Uint8ClampedArray]",Avt="[object Uint16Array]",Evt="[object Uint32Array]",Ce={};Ce[L$]=Ce[ivt]=Ce[gvt]=Ce[yvt]=Ce[avt]=Ce[ovt]=Ce[mvt]=Ce[xvt]=Ce[bvt]=Ce[wvt]=Ce[Svt]=Ce[cvt]=Ce[uvt]=Ce[F$]=Ce[fvt]=Ce[hvt]=Ce[dvt]=Ce[pvt]=Ce[Ovt]=Ce[Mvt]=Ce[Avt]=Ce[Evt]=!0;Ce[svt]=Ce[I$]=Ce[vvt]=!1;function Uf(t,n,e,r,i,a){var o,s=n&evt,l=n&nvt,c=n&rvt;if(e&&(o=i?e(t,r,i,a):e(t)),o!==void 0)return o;if(!Fc(t))return t;var u=Un(t);if(u){if(o=bpt(t),!s)return E$(t,o)}else{var f=Q2(t),h=f==I$||f==lvt;if(pH(t))return dpt(t,s);if(f==F$||f==L$||h&&!i){if(o=l||h?{}:Hpt(t),!s)return l?ypt(t,fpt(o,t)):ppt(t,upt(o,t))}else{if(!Ce[f])return i?t:{};o=Vpt(t,f,s)}}a||(a=new vH);var d=a.get(t);if(d)return d;a.set(t,o),tvt(t)?t.forEach(function(g){o.add(Uf(g,n,e,g,t,a))}):Zpt(t)&&t.forEach(function(g,y){o.set(y,Uf(g,n,e,y,t,a))});var p=c?l?_$:gH:l?UO:hd,v=u?void 0:p(t);return zdt(v||t,function(g,y){v&&(y=g,g=t[y]),Q0(o,y,Uf(g,n,e,y,t,a))}),o}var Tvt=1,Cvt=4;function Tk(t){return Uf(t,Tvt|Cvt)}function Pvt(t,n,e,r){for(var i=-1,a=t==null?0:t.length;++i<a;){var o=t[i];n(r,o,e(o),t)}return r}function kvt(t){return function(n,e,r){for(var i=-1,a=Object(n),o=r(n),s=o.length;s--;){var l=o[t?s:++i];if(e(a[l],l,a)===!1)break}return n}}var _vt=kvt();const Lvt=_vt;function Ivt(t,n){return t&&Lvt(t,n,hd)}function Fvt(t,n){return function(e,r){if(e==null)return e;if(!fd(e))return t(e,r);for(var i=e.length,a=n?i:-1,o=Object(e);(n?a--:++a<i)&&r(o[a],a,o)!==!1;);return e}}var Dvt=Fvt(Ivt);const D$=Dvt;function Rvt(t,n,e,r){return D$(t,function(i,a,o){n(r,i,e(i),o)}),r}function Bvt(t,n){return function(e,r){var i=Un(e)?Pvt:Rvt,a=n?n():{};return i(e,t,BD(r),a)}}var Nvt=kdt(function(t,n){return t/n},1);const $vt=Nvt;function jvt(t,n){var e=-1,r=fd(t)?Array(t.length):[];return D$(t,function(i,a,o){r[++e]=n(i,a,o)}),r}function Qc(t,n){var e=Un(t)?J2:jvt;return e(t,BD(n))}var zvt="Expected a function",Gvt=8,Yvt=32,Wvt=128,Vvt=256;function Hvt(t){return qO(function(n){var e=n.length,r=e,i=ts.prototype.thru;for(t&&n.reverse();r--;){var a=n[r];if(typeof a!="function")throw new TypeError(zvt);if(i&&!o&&jv(a)=="wrapper")var o=new ts([],!0)}for(r=o?r:e;++r<e;){a=n[r];var s=jv(a),l=s=="wrapper"?A$(a):void 0;l&&mk(l[0])&&l[1]==(Wvt|Gvt|Yvt|Vvt)&&!l[4].length&&l[9]==1?o=o[jv(l[0])].apply(o,l[3]):o=a.length==1&&mk(a)?o[s]():o.thru(a)}return function(){var c=arguments,u=c[0];if(o&&c.length==1&&Un(u))return o.plant(u).value();for(var f=0,h=e?n[f].apply(this,c):u;++f<e;)h=n[f].call(this,h);return h}})}var Xvt=Hvt();const se=Xvt;var Uvt=Object.prototype,qvt=Uvt.hasOwnProperty,Zvt=Bvt(function(t,n,e){qvt.call(t,e)?t[e].push(n):XO(t,e,[n])});const R$=Zvt;var Kvt="[object String]";function B$(t){return typeof t=="string"||!Un(t)&&Tl(t)&&Wy(t)==Kvt}function Qvt(t,n){return J2(n,function(e){return t[e]})}function Jvt(t){return t==null?[]:Qvt(t,hd(t))}var tgt=Math.max;function egt(t,n,e,r){t=fd(t)?t:Jvt(t),e=e&&!r?FD(e):0;var i=t.length;return e<0&&(e=tgt(i+e,0)),B$(t)?e<=i&&t.indexOf(n,e)>-1:!!i&&yH(t,n,e)>-1}function ngt(t,n){return n.length<2?t:ND(t,mH(n,0,-1))}var rgt="[object Boolean]";function QO(t){return t===!0||t===!1||Tl(t)&&Wy(t)==rgt}var igt="[object Number]";function Jc(t){return typeof t=="number"||Tl(t)&&Wy(t)==igt}function agt(t){return t==null}function ogt(t,n){return n=Vy(n,t),t=ngt(t,n),t==null||delete t[$D(xH(n))]}function sgt(t){return C$(t)?void 0:t}var lgt=1,cgt=2,ugt=4,fgt=qO(function(t,n){var e={};if(t==null)return e;var r=!1;n=J2(n,function(a){return a=Vy(a,t),r||(r=a.length>1),a}),Bu(t,_$(t),e),r&&(e=Uf(e,lgt|cgt|ugt,sgt));for(var i=n.length;i--;)ogt(e,n[i]);return e});const JO=fgt;function N$(t,n,e,r){if(!Fc(t))return t;n=Vy(n,t);for(var i=-1,a=n.length,o=a-1,s=t;s!=null&&++i<a;){var l=$D(n[i]),c=e;if(l==="__proto__"||l==="constructor"||l==="prototype")return t;if(i!=o){var u=s[l];c=r?r(u,l,s):void 0,c===void 0&&(c=Fc(u)?u:bH(n[i+1])?[]:{})}Q0(s,l,c),s=s[l]}return t}function hgt(t,n,e){for(var r=-1,i=n.length,a={};++r<i;){var o=n[r],s=ND(t,o);e(s,o)&&N$(a,Vy(o,t),s)}return a}function dgt(t,n){return hgt(t,n,function(e,r){return wH(t,r)})}var pgt=qO(function(t,n){return t==null?{}:dgt(t,n)});const J0=pgt;function Tt(t,n,e){return t==null?t:N$(t,n,e)}var qf=`	
\v\f\r   ᠎             　\u2028\u2029`,vgt=new RegExp("([a-z])["+qf+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+qf+"]*,?["+qf+"]*)+)","ig"),ggt=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+qf+"]*,?["+qf+"]*","ig");function ygt(t){if(!t)return null;if(Un(t))return t;var n={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},e=[];return String(t).replace(vgt,function(r,i,a){var o=[],s=i.toLowerCase();if(a.replace(ggt,function(l,c){c&&o.push(+c)}),s==="m"&&o.length>2&&(e.push([i].concat(o.splice(0,2))),s="l",i=i==="m"?"l":"L"),s==="o"&&o.length===1&&e.push([i,o[0]]),s==="r")e.push([i].concat(o));else for(;o.length>=n[s]&&(e.push([i].concat(o.splice(0,n[s]))),!!n[s]););return""}),e}function mgt(t){return U({},t.defaultStyle,{fill:t.color},t.style)}Xt("schema","venn",{draw:function(t,n){var e=t.data,r=ygt(e[sw]),i=mgt(t),a=n.addGroup({name:"venn-shape"});a.addShape("path",{attrs:E(E({},i),{path:r}),name:"venn-path"});var o=t.customInfo,s=o.offsetX,l=o.offsetY,c=Ar.transform(null,[["t",s,l]]);return a.setMatrix(c),a},getMarker:function(t){var n=t.color;return{symbol:"circle",style:{lineWidth:0,stroke:n,fill:n,r:4}}}});var xgt=function(t){return function(n,e){var r=[];return r[0]=t(n[0],e[0]),r[1]=t(n[1],e[1]),r[2]=t(n[2],e[2]),r}},Ck={normal:function(t){return t},multiply:function(t,n){return t*n/255},screen:function(t,n){return 255*(1-(1-t/255)*(1-n/255))},overlay:function(t,n){return n<128?2*t*n/255:255*(1-2*(1-t/255)*(1-n/255))},darken:function(t,n){return t>n?n:t},lighten:function(t,n){return t>n?t:n},dodge:function(t,n){return t===255?255:(t=255*(n/255)/(1-t/255),t>255?255:t)},burn:function(t,n){return n===255?255:t===0?0:255*(1-Math.min(1,(1-n/255)/(t/255)))}},bgt=function(t){if(!Ck[t])throw new Error("unknown blend mode "+t);return Ck[t]};function wgt(t,n,e){e===void 0&&(e="normal");var r=xgt(bgt(e))(Gp(t),Gp(n)),i=Gp(t),a=i[0],o=i[1],s=i[2],l=i[3],c=Gp(n),u=c[0],f=c[1],h=c[2],d=c[3],p=Number((l+d*(1-l)).toFixed(2)),v=Math.round((l*(1-d)*(a/255)+l*d*(r[0]/255)+(1-l)*d*(u/255))/p*255),g=Math.round((l*(1-d)*(o/255)+l*d*(r[1]/255)+(1-l)*d*(f/255))/p*255),y=Math.round((l*(1-d)*(s/255)+l*d*(r[2]/255)+(1-l)*d*(h/255))/p*255);return"rgba(".concat(v,", ").concat(g,", ").concat(y,", ").concat(p,")")}function Gp(t){var n=t.replace("/s+/g",""),e;return typeof n=="string"&&!n.startsWith("rgba")&&!n.startsWith("#")?e=No.rgb2arr(No.toRGB(n)).concat([1]):(n.startsWith("rgba")&&(e=n.replace("rgba(","").replace(")","").split(",")),n.startsWith("#")&&(e=No.rgb2arr(n).concat([1])),e.map(function(r,i){return i===3?Number(r):r|0}))}function $$(t,n,e,r){r=r||{};var i=r.maxIterations||100,a=r.tolerance||1e-10,o=t(n),s=t(e),l=e-n;if(o*s>0)throw"Initial bisect points must have opposite signs";if(o===0)return n;if(s===0)return e;for(var c=0;c<i;++c){l/=2;var u=n+l,f=t(u);if(f*o>=0&&(n=u),Math.abs(l)<a||f===0)return u}return n+l}function Rg(t){for(var n=new Array(t),e=0;e<t;++e)n[e]=0;return n}function Bg(t,n){return Rg(t).map(function(){return Rg(n)})}function Tc(t,n){for(var e=0,r=0;r<t.length;++r)e+=t[r]*n[r];return e}function Dh(t){return Math.sqrt(Tc(t,t))}function Ng(t,n,e){for(var r=0;r<n.length;++r)t[r]=n[r]*e}function Ia(t,n,e,r,i){for(var a=0;a<t.length;++a)t[a]=n*e[a]+r*i[a]}function tM(t,n,e){e=e||{};var r=e.maxIterations||n.length*200,i=e.nonZeroDelta||1.05,a=e.zeroDelta||.001,o=e.minErrorDelta||1e-6,s=e.minErrorDelta||1e-5,l=e.rho!==void 0?e.rho:1,c=e.chi!==void 0?e.chi:2,u=e.psi!==void 0?e.psi:-.5,f=e.sigma!==void 0?e.sigma:.5,h,d=n.length,p=new Array(d+1);p[0]=n,p[0].fx=t(n),p[0].id=0;for(var v=0;v<d;++v){var g=n.slice();g[v]=g[v]?g[v]*i:a,p[v+1]=g,p[v+1].fx=t(g),p[v+1].id=v+1}function y(P){for(var _=0;_<P.length;_++)p[d][_]=P[_];p[d].fx=P.fx}for(var m=function(P,_){return P.fx-_.fx},x=n.slice(),b=n.slice(),w=n.slice(),S=n.slice(),O=0;O<r;++O){if(p.sort(m),e.history){var M=p.map(function(P){var _=P.slice();return _.fx=P.fx,_.id=P.id,_});M.sort(function(P,_){return P.id-_.id}),e.history.push({x:p[0].slice(),fx:p[0].fx,simplex:M})}for(h=0,v=0;v<d;++v)h=Math.max(h,Math.abs(p[0][v]-p[1][v]));if(Math.abs(p[0].fx-p[d].fx)<o&&h<s)break;for(v=0;v<d;++v){x[v]=0;for(var A=0;A<d;++A)x[v]+=p[A][v];x[v]/=d}var T=p[d];if(Ia(b,1+l,x,-l,T),b.fx=t(b),b.fx<p[0].fx)Ia(S,1+c,x,-c,T),S.fx=t(S),S.fx<b.fx?y(S):y(b);else if(b.fx>=p[d-1].fx){var C=!1;if(b.fx>T.fx?(Ia(w,1+u,x,-u,T),w.fx=t(w),w.fx<T.fx?y(w):C=!0):(Ia(w,1-u*l,x,u*l,T),w.fx=t(w),w.fx<b.fx?y(w):C=!0),C){if(f>=1)break;for(v=1;v<p.length;++v)Ia(p[v],1-f,p[0],f,p[v]),p[v].fx=t(p[v])}}else y(b)}return p.sort(m),{fx:p[0].fx,x:p[0]}}function Sgt(t,n,e,r,i,a,o){var s=e.fx,l=Tc(e.fxprime,n),c=s,u=s,f=l,h=0;i=i||1,a=a||1e-6,o=o||.1;function d(v,g,y){for(var m=0;m<16;++m)if(i=(v+g)/2,Ia(r.x,1,e.x,i,n),c=r.fx=t(r.x,r.fxprime),f=Tc(r.fxprime,n),c>s+a*i*l||c>=y)g=i;else{if(Math.abs(f)<=-o*l)return i;f*(g-v)>=0&&(g=v),v=i,y=c}return 0}for(var p=0;p<10;++p){if(Ia(r.x,1,e.x,i,n),c=r.fx=t(r.x,r.fxprime),f=Tc(r.fxprime,n),c>s+a*i*l||p&&c>=u)return d(h,i,u);if(Math.abs(f)<=-o*l)return i;if(f>=0)return d(i,h,c);u=c,h=i,i*=2}return i}function j$(t,n,e){var r={x:n.slice(),fx:0,fxprime:n.slice()},i={x:n.slice(),fx:0,fxprime:n.slice()},a=n.slice(),o,s,l=1,c;e=e||{},c=e.maxIterations||n.length*20,r.fx=t(r.x,r.fxprime),o=r.fxprime.slice(),Ng(o,r.fxprime,-1);for(var u=0;u<c;++u){if(l=Sgt(t,o,r,i,l),e.history&&e.history.push({x:r.x.slice(),fx:r.fx,fxprime:r.fxprime.slice(),alpha:l}),!l)Ng(o,r.fxprime,-1);else{Ia(a,1,i.fxprime,-1,r.fxprime);var f=Tc(r.fxprime,r.fxprime),h=Math.max(0,Tc(a,i.fxprime)/f);Ia(o,h,o,-1,i.fxprime),s=r,r=i,i=s}if(Dh(r.fxprime)<=1e-5)break}return e.history&&e.history.push({x:r.x.slice(),fx:r.fx,fxprime:r.fxprime.slice(),alpha:l}),r}var z$=1e-10;function eM(t,n){var e=Mgt(t),r=e.filter(function(O){return Ogt(O,t)}),i=0,a=0,o,s=[];if(r.length>1){var l=W$(r);for(o=0;o<r.length;++o){var c=r[o];c.angle=Math.atan2(c.x-l.x,c.y-l.y)}r.sort(function(O,M){return M.angle-O.angle});var u=r[r.length-1];for(o=0;o<r.length;++o){var f=r[o];a+=(u.x+f.x)*(f.y-u.y);for(var h={x:(f.x+u.x)/2,y:(f.y+u.y)/2},d=null,p=0;p<f.parentIndex.length;++p)if(u.parentIndex.indexOf(f.parentIndex[p])>-1){var v=t[f.parentIndex[p]],g=Math.atan2(f.x-v.x,f.y-v.y),y=Math.atan2(u.x-v.x,u.y-v.y),m=y-g;m<0&&(m+=2*Math.PI);var x=y-m/2,b=Ii(h,{x:v.x+v.radius*Math.sin(x),y:v.y+v.radius*Math.cos(x)});b>v.radius*2&&(b=v.radius*2),(d===null||d.width>b)&&(d={circle:v,width:b,p1:f,p2:u})}d!==null&&(s.push(d),i+=lw(d.circle.radius,d.width),u=f)}}else{var w=t[0];for(o=1;o<t.length;++o)t[o].radius<w.radius&&(w=t[o]);var S=!1;for(o=0;o<t.length;++o)if(Ii(t[o],w)>Math.abs(w.radius-t[o].radius)){S=!0;break}S?i=a=0:(i=w.radius*w.radius*Math.PI,s.push({circle:w,p1:{x:w.x,y:w.y+w.radius},p2:{x:w.x-z$,y:w.y+w.radius},width:w.radius*2}))}return a/=2,n&&(n.area=i+a,n.arcArea=i,n.polygonArea=a,n.arcs=s,n.innerPoints=r,n.intersectionPoints=e),i+a}function Ogt(t,n){for(var e=0;e<n.length;++e)if(Ii(t,n[e])>n[e].radius+z$)return!1;return!0}function Mgt(t){for(var n=[],e=0;e<t.length;++e)for(var r=e+1;r<t.length;++r)for(var i=Y$(t[e],t[r]),a=0;a<i.length;++a){var o=i[a];o.parentIndex=[e,r],n.push(o)}return n}function lw(t,n){return t*t*Math.acos(1-n/t)-(t-n)*Math.sqrt(n*(2*t-n))}function Ii(t,n){return Math.sqrt((t.x-n.x)*(t.x-n.x)+(t.y-n.y)*(t.y-n.y))}function G$(t,n,e){if(e>=t+n)return 0;if(e<=Math.abs(t-n))return Math.PI*Math.min(t,n)*Math.min(t,n);var r=t-(e*e-n*n+t*t)/(2*e),i=n-(e*e-t*t+n*n)/(2*e);return lw(t,r)+lw(n,i)}function Y$(t,n){var e=Ii(t,n),r=t.radius,i=n.radius;if(e>=r+i||e<=Math.abs(r-i))return[];var a=(r*r-i*i+e*e)/(2*e),o=Math.sqrt(r*r-a*a),s=t.x+a*(n.x-t.x)/e,l=t.y+a*(n.y-t.y)/e,c=-(n.y-t.y)*(o/e),u=-(n.x-t.x)*(o/e);return[{x:s+c,y:l-u},{x:s-c,y:l+u}]}function W$(t){for(var n={x:0,y:0},e=0;e<t.length;++e)n.x+=t[e].x,n.y+=t[e].y;return n.x/=t.length,n.y/=t.length,n}function Z1(t,n,e){var r=n[0].radius-Ii(n[0],t),i,a;for(i=1;i<n.length;++i)a=n[i].radius-Ii(n[i],t),a<=r&&(r=a);for(i=0;i<e.length;++i)a=Ii(e[i],t)-e[i].radius,a<=r&&(r=a);return r}function V$(t,n){var e=[],r;for(r=0;r<t.length;++r){var i=t[r];e.push({x:i.x,y:i.y}),e.push({x:i.x+i.radius/2,y:i.y}),e.push({x:i.x-i.radius/2,y:i.y}),e.push({x:i.x,y:i.y+i.radius/2}),e.push({x:i.x,y:i.y-i.radius/2})}var a=e[0],o=Z1(e[0],t,n);for(r=1;r<e.length;++r){var s=Z1(e[r],t,n);s>=o&&(a=e[r],o=s)}var l=tM(function(h){return-1*Z1({x:h[0],y:h[1]},t,n)},[a.x,a.y],{maxIterations:500,minErrorDelta:1e-10}).x,c={x:l[0],y:l[1]},u=!0;for(r=0;r<t.length;++r)if(Ii(c,t[r])>t[r].radius){u=!1;break}for(r=0;r<n.length;++r)if(Ii(c,n[r])<n[r].radius){u=!1;break}if(!u)if(t.length==1)c={x:t[0].x,y:t[0].y};else{var f={};eM(t,f),f.arcs.length===0?c={x:0,y:-1e3,disjoint:!0}:f.arcs.length==1?c={x:f.arcs[0].circle.x,y:f.arcs[0].circle.y}:n.length?c=V$(t,[]):c=W$(f.arcs.map(function(h){return h.p1}))}return c}function Agt(t){var n={},e=[];for(var r in t)e.push(r),n[r]=[];for(var i=0;i<e.length;i++)for(var a=t[e[i]],o=i+1;o<e.length;++o){var s=t[e[o]],l=Ii(a,s);l+s.radius<=a.radius+1e-10?n[e[o]].push(e[i]):l+a.radius<=s.radius+1e-10&&n[e[i]].push(e[o])}return n}function Egt(t,n){for(var e={},r=Agt(t),i=0;i<n.length;++i){for(var a=n[i].sets,o={},s={},l=0;l<a.length;++l){o[a[l]]=!0;for(var c=r[a[l]],u=0;u<c.length;++u)s[c[u]]=!0}var f=[],h=[];for(var d in t)d in o?f.push(t[d]):d in s||h.push(t[d]);var p=V$(f,h);e[a]=p,p.disjoint&&n[i].size>0&&console.log("WARNING: area "+a+" not represented on screen")}return e}function Tgt(t,n,e){var r=[],i=t-e,a=n;return r.push("M",i,a),r.push("A",e,e,0,1,0,i+2*e,a),r.push("A",e,e,0,1,0,i,a),r.join(" ")}function Cgt(t){var n={};eM(t,n);var e=n.arcs;if(e.length===0)return"M 0 0";if(e.length==1){var r=e[0].circle;return Tgt(r.x,r.y,r.radius)}else{for(var i=[`
M`,e[0].p2.x,e[0].p2.y],a=0;a<e.length;++a){var o=e[a],s=o.circle.radius,l=o.width>s;i.push(`
A`,s,s,0,l?1:0,1,o.p1.x,o.p1.y)}return i.join(" ")}}function Pgt(t,n){n=n||{},n.maxIterations=n.maxIterations||500;var e=n.initialLayout||Igt,r=n.lossFunction||nM;t=kgt(t);var i=e(t,n),a=[],o=[],s;for(s in i)i.hasOwnProperty(s)&&(a.push(i[s].x),a.push(i[s].y),o.push(s));for(var l=tM(function(f){for(var h={},d=0;d<o.length;++d){var p=o[d];h[p]={x:f[2*d],y:f[2*d+1],radius:i[p].radius}}return r(h,t)},a,n),c=l.x,u=0;u<o.length;++u)s=o[u],i[s].x=c[2*u],i[s].y=c[2*u+1];return i}var H$=1e-10;function cw(t,n,e){return Math.min(t,n)*Math.min(t,n)*Math.PI<=e+H$?Math.abs(t-n):$$(function(r){return G$(t,n,r)-e},0,t+n)}function kgt(t){t=t.slice();var n=[],e={},r,i,a,o;for(r=0;r<t.length;++r){var s=t[r];s.sets.length==1?n.push(s.sets[0]):s.sets.length==2&&(a=s.sets[0],o=s.sets[1],e[[a,o]]=!0,e[[o,a]]=!0)}for(n.sort(function(l,c){return l>c?1:-1}),r=0;r<n.length;++r)for(a=n[r],i=r+1;i<n.length;++i)o=n[i],[a,o]in e||t.push({sets:[a,o],size:0});return t}function _gt(t,n,e){var r=Bg(n.length,n.length),i=Bg(n.length,n.length);return t.filter(function(a){return a.sets.length==2}).map(function(a){var o=e[a.sets[0]],s=e[a.sets[1]],l=Math.sqrt(n[o].size/Math.PI),c=Math.sqrt(n[s].size/Math.PI),u=cw(l,c,a.size);r[o][s]=r[s][o]=u;var f=0;a.size+1e-10>=Math.min(n[o].size,n[s].size)?f=1:a.size<=1e-10&&(f=-1),i[o][s]=i[s][o]=f}),{distances:r,constraints:i}}function Lgt(t,n,e,r){var i=0,a;for(a=0;a<n.length;++a)n[a]=0;for(a=0;a<e.length;++a)for(var o=t[2*a],s=t[2*a+1],l=a+1;l<e.length;++l){var c=t[2*l],u=t[2*l+1],f=e[a][l],h=r[a][l],d=(c-o)*(c-o)+(u-s)*(u-s),p=Math.sqrt(d),v=d-f*f;h>0&&p<=f||h<0&&p>=f||(i+=2*v*v,n[2*a]+=4*v*(o-c),n[2*a+1]+=4*v*(s-u),n[2*l]+=4*v*(c-o),n[2*l+1]+=4*v*(u-s))}return i}function Igt(t,n){var e=Dgt(t,n),r=n.lossFunction||nM;if(t.length>=8){var i=Fgt(t,n),a=r(i,t),o=r(e,t);a+1e-8<o&&(e=i)}return e}function Fgt(t,n){n=n||{};var e=n.restarts||10,r=[],i={},a;for(a=0;a<t.length;++a){var o=t[a];o.sets.length==1&&(i[o.sets[0]]=r.length,r.push(o))}var s=_gt(t,r,i),l=s.distances,c=s.constraints,u=Dh(l.map(Dh))/l.length;l=l.map(function(m){return m.map(function(x){return x/u})});var f=function(m,x){return Lgt(m,x,l,c)},h,d;for(a=0;a<e;++a){var p=Rg(l.length*2).map(Math.random);d=j$(f,p,n),(!h||d.fx<h.fx)&&(h=d)}var v=h.x,g={};for(a=0;a<r.length;++a){var y=r[a];g[y.sets[0]]={x:v[2*a]*u,y:v[2*a+1]*u,radius:Math.sqrt(y.size/Math.PI)}}if(n.history)for(a=0;a<n.history.length;++a)Ng(n.history[a].x,u);return g}function Dgt(t,n){for(var e=n&&n.lossFunction?n.lossFunction:nM,r={},i={},a,o=0;o<t.length;++o){var s=t[o];s.sets.length==1&&(a=s.sets[0],r[a]={x:1e10,y:1e10,rowid:Object.keys(r).length,size:s.size,radius:Math.sqrt(s.size/Math.PI)},i[a]=[])}t=t.filter(function(L){return L.sets.length==2});for(var o=0;o<t.length;++o){var l=t[o],c=l.hasOwnProperty("weight")?l.weight:1,u=l.sets[0],f=l.sets[1];l.size+H$>=Math.min(r[u].size,r[f].size)&&(c=0),i[u].push({set:f,size:l.size,weight:c}),i[f].push({set:u,size:l.size,weight:c})}var h=[];for(a in i)if(i.hasOwnProperty(a)){for(var d=0,o=0;o<i[a].length;++o)d+=i[a][o].size*i[a][o].weight;h.push({set:a,size:d})}function p(L,F){return F.size-L.size}h.sort(p);var v={};function g(L){return L.set in v}function y(L,F){r[F].x=L.x,r[F].y=L.y,v[F]=!0}y({x:0,y:0},h[0].set);for(var o=1;o<h.length;++o){var m=h[o].set,x=i[m].filter(g);if(a=r[m],x.sort(p),x.length===0)throw"ERROR: missing pairwise overlap information";for(var b=[],w=0;w<x.length;++w){var S=r[x[w].set],O=cw(a.radius,S.radius,x[w].size);b.push({x:S.x+O,y:S.y}),b.push({x:S.x-O,y:S.y}),b.push({y:S.y+O,x:S.x}),b.push({y:S.y-O,x:S.x});for(var M=w+1;M<x.length;++M)for(var A=r[x[M].set],T=cw(a.radius,A.radius,x[M].size),C=Y$({x:S.x,y:S.y,radius:O},{x:A.x,y:A.y,radius:T}),P=0;P<C.length;++P)b.push(C[P])}for(var _=1e50,k=b[0],w=0;w<b.length;++w){r[m].x=b[w].x,r[m].y=b[w].y;var I=e(r,t);I<_&&(_=I,k=b[w])}y(k,m)}return r}function nM(t,n){var e=0;function r(u){return u.map(function(f){return t[f]})}for(var i=0;i<n.length;++i){var a=n[i],o=void 0;if(a.sets.length!=1){if(a.sets.length==2){var s=t[a.sets[0]],l=t[a.sets[1]];o=G$(s.radius,l.radius,Ii(s,l))}else o=eM(r(a.sets));var c=a.hasOwnProperty("weight")?a.weight:1;e+=c*(o-a.size)*(o-a.size)}}return e}function Rgt(t){var n=function(e){var r=Math.max.apply(null,t.map(function(a){return a[e]+a.radius})),i=Math.min.apply(null,t.map(function(a){return a[e]-a.radius}));return{max:r,min:i}};return{xRange:n("x"),yRange:n("y")}}function Bgt(t,n,e,r){var i=[],a=[];for(var o in t)t.hasOwnProperty(o)&&(a.push(o),i.push(t[o]));n-=2*r,e-=2*r;var s=Rgt(i),l=s.xRange,c=s.yRange;if(l.max==l.min||c.max==c.min)return console.log("not scaling solution: zero size detected"),t;for(var u=n/(l.max-l.min),f=e/(c.max-c.min),h=Math.min(f,u),d=(n-(l.max-l.min)*h)/2,p=(e-(c.max-c.min)*h)/2,v={},g=0;g<i.length;++g){var y=i[g];v[a[g]]={radius:h*y.radius,x:r+d+(y.x-l.min)*h,y:r+p+(y.y-c.min)*h}}return v}var Ngt=Mu(function(t,n,e,r){var i=new Map,a=t.length;return n.forEach(function(o,s){if(o[r].length===1)i.set(o[Ya],t[(s+a)%a]);else{var l=o[r].map(function(c){return i.get(c)});i.set(o[Ya],l.slice(1).reduce(function(c,u){return wgt(c,u,e)},l[0]))}}),i},function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return JSON.stringify(t)});function $gt(t,n,e,r){r===void 0&&(r=0);var i=t.data,a=t.setsField,o=t.sizeField;if(i.length===0)return Ja(ji.WARN,!1,"warn: %s","数据不能为空"),[];var s=i.map(function(f){var h;return E(E({},f),(h={sets:f[a]||[],size:f[o]},h[sw]="",h[Ya]="",h))});s.sort(function(f,h){return f.sets.length-h.sets.length});var l=Pgt(s),c=Bgt(l,n,e,r),u=Egt(c,s);return s.forEach(function(f){var h=f.sets,d=h.join(",");f[Ya]=d;var p=h.map(function(y){return c[y]}),v=Cgt(p);/[zZ]$/.test(v)||(v+=" Z"),f[sw]=v;var g=u[d]||{x:0,y:0};Jt(f,g)}),s}function jgt(t,n){for(var e=0;e<n.length;e++)if(!t.includes(n[e]))return!1;return!0}var zgt=40;function X$(t,n,e){var r=t.chart,i=t.options,a=i.blendMode,o=i.setsField,s=r.getTheme(),l=s.colors10,c=s.colors20,u=e;et(u)||(u=n.filter(function(h){return h[o].length===1}).length<=10?l:c);var f=Ngt(u,n,a,o);return function(h){return f.get(h)||u[0]}}function Ggt(t,n){var e=t.options,r=e.color;if(typeof r!="function"){var i=typeof r=="string"?[r]:r,a=X$(t,n,i);return function(o){return a(o[Ya])}}return r}function Ygt(t){var n=t.chart,e=t.options,r=e.legend,i=e.appendPadding,a=e.padding,o=Zo(i);return r!==!1&&(o=R0(i,z(r,"position"),zgt)),n.appendPadding=OO([o,a]),t}function Wgt(t){var n=t.options,e=n.data;e||(Ja(ji.WARN,!1,"warn: %s","数据不能为空"),e=[]);var r=e.filter(function(a){return a.sets.length===1}).map(function(a){return a.sets[0]}),i=e.filter(function(a){var o=a.sets;return jgt(r,o)});return Ne(i,e)||Ja(ji.WARN,!1,"warn: %s","交集中不能出现不存在的集合, 请输入合法数据"),ot({},t,{options:{data:i}})}function Vgt(t){var n=t.chart,e=t.options,r=e.pointStyle,i=e.setsField,a=e.sizeField,o=Zo(n.appendPadding),s=o[0],l=o[1],c=o[2],u=o[3],f={offsetX:u,offsetY:s},h=n.viewBBox,d=h.width,p=h.height,v=$gt(e,Math.max(d-(l+u),0),Math.max(p-(s+c),0),0);n.data(v);var g=CO(U({},t,{options:{xField:"x",yField:"y",sizeField:a,seriesField:Ya,rawFields:[i,a],schema:{shape:"venn",style:r}}})).ext,y=g.geometry;y.customInfo(f);var m=Ggt(t,v);return typeof m=="function"&&y.color(Ya,function(x){var b=v.find(function(S){return S[Ya]===x}),w=X$(t,v)(x);return m(b,w)}),t}function Hgt(t){var n=t.chart,e=t.options,r=e.label,i=Zo(n.appendPadding),a=i[0],o=i[3],s={offsetX:o,offsetY:a},l=Bn(n,"schema");if(!r)l.label(!1);else{var c=r.callback,u=vt(r,["callback"]);l.label({fields:["id"],callback:c,cfg:ot({},xn(u),{type:"venn",customLabelInfo:s})})}return t}function Xgt(t){var n=t.chart,e=t.options,r=e.legend,i=e.sizeField;return n.legend(Ya,r),n.legend(i,!1),t}function Ugt(t){var n=t.chart;return n.axis(!1),t}function qgt(t){var n=t.options,e=t.chart,r=n.interactions;if(r){var i={"legend-active":"venn-legend-active","legend-highlight":"venn-legend-highlight"};Ee(U({},t,{options:{interactions:r.map(function(a){return E(E({},a),{type:i[a.type]||a.type})})}}))}return e.removeInteraction("legend-active"),e.removeInteraction("legend-highlight"),t}function Zgt(t){return xt(Ygt,Yt,Wgt,Vgt,Hgt,Ye({}),Xgt,Ugt,pn,qgt,te)(t)}(function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="venn",e}return n.getDefaultOptions=function(){return xdt},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return Zgt},n.prototype.triggerResize=function(){this.chart.destroyed||(this.chart.forceFit(),this.chart.clear(),this.execAdaptor(),this.chart.render(!0))},n})(Mt);var oi="x",Gs="violinY",Kgt="violinSize",U$="minMax",q$="quantile",Z$="median",rM="violin_view",Qgt="min_max_view",Jgt="quantile_view",tyt="median_view",eyt=U({},Mt.getDefaultOptions(),{syncViewPadding:!0,kde:{type:"triangular",sampleSize:32,width:3},violinStyle:{lineWidth:1,fillOpacity:.3,strokeOpacity:.75},xAxis:{grid:{line:null},tickLine:{alignTick:!1}},yAxis:{grid:{line:{style:{lineWidth:.5,lineDash:[4,4]}}}},legend:{position:"top-left"},tooltip:{showMarkers:!1}}),K$={exports:{}},Q$={exports:{}};(function(t){var n=t.exports;t.exports.isNumber=function(e){return typeof e=="number"},t.exports.findMin=function(e){if(e.length===0)return 1/0;for(var r=e[0],i=1;i<e.length;i++)r=Math.min(r,e[i]);return r},t.exports.findMax=function(e){if(e.length===0)return-1/0;for(var r=e[0],i=1;i<e.length;i++)r=Math.max(r,e[i]);return r},t.exports.findMinMulti=function(e){for(var r=n.findMin(e[0]),i=1;i<e.length;i++)r=Math.min(r,n.findMin(e[i]));return r},t.exports.findMaxMulti=function(e){for(var r=n.findMax(e[0]),i=1;i<e.length;i++)r=Math.max(r,n.findMax(e[i]));return r},t.exports.inside=function(e,r,i){return e<=i&&i<=r}})(Q$);var nyt=Q$.exports;(function(t){var n=50,e=2,r=Math.log(2),i=t.exports,a=nyt;function o(l){return 1-Math.abs(l)}t.exports.getUnifiedMinMax=function(l,c){return i.getUnifiedMinMaxMulti([l],c)},t.exports.getUnifiedMinMaxMulti=function(l,c){c=c||{};var u=!1,f=!1,h=a.isNumber(c.width)?c.width:e,d=a.isNumber(c.size)?c.size:n,p=a.isNumber(c.min)?c.min:(u=!0,a.findMinMulti(l)),v=a.isNumber(c.max)?c.max:(f=!0,a.findMaxMulti(l)),g=v-p,y=g/(d-1);return u&&(p=p-2*h*y),f&&(v=v+2*h*y),{min:p,max:v}},t.exports.create=function(l,c){if(c=c||{},!l||l.length===0)return[];var u=a.isNumber(c.size)?c.size:n,f=a.isNumber(c.width)?c.width:e,h=i.getUnifiedMinMax(l,{size:u,width:f,min:c.min,max:c.max}),d=h.min,p=h.max,v=p-d,g=v/(u-1);if(v===0)return[{x:d,y:1}];for(var y=[],m=0;m<u;m++)y.push({x:d+m*g,y:0});var x=function(C){return Math.floor((C-d)/g)},b=s(o,f),w=b[f],S=b[f-1]-b[f-2],O=0;l.forEach(function(C){var P=x(C);if(!(P+f<0||P-f>=y.length)){var _=Math.max(P-f,0),k=P,I=Math.min(P+f,y.length-1),L=_-(P-f),F=P+f-I,B=b[-f-1+L]||0,D=b[-f-1+F]||0,N=w/(w-B-D);L>0&&(O+=N*(L-1)*S);var j=Math.max(0,P-f+1);a.inside(0,y.length-1,j)&&(y[j].y+=N*1*S),a.inside(0,y.length-1,k+1)&&(y[k+1].y-=N*2*S),a.inside(0,y.length-1,I+1)&&(y[I+1].y+=N*1*S)}});var M=O,A=0,T=0;return y.forEach(function(C){A+=C.y,M+=A,C.y=M,T+=M}),T>0&&y.forEach(function(C){C.y/=T}),y};function s(l,c){for(var u={},f=0,h=-c;h<=c;h++)f+=l(h/c),u[h]=f;return u}t.exports.getExpectedValueFromPdf=function(l){if(!(!l||l.length===0)){var c=0;return l.forEach(function(u){c+=u.x*u.y}),c}},t.exports.getXWithLeftTailArea=function(l,c){if(!(!l||l.length===0)){for(var u=0,f=0,h=0;h<l.length&&(f=h,u+=l[h].y,!(u>=c));h++);return l[f].x}},t.exports.getPerplexity=function(l){if(!(!l||l.length===0)){var c=0;return l.forEach(function(u){var f=Math.log(u.y);isFinite(f)&&(c+=u.y*f)}),c=-c/r,Math.pow(2,c)}}})(K$);var ryt=K$.exports;const J$=tS(ryt);function Pk(t,n){var e=t.length*n;if(t.length===0)throw new Error("quantile requires at least one data point.");if(n<0||n>1)throw new Error("quantiles must be between 0 and 1");return n===1?t[t.length-1]:n===0?t[0]:e%1!==0?t[Math.ceil(e)-1]:t.length%2===0?(t[e-1]+t[e])/2:t[e]}function rf(t,n,e){var r=t[n];t[n]=t[e],t[e]=r}function zv(t,n,e,r){for(e=e||0,r=r||t.length-1;r>e;){if(r-e>600){var i=r-e+1,a=n-e+1,o=Math.log(i),s=.5*Math.exp(2*o/3),l=.5*Math.sqrt(o*s*(i-s)/i);a-i/2<0&&(l*=-1);var c=Math.max(e,Math.floor(n-a*s/i+l)),u=Math.min(r,Math.floor(n+(i-a)*s/i+l));zv(t,n,c,u)}var f=t[n],h=e,d=r;for(rf(t,e,n),t[r]>f&&rf(t,e,r);h<d;){for(rf(t,h,d),h++,d--;t[h]<f;)h++;for(;t[d]>f;)d--}t[e]===f?rf(t,e,d):(d++,rf(t,d,r)),d<=n&&(e=d+1),n<=d&&(r=d-1)}}function af(t,n){var e=t.slice();if(Array.isArray(n)){iyt(e,n);for(var r=[],i=0;i<n.length;i++)r[i]=Pk(e,n[i]);return r}else{var a=e4(e.length,n);return t4(e,a,0,e.length-1),Pk(e,n)}}function t4(t,n,e,r){n%1===0?zv(t,n,e,r):(n=Math.floor(n),zv(t,n,e,r),zv(t,n+1,n+1,r))}function iyt(t,n){for(var e=[0],r=0;r<n.length;r++)e.push(e4(t.length,n[r]));e.push(t.length-1),e.sort(ayt);for(var i=[0,e.length-1];i.length;){var a=Math.ceil(i.pop()),o=Math.floor(i.pop());if(!(a-o<=1)){var s=Math.floor((o+a)/2);t4(t,e[s],Math.floor(e[o]),Math.ceil(e[a])),i.push(o,s,s,a)}}}function ayt(t,n){return t-n}function e4(t,n){var e=t*n;return n===1?t-1:n===0?0:e%1!==0?Math.ceil(e)-1:t%2===0?e-.5:e}var kk=function(t){return{low:hi(t),high:Vr(t),q1:af(t,.25),q3:af(t,.75),median:af(t,[.5]),minMax:[hi(t),Vr(t)],quantile:[af(t,.25),af(t,.75)]}},_k=function(t,n){var e=J$.create(t,n);return{violinSize:e.map(function(r){return r.y}),violinY:e.map(function(r){return r.x})}},n4=function(t){var n=t.xField,e=t.yField,r=t.seriesField,i=t.data,a=t.kde,o={min:a.min,max:a.max,size:a.sampleSize,width:a.width};if(!r){var s=Gr(i,n);return Object.keys(s).map(function(u){var f=s[u],h=f.map(function(d){return d[e]});return E(E({x:u},_k(h,o)),kk(h))})}var l=[],c=Gr(i,r);return Object.keys(c).forEach(function(u){var f=Gr(c[u],n);return Object.keys(f).forEach(function(h){var d,p=f[h],v=p.map(function(g){return g[e]});l.push(E(E((d={x:h},d[r]=u,d),_k(v,o)),kk(v)))})}),l},Gv=["low","high","q1","q3","median"],Yv=[{type:"dodge",marginRatio:1/32}];function oyt(t){var n=t.chart,e=t.options;return n.data(n4(e)),t}function syt(t){var n=t.chart,e=t.options,r=e.seriesField,i=e.color,a=e.shape,o=a===void 0?"violin":a,s=e.violinStyle,l=e.tooltip,c=e.state,u=n.createView({id:rM});return Zat({chart:u,options:{xField:oi,yField:Gs,seriesField:r||oi,sizeField:Kgt,tooltip:E({fields:Gv},l),violin:{style:s,color:i,shape:o},state:c}}),u.geometries[0].adjust(Yv),t}function lyt(t){var n=t.chart,e=t.options,r=e.seriesField,i=e.color,a=e.tooltip,o=e.box;if(o===!1)return t;var s=n.createView({id:Qgt});Nn({chart:s,options:{xField:oi,yField:U$,seriesField:r||oi,tooltip:E({fields:Gv},a),state:typeof o=="object"?o.state:{},interval:{color:i,size:1,style:{lineWidth:0}}}}),s.geometries[0].adjust(Yv);var l=n.createView({id:Jgt});Nn({chart:l,options:{xField:oi,yField:q$,seriesField:r||oi,tooltip:E({fields:Gv},a),state:typeof o=="object"?o.state:{},interval:{color:i,size:8,style:{fillOpacity:1}}}}),l.geometries[0].adjust(Yv);var c=n.createView({id:tyt});return Zr({chart:c,options:{xField:oi,yField:Z$,seriesField:r||oi,tooltip:E({fields:Gv},a),state:typeof o=="object"?o.state:{},point:{color:i,size:1,style:{fill:"white",lineWidth:0}}}}),c.geometries[0].adjust(Yv),l.axis(!1),s.axis(!1),c.axis(!1),c.legend(!1),s.legend(!1),l.legend(!1),t}function cyt(t){var n,e=t.chart,r=t.options,i=r.meta,a=r.xAxis,o=r.yAxis,s={},l=U(s,i,(n={},n[oi]=E(E({sync:!0},Kt(a,Sr)),{type:"cat"}),n[Gs]=E({sync:!0},Kt(o,Sr)),n[U$]=E({sync:Gs},Kt(o,Sr)),n[q$]=E({sync:Gs},Kt(o,Sr)),n[Z$]=E({sync:Gs},Kt(o,Sr)),n));return e.scale(l),t}function uyt(t){var n=t.chart,e=t.options,r=e.xAxis,i=e.yAxis,a=Lt(n,rM);return r===!1?a.axis(oi,!1):a.axis(oi,r),i===!1?a.axis(Gs,!1):a.axis(Gs,i),n.axis(!1),t}function fyt(t){var n=t.chart,e=t.options,r=e.legend,i=e.seriesField,a=e.shape;if(r===!1)n.legend(!1);else{var o=i||oi,s=Jy(r,["selected"]);(!a||!a.startsWith("hollow"))&&(z(s,["marker","style","lineWidth"])||an(s,["marker","style","lineWidth"],0)),n.legend(o,s),z(r,"selected")&&$(n.views,function(l){return l.legend(o,r)})}return t}function hyt(t){var n=t.chart,e=Lt(n,rM);return Ie()(E(E({},t),{chart:e})),t}function dyt(t){var n=t.chart,e=t.options,r=e.animation;return $(n.views,function(i){Md(i,r)}),t}function pyt(t){return xt(Yt,oyt,syt,lyt,cyt,pn,uyt,fyt,Ee,hyt,dyt)(t)}(function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="violin",e}return n.getDefaultOptions=function(){return eyt},n.prototype.changeData=function(e){this.updateOption({data:e}),this.chart.changeData(n4(this.options))},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return pyt},n})(Mt);var si="$$yField$$",tm="$$diffField$$",iM="$$absoluteField$$",uw="$$isTotal$$",vyt={label:{},leaderLine:{style:{lineWidth:1,stroke:"#8c8c8c",lineDash:[4,2]}},total:{style:{fill:"rgba(0, 0, 0, 0.25)"}},interactions:[{type:"element-active"}],risingFill:"#f4664a",fallingFill:"#30bf78",waterfallStyle:{fill:"rgba(0, 0, 0, 0.25)"},yAxis:{grid:{line:{style:{lineDash:[4,2]}}}}};function gyt(t){for(var n=[],e=0;e<t.length;e++){var r=t[e];if(r){var i=e===0?"M":"L";n.push([i,r.x,r.y])}}var a=t[0];return n.push(["L",a.x,a.y]),n.push(["z"]),n}function yyt(t){return U({},t.defaultStyle,t.style,{fill:t.color})}Xt("interval","waterfall",{draw:function(t,n){var e=t.customInfo,r=t.points,i=t.nextPoints,a=n.addGroup(),o=this.parsePath(gyt(r)),s=yyt(t);a.addShape("path",{attrs:E(E({},s),{path:o})});var l=z(e,"leaderLine");if(l&&i){var c=[["M",r[2].x,r[2].y],["L",i[0].x,i[0].y]];r[2].y===i[1].y&&(c[1]=["L",i[1].x,i[1].y]),c=this.parsePath(c),a.addShape("path",{attrs:E({path:c},l.style||{})})}return a}});function myt(t,n,e,r,i){var a,o=[];if(Hn(t,function(l,c){var u;Ja(ji.WARN,bt(c[e]),"".concat(c[e]," is not a valid number"));var f=To(c[e])?null:c[e];return o.push(E(E({},c),(u={},u[r]=[l,l+f],u))),l+f},0),o.length&&i){var s=z(o,[[t.length-1],r,[1]]);o.push((a={},a[n]=i.label,a[e]=s,a[r]=[0,s],a))}return o}function r4(t,n,e,r){var i=myt(t,n,e,si,r);return i.map(function(a,o){var s;return Qt(a)?E(E({},a),(s={},s[iM]=a[si][1],s[tm]=a[si][1]-a[si][0],s[uw]=o===t.length,s)):a})}function xyt(t){var n=t.options,e=n.locale,r=n.total,i=$0(e).get(["waterfall","total"]);return r&&typeof r.label!="string"&&i&&(t.options.total.label=i),t}function byt(t){var n=t.chart,e=t.options,r=e.data,i=e.xField,a=e.yField,o=e.total,s=e.leaderLine,l=e.columnWidthRatio,c=e.waterfallStyle,u=e.risingFill,f=e.fallingFill,h=e.color,d=e.shape,p=e.customInfo;n.data(r4(r,i,a,o));var v=h||function(x){return z(x,[uw])?z(o,["style","fill"],""):z(x,[si,1])-z(x,[si,0])>0?u:f},g=U({},t,{options:{xField:i,yField:si,seriesField:i,rawFields:[a,tm,uw,si],widthRatio:l,interval:{style:c,shape:d||"waterfall",color:v}}}),y=Nn(g).ext,m=y.geometry;return m.customInfo(E(E({},p),{leaderLine:s})),t}function wyt(t){var n,e,r=t.options,i=r.xAxis,a=r.yAxis,o=r.xField,s=r.yField,l=r.meta,c=U({},{alias:s},z(l,s));return xt(Ye((n={},n[o]=i,n[s]=a,n[si]=a,n),U({},l,(e={},e[si]=c,e[tm]=c,e[iM]=c,e))))(t)}function Syt(t){var n=t.chart,e=t.options,r=e.xAxis,i=e.yAxis,a=e.xField,o=e.yField;return r===!1?n.axis(a,!1):n.axis(a,r),i===!1?(n.axis(o,!1),n.axis(si,!1)):(n.axis(o,i),n.axis(si,i)),t}function Oyt(t){var n=t.chart,e=t.options,r=e.legend,i=e.total,a=e.risingFill,o=e.fallingFill,s=e.locale,l=$0(s);if(r===!1)n.legend(!1);else{var c=[{name:l.get(["general","increase"]),value:"increase",marker:{symbol:"square",style:{r:5,fill:a}}},{name:l.get(["general","decrease"]),value:"decrease",marker:{symbol:"square",style:{r:5,fill:o}}}];i&&c.push({name:i.label||"",value:"total",marker:{symbol:"square",style:U({},{r:5},z(i,"style"))}}),n.legend(U({},{custom:!0,position:"top",items:c},r)),n.removeInteraction("legend-filter")}return t}function Myt(t){var n=t.chart,e=t.options,r=e.label,i=e.labelMode,a=e.xField,o=Bn(n,"interval");if(!r)o.label(!1);else{var s=r.callback,l=vt(r,["callback"]);o.label({fields:i==="absolute"?[iM,a]:[tm,a],callback:s,cfg:xn(l)})}return t}function Ayt(t){var n=t.chart,e=t.options,r=e.tooltip,i=e.xField,a=e.yField;if(r!==!1){n.tooltip(E({showCrosshairs:!1,showMarkers:!1,shared:!0,fields:[a]},r));var o=n.geometries[0];r!=null&&r.formatter?o.tooltip("".concat(i,"*").concat(a),r.formatter):o.tooltip(a)}else n.tooltip(!1);return t}function Eyt(t){return xt(xyt,Yt,byt,wyt,Syt,Oyt,Ayt,Myt,cs,Ee,te,Ie())(t)}(function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="waterfall",e}return n.getDefaultOptions=function(){return vyt},n.prototype.changeData=function(e){var r=this.options,i=r.xField,a=r.yField,o=r.total;this.updateOption({data:e}),this.chart.changeData(r4(e,i,a,o))},n.prototype.getSchemaAdaptor=function(){return Eyt},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n})(Mt);var aM="color",Tyt=U({},Mt.getDefaultOptions(),{timeInterval:2e3,legend:!1,tooltip:{showTitle:!1,showMarkers:!1,showCrosshairs:!1,fields:["text","value",aM],formatter:function(t){return{name:t.text,value:t.value}}},wordStyle:{fontFamily:"Verdana",fontWeight:"normal",padding:1,fontSize:[12,60],rotation:[0,90],rotationSteps:2,rotateRatio:.5}}),Cyt={font:function(){return"serif"},padding:1,size:[500,500],spiral:"archimedean",timeInterval:3e3};function Pyt(t,n){return n=Jt({},Cyt,n),kyt(t,n)}function kyt(t,n){var e=Yyt();["font","fontSize","fontWeight","padding","rotate","size","spiral","timeInterval","random"].forEach(function(l){J(n[l])||e[l](n[l])}),e.words(t),n.imageMask&&e.createMask(n.imageMask);var r=e.start(),i=r._tags;i.forEach(function(l){l.x+=n.size[0]/2,l.y+=n.size[1]/2});var a=n.size,o=a[0],s=a[1];return i.push({text:"",value:0,x:0,y:0,opacity:0}),i.push({text:"",value:0,x:o,y:s,opacity:0}),i}var K1=Math.PI/180,Sf=64,Wv=2048;function _yt(t){return t.text}function Lyt(){return"serif"}function Lk(){return"normal"}function Iyt(t){return t.value}function Fyt(){return~~(Math.random()*2)*90}function Dyt(){return 1}function Ryt(t,n,e,r){if(!n.sprite){var i=t.context,a=t.ratio;i.clearRect(0,0,(Sf<<5)/a,Wv/a);var o=0,s=0,l=0,c=e.length;for(--r;++r<c;){n=e[r],i.save(),i.font=n.style+" "+n.weight+" "+~~((n.size+1)/a)+"px "+n.font;var u=i.measureText(n.text+"m").width*a,f=n.size<<1;if(n.rotate){var h=Math.sin(n.rotate*K1),d=Math.cos(n.rotate*K1),p=u*d,v=u*h,g=f*d,y=f*h;u=Math.max(Math.abs(p+y),Math.abs(p-y))+31>>5<<5,f=~~Math.max(Math.abs(v+g),Math.abs(v-g))}else u=u+31>>5<<5;if(f>l&&(l=f),o+u>=Sf<<5&&(o=0,s+=l,l=0),s+f>=Wv)break;i.translate((o+(u>>1))/a,(s+(f>>1))/a),n.rotate&&i.rotate(n.rotate*K1),i.fillText(n.text,0,0),n.padding&&(i.lineWidth=2*n.padding,i.strokeText(n.text,0,0)),i.restore(),n.width=u,n.height=f,n.xoff=o,n.yoff=s,n.x1=u>>1,n.y1=f>>1,n.x0=-n.x1,n.y0=-n.y1,n.hasText=!0,o+=u}for(var m=i.getImageData(0,0,(Sf<<5)/a,Wv/a).data,x=[];--r>=0;)if(n=e[r],!!n.hasText){for(var u=n.width,b=u>>5,f=n.y1-n.y0,w=0;w<f*b;w++)x[w]=0;if(o=n.xoff,o==null)return;s=n.yoff;for(var S=0,O=-1,M=0;M<f;M++){for(var w=0;w<u;w++){var A=b*M+(w>>5),T=m[(s+M)*(Sf<<5)+(o+w)<<2]?1<<31-w%32:0;x[A]|=T,S|=T}S?O=M:(n.y0++,f--,M--,s++)}n.y1=n.y0+O,n.sprite=x.slice(0,(n.y1-n.y0)*b)}}}function Byt(t,n,e){e>>=5;for(var r=t.sprite,i=t.width>>5,a=t.x-(i<<4),o=a&127,s=32-o,l=t.y1-t.y0,c=(t.y+t.y0)*e+(a>>5),u,f=0;f<l;f++){u=0;for(var h=0;h<=i;h++)if((u<<s|(h<i?(u=r[f*i+h])>>>o:0))&n[c+h])return!0;c+=e}return!1}function Nyt(t,n){var e=t[0],r=t[1];n.x+n.x0<e.x&&(e.x=n.x+n.x0),n.y+n.y0<e.y&&(e.y=n.y+n.y0),n.x+n.x1>r.x&&(r.x=n.x+n.x1),n.y+n.y1>r.y&&(r.y=n.y+n.y1)}function $yt(t,n){return t.x+t.x1>n[0].x&&t.x+t.x0<n[1].x&&t.y+t.y1>n[0].y&&t.y+t.y0<n[1].y}function i4(t){var n=t[0]/t[1];return function(e){return[n*(e*=.1)*Math.cos(e),e*Math.sin(e)]}}function jyt(t){var n=4,e=n*t[0]/t[1],r=0,i=0;return function(a){var o=a<0?-1:1;switch(Math.sqrt(1+4*o*a)-o&3){case 0:r+=e;break;case 1:i+=n;break;case 2:r-=e;break;default:i-=n;break}return[r,i]}}function Ik(t){for(var n=[],e=-1;++e<t;)n[e]=0;return n}function zyt(){return document.createElement("canvas")}function Zi(t){return ut(t)?t:function(){return t}}var Gyt={archimedean:i4,rectangular:jyt};function Yyt(){var t=[256,256],n=Lyt,e=Iyt,r=Lk,i=Fyt,a=Dyt,o=i4,s=Math.random,l=[],c=1/0,u=_yt,f=Lk,h=zyt,d={};d.start=function(){var g=t[0],y=t[1],m=p(h()),x=d.board?d.board:Ik((t[0]>>5)*t[1]),b=l.length,w=[],S=l.map(function(T,C,P){return T.text=u.call(this,T,C,P),T.font=n.call(this,T,C,P),T.style=f.call(this,T,C,P),T.weight=r.call(this,T,C,P),T.rotate=i.call(this,T,C,P),T.size=~~e.call(this,T,C,P),T.padding=a.call(this,T,C,P),T}).sort(function(T,C){return C.size-T.size}),O=-1,M=d.board?[{x:0,y:0},{x:g,y}]:null;A();function A(){for(var T=Date.now();Date.now()-T<c&&++O<b;){var C=S[O];C.x=g*(s()+.5)>>1,C.y=y*(s()+.5)>>1,Ryt(m,C,S,O),C.hasText&&v(x,C,M)&&(w.push(C),M?d.hasImage||Nyt(M,C):M=[{x:C.x+C.x0,y:C.y+C.y0},{x:C.x+C.x1,y:C.y+C.y1}],C.x-=t[0]>>1,C.y-=t[1]>>1)}d._tags=w,d._bounds=M}return d};function p(g){g.width=g.height=1;var y=Math.sqrt(g.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,1,1).data.length>>2);g.width=(Sf<<5)/y,g.height=Wv/y;var m=g.getContext("2d",{willReadFrequently:!0});return m.fillStyle=m.strokeStyle="red",m.textAlign="center",{context:m,ratio:y}}function v(g,y,m){for(var x=y.x,b=y.y,w=Math.sqrt(t[0]*t[0]+t[1]*t[1]),S=o(t),O=s()<.5?1:-1,M,A=-O,T,C;(M=S(A+=O))&&(T=~~M[0],C=~~M[1],!(Math.min(Math.abs(T),Math.abs(C))>=w));)if(y.x=x+T,y.y=b+C,!(y.x+y.x0<0||y.y+y.y0<0||y.x+y.x1>t[0]||y.y+y.y1>t[1])&&(!m||!Byt(y,g,t[0]))&&(!m||$yt(y,m))){for(var P=y.sprite,_=y.width>>5,k=t[0]>>5,I=y.x-(_<<4),L=I&127,F=32-L,B=y.y1-y.y0,D=void 0,N=(y.y+y.y0)*k+(I>>5),j=0;j<B;j++){D=0;for(var Y=0;Y<=_;Y++)g[N+Y]|=D<<F|(Y<_?(D=P[j*_+Y])>>>L:0);N+=k}return delete y.sprite,!0}return!1}return d.createMask=function(g){var y=document.createElement("canvas"),m=t[0],x=t[1];if(!(!m||!x)){var b=m>>5,w=Ik((m>>5)*x);y.width=m,y.height=x;var S=y.getContext("2d");S.drawImage(g,0,0,g.width,g.height,0,0,m,x);for(var O=S.getImageData(0,0,m,x).data,M=0;M<x;M++)for(var A=0;A<m;A++){var T=b*M+(A>>5),C=M*m+A<<2,P=O[C]>=250&&O[C+1]>=250&&O[C+2]>=250,_=P?1<<31-A%32:0;w[T]|=_}d.board=w,d.hasImage=!0}},d.timeInterval=function(g){c=g??1/0},d.words=function(g){l=g},d.size=function(g){t=[+g[0],+g[1]]},d.font=function(g){n=Zi(g)},d.fontWeight=function(g){r=Zi(g)},d.rotate=function(g){i=Zi(g)},d.spiral=function(g){o=Gyt[g]||g},d.fontSize=function(g){e=Zi(g)},d.padding=function(g){a=Zi(g)},d.random=function(g){s=Zi(g)},d}function a4(t){var n=t.options,e=t.chart,r=e,i=r.width,a=r.height,o=r.padding,s=r.appendPadding,l=r.ele,c=n.data,u=n.imageMask,f=n.wordField,h=n.weightField,d=n.colorField,p=n.wordStyle,v=n.timeInterval,g=n.random,y=n.spiral,m=n.autoFit,x=m===void 0?!0:m,b=n.placementStrategy;if(!c||!c.length)return[];var w=p.fontFamily,S=p.fontWeight,O=p.padding,M=p.fontSize,A=Uyt(c,h),T=[Kyt(A),Qyt(A)],C=c.map(function(k){return{text:k[f],value:k[h],color:k[d],datum:k}}),P={imageMask:u,font:w,fontSize:Xyt(M,T),fontWeight:S,size:Wyt({width:i,height:a,padding:o,appendPadding:s,autoFit:x,container:l}),padding:O,timeInterval:v,random:g,spiral:y,rotate:qyt(n)};if(ut(b)){var _=C.map(function(k,I,L){return E(E(E({},k),{hasText:!!k.text,font:Zi(P.font)(k,I,L),weight:Zi(P.fontWeight)(k,I,L),rotate:Zi(P.rotate)(k,I,L),size:Zi(P.fontSize)(k,I,L),style:"normal"}),b.call(e,k,I,L))});return _.push({text:"",value:0,x:0,y:0,opacity:0}),_.push({text:"",value:0,x:P.size[0],y:P.size[1],opacity:0}),_}return Pyt(C,P)}function Wyt(t){var n=t.width,e=t.height,r=t.container,i=t.autoFit,a=t.padding,o=t.appendPadding;if(i){var s=Jb(r);n=s.width,e=s.height}n=n||400,e=e||400;var l=Vyt({padding:a,appendPadding:o}),c=l[0],u=l[1],f=l[2],h=l[3],d=[n-(h+u),e-(c+f)];return d}function Vyt(t){var n=Zo(t.padding),e=Zo(t.appendPadding),r=n[0]+e[0],i=n[1]+e[1],a=n[2]+e[2],o=n[3]+e[3];return[r,i,a,o]}function Hyt(t){return new Promise(function(n,e){if(t instanceof HTMLImageElement){n(t);return}if(pt(t)){var r=new Image;r.crossOrigin="anonymous",r.src=t,r.onload=function(){n(r)},r.onerror=function(){Ja(ji.ERROR,!1,"image %s load failed !!!",t),e()};return}Ja(ji.WARN,t===void 0,"The type of imageMask option must be String or HTMLImageElement."),e()})}function Xyt(t,n){if(ut(t))return t;if(et(t)){var e=t[0],r=t[1];if(!n)return function(){return(r+e)/2};var i=n[0],a=n[1];return a===i?function(){return(r+e)/2}:function(s){var l=s.value;return(r-e)/(a-i)*(l-i)+e}}return function(){return t}}function Uyt(t,n){return t.map(function(e){return e[n]}).filter(function(e){return typeof e=="number"&&!isNaN(e)})}function qyt(t){var n=Zyt(t),e=n.rotation,r=n.rotationSteps;if(!et(e))return e;var i=e[0],a=e[1],o=r===1?0:(a-i)/(r-1);return function(){return a===i?a:Math.floor(Math.random()*r)*o}}function Zyt(t){var n=t.wordStyle.rotationSteps;return n<1&&(Ja(ji.WARN,!1,"The rotationSteps option must be greater than or equal to 1."),n=1),{rotation:t.wordStyle.rotation,rotationSteps:n}}function Kyt(t){return Math.min.apply(Math,t)}function Qyt(t){return Math.max.apply(Math,t)}function Jyt(t){var n=t.chart,e=t.options,r=e.colorField,i=e.color,a=a4(t);n.data(a);var o=U({},t,{options:{xField:"x",yField:"y",seriesField:r&&aM,rawFields:ut(i)&&X(X([],z(e,"rawFields",[]),!0),["datum"],!1),point:{color:i,shape:"word-cloud"}}}),s=Zr(o).ext;return s.geometry.label(!1),n.coordinate().reflect("y"),n.axis(!1),t}function t0t(t){return xt(Ye({x:{nice:!1},y:{nice:!1}}))(t)}function e0t(t){var n=t.chart,e=t.options,r=e.legend,i=e.colorField;return r===!1?n.legend(!1):i&&n.legend(aM,r),t}function n0t(t){xt(Jyt,t0t,pn,e0t,Ee,te,Yt,cs)(t)}Xt("point","word-cloud",{draw:function(t,n){var e=t.x,r=t.y,i=n.addShape("text",{attrs:E(E({},r0t(t)),{x:e,y:r})}),a=t.data.rotate;return typeof a=="number"&&Ar.rotate(i,a*Math.PI/180),i}});function r0t(t){return{fontSize:t.data.size,text:t.data.text,textAlign:"center",fontFamily:t.data.font,fontWeight:t.data.weight,fill:t.color||t.defaultStyle.stroke,textBaseline:"alphabetic"}}(function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="word-cloud",e}return n.getDefaultOptions=function(){return Tyt},n.prototype.changeData=function(e){this.updateOption({data:e}),this.options.imageMask?this.render():this.chart.changeData(a4({chart:this.chart,options:this.options}))},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.render=function(){var e=this;return new Promise(function(r){var i=e.options.imageMask;if(!i){t.prototype.render.call(e),r();return}var a=function(o){e.options=E(E({},e.options),{imageMask:o||null}),t.prototype.render.call(e),r()};Hyt(i).then(a).catch(a)})},n.prototype.getSchemaAdaptor=function(){return n0t},n.prototype.triggerResize=function(){var e=this;this.chart.destroyed||(this.execAdaptor(),window.setTimeout(function(){t.prototype.triggerResize.call(e)}))},n})(Mt);(function(t){G(n,t);function n(e,r,i,a){var o=t.call(this,e,U({},a,r))||this;return o.type="g2-plot",o.defaultOptions=a,o.adaptor=i,o}return n.prototype.getDefaultOptions=function(){return this.defaultOptions},n.prototype.getSchemaAdaptor=function(){return this.adaptor},n})(Mt);V3("en-US",Xat);V3("zh-CN",Uat);var fw=globalThis&&globalThis.__assign||function(){return fw=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++){n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},fw.apply(this,arguments)};globalThis&&globalThis.__awaiter;globalThis&&globalThis.__generator;var kd=fw({},jD),i0t=kd.version,a0t=kd.render;kd.unmountComponentAtNode;var oM;try{var o0t=Number((i0t||"").split(".")[0]);o0t>=18&&(oM=kd.createRoot)}catch{}function Fk(t){var n=kd.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;n&&typeof n=="object"&&(n.usingClientEntryPoint=t)}var Dk="__rc_react_root__";function s0t(t,n){Fk(!0);var e=n[Dk]||oM(n);Fk(!1),e.render(t),n[Dk]=e}function l0t(t,n){a0t(t,n)}function c0t(t,n){if(oM){s0t(t,n);return}l0t(t,n)}var Q1=new Map,u0t=function(t,n,e){var r=document.createElement("div");return n==="tooltip"&&(r.setAttribute("data-uuid",e),Q1.has(e)?r=Q1.get(e):Q1.set(e,r),r.className="g2-tooltip"),c0t(t,r),r};const f0t=u0t;var Yp=function(t,n){var e={}.toString;return e.call(t)==="[object ".concat(n,"]")},h0t=function(t){if(!t)return t;var n={};for(var e in t)n[e]=t[e];return n},$g=function(t){if(!t||typeof t!="object")return t;var n;return Array.isArray(t)?n=t.map(function(e){return $g(e)}):(n={},Object.keys(t).forEach(function(e){return n[e]=$g(t[e])})),n},of=function(t,n){for(var e=t,r=0;r<n.length;r+=1)if(e!=null&&e[n[r]])e=e[n[r]];else{e=void 0;break}return e},d0t=function(t,n,e){if(!t)return t;var r=t;return n.forEach(function(i,a){a<n.length-1?r=r[i]:r[i]=e}),t},p0t=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=Math.random()*16|0,e=t=="x"?n:n&3|8;return e.toString(16)})},v0t=function(t,n){t&&(ut(t)?t(n):t.current=n)},hw=globalThis&&globalThis.__assign||function(){return hw=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++){n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},hw.apply(this,arguments)},Rk=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};function g0t(t,n){var e=dt.useRef(),r=dt.useRef(),i=dt.useRef(null),a=n.onReady,o=n.onEvent,s=function(f,h){var d;return f===void 0&&(f="image/png"),(d=e.current)===null||d===void 0?void 0:d.chart.canvas.cfg.el.toDataURL(f,h)},l=function(f,h,d){var p;f===void 0&&(f="download"),h===void 0&&(h="image/png");var v=f;f.indexOf(".")===-1&&(v="".concat(f,".").concat(h.split("/")[1]));var g=(p=e.current)===null||p===void 0?void 0:p.chart.canvas.cfg.el.toDataURL(h,d),y=document.createElement("a");return y.href=g,y.download=v,document.body.appendChild(y),y.click(),document.body.removeChild(y),y=null,v},c=function(f,h,d,p){var v=of(f,h);d0t(f,h,function(){for(var g=[],y=0;y<arguments.length;y++)g[y]=arguments[y];var m=Yp(v,"Function")?v.apply(void 0,g):v;return Yp(m,"String")||Yp(m,"Number")||Yp(m,"HTMLDivElement")?m:f0t(m,d,p)})},u=function(){var f=p0t();of(n,["statistic","content","customHtml"])&&c(n,["statistic","content","customHtml"]),of(n,["statistic","title","customHtml"])&&c(n,["statistic","title","customHtml"]),typeof n.tooltip=="object"&&(of(n,["tooltip","container"])&&c(n,["tooltip","container"],"tooltip",f),of(n,["tooltip","customContent"])&&c(n,["tooltip","customContent"],"tooltip",f))};return dt.useEffect(function(){if(e.current&&!Ne(r.current,n)){var f=!1;if(r.current){var h=r.current;h.data,h.value,h.percent;var d=Rk(h,["data","value","percent"]);n.data,n.value,n.percent;var p=Rk(n,["data","value","percent"]);f=Ne(d,p)}if(r.current=$g(n),f&&z(n,"chartType")!=="Mix"){var v="data",g=["percent"],y=Object.keys(n);g.forEach(function(m){y.includes(m)&&(v=m)}),e.current.changeData((n==null?void 0:n[v])||[]),e.current.render()}else u(),e.current.update(n)}},[n]),dt.useEffect(function(){if(!i.current)return function(){return null};r.current||(r.current=$g(n)),u();var f=new t(i.current,hw({},n));f.toDataURL=function(d,p){return s(d,p)},f.downloadImage=function(d,p,v){return l(d,p,v)},f.render(),e.current=h0t(f),a&&a(f);var h=function(d){o&&o(f,d)};return f.on("*",h),function(){e.current&&(e.current.destroy(),e.current.off("*",h),e.current=void 0)}},[]),{chart:e,container:i}}var y0t=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),m0t=function(t){y0t(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.state={hasError:!1},e.renderError=function(r){var i=e.props.errorTemplate;switch(r){default:return typeof i=="function"?i(r):i||ge.createElement("h5",null,"组件出错了，请核查后重试： ",r.message)}},e}return n.getDerivedStateFromError=function(e){return{hasError:!0,error:e}},n.getDerivedStateFromProps=function(e,r){return r.children!==e.children?{children:e.children,hasError:!1,error:void 0}:null},n.prototype.render=function(){return this.state.hasError?this.renderError(this.state.error):ge.createElement(dt.Fragment,null,this.props.children)},n}(ge.Component);const x0t=m0t;/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var zo=function(){return zo=Object.assign||function(n){for(var e,r=1,i=arguments.length;r<i;r++){e=arguments[r];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a])}return n},zo.apply(this,arguments)};function b0t(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e}var w0t=function(){return Math.random().toString(36).substring(6)},o4=function(t){var n=t.animate,e=t.backgroundColor,r=t.backgroundOpacity,i=t.baseUrl,a=t.children,o=t.foregroundColor,s=t.foregroundOpacity,l=t.gradientRatio,c=t.uniqueKey,u=t.interval,f=t.rtl,h=t.speed,d=t.style,p=t.title,v=b0t(t,["animate","backgroundColor","backgroundOpacity","baseUrl","children","foregroundColor","foregroundOpacity","gradientRatio","uniqueKey","interval","rtl","speed","style","title"]),g=c||w0t(),y=g+"-diff",m=g+"-animated-diff",x=g+"-aria",b=f?{transform:"scaleX(-1)"}:null,w="0; "+u+"; 1",S=h+"s";return dt.createElement("svg",zo({"aria-labelledby":x,role:"img",style:zo(zo({},d),b)},v),p?dt.createElement("title",{id:x},p):null,dt.createElement("rect",{role:"presentation",x:"0",y:"0",width:"100%",height:"100%",clipPath:"url("+i+"#"+y+")",style:{fill:"url("+i+"#"+m+")"}}),dt.createElement("defs",{role:"presentation"},dt.createElement("clipPath",{id:y},a),dt.createElement("linearGradient",{id:m},dt.createElement("stop",{offset:"0%",stopColor:e,stopOpacity:r},n&&dt.createElement("animate",{attributeName:"offset",values:-l+"; "+-l+"; 1",keyTimes:w,dur:S,repeatCount:"indefinite"})),dt.createElement("stop",{offset:"50%",stopColor:o,stopOpacity:s},n&&dt.createElement("animate",{attributeName:"offset",values:-l/2+"; "+-l/2+"; "+(1+l/2),keyTimes:w,dur:S,repeatCount:"indefinite"})),dt.createElement("stop",{offset:"100%",stopColor:e,stopOpacity:r},n&&dt.createElement("animate",{attributeName:"offset",values:"0; 0; "+(1+l),keyTimes:w,dur:S,repeatCount:"indefinite"})))))};o4.defaultProps={animate:!0,backgroundColor:"#f5f6f7",backgroundOpacity:1,baseUrl:"",foregroundColor:"#eee",foregroundOpacity:1,gradientRatio:2,id:null,interval:.25,rtl:!1,speed:1.2,style:{},title:"Loading..."};var s4=function(t){return t.children?dt.createElement(o4,zo({},t)):dt.createElement(S0t,zo({},t))},S0t=function(t){return dt.createElement(s4,zo({viewBox:"0 0 476 124"},t),dt.createElement("rect",{x:"48",y:"8",width:"88",height:"6",rx:"3"}),dt.createElement("rect",{x:"48",y:"26",width:"52",height:"6",rx:"3"}),dt.createElement("rect",{x:"0",y:"56",width:"410",height:"6",rx:"3"}),dt.createElement("rect",{x:"0",y:"72",width:"380",height:"6",rx:"3"}),dt.createElement("rect",{x:"0",y:"88",width:"178",height:"6",rx:"3"}),dt.createElement("circle",{cx:"20",cy:"20",r:"20"}))};const O0t=s4;var M0t=function(t){var n=t.loadingTemplate,e=t.theme,r=e===void 0?"light":e,i=function(){return n||ge.createElement(O0t,{viewBox:"0 0 400 180",width:200,height:90,speed:1,backgroundColor:r==="dark"?"#262626":"#D9D9D9"},ge.createElement("rect",{x:"20",y:"5",rx:"0",ry:"0",width:"1",height:"170"}),ge.createElement("rect",{x:"20",y:"175",rx:"0",ry:"0",width:"360",height:"1"}),ge.createElement("rect",{x:"40",y:"75",rx:"0",ry:"0",width:"35",height:"100"}),ge.createElement("rect",{x:"80",y:"125",rx:"0",ry:"0",width:"35",height:"50"}),ge.createElement("rect",{x:"120",y:"105",rx:"0",ry:"0",width:"35",height:"70"}),ge.createElement("rect",{x:"160",y:"35",rx:"0",ry:"0",width:"35",height:"140"}),ge.createElement("rect",{x:"200",y:"55",rx:"0",ry:"0",width:"35",height:"120"}),ge.createElement("rect",{x:"240",y:"15",rx:"0",ry:"0",width:"35",height:"160"}),ge.createElement("rect",{x:"280",y:"135",rx:"0",ry:"0",width:"35",height:"40"}),ge.createElement("rect",{x:"320",y:"85",rx:"0",ry:"0",width:"35",height:"90"}))};return ge.createElement("div",{className:"charts-loading-container",style:{position:"absolute",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",left:0,top:0,zIndex:99,backgroundColor:r==="dark"?"rgb(20, 20, 20)":"rgb(255, 255, 255)"}},i())};const A0t=M0t;var E0t=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e},T0t=dt.forwardRef(function(t,n){var e=t.chartRef,r=t.style,i=r===void 0?{height:"inherit"}:r,a=t.className,o=t.loading,s=t.loadingTemplate,l=t.errorTemplate,c=E0t(t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),u=g0t(EN,c),f=u.chart,h=u.container;return dt.useEffect(function(){v0t(e,f.current)},[f.current]),dt.useImperativeHandle(n,function(){return{getChart:function(){return f.current}}}),ge.createElement(x0t,{errorTemplate:l},o&&ge.createElement(A0t,{loadingTemplate:s,theme:t.theme}),ge.createElement("div",{className:a,style:i,ref:h}))});const l4=T0t;function C0t(t){const n=+this._x.call(null,t),e=+this._y.call(null,t);return c4(this.cover(n,e),n,e,t)}function c4(t,n,e,r){if(isNaN(n)||isNaN(e))return t;var i,a=t._root,o={data:r},s=t._x0,l=t._y0,c=t._x1,u=t._y1,f,h,d,p,v,g,y,m;if(!a)return t._root=o,t;for(;a.length;)if((v=n>=(f=(s+c)/2))?s=f:c=f,(g=e>=(h=(l+u)/2))?l=h:u=h,i=a,!(a=a[y=g<<1|v]))return i[y]=o,t;if(d=+t._x.call(null,a.data),p=+t._y.call(null,a.data),n===d&&e===p)return o.next=a,i?i[y]=o:t._root=o,t;do i=i?i[y]=new Array(4):t._root=new Array(4),(v=n>=(f=(s+c)/2))?s=f:c=f,(g=e>=(h=(l+u)/2))?l=h:u=h;while((y=g<<1|v)===(m=(p>=h)<<1|d>=f));return i[m]=a,i[y]=o,t}function P0t(t){var n,e,r=t.length,i,a,o=new Array(r),s=new Array(r),l=1/0,c=1/0,u=-1/0,f=-1/0;for(e=0;e<r;++e)isNaN(i=+this._x.call(null,n=t[e]))||isNaN(a=+this._y.call(null,n))||(o[e]=i,s[e]=a,i<l&&(l=i),i>u&&(u=i),a<c&&(c=a),a>f&&(f=a));if(l>u||c>f)return this;for(this.cover(l,c).cover(u,f),e=0;e<r;++e)c4(this,o[e],s[e],t[e]);return this}function k0t(t,n){if(isNaN(t=+t)||isNaN(n=+n))return this;var e=this._x0,r=this._y0,i=this._x1,a=this._y1;if(isNaN(e))i=(e=Math.floor(t))+1,a=(r=Math.floor(n))+1;else{for(var o=i-e||1,s=this._root,l,c;e>t||t>=i||r>n||n>=a;)switch(c=(n<r)<<1|t<e,l=new Array(4),l[c]=s,s=l,o*=2,c){case 0:i=e+o,a=r+o;break;case 1:e=i-o,a=r+o;break;case 2:i=e+o,r=a-o;break;case 3:e=i-o,r=a-o;break}this._root&&this._root.length&&(this._root=s)}return this._x0=e,this._y0=r,this._x1=i,this._y1=a,this}function _0t(){var t=[];return this.visit(function(n){if(!n.length)do t.push(n.data);while(n=n.next)}),t}function L0t(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function rr(t,n,e,r,i){this.node=t,this.x0=n,this.y0=e,this.x1=r,this.y1=i}function I0t(t,n,e){var r,i=this._x0,a=this._y0,o,s,l,c,u=this._x1,f=this._y1,h=[],d=this._root,p,v;for(d&&h.push(new rr(d,i,a,u,f)),e==null?e=1/0:(i=t-e,a=n-e,u=t+e,f=n+e,e*=e);p=h.pop();)if(!(!(d=p.node)||(o=p.x0)>u||(s=p.y0)>f||(l=p.x1)<i||(c=p.y1)<a))if(d.length){var g=(o+l)/2,y=(s+c)/2;h.push(new rr(d[3],g,y,l,c),new rr(d[2],o,y,g,c),new rr(d[1],g,s,l,y),new rr(d[0],o,s,g,y)),(v=(n>=y)<<1|t>=g)&&(p=h[h.length-1],h[h.length-1]=h[h.length-1-v],h[h.length-1-v]=p)}else{var m=t-+this._x.call(null,d.data),x=n-+this._y.call(null,d.data),b=m*m+x*x;if(b<e){var w=Math.sqrt(e=b);i=t-w,a=n-w,u=t+w,f=n+w,r=d.data}}return r}function F0t(t){if(isNaN(u=+this._x.call(null,t))||isNaN(f=+this._y.call(null,t)))return this;var n,e=this._root,r,i,a,o=this._x0,s=this._y0,l=this._x1,c=this._y1,u,f,h,d,p,v,g,y;if(!e)return this;if(e.length)for(;;){if((p=u>=(h=(o+l)/2))?o=h:l=h,(v=f>=(d=(s+c)/2))?s=d:c=d,n=e,!(e=e[g=v<<1|p]))return this;if(!e.length)break;(n[g+1&3]||n[g+2&3]||n[g+3&3])&&(r=n,y=g)}for(;e.data!==t;)if(i=e,!(e=e.next))return this;return(a=e.next)&&delete e.next,i?(a?i.next=a:delete i.next,this):n?(a?n[g]=a:delete n[g],(e=n[0]||n[1]||n[2]||n[3])&&e===(n[3]||n[2]||n[1]||n[0])&&!e.length&&(r?r[y]=e:this._root=e),this):(this._root=a,this)}function D0t(t){for(var n=0,e=t.length;n<e;++n)this.remove(t[n]);return this}function R0t(){return this._root}function B0t(){var t=0;return this.visit(function(n){if(!n.length)do++t;while(n=n.next)}),t}function N0t(t){var n=[],e,r=this._root,i,a,o,s,l;for(r&&n.push(new rr(r,this._x0,this._y0,this._x1,this._y1));e=n.pop();)if(!t(r=e.node,a=e.x0,o=e.y0,s=e.x1,l=e.y1)&&r.length){var c=(a+s)/2,u=(o+l)/2;(i=r[3])&&n.push(new rr(i,c,u,s,l)),(i=r[2])&&n.push(new rr(i,a,u,c,l)),(i=r[1])&&n.push(new rr(i,c,o,s,u)),(i=r[0])&&n.push(new rr(i,a,o,c,u))}return this}function $0t(t){var n=[],e=[],r;for(this._root&&n.push(new rr(this._root,this._x0,this._y0,this._x1,this._y1));r=n.pop();){var i=r.node;if(i.length){var a,o=r.x0,s=r.y0,l=r.x1,c=r.y1,u=(o+l)/2,f=(s+c)/2;(a=i[0])&&n.push(new rr(a,o,s,u,f)),(a=i[1])&&n.push(new rr(a,u,s,l,f)),(a=i[2])&&n.push(new rr(a,o,f,u,c)),(a=i[3])&&n.push(new rr(a,u,f,l,c))}e.push(r)}for(;r=e.pop();)t(r.node,r.x0,r.y0,r.x1,r.y1);return this}function j0t(t){return t[0]}function z0t(t){return arguments.length?(this._x=t,this):this._x}function G0t(t){return t[1]}function Y0t(t){return arguments.length?(this._y=t,this):this._y}function u4(t,n,e){var r=new sM(n??j0t,e??G0t,NaN,NaN,NaN,NaN);return t==null?r:r.addAll(t)}function sM(t,n,e,r,i,a){this._x=t,this._y=n,this._x0=e,this._y0=r,this._x1=i,this._y1=a,this._root=void 0}function Bk(t){for(var n={data:t.data},e=n;t=t.next;)e=e.next={data:t.data};return n}var sr=u4.prototype=sM.prototype;sr.copy=function(){var t=new sM(this._x,this._y,this._x0,this._y0,this._x1,this._y1),n=this._root,e,r;if(!n)return t;if(!n.length)return t._root=Bk(n),t;for(e=[{source:n,target:t._root=new Array(4)}];n=e.pop();)for(var i=0;i<4;++i)(r=n.source[i])&&(r.length?e.push({source:r,target:n.target[i]=new Array(4)}):n.target[i]=Bk(r));return t};sr.add=C0t;sr.addAll=P0t;sr.cover=k0t;sr.data=_0t;sr.extent=L0t;sr.find=I0t;sr.remove=F0t;sr.removeAll=D0t;sr.root=R0t;sr.size=B0t;sr.visit=N0t;sr.visitAfter=$0t;sr.x=z0t;sr.y=Y0t;var W0t={value:()=>{}};function f4(){for(var t=0,n=arguments.length,e={},r;t<n;++t){if(!(r=arguments[t]+"")||r in e||/[\s.]/.test(r))throw new Error("illegal type: "+r);e[r]=[]}return new Vv(e)}function Vv(t){this._=t}function V0t(t,n){return t.trim().split(/^|\s+/).map(function(e){var r="",i=e.indexOf(".");if(i>=0&&(r=e.slice(i+1),e=e.slice(0,i)),e&&!n.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:r}})}Vv.prototype=f4.prototype={constructor:Vv,on:function(t,n){var e=this._,r=V0t(t+"",e),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(t=r[a]).type)&&(i=H0t(e[i],t.name)))return i;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++a<o;)if(i=(t=r[a]).type)e[i]=Nk(e[i],t.name,n);else if(n==null)for(i in e)e[i]=Nk(e[i],t.name,null);return this},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new Vv(t)},call:function(t,n){if((i=arguments.length-2)>0)for(var e=new Array(i),r=0,i,a;r<i;++r)e[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],r=0,i=a.length;r<i;++r)a[r].value.apply(n,e)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(n,e)}};function H0t(t,n){for(var e=0,r=t.length,i;e<r;++e)if((i=t[e]).name===n)return i.value}function Nk(t,n,e){for(var r=0,i=t.length;r<i;++r)if(t[r].name===n){t[r]=W0t,t=t.slice(0,r).concat(t.slice(r+1));break}return e!=null&&t.push({name:n,value:e}),t}var h4={exports:{}},X0t={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},d4={exports:{}},U0t=function(n){return!n||typeof n=="string"?!1:n instanceof Array||Array.isArray(n)||n.length>=0&&(n.splice instanceof Function||Object.getOwnPropertyDescriptor(n,n.length-1)&&n.constructor.name!=="String")},q0t=U0t,Z0t=Array.prototype.concat,K0t=Array.prototype.slice,$k=d4.exports=function(n){for(var e=[],r=0,i=n.length;r<i;r++){var a=n[r];q0t(a)?e=Z0t.call(e,K0t.call(a)):e.push(a)}return e};$k.wrap=function(t){return function(){return t($k(arguments))}};var Q0t=d4.exports,Zf=X0t,_d=Q0t,p4=Object.hasOwnProperty,v4=Object.create(null);for(var J1 in Zf)p4.call(Zf,J1)&&(v4[Zf[J1]]=J1);var $r=h4.exports={to:{},get:{}};$r.get=function(t){var n=t.substring(0,3).toLowerCase(),e,r;switch(n){case"hsl":e=$r.get.hsl(t),r="hsl";break;case"hwb":e=$r.get.hwb(t),r="hwb";break;default:e=$r.get.rgb(t),r="rgb";break}return e?{model:r,value:e}:null};$r.get.rgb=function(t){if(!t)return null;var n=/^#([a-f0-9]{3,4})$/i,e=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,r=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,i=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,a=/^(\w+)$/,o=[0,0,0,1],s,l,c;if(s=t.match(e)){for(c=s[2],s=s[1],l=0;l<3;l++){var u=l*2;o[l]=parseInt(s.slice(u,u+2),16)}c&&(o[3]=parseInt(c,16)/255)}else if(s=t.match(n)){for(s=s[1],c=s[3],l=0;l<3;l++)o[l]=parseInt(s[l]+s[l],16);c&&(o[3]=parseInt(c+c,16)/255)}else if(s=t.match(r)){for(l=0;l<3;l++)o[l]=parseInt(s[l+1],0);s[4]&&(s[5]?o[3]=parseFloat(s[4])*.01:o[3]=parseFloat(s[4]))}else if(s=t.match(i)){for(l=0;l<3;l++)o[l]=Math.round(parseFloat(s[l+1])*2.55);s[4]&&(s[5]?o[3]=parseFloat(s[4])*.01:o[3]=parseFloat(s[4]))}else return(s=t.match(a))?s[1]==="transparent"?[0,0,0,0]:p4.call(Zf,s[1])?(o=Zf[s[1]],o[3]=1,o):null:null;for(l=0;l<3;l++)o[l]=Go(o[l],0,255);return o[3]=Go(o[3],0,1),o};$r.get.hsl=function(t){if(!t)return null;var n=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,e=t.match(n);if(e){var r=parseFloat(e[4]),i=(parseFloat(e[1])%360+360)%360,a=Go(parseFloat(e[2]),0,100),o=Go(parseFloat(e[3]),0,100),s=Go(isNaN(r)?1:r,0,1);return[i,a,o,s]}return null};$r.get.hwb=function(t){if(!t)return null;var n=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,e=t.match(n);if(e){var r=parseFloat(e[4]),i=(parseFloat(e[1])%360+360)%360,a=Go(parseFloat(e[2]),0,100),o=Go(parseFloat(e[3]),0,100),s=Go(isNaN(r)?1:r,0,1);return[i,a,o,s]}return null};$r.to.hex=function(){var t=_d(arguments);return"#"+Wp(t[0])+Wp(t[1])+Wp(t[2])+(t[3]<1?Wp(Math.round(t[3]*255)):"")};$r.to.rgb=function(){var t=_d(arguments);return t.length<4||t[3]===1?"rgb("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+")":"rgba("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+", "+t[3]+")"};$r.to.rgb.percent=function(){var t=_d(arguments),n=Math.round(t[0]/255*100),e=Math.round(t[1]/255*100),r=Math.round(t[2]/255*100);return t.length<4||t[3]===1?"rgb("+n+"%, "+e+"%, "+r+"%)":"rgba("+n+"%, "+e+"%, "+r+"%, "+t[3]+")"};$r.to.hsl=function(){var t=_d(arguments);return t.length<4||t[3]===1?"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)":"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+t[3]+")"};$r.to.hwb=function(){var t=_d(arguments),n="";return t.length>=4&&t[3]!==1&&(n=", "+t[3]),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+n+")"};$r.to.keyword=function(t){return v4[t.slice(0,3)]};function Go(t,n,e){return Math.min(Math.max(n,t),e)}function Wp(t){var n=Math.round(t).toString(16).toUpperCase();return n.length<2?"0"+n:n}var J0t=h4.exports;const lM=tS(J0t);function cM(t){var n,e,r,i=t||1;function a(s,l){++n>i&&(r=e,o(1),++n),e[s]=l}function o(s){n=0,e=Object.create(null),s||(r=Object.create(null))}return o(),{clear:o,has:function(s){return e[s]!==void 0||r[s]!==void 0},get:function(s){var l=e[s];if(l!==void 0)return l;if((l=r[s])!==void 0)return a(s,l),l},set:function(s,l){e[s]!==void 0?e[s]=l:a(s,l)}}}const g4=()=>[["cartesian"]];g4.props={};const y4=(t={})=>{const n={startAngle:-Math.PI/2,endAngle:Math.PI*3/2,innerRadius:0,outerRadius:1};return Object.assign(Object.assign({},n),t)},Ld=t=>{const{startAngle:n,endAngle:e,innerRadius:r,outerRadius:i}=y4(t);return[["translate",0,.5],["reflect.y"],["translate",0,-.5],["polar",n,e,r,i]]};Ld.props={};const uM=()=>[["transpose"],["translate",.5,.5],["reflect.x"],["translate",-.5,-.5]];uM.props={transform:!0};const tmt=(t={})=>{const n={startAngle:-Math.PI/2,endAngle:Math.PI*3/2,innerRadius:0,outerRadius:1};return Object.assign(Object.assign({},n),t)},m4=t=>{const{startAngle:n,endAngle:e,innerRadius:r,outerRadius:i}=tmt(t);return[...uM(),...Ld({startAngle:n,endAngle:e,innerRadius:r,outerRadius:i})]};m4.props={};const x4=(t={})=>{const n={startAngle:-Math.PI/2,endAngle:Math.PI*3/2,innerRadius:0,outerRadius:1};return Object.assign(Object.assign({},n),t)},fM=t=>{const{startAngle:n,endAngle:e,innerRadius:r,outerRadius:i}=x4(t);return[["transpose"],["translate",.5,.5],["reflect"],["translate",-.5,-.5],...Ld({startAngle:n,endAngle:e,innerRadius:r,outerRadius:i})]};fM.props={};const hM=()=>[["parallel",0,1,0,1]];hM.props={};const b4=({focusX:t=0,focusY:n=0,distortionX:e=2,distortionY:r=2,visual:i=!1})=>[["fisheye",t,n,e,r,i]];b4.props={transform:!0};const w4=t=>{const{startAngle:n=-Math.PI/2,endAngle:e=Math.PI*3/2,innerRadius:r=0,outerRadius:i=1}=t;return[...hM(),...Ld({startAngle:n,endAngle:e,innerRadius:r,outerRadius:i})]};w4.props={};const S4=({value:t})=>n=>n.map(()=>t);S4.props={};const O4=({value:t})=>n=>n.map(t);O4.props={};const M4=({value:t})=>n=>n.map(e=>e[t]);M4.props={};const A4=({value:t})=>()=>t;A4.props={};var emt=function(t){return t!==null&&typeof t!="function"&&isFinite(t.length)};const dw=emt,nmt=function(t){return typeof t=="function"};var rmt=function(t){return t==null};const imt=rmt;var amt={}.toString,omt=function(t,n){return amt.call(t)==="[object "+n+"]"};const em=omt,Id=function(t){return Array.isArray?Array.isArray(t):em(t,"Array")},smt=function(t){var n=typeof t;return t!==null&&n==="object"||n==="function"};function lmt(t,n){if(t){var e;if(Id(t))for(var r=0,i=t.length;r<i&&(e=n(t[r],r),e!==!1);r++);else if(smt(t)){for(var a in t)if(t.hasOwnProperty(a)&&(e=n(t[a],a),e===!1))break}}}var cmt=function(t){return typeof t=="object"&&t!==null};const pw=cmt;var umt=function(t){if(!pw(t)||!em(t,"Object"))return!1;if(Object.getPrototypeOf(t)===null)return!0;for(var n=t;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(t)===n};const Rh=umt;var fmt=function(t,n,e){if(!Id(t)&&!Rh(t))return t;var r=e;return lmt(t,function(i,a){r=n(r,i,a)}),r};const hmt=fmt,vw=function(t){return em(t,"String")};function dmt(t){if(dw(t)){var n=t;return n[n.length-1]}}var pmt=function(t){return em(t,"Number")};const tu=pmt,E4=function(t){return imt(t)?"":t.toString()};var vmt=function(t){var n=E4(t);return n.charAt(0).toLowerCase()+n.substring(1)};const T4=vmt;var gmt=function(t){var n=E4(t);return n.charAt(0).toUpperCase()+n.substring(1)};const us=gmt;function ymt(t,n,e){var r;return function(){var i=this,a=arguments,o=function(){r=null,e||t.apply(i,a)},s=e&&!r;clearTimeout(r),r=setTimeout(o,n),s&&t.apply(i,a)}}var mmt=5;function xmt(t,n){if(Object.hasOwn)return Object.hasOwn(t,n);if(t==null)throw new TypeError("Cannot convert undefined or null to object");return Object.prototype.hasOwnProperty.call(Object(t),n)}function C4(t,n,e,r){e=e||0,r=r||mmt;for(var i in n)if(xmt(n,i)){var a=n[i];a!==null&&Rh(a)?(Rh(t[i])||(t[i]={}),e<r?C4(t[i],a,e+1,r):t[i]=n[i]):Id(a)?(t[i]=[],t[i]=t[i].concat(a)):a!==void 0&&(t[i]=a)}}var bmt=function(t){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];for(var r=0;r<n.length;r+=1)C4(t,n[r]);return t};const nt=bmt;var gw=function(t,n){if(t===n)return!0;if(!t||!n||vw(t)||vw(n))return!1;if(dw(t)||dw(n)){if(t.length!==n.length)return!1;for(var e=!0,r=0;r<t.length&&(e=gw(t[r],n[r]),!!e);r++);return e}if(pw(t)||pw(n)){var i=Object.keys(t),a=Object.keys(n);if(i.length!==a.length)return!1;for(var e=!0,r=0;r<i.length&&(e=gw(t[i[r]],n[i[r]]),!!e);r++);return e}return!1};const wmt=gw,P4=function(t,n){return hmt(t,function(e,r,i){return n.includes(i)||(e[i]=r),e},{})},vl=function(t,n,e){var r,i,a,o,s=0;e||(e={});var l=function(){s=e.leading===!1?0:Date.now(),r=null,o=t.apply(i,a),r||(i=a=null)},c=function(){var u=Date.now();!s&&e.leading===!1&&(s=u);var f=n-(u-s);return i=this,a=arguments,f<=0||f>n?(r&&(clearTimeout(r),r=null),s=u,o=t.apply(i,a),r||(i=a=null)):!r&&e.trailing!==!1&&(r=setTimeout(l,f)),o};return c.cancel=function(){clearTimeout(r),s=0,r=i=a=null},c};function Ze(t,n){if(t!==null)return{type:"column",value:t,field:n}}function nm(t,n){const e=Ze(t,n);return Object.assign(Object.assign({},e),{inferred:!0})}function jg(t,n){if(t!==null)return{type:"column",value:t,field:n,visual:!0}}function Smt(t,n){const e=Ze(t,n);return Object.assign(Object.assign({},e),{constant:!1})}function Yo(t,n){const e=[];for(const r of t)e[r]=n;return e}function Ht(t,n){const e=t[n];if(!e)return[null,null];const{value:r,field:i=null}=e;return[r,i]}function Bh(t,...n){for(const e of n)if(typeof e=="string"){const[r,i]=Ht(t,e);if(r!==null)return[r,i]}else return[e,null];return[null,null]}function dM(t){return t instanceof Date?!1:typeof t=="object"}const Fd=()=>(t,n)=>{const{encode:e}=n,{y1:r}=e;return r!==void 0?[t,n]:[t,nt({},n,{encode:{y1:nm(Yo(t,0))}})]};Fd.props={};function Xe(t,n){return t==null||n==null?NaN:t<n?-1:t>n?1:t>=n?0:NaN}function Omt(t,n){return t==null||n==null?NaN:n<t?-1:n>t?1:n>=t?0:NaN}function eu(t){let n,e,r;t.length!==2?(n=Xe,e=(s,l)=>Xe(t(s),l),r=(s,l)=>t(s)-l):(n=t===Xe||t===Omt?t:Mmt,e=t,r=t);function i(s,l,c=0,u=s.length){if(c<u){if(n(l,l)!==0)return u;do{const f=c+u>>>1;e(s[f],l)<0?c=f+1:u=f}while(c<u)}return c}function a(s,l,c=0,u=s.length){if(c<u){if(n(l,l)!==0)return u;do{const f=c+u>>>1;e(s[f],l)<=0?c=f+1:u=f}while(c<u)}return c}function o(s,l,c=0,u=s.length){const f=i(s,l,c,u-1);return f>c&&r(s[f-1],l)>-r(s[f],l)?f-1:f}return{left:i,center:o,right:a}}function Mmt(){return 0}function yw(t){return t===null?NaN:+t}function*Amt(t,n){if(n===void 0)for(let e of t)e!=null&&(e=+e)>=e&&(yield e);else{let e=-1;for(let r of t)(r=n(r,++e,t))!=null&&(r=+r)>=r&&(yield r)}}const k4=eu(Xe),Emt=k4.right,Tmt=k4.left,Cmt=eu(yw).center,Pmt=Emt;function _4(t,n){let e=0;if(n===void 0)for(let r of t)r!=null&&(r=+r)>=r&&++e;else{let r=-1;for(let i of t)(i=n(i,++r,t))!=null&&(i=+i)>=i&&++e}return e}function kmt(t,n){let e=0,r,i=0,a=0;if(n===void 0)for(let o of t)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++e,a+=r*(o-i));else{let o=-1;for(let s of t)(s=n(s,++o,t))!=null&&(s=+s)>=s&&(r=s-i,i+=r/++e,a+=r*(s-i))}if(e>1)return a/(e-1)}function L4(t,n){const e=kmt(t,n);return e&&Math.sqrt(e)}function Wa(t,n){let e,r;if(n===void 0)for(const i of t)i!=null&&(e===void 0?i>=i&&(e=r=i):(e>i&&(e=i),r<i&&(r=i)));else{let i=-1;for(let a of t)(a=n(a,++i,t))!=null&&(e===void 0?a>=a&&(e=r=a):(e>a&&(e=a),r<a&&(r=a)))}return[e,r]}let _mt=class extends Map{constructor(n,e=Fmt){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),n!=null)for(const[r,i]of n)this.set(r,i)}get(n){return super.get(jk(this,n))}has(n){return super.has(jk(this,n))}set(n,e){return super.set(Lmt(this,n),e)}delete(n){return super.delete(Imt(this,n))}};function jk({_intern:t,_key:n},e){const r=n(e);return t.has(r)?t.get(r):e}function Lmt({_intern:t,_key:n},e){const r=n(e);return t.has(r)?t.get(r):(t.set(r,e),e)}function Imt({_intern:t,_key:n},e){const r=n(e);return t.has(r)&&(e=t.get(r),t.delete(r)),e}function Fmt(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Nh(t){return t}function Be(t,...n){return rm(t,Nh,Nh,n)}function pM(t,...n){return rm(t,Array.from,Nh,n)}function vM(t,n,...e){return rm(t,Nh,n,e)}function I4(t,n,...e){return rm(t,Array.from,n,e)}function rm(t,n,e,r){return function i(a,o){if(o>=r.length)return e(a);const s=new _mt,l=r[o++];let c=-1;for(const u of a){const f=l(u,++c,a),h=s.get(f);h?h.push(u):s.set(f,[u])}for(const[u,f]of s)s.set(u,i(f,o));return n(s)}(t,0)}function Dmt(t,n){return Array.from(n,e=>t[e])}function Va(t,...n){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");t=Array.from(t);let[e]=n;if(e&&e.length!==2||n.length>1){const r=Uint32Array.from(t,(i,a)=>a);return n.length>1?(n=n.map(i=>t.map(i)),r.sort((i,a)=>{for(const o of n){const s=$h(o[i],o[a]);if(s)return s}})):(e=t.map(e),r.sort((i,a)=>$h(e[i],e[a]))),Dmt(t,r)}return t.sort(F4(e))}function F4(t=Xe){if(t===Xe)return $h;if(typeof t!="function")throw new TypeError("compare is not a function");return(n,e)=>{const r=t(n,e);return r||r===0?r:(t(e,e)===0)-(t(n,n)===0)}}function $h(t,n){return(t==null||!(t>=t))-(n==null||!(n>=n))||(t<n?-1:t>n?1:0)}function Rmt(t,n,e){return(n.length!==2?Va(vM(t,n,e),([r,i],[a,o])=>Xe(i,o)||Xe(r,a)):Va(Be(t,e),([r,i],[a,o])=>n(i,o)||Xe(r,a))).map(([r])=>r)}var Bmt=Array.prototype,Nmt=Bmt.slice;function tx(t){return()=>t}const $mt=Math.sqrt(50),jmt=Math.sqrt(10),zmt=Math.sqrt(2);function zg(t,n,e){const r=(n-t)/Math.max(0,e),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=$mt?10:a>=jmt?5:a>=zmt?2:1;let s,l,c;return i<0?(c=Math.pow(10,-i)/o,s=Math.round(t*c),l=Math.round(n*c),s/c<t&&++s,l/c>n&&--l,c=-c):(c=Math.pow(10,i)*o,s=Math.round(t/c),l=Math.round(n/c),s*c<t&&++s,l*c>n&&--l),l<s&&.5<=e&&e<2?zg(t,n,e*2):[s,l,c]}function Gmt(t,n,e){if(n=+n,t=+t,e=+e,!(e>0))return[];if(t===n)return[t];const r=n<t,[i,a,o]=r?zg(n,t,e):zg(t,n,e);if(!(a>=i))return[];const s=a-i+1,l=new Array(s);if(r)if(o<0)for(let c=0;c<s;++c)l[c]=(a-c)/-o;else for(let c=0;c<s;++c)l[c]=(a-c)*o;else if(o<0)for(let c=0;c<s;++c)l[c]=(i+c)/-o;else for(let c=0;c<s;++c)l[c]=(i+c)*o;return l}function mw(t,n,e){return n=+n,t=+t,e=+e,zg(t,n,e)[2]}function Ymt(t,n,e){let r;for(;;){const i=mw(t,n,e);if(i===r||i===0||!isFinite(i))return[t,n];i>0?(t=Math.floor(t/i)*i,n=Math.ceil(n/i)*i):i<0&&(t=Math.ceil(t*i)/i,n=Math.floor(n*i)/i),r=i}}function Wmt(t){return Math.max(1,Math.ceil(Math.log(_4(t))/Math.LN2)+1)}function Vmt(){var t=Nh,n=Wa,e=Wmt;function r(i){Array.isArray(i)||(i=Array.from(i));var a,o=i.length,s,l,c=new Array(o);for(a=0;a<o;++a)c[a]=t(i[a],a,i);var u=n(c),f=u[0],h=u[1],d=e(c,f,h);if(!Array.isArray(d)){const x=h,b=+d;if(n===Wa&&([f,h]=Ymt(f,h,b)),d=Gmt(f,h,b),d[0]<=f&&(l=mw(f,h,b)),d[d.length-1]>=h)if(x>=h&&n===Wa){const w=mw(f,h,b);isFinite(w)&&(w>0?h=(Math.floor(h/w)+1)*w:w<0&&(h=(Math.ceil(h*-w)+1)/-w))}else d.pop()}for(var p=d.length,v=0,g=p;d[v]<=f;)++v;for(;d[g-1]>h;)--g;(v||g<p)&&(d=d.slice(v,g),p=g-v);var y=new Array(p+1),m;for(a=0;a<=p;++a)m=y[a]=[],m.x0=a>0?d[a-1]:f,m.x1=a<p?d[a]:h;if(isFinite(l)){if(l>0)for(a=0;a<o;++a)(s=c[a])!=null&&f<=s&&s<=h&&y[Math.min(p,Math.floor((s-f)/l))].push(i[a]);else if(l<0){for(a=0;a<o;++a)if((s=c[a])!=null&&f<=s&&s<=h){const x=Math.floor((f-s)*l);y[Math.min(p,x+(d[x]<=s))].push(i[a])}}}else for(a=0;a<o;++a)(s=c[a])!=null&&f<=s&&s<=h&&y[Pmt(d,s,0,p)].push(i[a]);return y}return r.value=function(i){return arguments.length?(t=typeof i=="function"?i:tx(i),r):t},r.domain=function(i){return arguments.length?(n=typeof i=="function"?i:tx([i[0],i[1]]),r):n},r.thresholds=function(i){return arguments.length?(e=typeof i=="function"?i:tx(Array.isArray(i)?Nmt.call(i):i),r):e},r}function he(t,n){let e;if(n===void 0)for(const r of t)r!=null&&(e<r||e===void 0&&r>=r)&&(e=r);else{let r=-1;for(let i of t)(i=n(i,++r,t))!=null&&(e<i||e===void 0&&i>=i)&&(e=i)}return e}function Nu(t,n){let e,r=-1,i=-1;if(n===void 0)for(const a of t)++i,a!=null&&(e<a||e===void 0&&a>=a)&&(e=a,r=i);else for(let a of t)(a=n(a,++i,t))!=null&&(e<a||e===void 0&&a>=a)&&(e=a,r=i);return r}function Hr(t,n){let e;if(n===void 0)for(const r of t)r!=null&&(e>r||e===void 0&&r>=r)&&(e=r);else{let r=-1;for(let i of t)(i=n(i,++r,t))!=null&&(e>i||e===void 0&&i>=i)&&(e=i)}return e}function im(t,n){let e,r=-1,i=-1;if(n===void 0)for(const a of t)++i,a!=null&&(e>a||e===void 0&&a>=a)&&(e=a,r=i);else for(let a of t)(a=n(a,++i,t))!=null&&(e>a||e===void 0&&a>=a)&&(e=a,r=i);return r}function gM(t,n,e=0,r=1/0,i){if(n=Math.floor(n),e=Math.floor(Math.max(0,e)),r=Math.floor(Math.min(t.length-1,r)),!(e<=n&&n<=r))return t;for(i=i===void 0?$h:F4(i);r>e;){if(r-e>600){const l=r-e+1,c=n-e+1,u=Math.log(l),f=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*f*(l-f)/l)*(c-l/2<0?-1:1),d=Math.max(e,Math.floor(n-c*f/l+h)),p=Math.min(r,Math.floor(n+(l-c)*f/l+h));gM(t,n,d,p,i)}const a=t[n];let o=e,s=r;for(sf(t,e,n),i(t[r],a)>0&&sf(t,e,r);o<s;){for(sf(t,o,s),++o,--s;i(t[o],a)<0;)++o;for(;i(t[s],a)>0;)--s}i(t[e],a)===0?sf(t,e,s):(++s,sf(t,s,r)),s<=n&&(e=s+1),n<=s&&(r=s-1)}return t}function sf(t,n,e){const r=t[n];t[n]=t[e],t[e]=r}function Hmt(t,n=Xe){let e,r=!1;if(n.length===1){let i;for(const a of t){const o=n(a);(r?Xe(o,i)>0:Xe(o,o)===0)&&(e=a,i=o,r=!0)}}else for(const i of t)(r?n(i,e)>0:n(i,i)===0)&&(e=i,r=!0);return e}function am(t,n,e){if(t=Float64Array.from(Amt(t,e)),!(!(r=t.length)||isNaN(n=+n))){if(n<=0||r<2)return Hr(t);if(n>=1)return he(t);var r,i=(r-1)*n,a=Math.floor(i),o=he(gM(t,a).subarray(0,a+1)),s=Hr(t.subarray(a+1));return o+(s-o)*(i-a)}}function Xmt(t,n,e=yw){if(!isNaN(n=+n)){if(r=Float64Array.from(t,(s,l)=>yw(e(t[l],l,t))),n<=0)return im(r);if(n>=1)return Nu(r);var r,i=Uint32Array.from(t,(s,l)=>l),a=r.length-1,o=Math.floor(a*n);return gM(i,o,0,a,(s,l)=>$h(r[s],r[l])),o=Hmt(i.subarray(0,o+1),s=>r[s]),o>=0?o:-1}}function Umt(t,n,e){const r=_4(t),i=L4(t);return r&&i?Math.ceil((e-n)*Math.cbrt(r)/(3.49*i)):1}function jh(t,n){let e=0,r=0;if(n===void 0)for(let i of t)i!=null&&(i=+i)>=i&&(++e,r+=i);else{let i=-1;for(let a of t)(a=n(a,++i,t))!=null&&(a=+a)>=a&&(++e,r+=a)}if(e)return r/e}function yM(t,n){return am(t,.5,n)}function qmt(t,n){return Xmt(t,.5,n)}function ui(t,n){let e=0;if(n===void 0)for(let r of t)(r=+r)&&(e+=r);else{let r=-1;for(let i of t)(i=+n(i,++r,t))&&(e+=i)}return e}var Zmt=globalThis&&globalThis.__awaiter||function(t,n,e,r){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(t,n||[])).next())})};function gl(t){return t}function mM(t){return t.reduce((n,e)=>(r,...i)=>e(n(r,...i),...i),gl)}function Kmt(t){return t.reduce((n,e)=>r=>Zmt(this,void 0,void 0,function*(){const i=yield n(r);return e(i)}),gl)}function xM(t){return t.replace(/( |^)[a-z]/g,n=>n.toUpperCase())}function nu(t=""){throw new Error(t)}function bM(t,n){const{attributes:e}=n,r=new Set(["id","className"]);for(const[i,a]of Object.entries(e))r.has(i)||(i==="transform"&&t.attr(i,""),t.attr(i,a))}function Oe(t){return t!=null&&!Number.isNaN(t)}function Qmt(t){const n=new Map;return e=>{if(n.has(e))return n.get(e);const r=t(e);return n.set(e,r),r}}function Jmt(t,n){const{transform:e}=t.style,i=(a=>a==="none"||a===void 0)(e)?"":e;t.style.transform=`${i} ${n}`.trimStart()}function ct(t,n){return D4(t,n)||{}}function D4(t,n){const e=Object.entries(t||{}).filter(([r])=>r.startsWith(n)).map(([r,i])=>[T4(r.replace(n,"").trim()),i]).filter(([r])=>!!r);return e.length===0?null:Object.fromEntries(e)}function t1t(t,n){return Object.fromEntries(Object.entries(t).filter(([e])=>n.find(r=>e.startsWith(r))))}function ex(t,...n){return Object.fromEntries(Object.entries(t).filter(([e])=>n.every(r=>!e.startsWith(r))))}function zk(t,n){if(t===void 0)return null;if(typeof t=="number")return t;const e=+t.replace("%","");return Number.isNaN(e)?null:e/100*n}function zh(t){return typeof t=="object"&&!(t instanceof Date)&&t!==null&&!Array.isArray(t)}function to(t){return t===null||t===!1}function R4(t,n,e=5,r=0){if(!(r>=e)){for(const i of Object.keys(n)){const a=n[i];!Rh(a)||!Rh(t[i])?t[i]=a:R4(t[i],a,e,r+1)}return t}}function fs(t,n){return Object.entries(t).reduce((e,[r,i])=>(e[r]=n(i,r,t),e),{})}function Fl(t){return t.map((n,e)=>e)}function e1t(t){return t[0]}function B4(t){return t[t.length-1]}function n1t(t){return Array.from(new Set(t))}function N4(t,n){const e=[[],[]];return t.forEach(r=>{e[n(r)?0:1].push(r)}),e}function $4(t,n=t.length){if(n===1)return t.map(r=>[r]);const e=[];for(let r=0;r<t.length;r++){const i=t.slice(r+1);$4(i,n-1).forEach(o=>{e.push([t[r],...o])})}return e}function r1t(t){if(t.length===1)return[t];const n=[];for(let e=1;e<=t.length;e++)n.push(...$4(t,e));return n}function hs(t,n,e){const{encode:r}=e;if(t===null)return[n];const i=i1t(t).map(o=>{var s;return[o,(s=Ht(r,o))===null||s===void 0?void 0:s[0]]}).filter(([,o])=>Oe(o)),a=o=>i.map(([,s])=>s[o]).join("-");return Array.from(Be(n,a).values())}function j4(t){return Array.isArray(t)?s1t(t):typeof t=="function"?o1t(t):t==="series"?a1t:t==="value"?l1t:t==="sum"?c1t:t==="maxIndex"?u1t:()=>null}function z4(t,n){for(const e of t)e.sort(n)}function G4(t,n){return(n==null?void 0:n.domain)||Array.from(new Set(t))}function i1t(t){return Array.isArray(t)?t:[t]}function a1t(t,n,e){return Dd(r=>e[r])}function o1t(t){return(n,e,r)=>Dd(i=>t(n[i]))}function s1t(t){return(n,e,r)=>(i,a)=>t.reduce((o,s)=>o!==0?o:Xe(n[i][s],n[a][s]),0)}function l1t(t,n,e){return Dd(r=>n[r])}function c1t(t,n,e){const r=Fl(t),i=Array.from(Be(r,o=>e[+o]).entries()),a=new Map(i.map(([o,s])=>[o,s.reduce((l,c)=>l+ +n[c])]));return Dd(o=>a.get(e[o]))}function u1t(t,n,e){const r=Fl(t),i=Array.from(Be(r,o=>e[+o]).entries()),a=new Map(i.map(([o,s])=>[o,Nu(s,l=>n[l])]));return Dd(o=>a.get(e[o]))}function Dd(t){return(n,e)=>Xe(t(n),t(e))}const Y4=(t={})=>{const{groupBy:n="x",orderBy:e=null,reverse:r=!1,y:i="y",y1:a="y1",series:o=!0}=t;return(s,l)=>{const{data:c,encode:u,style:f={}}=l,[h,d]=Ht(u,"y"),[p,v]=Ht(u,"y1"),[g]=o?Bh(u,"series","color"):Ht(u,"color"),y=hs(n,s,l),x=j4(e)(c,h,g);x&&z4(y,x);const b=new Array(s.length),w=new Array(s.length),S=new Array(s.length),O=[],M=[];for(const _ of y){r&&_.reverse();const k=p?+p[_[0]]:0,I=[],L=[];for(const W of _){const V=S[W]=+h[W]-k;V<0?L.push(W):V>=0&&I.push(W)}const F=I.length>0?I:L,B=L.length>0?L:I;let D=I.length-1,N=0;for(;D>0&&h[F[D]]===0;)D--;for(;N<B.length-1&&h[B[N]]===0;)N++;O.push(F[D]),M.push(B[N]);let j=k;for(const W of L.reverse()){const V=S[W];j=b[W]=(w[W]=j)+V}let Y=k;for(const W of I){const V=S[W];V>0?Y=b[W]=(w[W]=Y)+V:b[W]=w[W]=Y}}const A=new Set(O),T=new Set(M),C=i==="y"?b:w,P=a==="y"?b:w;return[s,nt({},l,{encode:{y0:nm(h,d),y:Ze(C,d),y1:Ze(P,v)},style:Object.assign({first:(_,k)=>A.has(k),last:(_,k)=>T.has(k)},f)})]}};Y4.props={};function lf(t){return Math.abs(t)>10?String(t):t.toString().padStart(2,"0")}function f1t(t){const n=t.getFullYear(),e=lf(t.getMonth()+1),r=lf(t.getDate()),i=`${n}-${e}-${r}`,a=t.getHours(),o=t.getMinutes(),s=t.getSeconds();return a||o||s?`${i} ${lf(a)}:${lf(o)}:${lf(s)}`:i}const om=(t={})=>{const{channel:n="x"}=t;return(e,r)=>{const{encode:i}=r,{tooltip:a}=r;if(to(a))return[e,r];const{title:o}=a;if(o!==void 0)return[e,r];const s=Object.keys(i).filter(c=>c.startsWith(n)).filter(c=>!i[c].inferred).map(c=>Ht(i,c)).filter(([c])=>c).map(c=>c[0]);if(s.length===0)return[e,r];const l=[];for(const c of e)l[c]={value:s.map(u=>u[c]instanceof Date?f1t(u[c]):u[c]).join(", ")};return[e,nt({},r,{tooltip:{title:l}})]}};om.props={};const Dl=()=>(t,n)=>{const{encode:e}=n,{x:r}=e;return r!==void 0?[t,n]:[t,nt({},n,{encode:{x:nm(Yo(t,0))},scale:{x:{guide:null}}})]};Dl.props={};const sm=()=>(t,n)=>{const{encode:e}=n,{y:r}=e;return r!==void 0?[t,n]:[t,nt({},n,{encode:{y:nm(Yo(t,0))},scale:{y:{guide:null}}})]};sm.props={};const W4=()=>(t,n)=>{const{encode:e}=n,{size:r}=e;return r!==void 0?[t,n]:[t,nt({},n,{encode:{size:jg(Yo(t,3))}})]};W4.props={};var h1t=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};const V4=()=>(t,n)=>{const{encode:e}=n,{key:r}=e,i=h1t(e,["key"]);if(r!==void 0)return[t,n];const a=Object.values(i).map(({value:s})=>s),o=t.map(s=>a.filter(Array.isArray).map(l=>l[s]).join("-"));return[t,nt({},n,{encode:{key:Ze(o)}})]};V4.props={};const wM=()=>(t,n)=>{const{encode:e}=n,{series:r,color:i}=e;if(r!==void 0||i===void 0)return[t,n];const[a,o]=Ht(e,"color");return[t,nt({},n,{encode:{series:Ze(a,o)}})]};wM.props={};const H4=()=>(t,n)=>{const{data:e}=n;return!Array.isArray(e)||e.some(dM)?[t,n]:[t,nt({},n,{encode:{y:Ze(e)}})]};H4.props={};const X4=()=>(t,n)=>{const{data:e}=n;return!Array.isArray(e)||e.some(dM)?[t,n]:[t,nt({},n,{encode:{x:Ze(e)}})]};X4.props={};const U4=()=>(t,n)=>{const{encode:e}=n,{y1:r}=e;if(r)return[t,n];const[i]=Ht(e,"y");return[t,nt({},n,{encode:{y1:Ze([...i])}})]};U4.props={};const q4=()=>(t,n)=>{const{encode:e}=n,{x1:r}=e;if(r)return[t,n];const[i]=Ht(e,"x");return[t,nt({},n,{encode:{x1:Ze([...i])}})]};q4.props={};const lm=t=>{const{channel:n}=t;return(e,r)=>{const{encode:i,tooltip:a}=r;if(to(a))return[e,r];const{items:o=[]}=a;if(!o||o.length>0)return[e,r];const l=(Array.isArray(n)?n:[n]).flatMap(c=>Object.keys(i).filter(u=>u.startsWith(c)).map(u=>{const{field:f,value:h,inferred:d=!1,aggregate:p}=i[u];return d?null:p&&h?{channel:u}:f?{field:f}:h?{channel:u}:null}).filter(u=>u!==null));return[e,nt({},r,{tooltip:{items:l}})]}};lm.props={};const SM=()=>(t,n)=>[t,nt({scale:{x:{padding:0},y:{padding:0}}},n)];SM.props={};var Gk=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};const cm=()=>(t,n)=>{const{data:e,style:r={}}=n,i=Gk(n,["data","style"]),{x:a,y:o}=r,s=Gk(r,["x","y"]);if(a==null||o==null)return[t,n];const l=a||0,c=o||0;return[[0],nt({},i,{data:[0],cartesian:!0,encode:{x:Ze([l]),y:Ze([c])},scale:{x:{type:"identity",independent:!0,guide:null},y:{type:"identity",independent:!0,guide:null}},style:s})]};cm.props={};const Z4=()=>(t,n)=>{const{style:e={}}=n;return[t,nt({},n,{style:Object.assign(Object.assign({},e),Object.fromEntries(Object.entries(e).filter(([,r])=>typeof r=="function").map(([r,i])=>[r,()=>i])))})]};Z4.props={};const um=()=>(t,n)=>{const{data:e}=n;if(!Array.isArray(e)||e.some(dM))return[t,n];const r=Array.isArray(e[0])?e:[e],i=r.map(o=>o[0]),a=r.map(o=>o[1]);return[t,nt({},n,{encode:{x:Ze(i),y:Ze(a)}})]};um.props={};const K4=()=>(t,n)=>{const{style:e={},encode:r}=n,{series:i}=r,{gradient:a}=e;return!a||i?[t,n]:[t,nt({},n,{encode:{series:jg(Yo(t,void 0))}})]};K4.props={};var d1t=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};const Q4=(t={})=>{const{groupBy:n="x",reverse:e=!1,orderBy:r,padding:i}=t;return d1t(t,["groupBy","reverse","orderBy","padding"]),(a,o)=>{const{data:s,encode:l,scale:c}=o,{series:u}=c,[f]=Ht(l,"y"),[h]=Bh(l,"series","color"),d=G4(h,u),p=hs(n,a,o),g=j4(r)(s,f,h);g&&z4(p,g);const y=new Array(a.length);for(const m of p){e&&m.reverse();for(let x=0;x<m.length;x++)y[m[x]]=d[x]}return[a,nt({},o,{scale:{series:{domain:d,paddingInner:i}},encode:{series:Ze(y)}})]}};Q4.props={};const J4=t=>{const{groupBy:n=["x"],reducer:e=(o,s)=>s[o[0]],orderBy:r=null,reverse:i=!1,duration:a}=t;return(o,s)=>{const{encode:l}=s,u=(Array.isArray(n)?n:[n]).map(g=>[g,Ht(l,g)[0]]);if(u.length===0)return[o,s];let f=[o];for(const[,g]of u){const y=[];for(const m of f){const x=Array.from(Be(m,b=>g[b]).values());y.push(...x)}f=y}if(r){const[g]=Ht(l,r);g&&f.sort((y,m)=>e(y,g)-e(m,g)),i&&f.reverse()}const h=(a||3e3)/f.length,[d]=a?[Yo(o,h)]:Bh(l,"enterDuration",Yo(o,h)),[p]=Bh(l,"enterDelay",Yo(o,0)),v=new Array(o.length);for(let g=0,y=0;g<f.length;g++){const m=f[g],x=he(m,b=>+d[b]);for(const b of m)v[b]=+p[b]+y;y+=x}return[o,nt({},s,{encode:{enterDuration:jg(d),enterDelay:jg(v)}})]}};J4.props={};var p1t=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};function v1t(t){return typeof t=="function"?t:{min:(e,r)=>Hr(e,i=>r[+i]),max:(e,r)=>he(e,i=>r[+i]),first:(e,r)=>r[e[0]],last:(e,r)=>r[e[e.length-1]],mean:(e,r)=>jh(e,i=>r[+i]),median:(e,r)=>yM(e,i=>r[+i]),sum:(e,r)=>ui(e,i=>r[+i]),deviation:(e,r)=>L4(e,i=>r[+i])}[t]||he}const tj=(t={})=>{const{groupBy:n="x",basis:e="max"}=t;return(r,i)=>{const{encode:a,tooltip:o}=i,s=p1t(a,["x"]),l=Object.entries(s).filter(([p])=>p.startsWith("y")).map(([p])=>[p,Ht(a,p)[0]]),[,c]=l.find(([p])=>p==="y"),u=l.map(([p])=>[p,new Array(r.length)]),f=hs(n,r,i),h=v1t(e);for(const p of f){const v=h(p,c);for(const g of p)for(let y=0;y<l.length;y++){const[,m]=l[y],[,x]=u[y];x[g]=+m[g]/v}}const d=to(o)||(o==null?void 0:o.items)&&(o==null?void 0:o.items.length)!==0;return[r,nt({},i,Object.assign({encode:Object.fromEntries(u.map(([p,v])=>[p,Ze(v,Ht(a,p)[1])]))},!d&&a.y0&&{tooltip:{items:[{channel:"y0"}]}}))]}};tj.props={};function ru(t,...n){return n.reduce((e,r)=>i=>e(r(i)),t)}function Gg(t,n){return n-t?e=>(e-t)/(n-t):e=>.5}function g1t(t,n){const e=n<t?n:t,r=t>n?t:n;return i=>Math.min(Math.max(e,i),r)}function OM(t,n,e,r,i){let a=e||0,o=r||t.length;const s=i||(l=>l);for(;a<o;){const l=Math.floor((a+o)/2);s(t[l])>n?o=l:a=l+1}return a}const xw=Math.sqrt(50),bw=Math.sqrt(10),ww=Math.sqrt(2);function Hv(t,n,e){const r=(n-t)/Math.max(0,e),i=Math.floor(Math.log(r)/Math.LN10),a=r/10**i;return i>=0?(a>=xw?10:a>=bw?5:a>=ww?2:1)*10**i:-(10**-i)/(a>=xw?10:a>=bw?5:a>=ww?2:1)}function Yk(t,n,e){const r=Math.abs(n-t)/Math.max(0,e);let i=10**Math.floor(Math.log(r)/Math.LN10);const a=r/i;return a>=xw?i*=10:a>=bw?i*=5:a>=ww&&(i*=2),n<t?-i:i}const ej=(t,n,e=5)=>{const r=[t,n];let i=0,a=r.length-1,o=r[i],s=r[a],l;return s<o&&([o,s]=[s,o],[i,a]=[a,i]),l=Hv(o,s,e),l>0?(o=Math.floor(o/l)*l,s=Math.ceil(s/l)*l,l=Hv(o,s,e)):l<0&&(o=Math.ceil(o*l)/l,s=Math.floor(s*l)/l,l=Hv(o,s,e)),l>0?(r[i]=Math.floor(o/l)*l,r[a]=Math.ceil(s/l)*l):l<0&&(r[i]=Math.ceil(o*l)/l,r[a]=Math.floor(s*l)/l),r},Gh=1e3,Yh=Gh*60,Wh=Yh*60,yl=Wh*24,Cc=yl*7,nj=yl*30,rj=yl*365;function qn(t,n,e,r){const i=(c,u)=>{const f=d=>r(d)%u===0;let h=u;for(;h&&!f(c);)e(c,-1),h-=1;return c},a=(c,u)=>{u&&i(c,u),n(c)},o=(c,u)=>{const f=new Date(+c);return a(f,u),f},s=(c,u)=>{const f=new Date(+c-1);return a(f,u),e(f,u),a(f),f};return{ceil:s,floor:o,range:(c,u,f,h)=>{const d=[],p=Math.floor(f),v=h?s(c,f):s(c);for(let g=v;+g<+u;e(g,p),a(g))d.push(new Date(+g));return d},duration:t}}const y1t=qn(1,t=>t,(t,n=1)=>{t.setTime(+t+n)},t=>t.getTime()),m1t=qn(Gh,t=>{t.setMilliseconds(0)},(t,n=1)=>{t.setTime(+t+Gh*n)},t=>t.getSeconds()),x1t=qn(Yh,t=>{t.setSeconds(0,0)},(t,n=1)=>{t.setTime(+t+Yh*n)},t=>t.getMinutes()),b1t=qn(Wh,t=>{t.setMinutes(0,0,0)},(t,n=1)=>{t.setTime(+t+Wh*n)},t=>t.getHours()),w1t=qn(yl,t=>{t.setHours(0,0,0,0)},(t,n=1)=>{t.setTime(+t+yl*n)},t=>t.getDate()-1),ij=qn(nj,t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,n=1)=>{const e=t.getMonth();t.setMonth(e+n)},t=>t.getMonth()),S1t=qn(Cc,t=>{t.setDate(t.getDate()-t.getDay()%7),t.setHours(0,0,0,0)},(t,n=1)=>{t.setTime(+t+Cc*n)},t=>{const n=ij.floor(t),e=new Date(+t);return Math.floor((+e-+n)/Cc)}),O1t=qn(rj,t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n=1)=>{const e=t.getFullYear();t.setFullYear(e+n)},t=>t.getFullYear()),aj={millisecond:y1t,second:m1t,minute:x1t,hour:b1t,day:w1t,week:S1t,month:ij,year:O1t},M1t=qn(1,t=>t,(t,n=1)=>{t.setTime(+t+n)},t=>t.getTime()),A1t=qn(Gh,t=>{t.setUTCMilliseconds(0)},(t,n=1)=>{t.setTime(+t+Gh*n)},t=>t.getUTCSeconds()),E1t=qn(Yh,t=>{t.setUTCSeconds(0,0)},(t,n=1)=>{t.setTime(+t+Yh*n)},t=>t.getUTCMinutes()),T1t=qn(Wh,t=>{t.setUTCMinutes(0,0,0)},(t,n=1)=>{t.setTime(+t+Wh*n)},t=>t.getUTCHours()),C1t=qn(yl,t=>{t.setUTCHours(0,0,0,0)},(t,n=1)=>{t.setTime(+t+yl*n)},t=>t.getUTCDate()-1),oj=qn(nj,t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,n=1)=>{const e=t.getUTCMonth();t.setUTCMonth(e+n)},t=>t.getUTCMonth()),P1t=qn(Cc,t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7)%7),t.setUTCHours(0,0,0,0)},(t,n=1)=>{t.setTime(+t+Cc*n)},t=>{const n=oj.floor(t),e=new Date(+t);return Math.floor((+e-+n)/Cc)}),k1t=qn(rj,t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n=1)=>{const e=t.getUTCFullYear();t.setUTCFullYear(e+n)},t=>t.getUTCFullYear()),sj={millisecond:M1t,second:A1t,minute:E1t,hour:T1t,day:C1t,week:P1t,month:oj,year:k1t};function _1t(t){const n=t?sj:aj,{year:e,month:r,week:i,day:a,hour:o,minute:s,second:l,millisecond:c}=n;return{tickIntervals:[[l,1],[l,5],[l,15],[l,30],[s,1],[s,5],[s,15],[s,30],[o,1],[o,3],[o,6],[o,12],[a,1],[a,2],[i,1],[r,1],[r,3],[e,1]],year:e,millisecond:c}}function lj(t,n,e,r,i){const a=+t,o=+n,{tickIntervals:s,year:l,millisecond:c}=_1t(i),u=([g,y])=>g.duration*y,f=r?(o-a)/r:e||5,h=r||(o-a)/f,d=s.length,p=OM(s,h,0,d,u);let v;if(p===d){const g=Yk(a/l.duration,o/l.duration,f);v=[l,g]}else if(p){const g=h/u(s[p-1])<u(s[p])/h,[y,m]=g?s[p-1]:s[p],x=r?Math.ceil(r/y.duration):m;v=[y,x]}else{const g=Math.max(Yk(a,o,f),1);v=[c,g]}return v}const L1t=(t,n,e,r,i)=>{const a=t>n,o=a?n:t,s=a?t:n,[l,c]=lj(o,s,e,r,i),u=[l.floor(o,c),l.ceil(s,c)];return a?u.reverse():u};var cj=function(t){return t!==null&&typeof t!="function"&&isFinite(t.length)},I1t={}.toString,Rd=function(t,n){return I1t.call(t)==="[object "+n+"]"};const uj=function(t){return Rd(t,"Function")};var F1t=function(t){return t==null};const fj=function(t){return Array.isArray?Array.isArray(t):Rd(t,"Array")},D1t=function(t){var n=typeof t;return t!==null&&n==="object"||n==="function"};function R1t(t,n){if(t){var e;if(fj(t))for(var r=0,i=t.length;r<i&&(e=n(t[r],r),e!==!1);r++);else if(D1t(t)){for(var a in t)if(t.hasOwnProperty(a)&&(e=n(t[a],a),e===!1))break}}}var B1t=function(t){return typeof t=="object"&&t!==null},Wk=function(t){if(!B1t(t)||!Rd(t,"Object"))return!1;if(Object.getPrototypeOf(t)===null)return!0;for(var n=t;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(t)===n};const N1t=function(t){return Rd(t,"String")};var Vh=function(t){return Rd(t,"Number")},$1t=Object.values?function(t){return Object.values(t)}:function(t){var n=[];return R1t(t,function(e,r){uj(t)&&r==="prototype"||n.push(e)}),n},j1t=function(t){return t===null},z1t=function(t){return t===void 0};const G1t=function(t,n){if(!uj(t))throw new TypeError("Expected a function");var e=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var a=n?n.apply(this,r):r[0],o=e.cache;if(o.has(a))return o.get(a);var s=t.apply(this,r);return o.set(a,s),s};return e.cache=new Map,e};var Y1t=5;function hj(t,n,e,r){e=e||0,r=r||Y1t;for(var i in n)if(n.hasOwnProperty(i)){var a=n[i];a!==null&&Wk(a)?(Wk(t[i])||(t[i]={}),e<r?hj(t[i],a,e+1,r):t[i]=n[i]):fj(a)?(t[i]=[],t[i]=t[i].concat(a)):a!==void 0&&(t[i]=a)}}var Vk=function(t){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];for(var r=0;r<n.length;r+=1)hj(t,n[r]);return t},dj=function(t,n){if(!cj(t))return-1;var e=Array.prototype.indexOf;if(e)return e.call(t,n);for(var r=-1,i=0;i<t.length;i++)if(t[i]===n){r=i;break}return r};const ml=function(t){return t};function pj(t){return F1t(t)?0:cj(t)?t.length:Object.keys(t).length}var Vp;G1t(function(t,n){n===void 0&&(n={});var e=n.fontSize,r=n.fontFamily,i=n.fontWeight,a=n.fontStyle,o=n.fontVariant;return Vp||(Vp=document.createElement("canvas").getContext("2d")),Vp.font=[a,o,i,e+"px",r].join(" "),Vp.measureText(N1t(t)?t:"").width},function(t,n){return n===void 0&&(n={}),rl([t],$1t(n)).join("")});function Yg(t){return!z1t(t)&&!j1t(t)&&!Number.isNaN(t)}const vj=t=>n=>-t(-n),MM=(t,n)=>{const e=Math.log(t),r=t===Math.E?Math.log:t===10?Math.log10:t===2?Math.log2:i=>Math.log(i)/e;return n?vj(r):r},AM=(t,n)=>{const e=t===Math.E?Math.exp:r=>t**r;return n?vj(e):e},W1t=(t,n,e,r)=>{const i=t<0,a=MM(r,i),o=AM(r,i),s=t>n,l=s?n:t,c=s?t:n,u=[o(Math.floor(a(l))),o(Math.ceil(a(c)))];return s?u.reverse():u},V1t=t=>n=>{const e=t(n);return Vh(e)?Math.round(e):e};function H1t(t,n){return e=>{e.prototype.rescale=function(){this.initRange(),this.nice();const[r]=this.chooseTransforms();this.composeOutput(r,this.chooseClamp(r))},e.prototype.initRange=function(){const{interpolator:r}=this.options;this.options.range=t(r)},e.prototype.composeOutput=function(r,i){const{domain:a,interpolator:o,round:s}=this.getOptions(),l=n(a.map(r)),c=s?V1t(o):o;this.output=ru(c,l,i,r)},e.prototype.invert=void 0}}function nx(t,n,e){let r=e;return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(n-t)*6*r:r<1/2?n:r<2/3?t+(n-t)*(2/3-r)*6:t}function X1t(t){const n=t[0]/360,e=t[1]/100,r=t[2]/100,i=t[3];if(e===0)return[r*255,r*255,r*255,i];const a=r<.5?r*(1+e):r+e-r*e,o=2*r-a,s=nx(o,a,n+1/3),l=nx(o,a,n),c=nx(o,a,n-1/3);return[s*255,l*255,c*255,i]}function Hk(t){const n=lM.get(t);if(!n)return null;const{model:e,value:r}=n;return e==="rgb"?r:e==="hsl"?X1t(r):null}const iu=(t,n)=>e=>t*(1-e)+n*e,U1t=(t,n)=>{const e=Hk(t),r=Hk(n);return e===null||r===null?e?()=>t:()=>n:i=>{const a=new Array(4);for(let u=0;u<4;u+=1){const f=e[u],h=r[u];a[u]=f*(1-i)+h*i}const[o,s,l,c]=a;return`rgba(${Math.round(o)}, ${Math.round(s)}, ${Math.round(l)}, ${c})`}},Bd=(t,n)=>typeof t=="number"&&typeof n=="number"?iu(t,n):typeof t=="string"&&typeof n=="string"?U1t(t,n):()=>t,q1t=(t,n)=>{const e=iu(t,n);return r=>Math.round(e(r))};function Z1t(t,n){const{second:e,minute:r,hour:i,day:a,week:o,month:s,year:l}=n;return e.floor(t)<t?".SSS":r.floor(t)<t?":ss":i.floor(t)<t?"hh:mm":a.floor(t)<t?"hh A":s.floor(t)<t?o.floor(t)<t?"MMM DD":"ddd DD":l.floor(t)<t?"MMMM":"YYYY"}function Xk({map:t,initKey:n},e){const r=n(e);return t.has(r)?t.get(r):e}function K1t({map:t,initKey:n},e){const r=n(e);return t.has(r)?t.get(r):(t.set(r,e),e)}function Q1t({map:t,initKey:n},e){const r=n(e);return t.has(r)&&(e=t.get(r),t.delete(r)),e}function J1t(t){return typeof t=="object"?t.valueOf():t}let Uk=class extends Map{constructor(n){if(super(),this.map=new Map,this.initKey=J1t,n!==null)for(const[e,r]of n)this.set(e,r)}get(n){return super.get(Xk({map:this.map,initKey:this.initKey},n))}has(n){return super.has(Xk({map:this.map,initKey:this.initKey},n))}set(n,e){return super.set(K1t({map:this.map,initKey:this.initKey},n),e)}delete(n){return super.delete(Q1t({map:this.map,initKey:this.initKey},n))}},Nd=class{constructor(n){this.options=Vk({},this.getDefaultOptions()),this.update(n)}getOptions(){return this.options}update(n={}){this.options=Vk({},this.options,n),this.rescale(n)}rescale(n){}};const fm=Symbol("defaultUnknown");function qk(t,n,e){for(let r=0;r<n.length;r+=1)t.has(n[r])||t.set(e(n[r]),r)}function Zk(t){const{value:n,from:e,to:r,mapper:i,notFoundReturn:a}=t;let o=i.get(n);if(o===void 0){if(a!==fm)return a;o=e.push(n)-1,i.set(n,o)}return r[o%r.length]}function Kk(t){return t instanceof Date?n=>`${n}`:typeof t=="object"?n=>JSON.stringify(n):n=>n}let gj=class yj extends Nd{getDefaultOptions(){return{domain:[],range:[],unknown:fm}}constructor(n){super(n)}map(n){return this.domainIndexMap.size===0&&qk(this.domainIndexMap,this.getDomain(),this.domainKey),Zk({value:this.domainKey(n),mapper:this.domainIndexMap,from:this.getDomain(),to:this.getRange(),notFoundReturn:this.options.unknown})}invert(n){return this.rangeIndexMap.size===0&&qk(this.rangeIndexMap,this.getRange(),this.rangeKey),Zk({value:this.rangeKey(n),mapper:this.rangeIndexMap,from:this.getRange(),to:this.getDomain(),notFoundReturn:this.options.unknown})}rescale(n){const[e]=this.options.domain,[r]=this.options.range;if(this.domainKey=Kk(e),this.rangeKey=Kk(r),!this.rangeIndexMap){this.rangeIndexMap=new Map,this.domainIndexMap=new Map;return}(!n||n.range)&&this.rangeIndexMap.clear(),(!n||n.domain||n.compare)&&(this.domainIndexMap.clear(),this.sortedDomain=void 0)}clone(){return new yj(this.options)}getRange(){return this.options.range}getDomain(){if(this.sortedDomain)return this.sortedDomain;const{domain:n,compare:e}=this.options;return this.sortedDomain=e?[...n].sort(e):n,this.sortedDomain}};function txt(t){const n=Math.min(...t);return t.map(e=>e/n)}function ext(t,n){const e=t.length,r=n-e;return r>0?[...t,...new Array(r).fill(1)]:r<0?t.slice(0,n):t}function nxt(t){return Math.round(t*1e12)/1e12}function rxt(t){const{domain:n,range:e,paddingOuter:r,paddingInner:i,flex:a,round:o,align:s}=t,l=n.length,c=ext(a,l),[u,f]=e,h=f-u,d=2/l*r+1-1/l*i,p=h/d,v=p*i/l,g=p-l*v,y=txt(c),m=y.reduce((P,_)=>P+_),x=g/m,b=new Uk(n.map((P,_)=>{const k=y[_]*x;return[P,o?Math.floor(k):k]})),w=new Uk(n.map((P,_)=>{const I=y[_]*x+v;return[P,o?Math.floor(I):I]})),S=Array.from(w.values()).reduce((P,_)=>P+_),M=(h-(S-S/l*i))*s,A=u+M;let T=o?Math.round(A):A;const C=new Array(l);for(let P=0;P<l;P+=1){C[P]=nxt(T);const _=n[P];T+=w.get(_)}return{valueBandWidth:b,valueStep:w,adjustedRange:C}}function ixt(t){var n;const{domain:e}=t,r=e.length;if(r===0)return{valueBandWidth:void 0,valueStep:void 0,adjustedRange:[]};if(!!(!((n=t.flex)===null||n===void 0)&&n.length))return rxt(t);const{range:a,paddingOuter:o,paddingInner:s,round:l,align:c}=t;let u,f,h=a[0];const p=a[1]-h,v=o*2,g=r-s;u=p/Math.max(1,v+g),l&&(u=Math.floor(u)),h+=(p-u*(r-s))*c,f=u*(1-s),l&&(h=Math.round(h),f=Math.round(f));const y=new Array(r).fill(0).map((m,x)=>h+x*u);return{valueStep:u,valueBandWidth:f,adjustedRange:y}}let Hh=class mj extends gj{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,paddingInner:0,paddingOuter:0,padding:0,unknown:fm,flex:[]}}constructor(n){super(n)}clone(){return new mj(this.options)}getStep(n){return this.valueStep===void 0?1:typeof this.valueStep=="number"?this.valueStep:n===void 0?Array.from(this.valueStep.values())[0]:this.valueStep.get(n)}getBandWidth(n){return this.valueBandWidth===void 0?1:typeof this.valueBandWidth=="number"?this.valueBandWidth:n===void 0?Array.from(this.valueBandWidth.values())[0]:this.valueBandWidth.get(n)}getRange(){return this.adjustedRange}getPaddingInner(){const{padding:n,paddingInner:e}=this.options;return n>0?n:e}getPaddingOuter(){const{padding:n,paddingOuter:e}=this.options;return n>0?n:e}rescale(){super.rescale();const{align:n,domain:e,range:r,round:i,flex:a}=this.options,{adjustedRange:o,valueBandWidth:s,valueStep:l}=ixt({align:n,range:r,round:i,flex:a,paddingInner:this.getPaddingInner(),paddingOuter:this.getPaddingOuter(),domain:e});this.valueStep=l,this.valueBandWidth=s,this.adjustedRange=o}};const xl=(t,n,e)=>{let r,i,a=t,o=n;if(a===o&&e>0)return[a];let s=Hv(a,o,e);if(s===0||!Number.isFinite(s))return[];if(s>0){a=Math.ceil(a/s),o=Math.floor(o/s),i=new Array(r=Math.ceil(o-a+1));for(let l=0;l<r;l+=1)i[l]=(a+l)*s}else{s=-s,a=Math.ceil(a*s),o=Math.floor(o*s),i=new Array(r=Math.ceil(o-a+1));for(let l=0;l<r;l+=1)i[l]=(a+l)/s}return i};let EM=class xj extends Nd{getDefaultOptions(){return{range:[0],domain:[0,1],unknown:void 0,tickCount:5,tickMethod:xl}}map(n){const[e]=this.options.range;return e!==void 0?e:this.options.unknown}invert(n){const[e]=this.options.range;return n===e&&e!==void 0?this.options.domain:[]}getTicks(){const{tickMethod:n,domain:e,tickCount:r}=this.options,[i,a]=e;return!Vh(i)||!Vh(a)?[]:n(i,a,r)}clone(){return new xj(this.options)}};function cf(t){return Math.abs(t)<1e-14?t:parseFloat(t.toFixed(14))}const axt=[1,5,2,2.5,4,3],Qk=Number.EPSILON*100;function oxt(t,n){return(t%n+n)%n}function sxt(t){return Math.round(t*1e12)/1e12}function lxt(t,n,e,r,i,a){const o=pj(n),s=dj(n,t);let l=0;const c=oxt(r,a);return(c<Qk||a-c<Qk)&&r<=0&&i>=0&&(l=1),1-s/(o-1)-e+l}function cxt(t,n,e){const r=pj(n),i=dj(n,t),a=1;return 1-i/(r-1)-e+a}function uxt(t,n,e,r,i,a){const o=(t-1)/(a-i),s=(n-1)/(Math.max(a,r)-Math.min(e,i));return 2-Math.max(o/s,s/o)}function fxt(t,n){return t>=n?2-(t-1)/(n-1):1}function hxt(t,n,e,r){const i=n-t;return 1-.5*((n-r)**2+(t-e)**2)/(.1*i)**2}function dxt(t,n,e){const r=n-t;return e>r?1-((e-r)/2)**2/(.1*r)**2:1}function pxt(){return 1}const TM=(t,n,e=5,r=!0,i=axt,a=[.25,.2,.5,.05])=>{const o=e<0?0:Math.round(e);if(Number.isNaN(t)||Number.isNaN(n)||typeof t!="number"||typeof n!="number"||!o)return[];if(n-t<1e-15||o===1)return[t];const s={score:-2,lmin:0,lmax:0,lstep:0};let l=1;for(;l<1/0;){for(let p=0;p<i.length;p+=1){const v=i[p],g=cxt(v,i,l);if(a[0]*g+a[1]+a[2]+a[3]<s.score){l=1/0;break}let y=2;for(;y<1/0;){const m=fxt(y,o);if(a[0]*g+a[1]+a[2]*m+a[3]<s.score)break;const x=(n-t)/(y+1)/l/v;let b=Math.ceil(Math.log10(x));for(;b<1/0;){const w=l*v*10**b,S=dxt(t,n,w*(y-1));if(a[0]*g+a[1]*S+a[2]*m+a[3]<s.score)break;const O=Math.floor(n/w)*l-(y-1)*l,M=Math.ceil(t/w)*l;if(O<=M){const A=M-O;for(let T=0;T<=A;T+=1){const P=(O+T)*(w/l),_=P+w*(y-1),k=w,I=lxt(v,i,l,P,_,k),L=hxt(t,n,P,_),F=uxt(y,o,t,n,P,_),B=pxt(),D=a[0]*I+a[1]*L+a[2]*F+a[3]*B;D>s.score&&(!r||P<=t&&_>=n)&&(s.lmin=P,s.lmax=_,s.lstep=k,s.score=D)}}b+=1}y+=1}}l+=1}const c=cf(s.lmax),u=cf(s.lmin),f=cf(s.lstep),h=Math.floor(sxt((c-u)/f))+1,d=new Array(h);d[0]=cf(u);for(let p=1;p<h;p+=1)d[p]=cf(d[p-1]+f);return d};let bj=class wj extends Nd{getDefaultOptions(){return{domain:[0,1],range:[0,1],tickCount:5,unknown:void 0,tickMethod:TM}}map(n){return Yg(n)?n:this.options.unknown}invert(n){return this.map(n)}clone(){return new wj(this.options)}getTicks(){const{domain:n,tickCount:e,tickMethod:r}=this.options,[i,a]=n;return!Vh(i)||!Vh(a)?[]:r(i,a,e)}};const vxt=(t,n,e)=>{const[r,i]=t,[a,o]=n;let s,l;return r<i?(s=Gg(r,i),l=e(a,o)):(s=Gg(i,r),l=e(o,a)),ru(l,s)},gxt=(t,n,e)=>{const r=Math.min(t.length,n.length)-1,i=new Array(r),a=new Array(r),o=t[0]>t[r],s=o?[...t].reverse():t,l=o?[...n].reverse():n;for(let c=0;c<r;c+=1)i[c]=Gg(s[c],s[c+1]),a[c]=e(l[c],l[c+1]);return c=>{const u=OM(t,c,1,r)-1,f=i[u],h=a[u];return ru(h,f)(c)}},Jk=(t,n,e,r)=>(Math.min(t.length,n.length)>2?gxt:vxt)(t,n,r?q1t:e);let hm=class extends Nd{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:iu,tickCount:5}}map(n){return Yg(n)?this.output(n):this.options.unknown}invert(n){return Yg(n)?this.input(n):this.options.unknown}nice(){if(!this.options.nice)return;const[n,e,r,...i]=this.getTickMethodOptions();this.options.domain=this.chooseNice()(n,e,r,...i)}getTicks(){const{tickMethod:n}=this.options,[e,r,i,...a]=this.getTickMethodOptions();return n(e,r,i,...a)}getTickMethodOptions(){const{domain:n,tickCount:e}=this.options,r=n[0],i=n[n.length-1];return[r,i,e]}chooseNice(){return ej}rescale(){this.nice();const[n,e]=this.chooseTransforms();this.composeOutput(n,this.chooseClamp(n)),this.composeInput(n,e,this.chooseClamp(e))}chooseClamp(n){const{clamp:e,range:r}=this.options,i=this.options.domain.map(n),a=Math.min(i.length,r.length);return e?g1t(i[0],i[a-1]):ml}composeOutput(n,e){const{domain:r,range:i,round:a,interpolate:o}=this.options,s=Jk(r.map(n),i,o,a);this.output=ru(s,e,n)}composeInput(n,e,r){const{domain:i,range:a}=this.options,o=Jk(a,i.map(n),iu);this.input=ru(e,r,o)}},eo=class Sj extends hm{getDefaultOptions(){return{domain:[0,1],range:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolate:Bd,tickMethod:xl,tickCount:5}}chooseTransforms(){return[ml,ml]}clone(){return new Sj(this.options)}},yxt=class Oj extends Hh{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,padding:0,unknown:fm,paddingInner:1,paddingOuter:0}}constructor(n){super(n)}getPaddingInner(){return 1}clone(){return new Oj(this.options)}update(n){super.update(n)}getPaddingOuter(){return this.options.padding}};const mxt=t=>n=>n<0?-((-n)**t):n**t,xxt=t=>n=>n<0?-((-n)**(1/t)):n**(1/t),bxt=t=>t<0?-Math.sqrt(-t):Math.sqrt(t);let Mj=class Aj extends hm{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,exponent:2,interpolate:Bd,tickMethod:xl,tickCount:5}}constructor(n){super(n)}chooseTransforms(){const{exponent:n}=this.options;if(n===1)return[ml,ml];const e=n===.5?bxt:mxt(n),r=xxt(n);return[e,r]}clone(){return new Aj(this.options)}},wxt=class Ej extends Mj{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:Bd,tickMethod:xl,tickCount:5,exponent:.5}}constructor(n){super(n)}update(n){super.update(n)}clone(){return new Ej(this.options)}},dm=class Tj extends Nd{getDefaultOptions(){return{domain:[.5],range:[0,1]}}constructor(n){super(n)}map(n){if(!Yg(n))return this.options.unknown;const e=OM(this.thresholds,n,0,this.n);return this.options.range[e]}invert(n){const{range:e}=this.options,r=e.indexOf(n),i=this.thresholds;return[i[r-1],i[r]]}clone(){return new Tj(this.options)}rescale(){const{domain:n,range:e}=this.options;this.n=Math.min(n.length,e.length-1),this.thresholds=n}};const Sxt=(t,n,e,r=10)=>{const i=t<0,a=AM(r,i),o=MM(r,i),s=n<t,l=s?n:t,c=s?t:n;let u=o(l),f=o(c),h=[];if(!(r%1)&&f-u<e){if(u=Math.floor(u),f=Math.ceil(f),i)for(;u<=f;u+=1){const d=a(u);for(let p=r-1;p>=1;p-=1){const v=d*p;if(v>c)break;v>=l&&h.push(v)}}else for(;u<=f;u+=1){const d=a(u);for(let p=1;p<r;p+=1){const v=d*p;if(v>c)break;v>=l&&h.push(v)}}h.length*2<e&&(h=xl(l,c,e))}else{const d=e===-1?f-u:Math.min(f-u,e);h=xl(u,f,d).map(a)}return s?h.reverse():h};let Oxt=class Cj extends hm{getDefaultOptions(){return{domain:[1,10],range:[0,1],base:10,interpolate:Bd,tickMethod:Sxt,tickCount:5}}chooseNice(){return W1t}getTickMethodOptions(){const{domain:n,tickCount:e,base:r}=this.options,i=n[0],a=n[n.length-1];return[i,a,e,r]}chooseTransforms(){const{base:n,domain:e}=this.options,r=e[0]<0;return[MM(n,r),AM(n,r)]}clone(){return new Cj(this.options)}},Pj=class kj extends dm{getDefaultOptions(){return{domain:[0,1],range:[.5],nice:!1,tickCount:5,tickMethod:TM}}constructor(n){super(n)}nice(){const{nice:n}=this.options;if(n){const[e,r,i]=this.getTickMethodOptions();this.options.domain=ej(e,r,i)}}getTicks(){const{tickMethod:n}=this.options,[e,r,i]=this.getTickMethodOptions();return n(e,r,i)}getTickMethodOptions(){const{domain:n,tickCount:e}=this.options,r=n[0],i=n[n.length-1];return[r,i,e]}rescale(){this.nice();const{range:n,domain:e}=this.options,[r,i]=e;this.n=n.length-1,this.thresholds=new Array(this.n);for(let a=0;a<this.n;a+=1)this.thresholds[a]=((a+1)*i-(a-this.n)*r)/(this.n+1)}invert(n){const[e,r]=super.invert(n),[i,a]=this.options.domain;return e===void 0&&r===void 0?[e,r]:[e||i,r||a]}getThresholds(){return this.thresholds}clone(){return new kj(this.options)}};function Mxt(t,n){const e=t.length;if(!e)return;if(e<2)return t[e-1];const r=(e-1)*n,i=Math.floor(r),a=t[i],o=t[i+1];return a+(o-a)*(r-i)}function Axt(t,n,e=!1){const r=t;e||r.sort((a,o)=>a-o);const i=[];for(let a=1;a<n;a+=1)i.push(Mxt(r,a/n));return i}let _j=class Lj extends dm{getDefaultOptions(){return{domain:[],range:[],tickCount:5,unknown:void 0,tickMethod:TM}}constructor(n){super(n)}rescale(){const{domain:n,range:e}=this.options;this.n=e.length-1,this.thresholds=Axt(n,this.n+1,!1)}invert(n){const[e,r]=super.invert(n),{domain:i}=this.options,a=i[0],o=i[i.length-1];return e===void 0&&r===void 0?[e,r]:[e||a,r||o]}getThresholds(){return this.thresholds}clone(){return new Lj(this.options)}getTicks(){const{tickCount:n,domain:e,tickMethod:r}=this.options,i=e.length-1,a=e[0],o=e[i];return r(a,o,n)}};const Ext=(t,n,e,r,i)=>{const a=t>n,o=a?n:t,s=a?t:n,[l,c]=lj(o,s,e,r,i),u=l.range(o,new Date(+s+1),c,!0);return a?u.reverse():u};function Txt(t){const n=t.getTimezoneOffset(),e=new Date(t);return e.setMinutes(e.getMinutes()+n,e.getSeconds(),e.getMilliseconds()),e}let Cxt=class Ij extends hm{getDefaultOptions(){return{domain:[new Date(2e3,0,1),new Date(2e3,0,2)],range:[0,1],nice:!1,tickCount:5,tickInterval:void 0,unknown:void 0,clamp:!1,tickMethod:Ext,interpolate:iu,mask:void 0,utc:!1}}chooseTransforms(){return[r=>+r,r=>new Date(r)]}chooseNice(){return L1t}getTickMethodOptions(){const{domain:n,tickCount:e,tickInterval:r,utc:i}=this.options,a=n[0],o=n[n.length-1];return[a,o,e,r,i]}getFormatter(){const{mask:n,utc:e}=this.options,r=e?sj:aj,i=e?Txt:ml;return a=>TS(i(a),n||Z1t(a,r))}clone(){return new Ij(this.options)}};var Pxt=globalThis&&globalThis.__decorate||function(t,n,e,r){var i=arguments.length,a=i<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,e):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,n,e,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(n,e,a):o(n,e))||a);return i>3&&a&&Object.defineProperty(n,e,a),a},Sw;function kxt(t){return[t(0),t(1)]}const _xt=t=>{const[n,e]=t;return ru(iu(0,1),Gg(n,e))};let Ow=Sw=class extends eo{getDefaultOptions(){return{domain:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolator:ml,tickMethod:xl,tickCount:5}}constructor(n){super(n)}clone(){return new Sw(this.options)}};Ow=Sw=Pxt([H1t(kxt,_xt)],Ow);function Wg(t,n,e){if(t===null)return[-.5,.5];const r=G4(t,n),a=new Hh({domain:r,range:[0,1],padding:e}).getBandWidth();return[-a/2,a/2]}function Vg(t,n,e){return n*(1-t)+e*t}const Fj=(t={})=>{const{padding:n=0,paddingX:e=n,paddingY:r=n,random:i=Math.random}=t;return(a,o)=>{const{encode:s,scale:l}=o,{x:c,y:u}=l,[f]=Ht(s,"x"),[h]=Ht(s,"y"),d=Wg(f,c,e),p=Wg(h,u,r),v=a.map(()=>Vg(i(),...p)),g=a.map(()=>Vg(i(),...d));return[a,nt({scale:{x:{padding:.5},y:{padding:.5}}},o,{encode:{dy:Ze(v),dx:Ze(g)}})]}};Fj.props={};const Dj=(t={})=>{const{padding:n=0,random:e=Math.random}=t;return(r,i)=>{const{encode:a,scale:o}=i,{x:s}=o,[l]=Ht(a,"x"),c=Wg(l,s,n),u=r.map(()=>Vg(e(),...c));return[r,nt({scale:{x:{padding:.5}}},i,{encode:{dx:Ze(u)}})]}};Dj.props={};const Rj=(t={})=>{const{padding:n=0,random:e=Math.random}=t;return(r,i)=>{const{encode:a,scale:o}=i,{y:s}=o,[l]=Ht(a,"y"),c=Wg(l,s,n),u=r.map(()=>Vg(e(),...c));return[r,nt({scale:{y:{padding:.5}}},i,{encode:{dy:Ze(u)}})]}};Rj.props={};var Lxt=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};const Bj=(t={})=>{const{groupBy:n="x"}=t;return(e,r)=>{const{encode:i}=r,a=Lxt(i,["x"]),o=Object.entries(a).filter(([f])=>f.startsWith("y")).map(([f])=>[f,Ht(i,f)[0]]),s=o.map(([f])=>[f,new Array(e.length)]),l=hs(n,e,r),c=new Array(l.length);for(let f=0;f<l.length;f++){const d=l[f].flatMap(g=>o.map(([,y])=>+y[g])),[p,v]=Wa(d);c[f]=(p+v)/2}const u=Math.max(...c);for(let f=0;f<l.length;f++){const h=u-c[f],d=l[f];for(const p of d)for(let v=0;v<o.length;v++){const[,g]=o[v],[,y]=s[v];y[p]=+g[p]+h}}return[e,nt({},r,{encode:Object.fromEntries(s.map(([f,h])=>[f,Ze(h,Ht(i,f)[1])]))})]}};Bj.props={};const Nj=(t={})=>{const{groupBy:n="x",series:e=!0}=t;return(r,i)=>{const{encode:a}=i,[o]=Ht(a,"y"),[s,l]=Ht(a,"y1");e?Bh(a,"series","color"):Ht(a,"color");const c=hs(n,r,i),u=new Array(r.length);for(const f of c){const h=f.map(d=>+o[d]);for(let d=0;d<f.length;d++){const p=f[d],v=Math.max(...h.filter((g,y)=>y!==d));u[p]=o[p]>v?v:o[p]}}return[r,nt({},i,{encode:{y1:Ze(u,l)}})]}};Nj.props={};function t_(t,n){return[t[0]]}function Ixt(t,n){const e=t.length-1;return[t[e]]}function Fxt(t,n){const e=Nu(t,r=>n[r]);return[t[e]]}function Dxt(t,n){const e=im(t,r=>n[r]);return[t[e]]}function Rxt(t){return typeof t=="function"?t:{first:t_,last:Ixt,max:Fxt,min:Dxt}[t]||t_}const pm=(t={})=>{const{groupBy:n="series",channel:e,selector:r}=t;return(i,a)=>{const{encode:o}=a,s=hs(n,i,a),[l]=Ht(o,e),c=Rxt(r);return[s.flatMap(u=>c(u,l)),a]}};pm.props={};var Bxt=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};const $j=(t={})=>{const{selector:n}=t,e=Bxt(t,["selector"]);return pm(Object.assign({channel:"x",selector:n},e))};$j.props={};var Nxt=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};const jj=(t={})=>{const{selector:n}=t,e=Nxt(t,["selector"]);return pm(Object.assign({channel:"y",selector:n},e))};jj.props={};var $xt=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};function ds(t){return n=>n===null?t:`${t} of ${n}`}function jxt(t){if(typeof t=="function")return[t,null];const e={mean:zxt,max:Yxt,count:Vxt,first:Xxt,last:Uxt,sum:Hxt,min:Wxt,median:Gxt}[t];if(!e)throw new Error(`Unknown reducer: ${t}.`);return e()}function zxt(){const t=(e,r)=>jh(e,i=>+r[i]),n=ds("mean");return[t,n]}function Gxt(){const t=(e,r)=>yM(e,i=>+r[i]),n=ds("median");return[t,n]}function Yxt(){const t=(e,r)=>he(e,i=>+r[i]),n=ds("max");return[t,n]}function Wxt(){const t=(e,r)=>Hr(e,i=>+r[i]),n=ds("min");return[t,n]}function Vxt(){const t=(e,r)=>e.length,n=ds("count");return[t,n]}function Hxt(){const t=(e,r)=>ui(e,i=>+r[i]),n=ds("sum");return[t,n]}function Xxt(){const t=(e,r)=>r[e[0]],n=ds("first");return[t,n]}function Uxt(){const t=(e,r)=>r[e[e.length-1]],n=ds("last");return[t,n]}const CM=(t={})=>{const{groupBy:n}=t,e=$xt(t,["groupBy"]);return(r,i)=>{const{data:a,encode:o}=i,s=n(r,i);if(!s)return[r,i];const l=(d,p)=>{if(d)return d;const{from:v}=p;if(!v)return d;const[,g]=Ht(o,v);return g},c=Object.entries(e).map(([d,p])=>{const[v,g]=jxt(p),[y,m]=Ht(o,d),x=l(m,p),b=s.map(w=>v(w,y??a));return[d,Object.assign(Object.assign({},Smt(b,(g==null?void 0:g(x))||x)),{aggregate:!0})]}),u=Object.keys(o).map(d=>{const[p,v]=Ht(o,d),g=s.map(y=>p[y[0]]);return[d,Ze(g,v)]}),f=s.map(d=>a[d[0]]);return[Fl(s),nt({},i,{data:f,encode:Object.fromEntries([...u,...c])})]}};CM.props={};var qxt=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};const $d=(t={})=>{const{channels:n=["x","y"]}=t,e=qxt(t,["channels"]),r=(i,a)=>hs(n,i,a);return CM(Object.assign(Object.assign({},e),{groupBy:r}))};$d.props={};const zj=(t={})=>$d(Object.assign(Object.assign({},t),{channels:["x","color","series"]}));zj.props={};const Gj=(t={})=>$d(Object.assign(Object.assign({},t),{channels:["y","color","series"]}));Gj.props={};const Yj=(t={})=>$d(Object.assign(Object.assign({},t),{channels:["color"]}));Yj.props={};var Wj=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};function Zxt(t,n,e){const{by:r=t,reducer:i="max"}=n,[a]=Ht(e,r);if(typeof i=="function")return o=>i(o,a);if(i==="max")return o=>he(o,s=>+a[s]);if(i==="min")return o=>Hr(o,s=>+a[s]);if(i==="sum")return o=>ui(o,s=>+a[s]);if(i==="median")return o=>yM(o,s=>+a[s]);if(i==="mean")return o=>jh(o,s=>+a[s]);if(i==="first")return o=>a[o[0]];if(i==="last")return o=>a[o[o.length-1]];throw new Error(`Unknown reducer: ${i}`)}function Kxt(t,n,e){const{reverse:r,channel:i}=e,{encode:a}=n,[o]=Ht(a,i),s=Va(t,l=>o[l]);return r&&s.reverse(),[s,n]}function Qxt(t,n,e){if(!Array.isArray(e))return t;const r=new Set(e);return t.filter(i=>r.has(n[i]))}function Jxt(t,n,e){var r;const{reverse:i,slice:a,channel:o}=e,s=Wj(e,["reverse","slice","channel"]),{encode:l,scale:c={}}=n,u=(r=c[o])===null||r===void 0?void 0:r.domain,[f]=Ht(l,o),h=Zxt(o,s,l),d=Qxt(t,f,u),p=Rmt(d,h,y=>f[y]);i&&p.reverse();const v=typeof a=="number"?[0,a]:a,g=a?p.slice(...v):p;return[t,nt(n,{scale:{[o]:{domain:g}}})]}const vm=(t={})=>{const{reverse:n=!1,slice:e,channel:r,ordinal:i=!0}=t,a=Wj(t,["reverse","slice","channel","ordinal"]);return(o,s)=>i?Jxt(o,s,Object.assign({reverse:n,slice:e,channel:r},a)):Kxt(o,s,Object.assign({reverse:n,slice:e,channel:r},a))};vm.props={};const Vj=(t={})=>vm(Object.assign(Object.assign({},t),{channel:"x"}));Vj.props={};const Hj=(t={})=>vm(Object.assign(Object.assign({},t),{channel:"color"}));Hj.props={};const Xj=(t={})=>vm(Object.assign(Object.assign({},t),{channel:"y"}));Xj.props={};function tbt(t,n){return typeof n=="string"?t.map(e=>e[n]):t.map(n)}function ebt(t,n){if(typeof t=="function")return e=>t(e,n);if(t==="sum")return e=>ui(e,r=>+n[r]);throw new Error(`Unknown reducer: ${t}`)}const Uj=(t={})=>{const{field:n,channel:e="y",reducer:r="sum"}=t;return(i,a)=>{const{data:o,encode:s}=a,[l]=Ht(s,"x"),c=n?tbt(o,n):Ht(s,e)[0],u=ebt(r,c),f=I4(i,u,h=>l[h]).map(h=>h[1]);return[i,nt({},a,{scale:{x:{flex:f}}})]}};Uj.props={};function Ue([t,n],[e,r]){return[t-e,n-r]}function Hp([t,n],[e,r]){return[t+e,n+r]}function Re([t,n],[e,r]){return Math.sqrt(Math.pow(t-e,2)+Math.pow(n-r,2))}function pi([t,n]){return Math.atan2(n,t)}function au([t,n]){return pi([t,n])+Math.PI/2}function qj(t,n){const e=pi(t),r=pi(n);return e<r?r-e:Math.PI*2-(e-r)}function PM(t){let n=1/0,e=-1/0,r=1/0,i=-1/0;for(const[s,l]of t)n=Math.min(s,n),e=Math.max(s,e),r=Math.min(l,r),i=Math.max(l,i);const a=e-n,o=i-r;return[n,r,a,o]}function Zj([t,n],[e,r]){return[(t+e)/2,(n+r)/2]}function nbt(t,n,e){const r=t.length;if(r===0)return[];const{innerWidth:i,innerHeight:a}=e,o=a/i;let s=Math.ceil(Math.sqrt(n/o)),l=i/s,c=Math.ceil(n/s),u=c*l;for(;u>a;)s=s+1,l=i/s,c=Math.ceil(n/s),u=c*l;const f=a-c*l,h=c<=1?0:f/(c-1),[d,p]=c<=1?[(i-r*l)/(r-1),(a-l)/2]:[0,0];return t.map((v,g)=>{const[y,m,x,b]=PM(v),w=g%s,S=Math.floor(g/s),O=w*l,M=(c-S-1)*l+f,A=l/x,T=l/b,C=O-y+d*w,P=M-m-h*S-p;return`translate(${C}, ${P}) scale(${A}, ${T})`})}const Kj=()=>(t,n)=>[t,nt({},n,{modifier:nbt,axis:!1})];Kj.props={};var rbt=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};const e_="thresholds";function ibt(t){const[n,e]=Wa(t);return Math.min(200,Umt(t,n,e))}const kM=(t={})=>{const{groupChannels:n=["color"],binChannels:e=["x","y"]}=t,r=rbt(t,["groupChannels","binChannels"]),i={},a=(o,s)=>{const{encode:l}=s,c=e.map(p=>{const[v]=Ht(l,p);return v}),u=ct(r,e_),f=o.filter(p=>c.every(v=>Oe(v[p]))),h=[...n.map(p=>{const[v]=Ht(l,p);return v}).filter(Oe).map(p=>v=>p[v]),...e.map((p,v)=>{const g=c[v],y=u[p]||ibt(g),m=Vmt().thresholds(y).value(b=>+g[b])(f),x=new Map(m.flatMap(b=>{const{x0:w,x1:S}=b,O=`${w},${S}`;return b.map(M=>[M,O])}));return i[p]=x,b=>x.get(b)})],d=p=>h.map(v=>v(p)).join("-");return Array.from(Be(f,d).values())};return CM(Object.assign(Object.assign(Object.assign({},Object.fromEntries(Object.entries(r).filter(([o])=>!o.startsWith(e_)))),Object.fromEntries(e.flatMap(o=>{const s=([c])=>+i[o].get(c).split(",")[0],l=([c])=>+i[o].get(c).split(",")[1];return l.from=o,[[o,s],[`${o}1`,l]]}))),{groupBy:a}))};kM.props={};const Qj=(t={})=>{const{thresholds:n}=t;return kM(Object.assign(Object.assign({},t),{thresholdsX:n,groupChannels:["color"],binChannels:["x"]}))};Qj.props={};function abt(t,n,e,r){const i=t.length;if(r>=i||r===0)return t;const a=d=>n[t[d]]*1,o=d=>e[t[d]]*1,s=[],l=(i-2)/(r-2);let c=0,u,f,h;s.push(c);for(let d=0;d<r-2;d++){let p=0,v=0,g=Math.floor((d+1)*l)+1,y=Math.floor((d+2)*l)+1;y=Math.min(y,i);const m=y-g;for(;g<y;g++)p+=a(g),v+=o(g);p/=m,v/=m;let x=Math.floor((d+0)*l)+1;const b=Math.floor((d+1)*l)+1,w=[a(c),o(c)];for(u=f=-1;x<b;x++)f=Math.abs((w[0]-p)*(a(x)-w[1])-(w[0]-o(x))*(v-w[0]))*.5,f>u&&(u=f,h=x);s.push(h),c=h}return s.push(i-1),s.map(d=>t[d])}function obt(t){if(typeof t=="function")return t;if(t==="lttb")return abt;const n={first:r=>[r[0]],last:r=>[r[r.length-1]],min:(r,i,a)=>[r[im(r,o=>a[o])]],max:(r,i,a)=>[r[Nu(r,o=>a[o])]],median:(r,i,a)=>[r[qmt(r,o=>a[o])]]},e=n[t]||n.median;return(r,i,a,o)=>{const s=Math.max(1,Math.floor(r.length/o));return sbt(r,s).flatMap(c=>e(c,i,a))}}function sbt(t,n){const e=t.length,r=[];let i=0;for(;i<e;)r.push(t.slice(i,i+=n));return r}const Jj=(t={})=>{const{strategy:n="median",thresholds:e=2e3,groupBy:r=["series","color"]}=t,i=obt(n);return(a,o)=>{const{encode:s}=o,l=hs(r,a,o),[c]=Ht(s,"x"),[u]=Ht(s,"y");return[l.flatMap(f=>i(f,c,u,e)),o]}};Jj.props={};function lbt(t){return typeof t=="object"?[t.value,t.ordinal]:[t,!0]}const tz=(t={})=>(n,e)=>{const{encode:r,data:i}=e,a=Object.entries(t).map(([u,f])=>{const[h]=Ht(r,u);if(!h)return null;const[d,p=!0]=lbt(f);if(typeof d=="function")return v=>d(h[v]);if(p){const v=Array.isArray(d)?d:[d];return v.length===0?null:g=>v.includes(h[g])}else{const[v,g]=d;return y=>h[y]>=v&&h[y]<=g}}).filter(Oe);if(a.length===0)return[n,e];const o=u=>a.every(f=>f(u)),s=n.filter(o),l=s.map((u,f)=>f),c=Object.entries(r).map(([u,f])=>[u,Object.assign(Object.assign({},f),{value:l.map(h=>f.value[s[h]]).filter(h=>h!==void 0)})]);return[l,nt({},e,{encode:Object.fromEntries(c),data:s.map(u=>i[u])})]};tz.props={};function Pe(t){return function(){return t}}const n_=Math.abs,zn=Math.atan2,Es=Math.cos,cbt=Math.max,rx=Math.min,Vi=Math.sin,dc=Math.sqrt,Gn=1e-12,Xh=Math.PI,Hg=Xh/2,ubt=2*Xh;function fbt(t){return t>1?0:t<-1?Xh:Math.acos(t)}function r_(t){return t>=1?Hg:t<=-1?-Hg:Math.asin(t)}const Mw=Math.PI,Aw=2*Mw,Ds=1e-6,hbt=Aw-Ds;function ez(t){this._+=t[0];for(let n=1,e=t.length;n<e;++n)this._+=arguments[n]+t[n]}function dbt(t){let n=Math.floor(t);if(!(n>=0))throw new Error(`invalid digits: ${t}`);if(n>15)return ez;const e=10**n;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*e)/e+r[i]}}let _M=class{constructor(n){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=n==null?ez:dbt(n)}moveTo(n,e){this._append`M${this._x0=this._x1=+n},${this._y0=this._y1=+e}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(n,e){this._append`L${this._x1=+n},${this._y1=+e}`}quadraticCurveTo(n,e,r,i){this._append`Q${+n},${+e},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(n,e,r,i,a,o){this._append`C${+n},${+e},${+r},${+i},${this._x1=+a},${this._y1=+o}`}arcTo(n,e,r,i,a){if(n=+n,e=+e,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,s=this._y1,l=r-n,c=i-e,u=o-n,f=s-e,h=u*u+f*f;if(this._x1===null)this._append`M${this._x1=n},${this._y1=e}`;else if(h>Ds)if(!(Math.abs(f*l-c*u)>Ds)||!a)this._append`L${this._x1=n},${this._y1=e}`;else{let d=r-o,p=i-s,v=l*l+c*c,g=d*d+p*p,y=Math.sqrt(v),m=Math.sqrt(h),x=a*Math.tan((Mw-Math.acos((v+h-g)/(2*y*m)))/2),b=x/m,w=x/y;Math.abs(b-1)>Ds&&this._append`L${n+b*u},${e+b*f}`,this._append`A${a},${a},0,0,${+(f*d>u*p)},${this._x1=n+w*l},${this._y1=e+w*c}`}}arc(n,e,r,i,a,o){if(n=+n,e=+e,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(i),l=r*Math.sin(i),c=n+s,u=e+l,f=1^o,h=o?i-a:a-i;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>Ds||Math.abs(this._y1-u)>Ds)&&this._append`L${c},${u}`,r&&(h<0&&(h=h%Aw+Aw),h>hbt?this._append`A${r},${r},0,1,${f},${n-s},${e-l}A${r},${r},0,1,${f},${this._x1=c},${this._y1=u}`:h>Ds&&this._append`A${r},${r},0,${+(h>=Mw)},${f},${this._x1=n+r*Math.cos(a)},${this._y1=e+r*Math.sin(a)}`)}rect(n,e,r,i){this._append`M${this._x0=this._x1=+n},${this._y0=this._y1=+e}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function bi(){return new _M}bi.prototype=_M.prototype;function LM(t){let n=3;return t.digits=function(e){if(!arguments.length)return n;if(e==null)n=null;else{const r=Math.floor(e);if(!(r>=0))throw new RangeError(`invalid digits: ${e}`);n=r}return t},()=>new _M(n)}function pbt(t){return t.innerRadius}function vbt(t){return t.outerRadius}function gbt(t){return t.startAngle}function ybt(t){return t.endAngle}function mbt(t){return t&&t.padAngle}function xbt(t,n,e,r,i,a,o,s){var l=e-t,c=r-n,u=o-i,f=s-a,h=f*l-u*c;if(!(h*h<Gn))return h=(u*(n-a)-f*(t-i))/h,[t+h*l,n+h*c]}function Xp(t,n,e,r,i,a,o){var s=t-e,l=n-r,c=(o?a:-a)/dc(s*s+l*l),u=c*l,f=-c*s,h=t+u,d=n+f,p=e+u,v=r+f,g=(h+p)/2,y=(d+v)/2,m=p-h,x=v-d,b=m*m+x*x,w=i-a,S=h*v-p*d,O=(x<0?-1:1)*dc(cbt(0,w*w*b-S*S)),M=(S*x-m*O)/b,A=(-S*m-x*O)/b,T=(S*x+m*O)/b,C=(-S*m+x*O)/b,P=M-g,_=A-y,k=T-g,I=C-y;return P*P+_*_>k*k+I*I&&(M=T,A=C),{cx:M,cy:A,x01:-u,y01:-f,x11:M*(i/w-1),y11:A*(i/w-1)}}function gm(){var t=pbt,n=vbt,e=Pe(0),r=null,i=gbt,a=ybt,o=mbt,s=null,l=LM(c);function c(){var u,f,h=+t.apply(this,arguments),d=+n.apply(this,arguments),p=i.apply(this,arguments)-Hg,v=a.apply(this,arguments)-Hg,g=n_(v-p),y=v>p;if(s||(s=u=l()),d<h&&(f=d,d=h,h=f),!(d>Gn))s.moveTo(0,0);else if(g>ubt-Gn)s.moveTo(d*Es(p),d*Vi(p)),s.arc(0,0,d,p,v,!y),h>Gn&&(s.moveTo(h*Es(v),h*Vi(v)),s.arc(0,0,h,v,p,y));else{var m=p,x=v,b=p,w=v,S=g,O=g,M=o.apply(this,arguments)/2,A=M>Gn&&(r?+r.apply(this,arguments):dc(h*h+d*d)),T=rx(n_(d-h)/2,+e.apply(this,arguments)),C=T,P=T,_,k;if(A>Gn){var I=r_(A/h*Vi(M)),L=r_(A/d*Vi(M));(S-=I*2)>Gn?(I*=y?1:-1,b+=I,w-=I):(S=0,b=w=(p+v)/2),(O-=L*2)>Gn?(L*=y?1:-1,m+=L,x-=L):(O=0,m=x=(p+v)/2)}var F=d*Es(m),B=d*Vi(m),D=h*Es(w),N=h*Vi(w);if(T>Gn){var j=d*Es(x),Y=d*Vi(x),W=h*Es(b),V=h*Vi(b),H;if(g<Xh)if(H=xbt(F,B,W,V,j,Y,D,N)){var Q=F-H[0],Z=B-H[1],q=j-H[0],rt=Y-H[1],it=1/Vi(fbt((Q*q+Z*rt)/(dc(Q*Q+Z*Z)*dc(q*q+rt*rt)))/2),ft=dc(H[0]*H[0]+H[1]*H[1]);C=rx(T,(h-ft)/(it-1)),P=rx(T,(d-ft)/(it+1))}else C=P=0}O>Gn?P>Gn?(_=Xp(W,V,F,B,d,P,y),k=Xp(j,Y,D,N,d,P,y),s.moveTo(_.cx+_.x01,_.cy+_.y01),P<T?s.arc(_.cx,_.cy,P,zn(_.y01,_.x01),zn(k.y01,k.x01),!y):(s.arc(_.cx,_.cy,P,zn(_.y01,_.x01),zn(_.y11,_.x11),!y),s.arc(0,0,d,zn(_.cy+_.y11,_.cx+_.x11),zn(k.cy+k.y11,k.cx+k.x11),!y),s.arc(k.cx,k.cy,P,zn(k.y11,k.x11),zn(k.y01,k.x01),!y))):(s.moveTo(F,B),s.arc(0,0,d,m,x,!y)):s.moveTo(F,B),!(h>Gn)||!(S>Gn)?s.lineTo(D,N):C>Gn?(_=Xp(D,N,j,Y,h,-C,y),k=Xp(F,B,W,V,h,-C,y),s.lineTo(_.cx+_.x01,_.cy+_.y01),C<T?s.arc(_.cx,_.cy,C,zn(_.y01,_.x01),zn(k.y01,k.x01),!y):(s.arc(_.cx,_.cy,C,zn(_.y01,_.x01),zn(_.y11,_.x11),!y),s.arc(0,0,h,zn(_.cy+_.y11,_.cx+_.x11),zn(k.cy+k.y11,k.cx+k.x11),y),s.arc(k.cx,k.cy,C,zn(k.y11,k.x11),zn(k.y01,k.x01),!y))):s.arc(0,0,h,w,b,y)}if(s.closePath(),u)return s=null,u+""||null}return c.centroid=function(){var u=(+t.apply(this,arguments)+ +n.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-Xh/2;return[Es(f)*u,Vi(f)*u]},c.innerRadius=function(u){return arguments.length?(t=typeof u=="function"?u:Pe(+u),c):t},c.outerRadius=function(u){return arguments.length?(n=typeof u=="function"?u:Pe(+u),c):n},c.cornerRadius=function(u){return arguments.length?(e=typeof u=="function"?u:Pe(+u),c):e},c.padRadius=function(u){return arguments.length?(r=u==null?null:typeof u=="function"?u:Pe(+u),c):r},c.startAngle=function(u){return arguments.length?(i=typeof u=="function"?u:Pe(+u),c):i},c.endAngle=function(u){return arguments.length?(a=typeof u=="function"?u:Pe(+u),c):a},c.padAngle=function(u){return arguments.length?(o=typeof u=="function"?u:Pe(+u),c):o},c.context=function(u){return arguments.length?(s=u??null,c):s},c}function nz(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function rz(t){this._context=t}rz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:this._context.lineTo(t,n);break}}};function jd(t){return new rz(t)}function iz(t){return t[0]}function az(t){return t[1]}function es(t,n){var e=Pe(!0),r=null,i=jd,a=null,o=LM(s);t=typeof t=="function"?t:t===void 0?iz:Pe(t),n=typeof n=="function"?n:n===void 0?az:Pe(n);function s(l){var c,u=(l=nz(l)).length,f,h=!1,d;for(r==null&&(a=i(d=o())),c=0;c<=u;++c)!(c<u&&e(f=l[c],c,l))===h&&((h=!h)?a.lineStart():a.lineEnd()),h&&a.point(+t(f,c,l),+n(f,c,l));if(d)return a=null,d+""||null}return s.x=function(l){return arguments.length?(t=typeof l=="function"?l:Pe(+l),s):t},s.y=function(l){return arguments.length?(n=typeof l=="function"?l:Pe(+l),s):n},s.defined=function(l){return arguments.length?(e=typeof l=="function"?l:Pe(!!l),s):e},s.curve=function(l){return arguments.length?(i=l,r!=null&&(a=i(r)),s):i},s.context=function(l){return arguments.length?(l==null?r=a=null:a=i(r=l),s):r},s}function Ew(t,n,e){var r=null,i=Pe(!0),a=null,o=jd,s=null,l=LM(c);t=typeof t=="function"?t:t===void 0?iz:Pe(+t),n=typeof n=="function"?n:Pe(n===void 0?0:+n),e=typeof e=="function"?e:e===void 0?az:Pe(+e);function c(f){var h,d,p,v=(f=nz(f)).length,g,y=!1,m,x=new Array(v),b=new Array(v);for(a==null&&(s=o(m=l())),h=0;h<=v;++h){if(!(h<v&&i(g=f[h],h,f))===y)if(y=!y)d=h,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),p=h-1;p>=d;--p)s.point(x[p],b[p]);s.lineEnd(),s.areaEnd()}y&&(x[h]=+t(g,h,f),b[h]=+n(g,h,f),s.point(r?+r(g,h,f):x[h],e?+e(g,h,f):b[h]))}if(m)return s=null,m+""||null}function u(){return es().defined(i).curve(o).context(a)}return c.x=function(f){return arguments.length?(t=typeof f=="function"?f:Pe(+f),r=null,c):t},c.x0=function(f){return arguments.length?(t=typeof f=="function"?f:Pe(+f),c):t},c.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Pe(+f),c):r},c.y=function(f){return arguments.length?(n=typeof f=="function"?f:Pe(+f),e=null,c):n},c.y0=function(f){return arguments.length?(n=typeof f=="function"?f:Pe(+f),c):n},c.y1=function(f){return arguments.length?(e=f==null?null:typeof f=="function"?f:Pe(+f),c):e},c.lineX0=c.lineY0=function(){return u().x(t).y(n)},c.lineY1=function(){return u().x(t).y(e)},c.lineX1=function(){return u().x(r).y(n)},c.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Pe(!!f),c):i},c.curve=function(f){return arguments.length?(o=f,a!=null&&(s=o(a)),c):o},c.context=function(f){return arguments.length?(f==null?a=s=null:s=o(a=f),c):a},c}var oz=IM(jd);function sz(t){this._curve=t}sz.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,n){this._curve.point(n*Math.sin(t),n*-Math.cos(t))}};function IM(t){function n(e){return new sz(t(e))}return n._curve=t,n}function Of(t){var n=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(e){return arguments.length?n(IM(e)):n()._curve},t}function bbt(){return Of(es().curve(oz))}function wbt(){var t=Ew().curve(oz),n=t.curve,e=t.lineX0,r=t.lineX1,i=t.lineY0,a=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return Of(e())},delete t.lineX0,t.lineEndAngle=function(){return Of(r())},delete t.lineX1,t.lineInnerRadius=function(){return Of(i())},delete t.lineY0,t.lineOuterRadius=function(){return Of(a())},delete t.lineY1,t.curve=function(o){return arguments.length?n(IM(o)):n()._curve},t}function ou(){}function Tw(t,n,e){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-n),t._y2+t._k*(t._y1-e),t._x2,t._y2)}function FM(t,n){this._context=t,this._k=(1-n)/6}FM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Tw(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2,this._x1=t,this._y1=n;break;case 2:this._point=3;default:Tw(this,t,n);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};(function t(n){function e(r){return new FM(r,n)}return e.tension=function(r){return t(+r)},e})(0);function DM(t,n){this._context=t,this._k=(1-n)/6}DM.prototype={areaStart:ou,areaEnd:ou,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._x3=t,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3,this._x5=t,this._y5=n;break;default:Tw(this,t,n);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};(function t(n){function e(r){return new DM(r,n)}return e.tension=function(r){return t(+r)},e})(0);function lz(t,n,e){var r=t._x1,i=t._y1,a=t._x2,o=t._y2;if(t._l01_a>Gn){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,i=(i*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>Gn){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,u=3*t._l23_a*(t._l23_a+t._l12_a);a=(a*c+t._x1*t._l23_2a-n*t._l12_2a)/u,o=(o*c+t._y1*t._l23_2a-e*t._l12_2a)/u}t._context.bezierCurveTo(r,i,a,o,t._x2,t._y2)}function cz(t,n){this._context=t,this._alpha=n}cz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,r=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3;default:lz(this,t,n);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};(function t(n){function e(r){return n?new cz(r,n):new FM(r,0)}return e.alpha=function(r){return t(+r)},e})(.5);function uz(t,n){this._context=t,this._alpha=n}uz.prototype={areaStart:ou,areaEnd:ou,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,r=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3,this._x5=t,this._y5=n;break;default:lz(this,t,n);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const fz=function t(n){function e(r){return n?new uz(r,n):new DM(r,0)}return e.alpha=function(r){return t(+r)},e}(.5);function hz(t){this._context=t}hz.prototype={areaStart:ou,areaEnd:ou,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,n){t=+t,n=+n,this._point?this._context.lineTo(t,n):(this._point=1,this._context.moveTo(t,n))}};function RM(t){return new hz(t)}function i_(t){return t<0?-1:1}function a_(t,n,e){var r=t._x1-t._x0,i=n-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),o=(e-t._y1)/(i||r<0&&-0),s=(a*i+o*r)/(r+i);return(i_(a)+i_(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function o_(t,n){var e=t._x1-t._x0;return e?(3*(t._y1-t._y0)/e-n)/2:n}function ix(t,n,e){var r=t._x0,i=t._y0,a=t._x1,o=t._y1,s=(a-r)/3;t._context.bezierCurveTo(r+s,i+s*n,a-s,o-s*e,a,o)}function Xg(t){this._context=t}Xg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:ix(this,this._t0,o_(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){var e=NaN;if(t=+t,n=+n,!(t===this._x1&&n===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,ix(this,o_(this,e=a_(this,t,n)),e);break;default:ix(this,this._t0,e=a_(this,t,n));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n,this._t0=e}}};function dz(t){this._context=new pz(t)}(dz.prototype=Object.create(Xg.prototype)).point=function(t,n){Xg.prototype.point.call(this,n,t)};function pz(t){this._context=t}pz.prototype={moveTo:function(t,n){this._context.moveTo(n,t)},closePath:function(){this._context.closePath()},lineTo:function(t,n){this._context.lineTo(n,t)},bezierCurveTo:function(t,n,e,r,i,a){this._context.bezierCurveTo(n,t,r,e,a,i)}};function vz(t){return new Xg(t)}function gz(t){return new dz(t)}function ym(t,n){this._context=t,this._t=n}ym.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,n),this._context.lineTo(t,n);else{var e=this._x*(1-this._t)+t*this._t;this._context.lineTo(e,this._y),this._context.lineTo(e,n)}break}}this._x=t,this._y=n}};function yz(t){return new ym(t,.5)}function mz(t){return new ym(t,0)}function xz(t){return new ym(t,1)}function _e(t){const{transformations:n}=t.getOptions();return n.map(([r])=>r).filter(r=>r==="transpose").length%2!==0}function Fe(t){const{transformations:n}=t.getOptions();return n.some(([e])=>e==="polar")}function mm(t){const{transformations:n}=t.getOptions();return n.some(([e])=>e==="reflect")&&n.some(([e])=>e.startsWith("transpose"))}function bz(t){const{transformations:n}=t.getOptions();return n.some(([e])=>e==="helix")}function xm(t){const{transformations:n}=t.getOptions();return n.some(([e])=>e==="parallel")}function wz(t){const{transformations:n}=t.getOptions();return n.some(([e])=>e==="fisheye")}function Sbt(t){return xm(t)&&Fe(t)}function $u(t){return bz(t)||Fe(t)}function Obt(t){return Fe(t)&&_e(t)}function Mbt(t){if($u(t)){const[n,e]=t.getSize(),r=t.getOptions().transformations.find(i=>i[0]==="polar");if(r)return Math.max(n,e)/2*r[4]}return 0}function bm(t){const{transformations:n}=t.getOptions(),[,,,e,r]=n.find(i=>i[0]==="polar");return[+e,+r]}function BM(t,n=!0){const{transformations:e}=t.getOptions(),[,r,i]=e.find(a=>a[0]==="polar");return n?[+r*180/Math.PI,+i*180/Math.PI]:[r,i]}function Abt(t,n){const{transformations:e}=t.getOptions(),[,...r]=e.find(i=>i[0]===n);return r}var Sz={exports:{}};(function(t){var n=Object.prototype.hasOwnProperty,e="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(e=!1));function i(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function a(l,c,u,f,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var d=new i(u,f||l,h),p=e?e+c:c;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],d]:l._events[p].push(d):(l._events[p]=d,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function s(){this._events=new r,this._eventsCount=0}s.prototype.eventNames=function(){var c=[],u,f;if(this._eventsCount===0)return c;for(f in u=this._events)n.call(u,f)&&c.push(e?f.slice(1):f);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},s.prototype.listeners=function(c){var u=e?e+c:c,f=this._events[u];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,d=f.length,p=new Array(d);h<d;h++)p[h]=f[h].fn;return p},s.prototype.listenerCount=function(c){var u=e?e+c:c,f=this._events[u];return f?f.fn?1:f.length:0},s.prototype.emit=function(c,u,f,h,d,p){var v=e?e+c:c;if(!this._events[v])return!1;var g=this._events[v],y=arguments.length,m,x;if(g.fn){switch(g.once&&this.removeListener(c,g.fn,void 0,!0),y){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,u),!0;case 3:return g.fn.call(g.context,u,f),!0;case 4:return g.fn.call(g.context,u,f,h),!0;case 5:return g.fn.call(g.context,u,f,h,d),!0;case 6:return g.fn.call(g.context,u,f,h,d,p),!0}for(x=1,m=new Array(y-1);x<y;x++)m[x-1]=arguments[x];g.fn.apply(g.context,m)}else{var b=g.length,w;for(x=0;x<b;x++)switch(g[x].once&&this.removeListener(c,g[x].fn,void 0,!0),y){case 1:g[x].fn.call(g[x].context);break;case 2:g[x].fn.call(g[x].context,u);break;case 3:g[x].fn.call(g[x].context,u,f);break;case 4:g[x].fn.call(g[x].context,u,f,h);break;default:if(!m)for(w=1,m=new Array(y-1);w<y;w++)m[w-1]=arguments[w];g[x].fn.apply(g[x].context,m)}}return!0},s.prototype.on=function(c,u,f){return a(this,c,u,f,!1)},s.prototype.once=function(c,u,f){return a(this,c,u,f,!0)},s.prototype.removeListener=function(c,u,f,h){var d=e?e+c:c;if(!this._events[d])return this;if(!u)return o(this,d),this;var p=this._events[d];if(p.fn)p.fn===u&&(!h||p.once)&&(!f||p.context===f)&&o(this,d);else{for(var v=0,g=[],y=p.length;v<y;v++)(p[v].fn!==u||h&&!p[v].once||f&&p[v].context!==f)&&g.push(p[v]);g.length?this._events[d]=g.length===1?g[0]:g:o(this,d)}return this},s.prototype.removeAllListeners=function(c){var u;return c?(u=e?e+c:c,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=e,s.EventEmitter=s,t.exports=s})(Sz);var Ebt=Sz.exports;const NM=tS(Ebt);var Tbt=function(t){return t==null};const Pt=Tbt;var Cbt={}.toString,Pbt=function(t,n){return Cbt.call(t)==="[object "+n+"]"};const wm=Pbt,$M=function(t){return Array.isArray?Array.isArray(t):wm(t,"Array")},Xv=function(t){var n=typeof t;return t!==null&&n==="object"||n==="function"},s_=function(t){if($M(t))return t.reduce(function(n,e){return Math.max(n,e)},t[0])},l_=function(t){if($M(t))return t.reduce(function(n,e){return Math.min(n,e)},t[0])},ps=function(t){return wm(t,"String")};var kbt=function(t,n,e){return t<n?n:t>e?e:t};const Uh=kbt;var _bt=function(t){return wm(t,"Number")};const Rl=_bt;var Lbt=1e-5;function Kf(t,n,e){return e===void 0&&(e=Lbt),Math.abs(t-n)<e}var Ibt=function(t,n){return(t%n+n)%n};const Oz=Ibt;var Fbt=function(t){return wm(t,"Boolean")};const c_=Fbt;var Dbt=function(t){return t===void 0};const We=Dbt;var Mz={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null};function Rbt(t,n,e){if(t[e].length>7){t[e].shift();for(var r=t[e],i=e;r.length;)n[e]="A",t.splice(i+=1,0,["C"].concat(r.splice(0,6)));t.splice(e,1)}}var Qf={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0};function Az(t){return Array.isArray(t)&&t.every(function(n){var e=n[0].toLowerCase();return Qf[e]===n.length-1&&"achlmqstvz".includes(e)})}function Ez(t){return Az(t)&&t.every(function(n){var e=n[0];return e===e.toUpperCase()})}function Tz(t){return Ez(t)&&t.every(function(n){var e=n[0];return"ACLMQZ".includes(e)})}function u_(t){for(var n=t.pathValue[t.segmentStart],e=n.toLowerCase(),r=t.data;r.length>=Qf[e]&&(e==="m"&&r.length>2?(t.segments.push([n].concat(r.splice(0,2))),e="l",n=n==="m"?"l":"L"):t.segments.push([n].concat(r.splice(0,Qf[e]))),!!Qf[e]););}function Bbt(t){var n=t.index,e=t.pathValue,r=e.charCodeAt(n);if(r===48){t.param=0,t.index+=1;return}if(r===49){t.param=1,t.index+=1;return}t.err='[path-util]: invalid Arc flag "'+e[n]+'", expecting 0 or 1 at index '+n}function Nbt(t){return t>=48&&t<=57||t===43||t===45||t===46}function Hl(t){return t>=48&&t<=57}function $bt(t){var n=t.max,e=t.pathValue,r=t.index,i=r,a=!1,o=!1,s=!1,l=!1,c;if(i>=n){t.err="[path-util]: Invalid path value at index "+i+', "pathValue" is missing param';return}if(c=e.charCodeAt(i),(c===43||c===45)&&(i+=1,c=e.charCodeAt(i)),!Hl(c)&&c!==46){t.err="[path-util]: Invalid path value at index "+i+', "'+e[i]+'" is not a number';return}if(c!==46){if(a=c===48,i+=1,c=e.charCodeAt(i),a&&i<n&&c&&Hl(c)){t.err="[path-util]: Invalid path value at index "+r+', "'+e[r]+'" illegal number';return}for(;i<n&&Hl(e.charCodeAt(i));)i+=1,o=!0;c=e.charCodeAt(i)}if(c===46){for(l=!0,i+=1;Hl(e.charCodeAt(i));)i+=1,s=!0;c=e.charCodeAt(i)}if(c===101||c===69){if(l&&!o&&!s){t.err="[path-util]: Invalid path value at index "+i+', "'+e[i]+'" invalid float exponent';return}if(i+=1,c=e.charCodeAt(i),(c===43||c===45)&&(i+=1),i<n&&Hl(e.charCodeAt(i)))for(;i<n&&Hl(e.charCodeAt(i));)i+=1;else{t.err="[path-util]: Invalid path value at index "+i+', "'+e[i]+'" invalid integer exponent';return}}t.index=i,t.param=+t.pathValue.slice(r,i)}function jbt(t){var n=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];return t===10||t===13||t===8232||t===8233||t===32||t===9||t===11||t===12||t===160||t>=5760&&n.includes(t)}function Uv(t){for(var n=t.pathValue,e=t.max;t.index<e&&jbt(n.charCodeAt(t.index));)t.index+=1}function zbt(t){switch(t|32){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:return!0;default:return!1}}function Gbt(t){return(t|32)===97}function Ybt(t){var n=t.max,e=t.pathValue,r=t.index,i=e.charCodeAt(r),a=Qf[e[r].toLowerCase()];if(t.segmentStart=r,!zbt(i)){t.err='[path-util]: Invalid path value "'+e[r]+'" is not a path command';return}if(t.index+=1,Uv(t),t.data=[],!a){u_(t);return}for(;;){for(var o=a;o>0;o-=1){if(Gbt(i)&&(o===3||o===4)?Bbt(t):$bt(t),t.err.length)return;t.data.push(t.param),Uv(t),t.index<n&&e.charCodeAt(t.index)===44&&(t.index+=1,Uv(t))}if(t.index>=t.max||!Nbt(e.charCodeAt(t.index)))break}u_(t)}var Wbt=function(){function t(n){this.pathValue=n,this.segments=[],this.max=n.length,this.index=0,this.param=0,this.segmentStart=0,this.data=[],this.err=""}return t}();function Vbt(t){if(Az(t))return[].concat(t);var n=new Wbt(t);for(Uv(n);n.index<n.max&&!n.err.length;)Ybt(n);return n.err?n.err:n.segments}function Hbt(t){if(Ez(t))return[].concat(t);var n=Vbt(t),e=0,r=0,i=0,a=0;return n.map(function(o){var s=o.slice(1).map(Number),l=o[0],c=l.toUpperCase();if(l==="M")return e=s[0],r=s[1],i=e,a=r,["M",e,r];var u;if(l!==c)switch(c){case"A":u=[c,s[0],s[1],s[2],s[3],s[4],s[5]+e,s[6]+r];break;case"V":u=[c,s[0]+r];break;case"H":u=[c,s[0]+e];break;default:{var f=s.map(function(d,p){return d+(p%2?r:e)});u=[c].concat(f)}}else u=[c].concat(s);var h=u.length;switch(c){case"Z":e=i,r=a;break;case"H":e=u[1];break;case"V":r=u[1];break;default:e=u[h-2],r=u[h-1],c==="M"&&(i=e,a=r)}return u})}function Xbt(t,n){var e=t[0],r=n.x1,i=n.y1,a=n.x2,o=n.y2,s=t.slice(1).map(Number),l=t;if("TQ".includes(e)||(n.qx=null,n.qy=null),e==="H")l=["L",t[1],i];else if(e==="V")l=["L",r,t[1]];else if(e==="S"){var c=r*2-a,u=i*2-o;n.x1=c,n.y1=u,l=["C",c,u].concat(s)}else if(e==="T"){var f=r*2-n.qx,h=i*2-n.qy;n.qx=f,n.qy=h,l=["Q",f,h].concat(s)}else if(e==="Q"){var d=s[0],p=s[1];n.qx=d,n.qy=p}return l}function Ug(t){if(Tz(t))return[].concat(t);for(var n=Hbt(t),e=E({},Mz),r=0;r<n.length;r+=1){n[r]=Xbt(n[r],e);var i=n[r],a=i.length;e.x1=+i[a-2],e.y1=+i[a-1],e.x2=+i[a-4]||e.x1,e.y2=+i[a-3]||e.y1}return n}function Ubt(t){return Tz(t)&&t.every(function(n){var e=n[0];return"MC".includes(e)})}function Up(t,n,e){var r=t*Math.cos(e)-n*Math.sin(e),i=t*Math.sin(e)+n*Math.cos(e);return{x:r,y:i}}function Cz(t,n,e,r,i,a,o,s,l,c){var u=t,f=n,h=e,d=r,p=s,v=l,g=Math.PI*120/180,y=Math.PI/180*(+i||0),m=[],x,b,w,S,O;if(c)b=c[0],w=c[1],S=c[2],O=c[3];else{x=Up(u,f,-y),u=x.x,f=x.y,x=Up(p,v,-y),p=x.x,v=x.y;var M=(u-p)/2,A=(f-v)/2,T=M*M/(h*h)+A*A/(d*d);T>1&&(T=Math.sqrt(T),h*=T,d*=T);var C=h*h,P=d*d,_=(a===o?-1:1)*Math.sqrt(Math.abs((C*P-C*A*A-P*M*M)/(C*A*A+P*M*M)));S=_*h*A/d+(u+p)/2,O=_*-d*M/h+(f+v)/2,b=Math.asin(((f-O)/d*Math.pow(10,9)>>0)/Math.pow(10,9)),w=Math.asin(((v-O)/d*Math.pow(10,9)>>0)/Math.pow(10,9)),b=u<S?Math.PI-b:b,w=p<S?Math.PI-w:w,b<0&&(b=Math.PI*2+b),w<0&&(w=Math.PI*2+w),o&&b>w&&(b-=Math.PI*2),!o&&w>b&&(w-=Math.PI*2)}var k=w-b;if(Math.abs(k)>g){var I=w,L=p,F=v;w=b+g*(o&&w>b?1:-1),p=S+h*Math.cos(w),v=O+d*Math.sin(w),m=Cz(p,v,h,d,i,0,o,L,F,[w,I,S,O])}k=w-b;var B=Math.cos(b),D=Math.sin(b),N=Math.cos(w),j=Math.sin(w),Y=Math.tan(k/4),W=4/3*h*Y,V=4/3*d*Y,H=[u,f],Q=[u+W*D,f-V*B],Z=[p+W*j,v-V*N],q=[p,v];if(Q[0]=2*H[0]-Q[0],Q[1]=2*H[1]-Q[1],c)return Q.concat(Z,q,m);m=Q.concat(Z,q,m);for(var rt=[],it=0,ft=m.length;it<ft;it+=1)rt[it]=it%2?Up(m[it-1],m[it],y).y:Up(m[it],m[it+1],y).x;return rt}function qbt(t,n,e,r,i,a){var o=.3333333333333333,s=2/3;return[o*t+s*e,o*n+s*r,o*i+s*e,o*a+s*r,i,a]}function xo(t,n,e){var r=t[0],i=t[1],a=n[0],o=n[1];return[r+(a-r)*e,i+(o-i)*e]}var f_=function(t,n,e,r){var i=.5,a=xo([t,n],[e,r],i);return X(X([],a,!0),[e,r,e,r],!1)};function Zbt(t,n){var e=t[0],r=t.slice(1).map(Number),i=r[0],a=r[1],o,s=n.x1,l=n.y1,c=n.x,u=n.y;switch("TQ".includes(e)||(n.qx=null,n.qy=null),e){case"M":return n.x=i,n.y=a,t;case"A":return o=[s,l].concat(r),["C"].concat(Cz(o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],o[8],o[9]));case"Q":return n.qx=i,n.qy=a,o=[s,l].concat(r),["C"].concat(qbt(o[0],o[1],o[2],o[3],o[4],o[5]));case"L":return["C"].concat(f_(s,l,i,a));case"Z":return s===c&&l===u?["C",s,l,c,u,c,u]:["C"].concat(f_(s,l,c,u))}return t}function Cw(t,n){if(n===void 0&&(n=!1),Ubt(t)){var e=[].concat(t);return n?[e,[]]:e}for(var r=Ug(t),i=E({},Mz),a=[],o="",s=r.length,l,c,u=[],f=0;f<s;f+=1){r[f]&&(o=r[f][0]),a[f]=o;var h=Zbt(r[f],i);r[f]=h,Rbt(r,a,f),s=r.length,o==="Z"&&u.push(f),l=r[f],c=l.length,i.x1=+l[c-2],i.y1=+l[c-1],i.x2=+l[c-4]||i.x1,i.y2=+l[c-3]||i.y1}return n?[r,u]:r}function Kbt(t){return t.map(function(n){return Array.isArray(n)?[].concat(n):n})}function Qbt(t){var n=t.slice(1).map(function(e,r,i){return r?i[r-1].slice(-2).concat(e.slice(1)):t[0].slice(1).concat(e.slice(1))}).map(function(e){return e.map(function(r,i){return e[e.length-i-2*(1-i%2)]})}).reverse();return[["M"].concat(n[0].slice(0,2))].concat(n.map(function(e){return["C"].concat(e.slice(2))}))}function Rr(t,n){return Math.sqrt((t[0]-n[0])*(t[0]-n[0])+(t[1]-n[1])*(t[1]-n[1]))}function Pw(t,n,e,r,i){var a=Rr([t,n],[e,r]),o={x:0,y:0};if(typeof i=="number")if(i<=0)o={x:t,y:n};else if(i>=a)o={x:e,y:r};else{var s=xo([t,n],[e,r],i/a),l=s[0],c=s[1];o={x:l,y:c}}return{length:a,point:o,min:{x:Math.min(t,e),y:Math.min(n,r)},max:{x:Math.max(t,e),y:Math.max(n,r)}}}function h_(t,n){var e=t.x,r=t.y,i=n.x,a=n.y,o=e*i+r*a,s=Math.sqrt((Math.pow(e,2)+Math.pow(r,2))*(Math.pow(i,2)+Math.pow(a,2))),l=e*a-r*i<0?-1:1,c=l*Math.acos(o/s);return c}function Jbt(t,n,e,r,i,a,o,s,l,c){var u=Math.abs,f=Math.sin,h=Math.cos,d=Math.sqrt,p=Math.PI,v=u(e),g=u(r),y=(i%360+360)%360,m=y*(p/180);if(t===s&&n===l)return{x:t,y:n};if(v===0||g===0)return Pw(t,n,s,l,c).point;var x=(t-s)/2,b=(n-l)/2,w={x:h(m)*x+f(m)*b,y:-f(m)*x+h(m)*b},S=Math.pow(w.x,2)/Math.pow(v,2)+Math.pow(w.y,2)/Math.pow(g,2);S>1&&(v*=d(S),g*=d(S));var O=Math.pow(v,2)*Math.pow(g,2)-Math.pow(v,2)*Math.pow(w.y,2)-Math.pow(g,2)*Math.pow(w.x,2),M=Math.pow(v,2)*Math.pow(w.y,2)+Math.pow(g,2)*Math.pow(w.x,2),A=O/M;A=A<0?0:A;var T=(a!==o?1:-1)*d(A),C={x:T*(v*w.y/g),y:T*(-(g*w.x)/v)},P={x:h(m)*C.x-f(m)*C.y+(t+s)/2,y:f(m)*C.x+h(m)*C.y+(n+l)/2},_={x:(w.x-C.x)/v,y:(w.y-C.y)/g},k=h_({x:1,y:0},_),I={x:(-w.x-C.x)/v,y:(-w.y-C.y)/g},L=h_(_,I);!o&&L>0?L-=2*p:o&&L<0&&(L+=2*p),L%=2*p;var F=k+L*c,B=v*h(F),D=g*f(F),N={x:h(m)*B-f(m)*D+P.x,y:f(m)*B+h(m)*D+P.y};return N}function twt(t,n,e,r,i,a,o,s,l,c,u){var f,h=u.bbox,d=h===void 0?!0:h,p=u.length,v=p===void 0?!0:p,g=u.sampleSize,y=g===void 0?30:g,m=typeof c=="number",x=t,b=n,w=0,S=[x,b,w],O=[x,b],M=0,A={x:0,y:0},T=[{x,y:b}];m&&c<=0&&(A={x,y:b});for(var C=0;C<=y;C+=1){if(M=C/y,f=Jbt(t,n,e,r,i,a,o,s,l,M),x=f.x,b=f.y,d&&T.push({x,y:b}),v&&(w+=Rr(O,[x,b])),O=[x,b],m&&w>=c&&c>S[2]){var P=(w-c)/(w-S[2]);A={x:O[0]*(1-P)+S[0]*P,y:O[1]*(1-P)+S[1]*P}}S=[x,b,w]}return m&&c>=w&&(A={x:s,y:l}),{length:w,point:A,min:{x:Math.min.apply(null,T.map(function(_){return _.x})),y:Math.min.apply(null,T.map(function(_){return _.y}))},max:{x:Math.max.apply(null,T.map(function(_){return _.x})),y:Math.max.apply(null,T.map(function(_){return _.y}))}}}function ewt(t,n,e,r,i,a,o,s,l){var c=1-l;return{x:Math.pow(c,3)*t+3*Math.pow(c,2)*l*e+3*c*Math.pow(l,2)*i+Math.pow(l,3)*o,y:Math.pow(c,3)*n+3*Math.pow(c,2)*l*r+3*c*Math.pow(l,2)*a+Math.pow(l,3)*s}}function Pz(t,n,e,r,i,a,o,s,l,c){var u,f=c.bbox,h=f===void 0?!0:f,d=c.length,p=d===void 0?!0:d,v=c.sampleSize,g=v===void 0?10:v,y=typeof l=="number",m=t,x=n,b=0,w=[m,x,b],S=[m,x],O=0,M={x:0,y:0},A=[{x:m,y:x}];y&&l<=0&&(M={x:m,y:x});for(var T=0;T<=g;T+=1){if(O=T/g,u=ewt(t,n,e,r,i,a,o,s,O),m=u.x,x=u.y,h&&A.push({x:m,y:x}),p&&(b+=Rr(S,[m,x])),S=[m,x],y&&b>=l&&l>w[2]){var C=(b-l)/(b-w[2]);M={x:S[0]*(1-C)+w[0]*C,y:S[1]*(1-C)+w[1]*C}}w=[m,x,b]}return y&&l>=b&&(M={x:o,y:s}),{length:b,point:M,min:{x:Math.min.apply(null,A.map(function(P){return P.x})),y:Math.min.apply(null,A.map(function(P){return P.y}))},max:{x:Math.max.apply(null,A.map(function(P){return P.x})),y:Math.max.apply(null,A.map(function(P){return P.y}))}}}function nwt(t,n,e,r,i,a,o){var s=1-o;return{x:Math.pow(s,2)*t+2*s*o*e+Math.pow(o,2)*i,y:Math.pow(s,2)*n+2*s*o*r+Math.pow(o,2)*a}}function rwt(t,n,e,r,i,a,o,s){var l,c=s.bbox,u=c===void 0?!0:c,f=s.length,h=f===void 0?!0:f,d=s.sampleSize,p=d===void 0?10:d,v=typeof o=="number",g=t,y=n,m=0,x=[g,y,m],b=[g,y],w=0,S={x:0,y:0},O=[{x:g,y}];v&&o<=0&&(S={x:g,y});for(var M=0;M<=p;M+=1){if(w=M/p,l=nwt(t,n,e,r,i,a,w),g=l.x,y=l.y,u&&O.push({x:g,y}),h&&(m+=Rr(b,[g,y])),b=[g,y],v&&m>=o&&o>x[2]){var A=(m-o)/(m-x[2]);S={x:b[0]*(1-A)+x[0]*A,y:b[1]*(1-A)+x[1]*A}}x=[g,y,m]}return v&&o>=m&&(S={x:i,y:a}),{length:m,point:S,min:{x:Math.min.apply(null,O.map(function(T){return T.x})),y:Math.min.apply(null,O.map(function(T){return T.y}))},max:{x:Math.max.apply(null,O.map(function(T){return T.x})),y:Math.max.apply(null,O.map(function(T){return T.y}))}}}function kz(t,n,e){for(var r,i,a,o,s,l,c=Ug(t),u=typeof n=="number",f,h=[],d,p=0,v=0,g=0,y=0,m,x=[],b=[],w=0,S={x:0,y:0},O=S,M=S,A=S,T=0,C=0,P=c.length;C<P;C+=1)m=c[C],d=m[0],f=d==="M",h=f?h:[p,v].concat(m.slice(1)),f?(g=m[1],y=m[2],S={x:g,y},O=S,w=0,u&&n<.001&&(A=S)):d==="L"?(r=Pw(h[0],h[1],h[2],h[3],(n||0)-T),w=r.length,S=r.min,O=r.max,M=r.point):d==="A"?(i=twt(h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],h[8],(n||0)-T,e||{}),w=i.length,S=i.min,O=i.max,M=i.point):d==="C"?(a=Pz(h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],(n||0)-T,e||{}),w=a.length,S=a.min,O=a.max,M=a.point):d==="Q"?(o=rwt(h[0],h[1],h[2],h[3],h[4],h[5],(n||0)-T,e||{}),w=o.length,S=o.min,O=o.max,M=o.point):d==="Z"&&(h=[p,v,g,y],s=Pw(h[0],h[1],h[2],h[3],(n||0)-T),w=s.length,S=s.min,O=s.max,M=s.point),u&&T<n&&T+w>=n&&(A=M),b.push(O),x.push(S),T+=w,l=d!=="Z"?m.slice(-2):[g,y],p=l[0],v=l[1];return u&&n>=T&&(A={x:p,y:v}),{length:T,point:A,min:{x:Math.min.apply(null,x.map(function(_){return _.x})),y:Math.min.apply(null,x.map(function(_){return _.y}))},max:{x:Math.max.apply(null,b.map(function(_){return _.x})),y:Math.max.apply(null,b.map(function(_){return _.y}))}}}function iwt(t,n){return kz(t,void 0,E(E({},n),{bbox:!1,length:!0})).length}function awt(t){var n=t.length,e=n-1;return t.map(function(r,i){return t.map(function(a,o){var s=i+o,l;return o===0||t[s]&&t[s][0]==="M"?(l=t[s],["M"].concat(l.slice(-2))):(s>=n&&(s-=e),t[s])})})}function owt(t,n){var e=t.length-1,r=[],i=0,a=0,o=awt(t);return o.forEach(function(s,l){t.slice(1).forEach(function(c,u){a+=Rr(t[(l+u)%e].slice(-2),n[u%e].slice(-2))}),r[l]=a,a=0}),i=r.indexOf(Math.min.apply(null,r)),o[i]}function swt(t,n,e,r,i,a,o,s){return 3*((s-n)*(e+i)-(o-t)*(r+a)+r*(t-i)-e*(n-a)+s*(i+t/3)-o*(a+n/3))/20}function lwt(t){var n=0,e=0,r=0;return Cw(t).map(function(i){var a;switch(i[0]){case"M":return n=i[1],e=i[2],0;default:var o=i.slice(1),s=o[0],l=o[1],c=o[2],u=o[3],f=o[4],h=o[5];return r=swt(n,e,s,l,c,u,f,h),a=i.slice(-2),n=a[0],e=a[1],r}}).reduce(function(i,a){return i+a},0)}function d_(t){return lwt(t)>=0}function cwt(t,n,e){return kz(t,n,E(E({},e),{bbox:!1,length:!0})).point}function uwt(t,n){n===void 0&&(n=.5);var e=t.slice(0,2),r=t.slice(2,4),i=t.slice(4,6),a=t.slice(6,8),o=xo(e,r,n),s=xo(r,i,n),l=xo(i,a,n),c=xo(o,s,n),u=xo(s,l,n),f=xo(c,u,n);return[["C"].concat(o,c,f),["C"].concat(u,l,a)]}function p_(t){return t.map(function(n,e,r){var i=e&&r[e-1].slice(-2).concat(n.slice(1)),a=e?Pz(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8],{bbox:!1}).length:0,o;return e?o=a?uwt(i):[n,n]:o=[n],{s:n,ss:o,l:a}})}function _z(t,n,e){var r=p_(t),i=p_(n),a=r.length,o=i.length,s=r.filter(function(g){return g.l}).length,l=i.filter(function(g){return g.l}).length,c=r.filter(function(g){return g.l}).reduce(function(g,y){var m=y.l;return g+m},0)/s||0,u=i.filter(function(g){return g.l}).reduce(function(g,y){var m=y.l;return g+m},0)/l||0,f=e||Math.max(a,o),h=[c,u],d=[f-a,f-o],p=0,v=[r,i].map(function(g,y){return g.l===f?g.map(function(m){return m.s}):g.map(function(m,x){return p=x&&d[y]&&m.l>=h[y],d[y]-=p?1:0,p?m.ss:[m.s]}).flat()});return v[0].length===v[1].length?v:_z(v[0],v[1],f)}function Lz(t,n,e,r){var i=t-e,a=n-r;return Math.sqrt(i*i+a*a)}function Iz(t,n){var e=Math.min.apply(Math,X([],R(t),!1)),r=Math.min.apply(Math,X([],R(n),!1)),i=Math.max.apply(Math,X([],R(t),!1)),a=Math.max.apply(Math,X([],R(n),!1));return{x:e,y:r,width:i-e,height:a-r}}function fwt(t,n,e){return Math.atan(-n/t*Math.tan(e))}function hwt(t,n,e){return Math.atan(n/(t*Math.tan(e)))}function dwt(t,n,e,r,i,a){return e*Math.cos(i)*Math.cos(a)-r*Math.sin(i)*Math.sin(a)+t}function pwt(t,n,e,r,i,a){return e*Math.sin(i)*Math.cos(a)+r*Math.cos(i)*Math.sin(a)+n}function vwt(t,n,e,r,i,a,o){for(var s=fwt(e,r,i),l=1/0,c=-1/0,u=[a,o],f=-Math.PI*2;f<=Math.PI*2;f+=Math.PI){var h=s+f;a<o?a<h&&h<o&&u.push(h):o<h&&h<a&&u.push(h)}for(var f=0;f<u.length;f++){var d=dwt(t,n,e,r,i,u[f]);d<l&&(l=d),d>c&&(c=d)}for(var p=hwt(e,r,i),v=1/0,g=-1/0,y=[a,o],f=-Math.PI*2;f<=Math.PI*2;f+=Math.PI){var m=p+f;a<o?a<m&&m<o&&y.push(m):o<m&&m<a&&y.push(m)}for(var f=0;f<y.length;f++){var x=pwt(t,n,e,r,i,y[f]);x<v&&(v=x),x>g&&(g=x)}return{x:l,y:v,width:c-l,height:g-v}}function Fz(t,n,e,r){return Lz(t,n,e,r)}function Dz(t,n,e,r,i){return{x:(1-i)*t+i*e,y:(1-i)*n+i*r}}function v_(t,n,e,r,i){var a=1-i;return a*a*a*t+3*n*i*a*a+3*e*i*i*a+r*i*i*i}function g_(t,n,e,r){var i=-3*t+9*n-9*e+3*r,a=6*t-12*n+6*e,o=3*n-3*t,s=[],l,c,u;if(Kf(i,0))Kf(a,0)||(l=-o/a,l>=0&&l<=1&&s.push(l));else{var f=a*a-4*i*o;Kf(f,0)?s.push(-a/(2*i)):f>0&&(u=Math.sqrt(f),l=(-a+u)/(2*i),c=(-a-u)/(2*i),l>=0&&l<=1&&s.push(l),c>=0&&c<=1&&s.push(c))}return s}function gwt(t,n,e,r,i,a,o,s){for(var l=[t,o],c=[n,s],u=g_(t,e,i,o),f=g_(n,r,a,s),h=0;h<u.length;h++)l.push(v_(t,e,i,o,u[h]));for(var h=0;h<f.length;h++)c.push(v_(n,r,a,s,f[h]));return Iz(l,c)}function ywt(t){if(t.length<2)return 0;for(var n=0,e=0;e<t.length-1;e++){var r=t[e],i=t[e+1];n+=Lz(r[0],r[1],i[0],i[1])}return n}function mwt(t){return ywt(t)}function y_(t,n,e,r){var i=1-r;return i*i*t+2*r*i*n+r*r*e}function m_(t,n,e){var r=t+e-2*n;if(Kf(r,0))return[.5];var i=(t-n)/r;return i<=1&&i>=0?[i]:[]}function xwt(t,n,e,r,i,a){var o=m_(t,e,i)[0],s=m_(n,r,a)[0],l=[t,i],c=[n,a];return o!==void 0&&l.push(y_(t,e,i,o)),s!==void 0&&c.push(y_(n,r,a,s)),Iz(l,c)}var bwt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Rz={exports:{}};(function(t,n){(function(e,r){t.exports=r()})(bwt,function(){function e(w,S,O,M,A){r(w,S,O||0,M||w.length-1,A||a)}function r(w,S,O,M,A){for(;M>O;){if(M-O>600){var T=M-O+1,C=S-O+1,P=Math.log(T),_=.5*Math.exp(2*P/3),k=.5*Math.sqrt(P*_*(T-_)/T)*(C-T/2<0?-1:1),I=Math.max(O,Math.floor(S-C*_/T+k)),L=Math.min(M,Math.floor(S+(T-C)*_/T+k));r(w,S,I,L,A)}var F=w[S],B=O,D=M;for(i(w,O,S),A(w[M],F)>0&&i(w,O,M);B<D;){for(i(w,B,D),B++,D--;A(w[B],F)<0;)B++;for(;A(w[D],F)>0;)D--}A(w[O],F)===0?i(w,O,D):(D++,i(w,D,M)),D<=S&&(O=D+1),S<=D&&(M=D-1)}}function i(w,S,O){var M=w[S];w[S]=w[O],w[O]=M}function a(w,S){return w<S?-1:w>S?1:0}var o=function(S){S===void 0&&(S=9),this._maxEntries=Math.max(4,S),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()};o.prototype.all=function(){return this._all(this.data,[])},o.prototype.search=function(S){var O=this.data,M=[];if(!m(S,O))return M;for(var A=this.toBBox,T=[];O;){for(var C=0;C<O.children.length;C++){var P=O.children[C],_=O.leaf?A(P):P;m(S,_)&&(O.leaf?M.push(P):y(S,_)?this._all(P,M):T.push(P))}O=T.pop()}return M},o.prototype.collides=function(S){var O=this.data;if(!m(S,O))return!1;for(var M=[];O;){for(var A=0;A<O.children.length;A++){var T=O.children[A],C=O.leaf?this.toBBox(T):T;if(m(S,C)){if(O.leaf||y(S,C))return!0;M.push(T)}}O=M.pop()}return!1},o.prototype.load=function(S){if(!(S&&S.length))return this;if(S.length<this._minEntries){for(var O=0;O<S.length;O++)this.insert(S[O]);return this}var M=this._build(S.slice(),0,S.length-1,0);if(!this.data.children.length)this.data=M;else if(this.data.height===M.height)this._splitRoot(this.data,M);else{if(this.data.height<M.height){var A=this.data;this.data=M,M=A}this._insert(M,this.data.height-M.height-1,!0)}return this},o.prototype.insert=function(S){return S&&this._insert(S,this.data.height-1),this},o.prototype.clear=function(){return this.data=x([]),this},o.prototype.remove=function(S,O){if(!S)return this;for(var M=this.data,A=this.toBBox(S),T=[],C=[],P,_,k;M||T.length;){if(M||(M=T.pop(),_=T[T.length-1],P=C.pop(),k=!0),M.leaf){var I=s(S,M.children,O);if(I!==-1)return M.children.splice(I,1),T.push(M),this._condense(T),this}!k&&!M.leaf&&y(M,A)?(T.push(M),C.push(P),P=0,_=M,M=M.children[0]):_?(P++,M=_.children[P],k=!1):M=null}return this},o.prototype.toBBox=function(S){return S},o.prototype.compareMinX=function(S,O){return S.minX-O.minX},o.prototype.compareMinY=function(S,O){return S.minY-O.minY},o.prototype.toJSON=function(){return this.data},o.prototype.fromJSON=function(S){return this.data=S,this},o.prototype._all=function(S,O){for(var M=[];S;)S.leaf?O.push.apply(O,S.children):M.push.apply(M,S.children),S=M.pop();return O},o.prototype._build=function(S,O,M,A){var T=M-O+1,C=this._maxEntries,P;if(T<=C)return P=x(S.slice(O,M+1)),l(P,this.toBBox),P;A||(A=Math.ceil(Math.log(T)/Math.log(C)),C=Math.ceil(T/Math.pow(C,A-1))),P=x([]),P.leaf=!1,P.height=A;var _=Math.ceil(T/C),k=_*Math.ceil(Math.sqrt(C));b(S,O,M,k,this.compareMinX);for(var I=O;I<=M;I+=k){var L=Math.min(I+k-1,M);b(S,I,L,_,this.compareMinY);for(var F=I;F<=L;F+=_){var B=Math.min(F+_-1,L);P.children.push(this._build(S,F,B,A-1))}}return l(P,this.toBBox),P},o.prototype._chooseSubtree=function(S,O,M,A){for(;A.push(O),!(O.leaf||A.length-1===M);){for(var T=1/0,C=1/0,P=void 0,_=0;_<O.children.length;_++){var k=O.children[_],I=d(k),L=v(S,k)-I;L<C?(C=L,T=I<T?I:T,P=k):L===C&&I<T&&(T=I,P=k)}O=P||O.children[0]}return O},o.prototype._insert=function(S,O,M){var A=M?S:this.toBBox(S),T=[],C=this._chooseSubtree(A,this.data,O,T);for(C.children.push(S),u(C,A);O>=0&&T[O].children.length>this._maxEntries;)this._split(T,O),O--;this._adjustParentBBoxes(A,T,O)},o.prototype._split=function(S,O){var M=S[O],A=M.children.length,T=this._minEntries;this._chooseSplitAxis(M,T,A);var C=this._chooseSplitIndex(M,T,A),P=x(M.children.splice(C,M.children.length-C));P.height=M.height,P.leaf=M.leaf,l(M,this.toBBox),l(P,this.toBBox),O?S[O-1].children.push(P):this._splitRoot(M,P)},o.prototype._splitRoot=function(S,O){this.data=x([S,O]),this.data.height=S.height+1,this.data.leaf=!1,l(this.data,this.toBBox)},o.prototype._chooseSplitIndex=function(S,O,M){for(var A,T=1/0,C=1/0,P=O;P<=M-O;P++){var _=c(S,0,P,this.toBBox),k=c(S,P,M,this.toBBox),I=g(_,k),L=d(_)+d(k);I<T?(T=I,A=P,C=L<C?L:C):I===T&&L<C&&(C=L,A=P)}return A||M-O},o.prototype._chooseSplitAxis=function(S,O,M){var A=S.leaf?this.compareMinX:f,T=S.leaf?this.compareMinY:h,C=this._allDistMargin(S,O,M,A),P=this._allDistMargin(S,O,M,T);C<P&&S.children.sort(A)},o.prototype._allDistMargin=function(S,O,M,A){S.children.sort(A);for(var T=this.toBBox,C=c(S,0,O,T),P=c(S,M-O,M,T),_=p(C)+p(P),k=O;k<M-O;k++){var I=S.children[k];u(C,S.leaf?T(I):I),_+=p(C)}for(var L=M-O-1;L>=O;L--){var F=S.children[L];u(P,S.leaf?T(F):F),_+=p(P)}return _},o.prototype._adjustParentBBoxes=function(S,O,M){for(var A=M;A>=0;A--)u(O[A],S)},o.prototype._condense=function(S){for(var O=S.length-1,M=void 0;O>=0;O--)S[O].children.length===0?O>0?(M=S[O-1].children,M.splice(M.indexOf(S[O]),1)):this.clear():l(S[O],this.toBBox)};function s(w,S,O){if(!O)return S.indexOf(w);for(var M=0;M<S.length;M++)if(O(w,S[M]))return M;return-1}function l(w,S){c(w,0,w.children.length,S,w)}function c(w,S,O,M,A){A||(A=x(null)),A.minX=1/0,A.minY=1/0,A.maxX=-1/0,A.maxY=-1/0;for(var T=S;T<O;T++){var C=w.children[T];u(A,w.leaf?M(C):C)}return A}function u(w,S){return w.minX=Math.min(w.minX,S.minX),w.minY=Math.min(w.minY,S.minY),w.maxX=Math.max(w.maxX,S.maxX),w.maxY=Math.max(w.maxY,S.maxY),w}function f(w,S){return w.minX-S.minX}function h(w,S){return w.minY-S.minY}function d(w){return(w.maxX-w.minX)*(w.maxY-w.minY)}function p(w){return w.maxX-w.minX+(w.maxY-w.minY)}function v(w,S){return(Math.max(S.maxX,w.maxX)-Math.min(S.minX,w.minX))*(Math.max(S.maxY,w.maxY)-Math.min(S.minY,w.minY))}function g(w,S){var O=Math.max(w.minX,S.minX),M=Math.max(w.minY,S.minY),A=Math.min(w.maxX,S.maxX),T=Math.min(w.maxY,S.maxY);return Math.max(0,A-O)*Math.max(0,T-M)}function y(w,S){return w.minX<=S.minX&&w.minY<=S.minY&&S.maxX<=w.maxX&&S.maxY<=w.maxY}function m(w,S){return S.minX<=w.maxX&&S.minY<=w.maxY&&S.maxX>=w.minX&&S.maxY>=w.minY}function x(w){return{children:w,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function b(w,S,O,M,A){for(var T=[S,O];T.length;)if(O=T.pop(),S=T.pop(),!(O-S<=M)){var C=S+Math.ceil((O-S)/M/2)*M;e(w,C,S,O,A),T.push(S,C,C,O)}}return o})})(Rz);var wwt=Rz.exports,K;(function(t){t.GROUP="g",t.CIRCLE="circle",t.ELLIPSE="ellipse",t.IMAGE="image",t.RECT="rect",t.LINE="line",t.POLYLINE="polyline",t.POLYGON="polygon",t.TEXT="text",t.PATH="path",t.HTML="html",t.MESH="mesh"})(K||(K={}));var Pc;(function(t){t[t.ZERO=0]="ZERO",t[t.NEGATIVE_ONE=1]="NEGATIVE_ONE"})(Pc||(Pc={}));var vs=function(){function t(){this.plugins=[]}return t.prototype.addRenderingPlugin=function(n){this.plugins.push(n),this.context.renderingPlugins.push(n)},t.prototype.removeAllRenderingPlugins=function(){var n=this;this.plugins.forEach(function(e){var r=n.context.renderingPlugins.indexOf(e);r>=0&&n.context.renderingPlugins.splice(r,1)})},t}(),Swt=function(){function t(n){this.clipSpaceNearZ=Pc.NEGATIVE_ONE,this.plugins=[],this.config=E({enableDirtyCheck:!0,enableCulling:!1,enableAutoRendering:!0,enableDirtyRectangleRendering:!0,enableDirtyRectangleRenderingDebug:!1},n)}return t.prototype.registerPlugin=function(n){var e=this.plugins.findIndex(function(r){return r===n});e===-1&&this.plugins.push(n)},t.prototype.unregisterPlugin=function(n){var e=this.plugins.findIndex(function(r){return r===n});e>-1&&this.plugins.splice(e,1)},t.prototype.getPlugins=function(){return this.plugins},t.prototype.getPlugin=function(n){return this.plugins.find(function(e){return e.name===n})},t.prototype.getConfig=function(){return this.config},t.prototype.setConfig=function(n){Object.assign(this.config,n)},t}();function Xl(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t}function ax(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t}function qv(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t}function x_(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t}function Owt(t,n,e){return t[0]=Math.max(n[0],e[0]),t[1]=Math.max(n[1],e[1]),t[2]=Math.max(n[2],e[2]),t}function Mwt(t,n,e){return t[0]=Math.min(n[0],e[0]),t[1]=Math.min(n[1],e[1]),t[2]=Math.min(n[2],e[2]),t}function kc(t){return t===void 0?0:t>360||t<-360?t%360:t}function tr(t,n,e){return n===void 0&&(n=0),e===void 0&&(e=0),Array.isArray(t)&&t.length===3?Ca(t):Rl(t)?Ut(t,n,e):Ut(t[0],t[1]||n,t[2]||e)}function je(t){return t*(Math.PI/180)}function ai(t){return t*(180/Math.PI)}function Awt(t){return 360*t}function Ewt(t,n){var e=n[0],r=n[1],i=n[2],a=n[3],o=e*e,s=r*r,l=i*i,c=a*a,u=o+s+l+c,f=e*a-r*i;return f>.499995*u?(t[0]=Math.PI/2,t[1]=2*Math.atan2(r,e),t[2]=0):f<-.499995*u?(t[0]=-Math.PI/2,t[1]=2*Math.atan2(r,e),t[2]=0):(t[0]=Math.asin(2*(e*i-a*r)),t[1]=Math.atan2(2*(e*a+r*i),1-2*(l+c)),t[2]=Math.atan2(2*(e*r+i*a),1-2*(s+l))),t}function Twt(t,n){var e,r,i=Math.PI*.5,a=R(Bc($t(),n),3),o=a[0],s=a[1],l=a[2],c=Math.asin(-n[2]/o);return c<i?c>-i?(e=Math.atan2(n[6]/s,n[10]/l),r=Math.atan2(n[1]/o,n[0]/o)):(r=0,e=-Math.atan2(n[4]/s,n[5]/s)):(r=0,e=Math.atan2(n[4]/s,n[5]/s)),t[0]=e,t[1]=c,t[2]=r,t}function ox(t,n){return n.length===16?Twt(t,n):Ewt(t,n)}function Cwt(t,n,e,r,i){var a=Math.cos(t),o=Math.sin(t);return ZX(r*a,i*o,0,-r*o,i*a,0,n,e,1)}function Pwt(t,n,e,r,i,a,o,s){s===void 0&&(s=!1);var l=2*a/(e-n),c=2*a/(r-i),u=(e+n)/(e-n),f=(r+i)/(r-i),h,d;return s?(h=-o/(o-a),d=-o*a/(o-a)):(h=-(o+a)/(o-a),d=-2*o*a/(o-a)),t[0]=l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=u,t[9]=f,t[10]=h,t[11]=-1,t[12]=0,t[13]=0,t[14]=d,t[15]=0,t}function b_(t){var n=t[0],e=t[1],r=t[3],i=t[4],a=Math.sqrt(n*n+e*e),o=Math.sqrt(r*r+i*i),s=n*i-e*r;s<0&&(n<i?a=-a:o=-o),a&&(n*=1/a,e*=1/a),o&&(r*=1/o,i*=1/o);var l=Math.atan2(e,n),c=ai(l);return[t[6],t[7],a,o,c]}var Hi=pe(),Ei=pe(),uf=cc(),Et=[$t(),$t(),$t()],w_=$t();function kwt(t,n,e,r,i,a){if(!_wt(Hi,t)||(al(Ei,Hi),Ei[3]=0,Ei[7]=0,Ei[11]=0,Ei[15]=1,Math.abs(mR(Ei))<1e-8))return!1;var o=Hi[3],s=Hi[7],l=Hi[11],c=Hi[12],u=Hi[13],f=Hi[14],h=Hi[15];if(o!==0||s!==0||l!==0){uf[0]=o,uf[1]=s,uf[2]=l,uf[3]=h;var d=_i(Ei,Ei);if(!d)return!1;yR(Ei,Ei),uc(i,uf,Ei)}else i[0]=i[1]=i[2]=0,i[3]=1;if(n[0]=c,n[1]=u,n[2]=f,Lwt(Et,Hi),e[0]=La(Et[0]),Hs(Et[0],Et[0]),r[0]=ea(Et[0],Et[1]),sx(Et[1],Et[1],Et[0],1,-r[0]),e[1]=La(Et[1]),Hs(Et[1],Et[1]),r[0]/=e[1],r[1]=ea(Et[0],Et[2]),sx(Et[2],Et[2],Et[0],1,-r[1]),r[2]=ea(Et[1],Et[2]),sx(Et[2],Et[2],Et[1],1,-r[2]),e[2]=La(Et[2]),Hs(Et[2],Et[2]),r[1]/=e[2],r[2]/=e[2],Lv(w_,Et[1],Et[2]),ea(Et[0],w_)<0)for(var p=0;p<3;p++)e[p]*=-1,Et[p][0]*=-1,Et[p][1]*=-1,Et[p][2]*=-1;return a[0]=.5*Math.sqrt(Math.max(1+Et[0][0]-Et[1][1]-Et[2][2],0)),a[1]=.5*Math.sqrt(Math.max(1-Et[0][0]+Et[1][1]-Et[2][2],0)),a[2]=.5*Math.sqrt(Math.max(1-Et[0][0]-Et[1][1]+Et[2][2],0)),a[3]=.5*Math.sqrt(Math.max(1+Et[0][0]+Et[1][1]+Et[2][2],0)),Et[2][1]>Et[1][2]&&(a[0]=-a[0]),Et[0][2]>Et[2][0]&&(a[1]=-a[1]),Et[1][0]>Et[0][1]&&(a[2]=-a[2]),!0}function _wt(t,n){var e=n[15];if(e===0)return!1;for(var r=1/e,i=0;i<16;i++)t[i]=n[i]*r;return!0}function Lwt(t,n){t[0][0]=n[0],t[0][1]=n[1],t[0][2]=n[2],t[1][0]=n[4],t[1][1]=n[5],t[1][2]=n[6],t[2][0]=n[8],t[2][1]=n[9],t[2][2]=n[10]}function sx(t,n,e,r,i){t[0]=n[0]*r+e[0]*i,t[1]=n[1]*r+e[1]*i,t[2]=n[2]*r+e[2]*i}var dn=function(){function t(){this.center=[0,0,0],this.halfExtents=[0,0,0],this.min=[0,0,0],this.max=[0,0,0]}return t.isEmpty=function(n){return!n||n.halfExtents[0]===0&&n.halfExtents[1]===0&&n.halfExtents[2]===0},t.prototype.update=function(n,e){Xl(this.center,n),Xl(this.halfExtents,e),ax(this.min,this.center,this.halfExtents),qv(this.max,this.center,this.halfExtents)},t.prototype.setMinMax=function(n,e){qv(this.center,e,n),x_(this.center,this.center,.5),ax(this.halfExtents,e,n),x_(this.halfExtents,this.halfExtents,.5),Xl(this.min,n),Xl(this.max,e)},t.prototype.getMin=function(){return this.min},t.prototype.getMax=function(){return this.max},t.prototype.add=function(n){if(!t.isEmpty(n)){if(t.isEmpty(this)){this.setMinMax(n.getMin(),n.getMax());return}var e=this.center,r=e[0],i=e[1],a=e[2],o=this.halfExtents,s=o[0],l=o[1],c=o[2],u=r-s,f=r+s,h=i-l,d=i+l,p=a-c,v=a+c,g=n.center,y=g[0],m=g[1],x=g[2],b=n.halfExtents,w=b[0],S=b[1],O=b[2],M=y-w,A=y+w,T=m-S,C=m+S,P=x-O,_=x+O;M<u&&(u=M),A>f&&(f=A),T<h&&(h=T),C>d&&(d=C),P<p&&(p=P),_>v&&(v=_),e[0]=(u+f)*.5,e[1]=(h+d)*.5,e[2]=(p+v)*.5,o[0]=(f-u)*.5,o[1]=(d-h)*.5,o[2]=(v-p)*.5,this.min[0]=u,this.min[1]=h,this.min[2]=p,this.max[0]=f,this.max[1]=d,this.max[2]=v}},t.prototype.setFromTransformedAABB=function(n,e){var r=this.center,i=this.halfExtents,a=n.center,o=n.halfExtents,s=e[0],l=e[4],c=e[8],u=e[1],f=e[5],h=e[9],d=e[2],p=e[6],v=e[10],g=Math.abs(s),y=Math.abs(l),m=Math.abs(c),x=Math.abs(u),b=Math.abs(f),w=Math.abs(h),S=Math.abs(d),O=Math.abs(p),M=Math.abs(v);r[0]=e[12]+s*a[0]+l*a[1]+c*a[2],r[1]=e[13]+u*a[0]+f*a[1]+h*a[2],r[2]=e[14]+d*a[0]+p*a[1]+v*a[2],i[0]=g*o[0]+y*o[1]+m*o[2],i[1]=x*o[0]+b*o[1]+w*o[2],i[2]=S*o[0]+O*o[1]+M*o[2],ax(this.min,r,i),qv(this.max,r,i)},t.prototype.intersects=function(n){var e=this.getMax(),r=this.getMin(),i=n.getMax(),a=n.getMin();return r[0]<=i[0]&&e[0]>=a[0]&&r[1]<=i[1]&&e[1]>=a[1]&&r[2]<=i[2]&&e[2]>=a[2]},t.prototype.intersection=function(n){if(!this.intersects(n))return null;var e=new t,r=Owt([0,0,0],this.getMin(),n.getMin()),i=Mwt([0,0,0],this.getMax(),n.getMax());return e.setMinMax(r,i),e},t.prototype.getNegativeFarPoint=function(n){return n.pnVertexFlag===273?Xl([0,0,0],this.min):n.pnVertexFlag===272?[this.min[0],this.min[1],this.max[2]]:n.pnVertexFlag===257?[this.min[0],this.max[1],this.min[2]]:n.pnVertexFlag===256?[this.min[0],this.max[1],this.max[2]]:n.pnVertexFlag===17?[this.max[0],this.min[1],this.min[2]]:n.pnVertexFlag===16?[this.max[0],this.min[1],this.max[2]]:n.pnVertexFlag===1?[this.max[0],this.max[1],this.min[2]]:[this.max[0],this.max[1],this.max[2]]},t.prototype.getPositiveFarPoint=function(n){return n.pnVertexFlag===273?Xl([0,0,0],this.max):n.pnVertexFlag===272?[this.max[0],this.max[1],this.min[2]]:n.pnVertexFlag===257?[this.max[0],this.min[1],this.max[2]]:n.pnVertexFlag===256?[this.max[0],this.min[1],this.min[2]]:n.pnVertexFlag===17?[this.min[0],this.max[1],this.max[2]]:n.pnVertexFlag===16?[this.min[0],this.max[1],this.min[2]]:n.pnVertexFlag===1?[this.min[0],this.min[1],this.max[2]]:[this.min[0],this.min[1],this.min[2]]},t}(),Iwt=function(){function t(n,e){this.distance=n||0,this.normal=e||Ut(0,1,0),this.updatePNVertexFlag()}return t.prototype.updatePNVertexFlag=function(){this.pnVertexFlag=(+(this.normal[0]>=0)<<8)+(+(this.normal[1]>=0)<<4)+ +(this.normal[2]>=0)},t.prototype.distanceToPoint=function(n){return ea(n,this.normal)-this.distance},t.prototype.normalize=function(){var n=1/PR(this.normal);mb(this.normal,this.normal,n),this.distance*=n},t.prototype.intersectsLine=function(n,e,r){var i=this.distanceToPoint(n),a=this.distanceToPoint(e),o=i/(i-a),s=o>=0&&o<=1;return s&&r&&xb(r,n,e,o),s},t}(),bo;(function(t){t[t.OUTSIDE=4294967295]="OUTSIDE",t[t.INSIDE=0]="INSIDE",t[t.INDETERMINATE=2147483647]="INDETERMINATE"})(bo||(bo={}));var Fwt=function(){function t(n){if(this.planes=[],n)this.planes=n;else for(var e=0;e<6;e++)this.planes.push(new Iwt)}return t.prototype.extractFromVPMatrix=function(n){var e=R(n,16),r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],c=e[6],u=e[7],f=e[8],h=e[9],d=e[10],p=e[11],v=e[12],g=e[13],y=e[14],m=e[15];Pi(this.planes[0].normal,o-r,u-s,p-f),this.planes[0].distance=m-v,Pi(this.planes[1].normal,o+r,u+s,p+f),this.planes[1].distance=m+v,Pi(this.planes[2].normal,o+i,u+l,p+h),this.planes[2].distance=m+g,Pi(this.planes[3].normal,o-i,u-l,p-h),this.planes[3].distance=m-g,Pi(this.planes[4].normal,o-a,u-c,p-d),this.planes[4].distance=m-y,Pi(this.planes[5].normal,o+a,u+c,p+d),this.planes[5].distance=m+y,this.planes.forEach(function(x){x.normalize(),x.updatePNVertexFlag()})},t}(),kn=function(){function t(n,e){n===void 0&&(n=0),e===void 0&&(e=0),this.x=0,this.y=0,this.x=n,this.y=e}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copyFrom=function(n){this.x=n.x,this.y=n.y},t}(),bl=function(){function t(n,e,r,i){this.x=n,this.y=e,this.width=r,this.height=i,this.left=n,this.right=n+r,this.top=e,this.bottom=e+i}return t.prototype.toJSON=function(){},t}(),ye="Method not implemented.",Ul="Use document.documentElement instead.",Dwt="Cannot append a destroyed element.",ue;(function(t){t[t.ORBITING=0]="ORBITING",t[t.EXPLORING=1]="EXPLORING",t[t.TRACKING=2]="TRACKING"})(ue||(ue={}));var qh;(function(t){t[t.DEFAULT=0]="DEFAULT",t[t.ROTATIONAL=1]="ROTATIONAL",t[t.TRANSLATIONAL=2]="TRANSLATIONAL",t[t.CINEMATIC=3]="CINEMATIC"})(qh||(qh={}));var pr;(function(t){t[t.ORTHOGRAPHIC=0]="ORTHOGRAPHIC",t[t.PERSPECTIVE=1]="PERSPECTIVE"})(pr||(pr={}));var Bz={UPDATED:"updated"},S_=2e-4,Nz=function(){function t(){this.clipSpaceNearZ=Pc.NEGATIVE_ONE,this.eventEmitter=new NM,this.matrix=pe(),this.right=Ut(1,0,0),this.up=Ut(0,1,0),this.forward=Ut(0,0,1),this.position=Ut(0,0,1),this.focalPoint=Ut(0,0,0),this.distanceVector=Ut(0,0,-1),this.distance=1,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.dollyingStep=0,this.maxDistance=1/0,this.minDistance=-1/0,this.zoom=1,this.rotateWorld=!1,this.fov=30,this.near=.1,this.far=1e3,this.aspect=1,this.projectionMatrix=pe(),this.projectionMatrixInverse=pe(),this.jitteredProjectionMatrix=void 0,this.enableUpdate=!0,this.type=ue.EXPLORING,this.trackingMode=qh.DEFAULT,this.projectionMode=pr.PERSPECTIVE,this.frustum=new Fwt,this.orthoMatrix=pe()}return t.prototype.isOrtho=function(){return this.projectionMode===pr.ORTHOGRAPHIC},t.prototype.getProjectionMode=function(){return this.projectionMode},t.prototype.getPerspective=function(){return this.jitteredProjectionMatrix||this.projectionMatrix},t.prototype.getPerspectiveInverse=function(){return this.projectionMatrixInverse},t.prototype.getFrustum=function(){return this.frustum},t.prototype.getPosition=function(){return this.position},t.prototype.getFocalPoint=function(){return this.focalPoint},t.prototype.getDollyingStep=function(){return this.dollyingStep},t.prototype.getNear=function(){return this.near},t.prototype.getFar=function(){return this.far},t.prototype.getZoom=function(){return this.zoom},t.prototype.getOrthoMatrix=function(){return this.orthoMatrix},t.prototype.getView=function(){return this.view},t.prototype.setEnableUpdate=function(n){this.enableUpdate=n},t.prototype.setType=function(n,e){return this.type=n,this.type===ue.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===ue.TRACKING&&e!==void 0&&this.setTrackingMode(e),this},t.prototype.setProjectionMode=function(n){return this.projectionMode=n,this},t.prototype.setTrackingMode=function(n){if(this.type!==ue.TRACKING)throw new Error("Impossible to set a tracking mode if the camera is not of tracking type");return this.trackingMode=n,this},t.prototype.setWorldRotation=function(n){return this.rotateWorld=n,this._getAngles(),this},t.prototype.getViewTransform=function(){return _i(pe(),this.matrix)},t.prototype.getWorldTransform=function(){return this.matrix},t.prototype.jitterProjectionMatrix=function(n,e){var r=cS(pe(),[n,e,0]);this.jitteredProjectionMatrix=Vn(pe(),r,this.projectionMatrix)},t.prototype.clearJitterProjectionMatrix=function(){this.jitteredProjectionMatrix=void 0},t.prototype.setMatrix=function(n){return this.matrix=n,this._update(),this},t.prototype.setFov=function(n){return this.setPerspective(this.near,this.far,n,this.aspect),this},t.prototype.setAspect=function(n){return this.setPerspective(this.near,this.far,this.fov,n),this},t.prototype.setNear=function(n){return this.projectionMode===pr.PERSPECTIVE?this.setPerspective(n,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,n,this.far),this},t.prototype.setFar=function(n){return this.projectionMode===pr.PERSPECTIVE?this.setPerspective(this.near,n,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,n),this},t.prototype.setViewOffset=function(n,e,r,i,a,o){return this.aspect=n/e,this.view===void 0&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=n,this.view.fullHeight=e,this.view.offsetX=r,this.view.offsetY=i,this.view.width=a,this.view.height=o,this.projectionMode===pr.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this},t.prototype.clearViewOffset=function(){return this.view!==void 0&&(this.view.enabled=!1),this.projectionMode===pr.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this},t.prototype.setZoom=function(n){return this.zoom=n,this.projectionMode===pr.ORTHOGRAPHIC?this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far):this.projectionMode===pr.PERSPECTIVE&&this.setPerspective(this.near,this.far,this.fov,this.aspect),this},t.prototype.setZoomByViewportPoint=function(n,e){var r=this.canvas.viewport2Canvas({x:e[0],y:e[1]}),i=r.x,a=r.y,o=this.roll;this.rotate(0,0,-o),this.setPosition(i,a),this.setFocalPoint(i,a),this.setZoom(n),this.rotate(0,0,o);var s=this.canvas.viewport2Canvas({x:e[0],y:e[1]}),l=s.x,c=s.y,u=Ut(l-i,c-a,0),f=ea(u,this.right)/La(this.right),h=ea(u,this.up)/La(this.up);return this.pan(-f,-h),this},t.prototype.setPerspective=function(n,e,r,i){var a;this.projectionMode=pr.PERSPECTIVE,this.fov=r,this.near=n,this.far=e,this.aspect=i;var o=this.near*Math.tan(je(.5*this.fov))/this.zoom,s=2*o,l=this.aspect*s,c=-.5*l;if(!((a=this.view)===null||a===void 0)&&a.enabled){var u=this.view.fullWidth,f=this.view.fullHeight;c+=this.view.offsetX*l/u,o-=this.view.offsetY*s/f,l*=this.view.width/u,s*=this.view.height/f}return Pwt(this.projectionMatrix,c,c+l,o,o-s,n,this.far,this.clipSpaceNearZ===Pc.ZERO),ug(this.projectionMatrix,this.projectionMatrix,Ut(1,-1,1)),_i(this.projectionMatrixInverse,this.projectionMatrix),this.triggerUpdate(),this},t.prototype.setOrthographic=function(n,e,r,i,a,o){var s;this.projectionMode=pr.ORTHOGRAPHIC,this.rright=e,this.left=n,this.top=r,this.bottom=i,this.near=a,this.far=o;var l=(this.rright-this.left)/(2*this.zoom),c=(this.top-this.bottom)/(2*this.zoom),u=(this.rright+this.left)/2,f=(this.top+this.bottom)/2,h=u-l,d=u+l,p=f+c,v=f-c;if(!((s=this.view)===null||s===void 0)&&s.enabled){var g=(this.rright-this.left)/this.view.fullWidth/this.zoom,y=(this.top-this.bottom)/this.view.fullHeight/this.zoom;h+=g*this.view.offsetX,d=h+g*this.view.width,p-=y*this.view.offsetY,v=p-y*this.view.height}return this.clipSpaceNearZ===Pc.NEGATIVE_ONE?MR(this.projectionMatrix,h,d,v,p,a,o):AR(this.projectionMatrix,h,d,v,p,a,o),ug(this.projectionMatrix,this.projectionMatrix,Ut(1,-1,1)),_i(this.projectionMatrixInverse,this.projectionMatrix),this._getOrthoMatrix(),this.triggerUpdate(),this},t.prototype.setPosition=function(n,e,r){e===void 0&&(e=this.position[1]),r===void 0&&(r=this.position[2]);var i=tr(n,e,r);return this._setPosition(i),this.setFocalPoint(this.focalPoint),this.triggerUpdate(),this},t.prototype.setFocalPoint=function(n,e,r){e===void 0&&(e=this.focalPoint[1]),r===void 0&&(r=this.focalPoint[2]);var i=Ut(0,1,0);if(this.focalPoint=tr(n,e,r),this.trackingMode===qh.CINEMATIC){var a=lT($t(),this.focalPoint,this.position);n=a[0],e=a[1],r=a[2];var o=La(a),s=ai(Math.asin(e/o)),l=90+ai(Math.atan2(r,n)),c=pe();bR(c,c,je(l)),xR(c,c,je(s)),i=vn($t(),[0,1,0],c)}return _i(this.matrix,ER(pe(),this.position,this.focalPoint,i)),this._getAxes(),this._getDistance(),this._getAngles(),this.triggerUpdate(),this},t.prototype.getDistance=function(){return this.distance},t.prototype.getDistanceVector=function(){return this.distanceVector},t.prototype.setDistance=function(n){if(this.distance===n||n<0)return this;this.distance=n,this.distance<S_&&(this.distance=S_),this.dollyingStep=this.distance/100;var e=$t();n=this.distance;var r=this.forward,i=this.focalPoint;return e[0]=n*r[0]+i[0],e[1]=n*r[1]+i[1],e[2]=n*r[2]+i[2],this._setPosition(e),this.triggerUpdate(),this},t.prototype.setMaxDistance=function(n){return this.maxDistance=n,this},t.prototype.setMinDistance=function(n){return this.minDistance=n,this},t.prototype.setAzimuth=function(n){return this.azimuth=kc(n),this.computeMatrix(),this._getAxes(),this.type===ue.ORBITING||this.type===ue.EXPLORING?this._getPosition():this.type===ue.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this},t.prototype.getAzimuth=function(){return this.azimuth},t.prototype.setElevation=function(n){return this.elevation=kc(n),this.computeMatrix(),this._getAxes(),this.type===ue.ORBITING||this.type===ue.EXPLORING?this._getPosition():this.type===ue.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this},t.prototype.getElevation=function(){return this.elevation},t.prototype.setRoll=function(n){return this.roll=kc(n),this.computeMatrix(),this._getAxes(),this.type===ue.ORBITING||this.type===ue.EXPLORING?this._getPosition():this.type===ue.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this},t.prototype.getRoll=function(){return this.roll},t.prototype._update=function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles(),this._getOrthoMatrix(),this.triggerUpdate()},t.prototype.computeMatrix=function(){var n=Po(on(),[0,0,1],je(this.roll));gd(this.matrix);var e=Po(on(),[1,0,0],je((this.rotateWorld&&this.type!==ue.TRACKING||this.type===ue.TRACKING?1:-1)*this.elevation)),r=Po(on(),[0,1,0],je((this.rotateWorld&&this.type!==ue.TRACKING||this.type===ue.TRACKING?1:-1)*this.azimuth)),i=Bo(on(),r,e);i=Bo(on(),i,n);var a=fS(pe(),i);this.type===ue.ORBITING||this.type===ue.EXPLORING?(Ro(this.matrix,this.matrix,this.focalPoint),Vn(this.matrix,this.matrix,a),Ro(this.matrix,this.matrix,[0,0,this.distance])):this.type===ue.TRACKING&&(Ro(this.matrix,this.matrix,this.position),Vn(this.matrix,this.matrix,a))},t.prototype._setPosition=function(n,e,r){this.position=tr(n,e,r);var i=this.matrix;i[12]=this.position[0],i[13]=this.position[1],i[14]=this.position[2],i[15]=1,this._getOrthoMatrix()},t.prototype._getAxes=function(){br(this.right,tr(uc(cc(),[1,0,0,0],this.matrix))),br(this.up,tr(uc(cc(),[0,1,0,0],this.matrix))),br(this.forward,tr(uc(cc(),[0,0,1,0],this.matrix))),Hs(this.right,this.right),Hs(this.up,this.up),Hs(this.forward,this.forward)},t.prototype._getAngles=function(){var n=this.distanceVector[0],e=this.distanceVector[1],r=this.distanceVector[2],i=La(this.distanceVector);if(i===0){this.elevation=0,this.azimuth=0;return}this.type===ue.TRACKING?(this.elevation=ai(Math.asin(e/i)),this.azimuth=ai(Math.atan2(-n,-r))):this.rotateWorld?(this.elevation=ai(Math.asin(e/i)),this.azimuth=ai(Math.atan2(-n,-r))):(this.elevation=-ai(Math.asin(e/i)),this.azimuth=-ai(Math.atan2(-n,-r)))},t.prototype._getPosition=function(){br(this.position,tr(uc(cc(),[0,0,0,1],this.matrix))),this._getDistance()},t.prototype._getFocalPoint=function(){ol(this.distanceVector,[0,0,-this.distance],UX(Eu(),this.matrix)),bc(this.focalPoint,this.position,this.distanceVector),this._getDistance()},t.prototype._getDistance=function(){this.distanceVector=lT($t(),this.focalPoint,this.position),this.distance=La(this.distanceVector),this.dollyingStep=this.distance/100},t.prototype._getOrthoMatrix=function(){if(this.projectionMode===pr.ORTHOGRAPHIC){var n=this.position,e=Po(on(),[0,0,1],-this.roll*Math.PI/180);Nf(this.orthoMatrix,e,Ut((this.rright-this.left)/2-n[0],(this.top-this.bottom)/2-n[1],0),Ut(this.zoom,this.zoom,1),n)}},t.prototype.triggerUpdate=function(){if(this.enableUpdate){var n=this.getViewTransform(),e=Vn(pe(),this.getPerspective(),n);this.getFrustum().extractFromVPMatrix(e),this.eventEmitter.emit(Bz.UPDATED)}},t.prototype.rotate=function(n,e,r){throw new Error(ye)},t.prototype.pan=function(n,e){throw new Error(ye)},t.prototype.dolly=function(n){throw new Error(ye)},t.prototype.createLandmark=function(n,e){throw new Error(ye)},t.prototype.gotoLandmark=function(n,e){throw new Error(ye)},t.prototype.cancelLandmarkAnimation=function(){throw new Error(ye)},t}();function Zn(t,n){if(typeof t!="function"||n!=null&&typeof n!="function")throw new TypeError("Expected a function");var e=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var a=n?n.apply(this,r):r[0],o=e.cache;if(o.has(a))return o.get(a);var s=t.apply(this,r);return e.cache=o.set(a,s)||o,s};return e.cache=new(Zn.Cache||Map),e}Zn.Cache=Map;var st;(function(t){t[t.kUnknown=0]="kUnknown",t[t.kNumber=1]="kNumber",t[t.kPercentage=2]="kPercentage",t[t.kEms=3]="kEms",t[t.kPixels=4]="kPixels",t[t.kRems=5]="kRems",t[t.kDegrees=6]="kDegrees",t[t.kRadians=7]="kRadians",t[t.kGradians=8]="kGradians",t[t.kTurns=9]="kTurns",t[t.kMilliseconds=10]="kMilliseconds",t[t.kSeconds=11]="kSeconds",t[t.kInteger=12]="kInteger"})(st||(st={}));var Nr;(function(t){t[t.kUNumber=0]="kUNumber",t[t.kUPercent=1]="kUPercent",t[t.kULength=2]="kULength",t[t.kUAngle=3]="kUAngle",t[t.kUTime=4]="kUTime",t[t.kUOther=5]="kUOther"})(Nr||(Nr={}));var O_;(function(t){t[t.kAll=0]="kAll",t[t.kNonNegative=1]="kNonNegative",t[t.kInteger=2]="kInteger",t[t.kNonNegativeInteger=3]="kNonNegativeInteger",t[t.kPositiveInteger=4]="kPositiveInteger"})(O_||(O_={}));var kw;(function(t){t[t.kYes=0]="kYes",t[t.kNo=1]="kNo"})(kw||(kw={}));var _w;(function(t){t[t.kYes=0]="kYes",t[t.kNo=1]="kNo"})(_w||(_w={}));var Rwt=[{name:"em",unit_type:st.kEms},{name:"px",unit_type:st.kPixels},{name:"deg",unit_type:st.kDegrees},{name:"rad",unit_type:st.kRadians},{name:"grad",unit_type:st.kGradians},{name:"ms",unit_type:st.kMilliseconds},{name:"s",unit_type:st.kSeconds},{name:"rem",unit_type:st.kRems},{name:"turn",unit_type:st.kTurns}],ns;(function(t){t[t.kUnknownType=0]="kUnknownType",t[t.kUnparsedType=1]="kUnparsedType",t[t.kKeywordType=2]="kKeywordType",t[t.kUnitType=3]="kUnitType",t[t.kSumType=4]="kSumType",t[t.kProductType=5]="kProductType",t[t.kNegateType=6]="kNegateType",t[t.kInvertType=7]="kInvertType",t[t.kMinType=8]="kMinType",t[t.kMaxType=9]="kMaxType",t[t.kClampType=10]="kClampType",t[t.kTransformType=11]="kTransformType",t[t.kPositionType=12]="kPositionType",t[t.kURLImageType=13]="kURLImageType",t[t.kColorType=14]="kColorType",t[t.kUnsupportedColorType=15]="kUnsupportedColorType"})(ns||(ns={}));var Bwt=function(t){return Rwt.find(function(n){return n.name===t}).unit_type},Nwt=function(t){return t?t==="number"?st.kNumber:t==="percent"||t==="%"?st.kPercentage:Bwt(t):st.kUnknown},$wt=function(t){switch(t){case st.kNumber:case st.kInteger:return Nr.kUNumber;case st.kPercentage:return Nr.kUPercent;case st.kPixels:return Nr.kULength;case st.kMilliseconds:case st.kSeconds:return Nr.kUTime;case st.kDegrees:case st.kRadians:case st.kGradians:case st.kTurns:return Nr.kUAngle;default:return Nr.kUOther}},jwt=function(t){switch(t){case Nr.kUNumber:return st.kNumber;case Nr.kULength:return st.kPixels;case Nr.kUPercent:return st.kPercentage;case Nr.kUTime:return st.kSeconds;case Nr.kUAngle:return st.kDegrees;default:return st.kUnknown}},M_=function(t){var n=1;switch(t){case st.kPixels:case st.kDegrees:case st.kSeconds:break;case st.kMilliseconds:n=.001;break;case st.kRadians:n=180/Math.PI;break;case st.kGradians:n=.9;break;case st.kTurns:n=360;break}return n},Lw=function(t){switch(t){case st.kNumber:case st.kInteger:return"";case st.kPercentage:return"%";case st.kEms:return"em";case st.kRems:return"rem";case st.kPixels:return"px";case st.kDegrees:return"deg";case st.kRadians:return"rad";case st.kGradians:return"grad";case st.kMilliseconds:return"ms";case st.kSeconds:return"s";case st.kTurns:return"turn"}return""},Sm=function(){function t(){}return t.isAngle=function(n){return n===st.kDegrees||n===st.kRadians||n===st.kGradians||n===st.kTurns},t.isLength=function(n){return n>=st.kEms&&n<st.kDegrees},t.isRelativeUnit=function(n){return n===st.kPercentage||n===st.kEms||n===st.kRems},t.isTime=function(n){return n===st.kSeconds||n===st.kMilliseconds},t.prototype.toString=function(){return this.buildCSSText(kw.kNo,_w.kNo,"")},t.prototype.isNumericValue=function(){return this.getType()>=ns.kUnitType&&this.getType()<=ns.kClampType},t}(),zwt=function(t){G(n,t);function n(e){var r=t.call(this)||this;return r.colorSpace=e,r}return n.prototype.getType=function(){return ns.kColorType},n.prototype.to=function(e){return this},n}(Sm),ia;(function(t){t[t.Constant=0]="Constant",t[t.LinearGradient=1]="LinearGradient",t[t.RadialGradient=2]="RadialGradient"})(ia||(ia={}));var qp=function(t){G(n,t);function n(e,r){var i=t.call(this)||this;return i.type=e,i.value=r,i}return n.prototype.clone=function(){return new n(this.type,this.value)},n.prototype.buildCSSText=function(e,r,i){return i},n.prototype.getType=function(){return ns.kColorType},n}(Sm),Er=function(t){G(n,t);function n(e){var r=t.call(this)||this;return r.value=e,r}return n.prototype.clone=function(){return new n(this.value)},n.prototype.getType=function(){return ns.kKeywordType},n.prototype.buildCSSText=function(e,r,i){return i+this.value},n}(Sm),Gwt=Zn(function(t){return t===void 0&&(t=""),t.replace(/-([a-z])/g,function(n){return n[1].toUpperCase()})}),A_=function(t){return t.split("").map(function(n,e){return n.toUpperCase()===n?"".concat(e!==0?"-":"").concat(n.toLowerCase()):n}).join("")};function Ywt(t){if(!t)throw new Error}function pc(t){return typeof t=="function"}function Wwt(t){return typeof t=="symbol"}var Vwt={d:{alias:"path"},strokeDasharray:{alias:"lineDash"},strokeWidth:{alias:"lineWidth"},textAnchor:{alias:"textAlign"},src:{alias:"img"}},Iw=Zn(function(t){var n=Gwt(t),e=Vwt[n];return n=(e==null?void 0:e.alias)||n,n}),Hwt=function(t,n){n===void 0&&(n="");var e="";return Number.isFinite(t)?(Ywt(Number.isNaN(t)),e="NaN"):t>0?e="infinity":e="-infinity",e+=n},Fw=function(t){return jwt($wt(t))},me=function(t){G(n,t);function n(e,r){r===void 0&&(r=st.kNumber);var i=t.call(this)||this,a;return typeof r=="string"?a=Nwt(r):a=r,i.unit=a,i.value=e,i}return n.prototype.clone=function(){return new n(this.value,this.unit)},n.prototype.equals=function(e){var r=e;return this.value===r.value&&this.unit===r.unit},n.prototype.getType=function(){return ns.kUnitType},n.prototype.convertTo=function(e){if(this.unit===e)return new n(this.value,this.unit);var r=Fw(this.unit);if(r!==Fw(e)||r===st.kUnknown)return null;var i=M_(this.unit)/M_(e);return new n(this.value*i,e)},n.prototype.buildCSSText=function(e,r,i){var a;switch(this.unit){case st.kUnknown:break;case st.kInteger:a=Number(this.value).toFixed(0);break;case st.kNumber:case st.kPercentage:case st.kEms:case st.kRems:case st.kPixels:case st.kDegrees:case st.kRadians:case st.kGradians:case st.kMilliseconds:case st.kSeconds:case st.kTurns:{var o=-999999,s=999999,l=this.value,c=Lw(this.unit);if(l<o||l>s){var u=Lw(this.unit);!Number.isFinite(l)||Number.isNaN(l)?a=Hwt(l,u):a=l+(u||"")}else a="".concat(l).concat(c)}}return i+=a,i},n}(Sm),Mn=new me(0,"px");new me(1,"px");var $a=new me(0,"deg"),jM=function(t){G(n,t);function n(e,r,i,a,o){a===void 0&&(a=1),o===void 0&&(o=!1);var s=t.call(this,"rgb")||this;return s.r=e,s.g=r,s.b=i,s.alpha=a,s.isNone=o,s}return n.prototype.clone=function(){return new n(this.r,this.g,this.b,this.alpha)},n.prototype.buildCSSText=function(e,r,i){return i+"rgba(".concat(this.r,",").concat(this.g,",").concat(this.b,",").concat(this.alpha,")")},n}(zwt),Me=new Er("unset"),Xwt=new Er("initial"),Uwt=new Er("inherit"),lx={"":Me,unset:Me,initial:Xwt,inherit:Uwt},Dw=function(t){return lx[t]||(lx[t]=new Er(t)),lx[t]},Rw=new jM(0,0,0,0,!0),$z=new jM(0,0,0,0),qwt=Zn(function(t,n,e,r){return new jM(t,n,e,r)},function(t,n,e,r){return"rgba(".concat(t,",").concat(n,",").concat(e,",").concat(r,")")}),Ge=function(t,n){return n===void 0&&(n=st.kNumber),new me(t,n)},qg=new me(50,"%"),Bw;(function(t){t[t.Standard=0]="Standard"})(Bw||(Bw={}));var su;(function(t){t[t.ADDED=0]="ADDED",t[t.REMOVED=1]="REMOVED",t[t.Z_INDEX_CHANGED=2]="Z_INDEX_CHANGED"})(su||(su={}));var jz={absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new bl(0,0,0,0)},lt;(function(t){t.COORDINATE="<coordinate>",t.COLOR="<color>",t.PAINT="<paint>",t.NUMBER="<number>",t.ANGLE="<angle>",t.OPACITY_VALUE="<opacity-value>",t.SHADOW_BLUR="<shadow-blur>",t.LENGTH="<length>",t.PERCENTAGE="<percentage>",t.LENGTH_PERCENTAGE="<length> | <percentage>",t.LENGTH_PERCENTAGE_12="[<length> | <percentage>]{1,2}",t.LENGTH_PERCENTAGE_14="[<length> | <percentage>]{1,4}",t.LIST_OF_POINTS="<list-of-points>",t.PATH="<path>",t.FILTER="<filter>",t.Z_INDEX="<z-index>",t.OFFSET_DISTANCE="<offset-distance>",t.DEFINED_PATH="<defined-path>",t.MARKER="<marker>",t.TRANSFORM="<transform>",t.TRANSFORM_ORIGIN="<transform-origin>",t.TEXT="<text>",t.TEXT_TRANSFORM="<text-transform>"})(lt||(lt={}));function Zwt(t){var n=t.type,e=t.value;return n==="hex"?"#".concat(e):n==="literal"?e:n==="rgb"?"rgb(".concat(e.join(","),")"):"rgba(".concat(e.join(","),")")}var Kwt=function(){var t={linearGradient:/^(linear\-gradient)/i,repeatingLinearGradient:/^(repeating\-linear\-gradient)/i,radialGradient:/^(radial\-gradient)/i,repeatingRadialGradient:/^(repeating\-radial\-gradient)/i,conicGradient:/^(conic\-gradient)/i,sideOrCorner:/^to (left (top|bottom)|right (top|bottom)|top (left|right)|bottom (left|right)|left|right|top|bottom)/i,extentKeywords:/^(closest\-side|closest\-corner|farthest\-side|farthest\-corner|contain|cover)/,positionKeywords:/^(left|center|right|top|bottom)/i,pixelValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))px/,percentageValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))\%/,emValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))em/,angleValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,startCall:/^\(/,endCall:/^\)/,comma:/^,/,hexColor:/^\#([0-9a-fA-F]+)/,literalColor:/^([a-zA-Z]+)/,rgbColor:/^rgb/i,rgbaColor:/^rgba/i,number:/^(([0-9]*\.[0-9]+)|([0-9]+\.?))/},n="";function e(F){throw new Error(n+": "+F)}function r(){var F=i();return n.length>0&&e("Invalid input not EOF"),F}function i(){return x(a)}function a(){return o("linear-gradient",t.linearGradient,l)||o("repeating-linear-gradient",t.repeatingLinearGradient,l)||o("radial-gradient",t.radialGradient,f)||o("repeating-radial-gradient",t.repeatingRadialGradient,f)||o("conic-gradient",t.conicGradient,f)}function o(F,B,D){return s(B,function(N){var j=D();return j&&(I(t.comma)||e("Missing comma before color stops")),{type:F,orientation:j,colorStops:x(b)}})}function s(F,B){var D=I(F);if(D){I(t.startCall)||e("Missing (");var N=B(D);return I(t.endCall)||e("Missing )"),N}}function l(){return c()||u()}function c(){return k("directional",t.sideOrCorner,1)}function u(){return k("angular",t.angleValue,1)}function f(){var F,B=h(),D;return B&&(F=[],F.push(B),D=n,I(t.comma)&&(B=h(),B?F.push(B):n=D)),F}function h(){var F=d()||p();if(F)F.at=g();else{var B=v();if(B){F=B;var D=g();D&&(F.at=D)}else{var N=y();N&&(F={type:"default-radial",at:N})}}return F}function d(){var F=k("shape",/^(circle)/i,0);return F&&(F.style=_()||v()),F}function p(){var F=k("shape",/^(ellipse)/i,0);return F&&(F.style=C()||v()),F}function v(){return k("extent-keyword",t.extentKeywords,1)}function g(){if(k("position",/^at/,0)){var F=y();return F||e("Missing positioning value"),F}}function y(){var F=m();if(F.x||F.y)return{type:"position",value:F}}function m(){return{x:C(),y:C()}}function x(F){var B=F(),D=[];if(B)for(D.push(B);I(t.comma);)B=F(),B?D.push(B):e("One extra comma");return D}function b(){var F=w();return F||e("Expected color definition"),F.length=C(),F}function w(){return O()||A()||M()||S()}function S(){return k("literal",t.literalColor,0)}function O(){return k("hex",t.hexColor,1)}function M(){return s(t.rgbColor,function(){return{type:"rgb",value:x(T)}})}function A(){return s(t.rgbaColor,function(){return{type:"rgba",value:x(T)}})}function T(){return I(t.number)[1]}function C(){return k("%",t.percentageValue,1)||P()||_()}function P(){return k("position-keyword",t.positionKeywords,1)}function _(){return k("px",t.pixelValue,1)||k("em",t.emValue,1)}function k(F,B,D){var N=I(B);if(N)return{type:F,value:N[D]}}function I(F){var B=/^[\n\r\t\s]+/.exec(n);B&&L(B[0].length);var D=F.exec(n);return D&&L(D[0].length),D}function L(F){n=n.substring(F)}return function(F){return n=F,r()}}();function Qwt(t,n,e){var r=je(e.value),i=0,a=0,o=i+t/2,s=a+n/2,l=Math.abs(t*Math.cos(r))+Math.abs(n*Math.sin(r)),c=o-Math.cos(r)*l/2,u=s-Math.sin(r)*l/2,f=o+Math.cos(r)*l/2,h=s+Math.sin(r)*l/2;return{x1:c,y1:u,x2:f,y2:h}}function Jwt(t,n,e,r,i){var a=e.value,o=r.value;e.unit===st.kPercentage&&(a=e.value/100*t),r.unit===st.kPercentage&&(o=r.value/100*n);var s=Math.max(Rr([0,0],[a,o]),Rr([0,n],[a,o]),Rr([t,n],[a,o]),Rr([t,0],[a,o]));return i&&(i instanceof me?s=i.value:i instanceof Er&&(i.value==="closest-side"?s=Math.min(a,t-a,o,n-o):i.value==="farthest-side"?s=Math.max(a,t-a,o,n-o):i.value==="closest-corner"&&(s=Math.min(Rr([0,0],[a,o]),Rr([0,n],[a,o]),Rr([t,n],[a,o]),Rr([t,0],[a,o]))))),{x:a,y:o,r:s}}var t2t=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,e2t=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,n2t=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,zz=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function r2t(t){var n,e,r,i=t.length;t[i-1].length=(n=t[i-1].length)!==null&&n!==void 0?n:{type:"%",value:"100"},i>1&&(t[0].length=(e=t[0].length)!==null&&e!==void 0?e:{type:"%",value:"0"});for(var a=0,o=Number(t[0].length.value),s=1;s<i;s++){var l=(r=t[s].length)===null||r===void 0?void 0:r.value;if(!Pt(l)&&!Pt(o)){for(var c=1;c<s-a;c++)t[a+c].length={type:"%",value:"".concat(o+(Number(l)-o)*c/(s-a))};a=s,o=Number(l)}}}var i2t={left:270-90,top:0-90,bottom:180-90,right:90-90,"left top":315-90,"top left":315-90,"left bottom":225-90,"bottom left":225-90,"right top":45-90,"top right":45-90,"right bottom":135-90,"bottom right":135-90},a2t=Zn(function(t){var n;return t.type==="angular"?n=Number(t.value):n=i2t[t.value]||0,Ge(n,"deg")}),o2t=Zn(function(t){var n=50,e=50,r="%",i="%";if((t==null?void 0:t.type)==="position"){var a=t.value,o=a.x,s=a.y;(o==null?void 0:o.type)==="position-keyword"&&(o.value==="left"?n=0:o.value==="center"?n=50:o.value==="right"?n=100:o.value==="top"?e=0:o.value==="bottom"&&(e=100)),(s==null?void 0:s.type)==="position-keyword"&&(s.value==="left"?n=0:s.value==="center"?e=50:s.value==="right"?n=100:s.value==="top"?e=0:s.value==="bottom"&&(e=100)),((o==null?void 0:o.type)==="px"||(o==null?void 0:o.type)==="%"||(o==null?void 0:o.type)==="em")&&(r=o==null?void 0:o.type,n=Number(o.value)),((s==null?void 0:s.type)==="px"||(s==null?void 0:s.type)==="%"||(s==null?void 0:s.type)==="em")&&(i=s==null?void 0:s.type,e=Number(s.value))}return{cx:Ge(n,r),cy:Ge(e,i)}}),s2t=Zn(function(t){var n;if(t.indexOf("linear")>-1||t.indexOf("radial")>-1){var e=Kwt(t);return e.map(function(s){var l=s.type,c=s.orientation,u=s.colorStops;r2t(u);var f=u.map(function(x){return{offset:Ge(Number(x.length.value),"%"),color:Zwt(x)}});if(l==="linear-gradient")return new qp(ia.LinearGradient,{angle:c?a2t(c):$a,steps:f});if(l==="radial-gradient"&&(c||(c=[{type:"shape",value:"circle"}]),c[0].type==="shape"&&c[0].value==="circle")){var h=o2t(c[0].at),d=h.cx,p=h.cy,v=void 0;if(c[0].style){var g=c[0].style,y=g.type,m=g.value;y==="extent-keyword"?v=Dw(m):v=Ge(m,y)}return new qp(ia.RadialGradient,{cx:d,cy:p,size:v,steps:f})}})}var r=t[0];if(t[1]==="("||t[2]==="("){if(r==="l"){var i=t2t.exec(t);if(i){var a=((n=i[2].match(zz))===null||n===void 0?void 0:n.map(function(s){return s.split(":")}))||[];return[new qp(ia.LinearGradient,{angle:Ge(parseFloat(i[1]),"deg"),steps:a.map(function(s){var l=R(s,2),c=l[0],u=l[1];return{offset:Ge(Number(c)*100,"%"),color:u}})})]}}else if(r==="r"){var o=l2t(t);if(o)if(ps(o))t=o;else return[new qp(ia.RadialGradient,o)]}else if(r==="p")return c2t(t)}});function l2t(t){var n,e=e2t.exec(t);if(e){var r=((n=e[4].match(zz))===null||n===void 0?void 0:n.map(function(i){return i.split(":")}))||[];return{cx:Ge(50,"%"),cy:Ge(50,"%"),steps:r.map(function(i){var a=R(i,2),o=a[0],s=a[1];return{offset:Ge(Number(o)*100,"%"),color:s}})}}return null}function c2t(t){var n=n2t.exec(t);if(n){var e=n[1],r=n[2];switch(e){case"a":e="repeat";break;case"x":e="repeat-x";break;case"y":e="repeat-y";break;case"n":e="no-repeat";break;default:e="no-repeat"}return{image:r,repetition:e}}return null}function Zh(t){return t&&!!t.image}function Zg(t){return t&&!Pt(t.r)&&!Pt(t.g)&&!Pt(t.b)}var Ha=Zn(function(t){if(Zh(t))return E({repetition:"repeat"},t);if(Pt(t)&&(t=""),t==="transparent")return $z;t==="currentColor"&&(t="black");var n=s2t(t);if(n)return n;var e=zc(t),r=[0,0,0,0];return e!==null&&(r[0]=e.r||0,r[1]=e.g||0,r[2]=e.b||0,r[3]=e.opacity),qwt.apply(void 0,X([],R(r),!1))});function u2t(t,n){if(!(!Zg(t)||!Zg(n)))return[[Number(t.r),Number(t.g),Number(t.b),Number(t.alpha)],[Number(n.r),Number(n.g),Number(n.b),Number(n.alpha)],function(e){var r=e.slice();if(r[3])for(var i=0;i<3;i++)r[i]=Math.round(Uh(r[i],0,255));return r[3]=Uh(r[3],0,1),"rgba(".concat(r.join(","),")")}]}function zd(t,n){if(Pt(n))return Ge(0,"px");if(n="".concat(n).trim().toLowerCase(),isFinite(Number(n))){if("px".search(t)>=0)return Ge(Number(n),"px");if("deg".search(t)>=0)return Ge(Number(n),"deg")}var e=[];n=n.replace(t,function(i){return e.push(i),"U"+i});var r="U("+t.source+")";return e.map(function(i){return Ge(Number(n.replace(new RegExp("U"+i,"g"),"").replace(new RegExp(r,"g"),"*0")),i)})[0]}var f2t=Zn(function(t){return zd(new RegExp("px","g"),t)});Zn(function(t){return zd(new RegExp("%","g"),t)});var lu=function(t){return Rl(t)||isFinite(Number(t))?Ge(Number(t)||0,"px"):zd(new RegExp("px|%|em|rem","g"),t)},Gz=Zn(function(t){return zd(new RegExp("deg|rad|grad|turn","g"),t)});function h2t(t,n,e,r,i){i===void 0&&(i=0);var a="",o=t.value||0,s=n.value||0,l=Fw(t.unit),c=t.convertTo(l),u=n.convertTo(l);return c&&u?(o=c.value,s=u.value,a=Lw(t.unit)):(me.isLength(t.unit)||me.isLength(n.unit))&&(o=Dr(t,i,e),s=Dr(n,i,e),a="px"),[o,s,function(f){return r&&(f=Math.max(f,0)),f+a}]}function Br(t){var n=0;return t.unit===st.kDegrees?n=t.value:t.unit===st.kRadians?n=ai(Number(t.value)):t.unit===st.kTurns&&(n=Awt(Number(t.value))),n}function cx(t,n){var e;return Array.isArray(t)?e=t.map(function(r){return Number(r)}):ps(t)?e=t.split(" ").map(function(r){return Number(r)}):Rl(t)&&(e=[t]),n===2?e.length===1?[e[0],e[0]]:[e[0],e[1]]:e.length===1?[e[0],e[0],e[0],e[0]]:e.length===2?[e[0],e[1],e[0],e[1]]:e.length===3?[e[0],e[1],e[2],e[1]]:[e[0],e[1],e[2],e[3]]}function Yz(t){return ps(t)?t.split(" ").map(function(n){return lu(n)}):t.map(function(n){return lu(n.toString())})}function Dr(t,n,e){if(t.value===0)return 0;if(t.unit===st.kPixels)return Number(t.value);if(t.unit===st.kPercentage&&e){var r=e.nodeName===K.GROUP?e.getLocalBounds():e.geometry.contentBounds;return t.value/100*r.halfExtents[n]*2}return 0}var d2t=function(t){return zd(/deg|rad|grad|turn|px|%/g,t)},p2t=["blur","brightness","drop-shadow","contrast","grayscale","sepia","saturate","hue-rotate","invert"];function Wz(t){if(t===void 0&&(t=""),t=t.toLowerCase().trim(),t==="none")return[];for(var n=/\s*([\w-]+)\(([^)]*)\)/g,e=[],r,i=0;r=n.exec(t);){if(r.index!==i)return[];if(i=r.index+r[0].length,p2t.indexOf(r[1])>-1&&e.push({name:r[1],params:r[2].split(" ").map(function(a){return d2t(a)||Ha(a)})}),n.lastIndex===t.length)return e}return[]}function Vz(t){return t.toString()}var wl=Zn(function(t){return typeof t=="number"?Ge(t):/^\s*[-+]?(\d*\.)?\d+\s*$/.test(t)?Ge(Number(t)):Ge(0)});Zn(function(t){return ps(t)?t.split(" ").map(wl):t.map(wl)});function zM(t,n){return[t,n,Vz]}function GM(t,n){return function(e,r){return[e,r,function(i){return Vz(Uh(i,t,n))}]}}function Hz(t,n){if(t.length===n.length)return[t,n,function(e){return e}]}function Nw(t){return t.parsedStyle.path.totalLength===0&&(t.parsedStyle.path.totalLength=iwt(t.parsedStyle.path.absolutePath)),t.parsedStyle.path.totalLength}function v2t(t){for(var n=0;n<t.length;n++){var e=t[n-1],r=t[n],i=r[0];if(i==="M"&&e){var a=e[0],o=[r[1],r[2]],s=void 0;a==="L"||a==="M"?s=[e[1],e[2]]:(a==="C"||a==="A"||a==="Q")&&(s=[e[e.length-2],e[e.length-1]]),s&&Kg(o,s)&&(t.splice(n,1),n--)}}}function g2t(t){for(var n=!1,e=t.length,r=0;r<e;r++){var i=t[r],a=i[0];if(a==="C"||a==="A"||a==="Q"){n=!0;break}}return n}function y2t(t){for(var n=[],e=[],r=[],i=0;i<t.length;i++){var a=t[i],o=a[0];o==="M"?(r.length&&(e.push(r),r=[]),r.push([a[1],a[2]])):o==="Z"?r.length&&(n.push(r),r=[]):r.push([a[1],a[2]])}return r.length>0&&e.push(r),{polygons:n,polylines:e}}function Kg(t,n){return t[0]===n[0]&&t[1]===n[1]}function m2t(t,n){for(var e=[],r=[],i=[],a=0;a<t.length;a++){var o=t[a],s=o.currentPoint,l=o.params,c=o.prePoint,u=void 0;switch(o.command){case"Q":u=xwt(c[0],c[1],l[1],l[2],l[3],l[4]);break;case"C":u=gwt(c[0],c[1],l[1],l[2],l[3],l[4],l[5],l[6]);break;case"A":var f=o.arcParams;u=vwt(f.cx,f.cy,f.rx,f.ry,f.xRotation,f.startAngle,f.endAngle);break;default:e.push(s[0]),r.push(s[1]);break}u&&(o.box=u,e.push(u.x,u.x+u.width),r.push(u.y,u.y+u.height)),n&&(o.command==="L"||o.command==="M")&&o.prePoint&&o.nextPoint&&i.push(o)}e=e.filter(function(y){return!Number.isNaN(y)&&y!==1/0&&y!==-1/0}),r=r.filter(function(y){return!Number.isNaN(y)&&y!==1/0&&y!==-1/0});var h=l_(e),d=l_(r),p=s_(e),v=s_(r);if(i.length===0)return{x:h,y:d,width:p-h,height:v-d};for(var a=0;a<i.length;a++){var o=i[a],s=o.currentPoint,g=void 0;s[0]===h?(g=Zp(o,n),h=h-g.xExtra):s[0]===p&&(g=Zp(o,n),p=p+g.xExtra),s[1]===d?(g=Zp(o,n),d=d-g.yExtra):s[1]===v&&(g=Zp(o,n),v=v+g.yExtra)}return{x:h,y:d,width:p-h,height:v-d}}function Zp(t,n){var e=t.prePoint,r=t.currentPoint,i=t.nextPoint,a=Math.pow(r[0]-e[0],2)+Math.pow(r[1]-e[1],2),o=Math.pow(r[0]-i[0],2)+Math.pow(r[1]-i[1],2),s=Math.pow(e[0]-i[0],2)+Math.pow(e[1]-i[1],2),l=Math.acos((a+o-s)/(2*Math.sqrt(a)*Math.sqrt(o)));if(!l||Math.sin(l)===0||Kf(l,0))return{xExtra:0,yExtra:0};var c=Math.abs(Math.atan2(i[1]-r[1],i[0]-r[0])),u=Math.abs(Math.atan2(i[0]-r[0],i[1]-r[1]));c=c>Math.PI/2?Math.PI-c:c,u=u>Math.PI/2?Math.PI-u:u;var f={xExtra:Math.cos(l/2-c)*(n/2*(1/Math.sin(l/2)))-n/2||0,yExtra:Math.cos(u-l/2)*(n/2*(1/Math.sin(l/2)))-n/2||0};return f}function E_(t,n){return[n[0]+(n[0]-t[0]),n[1]+(n[1]-t[1])]}var T_=function(t,n){var e=t.x*n.x+t.y*n.y,r=Math.sqrt((Math.pow(t.x,2)+Math.pow(t.y,2))*(Math.pow(n.x,2)+Math.pow(n.y,2))),i=t.x*n.y-t.y*n.x<0?-1:1,a=i*Math.acos(e/r);return a},C_=function(t,n,e,r,i,a,o,s){n=Math.abs(n),e=Math.abs(e),r=Oz(r,360);var l=je(r);if(t.x===o.x&&t.y===o.y)return{x:t.x,y:t.y,ellipticalArcAngle:0};if(n===0||e===0)return{x:0,y:0,ellipticalArcAngle:0};var c=(t.x-o.x)/2,u=(t.y-o.y)/2,f={x:Math.cos(l)*c+Math.sin(l)*u,y:-Math.sin(l)*c+Math.cos(l)*u},h=Math.pow(f.x,2)/Math.pow(n,2)+Math.pow(f.y,2)/Math.pow(e,2);h>1&&(n=Math.sqrt(h)*n,e=Math.sqrt(h)*e);var d=Math.pow(n,2)*Math.pow(e,2)-Math.pow(n,2)*Math.pow(f.y,2)-Math.pow(e,2)*Math.pow(f.x,2),p=Math.pow(n,2)*Math.pow(f.y,2)+Math.pow(e,2)*Math.pow(f.x,2),v=d/p;v=v<0?0:v;var g=(i!==a?1:-1)*Math.sqrt(v),y={x:g*(n*f.y/e),y:g*(-(e*f.x)/n)},m={x:Math.cos(l)*y.x-Math.sin(l)*y.y+(t.x+o.x)/2,y:Math.sin(l)*y.x+Math.cos(l)*y.y+(t.y+o.y)/2},x={x:(f.x-y.x)/n,y:(f.y-y.y)/e},b=T_({x:1,y:0},x),w={x:(-f.x-y.x)/n,y:(-f.y-y.y)/e},S=T_(x,w);!a&&S>0?S-=2*Math.PI:a&&S<0&&(S+=2*Math.PI),S%=2*Math.PI;var O=b+S*s,M=n*Math.cos(O),A=e*Math.sin(O),T={x:Math.cos(l)*M-Math.sin(l)*A+m.x,y:Math.sin(l)*M+Math.cos(l)*A+m.y,ellipticalArcStartAngle:b,ellipticalArcEndAngle:b+S,ellipticalArcAngle:O,ellipticalArcCenter:m,resultantRx:n,resultantRy:e};return T};function x2t(t){for(var n=[],e=null,r=null,i=null,a=0,o=t.length,s=0;s<o;s++){var l=t[s];r=t[s+1];var c=l[0],u={command:c,prePoint:e,params:l,startTangent:null,endTangent:null,currentPoint:null,nextPoint:null,arcParams:null,box:null,cubicParams:null};switch(c){case"M":i=[l[1],l[2]],a=s;break;case"A":var f=b2t(e,l);u.arcParams=f;break}if(c==="Z")e=i,r=t[a+1];else{var h=l.length;e=[l[h-2],l[h-1]]}r&&r[0]==="Z"&&(r=t[a],n[a]&&(n[a].prePoint=e)),u.currentPoint=e,n[a]&&Kg(e,n[a].currentPoint)&&(n[a].prePoint=u.prePoint);var d=r?[r[r.length-2],r[r.length-1]]:null;u.nextPoint=d;var p=u.prePoint;if(["L","H","V"].includes(c))u.startTangent=[p[0]-e[0],p[1]-e[1]],u.endTangent=[e[0]-p[0],e[1]-p[1]];else if(c==="Q"){var v=[l[1],l[2]];u.startTangent=[p[0]-v[0],p[1]-v[1]],u.endTangent=[e[0]-v[0],e[1]-v[1]]}else if(c==="T"){var g=n[s-1],v=E_(g.currentPoint,p);g.command==="Q"?(u.command="Q",u.startTangent=[p[0]-v[0],p[1]-v[1]],u.endTangent=[e[0]-v[0],e[1]-v[1]]):(u.command="TL",u.startTangent=[p[0]-e[0],p[1]-e[1]],u.endTangent=[e[0]-p[0],e[1]-p[1]])}else if(c==="C"){var y=[l[1],l[2]],m=[l[3],l[4]];u.startTangent=[p[0]-y[0],p[1]-y[1]],u.endTangent=[e[0]-m[0],e[1]-m[1]],u.startTangent[0]===0&&u.startTangent[1]===0&&(u.startTangent=[y[0]-m[0],y[1]-m[1]]),u.endTangent[0]===0&&u.endTangent[1]===0&&(u.endTangent=[m[0]-y[0],m[1]-y[1]])}else if(c==="S"){var g=n[s-1],y=E_(g.currentPoint,p),m=[l[1],l[2]];g.command==="C"?(u.command="C",u.startTangent=[p[0]-y[0],p[1]-y[1]],u.endTangent=[e[0]-m[0],e[1]-m[1]]):(u.command="SQ",u.startTangent=[p[0]-m[0],p[1]-m[1]],u.endTangent=[e[0]-m[0],e[1]-m[1]])}else if(c==="A"){var x=P_(u,0),b=x.x,w=x.y,S=P_(u,1,!1),O=S.x,M=S.y;u.startTangent=[b,w],u.endTangent=[O,M]}n.push(u)}return n}function P_(t,n,e){e===void 0&&(e=!0);var r=t.arcParams,i=r.rx,a=i===void 0?0:i,o=r.ry,s=o===void 0?0:o,l=r.xRotation,c=r.arcFlag,u=r.sweepFlag,f=C_({x:t.prePoint[0],y:t.prePoint[1]},a,s,l,!!c,!!u,{x:t.currentPoint[0],y:t.currentPoint[1]},n),h=C_({x:t.prePoint[0],y:t.prePoint[1]},a,s,l,!!c,!!u,{x:t.currentPoint[0],y:t.currentPoint[1]},e?n+.005:n-.005),d=h.x-f.x,p=h.y-f.y,v=Math.sqrt(d*d+p*p);return{x:-d/v,y:-p/v}}function Kp(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function $w(t,n){return Kp(t)*Kp(n)?(t[0]*n[0]+t[1]*n[1])/(Kp(t)*Kp(n)):1}function k_(t,n){return(t[0]*n[1]<t[1]*n[0]?-1:1)*Math.acos($w(t,n))}function b2t(t,n){var e=n[1],r=n[2],i=Oz(je(n[3]),Math.PI*2),a=n[4],o=n[5],s=t[0],l=t[1],c=n[6],u=n[7],f=Math.cos(i)*(s-c)/2+Math.sin(i)*(l-u)/2,h=-1*Math.sin(i)*(s-c)/2+Math.cos(i)*(l-u)/2,d=f*f/(e*e)+h*h/(r*r);d>1&&(e*=Math.sqrt(d),r*=Math.sqrt(d));var p=e*e*(h*h)+r*r*(f*f),v=p?Math.sqrt((e*e*(r*r)-p)/p):1;a===o&&(v*=-1),isNaN(v)&&(v=0);var g=r?v*e*h/r:0,y=e?v*-r*f/e:0,m=(s+c)/2+Math.cos(i)*g-Math.sin(i)*y,x=(l+u)/2+Math.sin(i)*g+Math.cos(i)*y,b=[(f-g)/e,(h-y)/r],w=[(-1*f-g)/e,(-1*h-y)/r],S=k_([1,0],b),O=k_(b,w);return $w(b,w)<=-1&&(O=Math.PI),$w(b,w)>=1&&(O=0),o===0&&O>0&&(O=O-2*Math.PI),o===1&&O<0&&(O=O+2*Math.PI),{cx:m,cy:x,rx:Kg(t,[c,u])?0:e,ry:Kg(t,[c,u])?0:r,startAngle:S,endAngle:S+O,xRotation:i,arcFlag:a,sweepFlag:o}}function w2t(t,n,e){var r=n.parsedStyle,i=r.defX,a=i===void 0?0:i,o=r.defY,s=o===void 0?0:o;return t.reduce(function(l,c){var u="";if(c[0]==="M"||c[0]==="L"){var f=Ut(c[1]-a,c[2]-s,0);e&&vn(f,f,e),u="".concat(c[0]).concat(f[0],",").concat(f[1])}else if(c[0]==="Z")u=c[0];else if(c[0]==="C"){var h=Ut(c[1]-a,c[2]-s,0),d=Ut(c[3]-a,c[4]-s,0),p=Ut(c[5]-a,c[6]-s,0);e&&(vn(h,h,e),vn(d,d,e),vn(p,p,e)),u="".concat(c[0]).concat(h[0],",").concat(h[1],",").concat(d[0],",").concat(d[1],",").concat(p[0],",").concat(p[1])}else if(c[0]==="A"){var v=Ut(c[6]-a,c[7]-s,0);e&&vn(v,v,e),u="".concat(c[0]).concat(c[1],",").concat(c[2],",").concat(c[3],",").concat(c[4],",").concat(c[5],",").concat(v[0],",").concat(v[1])}else if(c[0]==="Q"){var h=Ut(c[1]-a,c[2]-s,0),d=Ut(c[3]-a,c[4]-s,0);e&&(vn(h,h,e),vn(d,d,e)),u="".concat(c[0]).concat(c[1],",").concat(c[2],",").concat(c[3],",").concat(c[4],"}")}return l+=u},"")}function S2t(t,n,e,r){return[["M",t,n],["L",e,r]]}function __(t,n,e,r){var i=(-1+Math.sqrt(2))/3*4,a=t*i,o=n*i,s=e-t,l=e+t,c=r-n,u=r+n;return[["M",s,r],["C",s,r-o,e-a,c,e,c],["C",e+a,c,l,r-o,l,r],["C",l,r+o,e+a,u,e,u],["C",e-a,u,s,r+o,s,r],["Z"]]}function O2t(t,n){var e=t.map(function(r,i){return[i===0?"M":"L",r[0],r[1]]});return n&&e.push(["Z"]),e}function M2t(t,n,e,r,i){if(i){var a=R(i,4),o=a[0],s=a[1],l=a[2],c=a[3],u=t>0?1:-1,f=n>0?1:-1,h=u+f!==0?1:0;return[["M",u*o+e,r],["L",t-u*s+e,r],s?["A",s,s,0,0,h,t+e,f*s+r]:null,["L",t+e,n-f*l+r],l?["A",l,l,0,0,h,t+e-u*l,n+r]:null,["L",e+u*c,n+r],c?["A",c,c,0,0,h,e,n+r-f*c]:null,["L",e,f*o+r],o?["A",o,o,0,0,h,u*o+e,r]:null,["Z"]].filter(function(d){return d})}return[["M",e,r],["L",e+t,r],["L",e+t,r+n],["L",e,r+n],["Z"]]}function YM(t,n){n===void 0&&(n=t.getLocalTransform());var e=[];switch(t.nodeName){case K.LINE:var r=t.parsedStyle,i=r.x1,a=i===void 0?0:i,o=r.y1,s=o===void 0?0:o,l=r.x2,c=l===void 0?0:l,u=r.y2,f=u===void 0?0:u;e=S2t(a,s,c,f);break;case K.CIRCLE:{var h=t.parsedStyle,d=h.r,p=d===void 0?0:d,v=h.cx,g=v===void 0?0:v,y=h.cy,m=y===void 0?0:y;e=__(p,p,g,m);break}case K.ELLIPSE:{var x=t.parsedStyle,b=x.rx,w=b===void 0?0:b,S=x.ry,O=S===void 0?0:S,M=x.cx,g=M===void 0?0:M,A=x.cy,m=A===void 0?0:A;e=__(w,O,g,m);break}case K.POLYLINE:case K.POLYGON:var T=t.parsedStyle.points;e=O2t(T.points,t.nodeName===K.POLYGON);break;case K.RECT:var C=t.parsedStyle,P=C.width,_=P===void 0?0:P,k=C.height,I=k===void 0?0:k,L=C.x,F=L===void 0?0:L,B=C.y,D=B===void 0?0:B,N=C.radius,j=N&&N.some(function(W){return W!==0});e=M2t(_,I,F,D,j&&N.map(function(W){return Uh(W,0,Math.min(Math.abs(_)/2,Math.abs(I)/2))}));break;case K.PATH:var Y=t.parsedStyle.path.absolutePath;e=X([],R(Y),!1);break}if(e.length)return w2t(e,t,n)}var Xz=function(t){if(t===""||Array.isArray(t)&&t.length===0)return{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:{x:0,y:0,width:0,height:0}};var n;try{n=Ug(t)}catch{n=Ug(""),console.error("[g]: Invalid SVG Path definition: ".concat(t))}v2t(n);var e=g2t(n),r=y2t(n),i=r.polygons,a=r.polylines,o=x2t(n),s=m2t(o,0),l=s.x,c=s.y,u=s.width,f=s.height;return{absolutePath:n,hasArc:e,segments:o,polygons:i,polylines:a,totalLength:0,rect:{x:Number.isFinite(l)?l:0,y:Number.isFinite(c)?c:0,width:Number.isFinite(u)?u:0,height:Number.isFinite(f)?f:0}}},A2t=Zn(Xz);function jw(t){return ps(t)?A2t(t):Xz(t)}function E2t(t,n,e){var r=t.curve,i=n.curve;(!r||r.length===0)&&(r=Cw(t.absolutePath,!1),t.curve=r),(!i||i.length===0)&&(i=Cw(n.absolutePath,!1),n.curve=i);var a=[r,i];r.length!==i.length&&(a=_z(r,i));var o=d_(a[0])!==d_(a[1])?Qbt(a[0]):Kbt(a[0]);return[o,owt(a[1],o),function(s){return s}]}function Uz(t,n){var e;ps(t)?e=t.split(" ").map(function(u){var f=R(u.split(","),2),h=f[0],d=f[1];return[Number(h),Number(d)]}):e=t;var r=[],i=0,a,o,s=mwt(e);e.forEach(function(u,f){e[f+1]&&(a=[0,0],a[0]=i/s,o=Fz(u[0],u[1],e[f+1][0],e[f+1][1]),i+=o,a[1]=i/s,r.push(a))});var l=Math.min.apply(Math,X([],R(e.map(function(u){return u[0]})),!1)),c=Math.min.apply(Math,X([],R(e.map(function(u){return u[1]})),!1));return n&&(n.parsedStyle.defX=l,n.parsedStyle.defY=c),{points:e,totalLength:s,segments:r}}function T2t(t,n){return[t.points,n.points,function(e){return e}]}var Ve=null;function hr(t){return function(n){var e=0;return t.map(function(r){return r===Ve?n[e++]:r})}}function Ts(t){return t}var zw={matrix:["NNNNNN",[Ve,Ve,0,0,Ve,Ve,0,0,0,0,1,0,Ve,Ve,0,1],Ts],matrix3d:["NNNNNNNNNNNNNNNN",Ts],rotate:["A"],rotatex:["A"],rotatey:["A"],rotatez:["A"],rotate3d:["NNNA"],perspective:["L"],scale:["Nn",hr([Ve,Ve,new me(1)]),Ts],scalex:["N",hr([Ve,new me(1),new me(1)]),hr([Ve,new me(1)])],scaley:["N",hr([new me(1),Ve,new me(1)]),hr([new me(1),Ve])],scalez:["N",hr([new me(1),new me(1),Ve])],scale3d:["NNN",Ts],skew:["Aa",null,Ts],skewx:["A",null,hr([Ve,$a])],skewy:["A",null,hr([$a,Ve])],translate:["Tt",hr([Ve,Ve,Mn]),Ts],translatex:["T",hr([Ve,Mn,Mn]),hr([Ve,Mn])],translatey:["T",hr([Mn,Ve,Mn]),hr([Mn,Ve])],translatez:["L",hr([Mn,Mn,Ve])],translate3d:["TTL",Ts]};function Qg(t){if(t=(t||"none").toLowerCase().trim(),t==="none")return[];for(var n=/\s*(\w+)\(([^)]*)\)/g,e=[],r,i=0;r=n.exec(t);){if(r.index!==i)return[];i=r.index+r[0].length;var a=r[1],o=zw[a];if(!o)return[];var s=r[2].split(","),l=o[0];if(l.length<s.length)return[];for(var c=[],u=0;u<l.length;u++){var f=s[u],h=l[u],d=void 0;if(f?d={A:function(p){return p.trim()==="0"?$a:Gz(p)},N:wl,T:lu,L:f2t}[h.toUpperCase()](f):d={a:$a,n:c[0],t:Mn}[h],d===void 0)return[];c.push(d)}if(e.push({t:a,d:c}),n.lastIndex===t.length)return e}return[]}function C2t(t){var n,e,r,i;switch(t.t){case"rotatex":return i=je(Br(t.d[0])),[1,0,0,0,0,Math.cos(i),Math.sin(i),0,0,-Math.sin(i),Math.cos(i),0,0,0,0,1];case"rotatey":return i=je(Br(t.d[0])),[Math.cos(i),0,-Math.sin(i),0,0,1,0,0,Math.sin(i),0,Math.cos(i),0,0,0,0,1];case"rotate":case"rotatez":return i=je(Br(t.d[0])),[Math.cos(i),Math.sin(i),0,0,-Math.sin(i),Math.cos(i),0,0,0,0,1,0,0,0,0,1];case"rotate3d":n=t.d[0].value,e=t.d[1].value,r=t.d[2].value,i=je(Br(t.d[3]));var a=n*n+e*e+r*r;if(a===0)n=1,e=0,r=0;else if(a!==1){var o=Math.sqrt(a);n/=o,e/=o,r/=o}var s=Math.sin(i/2),l=s*Math.cos(i/2),c=s*s;return[1-2*(e*e+r*r)*c,2*(n*e*c+r*l),2*(n*r*c-e*l),0,2*(n*e*c-r*l),1-2*(n*n+r*r)*c,2*(e*r*c+n*l),0,2*(n*r*c+e*l),2*(e*r*c-n*l),1-2*(n*n+e*e)*c,0,0,0,0,1];case"scale":return[t.d[0].value,0,0,0,0,t.d[1].value,0,0,0,0,1,0,0,0,0,1];case"scalex":return[t.d[0].value,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"scaley":return[1,0,0,0,0,t.d[0].value,0,0,0,0,1,0,0,0,0,1];case"scalez":return[1,0,0,0,0,1,0,0,0,0,t.d[0].value,0,0,0,0,1];case"scale3d":return[t.d[0].value,0,0,0,0,t.d[1].value,0,0,0,0,t.d[2].value,0,0,0,0,1];case"skew":var u=je(Br(t.d[0])),f=je(Br(t.d[1]));return[1,Math.tan(f),0,0,Math.tan(u),1,0,0,0,0,1,0,0,0,0,1];case"skewx":return i=je(Br(t.d[0])),[1,0,0,0,Math.tan(i),1,0,0,0,0,1,0,0,0,0,1];case"skewy":return i=je(Br(t.d[0])),[1,Math.tan(i),0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"translate":return n=Dr(t.d[0],0,null)||0,e=Dr(t.d[1],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,n,e,0,1];case"translatex":return n=Dr(t.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,n,0,0,1];case"translatey":return e=Dr(t.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,e,0,1];case"translatez":return r=Dr(t.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,r,1];case"translate3d":return n=Dr(t.d[0],0,null)||0,e=Dr(t.d[1],0,null)||0,r=Dr(t.d[2],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,n,e,r,1];case"perspective":var h=Dr(t.d[0],0,null)||0,d=h?-1/h:0;return[1,0,0,0,0,1,0,0,0,0,1,d,0,0,0,1];case"matrix":return[t.d[0].value,t.d[1].value,0,0,t.d[2].value,t.d[3].value,0,0,0,0,1,0,t.d[4].value,t.d[5].value,0,1];case"matrix3d":return t.d.map(function(p){return p.value})}}function P2t(t,n){return[t[0]*n[0]+t[4]*n[1]+t[8]*n[2]+t[12]*n[3],t[1]*n[0]+t[5]*n[1]+t[9]*n[2]+t[13]*n[3],t[2]*n[0]+t[6]*n[1]+t[10]*n[2]+t[14]*n[3],t[3]*n[0]+t[7]*n[1]+t[11]*n[2]+t[15]*n[3],t[0]*n[4]+t[4]*n[5]+t[8]*n[6]+t[12]*n[7],t[1]*n[4]+t[5]*n[5]+t[9]*n[6]+t[13]*n[7],t[2]*n[4]+t[6]*n[5]+t[10]*n[6]+t[14]*n[7],t[3]*n[4]+t[7]*n[5]+t[11]*n[6]+t[15]*n[7],t[0]*n[8]+t[4]*n[9]+t[8]*n[10]+t[12]*n[11],t[1]*n[8]+t[5]*n[9]+t[9]*n[10]+t[13]*n[11],t[2]*n[8]+t[6]*n[9]+t[10]*n[10]+t[14]*n[11],t[3]*n[8]+t[7]*n[9]+t[11]*n[10]+t[15]*n[11],t[0]*n[12]+t[4]*n[13]+t[8]*n[14]+t[12]*n[15],t[1]*n[12]+t[5]*n[13]+t[9]*n[14]+t[13]*n[15],t[2]*n[12]+t[6]*n[13]+t[10]*n[14]+t[14]*n[15],t[3]*n[12]+t[7]*n[13]+t[11]*n[14]+t[15]*n[15]]}function k2t(t){return t.length===0?[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]:t.map(C2t).reduce(P2t)}function L_(t){var n=[0,0,0],e=[1,1,1],r=[0,0,0],i=[0,0,0,1],a=[0,0,0,1];return kwt(k2t(t),n,e,r,i,a),[[n,e,r,a,i]]}var _2t=function(){function t(r,i){for(var a=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],o=0;o<4;o++)for(var s=0;s<4;s++)for(var l=0;l<4;l++)a[o][s]+=i[o][l]*r[l][s];return a}function n(r){return r[0][2]==0&&r[0][3]==0&&r[1][2]==0&&r[1][3]==0&&r[2][0]==0&&r[2][1]==0&&r[2][2]==1&&r[2][3]==0&&r[3][2]==0&&r[3][3]==1}function e(r,i,a,o,s){for(var l=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],c=0;c<4;c++)l[c][3]=s[c];for(var c=0;c<3;c++)for(var u=0;u<3;u++)l[3][c]+=r[u]*l[u][c];var f=o[0],h=o[1],d=o[2],p=o[3],v=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];v[0][0]=1-2*(h*h+d*d),v[0][1]=2*(f*h-d*p),v[0][2]=2*(f*d+h*p),v[1][0]=2*(f*h+d*p),v[1][1]=1-2*(f*f+d*d),v[1][2]=2*(h*d-f*p),v[2][0]=2*(f*d-h*p),v[2][1]=2*(h*d+f*p),v[2][2]=1-2*(f*f+h*h),l=t(l,v);var g=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];a[2]&&(g[2][1]=a[2],l=t(l,g)),a[1]&&(g[2][1]=0,g[2][0]=a[0],l=t(l,g)),a[0]&&(g[2][0]=0,g[1][0]=a[0],l=t(l,g));for(var c=0;c<3;c++)for(var u=0;u<3;u++)l[c][u]*=i[c];return n(l)?[l[0][0],l[0][1],l[1][0],l[1][1],l[3][0],l[3][1]]:l[0].concat(l[1],l[2],l[3])}return e}();function L2t(t){return t.toFixed(6).replace(".000000","")}function ux(t,n){var e,r;return t.decompositionPair!==n&&(t.decompositionPair=n,e=L_(t)),n.decompositionPair!==t&&(n.decompositionPair=t,r=L_(n)),e[0]===null||r[0]===null?[[!1],[!0],function(i){return i?n[0].d:t[0].d}]:(e[0].push(0),r[0].push(1),[e,r,function(i){var a=F2t(e[0][3],r[0][3],i[5]),o=_2t(i[0],i[1],i[2],a,i[4]),s=o.map(L2t).join(",");return s}])}function I2t(t,n){for(var e=0,r=0;r<t.length;r++)e+=t[r]*n[r];return e}function F2t(t,n,e){var r=I2t(t,n);r=Uh(r,-1,1);var i=[];if(r===1)i=t;else for(var a=Math.acos(r),o=Math.sin(e*a)*1/Math.sqrt(1-r*r),s=0;s<4;s++)i.push(t[s]*(Math.cos(e*a)-r*o)+n[s]*o);return i}function fx(t){return t.replace(/[xy]/,"")}function hx(t){return t.replace(/(x|y|z|3d)?$/,"3d")}var D2t=function(t,n){return t==="perspective"&&n==="perspective"||(t==="matrix"||t==="matrix3d")&&(n==="matrix"||n==="matrix3d")};function R2t(t,n,e){var r=!1;if(!t.length||!n.length){t.length||(r=!0,t=n,n=[]);for(var i=function(S){var O=t[S],M=O.t,A=O.d,T=M.substring(0,5)==="scale"?1:0;n.push({t:M,d:A.map(function(C){return typeof C=="number"?Ge(T):Ge(T,C.unit)})})},a=0;a<t.length;a++)i(a)}var o=[],s=[],l=[];if(t.length!==n.length){var c=ux(t,n);o=[c[0]],s=[c[1]],l=[["matrix",[c[2]]]]}else for(var a=0;a<t.length;a++){var u=t[a].t,f=n[a].t,h=t[a].d,d=n[a].d,p=zw[u],v=zw[f],g=void 0;if(D2t(u,f)){var c=ux([t[a]],[n[a]]);o.push(c[0]),s.push(c[1]),l.push(["matrix",[c[2]]]);continue}else if(u===f)g=u;else if(p[2]&&v[2]&&fx(u)===fx(f))g=fx(u),h=p[2](h),d=v[2](d);else if(p[1]&&v[1]&&hx(u)===hx(f))g=hx(u),h=p[1](h),d=v[1](d);else{var c=ux(t,n);o=[c[0]],s=[c[1]],l=[["matrix",[c[2]]]];break}for(var y=[],m=[],x=[],b=0;b<h.length;b++){var c=h2t(h[b],d[b],e,!1,b);y[b]=c[0],m[b]=c[1],x.push(c[2])}o.push(y),s.push(m),l.push([g,x])}if(r){var w=o;o=s,s=w}return[o,s,function(S){return S.map(function(O,M){var A=O.map(function(T,C){return l[M][1][C](T)}).join(",");return l[M][0]==="matrix"&&A.split(",").length===16&&(l[M][0]="matrix3d"),l[M][0]==="matrix3d"&&A.split(",").length===6&&(l[M][0]="matrix"),l[M][0]+"("+A+")"}).join(" ")}]}var qz=Zn(function(t){if(ps(t)){if(t==="text-anchor")return[Ge(0,"px"),Ge(0,"px")];var n=t.split(" ");return n.length===1&&(n[0]==="top"||n[0]==="bottom"?(n[1]=n[0],n[0]="center"):n[1]="center"),n.length!==2?null:[lu(I_(n[0])),lu(I_(n[1]))]}else return[Ge(t[0]||0,"px"),Ge(t[1]||0,"px")]});function I_(t){return t==="center"?"50%":t==="left"||t==="top"?"0":t==="right"||t==="bottom"?"100%":t}var WM=[{n:"display",k:["none"]},{n:"opacity",int:!0,inh:!0,d:"1",syntax:lt.OPACITY_VALUE},{n:"fillOpacity",int:!0,inh:!0,d:"1",syntax:lt.OPACITY_VALUE},{n:"strokeOpacity",int:!0,inh:!0,d:"1",syntax:lt.OPACITY_VALUE},{n:"fill",int:!0,k:["none"],d:"none",syntax:lt.PAINT},{n:"fillRule",k:["nonzero","evenodd"],d:"nonzero"},{n:"stroke",int:!0,k:["none"],d:"none",syntax:lt.PAINT,l:!0},{n:"shadowType",k:["inner","outer","both"],d:"outer",l:!0},{n:"shadowColor",int:!0,syntax:lt.COLOR},{n:"shadowOffsetX",int:!0,l:!0,d:"0",syntax:lt.LENGTH_PERCENTAGE},{n:"shadowOffsetY",int:!0,l:!0,d:"0",syntax:lt.LENGTH_PERCENTAGE},{n:"shadowBlur",int:!0,l:!0,d:"0",syntax:lt.SHADOW_BLUR},{n:"lineWidth",int:!0,inh:!0,d:"1",l:!0,a:["strokeWidth"],syntax:lt.LENGTH_PERCENTAGE},{n:"increasedLineWidthForHitTesting",inh:!0,d:"0",l:!0,syntax:lt.LENGTH_PERCENTAGE},{n:"lineJoin",inh:!0,l:!0,a:["strokeLinejoin"],k:["miter","bevel","round"],d:"miter"},{n:"lineCap",inh:!0,l:!0,a:["strokeLinecap"],k:["butt","round","square"],d:"butt"},{n:"lineDash",int:!0,inh:!0,k:["none"],a:["strokeDasharray"],syntax:lt.LENGTH_PERCENTAGE_12},{n:"lineDashOffset",int:!0,inh:!0,d:"0",a:["strokeDashoffset"],syntax:lt.LENGTH_PERCENTAGE},{n:"offsetPath",syntax:lt.DEFINED_PATH},{n:"offsetDistance",int:!0,syntax:lt.OFFSET_DISTANCE},{n:"dx",int:!0,l:!0,d:"0",syntax:lt.LENGTH_PERCENTAGE},{n:"dy",int:!0,l:!0,d:"0",syntax:lt.LENGTH_PERCENTAGE},{n:"zIndex",ind:!0,int:!0,d:"0",k:["auto"],syntax:lt.Z_INDEX},{n:"visibility",k:["visible","hidden"],ind:!0,inh:!0,int:!0,d:"visible"},{n:"pointerEvents",inh:!0,k:["none","auto","stroke","fill","painted","visible","visiblestroke","visiblefill","visiblepainted","all"],d:"auto"},{n:"filter",ind:!0,l:!0,k:["none"],d:"none",syntax:lt.FILTER},{n:"clipPath",syntax:lt.DEFINED_PATH},{n:"textPath",syntax:lt.DEFINED_PATH},{n:"textPathSide",k:["left","right"],d:"left"},{n:"textPathStartOffset",l:!0,d:"0",syntax:lt.LENGTH_PERCENTAGE},{n:"transform",p:100,int:!0,k:["none"],d:"none",syntax:lt.TRANSFORM},{n:"transformOrigin",p:100,d:function(t){return t===K.CIRCLE||t===K.ELLIPSE?"center":t===K.TEXT?"text-anchor":"left top"},l:!0,syntax:lt.TRANSFORM_ORIGIN},{n:"anchor",p:99,d:function(t){return t===K.CIRCLE||t===K.ELLIPSE?"0.5 0.5":"0 0"},l:!0,syntax:lt.LENGTH_PERCENTAGE_12},{n:"cx",int:!0,d:"0",syntax:lt.COORDINATE},{n:"cy",int:!0,d:"0",syntax:lt.COORDINATE},{n:"cz",int:!0,d:"0",syntax:lt.COORDINATE},{n:"r",int:!0,l:!0,d:"0",syntax:lt.LENGTH_PERCENTAGE},{n:"rx",int:!0,l:!0,d:"0",syntax:lt.LENGTH_PERCENTAGE},{n:"ry",int:!0,l:!0,d:"0",syntax:lt.LENGTH_PERCENTAGE},{n:"x",int:!0,d:"0",syntax:lt.COORDINATE},{n:"y",int:!0,d:"0",syntax:lt.COORDINATE},{n:"z",int:!0,d:"0",syntax:lt.COORDINATE},{n:"width",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:lt.LENGTH_PERCENTAGE},{n:"height",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:lt.LENGTH_PERCENTAGE},{n:"radius",int:!0,l:!0,d:"0",syntax:lt.LENGTH_PERCENTAGE_14},{n:"x1",int:!0,l:!0,syntax:lt.COORDINATE},{n:"y1",int:!0,l:!0,syntax:lt.COORDINATE},{n:"z1",int:!0,l:!0,syntax:lt.COORDINATE},{n:"x2",int:!0,l:!0,syntax:lt.COORDINATE},{n:"y2",int:!0,l:!0,syntax:lt.COORDINATE},{n:"z2",int:!0,l:!0,syntax:lt.COORDINATE},{n:"path",int:!0,l:!0,d:"",a:["d"],syntax:lt.PATH,p:50},{n:"points",int:!0,l:!0,syntax:lt.LIST_OF_POINTS,p:50},{n:"text",l:!0,d:"",syntax:lt.TEXT,p:50},{n:"textTransform",l:!0,inh:!0,k:["capitalize","uppercase","lowercase","none"],d:"none",syntax:lt.TEXT_TRANSFORM,p:51},{n:"font",l:!0},{n:"fontSize",int:!0,inh:!0,d:"16px",l:!0,syntax:lt.LENGTH_PERCENTAGE},{n:"fontFamily",l:!0,inh:!0,d:"sans-serif"},{n:"fontStyle",l:!0,inh:!0,k:["normal","italic","oblique"],d:"normal"},{n:"fontWeight",l:!0,inh:!0,k:["normal","bold","bolder","lighter"],d:"normal"},{n:"fontVariant",l:!0,inh:!0,k:["normal","small-caps"],d:"normal"},{n:"lineHeight",l:!0,syntax:lt.LENGTH,int:!0,d:"0"},{n:"letterSpacing",l:!0,syntax:lt.LENGTH,int:!0,d:"0"},{n:"miterLimit",l:!0,syntax:lt.NUMBER,d:function(t){return t===K.PATH||t===K.POLYGON||t===K.POLYLINE?"4":"10"}},{n:"wordWrap",l:!0},{n:"wordWrapWidth",l:!0},{n:"maxLines",l:!0},{n:"textOverflow",l:!0,d:"clip"},{n:"leading",l:!0},{n:"textBaseline",l:!0,inh:!0,k:["top","hanging","middle","alphabetic","ideographic","bottom"],d:"alphabetic"},{n:"textAlign",l:!0,inh:!0,k:["start","center","middle","end","left","right"],d:"start"},{n:"markerStart",syntax:lt.MARKER},{n:"markerEnd",syntax:lt.MARKER},{n:"markerMid",syntax:lt.MARKER},{n:"markerStartOffset",syntax:lt.LENGTH,l:!0,int:!0,d:"0"},{n:"markerEndOffset",syntax:lt.LENGTH,l:!0,int:!0,d:"0"}],F_=WM.filter(function(t){return!!t.l}).map(function(t){return t.n}),vo={},ic=new WeakMap,B2t=function(t,n){var e=ic.get(t);return!e||e.length===0?!0:e.includes(n)},N2t=function(){function t(n){var e=this;this.runtime=n,WM.forEach(function(r){e.registerMetadata(r)})}return t.prototype.registerMetadata=function(n){X([n.n],R(n.a||[]),!1).forEach(function(e){vo[e]=n})},t.prototype.unregisterMetadata=function(n){delete vo[n]},t.prototype.getPropertySyntax=function(n){return this.runtime.CSSPropertySyntaxFactory[n]},t.prototype.processProperties=function(n,e,r){var i=this;if(r===void 0&&(r={skipUpdateAttribute:!1,skipParse:!1,forceUpdateGeometry:!1,usedAttributes:[]}),!this.runtime.enableCSSParsing){Object.assign(n.attributes,e);var a=Object.keys(e),o=n.parsedStyle.clipPath,s=n.parsedStyle.offsetPath;n.parsedStyle=Object.assign(n.parsedStyle,e);var l=!!r.forceUpdateGeometry;if(!l){for(var c=0;c<F_.length;c++)if(F_[c]in e){l=!0;break}}e.fill&&(n.parsedStyle.fill=Ha(e.fill)),e.stroke&&(n.parsedStyle.stroke=Ha(e.stroke)),e.shadowColor&&(n.parsedStyle.shadowColor=Ha(e.shadowColor)),e.filter&&(n.parsedStyle.filter=Wz(e.filter)),Pt(e.radius)||(n.parsedStyle.radius=cx(e.radius,4)),Pt(e.lineDash)||(n.parsedStyle.lineDash=cx(e.lineDash,2)),e.points&&(n.parsedStyle.points=Uz(e.points,n)),e.path===""&&(n.parsedStyle.path=E({},jz)),e.path&&(n.parsedStyle.path=jw(e.path),n.parsedStyle.defX=n.parsedStyle.path.rect.x,n.parsedStyle.defY=n.parsedStyle.path.rect.y),e.textTransform&&this.runtime.CSSPropertySyntaxFactory["<text-transform>"].calculator(null,null,{value:e.textTransform},n,null),e.clipPath&&this.runtime.CSSPropertySyntaxFactory["<defined-path>"].calculator("clipPath",o,e.clipPath,n,this.runtime),e.offsetPath&&this.runtime.CSSPropertySyntaxFactory["<defined-path>"].calculator("offsetPath",s,e.offsetPath,n,this.runtime),e.anchor&&(n.parsedStyle.anchor=cx(e.anchor,2)),e.transform&&(n.parsedStyle.transform=Qg(e.transform)),e.transformOrigin&&(n.parsedStyle.transformOrigin=qz(e.transformOrigin)),e.markerStart&&(n.parsedStyle.markerStart=this.runtime.CSSPropertySyntaxFactory["<marker>"].calculator(null,e.markerStart,e.markerStart,null,null)),e.markerEnd&&(n.parsedStyle.markerEnd=this.runtime.CSSPropertySyntaxFactory["<marker>"].calculator(null,e.markerEnd,e.markerEnd,null,null)),e.markerMid&&(n.parsedStyle.markerMid=this.runtime.CSSPropertySyntaxFactory["<marker>"].calculator("",e.markerMid,e.markerMid,null,null)),((n.nodeName===K.CIRCLE||n.nodeName===K.ELLIPSE)&&(!Pt(e.cx)||!Pt(e.cy))||(n.nodeName===K.RECT||n.nodeName===K.IMAGE||n.nodeName===K.GROUP||n.nodeName===K.HTML||n.nodeName===K.TEXT||n.nodeName===K.MESH)&&(!Pt(e.x)||!Pt(e.y)||!Pt(e.z))||n.nodeName===K.LINE&&(!Pt(e.x1)||!Pt(e.y1)||!Pt(e.z1)||!Pt(e.x2)||!Pt(e.y2)||!Pt(e.z2)))&&this.runtime.CSSPropertySyntaxFactory["<coordinate>"].postProcessor(n,a),Pt(e.zIndex)||this.runtime.CSSPropertySyntaxFactory["<z-index>"].postProcessor(n,a),e.path&&this.runtime.CSSPropertySyntaxFactory["<path>"].postProcessor(n,a),e.points&&this.runtime.CSSPropertySyntaxFactory["<list-of-points>"].postProcessor(n,a),Pt(e.offsetDistance)||this.runtime.CSSPropertySyntaxFactory["<offset-distance>"].postProcessor(n,a),e.transform&&this.runtime.CSSPropertySyntaxFactory["<transform>"].postProcessor(n,a),l&&this.updateGeometry(n);return}var u=r.skipUpdateAttribute,f=r.skipParse,h=r.forceUpdateGeometry,d=r.usedAttributes,p=h,v=Object.keys(e);v.forEach(function(g){var y;u||(n.attributes[g]=e[g]),!p&&(!((y=vo[g])===null||y===void 0)&&y.l)&&(p=!0)}),f||v.forEach(function(g){n.computedStyle[g]=i.parseProperty(g,n.attributes[g],n)}),d!=null&&d.length&&(v=Array.from(new Set(v.concat(d)))),v.forEach(function(g){g in n.computedStyle&&(n.parsedStyle[g]=i.computeProperty(g,n.computedStyle[g],n))}),p&&this.updateGeometry(n),v.forEach(function(g){g in n.parsedStyle&&i.postProcessProperty(g,n,v)}),this.runtime.enableCSSParsing&&n.children.length&&v.forEach(function(g){g in n.parsedStyle&&i.isPropertyInheritable(g)&&n.children.forEach(function(y){y.internalSetAttribute(g,null,{skipUpdateAttribute:!0,skipParse:!0})})})},t.prototype.parseProperty=function(n,e,r){var i=vo[n],a=e;if((e===""||Pt(e))&&(e="unset"),e==="unset"||e==="initial"||e==="inherit")a=Dw(e);else if(i){var o=i.k,s=i.syntax,l=s&&this.getPropertySyntax(s);o&&o.indexOf(e)>-1?a=Dw(e):l&&l.parser&&(a=l.parser(e,r))}return a},t.prototype.computeProperty=function(n,e,r){var i=vo[n],a=r.id==="g-root",o=e;if(i){var s=i.syntax,l=i.inh,c=i.d;if(e instanceof Er){var u=e.value;if(u==="unset"&&(l&&!a?u="inherit":u="initial"),u==="initial")Pt(c)||(e=this.parseProperty(n,pc(c)?c(r.nodeName):c,r));else if(u==="inherit"){var f=this.tryToResolveProperty(r,n,{inherited:!0});if(Pt(f)){this.addUnresolveProperty(r,n);return}else return f}}var h=s&&this.getPropertySyntax(s);if(h&&h.calculator){var d=r.parsedStyle[n];o=h.calculator(n,d,e,r,this.runtime)}else e instanceof Er?o=e.value:o=e}return o},t.prototype.postProcessProperty=function(n,e,r){var i=vo[n];if(i&&i.syntax){var a=i.syntax&&this.getPropertySyntax(i.syntax),o=a;o&&o.postProcessor&&o.postProcessor(e,r)}},t.prototype.addUnresolveProperty=function(n,e){var r=ic.get(n);r||(ic.set(n,[]),r=ic.get(n)),r.indexOf(e)===-1&&r.push(e)},t.prototype.tryToResolveProperty=function(n,e,r){r===void 0&&(r={});var i=r.inherited;if(i&&n.parentElement&&B2t(n.parentElement,e)){var a=n.parentElement.parsedStyle[e];return a==="unset"||a==="initial"||a==="inherit"?void 0:a}},t.prototype.recalc=function(n){var e=ic.get(n);if(e&&e.length){var r={};e.forEach(function(i){r[i]=n.attributes[i]}),this.processProperties(n,r),ic.delete(n)}},t.prototype.updateGeometry=function(n){var e=n.nodeName,r=this.runtime.geometryUpdaterFactory[e];if(r){var i=n.geometry;i.contentBounds||(i.contentBounds=new dn),i.renderBounds||(i.renderBounds=new dn);var a=n.parsedStyle,o=r.update(a,n),s=o.width,l=o.height,c=o.depth,u=c===void 0?0:c,f=o.offsetX,h=f===void 0?0:f,d=o.offsetY,p=d===void 0?0:d,v=o.offsetZ,g=v===void 0?0:v,y=[Math.abs(s)/2,Math.abs(l)/2,u/2],m=a,x=m.stroke,b=m.lineWidth,w=m.increasedLineWidthForHitTesting,S=m.shadowType,O=m.shadowColor,M=m.filter,A=M===void 0?[]:M,T=m.transformOrigin,C=a.anchor;e===K.TEXT?delete a.anchor:e===K.MESH&&(a.anchor[2]=.5);var P=[(1-(C&&C[0]||0)*2)*s/2+h,(1-(C&&C[1]||0)*2)*l/2+p,(1-(C&&C[2]||0)*2)*y[2]+g];i.contentBounds.update(P,y);var _=e===K.POLYLINE||e===K.POLYGON||e===K.PATH?Math.SQRT2:.5,k=x&&!x.isNone;if(k){var I=((b||0)+(w||0))*_;y[0]+=I,y[1]+=I}if(i.renderBounds.update(P,y),O&&S&&S!=="inner"){var L=i.renderBounds,F=L.min,B=L.max,D=a,N=D.shadowBlur,j=D.shadowOffsetX,Y=D.shadowOffsetY,W=N||0,V=j||0,H=Y||0,Q=F[0]-W+V,Z=B[0]+W+V,q=F[1]-W+H,rt=B[1]+W+H;F[0]=Math.min(F[0],Q),B[0]=Math.max(B[0],Z),F[1]=Math.min(F[1],q),B[1]=Math.max(B[1],rt),i.renderBounds.setMinMax(F,B)}A.forEach(function(St){var Wt=St.name,Ft=St.params;if(Wt==="blur"){var ne=Ft[0].value;i.renderBounds.update(i.renderBounds.center,qv(i.renderBounds.halfExtents,i.renderBounds.halfExtents,[ne,ne,0]))}else if(Wt==="drop-shadow"){var Je=Ft[0].value,ur=Ft[1].value,Oa=Ft[2].value,Os=i.renderBounds,Qn=Os.min,Jr=Os.max,le=Qn[0]-Oa+Je,re=Jr[0]+Oa+Je,$e=Qn[1]-Oa+ur,ce=Jr[1]+Oa+ur;Qn[0]=Math.min(Qn[0],le),Jr[0]=Math.max(Jr[0],re),Qn[1]=Math.min(Qn[1],$e),Jr[1]=Math.max(Jr[1],ce),i.renderBounds.setMinMax(Qn,Jr)}}),C=a.anchor;var it=s<0,ft=l<0,yt=(it?-1:1)*(T?Dr(T[0],0,n):0),mt=(ft?-1:1)*(T?Dr(T[1],1,n):0);yt=yt-(it?-1:1)*(C&&C[0]||0)*i.contentBounds.halfExtents[0]*2,mt=mt-(ft?-1:1)*(C&&C[1]||0)*i.contentBounds.halfExtents[1]*2,n.setOrigin(yt,mt),this.runtime.sceneGraphService.dirtifyToRoot(n)}},t.prototype.isPropertyInheritable=function(n){var e=vo[n];return e?e.inh:!1},t}(),$2t=function(){function t(){this.parser=Gz,this.parserWithCSSDisabled=null,this.mixer=zM}return t.prototype.calculator=function(n,e,r,i){return Br(r)},t}(),j2t=function(){function t(){}return t.prototype.calculator=function(n,e,r,i,a){return r instanceof Er&&(r=null),a.sceneGraphService.updateDisplayObjectDependency(n,e,r,i),n==="clipPath"&&i.forEach(function(o){o.childNodes.length===0&&a.sceneGraphService.dirtifyToRoot(o)}),r},t}(),z2t=function(){function t(){this.parser=Ha,this.parserWithCSSDisabled=Ha,this.mixer=u2t}return t.prototype.calculator=function(n,e,r,i){return r instanceof Er?r.value==="none"?Rw:$z:r},t}(),G2t=function(){function t(){this.parser=Wz}return t.prototype.calculator=function(n,e,r){return r instanceof Er?[]:r},t}();function D_(t){var n=t.parsedStyle.fontSize;return Pt(n)?null:n}var VM=function(){function t(){this.parser=lu,this.parserWithCSSDisabled=null,this.mixer=zM}return t.prototype.calculator=function(n,e,r,i,a){var o;if(Rl(r))return r;if(me.isRelativeUnit(r.unit)){var s=a.styleValueRegistry;if(r.unit===st.kPercentage)return 0;if(r.unit===st.kEms){if(i.parentNode){var l=D_(i.parentNode);if(l)return l*=r.value,l;s.addUnresolveProperty(i,n)}else s.addUnresolveProperty(i,n);return 0}else if(r.unit===st.kRems){if(!((o=i==null?void 0:i.ownerDocument)===null||o===void 0)&&o.documentElement){var l=D_(i.ownerDocument.documentElement);if(l)return l*=r.value,l;s.addUnresolveProperty(i,n)}else s.addUnresolveProperty(i,n);return 0}}else return r.value},t}(),Y2t=function(){function t(){this.mixer=Hz}return t.prototype.parser=function(n){var e=Yz(Rl(n)?[n]:n),r;return e.length===1?r=[e[0],e[0]]:r=[e[0],e[1]],r},t.prototype.calculator=function(n,e,r){return r.map(function(i){return i.value})},t}(),W2t=function(){function t(){this.mixer=Hz}return t.prototype.parser=function(n){var e=Yz(Rl(n)?[n]:n),r;return e.length===1?r=[e[0],e[0],e[0],e[0]]:e.length===2?r=[e[0],e[1],e[0],e[1]]:e.length===3?r=[e[0],e[1],e[2],e[1]]:r=[e[0],e[1],e[2],e[3]],r},t.prototype.calculator=function(n,e,r){return r.map(function(i){return i.value})},t}(),ff=pe();function HM(t,n){var e=n.parsedStyle.defX||0,r=n.parsedStyle.defY||0;return n.resetLocalTransform(),n.setLocalPosition(e,r),t.forEach(function(i){var a=i.t,o=i.d;if(a==="scale"){var s=(o==null?void 0:o.map(function(m){return m.value}))||[1,1];n.scaleLocal(s[0],s[1],1)}else if(a==="scalex"){var s=(o==null?void 0:o.map(function(x){return x.value}))||[1];n.scaleLocal(s[0],1,1)}else if(a==="scaley"){var s=(o==null?void 0:o.map(function(x){return x.value}))||[1];n.scaleLocal(1,s[0],1)}else if(a==="scalez"){var s=(o==null?void 0:o.map(function(x){return x.value}))||[1];n.scaleLocal(1,1,s[0])}else if(a==="scale3d"){var s=(o==null?void 0:o.map(function(x){return x.value}))||[1,1,1];n.scaleLocal(s[0],s[1],s[2])}else if(a==="translate"){var l=o||[Mn,Mn];n.translateLocal(l[0].value,l[1].value,0)}else if(a==="translatex"){var l=o||[Mn];n.translateLocal(l[0].value,0,0)}else if(a==="translatey"){var l=o||[Mn];n.translateLocal(0,l[0].value,0)}else if(a==="translatez"){var l=o||[Mn];n.translateLocal(0,0,l[0].value)}else if(a==="translate3d"){var l=o||[Mn,Mn,Mn];n.translateLocal(l[0].value,l[1].value,l[2].value)}else if(a==="rotate"){var c=o||[$a];n.rotateLocal(0,0,Br(c[0]))}else if(a==="rotatex"){var c=o||[$a];n.rotateLocal(Br(c[0]),0,0)}else if(a==="rotatey"){var c=o||[$a];n.rotateLocal(0,Br(c[0]),0)}else if(a==="rotatez"){var c=o||[$a];n.rotateLocal(0,0,Br(c[0]))}else if(a!=="rotate3d")if(a==="skew"){var u=(o==null?void 0:o.map(function(m){return m.value}))||[0,0];n.setLocalSkew(je(u[0]),je(u[1]))}else if(a==="skewx"){var u=(o==null?void 0:o.map(function(x){return x.value}))||[0];n.setLocalSkew(je(u[0]),n.getLocalSkew()[1])}else if(a==="skewy"){var u=(o==null?void 0:o.map(function(x){return x.value}))||[0];n.setLocalSkew(n.getLocalSkew()[0],je(u[0]))}else if(a==="matrix"){var f=R(o.map(function(m){return m.value}),6),h=f[0],d=f[1],p=f[2],v=f[3],g=f[4],y=f[5];n.setLocalTransform(yb(ff,h,d,0,0,p,v,0,0,0,0,1,0,g+e,y+r,0,1))}else a==="matrix3d"&&(yb.apply(wU,X([ff],R(o.map(function(m){return m.value})),!1)),ff[12]+=e,ff[13]+=r,n.setLocalTransform(ff))}),n.getLocalTransform()}var V2t=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.postProcessor=function(e,r){var i,a,o;switch(e.nodeName){case K.CIRCLE:case K.ELLIPSE:var s=e.parsedStyle,l=s.cx,c=s.cy,u=s.cz;Pt(l)||(i=l),Pt(c)||(a=c),Pt(u)||(o=u);break;case K.LINE:var f=e.parsedStyle,h=f.x1,d=f.x2,p=f.y1,v=f.y2,g=Math.min(h,d),y=Math.min(p,v);i=g,a=y,o=0;break;case K.RECT:case K.IMAGE:case K.GROUP:case K.HTML:case K.TEXT:case K.MESH:Pt(e.parsedStyle.x)||(i=e.parsedStyle.x),Pt(e.parsedStyle.y)||(a=e.parsedStyle.y),Pt(e.parsedStyle.z)||(o=e.parsedStyle.z);break}e.nodeName!==K.PATH&&e.nodeName!==K.POLYLINE&&e.nodeName!==K.POLYGON&&(e.parsedStyle.defX=i||0,e.parsedStyle.defY=a||0);var m=!Pt(i)||!Pt(a)||!Pt(o);if(m&&r.indexOf("transform")===-1){var x=e.parsedStyle.transform;if(x&&x.length)HM(x,e);else{var b=R(e.getLocalPosition(),3),w=b[0],S=b[1],O=b[2];e.setLocalPosition(Pt(i)?w:i,Pt(a)?S:a,Pt(o)?O:o)}}},n}(VM),H2t=function(){function t(){}return t.prototype.calculator=function(n,e,r,i){r instanceof Er&&(r=null);var a=r==null?void 0:r.cloneNode(!0);return a&&(a.style.isMarker=!0),a},t}(),X2t=function(){function t(){this.mixer=zM,this.parser=wl,this.parserWithCSSDisabled=null}return t.prototype.calculator=function(n,e,r){return r.value},t}(),U2t=function(){function t(){this.parser=wl,this.parserWithCSSDisabled=null,this.mixer=GM(0,1)}return t.prototype.calculator=function(n,e,r){return r.value},t.prototype.postProcessor=function(n){var e=n.parsedStyle,r=e.offsetPath,i=e.offsetDistance;if(r){var a=r.nodeName;if(a===K.LINE||a===K.PATH||a===K.POLYLINE){var o=r.getPoint(i);o&&(n.parsedStyle.defX=o.x,n.parsedStyle.defY=o.y,n.setLocalPosition(o.x,o.y))}}},t}(),q2t=function(){function t(){this.parser=wl,this.parserWithCSSDisabled=null,this.mixer=GM(0,1)}return t.prototype.calculator=function(n,e,r){return r.value},t}(),Z2t=function(){function t(){this.parser=jw,this.parserWithCSSDisabled=jw,this.mixer=E2t}return t.prototype.calculator=function(n,e,r){return r instanceof Er&&r.value==="unset"?{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new bl(0,0,0,0)}:r},t.prototype.postProcessor=function(n,e){if(n.parsedStyle.defX=n.parsedStyle.path.rect.x,n.parsedStyle.defY=n.parsedStyle.path.rect.y,n.nodeName===K.PATH&&e.indexOf("transform")===-1){var r=n.parsedStyle,i=r.defX,a=i===void 0?0:i,o=r.defY,s=o===void 0?0:o;n.setLocalPosition(a,s)}},t}(),K2t=function(){function t(){this.parser=Uz,this.mixer=T2t}return t.prototype.postProcessor=function(n,e){if((n.nodeName===K.POLYGON||n.nodeName===K.POLYLINE)&&e.indexOf("transform")===-1){var r=n.parsedStyle,i=r.defX,a=r.defY;n.setLocalPosition(i,a)}},t}(),Q2t=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.mixer=GM(0,1/0),e}return n}(VM),J2t=function(){function t(){}return t.prototype.calculator=function(n,e,r,i){return r instanceof Er?r.value==="unset"?"":r.value:"".concat(r)},t.prototype.postProcessor=function(n){n.nodeValue="".concat(n.parsedStyle.text)||""},t}(),tSt=function(){function t(){}return t.prototype.calculator=function(n,e,r,i){var a=i.getAttribute("text");if(a){var o=a;r.value==="capitalize"?o=a.charAt(0).toUpperCase()+a.slice(1):r.value==="lowercase"?o=a.toLowerCase():r.value==="uppercase"&&(o=a.toUpperCase()),i.parsedStyle.text=o}return r.value},t}(),dx={},eSt=0;function nSt(t,n){if(t){var e=typeof t=="string"?t:t.id||eSt++;dx[e]&&dx[e].destroy(),dx[e]=n}}var Gd=typeof window<"u"&&typeof window.document<"u";function rSt(t){return!!t.getAttribute}function iSt(t,n){for(var e=0,r=t.length;e<r;){var i=e+r>>>1;Zz(t[i],n)<0?e=i+1:r=i}return e}function Zz(t,n){var e=Number(t.parsedStyle.zIndex),r=Number(n.parsedStyle.zIndex);if(e===r){var i=t.parentNode;if(i){var a=i.childNodes||[];return a.indexOf(t)-a.indexOf(n)}}return e-r}function Kz(t){var n,e=t;do{var r=(n=e.parsedStyle)===null||n===void 0?void 0:n.clipPath;if(r)return e;e=e.parentElement}while(e!==null);return null}var R_="px";function aSt(t,n,e){Gd&&t.style&&(t.style.width=n+R_,t.style.height=e+R_)}function Qz(t,n){if(Gd)return document.defaultView.getComputedStyle(t,null).getPropertyValue(n)}function oSt(t){var n=Qz(t,"width");return n==="auto"?t.offsetWidth:parseFloat(n)}function sSt(t){var n=Qz(t,"height");return n==="auto"?t.offsetHeight:parseFloat(n)}var lSt=1,cSt={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},Gw=typeof performance=="object"&&performance.now?performance:Date;function Bl(t,n,e){var r=!1,i=!1,a=!!n&&!n.isNone,o=!!e&&!e.isNone;return t==="visiblepainted"||t==="painted"||t==="auto"?(r=a,i=o):t==="visiblefill"||t==="fill"?r=!0:t==="visiblestroke"||t==="stroke"?i=!0:(t==="visible"||t==="all")&&(r=!0,i=!0),[r,i]}var uSt=1,fSt=function(){return uSt++},fa=typeof self=="object"&&self.self==self?self:typeof global=="object"&&global.global==global?global:{},hSt=Date.now(),dSt=function(){return fa.performance&&typeof fa.performance.now=="function"?fa.performance.now():Date.now()-hSt},Mf={},B_=Date.now(),pSt=function(t){if(typeof t!="function")throw new TypeError(t+" is not a function");var n=Date.now(),e=n-B_,r=e>16?0:16-e,i=fSt();return Mf[i]=t,Object.keys(Mf).length>1||setTimeout(function(){B_=n;var a=Mf;Mf={},Object.keys(a).forEach(function(o){return a[o](dSt())})},r),i},vSt=function(t){delete Mf[t]},gSt=["","webkit","moz","ms","o"],Jz=function(t){return typeof t!="string"?pSt:t===""?fa.requestAnimationFrame:fa[t+"RequestAnimationFrame"]},ySt=function(t){return typeof t!="string"?vSt:t===""?fa.cancelAnimationFrame:fa[t+"CancelAnimationFrame"]||fa[t+"CancelRequestAnimationFrame"]},mSt=function(t,n){for(var e=0;t[e]!==void 0;){if(n(t[e]))return t[e];e=e+1}},t6=mSt(gSt,function(t){return!!Jz(t)}),e6=Jz(t6),n6=ySt(t6);fa.requestAnimationFrame=e6;fa.cancelAnimationFrame=n6;var xSt=function(){function t(){this.callbacks=[]}return t.prototype.getCallbacksNum=function(){return this.callbacks.length},t.prototype.tapPromise=function(n,e){this.callbacks.push(e)},t.prototype.promise=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return Promise.all(this.callbacks.map(function(r){return r.apply(void 0,X([],R(n),!1))}))},t}(),bSt=function(){function t(){this.callbacks=[]}return t.prototype.tapPromise=function(n,e){this.callbacks.push(e)},t.prototype.promise=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return Ri(this,void 0,void 0,function(){var r,i,a,o;return Bi(this,function(s){switch(s.label){case 0:return this.callbacks.length?[4,(o=this.callbacks)[0].apply(o,X([],R(n),!1))]:[3,6];case 1:r=s.sent(),i=0,s.label=2;case 2:return i<this.callbacks.length-1?(a=this.callbacks[i],[4,a(r)]):[3,5];case 3:r=s.sent(),s.label=4;case 4:return i++,[3,2];case 5:return[2,r];case 6:return[2,null]}})})},t}(),Jn=function(){function t(){this.callbacks=[]}return t.prototype.tap=function(n,e){this.callbacks.push(e)},t.prototype.call=function(){var n=arguments;this.callbacks.forEach(function(e){e.apply(void 0,n)})},t}(),px=function(){function t(){this.callbacks=[]}return t.prototype.tap=function(n,e){this.callbacks.push(e)},t.prototype.call=function(){if(this.callbacks.length){for(var n=arguments,e=this.callbacks[0].apply(void 0,n),r=0;r<this.callbacks.length-1;r++){var i=this.callbacks[r];e=i(e)}return e}return null},t}(),wSt=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],SSt=/([\"\'])[^\'\"]+\1/;function OSt(t){for(var n=t.fontSize,e=t.fontFamily,r=t.fontStyle,i=t.fontVariant,a=t.fontWeight,o=Rl(n)&&"".concat(n,"px")||"16px",s=e.split(","),l=s.length-1;l>=0;l--){var c=s[l].trim();!SSt.test(c)&&wSt.indexOf(c)<0&&(c='"'.concat(c,'"')),s[l]=c}return"".concat(r," ").concat(i," ").concat(a," ").concat(o," ").concat(s.join(","))}var MSt=function(){function t(){this.parser=Qg,this.parserWithCSSDisabled=Qg,this.mixer=R2t}return t.prototype.calculator=function(n,e,r,i){return r instanceof Er?[]:r},t.prototype.postProcessor=function(n){var e=n.parsedStyle.transform;HM(e,n)},t}(),ASt=function(){function t(){this.parser=qz}return t}(),ESt=function(){function t(){this.parser=wl}return t.prototype.calculator=function(n,e,r,i){return r.value},t.prototype.postProcessor=function(n){if(n.parentNode){var e=n.parentNode,r=e.renderable,i=e.sortable;r&&(r.dirty=!0),i&&(i.dirty=!0,i.dirtyReason=su.Z_INDEX_CHANGED)}},t}(),TSt=function(){function t(){}return t.prototype.update=function(n,e){var r=n.r,i=r*2,a=r*2;return{width:i,height:a}},t}(),CSt=function(){function t(){}return t.prototype.update=function(n,e){var r=n.rx,i=n.ry,a=r*2,o=i*2;return{width:a,height:o}},t}(),PSt=function(){function t(){}return t.prototype.update=function(n){var e=n.x1,r=n.y1,i=n.x2,a=n.y2,o=Math.min(e,i),s=Math.max(e,i),l=Math.min(r,a),c=Math.max(r,a),u=s-o,f=c-l;return{width:u,height:f}},t}(),kSt=function(){function t(){}return t.prototype.update=function(n){var e=n.path,r=e.rect,i=r.width,a=r.height;return{width:i,height:a}},t}(),_St=function(){function t(){}return t.prototype.update=function(n){if(n.points&&$M(n.points.points)){var e=n.points.points,r=Math.min.apply(Math,X([],R(e.map(function(c){return c[0]})),!1)),i=Math.max.apply(Math,X([],R(e.map(function(c){return c[0]})),!1)),a=Math.min.apply(Math,X([],R(e.map(function(c){return c[1]})),!1)),o=Math.max.apply(Math,X([],R(e.map(function(c){return c[1]})),!1)),s=i-r,l=o-a;return{width:s,height:l}}return{width:0,height:0}},t}(),LSt=function(){function t(){}return t.prototype.update=function(n,e){var r=n.img,i=n.width,a=i===void 0?0:i,o=n.height,s=o===void 0?0:o,l=a,c=s;return r&&!ps(r)&&(l||(l=r.width,n.width=l),c||(c=r.height,n.height=c)),{width:l,height:c}},t}(),ISt=function(){function t(n){this.globalRuntime=n}return t.prototype.isReadyToMeasure=function(n,e){var r=n.text,i=n.textAlign,a=n.textBaseline,o=n.fontSize,s=n.fontStyle,l=n.fontWeight,c=n.fontVariant,u=n.lineWidth;return r&&o&&s&&l&&c&&i&&a&&!Pt(u)},t.prototype.update=function(n,e){var r,i,a=n.text,o=n.textAlign,s=n.lineWidth,l=n.textBaseline,c=n.dx,u=n.dy;if(!this.isReadyToMeasure(n,e))return n.metrics={font:"",width:0,height:0,lines:[],lineWidths:[],lineHeight:0,maxLineWidth:0,fontProperties:{ascent:0,descent:0,fontSize:0},lineMetrics:[]},{width:0,height:0,x:0,y:0,offsetX:0,offsetY:0};var f=(((i=(r=e==null?void 0:e.ownerDocument)===null||r===void 0?void 0:r.defaultView)===null||i===void 0?void 0:i.getConfig())||{}).offscreenCanvas,h=this.globalRuntime.textService.measureText(a,n,f);n.metrics=h;var d=h.width,p=h.height,v=h.lineHeight,g=h.fontProperties,y=[d/2,p/2,0],m=[0,1],x=0;o==="center"||o==="middle"?(x=s/2,m=[.5,1]):(o==="right"||o==="end")&&(x=s,m=[1,1]);var b=0;return l==="middle"?b=y[1]:l==="top"||l==="hanging"?b=y[1]*2:l==="alphabetic"?b=this.globalRuntime.enableCSSParsing?v-g.ascent:0:(l==="bottom"||l==="ideographic")&&(b=0),c&&(x+=c),u&&(b+=u),n.anchor=[m[0],m[1],0],{width:y[0]*2,height:y[1]*2,offsetX:x,offsetY:b}},t}();function FSt(t){return!!t.type}var Om=function(){function t(n){this.eventPhase=t.prototype.NONE,this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.defaultPrevented=!1,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new kn,this.page=new kn,this.canvas=new kn,this.viewport=new kn,this.composed=!1,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=n}return Object.defineProperty(t.prototype,"name",{get:function(){return this.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"layerX",{get:function(){return this.layer.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"layerY",{get:function(){return this.layer.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pageX",{get:function(){return this.page.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pageY",{get:function(){return this.page.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return this.canvas.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.canvas.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvasX",{get:function(){return this.canvas.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvasY",{get:function(){return this.canvas.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"viewportX",{get:function(){return this.viewport.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"viewportY",{get:function(){return this.viewport.y},enumerable:!1,configurable:!0}),t.prototype.composedPath=function(){return this.manager&&(!this.path||this.path[0]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path},Object.defineProperty(t.prototype,"propagationPath",{get:function(){return this.composedPath()},enumerable:!1,configurable:!0}),t.prototype.preventDefault=function(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0},t.prototype.stopImmediatePropagation=function(){this.propagationImmediatelyStopped=!0},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t.prototype.initEvent=function(){},t.prototype.initUIEvent=function(){},t.prototype.clone=function(){throw new Error(ye)},t}(),r6=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.client=new kn,e.movement=new kn,e.offset=new kn,e.global=new kn,e.screen=new kn,e}return Object.defineProperty(n.prototype,"clientX",{get:function(){return this.client.x},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"clientY",{get:function(){return this.client.y},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"movementX",{get:function(){return this.movement.x},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"movementY",{get:function(){return this.movement.y},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"offsetX",{get:function(){return this.offset.x},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"offsetY",{get:function(){return this.offset.y},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"globalX",{get:function(){return this.global.x},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"globalY",{get:function(){return this.global.y},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"screenX",{get:function(){return this.screen.x},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"screenY",{get:function(){return this.screen.y},enumerable:!1,configurable:!0}),n.prototype.getModifierState=function(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e)},n.prototype.initMouseEvent=function(){throw new Error(ye)},n}(Om),Yw=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.width=0,e.height=0,e.isPrimary=!1,e}return n.prototype.getCoalescedEvents=function(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]},n.prototype.getPredictedEvents=function(){throw new Error("getPredictedEvents is not supported!")},n.prototype.clone=function(){return this.manager.clonePointerEvent(this)},n}(r6),Ww=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.clone=function(){return this.manager.cloneWheelEvent(this)},n}(r6),Se=function(t){G(n,t);function n(e,r){var i=t.call(this,null)||this;return i.type=e,i.detail=r,Object.assign(i,r),i}return n}(Om),N_=":",i6=function(){function t(){this.emitter=new NM}return t.prototype.on=function(n,e,r){return this.addEventListener(n,e,r),this},t.prototype.addEventListener=function(n,e,r){var i=c_(r)&&r||Xv(r)&&r.capture,a=Xv(r)&&r.once,o=pc(e)?void 0:e,s=!1,l="";if(n.indexOf(N_)>-1){var c=R(n.split(N_),2),u=c[0],f=c[1];n=f,l=u,s=!0}if(n=i?"".concat(n,"capture"):n,e=pc(e)?e:e.handleEvent,s){var h=e;e=function(){for(var d,p=[],v=0;v<arguments.length;v++)p[v]=arguments[v];((d=p[0].target)===null||d===void 0?void 0:d.name)===l&&h.apply(void 0,X([],R(p),!1))}}return a?this.emitter.once(n,e,o):this.emitter.on(n,e,o),this},t.prototype.off=function(n,e,r){return n?this.removeEventListener(n,e,r):this.removeAllEventListeners(),this},t.prototype.removeAllEventListeners=function(){this.emitter.removeAllListeners()},t.prototype.removeEventListener=function(n,e,r){var i=c_(r)&&r||Xv(r)&&r.capture,a=pc(e)?void 0:e;return n=i?"".concat(n,"capture"):n,e=pc(e)?e:e==null?void 0:e.handleEvent,this.emitter.off(n,e,a),this},t.prototype.emit=function(n,e){this.dispatchEvent(new Se(n,e))},t.prototype.dispatchEvent=function(n,e){var r,i;if(e===void 0&&(e=!1),!FSt(n))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");var a;if(this.document?a=this:this.defaultView?a=this.defaultView:a=(r=this.ownerDocument)===null||r===void 0?void 0:r.defaultView,a){if(n.manager=a.getEventService()||null,!n.manager)return!1;n.defaultPrevented=!1,n.path=[],e||(n.target=this),(i=n.manager)===null||i===void 0||i.dispatchEvent(n,n.type,e)}return!n.defaultPrevented},t}(),Sn=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.shadow=!1,e.ownerDocument=null,e.isConnected=!1,e.baseURI="",e.childNodes=[],e.nodeType=0,e.nodeName="",e.nodeValue=null,e.parentNode=null,e}return n.isNode=function(e){return!!e.childNodes},Object.defineProperty(n.prototype,"textContent",{get:function(){var e,r,i="";this.nodeName===K.TEXT&&(i+=this.style.text);try{for(var a=Ct(this.childNodes),o=a.next();!o.done;o=a.next()){var s=o.value;s.nodeName===K.TEXT?i+=s.nodeValue:i+=s.textContent}}catch(l){e={error:l}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return i},set:function(e){var r=this;this.childNodes.slice().forEach(function(i){r.removeChild(i)}),this.nodeName===K.TEXT&&(this.style.text="".concat(e))},enumerable:!1,configurable:!0}),n.prototype.getRootNode=function(e){return e===void 0&&(e={}),this.parentNode?this.parentNode.getRootNode(e):e.composed&&this.host?this.host.getRootNode(e):this},n.prototype.hasChildNodes=function(){return this.childNodes.length>0},n.prototype.isDefaultNamespace=function(e){throw new Error(ye)},n.prototype.lookupNamespaceURI=function(e){throw new Error(ye)},n.prototype.lookupPrefix=function(e){throw new Error(ye)},n.prototype.normalize=function(){throw new Error(ye)},n.prototype.isEqualNode=function(e){return this===e},n.prototype.isSameNode=function(e){return this.isEqualNode(e)},Object.defineProperty(n.prototype,"parent",{get:function(){return this.parentNode},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"parentElement",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"nextSibling",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"previousSibling",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"firstChild",{get:function(){return this.childNodes.length>0?this.childNodes[0]:null},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"lastChild",{get:function(){return this.childNodes.length>0?this.childNodes[this.childNodes.length-1]:null},enumerable:!1,configurable:!0}),n.prototype.compareDocumentPosition=function(e){var r;if(e===this)return 0;for(var i=e,a=this,o=[i],s=[a];(r=i.parentNode)!==null&&r!==void 0?r:a.parentNode;)i=i.parentNode?(o.push(i.parentNode),i.parentNode):i,a=a.parentNode?(s.push(a.parentNode),a.parentNode):a;if(i!==a)return n.DOCUMENT_POSITION_DISCONNECTED|n.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC|n.DOCUMENT_POSITION_PRECEDING;var l=o.length>s.length?o:s,c=l===o?s:o;if(l[l.length-c.length]===c[0])return l===o?n.DOCUMENT_POSITION_CONTAINED_BY|n.DOCUMENT_POSITION_FOLLOWING:n.DOCUMENT_POSITION_CONTAINS|n.DOCUMENT_POSITION_PRECEDING;for(var u=l.length-c.length,f=c.length-1;f>=0;f--){var h=c[f],d=l[u+f];if(d!==h){var p=h.parentNode.childNodes;return p.indexOf(h)<p.indexOf(d)?c===o?n.DOCUMENT_POSITION_PRECEDING:n.DOCUMENT_POSITION_FOLLOWING:l===o?n.DOCUMENT_POSITION_PRECEDING:n.DOCUMENT_POSITION_FOLLOWING}}return n.DOCUMENT_POSITION_FOLLOWING},n.prototype.contain=function(e){return this.contains(e)},n.prototype.contains=function(e){for(var r=e;r&&this!==r;)r=r.parentNode;return!!r},n.prototype.getAncestor=function(e){for(var r=this;e>0&&r;)r=r.parentNode,e--;return r},n.prototype.forEach=function(e,r){r===void 0&&(r=!1),e(this)||(r?this.childNodes.slice():this.childNodes).forEach(function(i){i.forEach(e)})},n.DOCUMENT_POSITION_DISCONNECTED=1,n.DOCUMENT_POSITION_PRECEDING=2,n.DOCUMENT_POSITION_FOLLOWING=4,n.DOCUMENT_POSITION_CONTAINS=8,n.DOCUMENT_POSITION_CONTAINED_BY=16,n.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC=32,n}(i6),DSt=2048,RSt=function(){function t(n,e){var r=this;this.globalRuntime=n,this.context=e,this.emitter=new NM,this.cursor="default",this.mappingTable={},this.mappingState={trackingData:{}},this.eventPool=new Map,this.tmpMatrix=pe(),this.tmpVec3=$t(),this.onPointerDown=function(i){var a=r.createPointerEvent(i);if(r.dispatchEvent(a,"pointerdown"),a.pointerType==="touch")r.dispatchEvent(a,"touchstart");else if(a.pointerType==="mouse"||a.pointerType==="pen"){var o=a.button===2;r.dispatchEvent(a,o?"rightdown":"mousedown")}var s=r.trackingData(i.pointerId);s.pressTargetsByButton[i.button]=a.composedPath(),r.freeEvent(a)},this.onPointerUp=function(i){var a,o=Gw.now(),s=r.createPointerEvent(i,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0);if(r.dispatchEvent(s,"pointerup"),s.pointerType==="touch")r.dispatchEvent(s,"touchend");else if(s.pointerType==="mouse"||s.pointerType==="pen"){var l=s.button===2;r.dispatchEvent(s,l?"rightup":"mouseup")}var c=r.trackingData(i.pointerId),u=r.findMountedTarget(c.pressTargetsByButton[i.button]),f=u;if(u&&!s.composedPath().includes(u)){for(var h=u;h&&!s.composedPath().includes(h);){if(s.currentTarget=h,r.notifyTarget(s,"pointerupoutside"),s.pointerType==="touch")r.notifyTarget(s,"touchendoutside");else if(s.pointerType==="mouse"||s.pointerType==="pen"){var l=s.button===2;r.notifyTarget(s,l?"rightupoutside":"mouseupoutside")}Sn.isNode(h)&&(h=h.parentNode)}delete c.pressTargetsByButton[i.button],f=h}if(f){var d=r.clonePointerEvent(s,"click");d.target=f,d.path=[],c.clicksByButton[i.button]||(c.clicksByButton[i.button]={clickCount:0,target:d.target,timeStamp:o});var p=c.clicksByButton[i.button];p.target===d.target&&o-p.timeStamp<200?++p.clickCount:p.clickCount=1,p.target=d.target,p.timeStamp=o,d.detail=p.clickCount,!((a=s.detail)===null||a===void 0)&&a.preventClick||(!r.context.config.useNativeClickEvent&&(d.pointerType==="mouse"||d.pointerType==="touch")&&r.dispatchEvent(d,"click"),r.dispatchEvent(d,"pointertap")),r.freeEvent(d)}r.freeEvent(s)},this.onPointerMove=function(i){var a=r.createPointerEvent(i,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0),o=a.pointerType==="mouse"||a.pointerType==="pen",s=r.trackingData(i.pointerId),l=r.findMountedTarget(s.overTargets);if(s.overTargets&&l!==a.target){var c=i.type==="mousemove"?"mouseout":"pointerout",u=r.createPointerEvent(i,c,l||void 0);if(r.dispatchEvent(u,"pointerout"),o&&r.dispatchEvent(u,"mouseout"),!a.composedPath().includes(l)){var f=r.createPointerEvent(i,"pointerleave",l||void 0);for(f.eventPhase=f.AT_TARGET;f.target&&!a.composedPath().includes(f.target);)f.currentTarget=f.target,r.notifyTarget(f),o&&r.notifyTarget(f,"mouseleave"),Sn.isNode(f.target)&&(f.target=f.target.parentNode);r.freeEvent(f)}r.freeEvent(u)}if(l!==a.target){var h=i.type==="mousemove"?"mouseover":"pointerover",d=r.clonePointerEvent(a,h);r.dispatchEvent(d,"pointerover"),o&&r.dispatchEvent(d,"mouseover");for(var p=l&&Sn.isNode(l)&&l.parentNode;p&&p!==(Sn.isNode(r.rootTarget)&&r.rootTarget.parentNode)&&p!==a.target;)p=p.parentNode;var v=!p||p===(Sn.isNode(r.rootTarget)&&r.rootTarget.parentNode);if(v){var g=r.clonePointerEvent(a,"pointerenter");for(g.eventPhase=g.AT_TARGET;g.target&&g.target!==l&&g.target!==(Sn.isNode(r.rootTarget)&&r.rootTarget.parentNode);)g.currentTarget=g.target,r.notifyTarget(g),o&&r.notifyTarget(g,"mouseenter"),Sn.isNode(g.target)&&(g.target=g.target.parentNode);r.freeEvent(g)}r.freeEvent(d)}r.dispatchEvent(a,"pointermove"),a.pointerType==="touch"&&r.dispatchEvent(a,"touchmove"),o&&(r.dispatchEvent(a,"mousemove"),r.cursor=r.getCursor(a.target)),s.overTargets=a.composedPath(),r.freeEvent(a)},this.onPointerOut=function(i){var a=r.trackingData(i.pointerId);if(a.overTargets){var o=i.pointerType==="mouse"||i.pointerType==="pen",s=r.findMountedTarget(a.overTargets),l=r.createPointerEvent(i,"pointerout",s||void 0);r.dispatchEvent(l),o&&r.dispatchEvent(l,"mouseout");var c=r.createPointerEvent(i,"pointerleave",s||void 0);for(c.eventPhase=c.AT_TARGET;c.target&&c.target!==(Sn.isNode(r.rootTarget)&&r.rootTarget.parentNode);)c.currentTarget=c.target,r.notifyTarget(c),o&&r.notifyTarget(c,"mouseleave"),Sn.isNode(c.target)&&(c.target=c.target.parentNode);a.overTargets=null,r.freeEvent(l),r.freeEvent(c)}r.cursor=null},this.onPointerOver=function(i){var a=r.trackingData(i.pointerId),o=r.createPointerEvent(i),s=o.pointerType==="mouse"||o.pointerType==="pen";r.dispatchEvent(o,"pointerover"),s&&r.dispatchEvent(o,"mouseover"),o.pointerType==="mouse"&&(r.cursor=r.getCursor(o.target));var l=r.clonePointerEvent(o,"pointerenter");for(l.eventPhase=l.AT_TARGET;l.target&&l.target!==(Sn.isNode(r.rootTarget)&&r.rootTarget.parentNode);)l.currentTarget=l.target,r.notifyTarget(l),s&&r.notifyTarget(l,"mouseenter"),Sn.isNode(l.target)&&(l.target=l.target.parentNode);a.overTargets=o.composedPath(),r.freeEvent(o),r.freeEvent(l)},this.onPointerUpOutside=function(i){var a=r.trackingData(i.pointerId),o=r.findMountedTarget(a.pressTargetsByButton[i.button]),s=r.createPointerEvent(i);if(o){for(var l=o;l;)s.currentTarget=l,r.notifyTarget(s,"pointerupoutside"),s.pointerType==="touch"||(s.pointerType==="mouse"||s.pointerType==="pen")&&r.notifyTarget(s,s.button===2?"rightupoutside":"mouseupoutside"),Sn.isNode(l)&&(l=l.parentNode);delete a.pressTargetsByButton[i.button]}r.freeEvent(s)},this.onWheel=function(i){var a=r.createWheelEvent(i);r.dispatchEvent(a),r.freeEvent(a)},this.onClick=function(i){if(r.context.config.useNativeClickEvent){var a=r.createPointerEvent(i);r.dispatchEvent(a),r.freeEvent(a)}},this.onPointerCancel=function(i){var a=r.createPointerEvent(i,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0);r.dispatchEvent(a),r.freeEvent(a)}}return t.prototype.init=function(){this.rootTarget=this.context.renderingContext.root.parentNode,this.addEventMapping("pointerdown",this.onPointerDown),this.addEventMapping("pointerup",this.onPointerUp),this.addEventMapping("pointermove",this.onPointerMove),this.addEventMapping("pointerout",this.onPointerOut),this.addEventMapping("pointerleave",this.onPointerOut),this.addEventMapping("pointercancel",this.onPointerCancel),this.addEventMapping("pointerover",this.onPointerOver),this.addEventMapping("pointerupoutside",this.onPointerUpOutside),this.addEventMapping("wheel",this.onWheel),this.addEventMapping("click",this.onClick)},t.prototype.destroy=function(){this.emitter.removeAllListeners(),this.mappingTable={},this.mappingState={},this.eventPool.clear()},t.prototype.client2Viewport=function(n){var e=this.context.contextService.getBoundingClientRect();return new kn(n.x-((e==null?void 0:e.left)||0),n.y-((e==null?void 0:e.top)||0))},t.prototype.viewport2Client=function(n){var e=this.context.contextService.getBoundingClientRect();return new kn(n.x+((e==null?void 0:e.left)||0),n.y+((e==null?void 0:e.top)||0))},t.prototype.viewport2Canvas=function(n){var e=n.x,r=n.y,i=this.rootTarget.defaultView,a=i.getCamera(),o=this.context.config,s=o.width,l=o.height,c=a.getPerspectiveInverse(),u=a.getWorldTransform(),f=Vn(this.tmpMatrix,u,c),h=Pi(this.tmpVec3,e/s*2-1,(1-r/l)*2-1,0);return vn(h,h,f),new kn(h[0],h[1])},t.prototype.canvas2Viewport=function(n){var e=this.rootTarget.defaultView,r=e.getCamera(),i=r.getPerspective(),a=r.getViewTransform(),o=Vn(this.tmpMatrix,i,a),s=Pi(this.tmpVec3,n.x,n.y,0);vn(this.tmpVec3,this.tmpVec3,o);var l=this.context.config,c=l.width,u=l.height;return new kn((s[0]+1)/2*c,(1-(s[1]+1)/2)*u)},t.prototype.setPickHandler=function(n){this.pickHandler=n},t.prototype.addEventMapping=function(n,e){this.mappingTable[n]||(this.mappingTable[n]=[]),this.mappingTable[n].push({fn:e,priority:0}),this.mappingTable[n].sort(function(r,i){return r.priority-i.priority})},t.prototype.mapEvent=function(n){if(this.rootTarget){var e=this.mappingTable[n.type];if(e)for(var r=0,i=e.length;r<i;r++)e[r].fn(n);else console.warn("[EventService]: Event mapping not defined for ".concat(n.type))}},t.prototype.dispatchEvent=function(n,e,r){if(!r)n.propagationStopped=!1,n.propagationImmediatelyStopped=!1,this.propagate(n,e);else{n.eventPhase=n.AT_TARGET;var i=this.rootTarget.defaultView||null;n.currentTarget=i,this.notifyListeners(n,e)}this.emitter.emit(e||n.type,n)},t.prototype.propagate=function(n,e){if(n.target){var r=n.composedPath();n.eventPhase=n.CAPTURING_PHASE;for(var i=r.length-1;i>=1;i--)if(n.currentTarget=r[i],this.notifyTarget(n,e),n.propagationStopped||n.propagationImmediatelyStopped)return;if(n.eventPhase=n.AT_TARGET,n.currentTarget=n.target,this.notifyTarget(n,e),!(n.propagationStopped||n.propagationImmediatelyStopped)){var a=r.indexOf(n.currentTarget);n.eventPhase=n.BUBBLING_PHASE;for(var i=a+1;i<r.length;i++)if(n.currentTarget=r[i],this.notifyTarget(n,e),n.propagationStopped||n.propagationImmediatelyStopped)return}}},t.prototype.propagationPath=function(n){var e=[n],r=this.rootTarget.defaultView||null;if(r&&r===n)return e.unshift(r.document),e;for(var i=0;i<DSt&&n!==this.rootTarget;i++)Sn.isNode(n)&&n.parentNode&&(e.push(n.parentNode),n=n.parentNode);return r&&e.push(r),e},t.prototype.hitTest=function(n){var e=n.viewportX,r=n.viewportY,i=this.context.config,a=i.width,o=i.height,s=i.disableHitTesting;return e<0||r<0||e>a||r>o?null:!s&&this.pickHandler(n)||this.rootTarget||null},t.prototype.isNativeEventFromCanvas=function(n){var e,r=this.context.contextService.getDomElement(),i=(e=n.nativeEvent)===null||e===void 0?void 0:e.target;if(i){if(i===r)return!0;if(r&&r.contains)return r.contains(i)}return n.nativeEvent.composedPath?n.nativeEvent.composedPath().indexOf(r)>-1:!1},t.prototype.getExistedHTML=function(n){var e,r;if(n.nativeEvent.composedPath)try{for(var i=Ct(n.nativeEvent.composedPath()),a=i.next();!a.done;a=i.next()){var o=a.value,s=this.globalRuntime.nativeHTMLMap.get(o);if(s)return s}}catch(l){e={error:l}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return null},t.prototype.pickTarget=function(n){return this.hitTest({clientX:n.clientX,clientY:n.clientY,viewportX:n.viewportX,viewportY:n.viewportY,x:n.canvasX,y:n.canvasY})},t.prototype.createPointerEvent=function(n,e,r,i){var a=this.allocateEvent(Yw);this.copyPointerData(n,a),this.copyMouseData(n,a),this.copyData(n,a),a.nativeEvent=n.nativeEvent,a.originalEvent=n;var o=this.getExistedHTML(a);return a.target=r??(o||this.isNativeEventFromCanvas(a)&&this.pickTarget(a)||i),typeof e=="string"&&(a.type=e),a},t.prototype.createWheelEvent=function(n){var e=this.allocateEvent(Ww);this.copyWheelData(n,e),this.copyMouseData(n,e),this.copyData(n,e),e.nativeEvent=n.nativeEvent,e.originalEvent=n;var r=this.getExistedHTML(e);return e.target=r||this.isNativeEventFromCanvas(e)&&this.pickTarget(e),e},t.prototype.trackingData=function(n){return this.mappingState.trackingData[n]||(this.mappingState.trackingData[n]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[n]},t.prototype.cloneWheelEvent=function(n){var e=this.allocateEvent(Ww);return e.nativeEvent=n.nativeEvent,e.originalEvent=n.originalEvent,this.copyWheelData(n,e),this.copyMouseData(n,e),this.copyData(n,e),e.target=n.target,e.path=n.composedPath().slice(),e.type=n.type,e},t.prototype.clonePointerEvent=function(n,e){var r=this.allocateEvent(Yw);return r.nativeEvent=n.nativeEvent,r.originalEvent=n.originalEvent,this.copyPointerData(n,r),this.copyMouseData(n,r),this.copyData(n,r),r.target=n.target,r.path=n.composedPath().slice(),r.type=e??r.type,r},t.prototype.copyPointerData=function(n,e){e.pointerId=n.pointerId,e.width=n.width,e.height=n.height,e.isPrimary=n.isPrimary,e.pointerType=n.pointerType,e.pressure=n.pressure,e.tangentialPressure=n.tangentialPressure,e.tiltX=n.tiltX,e.tiltY=n.tiltY,e.twist=n.twist},t.prototype.copyMouseData=function(n,e){e.altKey=n.altKey,e.button=n.button,e.buttons=n.buttons,e.ctrlKey=n.ctrlKey,e.metaKey=n.metaKey,e.shiftKey=n.shiftKey,e.client.copyFrom(n.client),e.movement.copyFrom(n.movement),e.canvas.copyFrom(n.canvas),e.screen.copyFrom(n.screen),e.global.copyFrom(n.global),e.offset.copyFrom(n.offset)},t.prototype.copyWheelData=function(n,e){e.deltaMode=n.deltaMode,e.deltaX=n.deltaX,e.deltaY=n.deltaY,e.deltaZ=n.deltaZ},t.prototype.copyData=function(n,e){e.isTrusted=n.isTrusted,e.timeStamp=Gw.now(),e.type=n.type,e.detail=n.detail,e.view=n.view,e.page.copyFrom(n.page),e.viewport.copyFrom(n.viewport)},t.prototype.allocateEvent=function(n){this.eventPool.has(n)||this.eventPool.set(n,[]);var e=this.eventPool.get(n).pop()||new n(this);return e.eventPhase=e.NONE,e.currentTarget=null,e.path=[],e.target=null,e},t.prototype.freeEvent=function(n){if(n.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");var e=n.constructor;this.eventPool.has(e)||this.eventPool.set(e,[]),this.eventPool.get(e).push(n)},t.prototype.notifyTarget=function(n,e){e=e??n.type;var r=n.eventPhase===n.CAPTURING_PHASE||n.eventPhase===n.AT_TARGET?"".concat(e,"capture"):e;this.notifyListeners(n,r),n.eventPhase===n.AT_TARGET&&this.notifyListeners(n,e)},t.prototype.notifyListeners=function(n,e){var r=n.currentTarget.emitter,i=r._events[e];if(i)if("fn"in i)i.once&&r.removeListener(e,i.fn,void 0,!0),i.fn.call(n.currentTarget||i.context,n);else for(var a=0;a<i.length&&!n.propagationImmediatelyStopped;a++)i[a].once&&r.removeListener(e,i[a].fn,void 0,!0),i[a].fn.call(n.currentTarget||i[a].context,n)},t.prototype.findMountedTarget=function(n){if(!n)return null;for(var e=n[n.length-1],r=n.length-2;r>=0;r--){var i=n[r];if(i===this.rootTarget||Sn.isNode(i)&&i.parentNode===e)e=n[r];else break}return e},t.prototype.getCursor=function(n){for(var e=n;e;){var r=rSt(e)&&e.getAttribute("cursor");if(r)return r;e=Sn.isNode(e)&&e.parentNode}},t}(),BSt=function(){function t(){}return t.prototype.getOrCreateCanvas=function(n,e){if(this.canvas)return this.canvas;if(n||tt.offscreenCanvas)this.canvas=n||tt.offscreenCanvas,this.context=this.canvas.getContext("2d",E({willReadFrequently:!0},e));else try{this.canvas=new window.OffscreenCanvas(0,0),this.context=this.canvas.getContext("2d",E({willReadFrequently:!0},e)),(!this.context||!this.context.measureText)&&(this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"))}catch{this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d",E({willReadFrequently:!0},e))}return this.canvas.width=10,this.canvas.height=10,this.canvas},t.prototype.getOrCreateContext=function(n,e){return this.context?this.context:(this.getOrCreateCanvas(n,e),this.context)},t}(),Wo;(function(t){t[t.CAMERA_CHANGED=0]="CAMERA_CHANGED",t[t.DISPLAY_OBJECT_CHANGED=1]="DISPLAY_OBJECT_CHANGED",t[t.NONE=2]="NONE"})(Wo||(Wo={}));var NSt=function(){function t(n,e){this.globalRuntime=n,this.context=e,this.inited=!1,this.stats={total:0,rendered:0},this.zIndexCounter=0,this.hooks={init:new Jn,initAsync:new xSt,dirtycheck:new px,cull:new px,beginFrame:new Jn,beforeRender:new Jn,render:new Jn,afterRender:new Jn,endFrame:new Jn,destroy:new Jn,pick:new bSt,pickSync:new px,pointerDown:new Jn,pointerUp:new Jn,pointerMove:new Jn,pointerOut:new Jn,pointerOver:new Jn,pointerWheel:new Jn,pointerCancel:new Jn,click:new Jn}}return t.prototype.init=function(n){var e=this,r=E(E({},this.globalRuntime),this.context);this.context.renderingPlugins.forEach(function(i){i.apply(r,e.globalRuntime)}),this.hooks.init.call(),this.hooks.initAsync.getCallbacksNum()===0?(this.inited=!0,n()):this.hooks.initAsync.promise().then(function(){e.inited=!0,n()})},t.prototype.getStats=function(){return this.stats},t.prototype.disableDirtyRectangleRendering=function(){var n=this.context.config.renderer,e=n.getConfig().enableDirtyRectangleRendering;return!e||this.context.renderingContext.renderReasons.has(Wo.CAMERA_CHANGED)},t.prototype.render=function(n,e){var r=this;this.stats.total=0,this.stats.rendered=0,this.zIndexCounter=0;var i=this.context.renderingContext;if(this.globalRuntime.sceneGraphService.syncHierarchy(i.root),this.globalRuntime.sceneGraphService.triggerPendingEvents(),i.renderReasons.size&&this.inited){i.dirtyRectangleRenderingDisabled=this.disableDirtyRectangleRendering();var a=i.renderReasons.size===1&&i.renderReasons.has(Wo.CAMERA_CHANGED),o=!n.disableRenderHooks||!(n.disableRenderHooks&&a);o&&this.renderDisplayObject(i.root,n,i),this.hooks.beginFrame.call(),o&&i.renderListCurrentFrame.forEach(function(s){r.hooks.beforeRender.call(s),r.hooks.render.call(s),r.hooks.afterRender.call(s)}),this.hooks.endFrame.call(),i.renderListCurrentFrame=[],i.renderReasons.clear(),e()}},t.prototype.renderDisplayObject=function(n,e,r){var i=this,a=e.renderer.getConfig(),o=a.enableDirtyCheck,s=a.enableCulling;this.globalRuntime.enableCSSParsing&&this.globalRuntime.styleValueRegistry.recalc(n);var l=n.renderable,c=o?l.dirty||r.dirtyRectangleRenderingDisabled?n:null:n;if(c){var u=s?this.hooks.cull.call(c,this.context.camera):c;u&&(this.stats.rendered++,r.renderListCurrentFrame.push(u))}n.renderable.dirty=!1,n.sortable.renderOrder=this.zIndexCounter++,this.stats.total++;var f=n.sortable;f.dirty&&(this.sort(n,f),f.dirty=!1,f.dirtyChildren=[],f.dirtyReason=void 0),(f.sorted||n.childNodes).forEach(function(h){i.renderDisplayObject(h,e,r)})},t.prototype.sort=function(n,e){e.sorted&&e.dirtyReason!==su.Z_INDEX_CHANGED?e.dirtyChildren.forEach(function(r){var i=n.childNodes.indexOf(r);if(i===-1){var a=e.sorted.indexOf(r);a>=0&&e.sorted.splice(a,1)}else if(e.sorted.length===0)e.sorted.push(r);else{var o=iSt(e.sorted,r);e.sorted.splice(o,0,r)}}):e.sorted=n.childNodes.slice().sort(Zz)},t.prototype.destroy=function(){this.inited=!1,this.hooks.destroy.call(),this.globalRuntime.sceneGraphService.clearPendingEvents()},t.prototype.dirtify=function(){this.context.renderingContext.renderReasons.add(Wo.DISPLAY_OBJECT_CHANGED)},t}(),$St=/\[\s*(.*)=(.*)\s*\]/,jSt=function(){function t(){}return t.prototype.selectOne=function(n,e){var r=this;if(n.startsWith("."))return e.find(function(s){return((s==null?void 0:s.classList)||[]).indexOf(r.getIdOrClassname(n))>-1});if(n.startsWith("#"))return e.find(function(s){return s.id===r.getIdOrClassname(n)});if(n.startsWith("[")){var i=this.getAttribute(n),a=i.name,o=i.value;return a?e.find(function(s){return e!==s&&(a==="name"?s.name===o:r.attributeToString(s,a)===o)}):null}else return e.find(function(s){return e!==s&&s.nodeName===n})},t.prototype.selectAll=function(n,e){var r=this;if(n.startsWith("."))return e.findAll(function(s){return e!==s&&((s==null?void 0:s.classList)||[]).indexOf(r.getIdOrClassname(n))>-1});if(n.startsWith("#"))return e.findAll(function(s){return e!==s&&s.id===r.getIdOrClassname(n)});if(n.startsWith("[")){var i=this.getAttribute(n),a=i.name,o=i.value;return a?e.findAll(function(s){return e!==s&&(a==="name"?s.name===o:r.attributeToString(s,a)===o)}):[]}else return e.findAll(function(s){return e!==s&&s.nodeName===n})},t.prototype.is=function(n,e){if(n.startsWith("."))return e.className===this.getIdOrClassname(n);if(n.startsWith("#"))return e.id===this.getIdOrClassname(n);if(n.startsWith("[")){var r=this.getAttribute(n),i=r.name,a=r.value;return i==="name"?e.name===a:this.attributeToString(e,i)===a}else return e.nodeName===n},t.prototype.getIdOrClassname=function(n){return n.substring(1)},t.prototype.getAttribute=function(n){var e=n.match($St),r="",i="";return e&&e.length>2&&(r=e[1].replace(/"/g,""),i=e[2].replace(/"/g,"")),{name:r,value:i}},t.prototype.attributeToString=function(n,e){if(!n.getAttribute)return"";var r=n.getAttribute(e);return Pt(r)?"":r.toString?r.toString():""},t}(),Sl=function(t){G(n,t);function n(e,r,i,a,o,s,l,c){var u=t.call(this,null)||this;return u.relatedNode=r,u.prevValue=i,u.newValue=a,u.attrName=o,u.attrChange=s,u.prevParsedValue=l,u.newParsedValue=c,u.type=e,u}return n.ADDITION=2,n.MODIFICATION=1,n.REMOVAL=3,n}(Om),Dt;(function(t){t.REPARENT="reparent",t.DESTROY="destroy",t.ATTR_MODIFIED="DOMAttrModified",t.INSERTED="DOMNodeInserted",t.REMOVED="removed",t.MOUNTED="DOMNodeInsertedIntoDocument",t.UNMOUNTED="DOMNodeRemovedFromDocument",t.BOUNDS_CHANGED="bounds-changed",t.CULLED="culled"})(Dt||(Dt={}));function $_(t){var n=t.renderable;n&&(n.renderBoundsDirty=!0,n.boundsDirty=!0)}var zSt=new Sl(Dt.REPARENT,null,"","","",0,"",""),GSt=function(){function t(n){var e=this;this.runtime=n,this.pendingEvents=[],this.boundsChangedEvent=new Se(Dt.BOUNDS_CHANGED),this.rotate=function(){var r=on();return function(i,a,o,s){o===void 0&&(o=0),s===void 0&&(s=0),typeof a=="number"&&(a=Ut(a,o,s));var l=i.transformable;if(i.parentNode===null||!i.parentNode.transformable)e.rotateLocal(i,a);else{var c=on();up(c,a[0],a[1],a[2]);var u=e.getRotation(i),f=e.getRotation(i.parentNode);fp(r,f),u1(r,r),Bo(c,r,c),Bo(l.localRotation,c,u),dg(l.localRotation,l.localRotation),e.dirtifyLocal(i,l)}}}(),this.rotateLocal=function(){var r=on();return function(i,a,o,s){o===void 0&&(o=0),s===void 0&&(s=0),typeof a=="number"&&(a=Ut(a,o,s));var l=i.transformable;up(r,a[0],a[1],a[2]),uT(l.localRotation,l.localRotation,r),e.dirtifyLocal(i,l)}}(),this.setEulerAngles=function(){var r=on();return function(i,a,o,s){o===void 0&&(o=0),s===void 0&&(s=0),typeof a=="number"&&(a=Ut(a,o,s));var l=i.transformable;if(i.parentNode===null||!i.parentNode.transformable)e.setLocalEulerAngles(i,a);else{up(l.localRotation,a[0],a[1],a[2]);var c=e.getRotation(i.parentNode);fp(r,u1(on(),c)),uT(l.localRotation,l.localRotation,r),e.dirtifyLocal(i,l)}}}(),this.translateLocal=function(){return function(r,i,a,o){a===void 0&&(a=0),o===void 0&&(o=0),typeof i=="number"&&(i=Ut(i,a,o));var s=r.transformable;qu(i,$t())||(MU(i,i,s.localRotation),bc(s.localPosition,s.localPosition,i),e.dirtifyLocal(r,s))}}(),this.setPosition=function(){var r=pe(),i=$t();return function(a,o){var s=a.transformable;if(i[0]=o[0],i[1]=o[1],i[2]=o[2]||0,!qu(e.getPosition(a),i)){if(br(s.position,i),a.parentNode===null||!a.parentNode.transformable)br(s.localPosition,i);else{var l=a.parentNode.transformable;al(r,l.worldTransform),_i(r,r),vn(s.localPosition,i,r)}e.dirtifyLocal(a,s)}}}(),this.setLocalPosition=function(){var r=$t();return function(i,a){var o=i.transformable;r[0]=a[0],r[1]=a[1],r[2]=a[2]||0,!qu(o.localPosition,r)&&(br(o.localPosition,r),e.dirtifyLocal(i,o))}}(),this.translate=function(){var r=$t(),i=$t(),a=$t();return function(o,s,l,c){l===void 0&&(l=0),c===void 0&&(c=0),typeof s=="number"&&(s=Pi(i,s,l,c)),!qu(s,r)&&(bc(a,e.getPosition(o),s),e.setPosition(o,a))}}(),this.setRotation=function(){var r=on();return function(i,a,o,s,l){var c=i.transformable;if(typeof a=="number"&&(a=f1(a,o,s,l)),i.parentNode===null||!i.parentNode.transformable)e.setLocalRotation(i,a);else{var u=e.getRotation(i.parentNode);fp(r,u),u1(r,r),Bo(c.localRotation,r,a),dg(c.localRotation,c.localRotation),e.dirtifyLocal(i,c)}}},this.displayObjectDependencyMap=new WeakMap,this.calcLocalTransform=function(){var r=pe(),i=$t(),a=f1(0,0,0,1);return function(o){var s=o.localSkew[0]!==0||o.localSkew[1]!==0;if(s){if(Nf(o.localTransform,o.localRotation,o.localPosition,Ut(1,1,1),o.origin),o.localSkew[0]!==0||o.localSkew[1]!==0){var l=gd(r);l[4]=Math.tan(o.localSkew[0]),l[1]=Math.tan(o.localSkew[1]),Vn(o.localTransform,o.localTransform,l)}var c=Nf(r,a,i,o.localScale,o.origin);Vn(o.localTransform,o.localTransform,c)}else Nf(o.localTransform,o.localRotation,o.localPosition,o.localScale,o.origin)}}()}return t.prototype.matches=function(n,e){return this.runtime.sceneGraphSelector.is(n,e)},t.prototype.querySelector=function(n,e){return this.runtime.sceneGraphSelector.selectOne(n,e)},t.prototype.querySelectorAll=function(n,e){return this.runtime.sceneGraphSelector.selectAll(n,e)},t.prototype.attach=function(n,e,r){var i,a,o=!1;n.parentNode&&(o=n.parentNode!==e,this.detach(n)),n.parentNode=e,Pt(r)?n.parentNode.childNodes.push(n):n.parentNode.childNodes.splice(r,0,n);var s=e.sortable;(!((i=s==null?void 0:s.sorted)===null||i===void 0)&&i.length||!((a=n.style)===null||a===void 0)&&a.zIndex)&&(s.dirtyChildren.indexOf(n)===-1&&s.dirtyChildren.push(n),s.dirty=!0,s.dirtyReason=su.ADDED);var l=n.transformable;l&&this.dirtifyWorld(n,l),l.frozen&&this.unfreezeParentToRoot(n),o&&n.dispatchEvent(zSt)},t.prototype.detach=function(n){var e,r;if(n.parentNode){var i=n.transformable,a=n.parentNode.sortable;(!((e=a==null?void 0:a.sorted)===null||e===void 0)&&e.length||!((r=n.style)===null||r===void 0)&&r.zIndex)&&(a.dirtyChildren.indexOf(n)===-1&&a.dirtyChildren.push(n),a.dirty=!0,a.dirtyReason=su.REMOVED);var o=n.parentNode.childNodes.indexOf(n);o>-1&&n.parentNode.childNodes.splice(o,1),i&&this.dirtifyWorld(n,i),n.parentNode=null}},t.prototype.getOrigin=function(n){return n.transformable.origin},t.prototype.setOrigin=function(n,e,r,i){r===void 0&&(r=0),i===void 0&&(i=0),typeof e=="number"&&(e=[e,r,i]);var a=n.transformable;if(!(e[0]===a.origin[0]&&e[1]===a.origin[1]&&e[2]===a.origin[2])){var o=a.origin;o[0]=e[0],o[1]=e[1],o[2]=e[2]||0,this.dirtifyLocal(n,a)}},t.prototype.setLocalEulerAngles=function(n,e,r,i){r===void 0&&(r=0),i===void 0&&(i=0),typeof e=="number"&&(e=Ut(e,r,i));var a=n.transformable;up(a.localRotation,e[0],e[1],e[2]),this.dirtifyLocal(n,a)},t.prototype.scaleLocal=function(n,e){var r=n.transformable;SU(r.localScale,r.localScale,Ut(e[0],e[1],e[2]||1)),this.dirtifyLocal(n,r)},t.prototype.setLocalScale=function(n,e){var r=n.transformable,i=Ut(e[0],e[1],e[2]||r.localScale[2]);qu(i,r.localScale)||(br(r.localScale,i),this.dirtifyLocal(n,r))},t.prototype.setLocalRotation=function(n,e,r,i,a){typeof e=="number"&&(e=f1(e,r,i,a));var o=n.transformable;fp(o.localRotation,e),this.dirtifyLocal(n,o)},t.prototype.setLocalSkew=function(n,e,r){typeof e=="number"&&(e=kU(e,r));var i=n.transformable;_U(i.localSkew,e),this.dirtifyLocal(n,i)},t.prototype.dirtifyLocal=function(n,e){e.localDirtyFlag||(e.localDirtyFlag=!0,e.dirtyFlag||this.dirtifyWorld(n,e))},t.prototype.dirtifyWorld=function(n,e){e.dirtyFlag||this.unfreezeParentToRoot(n),this.dirtifyWorldInternal(n,e),this.dirtifyToRoot(n,!0)},t.prototype.triggerPendingEvents=function(){var n=this,e=new Set,r=function(i,a){i.isConnected&&!e.has(i.entity)&&(n.boundsChangedEvent.detail=a,n.boundsChangedEvent.target=i,i.isMutationObserved?i.dispatchEvent(n.boundsChangedEvent):i.ownerDocument.defaultView.dispatchEvent(n.boundsChangedEvent,!0),e.add(i.entity))};this.pendingEvents.forEach(function(i){var a=R(i,2),o=a[0],s=a[1];s.affectChildren?o.forEach(function(l){r(l,s)}):r(o,s)}),this.clearPendingEvents(),e.clear()},t.prototype.clearPendingEvents=function(){this.pendingEvents=[]},t.prototype.dirtifyToRoot=function(n,e){e===void 0&&(e=!1);var r=n;for(r.renderable&&(r.renderable.dirty=!0);r;)$_(r),r=r.parentNode;e&&n.forEach(function(i){$_(i)}),this.informDependentDisplayObjects(n),this.pendingEvents.push([n,{affectChildren:e}])},t.prototype.updateDisplayObjectDependency=function(n,e,r,i){if(e&&e!==r){var a=this.displayObjectDependencyMap.get(e);if(a&&a[n]){var o=a[n].indexOf(i);a[n].splice(o,1)}}if(r){var s=this.displayObjectDependencyMap.get(r);s||(this.displayObjectDependencyMap.set(r,{}),s=this.displayObjectDependencyMap.get(r)),s[n]||(s[n]=[]),s[n].push(i)}},t.prototype.informDependentDisplayObjects=function(n){var e=this,r=this.displayObjectDependencyMap.get(n);r&&Object.keys(r).forEach(function(i){r[i].forEach(function(a){e.dirtifyToRoot(a,!0),a.dispatchEvent(new Sl(Dt.ATTR_MODIFIED,a,e,e,i,Sl.MODIFICATION,e,e)),a.isCustomElement&&a.isConnected&&a.attributeChangedCallback&&a.attributeChangedCallback(i,e,e)})})},t.prototype.getPosition=function(n){var e=n.transformable;return fg(e.position,this.getWorldTransform(n,e))},t.prototype.getRotation=function(n){var e=n.transformable;return hg(e.rotation,this.getWorldTransform(n,e))},t.prototype.getScale=function(n){var e=n.transformable;return Bc(e.scaling,this.getWorldTransform(n,e))},t.prototype.getWorldTransform=function(n,e){return e===void 0&&(e=n.transformable),!e.localDirtyFlag&&!e.dirtyFlag||(n.parentNode&&n.parentNode.transformable&&this.getWorldTransform(n.parentNode),this.sync(n,e)),e.worldTransform},t.prototype.getLocalPosition=function(n){return n.transformable.localPosition},t.prototype.getLocalRotation=function(n){return n.transformable.localRotation},t.prototype.getLocalScale=function(n){return n.transformable.localScale},t.prototype.getLocalSkew=function(n){return n.transformable.localSkew},t.prototype.getLocalTransform=function(n){var e=n.transformable;return e.localDirtyFlag&&(this.calcLocalTransform(e),e.localDirtyFlag=!1),e.localTransform},t.prototype.setLocalTransform=function(n,e){var r=fg($t(),e),i=hg(on(),e),a=Bc($t(),e);this.setLocalScale(n,a),this.setLocalPosition(n,r),this.setLocalRotation(n,i)},t.prototype.resetLocalTransform=function(n){this.setLocalScale(n,[1,1,1]),this.setLocalPosition(n,[0,0,0]),this.setLocalEulerAngles(n,[0,0,0]),this.setLocalSkew(n,[0,0])},t.prototype.getTransformedGeometryBounds=function(n,e,r){e===void 0&&(e=!1);var i=this.getGeometryBounds(n,e);if(dn.isEmpty(i))return null;var a=r||new dn;return a.setFromTransformedAABB(i,this.getWorldTransform(n)),a},t.prototype.getGeometryBounds=function(n,e){e===void 0&&(e=!1);var r=n.geometry,i=e?r.renderBounds:r.contentBounds||null;return i||new dn},t.prototype.getBounds=function(n,e){var r=this;e===void 0&&(e=!1);var i=n.renderable;if(!i.boundsDirty&&!e&&i.bounds)return i.bounds;if(!i.renderBoundsDirty&&e&&i.renderBounds)return i.renderBounds;var a=e?i.renderBounds:i.bounds,o=this.getTransformedGeometryBounds(n,e,a),s=n.childNodes;if(s.forEach(function(u){var f=r.getBounds(u,e);f&&(o?o.add(f):(o=a||new dn,o.update(f.center,f.halfExtents)))}),e){var l=Kz(n);if(l){var c=l.parsedStyle.clipPath.getBounds(e);o?c&&(o=c.intersection(o)):o=c}}return o||(o=new dn),o&&(e?i.renderBounds=o:i.bounds=o),e?i.renderBoundsDirty=!1:i.boundsDirty=!1,o},t.prototype.getLocalBounds=function(n){if(n.parentNode){var e=pe();n.parentNode.transformable&&(e=_i(pe(),this.getWorldTransform(n.parentNode)));var r=this.getBounds(n);if(!dn.isEmpty(r)){var i=new dn;return i.setFromTransformedAABB(r,e),i}}return this.getBounds(n)},t.prototype.getBoundingClientRect=function(n){var e,r,i,a=this.getGeometryBounds(n);dn.isEmpty(a)||(i=new dn,i.setFromTransformedAABB(a,this.getWorldTransform(n)));var o=(r=(e=n.ownerDocument)===null||e===void 0?void 0:e.defaultView)===null||r===void 0?void 0:r.getContextService().getBoundingClientRect();if(i){var s=R(i.getMin(),2),l=s[0],c=s[1],u=R(i.getMax(),2),f=u[0],h=u[1];return new bl(l+((o==null?void 0:o.left)||0),c+((o==null?void 0:o.top)||0),f-l,h-c)}return new bl((o==null?void 0:o.left)||0,(o==null?void 0:o.top)||0,0,0)},t.prototype.dirtifyWorldInternal=function(n,e){var r=this;if(!e.dirtyFlag){e.dirtyFlag=!0,e.frozen=!1,n.childNodes.forEach(function(a){var o=a.transformable;o.dirtyFlag||r.dirtifyWorldInternal(a,o)});var i=n.renderable;i&&(i.renderBoundsDirty=!0,i.boundsDirty=!0,i.dirty=!0)}},t.prototype.syncHierarchy=function(n){var e=n.transformable;if(!e.frozen){e.frozen=!0,(e.localDirtyFlag||e.dirtyFlag)&&this.sync(n,e);for(var r=n.childNodes,i=0;i<r.length;i++)this.syncHierarchy(r[i])}},t.prototype.sync=function(n,e){if(e.localDirtyFlag&&(this.calcLocalTransform(e),e.localDirtyFlag=!1),e.dirtyFlag){var r=n.parentNode,i=r&&r.transformable;r===null||!i?al(e.worldTransform,e.localTransform):Vn(e.worldTransform,i.worldTransform,e.localTransform),e.dirtyFlag=!1}},t.prototype.unfreezeParentToRoot=function(n){for(var e=n.parentNode;e;){var r=e.transformable;r&&(r.frozen=!1),e=e.parentNode}},t}(),Cs={MetricsString:"|ÉqÅ",BaselineSymbol:"M",BaselineMultiplier:1.4,HeightMultiplier:2,Newlines:[10,13],BreakingSpaces:[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288]},j_=/[a-zA-Z0-9\u00C0-\u00D6\u00D8-\u00f6\u00f8-\u00ff!"#$%&'()*+,-./:;]/,YSt=/[!%),.:;?\]}¢°·'""†‡›℃∶、。〃〆〕〗〞﹚﹜！＂％＇），．：；？！］｝～]/,WSt=/[$(£¥·'"〈《「『【〔〖〝﹙﹛＄（．［｛￡￥]/,VSt=/[!),.:;?\]}¢·–—'"•"、。〆〞〕〉》」︰︱︲︳﹐﹑﹒﹓﹔﹕﹖﹘﹚﹜！），．：；？︶︸︺︼︾﹀﹂﹗］｜｝､]/,HSt=/[([{£¥'"‵〈《「『〔〝︴﹙﹛（｛︵︷︹︻︽︿﹁﹃﹏]/,XSt=/[)\]｝〕〉》」』】〙〗〟'"｠»ヽヾーァィゥェォッャュョヮヵヶぁぃぅぇぉっゃゅょゎゕゖㇰㇱㇲㇳㇴㇵㇶㇷㇸㇹㇺㇻㇼㇽㇾㇿ々〻‐゠–〜?!‼⁇⁈⁉・、:;,。.]/,USt=/[([｛〔〈《「『【〘〖〝'"｟«—...‥〳〴〵]/,qSt=/[!%),.:;?\]}¢°'"†‡℃〆〈《「『〕！％），．：；？］｝]/,ZSt=/[$([{£¥'"々〇〉》」〔＄（［｛｠￥￦#]/,KSt=new RegExp("".concat(YSt.source,"|").concat(VSt.source,"|").concat(XSt.source,"|").concat(qSt.source)),QSt=new RegExp("".concat(WSt.source,"|").concat(HSt.source,"|").concat(USt.source,"|").concat(ZSt.source)),JSt=function(){function t(n){var e=this;this.runtime=n,this.fontMetricsCache={},this.shouldBreakByKinsokuShorui=function(r,i){return e.isBreakingSpace(i)?!1:!!(r&&(QSt.exec(i)||KSt.exec(r)))},this.trimByKinsokuShorui=function(r){var i=X([],R(r),!1),a=i[i.length-2];if(!a)return r;var o=a[a.length-1];return i[i.length-2]=a.slice(0,-1),i[i.length-1]=o+i[i.length-1],i}}return t.prototype.measureFont=function(n,e){if(this.fontMetricsCache[n])return this.fontMetricsCache[n];var r={ascent:0,descent:0,fontSize:0},i=this.runtime.offscreenCanvasCreator.getOrCreateCanvas(e),a=this.runtime.offscreenCanvasCreator.getOrCreateContext(e,{willReadFrequently:!0});a.font=n;var o=Cs.MetricsString+Cs.BaselineSymbol,s=Math.ceil(a.measureText(o).width),l=Math.ceil(a.measureText(Cs.BaselineSymbol).width),c=Cs.HeightMultiplier*l;l=l*Cs.BaselineMultiplier|0,i.width=s,i.height=c,a.fillStyle="#f00",a.fillRect(0,0,s,c),a.font=n,a.textBaseline="alphabetic",a.fillStyle="#000",a.fillText(o,0,l);var u=a.getImageData(0,0,s||1,c||1).data,f=u.length,h=s*4,d=0,p=0,v=!1;for(d=0;d<l;++d){for(var g=0;g<h;g+=4)if(u[p+g]!==255){v=!0;break}if(!v)p+=h;else break}for(r.ascent=l-d,p=f-h,v=!1,d=c;d>l;--d){for(var g=0;g<h;g+=4)if(u[p+g]!==255){v=!0;break}if(!v)p-=h;else break}return r.descent=d-l,r.fontSize=r.ascent+r.descent,this.fontMetricsCache[n]=r,r},t.prototype.measureText=function(n,e,r){var i=e.fontSize,a=e.wordWrap,o=e.lineHeight,s=e.lineWidth,l=e.textBaseline,c=e.textAlign,u=e.letterSpacing,f=e.textPath;e.textPathSide,e.textPathStartOffset;var h=e.leading,d=h===void 0?0:h,p=OSt(e),v=this.measureFont(p,r);v.fontSize===0&&(v.fontSize=i,v.ascent=i);var g=this.runtime.offscreenCanvasCreator.getOrCreateContext(r);g.font=p,e.isOverflowing=!1;var y=a?this.wordWrap(n,e,r):n,m=y.split(/(?:\r\n|\r|\n)/),x=new Array(m.length),b=0;if(f){f.getTotalLength();for(var w=0;w<m.length;w++)var S=g.measureText(m[w]).width+(m[w].length-1)*u}else{for(var w=0;w<m.length;w++){var O=g.measureText(m[w]).width+(m[w].length-1)*u;x[w]=O,b=Math.max(b,O)}var S=b+s,M=o||v.fontSize+s,A=Math.max(M,v.fontSize+s)+(m.length-1)*(M+d);M+=d;var T=0;return l==="middle"?T=-A/2:l==="bottom"||l==="alphabetic"||l==="ideographic"?T=-A:(l==="top"||l==="hanging")&&(T=0),{font:p,width:S,height:A,lines:m,lineWidths:x,lineHeight:M,maxLineWidth:b,fontProperties:v,lineMetrics:x.map(function(P,_){var k=0;return c==="center"||c==="middle"?k-=P/2:(c==="right"||c==="end")&&(k-=P),new bl(k-s/2,T+_*M,P+s,M)})}}},t.prototype.setGraphemeOnPath=function(){},t.prototype.wordWrap=function(n,e,r){var i=this,a=e.wordWrapWidth,o=a===void 0?0:a,s=e.letterSpacing,l=e.maxLines,c=l===void 0?1/0:l,u=e.textOverflow,f=this.runtime.offscreenCanvasCreator.getOrCreateContext(r),h=o+s,d="";u==="ellipsis"?d="...":u&&u!=="clip"&&(d=u);for(var p=[],v=0,g=0,y={},m=function(I){return i.getFromCache(I,s,y,f)},x=Array.from(d).reduce(function(I,L){return I+m(L)},0),b=Array.from(n),w=0;w<b.length;w++){var S=b[w],O=n[w-1],M=n[w+1],A=m(S);if(this.isNewline(S)){if(v++,v>=c){e.isOverflowing=!0;break}g=0,p[v]="";continue}if(g>0&&g+A>h){if(v+1>=c){if(e.isOverflowing=!0,x>0&&x<=h){for(var T=p[v].length,C=0,P=T,_=0;_<T;_++){var k=m(p[v][_]);if(C+k+x>h){P=_;break}C+=k}p[v]=(p[v]||"").slice(0,P)+d}break}if(v++,g=0,p[v]="",this.isBreakingSpace(S))continue;this.canBreakInLastChar(S)||(p=this.trimToBreakable(p),g=this.sumTextWidthByCache(p[v]||"",y)),this.shouldBreakByKinsokuShorui(S,M)&&(p=this.trimByKinsokuShorui(p),g+=m(O||""))}g+=A,p[v]=(p[v]||"")+S}return p.join(`
`)},t.prototype.isBreakingSpace=function(n){return typeof n!="string"?!1:Cs.BreakingSpaces.indexOf(n.charCodeAt(0))>=0},t.prototype.isNewline=function(n){return typeof n!="string"?!1:Cs.Newlines.indexOf(n.charCodeAt(0))>=0},t.prototype.trimToBreakable=function(n){var e=X([],R(n),!1),r=e[e.length-2],i=this.findBreakableIndex(r);if(i===-1||!r)return e;var a=r.slice(i,i+1),o=this.isBreakingSpace(a),s=i+1,l=i+(o?0:1);return e[e.length-1]+=r.slice(s,r.length),e[e.length-2]=r.slice(0,l),e},t.prototype.canBreakInLastChar=function(n){return!(n&&j_.test(n))},t.prototype.sumTextWidthByCache=function(n,e){return n.split("").reduce(function(r,i){if(!e[i])throw Error("cannot count the word without cache");return r+e[i]},0)},t.prototype.findBreakableIndex=function(n){for(var e=n.length-1;e>=0;e--)if(!j_.test(n[e]))return e;return-1},t.prototype.getFromCache=function(n,e,r,i){var a=r[n];if(typeof a!="number"){var o=n.length*e;a=i.measureText(n).width+o,r[n]=a}return a},t}(),tt={},tOt=function(){var t,n=new LSt,e=new _St;return t={},t[K.CIRCLE]=new TSt,t[K.ELLIPSE]=new CSt,t[K.RECT]=n,t[K.IMAGE]=n,t[K.GROUP]=n,t[K.LINE]=new PSt,t[K.TEXT]=new ISt(tt),t[K.POLYLINE]=e,t[K.POLYGON]=e,t[K.PATH]=new kSt,t[K.HTML]=null,t[K.MESH]=null,t}(),eOt=function(){var t,n=new z2t,e=new VM;return t={},t[lt.PERCENTAGE]=null,t[lt.NUMBER]=new X2t,t[lt.ANGLE]=new $2t,t[lt.DEFINED_PATH]=new j2t,t[lt.PAINT]=n,t[lt.COLOR]=n,t[lt.FILTER]=new G2t,t[lt.LENGTH]=e,t[lt.LENGTH_PERCENTAGE]=e,t[lt.LENGTH_PERCENTAGE_12]=new Y2t,t[lt.LENGTH_PERCENTAGE_14]=new W2t,t[lt.COORDINATE]=new V2t,t[lt.OFFSET_DISTANCE]=new U2t,t[lt.OPACITY_VALUE]=new q2t,t[lt.PATH]=new Z2t,t[lt.LIST_OF_POINTS]=new K2t,t[lt.SHADOW_BLUR]=new Q2t,t[lt.TEXT]=new J2t,t[lt.TEXT_TRANSFORM]=new tSt,t[lt.TRANSFORM]=new MSt,t[lt.TRANSFORM_ORIGIN]=new ASt,t[lt.Z_INDEX]=new ESt,t[lt.MARKER]=new H2t,t}(),nOt=function(){return typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}};tt.CameraContribution=Nz;tt.AnimationTimeline=null;tt.EasingFunction=null;tt.offscreenCanvasCreator=new BSt;tt.nativeHTMLMap=new WeakMap;tt.sceneGraphSelector=new jSt;tt.sceneGraphService=new GSt(tt);tt.textService=new JSt(tt);tt.geometryUpdaterFactory=tOt;tt.CSSPropertySyntaxFactory=eOt;tt.styleValueRegistry=new N2t(tt);tt.layoutRegistry=null;tt.globalThis=nOt();tt.enableCSSParsing=!0;tt.enableDataset=!1;tt.enableStyleSyntax=!0;var rOt=0,z_=new Sl(Dt.INSERTED,null,"","","",0,"",""),G_=new Sl(Dt.REMOVED,null,"","","",0,"",""),iOt=new Se(Dt.DESTROY),aOt=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.entity=rOt++,e.renderable={bounds:void 0,boundsDirty:!0,renderBounds:void 0,renderBoundsDirty:!0,dirtyRenderBounds:void 0,dirty:!1},e.cullable={strategy:Bw.Standard,visibilityPlaneMask:-1,visible:!0,enable:!0},e.transformable={dirtyFlag:!1,localDirtyFlag:!1,frozen:!1,localPosition:[0,0,0],localRotation:[0,0,0,1],localScale:[1,1,1],localTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],localSkew:[0,0],position:[0,0,0],rotation:[0,0,0,1],scaling:[1,1,1],worldTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],origin:[0,0,0]},e.sortable={dirty:!1,sorted:void 0,renderOrder:0,dirtyChildren:[],dirtyReason:void 0},e.geometry={contentBounds:void 0,renderBounds:void 0},e.rBushNode={aabb:void 0},e.namespaceURI="g",e.scrollLeft=0,e.scrollTop=0,e.clientTop=0,e.clientLeft=0,e.destroyed=!1,e.style={},e.computedStyle=tt.enableCSSParsing?{anchor:Me,opacity:Me,fillOpacity:Me,strokeOpacity:Me,fill:Me,stroke:Me,transform:Me,transformOrigin:Me,visibility:Me,pointerEvents:Me,lineWidth:Me,lineCap:Me,lineJoin:Me,increasedLineWidthForHitTesting:Me,fontSize:Me,fontFamily:Me,fontStyle:Me,fontWeight:Me,fontVariant:Me,textAlign:Me,textBaseline:Me,textTransform:Me,zIndex:Me,filter:Me,shadowType:Me}:null,e.parsedStyle={},e.attributes={},e}return Object.defineProperty(n.prototype,"className",{get:function(){return this.getAttribute("class")||""},set:function(e){this.setAttribute("class",e)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"classList",{get:function(){return this.className.split(" ").filter(function(e){return e!==""})},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"tagName",{get:function(){return this.nodeName},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"children",{get:function(){return this.childNodes},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"childElementCount",{get:function(){return this.childNodes.length},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"firstElementChild",{get:function(){return this.firstChild},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"lastElementChild",{get:function(){return this.lastChild},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"parentElement",{get:function(){return this.parentNode},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"nextSibling",{get:function(){if(this.parentNode){var e=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[e+1]||null}return null},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"previousSibling",{get:function(){if(this.parentNode){var e=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[e-1]||null}return null},enumerable:!1,configurable:!0}),n.prototype.cloneNode=function(e){throw new Error(ye)},n.prototype.appendChild=function(e,r){var i;if(e.destroyed)throw new Error(Dwt);return tt.sceneGraphService.attach(e,this,r),!((i=this.ownerDocument)===null||i===void 0)&&i.defaultView&&this.ownerDocument.defaultView.mountChildren(e),z_.relatedNode=this,e.dispatchEvent(z_),e},n.prototype.insertBefore=function(e,r){if(!r)this.appendChild(e);else{e.parentElement&&e.parentElement.removeChild(e);var i=this.childNodes.indexOf(r);i===-1?this.appendChild(e):this.appendChild(e,i)}return e},n.prototype.replaceChild=function(e,r){var i=this.childNodes.indexOf(r);return this.removeChild(r),this.appendChild(e,i),r},n.prototype.removeChild=function(e){var r;return G_.relatedNode=this,e.dispatchEvent(G_),!((r=e.ownerDocument)===null||r===void 0)&&r.defaultView&&e.ownerDocument.defaultView.unmountChildren(e),tt.sceneGraphService.detach(e),e},n.prototype.removeChildren=function(){for(var e=this.childNodes.length-1;e>=0;e--){var r=this.childNodes[e];this.removeChild(r)}},n.prototype.destroyChildren=function(){for(var e=this.childNodes.length-1;e>=0;e--){var r=this.childNodes[e];r.childNodes.length&&r.destroyChildren(),r.destroy()}},n.prototype.matches=function(e){return tt.sceneGraphService.matches(e,this)},n.prototype.getElementById=function(e){return tt.sceneGraphService.querySelector("#".concat(e),this)},n.prototype.getElementsByName=function(e){return tt.sceneGraphService.querySelectorAll('[name="'.concat(e,'"]'),this)},n.prototype.getElementsByClassName=function(e){return tt.sceneGraphService.querySelectorAll(".".concat(e),this)},n.prototype.getElementsByTagName=function(e){return tt.sceneGraphService.querySelectorAll(e,this)},n.prototype.querySelector=function(e){return tt.sceneGraphService.querySelector(e,this)},n.prototype.querySelectorAll=function(e){return tt.sceneGraphService.querySelectorAll(e,this)},n.prototype.closest=function(e){var r=this;do{if(tt.sceneGraphService.matches(e,r))return r;r=r.parentElement}while(r!==null);return null},n.prototype.find=function(e){var r=this,i=null;return this.forEach(function(a){return a!==r&&e(a)?(i=a,!0):!1}),i},n.prototype.findAll=function(e){var r=this,i=[];return this.forEach(function(a){a!==r&&e(a)&&i.push(a)}),i},n.prototype.after=function(){for(var e=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(this.parentNode){var a=this.parentNode.childNodes.indexOf(this);r.forEach(function(o,s){var l;return(l=e.parentNode)===null||l===void 0?void 0:l.appendChild(o,a+s+1)})}},n.prototype.before=function(){for(var e,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(this.parentNode){var a=this.parentNode.childNodes.indexOf(this),o=R(r),s=o[0],l=o.slice(1);this.parentNode.appendChild(s,a),(e=s).after.apply(e,X([],R(l),!1))}},n.prototype.replaceWith=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.after.apply(this,X([],R(e),!1)),this.remove()},n.prototype.append=function(){for(var e=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];r.forEach(function(a){return e.appendChild(a)})},n.prototype.prepend=function(){for(var e=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];r.forEach(function(a,o){return e.appendChild(a,o)})},n.prototype.replaceChildren=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];for(;this.childNodes.length&&this.firstChild;)this.removeChild(this.firstChild);this.append.apply(this,X([],R(e),!1))},n.prototype.remove=function(){return this.parentNode?this.parentNode.removeChild(this):this},n.prototype.destroy=function(){this.dispatchEvent(iOt),this.remove(),this.emitter.removeAllListeners(),this.destroyed=!0},n.prototype.getGeometryBounds=function(){return tt.sceneGraphService.getGeometryBounds(this)},n.prototype.getRenderBounds=function(){return tt.sceneGraphService.getBounds(this,!0)},n.prototype.getBounds=function(){return tt.sceneGraphService.getBounds(this)},n.prototype.getLocalBounds=function(){return tt.sceneGraphService.getLocalBounds(this)},n.prototype.getBoundingClientRect=function(){return tt.sceneGraphService.getBoundingClientRect(this)},n.prototype.getClientRects=function(){return[this.getBoundingClientRect()]},n.prototype.computedStyleMap=function(){return new Map(Object.entries(this.computedStyle))},n.prototype.getAttributeNames=function(){return Object.keys(this.attributes)},n.prototype.getAttribute=function(e){if(Wwt(e))return tt.enableCSSParsing?null:void 0;var r=this.attributes[e];if(r===void 0){var i=Iw(e);return r=this.attributes[i],tt.enableCSSParsing&&Pt(r)?null:r}else return r},n.prototype.hasAttribute=function(e){return this.getAttributeNames().includes(e)},n.prototype.hasAttributes=function(){return!!this.getAttributeNames().length},n.prototype.removeAttribute=function(e){this.setAttribute(e,null),delete this.attributes[e]},n.prototype.setAttribute=function(e,r,i){this.attributes[e]=r},n.prototype.getAttributeNS=function(e,r){throw new Error(ye)},n.prototype.getAttributeNode=function(e){throw new Error(ye)},n.prototype.getAttributeNodeNS=function(e,r){throw new Error(ye)},n.prototype.hasAttributeNS=function(e,r){throw new Error(ye)},n.prototype.removeAttributeNS=function(e,r){throw new Error(ye)},n.prototype.removeAttributeNode=function(e){throw new Error(ye)},n.prototype.setAttributeNS=function(e,r,i){throw new Error(ye)},n.prototype.setAttributeNode=function(e){throw new Error(ye)},n.prototype.setAttributeNodeNS=function(e){throw new Error(ye)},n.prototype.toggleAttribute=function(e,r){throw new Error(ye)},n}(Sn);function Zt(t){return!!(t!=null&&t.nodeName)}var Aa=new Sl(Dt.ATTR_MODIFIED,null,null,null,null,Sl.MODIFICATION,null,null),oOt={anchor:"",opacity:"",fillOpacity:"",strokeOpacity:"",fill:"",stroke:"",transform:"",transformOrigin:"",visibility:"",pointerEvents:"",lineWidth:"",lineCap:"",lineJoin:"",increasedLineWidthForHitTesting:"",fontSize:"",fontFamily:"",fontStyle:"",fontWeight:"",fontVariant:"",textAlign:"",textBaseline:"",textTransform:"",zIndex:"",filter:"",shadowType:""},a6={anchor:[0,0],fill:Rw,stroke:Rw,transform:[],zIndex:0,filter:[],shadowType:"outer",miterLimit:10},sOt=E(E({},a6),{opacity:1,fillOpacity:1,strokeOpacity:1,visibility:"visible",pointerEvents:"auto",lineWidth:1,lineCap:"butt",lineJoin:"miter",increasedLineWidthForHitTesting:0,fillRule:"nonzero"}),lOt=["opacity","fillOpacity","strokeOpacity","transformOrigin","visibility","pointerEvents","lineWidth","lineCap","lineJoin","increasedLineWidthForHitTesting"],cOt=X(X([],R(lOt),!1),["fontSize","fontFamily","fontStyle","fontWeight","fontVariant","textAlign","textBaseline","textTransform"],!1),Y_="data-",Kn=function(t){G(n,t);function n(e){var r,i=t.call(this)||this;i.isCustomElement=!1,i.isMutationObserved=!1,i.activeAnimations=[],i.getClip=function(){return this.style.clipPath||null},i.config=e,i.config.interactive=(r=i.config.capture)!==null&&r!==void 0?r:i.config.interactive,i.id=i.config.id||"",i.name=i.config.name||"",(i.config.className||i.config.class)&&(i.className=i.config.className||i.config.class),i.nodeName=i.config.type||K.GROUP,i.config.style=i.config.style||i.config.attrs||{},Object.assign(i.config.style,i.config.attrs),i.config.visible!=null&&(i.config.style.visibility=i.config.visible===!1?"hidden":"visible"),i.config.interactive!=null&&(i.config.style.pointerEvents=i.config.interactive===!1?"none":"auto"),Object.assign(i.parsedStyle,tt.enableCSSParsing?a6:sOt,i.config.initialParsedStyle),tt.enableCSSParsing&&Object.assign(i.attributes,oOt),i.initAttributes(i.config.style);var a=tt.globalThis.Proxy?tt.globalThis.Proxy:function(){};return tt.enableDataset&&(i.dataset=new a({},{get:function(o,s){var l="".concat(Y_).concat(A_(s));return o[l]!==void 0?o[l]:i.getAttribute(l)},set:function(o,s,l){return i.setAttribute("".concat(Y_).concat(A_(s)),l),!0}})),tt.enableStyleSyntax&&(i.style=new a({setProperty:function(o,s){i.setAttribute(o,s)},getPropertyValue:function(o){return i.getAttribute(o)},removeProperty:function(o){i.removeAttribute(o)},item:function(){return""}},{get:function(o,s){return o[s]!==void 0?o[s]:i.getAttribute(s)},set:function(o,s,l){return i.setAttribute(s,l),!0}})),i}return n.prototype.destroy=function(){t.prototype.destroy.call(this),this.getAnimations().forEach(function(e){e.cancel()})},n.prototype.cloneNode=function(e,r){var i=E({},this.attributes);for(var a in i){var o=i[a];Zt(o)&&a!=="clipPath"&&a!=="offsetPath"&&a!=="textPath"&&(i[a]=o.cloneNode(e)),r&&(i[a]=r(a,o))}var s=new this.constructor({id:this.id,name:this.name,className:this.name,interactive:this.interactive,style:i});return s.setLocalTransform(this.getLocalTransform()),e&&this.children.forEach(function(l){if(!l.style.isMarker){var c=l.cloneNode(e);s.appendChild(c)}}),s},n.prototype.initAttributes=function(e){e===void 0&&(e={});var r=this.renderable,i={forceUpdateGeometry:!0};tt.enableCSSParsing&&(i.usedAttributes=cOt);var a={};for(var o in e){var s=Iw(o);a[s]=e[o]}tt.styleValueRegistry.processProperties(this,a,i),r.dirty=!0},n.prototype.setAttribute=function(e,r,i){i===void 0&&(i=!1);var a=Iw(e);We(r)||(i||r!==this.attributes[a])&&(this.internalSetAttribute(a,r),t.prototype.setAttribute.call(this,a,r))},n.prototype.internalSetAttribute=function(e,r,i){var a;i===void 0&&(i={});var o=this.renderable,s=this.attributes[e],l=this.parsedStyle[e];tt.styleValueRegistry.processProperties(this,(a={},a[e]=r,a),i),o.dirty=!0;var c=this.parsedStyle[e];this.isConnected&&(Aa.relatedNode=this,Aa.prevValue=s,Aa.newValue=r,Aa.attrName=e,Aa.prevParsedValue=l,Aa.newParsedValue=c,this.isMutationObserved?this.dispatchEvent(Aa):(Aa.target=this,this.ownerDocument.defaultView.dispatchEvent(Aa,!0))),(this.isCustomElement&&this.isConnected||!this.isCustomElement)&&this.attributeChangedCallback&&this.attributeChangedCallback(e,s,r,l,c)},n.prototype.getBBox=function(){var e=this.getBounds(),r=R(e.getMin(),2),i=r[0],a=r[1],o=R(e.getMax(),2),s=o[0],l=o[1];return new bl(i,a,s-i,l-a)},n.prototype.setOrigin=function(e,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),tt.sceneGraphService.setOrigin(this,tr(e,r,i)),this},n.prototype.getOrigin=function(){return tt.sceneGraphService.getOrigin(this)},n.prototype.setPosition=function(e,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),tt.sceneGraphService.setPosition(this,tr(e,r,i)),this},n.prototype.setLocalPosition=function(e,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),tt.sceneGraphService.setLocalPosition(this,tr(e,r,i)),this},n.prototype.translate=function(e,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),tt.sceneGraphService.translate(this,tr(e,r,i)),this},n.prototype.translateLocal=function(e,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),tt.sceneGraphService.translateLocal(this,tr(e,r,i)),this},n.prototype.getPosition=function(){return tt.sceneGraphService.getPosition(this)},n.prototype.getLocalPosition=function(){return tt.sceneGraphService.getLocalPosition(this)},n.prototype.scale=function(e,r,i){return this.scaleLocal(e,r,i)},n.prototype.scaleLocal=function(e,r,i){return typeof e=="number"&&(r=r||e,i=i||e,e=tr(e,r,i)),tt.sceneGraphService.scaleLocal(this,e),this},n.prototype.setLocalScale=function(e,r,i){return typeof e=="number"&&(r=r||e,i=i||e,e=tr(e,r,i)),tt.sceneGraphService.setLocalScale(this,e),this},n.prototype.getLocalScale=function(){return tt.sceneGraphService.getLocalScale(this)},n.prototype.getScale=function(){return tt.sceneGraphService.getScale(this)},n.prototype.getEulerAngles=function(){var e=R(ox($t(),tt.sceneGraphService.getWorldTransform(this)),3),r=e[2];return ai(r)},n.prototype.getLocalEulerAngles=function(){var e=R(ox($t(),tt.sceneGraphService.getLocalRotation(this)),3),r=e[2];return ai(r)},n.prototype.setEulerAngles=function(e){return tt.sceneGraphService.setEulerAngles(this,0,0,e),this},n.prototype.setLocalEulerAngles=function(e){return tt.sceneGraphService.setLocalEulerAngles(this,0,0,e),this},n.prototype.rotateLocal=function(e,r,i){return Pt(r)&&Pt(i)?tt.sceneGraphService.rotateLocal(this,0,0,e):tt.sceneGraphService.rotateLocal(this,e,r,i),this},n.prototype.rotate=function(e,r,i){return Pt(r)&&Pt(i)?tt.sceneGraphService.rotate(this,0,0,e):tt.sceneGraphService.rotate(this,e,r,i),this},n.prototype.setRotation=function(e,r,i,a){return tt.sceneGraphService.setRotation(this,e,r,i,a),this},n.prototype.setLocalRotation=function(e,r,i,a){return tt.sceneGraphService.setLocalRotation(this,e,r,i,a),this},n.prototype.setLocalSkew=function(e,r){return tt.sceneGraphService.setLocalSkew(this,e,r),this},n.prototype.getRotation=function(){return tt.sceneGraphService.getRotation(this)},n.prototype.getLocalRotation=function(){return tt.sceneGraphService.getLocalRotation(this)},n.prototype.getLocalSkew=function(){return tt.sceneGraphService.getLocalSkew(this)},n.prototype.getLocalTransform=function(){return tt.sceneGraphService.getLocalTransform(this)},n.prototype.getWorldTransform=function(){return tt.sceneGraphService.getWorldTransform(this)},n.prototype.setLocalTransform=function(e){return tt.sceneGraphService.setLocalTransform(this,e),this},n.prototype.resetLocalTransform=function(){tt.sceneGraphService.resetLocalTransform(this)},n.prototype.getAnimations=function(){return this.activeAnimations},n.prototype.animate=function(e,r){var i,a=(i=this.ownerDocument)===null||i===void 0?void 0:i.timeline;return a?a.play(this,e,r):null},n.prototype.isVisible=function(){var e;return((e=this.parsedStyle)===null||e===void 0?void 0:e.visibility)==="visible"},Object.defineProperty(n.prototype,"interactive",{get:function(){return this.isInteractive()},set:function(e){this.style.pointerEvents=e?"auto":"none"},enumerable:!1,configurable:!0}),n.prototype.isInteractive=function(){var e;return((e=this.parsedStyle)===null||e===void 0?void 0:e.pointerEvents)!=="none"},n.prototype.isCulled=function(){return!!(this.cullable&&this.cullable.enable&&!this.cullable.visible)},n.prototype.toFront=function(){return this.parentNode&&(this.style.zIndex=Math.max.apply(Math,X([],R(this.parentNode.children.map(function(e){return Number(e.style.zIndex)})),!1))+1),this},n.prototype.toBack=function(){return this.parentNode&&(this.style.zIndex=Math.min.apply(Math,X([],R(this.parentNode.children.map(function(e){return Number(e.style.zIndex)})),!1))-1),this},n.prototype.getConfig=function(){return this.config},n.prototype.attr=function(){for(var e=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var a=R(r,2),o=a[0],s=a[1];return o?Xv(o)?(Object.keys(o).forEach(function(l){e.setAttribute(l,o[l])}),this):r.length===2?(this.setAttribute(o,s),this):this.attributes[o]:this.attributes},n.prototype.getMatrix=function(e){var r=e||this.getWorldTransform(),i=R(fg($t(),r),2),a=i[0],o=i[1],s=R(Bc($t(),r),2),l=s[0],c=s[1],u=hg(on(),r),f=R(ox($t(),u),3),h=f[0],d=f[2];return Cwt(h||d,a,o,l,c)},n.prototype.getLocalMatrix=function(){return this.getMatrix(this.getLocalTransform())},n.prototype.setMatrix=function(e){var r=R(b_(e),5),i=r[0],a=r[1],o=r[2],s=r[3],l=r[4];this.setEulerAngles(l).setPosition(i,a).setLocalScale(o,s)},n.prototype.setLocalMatrix=function(e){var r=R(b_(e),5),i=r[0],a=r[1],o=r[2],s=r[3],l=r[4];this.setLocalEulerAngles(l).setLocalPosition(i,a).setLocalScale(o,s)},n.prototype.show=function(){tt.enableCSSParsing?this.style.visibility="visible":this.forEach(function(e){e.style.visibility="visible"})},n.prototype.hide=function(){tt.enableCSSParsing?this.style.visibility="hidden":this.forEach(function(e){e.style.visibility="hidden"})},n.prototype.getCount=function(){return this.childElementCount},n.prototype.getParent=function(){return this.parentElement},n.prototype.getChildren=function(){return this.children},n.prototype.getFirst=function(){return this.firstElementChild},n.prototype.getLast=function(){return this.lastElementChild},n.prototype.getChildByIndex=function(e){return this.children[e]||null},n.prototype.add=function(e,r){return this.appendChild(e,r)},n.prototype.setClip=function(e){this.style.clipPath=e},n.prototype.set=function(e,r){this.config[e]=r},n.prototype.get=function(e){return this.config[e]},n.prototype.moveTo=function(e,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),this.setPosition(e,r,i),this},n.prototype.move=function(e,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),this.setPosition(e,r,i),this},n.prototype.setZIndex=function(e){return this.style.zIndex=e,this},n}(aOt),o6={number:function(t){return new me(t)},percent:function(t){return new me(t,"%")},px:function(t){return new me(t,"px")},em:function(t){return new me(t,"em")},rem:function(t){return new me(t,"rem")},deg:function(t){return new me(t,"deg")},grad:function(t){return new me(t,"grad")},rad:function(t){return new me(t,"rad")},turn:function(t){return new me(t,"turn")},s:function(t){return new me(t,"s")},ms:function(t){return new me(t,"ms")},registerProperty:function(t){var n=t.name,e=t.inherits,r=t.interpolable,i=t.initialValue,a=t.syntax;tt.styleValueRegistry.registerMetadata({n,inh:e,int:r,d:i,syntax:a})},registerLayout:function(t,n){tt.layoutRegistry.registerLayout(t,n)}},Yd=function(t){G(n,t);function n(e){e===void 0&&(e={});var r=e.style,i=vt(e,["style"]);return t.call(this,E({type:K.CIRCLE,style:tt.enableCSSParsing?E({cx:"",cy:"",r:""},r):E({},r),initialParsedStyle:{anchor:[.5,.5],transformOrigin:tt.enableCSSParsing?null:[qg,qg]}},i))||this}return n}(Kn),XM=function(t){G(n,t);function n(e){var r=this;e===void 0&&(e={});var i=e.style,a=vt(e,["style"]);return r=t.call(this,E({style:tt.enableCSSParsing?E({x:"",y:""},i):E({},i)},a))||this,r.isCustomElement=!0,r}return n}(Kn),UM=function(t){G(n,t);function n(e){e===void 0&&(e={});var r=e.style,i=vt(e,["style"]);return t.call(this,E({type:K.ELLIPSE,style:tt.enableCSSParsing?E({cx:"",cy:"",rx:"",ry:""},r):E({},r),initialParsedStyle:{anchor:[.5,.5],transformOrigin:tt.enableCSSParsing?null:[qg,qg]}},i))||this}return n}(Kn),$n=function(t){G(n,t);function n(e){e===void 0&&(e={});var r=e.style,i=vt(e,["style"]);return t.call(this,E({type:K.GROUP,style:tt.enableCSSParsing?E({x:"",y:"",width:"",height:""},r):E({},r)},i))||this}return n}(Kn),Mm=function(t){G(n,t);function n(e){var r=this;e===void 0&&(e={});var i=e.style,a=vt(e,["style"]);return r=t.call(this,E({type:K.HTML,style:tt.enableCSSParsing?E({x:"",y:"",width:"auto",height:"auto",innerHTML:""},i):E({},i)},a))||this,r.cullable.enable=!1,r}return n.prototype.getDomElement=function(){return this.parsedStyle.$el},n.prototype.getBoundingClientRect=function(){if(this.parsedStyle.$el)return this.parsedStyle.$el.getBoundingClientRect();var e=this.parsedStyle,r=e.x,i=e.y,a=e.width,o=e.height;return new bl(r,i,a,o)},n.prototype.getClientRects=function(){return[this.getBoundingClientRect()]},n.prototype.getBounds=function(){var e,r,i=this.getBoundingClientRect(),a=(r=(e=this.ownerDocument)===null||e===void 0?void 0:e.defaultView)===null||r===void 0?void 0:r.getContextService().getBoundingClientRect(),o=new dn,s=i.left-((a==null?void 0:a.left)||0),l=i.top-((a==null?void 0:a.top)||0);return o.setMinMax([s,l,0],[s+i.width,l+i.height,0]),o},n.prototype.getLocalBounds=function(){if(this.parentNode){var e=_i(pe(),this.parentNode.getWorldTransform()),r=this.getBounds();if(!dn.isEmpty(r)){var i=new dn;return i.setFromTransformedAABB(r,e),i}}return this.getBounds()},n}(Kn),qM=function(t){G(n,t);function n(e){e===void 0&&(e={});var r=e.style,i=vt(e,["style"]);return t.call(this,E({type:K.IMAGE,style:tt.enableCSSParsing?E({x:"",y:"",img:"",width:"",height:""},r):E({},r)},i))||this}return n}(Kn),Wd=function(t){G(n,t);function n(e){var r=this;e===void 0&&(e={});var i=e.style,a=vt(e,["style"]);r=t.call(this,E({type:K.LINE,style:E({x1:0,y1:0,x2:0,y2:0,z1:0,z2:0},i)},a))||this,r.markerStartAngle=0,r.markerEndAngle=0;var o=r.parsedStyle,s=o.markerStart,l=o.markerEnd;return s&&Zt(s)&&(r.markerStartAngle=s.getLocalEulerAngles(),r.appendChild(s)),l&&Zt(l)&&(r.markerEndAngle=l.getLocalEulerAngles(),r.appendChild(l)),r.transformMarker(!0),r.transformMarker(!1),r}return n.prototype.attributeChangedCallback=function(e,r,i,a,o){e==="x1"||e==="y1"||e==="x2"||e==="y2"||e==="markerStartOffset"||e==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):e==="markerStart"?(a&&Zt(a)&&(this.markerStartAngle=0,a.remove()),o&&Zt(o)&&(this.markerStartAngle=o.getLocalEulerAngles(),this.appendChild(o),this.transformMarker(!0))):e==="markerEnd"&&(a&&Zt(a)&&(this.markerEndAngle=0,a.remove()),o&&Zt(o)&&(this.markerEndAngle=o.getLocalEulerAngles(),this.appendChild(o),this.transformMarker(!1)))},n.prototype.transformMarker=function(e){var r=this.parsedStyle,i=r.markerStart,a=r.markerEnd,o=r.markerStartOffset,s=r.markerEndOffset,l=r.x1,c=r.x2,u=r.y1,f=r.y2,h=r.defX,d=r.defY,p=e?i:a;if(!(!p||!Zt(p))){var v=0,g,y,m,x,b,w;e?(m=l-h,x=u-d,g=c-l,y=f-u,b=o||0,w=this.markerStartAngle):(m=c-h,x=f-d,g=l-c,y=u-f,b=s||0,w=this.markerEndAngle),v=Math.atan2(y,g),p.setLocalEulerAngles(v*180/Math.PI+w),p.setLocalPosition(m+Math.cos(v)*b,x+Math.sin(v)*b)}},n.prototype.getPoint=function(e,r){r===void 0&&(r=!1);var i=this.parsedStyle,a=i.x1,o=i.y1,s=i.x2,l=i.y2,c=i.defX,u=i.defY,f=Dz(a,o,s,l,e),h=f.x,d=f.y,p=vn($t(),Ut(h-c,d-u,0),r?this.getWorldTransform():this.getLocalTransform());return new kn(p[0],p[1])},n.prototype.getPointAtLength=function(e,r){return r===void 0&&(r=!1),this.getPoint(e/this.getTotalLength(),r)},n.prototype.getTotalLength=function(){var e=this.parsedStyle,r=e.x1,i=e.y1,a=e.x2,o=e.y2;return Fz(r,i,a,o)},n}(Kn),lr=function(t){G(n,t);function n(e){var r=this;e===void 0&&(e={});var i=e.style,a=vt(e,["style"]);r=t.call(this,E({type:K.PATH,style:tt.enableCSSParsing?E({path:"",miterLimit:""},i):E({},i),initialParsedStyle:tt.enableCSSParsing?null:{miterLimit:4,path:E({},jz)}},a))||this,r.markerStartAngle=0,r.markerEndAngle=0,r.markerMidList=[];var o=r.parsedStyle,s=o.markerStart,l=o.markerEnd,c=o.markerMid;return s&&Zt(s)&&(r.markerStartAngle=s.getLocalEulerAngles(),r.appendChild(s)),c&&Zt(c)&&r.placeMarkerMid(c),l&&Zt(l)&&(r.markerEndAngle=l.getLocalEulerAngles(),r.appendChild(l)),r.transformMarker(!0),r.transformMarker(!1),r}return n.prototype.attributeChangedCallback=function(e,r,i,a,o){e==="path"?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):e==="markerStartOffset"||e==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):e==="markerStart"?(a&&Zt(a)&&(this.markerStartAngle=0,a.remove()),o&&Zt(o)&&(this.markerStartAngle=o.getLocalEulerAngles(),this.appendChild(o),this.transformMarker(!0))):e==="markerEnd"?(a&&Zt(a)&&(this.markerEndAngle=0,a.remove()),o&&Zt(o)&&(this.markerEndAngle=o.getLocalEulerAngles(),this.appendChild(o),this.transformMarker(!1))):e==="markerMid"&&this.placeMarkerMid(o)},n.prototype.transformMarker=function(e){var r=this.parsedStyle,i=r.markerStart,a=r.markerEnd,o=r.markerStartOffset,s=r.markerEndOffset,l=r.defX,c=r.defY,u=e?i:a;if(!(!u||!Zt(u))){var f=0,h,d,p,v,g,y;if(e){var m=R(this.getStartTangent(),2),x=m[0],b=m[1];p=b[0]-l,v=b[1]-c,h=x[0]-b[0],d=x[1]-b[1],g=o||0,y=this.markerStartAngle}else{var w=R(this.getEndTangent(),2),x=w[0],b=w[1];p=b[0]-l,v=b[1]-c,h=x[0]-b[0],d=x[1]-b[1],g=s||0,y=this.markerEndAngle}f=Math.atan2(d,h),u.setLocalEulerAngles(f*180/Math.PI+y),u.setLocalPosition(p+Math.cos(f)*g,v+Math.sin(f)*g)}},n.prototype.placeMarkerMid=function(e){var r=this.parsedStyle,i=r.path.segments,a=r.defX,o=r.defY;if(this.markerMidList.forEach(function(h){h.remove()}),e&&Zt(e))for(var s=1;s<i.length-1;s++){var l=R(i[s].currentPoint,2),c=l[0],u=l[1],f=s===1?e:e.cloneNode(!0);this.markerMidList.push(f),this.appendChild(f),f.setLocalPosition(c-a,u-o)}},n.prototype.getTotalLength=function(){return Nw(this)},n.prototype.getPointAtLength=function(e,r){r===void 0&&(r=!1);var i=this.parsedStyle,a=i.defX,o=i.defY,s=i.path.absolutePath,l=cwt(s,e),c=l.x,u=l.y,f=vn($t(),Ut(c-a,u-o,0),r?this.getWorldTransform():this.getLocalTransform());return new kn(f[0],f[1])},n.prototype.getPoint=function(e,r){return r===void 0&&(r=!1),this.getPointAtLength(e*Nw(this),r)},n.prototype.getStartTangent=function(){var e=this.parsedStyle.path.segments,r=[];if(e.length>1){var i=e[0].currentPoint,a=e[1].currentPoint,o=e[1].startTangent;r=[],o?(r.push([i[0]-o[0],i[1]-o[1]]),r.push([i[0],i[1]])):(r.push([a[0],a[1]]),r.push([i[0],i[1]]))}return r},n.prototype.getEndTangent=function(){var e=this.parsedStyle.path.segments,r=e.length,i=[];if(r>1){var a=e[r-2].currentPoint,o=e[r-1].currentPoint,s=e[r-1].endTangent;i=[],s?(i.push([o[0]-s[0],o[1]-s[1]]),i.push([o[0],o[1]])):(i.push([a[0],a[1]]),i.push([o[0],o[1]]))}return i},n}(Kn),Vd=function(t){G(n,t);function n(e){var r=this;e===void 0&&(e={});var i=e.style,a=vt(e,["style"]);r=t.call(this,E({type:K.POLYGON,style:tt.enableCSSParsing?E({points:"",miterLimit:"",isClosed:!0},i):E({},i),initialParsedStyle:tt.enableCSSParsing?null:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!0}},a))||this,r.markerStartAngle=0,r.markerEndAngle=0,r.markerMidList=[];var o=r.parsedStyle,s=o.markerStart,l=o.markerEnd,c=o.markerMid;return s&&Zt(s)&&(r.markerStartAngle=s.getLocalEulerAngles(),r.appendChild(s)),c&&Zt(c)&&r.placeMarkerMid(c),l&&Zt(l)&&(r.markerEndAngle=l.getLocalEulerAngles(),r.appendChild(l)),r.transformMarker(!0),r.transformMarker(!1),r}return n.prototype.attributeChangedCallback=function(e,r,i,a,o){e==="points"?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):e==="markerStartOffset"||e==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):e==="markerStart"?(a&&Zt(a)&&(this.markerStartAngle=0,a.remove()),o&&Zt(o)&&(this.markerStartAngle=o.getLocalEulerAngles(),this.appendChild(o),this.transformMarker(!0))):e==="markerEnd"?(a&&Zt(a)&&(this.markerEndAngle=0,a.remove()),o&&Zt(o)&&(this.markerEndAngle=o.getLocalEulerAngles(),this.appendChild(o),this.transformMarker(!1))):e==="markerMid"&&this.placeMarkerMid(o)},n.prototype.transformMarker=function(e){var r=this.parsedStyle,i=r.markerStart,a=r.markerEnd,o=r.markerStartOffset,s=r.markerEndOffset,l=r.points,c=r.defX,u=r.defY,f=(l||{}).points,h=e?i:a;if(!(!h||!Zt(h)||!f)){var d=0,p,v,g,y,m,x;if(g=f[0][0]-c,y=f[0][1]-u,e)p=f[1][0]-f[0][0],v=f[1][1]-f[0][1],m=o||0,x=this.markerStartAngle;else{var b=f.length;this.parsedStyle.isClosed?(p=f[b-1][0]-f[0][0],v=f[b-1][1]-f[0][1]):(g=f[b-1][0]-c,y=f[b-1][1]-u,p=f[b-2][0]-f[b-1][0],v=f[b-2][1]-f[b-1][1]),m=s||0,x=this.markerEndAngle}d=Math.atan2(v,p),h.setLocalEulerAngles(d*180/Math.PI+x),h.setLocalPosition(g+Math.cos(d)*m,y+Math.sin(d)*m)}},n.prototype.placeMarkerMid=function(e){var r=this.parsedStyle,i=r.points,a=r.defX,o=r.defY,s=(i||{}).points;if(this.markerMidList.forEach(function(h){h.remove()}),this.markerMidList=[],e&&Zt(e)&&s)for(var l=1;l<(this.parsedStyle.isClosed?s.length:s.length-1);l++){var c=s[l][0]-a,u=s[l][1]-o,f=l===1?e:e.cloneNode(!0);this.markerMidList.push(f),this.appendChild(f),f.setLocalPosition(c,u)}},n}(Kn),ZM=function(t){G(n,t);function n(e){e===void 0&&(e={});var r=e.style,i=vt(e,["style"]);return t.call(this,E({type:K.POLYLINE,style:tt.enableCSSParsing?E({points:"",miterLimit:"",isClosed:!1},r):E({},r),initialParsedStyle:tt.enableCSSParsing?null:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!1}},i))||this}return n.prototype.getTotalLength=function(){return this.parsedStyle.points.totalLength},n.prototype.getPointAtLength=function(e,r){return r===void 0&&(r=!1),this.getPoint(e/this.getTotalLength(),r)},n.prototype.getPoint=function(e,r){r===void 0&&(r=!1);var i=this.parsedStyle,a=i.defX,o=i.defY,s=i.points,l=s.points,c=s.segments,u=0,f=0;c.forEach(function(g,y){e>=g[0]&&e<=g[1]&&(u=(e-g[0])/(g[1]-g[0]),f=y)});var h=Dz(l[f][0],l[f][1],l[f+1][0],l[f+1][1],u),d=h.x,p=h.y,v=vn($t(),Ut(d-a,p-o,0),r?this.getWorldTransform():this.getLocalTransform());return new kn(v[0],v[1])},n.prototype.getStartTangent=function(){var e=this.parsedStyle.points.points,r=[];return r.push([e[1][0],e[1][1]]),r.push([e[0][0],e[0][1]]),r},n.prototype.getEndTangent=function(){var e=this.parsedStyle.points.points,r=e.length-1,i=[];return i.push([e[r-1][0],e[r-1][1]]),i.push([e[r][0],e[r][1]]),i},n}(Vd),Nl=function(t){G(n,t);function n(e){e===void 0&&(e={});var r=e.style,i=vt(e,["style"]);return t.call(this,E({type:K.RECT,style:tt.enableCSSParsing?E({x:"",y:"",width:"",height:"",radius:""},r):E({},r)},i))||this}return n}(Kn),Fi=function(t){G(n,t);function n(e){e===void 0&&(e={});var r=e.style,i=vt(e,["style"]);return t.call(this,E({type:K.TEXT,style:tt.enableCSSParsing?E({x:"",y:"",text:"",fontSize:"",fontFamily:"",fontStyle:"",fontWeight:"",fontVariant:"",textAlign:"",textBaseline:"",textTransform:"",fill:"black",letterSpacing:"",lineHeight:"",miterLimit:"",wordWrap:!1,wordWrapWidth:0,leading:0,dx:"",dy:""},r):E({fill:"black"},r),initialParsedStyle:tt.enableCSSParsing?{}:{x:0,y:0,fontSize:16,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",lineHeight:0,letterSpacing:0,textBaseline:"alphabetic",textAlign:"start",wordWrap:!1,wordWrapWidth:0,leading:0,dx:0,dy:0}},i))||this}return n.prototype.getComputedTextLength=function(){var e;return((e=this.parsedStyle.metrics)===null||e===void 0?void 0:e.maxLineWidth)||0},n.prototype.getLineBoundingRects=function(){var e;return((e=this.parsedStyle.metrics)===null||e===void 0?void 0:e.lineMetrics)||[]},n.prototype.isOverflowing=function(){return!!this.parsedStyle.isOverflowing},n}(Kn),uOt=function(){function t(){this.registry={},this.define(K.CIRCLE,Yd),this.define(K.ELLIPSE,UM),this.define(K.RECT,Nl),this.define(K.IMAGE,qM),this.define(K.LINE,Wd),this.define(K.GROUP,$n),this.define(K.PATH,lr),this.define(K.POLYGON,Vd),this.define(K.POLYLINE,ZM),this.define(K.TEXT,Fi),this.define(K.HTML,Mm)}return t.prototype.define=function(n,e){this.registry[n]=e},t.prototype.get=function(n){return this.registry[n]},t}(),fOt=function(t){G(n,t);function n(){var e=t.call(this)||this;e.defaultView=null,e.ownerDocument=null,e.nodeName="document";try{e.timeline=new tt.AnimationTimeline(e)}catch{}var r={};return WM.forEach(function(i){var a=i.n,o=i.inh,s=i.d;o&&s&&(r[a]=pc(s)?s(K.GROUP):s)}),e.documentElement=new $n({id:"g-root",style:r}),e.documentElement.ownerDocument=e,e.documentElement.parentNode=e,e.childNodes=[e.documentElement],e}return Object.defineProperty(n.prototype,"children",{get:function(){return this.childNodes},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"childElementCount",{get:function(){return this.childNodes.length},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"firstElementChild",{get:function(){return this.firstChild},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"lastElementChild",{get:function(){return this.lastChild},enumerable:!1,configurable:!0}),n.prototype.createElement=function(e,r){if(e==="svg")return this.documentElement;var i=this.defaultView.customElements.get(e);i||(console.warn("Unsupported tagName: ",e),i=e==="tspan"?Fi:$n);var a=new i(r);return a.ownerDocument=this,a},n.prototype.createElementNS=function(e,r,i){return this.createElement(r,i)},n.prototype.cloneNode=function(e){throw new Error(ye)},n.prototype.destroy=function(){try{this.documentElement.destroyChildren(),this.timeline.destroy()}catch{}},n.prototype.elementsFromBBox=function(e,r,i,a){var o=this.defaultView.context.rBushRoot,s=o.search({minX:e,minY:r,maxX:i,maxY:a}),l=[];return s.forEach(function(c){var u=c.displayObject,f=u.parsedStyle.pointerEvents,h=["auto","visiblepainted","visiblefill","visiblestroke","visible"].includes(f);(!h||h&&u.isVisible())&&!u.isCulled()&&u.isInteractive()&&l.push(u)}),l.sort(function(c,u){return u.sortable.renderOrder-c.sortable.renderOrder}),l},n.prototype.elementFromPointSync=function(e,r){var i=this.defaultView.canvas2Viewport({x:e,y:r}),a=i.x,o=i.y,s=this.defaultView.getConfig(),l=s.width,c=s.height;if(a<0||o<0||a>l||o>c)return null;var u=this.defaultView.viewport2Client({x:a,y:o}),f=u.x,h=u.y,d=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!0,position:{x:e,y:r,viewportX:a,viewportY:o,clientX:f,clientY:h},picked:[]}).picked;return d&&d[0]||this.documentElement},n.prototype.elementFromPoint=function(e,r){return Ri(this,void 0,void 0,function(){var i,a,o,s,l,c,u,f,h,d;return Bi(this,function(p){switch(p.label){case 0:return i=this.defaultView.canvas2Viewport({x:e,y:r}),a=i.x,o=i.y,s=this.defaultView.getConfig(),l=s.width,c=s.height,a<0||o<0||a>l||o>c?[2,null]:(u=this.defaultView.viewport2Client({x:a,y:o}),f=u.x,h=u.y,[4,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!0,position:{x:e,y:r,viewportX:a,viewportY:o,clientX:f,clientY:h},picked:[]})]);case 1:return d=p.sent().picked,[2,d&&d[0]||this.documentElement]}})})},n.prototype.elementsFromPointSync=function(e,r){var i=this.defaultView.canvas2Viewport({x:e,y:r}),a=i.x,o=i.y,s=this.defaultView.getConfig(),l=s.width,c=s.height;if(a<0||o<0||a>l||o>c)return[];var u=this.defaultView.viewport2Client({x:a,y:o}),f=u.x,h=u.y,d=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!1,position:{x:e,y:r,viewportX:a,viewportY:o,clientX:f,clientY:h},picked:[]}).picked;return d[d.length-1]!==this.documentElement&&d.push(this.documentElement),d},n.prototype.elementsFromPoint=function(e,r){return Ri(this,void 0,void 0,function(){var i,a,o,s,l,c,u,f,h,d;return Bi(this,function(p){switch(p.label){case 0:return i=this.defaultView.canvas2Viewport({x:e,y:r}),a=i.x,o=i.y,s=this.defaultView.getConfig(),l=s.width,c=s.height,a<0||o<0||a>l||o>c?[2,[]]:(u=this.defaultView.viewport2Client({x:a,y:o}),f=u.x,h=u.y,[4,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!1,position:{x:e,y:r,viewportX:a,viewportY:o,clientX:f,clientY:h},picked:[]})]);case 1:return d=p.sent().picked,d[d.length-1]!==this.documentElement&&d.push(this.documentElement),[2,d]}})})},n.prototype.appendChild=function(e,r){throw new Error(Ul)},n.prototype.insertBefore=function(e,r){throw new Error(Ul)},n.prototype.removeChild=function(e,r){throw new Error(Ul)},n.prototype.replaceChild=function(e,r,i){throw new Error(Ul)},n.prototype.append=function(){throw new Error(Ul)},n.prototype.prepend=function(){throw new Error(Ul)},n.prototype.getElementById=function(e){return this.documentElement.getElementById(e)},n.prototype.getElementsByName=function(e){return this.documentElement.getElementsByName(e)},n.prototype.getElementsByTagName=function(e){return this.documentElement.getElementsByTagName(e)},n.prototype.getElementsByClassName=function(e){return this.documentElement.getElementsByClassName(e)},n.prototype.querySelector=function(e){return this.documentElement.querySelector(e)},n.prototype.querySelectorAll=function(e){return this.documentElement.querySelectorAll(e)},n.prototype.find=function(e){return this.documentElement.find(e)},n.prototype.findAll=function(e){return this.documentElement.findAll(e)},n}(Sn),hOt=function(){function t(n){this.strategies=n}return t.prototype.apply=function(n){var e=n.camera,r=n.renderingService,i=n.renderingContext,a=this.strategies;r.hooks.cull.tap(t.tag,function(o){if(o){var s=o.cullable;return a.length===0?s.visible=i.unculledEntities.indexOf(o.entity)>-1:s.visible=a.every(function(l){return l.isVisible(e,o)}),!o.isCulled()&&o.isVisible()?o:(o.dispatchEvent(new Se(Dt.CULLED)),null)}return o}),r.hooks.afterRender.tap(t.tag,function(o){o.cullable.visibilityPlaneMask=-1})},t.tag="Culling",t}(),dOt=function(){function t(){var n=this;this.autoPreventDefault=!1,this.rootPointerEvent=new Yw(null),this.rootWheelEvent=new Ww(null),this.onPointerMove=function(e){var r,i,a,o,s=(o=(a=n.context.renderingContext.root)===null||a===void 0?void 0:a.ownerDocument)===null||o===void 0?void 0:o.defaultView;if(!(s.supportsTouchEvents&&e.pointerType==="touch")){var l=n.normalizeToPointerEvent(e,s);try{for(var c=Ct(l),u=c.next();!u.done;u=c.next()){var f=u.value,h=n.bootstrapEvent(n.rootPointerEvent,f,s,e);n.context.eventService.mapEvent(h)}}catch(d){r={error:d}}finally{try{u&&!u.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}n.setCursor(n.context.eventService.cursor)}},this.onClick=function(e){var r,i,a,o,s=(o=(a=n.context.renderingContext.root)===null||a===void 0?void 0:a.ownerDocument)===null||o===void 0?void 0:o.defaultView,l=n.normalizeToPointerEvent(e,s);try{for(var c=Ct(l),u=c.next();!u.done;u=c.next()){var f=u.value,h=n.bootstrapEvent(n.rootPointerEvent,f,s,e);n.context.eventService.mapEvent(h)}}catch(d){r={error:d}}finally{try{u&&!u.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}n.setCursor(n.context.eventService.cursor)}}return t.prototype.apply=function(n){var e=this;this.context=n;var r=n.renderingService,i=this.context.renderingContext.root.ownerDocument.defaultView;this.context.eventService.setPickHandler(function(a){var o=e.context.renderingService.hooks.pickSync.call({position:a,picked:[],topmost:!0}).picked;return o[0]||null}),r.hooks.pointerWheel.tap(t.tag,function(a){var o=e.normalizeWheelEvent(a);e.context.eventService.mapEvent(o)}),r.hooks.pointerDown.tap(t.tag,function(a){var o,s;if(!(i.supportsTouchEvents&&a.pointerType==="touch")){var l=e.normalizeToPointerEvent(a,i);if(e.autoPreventDefault&&l[0].isNormalized){var c=a.cancelable||!("cancelable"in a);c&&a.preventDefault()}try{for(var u=Ct(l),f=u.next();!f.done;f=u.next()){var h=f.value,d=e.bootstrapEvent(e.rootPointerEvent,h,i,a);e.context.eventService.mapEvent(d)}}catch(p){o={error:p}}finally{try{f&&!f.done&&(s=u.return)&&s.call(u)}finally{if(o)throw o.error}}e.setCursor(e.context.eventService.cursor)}}),r.hooks.pointerUp.tap(t.tag,function(a){var o,s;if(!(i.supportsTouchEvents&&a.pointerType==="touch")){var l=e.context.contextService.getDomElement(),c="outside";try{c=l&&a.target&&a.target!==l&&l.contains&&!l.contains(a.target)?"outside":""}catch{}var u=e.normalizeToPointerEvent(a,i);try{for(var f=Ct(u),h=f.next();!h.done;h=f.next()){var d=h.value,p=e.bootstrapEvent(e.rootPointerEvent,d,i,a);p.type+=c,e.context.eventService.mapEvent(p)}}catch(v){o={error:v}}finally{try{h&&!h.done&&(s=f.return)&&s.call(f)}finally{if(o)throw o.error}}e.setCursor(e.context.eventService.cursor)}}),r.hooks.pointerMove.tap(t.tag,this.onPointerMove),r.hooks.pointerOver.tap(t.tag,this.onPointerMove),r.hooks.pointerOut.tap(t.tag,this.onPointerMove),r.hooks.click.tap(t.tag,this.onClick),r.hooks.pointerCancel.tap(t.tag,function(a){var o,s,l=e.normalizeToPointerEvent(a,i);try{for(var c=Ct(l),u=c.next();!u.done;u=c.next()){var f=u.value,h=e.bootstrapEvent(e.rootPointerEvent,f,i,a);e.context.eventService.mapEvent(h)}}catch(d){o={error:d}}finally{try{u&&!u.done&&(s=c.return)&&s.call(c)}finally{if(o)throw o.error}}e.setCursor(e.context.eventService.cursor)})},t.prototype.getViewportXY=function(n){var e,r,i=n.offsetX,a=n.offsetY,o=n.clientX,s=n.clientY;if(this.context.config.supportsCSSTransform&&!Pt(i)&&!Pt(a))e=i,r=a;else{var l=this.context.eventService.client2Viewport(new kn(o,s));e=l.x,r=l.y}return{x:e,y:r}},t.prototype.bootstrapEvent=function(n,e,r,i){n.view=r,n.originalEvent=null,n.nativeEvent=i,n.pointerId=e.pointerId,n.width=e.width,n.height=e.height,n.isPrimary=e.isPrimary,n.pointerType=e.pointerType,n.pressure=e.pressure,n.tangentialPressure=e.tangentialPressure,n.tiltX=e.tiltX,n.tiltY=e.tiltY,n.twist=e.twist,this.transferMouseData(n,e);var a=this.getViewportXY(e),o=a.x,s=a.y;n.viewport.x=o,n.viewport.y=s;var l=this.context.eventService.viewport2Canvas(n.viewport),c=l.x,u=l.y;return n.canvas.x=c,n.canvas.y=u,n.global.copyFrom(n.canvas),n.offset.copyFrom(n.canvas),n.isTrusted=i.isTrusted,n.type==="pointerleave"&&(n.type="pointerout"),n.type.startsWith("mouse")&&(n.type=n.type.replace("mouse","pointer")),n.type.startsWith("touch")&&(n.type=cSt[n.type]||n.type),n},t.prototype.normalizeWheelEvent=function(n){var e=this.rootWheelEvent;this.transferMouseData(e,n),e.deltaMode=n.deltaMode,e.deltaX=n.deltaX,e.deltaY=n.deltaY,e.deltaZ=n.deltaZ;var r=this.getViewportXY(n),i=r.x,a=r.y;e.viewport.x=i,e.viewport.y=a;var o=this.context.eventService.viewport2Canvas(e.viewport),s=o.x,l=o.y;return e.canvas.x=s,e.canvas.y=l,e.global.copyFrom(e.canvas),e.offset.copyFrom(e.canvas),e.nativeEvent=n,e.type=n.type,e},t.prototype.transferMouseData=function(n,e){n.isTrusted=e.isTrusted,n.srcElement=e.srcElement,n.timeStamp=Gw.now(),n.type=e.type,n.altKey=e.altKey,n.metaKey=e.metaKey,n.shiftKey=e.shiftKey,n.ctrlKey=e.ctrlKey,n.button=e.button,n.buttons=e.buttons,n.client.x=e.clientX,n.client.y=e.clientY,n.movement.x=e.movementX,n.movement.y=e.movementY,n.page.x=e.pageX,n.page.y=e.pageY,n.screen.x=e.screenX,n.screen.y=e.screenY,n.relatedTarget=null},t.prototype.setCursor=function(n){this.context.contextService.applyCursorStyle(n||this.context.config.cursor||"default")},t.prototype.normalizeToPointerEvent=function(n,e){var r=[];if(e.isTouchEvent(n))for(var i=0;i<n.changedTouches.length;i++){var a=n.changedTouches[i];We(a.button)&&(a.button=0),We(a.buttons)&&(a.buttons=1),We(a.isPrimary)&&(a.isPrimary=n.touches.length===1&&n.type==="touchstart"),We(a.width)&&(a.width=a.radiusX||1),We(a.height)&&(a.height=a.radiusY||1),We(a.tiltX)&&(a.tiltX=0),We(a.tiltY)&&(a.tiltY=0),We(a.pointerType)&&(a.pointerType="touch"),We(a.pointerId)&&(a.pointerId=a.identifier||0),We(a.pressure)&&(a.pressure=a.force||.5),We(a.twist)&&(a.twist=0),We(a.tangentialPressure)&&(a.tangentialPressure=0),a.isNormalized=!0,a.type=n.type,r.push(a)}else if(e.isMouseEvent(n)){var o=n;We(o.isPrimary)&&(o.isPrimary=!0),We(o.width)&&(o.width=1),We(o.height)&&(o.height=1),We(o.tiltX)&&(o.tiltX=0),We(o.tiltY)&&(o.tiltY=0),We(o.pointerType)&&(o.pointerType="mouse"),We(o.pointerId)&&(o.pointerId=lSt),We(o.pressure)&&(o.pressure=.5),We(o.twist)&&(o.twist=0),We(o.tangentialPressure)&&(o.tangentialPressure=0),o.isNormalized=!0,r.push(o)}else r.push(n);return r},t.tag="Event",t}(),pOt=[K.CIRCLE,K.ELLIPSE,K.IMAGE,K.RECT,K.LINE,K.POLYLINE,K.POLYGON,K.TEXT,K.PATH,K.HTML],vOt=function(){function t(){}return t.prototype.isVisible=function(n,e){var r,i,a=e.cullable;if(!a.enable)return!0;var o=e.getRenderBounds();if(dn.isEmpty(o))return!1;var s=n.getFrustum(),l=(i=(r=e.parentNode)===null||r===void 0?void 0:r.cullable)===null||i===void 0?void 0:i.visibilityPlaneMask;return a.visibilityPlaneMask=this.computeVisibilityWithPlaneMask(e,o,l||bo.INDETERMINATE,s.planes),a.visible=a.visibilityPlaneMask!==bo.OUTSIDE,a.visible},t.prototype.computeVisibilityWithPlaneMask=function(n,e,r,i){if(r===bo.OUTSIDE||r===bo.INSIDE)return r;for(var a=bo.INSIDE,o=pOt.indexOf(n.nodeName)>-1,s=0,l=i.length;s<l;++s){var c=1<<s;if(r&c&&!(o&&(s===4||s===5))){var u=i[s],f=u.normal,h=u.distance;if(ea(f,e.getPositiveFarPoint(i[s]))+h<0)return bo.OUTSIDE;ea(f,e.getNegativeFarPoint(i[s]))+h<0&&(a|=c)}}return a},t}(),gOt=function(){function t(){this.toSync=new Set}return t.prototype.apply=function(n){var e=this,r=n.renderingService,i=n.renderingContext,a=n.rBushRoot,o=i.root.ownerDocument.defaultView;this.rBush=a;var s=function(f){var h=f.target;h.renderable.dirty=!0,r.dirtify()},l=function(f){var h=f.detail.affectChildren,d=f.target;h&&d.forEach(function(v){e.toSync.add(v)});for(var p=d;p;)p.renderable&&e.toSync.add(p),p=p.parentElement;r.dirtify()},c=function(f){var h=f.target;tt.enableCSSParsing&&tt.styleValueRegistry.recalc(h),tt.sceneGraphService.dirtifyToRoot(h),r.dirtify()},u=function(f){var h=f.target,d=h.rBushNode;d.aabb&&e.rBush.remove(d.aabb),e.toSync.delete(h),tt.sceneGraphService.dirtifyToRoot(h),r.dirtify()};r.hooks.init.tap(t.tag,function(){o.addEventListener(Dt.MOUNTED,c),o.addEventListener(Dt.UNMOUNTED,u),o.addEventListener(Dt.ATTR_MODIFIED,s),o.addEventListener(Dt.BOUNDS_CHANGED,l)}),r.hooks.destroy.tap(t.tag,function(){o.removeEventListener(Dt.MOUNTED,c),o.removeEventListener(Dt.UNMOUNTED,u),o.removeEventListener(Dt.ATTR_MODIFIED,s),o.removeEventListener(Dt.BOUNDS_CHANGED,l),e.toSync.clear()}),r.hooks.endFrame.tap(t.tag,function(){e.syncRTree()})},t.prototype.syncRTree=function(){var n=this,e=[];Array.from(this.toSync).filter(function(r){return r.isConnected}).forEach(function(r){var i=r.rBushNode;i&&i.aabb&&n.rBush.remove(i.aabb);var a=r.getRenderBounds();if(a){var o=R(a.getMin(),2),s=o[0],l=o[1],c=R(a.getMax(),2),u=c[0],f=c[1];i.aabb||(i.aabb={}),i.aabb.displayObject=r,i.aabb.minX=s,i.aabb.minY=l,i.aabb.maxX=u,i.aabb.maxY=f}i.aabb&&!isNaN(i.aabb.maxX)&&!isNaN(i.aabb.maxX)&&!isNaN(i.aabb.minX)&&!isNaN(i.aabb.minY)&&e.push(i.aabb)}),this.rBush.load(e),e.length=0,this.toSync.clear()},t.tag="Prepare",t}(),wr;(function(t){t.READY="ready",t.BEFORE_RENDER="beforerender",t.RERENDER="rerender",t.AFTER_RENDER="afterrender",t.BEFORE_DESTROY="beforedestroy",t.AFTER_DESTROY="afterdestroy",t.RESIZE="resize",t.DIRTY_RECTANGLE="dirtyrectangle",t.RENDERER_CHANGED="rendererchanged"})(wr||(wr={}));var W_=500,yOt=.1,mOt=1e3,vx=new Se(Dt.MOUNTED),gx=new Se(Dt.UNMOUNTED),xOt=new Se(wr.BEFORE_RENDER),bOt=new Se(wr.RERENDER),wOt=new Se(wr.AFTER_RENDER),s6=function(t){G(n,t);function n(e){var r=t.call(this)||this;r.Element=Kn,r.inited=!1,r.context={},r.document=new fOt,r.document.defaultView=r,r.customElements=new uOt;var i=e.container,a=e.canvas,o=e.offscreenCanvas,s=e.width,l=e.height,c=e.devicePixelRatio,u=e.renderer,f=e.background,h=e.cursor,d=e.document,p=e.requestAnimationFrame,v=e.cancelAnimationFrame,g=e.createImage,y=e.supportsPointerEvents,m=e.supportsTouchEvents,x=e.supportsCSSTransform,b=e.supportsMutipleCanvasesInOneContainer,w=e.useNativeClickEvent,S=e.alwaysTriggerPointerEventOnCanvas,O=e.isTouchEvent,M=e.isMouseEvent;b||nSt(i,r);var A=s,T=l,C=c;return a&&(C=c||Gd&&window.devicePixelRatio||1,C=C>=1?Math.ceil(C):1,A=s||oSt(a)||a.width/C,T=l||sSt(a)||a.height/C),o&&(tt.offscreenCanvas=o),r.devicePixelRatio=C,r.requestAnimationFrame=p??e6.bind(tt.globalThis),r.cancelAnimationFrame=v??n6.bind(tt.globalThis),r.supportsTouchEvents=m??"ontouchstart"in tt.globalThis,r.supportsPointerEvents=y??!!tt.globalThis.PointerEvent,r.isTouchEvent=O??function(P){return r.supportsTouchEvents&&P instanceof tt.globalThis.TouchEvent},r.isMouseEvent=M??function(P){return!tt.globalThis.MouseEvent||P instanceof tt.globalThis.MouseEvent&&(!r.supportsPointerEvents||!(P instanceof tt.globalThis.PointerEvent))},r.initRenderingContext({container:i,canvas:a,width:A,height:T,renderer:u,offscreenCanvas:o,devicePixelRatio:C,cursor:h||"default",background:f||"transparent",createImage:g,document:d,supportsCSSTransform:x,useNativeClickEvent:w,alwaysTriggerPointerEventOnCanvas:S}),r.initDefaultCamera(A,T,u.clipSpaceNearZ),r.initRenderer(u,!0),r}return n.prototype.initRenderingContext=function(e){this.context.config=e,this.context.renderingContext={root:this.document.documentElement,renderListCurrentFrame:[],unculledEntities:[],renderReasons:new Set,force:!1,dirty:!1}},n.prototype.initDefaultCamera=function(e,r,i){var a=this,o=new tt.CameraContribution;o.clipSpaceNearZ=i,o.setType(ue.EXPLORING,qh.DEFAULT).setPosition(e/2,r/2,W_).setFocalPoint(e/2,r/2,0).setOrthographic(e/-2,e/2,r/2,r/-2,yOt,mOt),o.canvas=this,o.eventEmitter.on(Bz.UPDATED,function(){a.context.renderingContext.renderReasons.add(Wo.CAMERA_CHANGED)}),this.context.camera=o},n.prototype.getConfig=function(){return this.context.config},n.prototype.getRoot=function(){return this.document.documentElement},n.prototype.getCamera=function(){return this.context.camera},n.prototype.getContextService=function(){return this.context.contextService},n.prototype.getEventService=function(){return this.context.eventService},n.prototype.getRenderingService=function(){return this.context.renderingService},n.prototype.getRenderingContext=function(){return this.context.renderingContext},n.prototype.getStats=function(){return this.getRenderingService().getStats()},Object.defineProperty(n.prototype,"ready",{get:function(){var e=this;return this.readyPromise||(this.readyPromise=new Promise(function(r){e.resolveReadyPromise=function(){r(e)}}),this.inited&&this.resolveReadyPromise()),this.readyPromise},enumerable:!1,configurable:!0}),n.prototype.destroy=function(e,r){if(e===void 0&&(e=!0),r===void 0&&(r=!1),r||this.dispatchEvent(new Se(wr.BEFORE_DESTROY)),this.frameId){var i=this.getConfig().cancelAnimationFrame||cancelAnimationFrame;i(this.frameId)}var a=this.getRoot();this.unmountChildren(a),e&&(this.document.destroy(),this.getEventService().destroy()),this.getRenderingService().destroy(),this.getContextService().destroy(),e&&this.context.rBushRoot&&(this.context.rBushRoot.clear(),this.context.rBushRoot=null,this.context.renderingContext.root=null),r||this.dispatchEvent(new Se(wr.AFTER_DESTROY))},n.prototype.changeSize=function(e,r){this.resize(e,r)},n.prototype.resize=function(e,r){var i=this.context.config;i.width=e,i.height=r,this.getContextService().resize(e,r);var a=this.context.camera,o=a.getProjectionMode();a.setPosition(e/2,r/2,W_).setFocalPoint(e/2,r/2,0),o===pr.ORTHOGRAPHIC?a.setOrthographic(e/-2,e/2,r/2,r/-2,a.getNear(),a.getFar()):a.setAspect(e/r),this.dispatchEvent(new Se(wr.RESIZE,{width:e,height:r}))},n.prototype.appendChild=function(e,r){return this.document.documentElement.appendChild(e,r)},n.prototype.insertBefore=function(e,r){return this.document.documentElement.insertBefore(e,r)},n.prototype.removeChild=function(e){return this.document.documentElement.removeChild(e)},n.prototype.removeChildren=function(){this.document.documentElement.removeChildren()},n.prototype.destroyChildren=function(){this.document.documentElement.destroyChildren()},n.prototype.render=function(){var e=this;this.dispatchEvent(xOt);var r=this.getRenderingService();r.render(this.getConfig(),function(){e.dispatchEvent(bOt)}),this.dispatchEvent(wOt)},n.prototype.run=function(){var e=this,r=function(){e.render(),e.frameId=e.requestAnimationFrame(r)};r()},n.prototype.initRenderer=function(e,r){var i=this;if(r===void 0&&(r=!1),!e)throw new Error("Renderer is required.");this.inited=!1,this.readyPromise=void 0,this.context.rBushRoot=new wwt,this.context.renderingPlugins=[],this.context.renderingPlugins.push(new dOt,new gOt,new hOt([new vOt])),this.loadRendererContainerModule(e),this.context.contextService=new this.context.ContextService(E(E({},tt),this.context)),this.context.renderingService=new NSt(tt,this.context),this.context.eventService=new RSt(tt,this.context),this.context.eventService.init(),this.context.contextService.init?(this.context.contextService.init(),this.initRenderingService(e,r,!0)):this.context.contextService.initAsync().then(function(){i.initRenderingService(e,r)})},n.prototype.initRenderingService=function(e,r,i){var a=this;r===void 0&&(r=!1),i===void 0&&(i=!1),this.context.renderingService.init(function(){a.inited=!0,r?(i?a.requestAnimationFrame(function(){a.dispatchEvent(new Se(wr.READY))}):a.dispatchEvent(new Se(wr.READY)),a.readyPromise&&a.resolveReadyPromise()):a.dispatchEvent(new Se(wr.RENDERER_CHANGED)),r||a.getRoot().forEach(function(o){var s=o.renderable;s&&(s.renderBoundsDirty=!0,s.boundsDirty=!0,s.dirty=!0)}),a.mountChildren(a.getRoot()),e.getConfig().enableAutoRendering&&a.run()})},n.prototype.loadRendererContainerModule=function(e){var r=this,i=e.getPlugins();i.forEach(function(a){a.context=r.context,a.init(tt)})},n.prototype.setRenderer=function(e){var r=this.getConfig();if(r.renderer!==e){var i=r.renderer;r.renderer=e,this.destroy(!1,!0),X([],R(i==null?void 0:i.getPlugins()),!1).reverse().forEach(function(a){a.destroy(tt)}),this.initRenderer(e)}},n.prototype.setCursor=function(e){var r=this.getConfig();r.cursor=e,this.getContextService().applyCursorStyle(e)},n.prototype.unmountChildren=function(e){var r=this;e.childNodes.forEach(function(i){r.unmountChildren(i)}),this.inited&&(e.isMutationObserved?e.dispatchEvent(gx):(gx.target=e,this.dispatchEvent(gx,!0)),e!==this.document.documentElement&&(e.ownerDocument=null),e.isConnected=!1),e.isCustomElement&&e.disconnectedCallback&&e.disconnectedCallback()},n.prototype.mountChildren=function(e){var r=this;this.inited?e.isConnected||(e.ownerDocument=this.document,e.isConnected=!0,e.isMutationObserved?e.dispatchEvent(vx):(vx.target=e,this.dispatchEvent(vx,!0))):console.warn("[g]: You are trying to call `canvas.appendChild` before canvas' initialization finished. You can either await `canvas.ready` or listen to `CanvasEvent.READY` manually.","appended child: ",e.nodeName),e.childNodes.forEach(function(i){r.mountChildren(i)}),e.isCustomElement&&e.connectedCallback&&e.connectedCallback()},n.prototype.client2Viewport=function(e){return this.getEventService().client2Viewport(e)},n.prototype.viewport2Client=function(e){return this.getEventService().viewport2Client(e)},n.prototype.viewport2Canvas=function(e){return this.getEventService().viewport2Canvas(e)},n.prototype.canvas2Viewport=function(e){return this.getEventService().canvas2Viewport(e)},n.prototype.getPointByClient=function(e,r){return this.client2Viewport({x:e,y:r})},n.prototype.getClientByPoint=function(e,r){return this.viewport2Client({x:e,y:r})},n}(i6),SOt={}.toString,OOt=function(t,n){return SOt.call(t)==="[object "+n+"]"};const l6=OOt,MOt=function(t){return l6(t,"String")};var AOt=function(t){return l6(t,"Number")};const EOt=AOt;var TOt=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.landmarks=[],e}return n.prototype.rotate=function(e,r,i){if(this.relElevation=kc(r),this.relAzimuth=kc(e),this.relRoll=kc(i),this.elevation+=this.relElevation,this.azimuth+=this.relAzimuth,this.roll+=this.relRoll,this.type===ue.EXPLORING){var a=Po(on(),[1,0,0],je((this.rotateWorld?1:-1)*this.relElevation)),o=Po(on(),[0,1,0],je((this.rotateWorld?1:-1)*this.relAzimuth)),s=Po(on(),[0,0,1],je(this.relRoll)),l=Bo(on(),o,a);l=Bo(on(),l,s);var c=fS(pe(),l);Ro(this.matrix,this.matrix,[0,0,-this.distance]),Vn(this.matrix,this.matrix,c),Ro(this.matrix,this.matrix,[0,0,this.distance])}else{if(Math.abs(this.elevation)>90)return this;this.computeMatrix()}return this._getAxes(),this.type===ue.ORBITING||this.type===ue.EXPLORING?this._getPosition():this.type===ue.TRACKING&&this._getFocalPoint(),this._update(),this},n.prototype.pan=function(e,r){var i=tr(e,r,0),a=Ca(this.position);return bc(a,a,mb($t(),this.right,i[0])),bc(a,a,mb($t(),this.up,i[1])),this._setPosition(a),this.triggerUpdate(),this},n.prototype.dolly=function(e){var r=this.forward,i=Ca(this.position),a=e*this.dollyingStep,o=this.distance+e*this.dollyingStep;return a=Math.max(Math.min(o,this.maxDistance),this.minDistance)-this.distance,i[0]+=a*r[0],i[1]+=a*r[1],i[2]+=a*r[2],this._setPosition(i),this.type===ue.ORBITING||this.type===ue.EXPLORING?this._getDistance():this.type===ue.TRACKING&&bc(this.focalPoint,i,this.distanceVector),this.triggerUpdate(),this},n.prototype.cancelLandmarkAnimation=function(){this.landmarkAnimationID!==void 0&&this.canvas.cancelAnimationFrame(this.landmarkAnimationID)},n.prototype.createLandmark=function(e,r){var i,a,o,s;r===void 0&&(r={});var l=r.position,c=l===void 0?this.position:l,u=r.focalPoint,f=u===void 0?this.focalPoint:u,h=r.roll,d=r.zoom,p=new tt.CameraContribution;p.setType(this.type,void 0),p.setPosition(c[0],(i=c[1])!==null&&i!==void 0?i:this.position[1],(a=c[2])!==null&&a!==void 0?a:this.position[2]),p.setFocalPoint(f[0],(o=f[1])!==null&&o!==void 0?o:this.focalPoint[1],(s=f[2])!==null&&s!==void 0?s:this.focalPoint[2]),p.setRoll(h??this.roll),p.setZoom(d??this.zoom);var v={name:e,matrix:lS(p.getWorldTransform()),right:Ca(p.right),up:Ca(p.up),forward:Ca(p.forward),position:Ca(p.getPosition()),focalPoint:Ca(p.getFocalPoint()),distanceVector:Ca(p.getDistanceVector()),distance:p.getDistance(),dollyingStep:p.getDollyingStep(),azimuth:p.getAzimuth(),elevation:p.getElevation(),roll:p.getRoll(),relAzimuth:p.relAzimuth,relElevation:p.relElevation,relRoll:p.relRoll,zoom:p.getZoom()};return this.landmarks.push(v),v},n.prototype.gotoLandmark=function(e,r){var i=this;r===void 0&&(r={});var a=MOt(e)?this.landmarks.find(function(T){return T.name===e}):e;if(a){var o=EOt(r)?{duration:r}:r,s=o.easing,l=s===void 0?"linear":s,c=o.duration,u=c===void 0?100:c,f=o.easingFunction,h=f===void 0?void 0:f,d=o.onfinish,p=d===void 0?void 0:d,v=o.onframe,g=v===void 0?void 0:v,y=.01;if(u===0){this.syncFromLandmark(a),p&&p();return}this.cancelLandmarkAnimation();var m=a.position,x=a.focalPoint,b=a.zoom,w=a.roll,S=h||tt.EasingFunction(l),O,M=function(){i.setFocalPoint(x),i.setPosition(m),i.setRoll(w),i.setZoom(b),i.computeMatrix(),i.triggerUpdate(),p&&p()},A=function(T){O===void 0&&(O=T);var C=T-O;if(C>u){M();return}var P=S(C/u),_=$t(),k=$t(),I=1,L=0;xb(_,i.focalPoint,x,P),xb(k,i.position,m,P),L=i.roll*(1-P)+w*P,I=i.zoom*(1-P)+b*P,i.setFocalPoint(_),i.setPosition(k),i.setRoll(L),i.setZoom(I);var F=cT(_,x)+cT(k,m);if(F<=y&&b==null&&w==null){M();return}i.computeMatrix(),i.triggerUpdate(),C<u&&(g&&g(P),i.landmarkAnimationID=i.canvas.requestAnimationFrame(A))};this.canvas.requestAnimationFrame(A)}},n.prototype.syncFromLandmark=function(e){this.matrix=al(this.matrix,e.matrix),this.right=br(this.right,e.right),this.up=br(this.up,e.up),this.forward=br(this.forward,e.forward),this.position=br(this.position,e.position),this.focalPoint=br(this.focalPoint,e.focalPoint),this.distanceVector=br(this.distanceVector,e.distanceVector),this.azimuth=e.azimuth,this.elevation=e.elevation,this.roll=e.roll,this.relAzimuth=e.relAzimuth,this.relElevation=e.relElevation,this.relRoll=e.relRoll,this.dollyingStep=e.dollyingStep,this.distance=e.distance,this.zoom=e.zoom},n}(Nz);tt.CameraContribution=TOt;var COt=function(t){return t==null};const yx=COt;var POt={}.toString,kOt=function(t,n){return POt.call(t)==="[object "+n+"]"};const _Ot=kOt;var LOt=function(t,n,e){return t<n?n:t>e?e:t};const Ys=LOt;var IOt=function(t){return _Ot(t,"Number")};const FOt=IOt;var mx=function(t){G(n,t);function n(e,r,i,a){var o=t.call(this,e)||this;return o.currentTime=i,o.timelineTime=a,o.target=r,o.type="finish",o.bubbles=!1,o.currentTarget=r,o.defaultPrevented=!1,o.eventPhase=o.AT_TARGET,o.timeStamp=Date.now(),o.currentTime=i,o.timelineTime=a,o}return n}(Om),DOt=0,ROt=function(){function t(n,e){var r;this.currentTimePending=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._playbackRate=1,this._inTimeline=!0,this.effect=n,n.animation=this,this.timeline=e,this.id="".concat(DOt++),this._inEffect=!!this.effect.update(0),this._totalDuration=Number((r=this.effect)===null||r===void 0?void 0:r.getComputedTiming().endTime),this._holdTime=0,this._paused=!1,this.oldPlayState="idle",this.updatePromises()}return Object.defineProperty(t.prototype,"pending",{get:function(){return this._startTime===null&&!this._paused&&this.playbackRate!==0||this.currentTimePending},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"playState",{get:function(){return this._idle?"idle":this._isFinished?"finished":this._paused?"paused":"running"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ready",{get:function(){var n=this;return this.readyPromise||(this.timeline.animationsWithPromises.indexOf(this)===-1&&this.timeline.animationsWithPromises.push(this),this.readyPromise=new Promise(function(e,r){n.resolveReadyPromise=function(){e(n)},n.rejectReadyPromise=function(){r(new Error)}}),this.pending||this.resolveReadyPromise()),this.readyPromise},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"finished",{get:function(){var n=this;return this.finishedPromise||(this.timeline.animationsWithPromises.indexOf(this)===-1&&this.timeline.animationsWithPromises.push(this),this.finishedPromise=new Promise(function(e,r){n.resolveFinishedPromise=function(){e(n)},n.rejectFinishedPromise=function(){r(new Error)}}),this.playState==="finished"&&this.resolveFinishedPromise()),this.finishedPromise},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentTime",{get:function(){return this.updatePromises(),this._idle||this.currentTimePending?null:this._currentTime},set:function(n){var e;n=Number(n),!isNaN(n)&&(this.timeline.restart(),!this._paused&&this._startTime!==null&&(this._startTime=Number((e=this.timeline)===null||e===void 0?void 0:e.currentTime)-n/this.playbackRate),this.currentTimePending=!1,this._currentTime!==n&&(this._idle&&(this._idle=!1,this._paused=!0),this.tickCurrentTime(n,!0),this.timeline.applyDirtiedAnimation(this)))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"startTime",{get:function(){return this._startTime},set:function(n){if(n!==null){if(this.updatePromises(),n=Number(n),isNaN(n)||this._paused||this._idle)return;this._startTime=n,this.tickCurrentTime((Number(this.timeline.currentTime)-this._startTime)*this.playbackRate),this.timeline.applyDirtiedAnimation(this),this.updatePromises()}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(n){if(n!==this._playbackRate){this.updatePromises();var e=this.currentTime;this._playbackRate=n,this.startTime=null,this.playState!=="paused"&&this.playState!=="idle"&&(this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this)),e!==null&&(this.currentTime=e),this.updatePromises()}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_isFinished",{get:function(){return!this._idle&&(this._playbackRate>0&&Number(this._currentTime)>=this._totalDuration||this._playbackRate<0&&Number(this._currentTime)<=0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalDuration",{get:function(){return this._totalDuration},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_needsTick",{get:function(){return this.pending||this.playState==="running"||!this._finishedFlag},enumerable:!1,configurable:!0}),t.prototype.updatePromises=function(){var n=this.oldPlayState,e=this.pending?"pending":this.playState;return this.readyPromise&&e!==n&&(e==="idle"?(this.rejectReadyPromise(),this.readyPromise=void 0):n==="pending"?this.resolveReadyPromise():e==="pending"&&(this.readyPromise=void 0)),this.finishedPromise&&e!==n&&(e==="idle"?(this.rejectFinishedPromise(),this.finishedPromise=void 0):e==="finished"?this.resolveFinishedPromise():n==="finished"&&(this.finishedPromise=void 0)),this.oldPlayState=e,this.readyPromise||this.finishedPromise},t.prototype.play=function(){this.updatePromises(),this._paused=!1,(this._isFinished||this._idle)&&(this.rewind(),this._startTime=null),this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this),this.timeline.animations.indexOf(this)===-1&&this.timeline.animations.push(this),this.updatePromises()},t.prototype.pause=function(){this.updatePromises(),this.currentTime&&(this._holdTime=this.currentTime),!this._isFinished&&!this._paused&&!this._idle?this.currentTimePending=!0:this._idle&&(this.rewind(),this._idle=!1),this._startTime=null,this._paused=!0,this.updatePromises()},t.prototype.finish=function(){this.updatePromises(),!this._idle&&(this.currentTime=this._playbackRate>0?this._totalDuration:0,this._startTime=this._totalDuration-this.currentTime,this.currentTimePending=!1,this.timeline.applyDirtiedAnimation(this),this.updatePromises())},t.prototype.cancel=function(){var n=this;if(this.updatePromises(),!!this._inEffect&&(this._inEffect=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._startTime=null,this.effect.update(null),this.timeline.applyDirtiedAnimation(this),this.updatePromises(),this.oncancel)){var e=new mx(null,this,this.currentTime,null);setTimeout(function(){n.oncancel(e)})}},t.prototype.reverse=function(){this.updatePromises();var n=this.currentTime;this.playbackRate*=-1,this.play(),n!==null&&(this.currentTime=n),this.updatePromises()},t.prototype.updatePlaybackRate=function(n){this.playbackRate=n},t.prototype.targetAnimations=function(){var n,e=(n=this.effect)===null||n===void 0?void 0:n.target;return e.getAnimations()},t.prototype.markTarget=function(){var n=this.targetAnimations();n.indexOf(this)===-1&&n.push(this)},t.prototype.unmarkTarget=function(){var n=this.targetAnimations(),e=n.indexOf(this);e!==-1&&n.splice(e,1)},t.prototype.tick=function(n,e){!this._idle&&!this._paused&&(this._startTime===null?e&&(this.startTime=n-this._currentTime/this.playbackRate):this._isFinished||this.tickCurrentTime((n-this._startTime)*this.playbackRate)),e&&(this.currentTimePending=!1,this.fireEvents(n))},t.prototype.rewind=function(){if(this.playbackRate>=0)this.currentTime=0;else if(this._totalDuration<1/0)this.currentTime=this._totalDuration;else throw new Error("Unable to rewind negative playback rate animation with infinite duration")},t.prototype.persist=function(){throw new Error(ye)},t.prototype.addEventListener=function(n,e,r){throw new Error(ye)},t.prototype.removeEventListener=function(n,e,r){throw new Error(ye)},t.prototype.dispatchEvent=function(n){throw new Error(ye)},t.prototype.commitStyles=function(){throw new Error(ye)},t.prototype.ensureAlive=function(){var n,e;this.playbackRate<0&&this.currentTime===0?this._inEffect=!!(!((n=this.effect)===null||n===void 0)&&n.update(-1)):this._inEffect=!!(!((e=this.effect)===null||e===void 0)&&e.update(this.currentTime)),!this._inTimeline&&(this._inEffect||!this._finishedFlag)&&(this._inTimeline=!0,this.timeline.animations.push(this))},t.prototype.tickCurrentTime=function(n,e){n!==this._currentTime&&(this._currentTime=n,this._isFinished&&!e&&(this._currentTime=this._playbackRate>0?this._totalDuration:0),this.ensureAlive())},t.prototype.fireEvents=function(n){var e=this;if(this._isFinished){if(!this._finishedFlag){if(this.onfinish){var r=new mx(null,this,this.currentTime,n);setTimeout(function(){e.onfinish&&e.onfinish(r)})}this._finishedFlag=!0}}else{if(this.onframe&&this.playState==="running"){var i=new mx(null,this,this.currentTime,n);this.onframe(i)}this._finishedFlag=!1}},t}(),BOt=4,NOt=.001,$Ot=1e-7,jOt=10,Af=11,Qp=1/(Af-1),zOt=typeof Float32Array=="function",c6=function(t,n){return 1-3*n+3*t},u6=function(t,n){return 3*n-6*t},f6=function(t){return 3*t},Jg=function(t,n,e){return((c6(n,e)*t+u6(n,e))*t+f6(n))*t},h6=function(t,n,e){return 3*c6(n,e)*t*t+2*u6(n,e)*t+f6(n)},GOt=function(t,n,e,r,i){var a,o,s=0;do o=n+(e-n)/2,a=Jg(o,r,i)-t,a>0?e=o:n=o;while(Math.abs(a)>$Ot&&++s<jOt);return o},YOt=function(t,n,e,r){for(var i=0;i<BOt;++i){var a=h6(n,e,r);if(a===0)return n;var o=Jg(n,e,r)-t;n-=o/a}return n},KM=function(t,n,e,r){if(!(0<=t&&t<=1&&0<=e&&e<=1))throw new Error("bezier x values must be in [0, 1] range");if(t===n&&e===r)return function(s){return s};for(var i=zOt?new Float32Array(Af):new Array(Af),a=0;a<Af;++a)i[a]=Jg(a*Qp,t,e);var o=function(s){for(var l=0,c=1,u=Af-1;c!==u&&i[c]<=s;++c)l+=Qp;--c;var f=(s-i[c])/(i[c+1]-i[c]),h=l+f*Qp,d=h6(h,t,e);return d>=NOt?YOt(s,h,t,e):d===0?h:GOt(s,l,l+Qp,t,e)};return function(s){return s===0||s===1?s:Jg(o(s),n,r)}},WOt=function(t){return t=t.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())}),t.charAt(0)==="-"?t.substring(1):t},Jp=function(t){return Math.pow(t,2)},tv=function(t){return Math.pow(t,3)},ev=function(t){return Math.pow(t,4)},nv=function(t){return Math.pow(t,5)},rv=function(t){return Math.pow(t,6)},iv=function(t){return 1-Math.cos(t*Math.PI/2)},av=function(t){return 1-Math.sqrt(1-t*t)},ov=function(t){return t*t*(3*t-2)},sv=function(t){for(var n,e=4;t<((n=Math.pow(2,--e))-1)/11;);return 1/Math.pow(4,3-e)-7.5625*Math.pow((n*3-2)/22-t,2)},lv=function(t,n){n===void 0&&(n=[]);var e=R(n,2),r=e[0],i=r===void 0?1:r,a=e[1],o=a===void 0?.5:a,s=Ys(Number(i),1,10),l=Ys(Number(o),.1,2);return t===0||t===1?t:-s*Math.pow(2,10*(t-1))*Math.sin((t-1-l/(Math.PI*2)*Math.asin(1/s))*(Math.PI*2)/l)},hf=function(t,n,e){n===void 0&&(n=[]);var r=R(n,4),i=r[0],a=i===void 0?1:i,o=r[1],s=o===void 0?100:o,l=r[2],c=l===void 0?10:l,u=r[3],f=u===void 0?0:u;a=Ys(a,.1,1e3),s=Ys(s,.1,1e3),c=Ys(c,.1,1e3),f=Ys(f,.1,1e3);var h=Math.sqrt(s/a),d=c/(2*Math.sqrt(s*a)),p=d<1?h*Math.sqrt(1-d*d):0,v=1,g=d<1?(d*h+-f)/p:-f+h,y=e?e*t/1e3:t;return d<1?y=Math.exp(-y*d*h)*(v*Math.cos(p*y)+g*Math.sin(p*y)):y=(v+g*y)*Math.exp(-y*h),t===0||t===1?t:1-y},xx=function(t,n){n===void 0&&(n=[]);var e=R(n,2),r=e[0],i=r===void 0?10:r,a=e[1],o=a=="start"?Math.ceil:Math.floor;return o(Ys(t,0,1)*i)/i},V_=function(t,n){n===void 0&&(n=[]);var e=R(n,4),r=e[0],i=e[1],a=e[2],o=e[3];return KM(r,i,a,o)(t)},cv=KM(.42,0,1,1),ti=function(t){return function(n,e,r){return e===void 0&&(e=[]),1-t(1-n,e,r)}},ei=function(t){return function(n,e,r){return e===void 0&&(e=[]),n<.5?t(n*2,e,r)/2:1-t(n*-2+2,e,r)/2}},ni=function(t){return function(n,e,r){return e===void 0&&(e=[]),n<.5?(1-t(1-n*2,e,r))/2:(t(n*2-1,e,r)+1)/2}},H_={steps:xx,"step-start":function(t){return xx(t,[1,"start"])},"step-end":function(t){return xx(t,[1,"end"])},linear:function(t){return t},"cubic-bezier":V_,ease:function(t){return V_(t,[.25,.1,.25,1])},in:cv,out:ti(cv),"in-out":ei(cv),"out-in":ni(cv),"in-quad":Jp,"out-quad":ti(Jp),"in-out-quad":ei(Jp),"out-in-quad":ni(Jp),"in-cubic":tv,"out-cubic":ti(tv),"in-out-cubic":ei(tv),"out-in-cubic":ni(tv),"in-quart":ev,"out-quart":ti(ev),"in-out-quart":ei(ev),"out-in-quart":ni(ev),"in-quint":nv,"out-quint":ti(nv),"in-out-quint":ei(nv),"out-in-quint":ni(nv),"in-expo":rv,"out-expo":ti(rv),"in-out-expo":ei(rv),"out-in-expo":ni(rv),"in-sine":iv,"out-sine":ti(iv),"in-out-sine":ei(iv),"out-in-sine":ni(iv),"in-circ":av,"out-circ":ti(av),"in-out-circ":ei(av),"out-in-circ":ni(av),"in-back":ov,"out-back":ti(ov),"in-out-back":ei(ov),"out-in-back":ni(ov),"in-bounce":sv,"out-bounce":ti(sv),"in-out-bounce":ei(sv),"out-in-bounce":ni(sv),"in-elastic":lv,"out-elastic":ti(lv),"in-out-elastic":ei(lv),"out-in-elastic":ni(lv),spring:hf,"spring-in":hf,"spring-out":ti(hf),"spring-in-out":ei(hf),"spring-out-in":ni(hf)},VOt=function(t){return WOt(t).replace(/^ease-/,"").replace(/(\(|\s).+/,"").toLowerCase().trim()},HOt=function(t){return H_[VOt(t)]||H_.linear},XOt=function(t){return t},UOt=1,qOt=.5,X_=0;function U_(t,n){return function(e){if(e>=1)return 1;var r=1/t;return e+=n*r,e-e%r}}var uv="\\s*(-?\\d+\\.?\\d*|-?\\.\\d+)\\s*",ZOt=new RegExp("cubic-bezier\\("+uv+","+uv+","+uv+","+uv+"\\)"),KOt=/steps\(\s*(\d+)\s*\)/,QOt=/steps\(\s*(\d+)\s*,\s*(start|middle|end)\s*\)/;function QM(t){var n=ZOt.exec(t);if(n)return KM.apply(void 0,X([],R(n.slice(1).map(Number)),!1));var e=KOt.exec(t);if(e)return U_(Number(e[1]),X_);var r=QOt.exec(t);return r?U_(Number(r[1]),{start:UOt,middle:qOt,end:X_}[r[2]]):HOt(t)}function JOt(t){return Math.abs(tMt(t)/(t.playbackRate||1))}function tMt(t){var n;return t.duration===0||t.iterations===0?0:(t.duration==="auto"?0:Number(t.duration))*((n=t.iterations)!==null&&n!==void 0?n:1)}var d6=0,JM=1,Am=2,p6=3;function eMt(t,n,e){if(n===null)return d6;var r=e.endTime;return n<Math.min(e.delay,r)?JM:n>=Math.min(e.delay+t+e.endDelay,r)?Am:p6}function nMt(t,n,e,r,i){switch(r){case JM:return n==="backwards"||n==="both"?0:null;case p6:return e-i;case Am:return n==="forwards"||n==="both"?t:null;case d6:return null}}function rMt(t,n,e,r,i){var a=i;return t===0?n!==JM&&(a+=e):a+=r/t,a}function iMt(t,n,e,r,i,a){var o=t===1/0?n%1:t%1;return o===0&&e===Am&&r!==0&&(i!==0||a===0)&&(o=1),o}function aMt(t,n,e,r){return t===Am&&n===1/0?1/0:e===1?Math.floor(r)-1:Math.floor(r)}function oMt(t,n,e){var r=t;if(t!=="normal"&&t!=="reverse"){var i=n;t==="alternate-reverse"&&(i+=1),r="normal",i!==1/0&&i%2!==0&&(r="reverse")}return r==="normal"?e:1-e}function sMt(t,n,e){var r=eMt(t,n,e),i=nMt(t,e.fill,n,r,e.delay);if(i===null)return null;var a=e.duration==="auto"?0:e.duration,o=rMt(a,r,e.iterations,i,e.iterationStart),s=iMt(o,e.iterationStart,r,e.iterations,i,a),l=aMt(r,e.iterations,s,o),c=oMt(e.direction,l,s);return e.currentIteration=l,e.progress=c,e.easingFunction(c)}function lMt(t,n,e){var r=cMt(t,n),i=uMt(r,e);return function(a,o){if(o!==null)i.filter(function(l){return o>=l.applyFrom&&o<l.applyTo}).forEach(function(l){var c=o-l.startOffset,u=l.endOffset-l.startOffset,f=u===0?0:l.easingFunction(c/u);a.setAttribute(l.property,l.interpolation(f))});else for(var s in r)v6(s)&&a.setAttribute(s,null)}}function v6(t){return t!=="offset"&&t!=="easing"&&t!=="composite"&&t!=="computedOffset"}function cMt(t,n){for(var e={},r=0;r<t.length;r++)for(var i in t[r])if(v6(i)){var a={offset:t[r].offset,computedOffset:t[r].computedOffset,easing:t[r].easing,easingFunction:QM(t[r].easing)||n.easingFunction,value:t[r][i]};e[i]=e[i]||[],e[i].push(a)}return e}function uMt(t,n){var e=[];for(var r in t)for(var i=t[r],a=0;a<i.length-1;a++){var o=a,s=a+1,l=i[o].computedOffset,c=i[s].computedOffset,u=l,f=c;a===0&&(u=-1/0,c===0&&(s=o)),a===i.length-2&&(f=1/0,l===1&&(o=s)),e.push({applyFrom:u,applyTo:f,startOffset:i[o].computedOffset,endOffset:i[s].computedOffset,easingFunction:i[o].easingFunction,property:r,interpolation:fMt(r,i[o].value,i[s].value,n)})}return e.sort(function(h,d){return h.startOffset-d.startOffset}),e}var q_=function(t,n,e){return function(r){var i=g6(t,n,r);return!tt.enableCSSParsing&&FOt(i)?i:e(i)}};function fMt(t,n,e,r){var i=vo[t];if(i&&i.syntax&&i.int){var a=tt.styleValueRegistry.getPropertySyntax(i.syntax);if(a){var o=void 0,s=void 0;if(tt.enableCSSParsing){var l=tt.styleValueRegistry.parseProperty(t,n,r),c=tt.styleValueRegistry.parseProperty(t,e,r);o=tt.styleValueRegistry.computeProperty(t,l,r),s=tt.styleValueRegistry.computeProperty(t,c,r)}else{var u=a.parserWithCSSDisabled;o=u?u(n,r):n,s=u?u(e,r):e}var f=a.mixer(o,s,r);if(f){var h=q_.apply(void 0,X([],R(f),!1));return function(d){return d===0?n:d===1?e:h(d)}}}}return q_(!1,!0,function(d){return d?e:n})}function g6(t,n,e){if(typeof t=="number"&&typeof n=="number")return t*(1-e)+n*e;if(typeof t=="boolean"&&typeof n=="boolean"||typeof t=="string"&&typeof n=="string")return e<.5?t:n;if(Array.isArray(t)&&Array.isArray(n)){for(var r=t.length,i=n.length,a=Math.max(r,i),o=[],s=0;s<a;s++)o.push(g6(t[s<r?s:r-1],n[s<i?s:i-1],e));return o}throw new Error("Mismatched interpolation arguments "+t+":"+n)}var hMt=function(){function t(){this.delay=0,this.direction="normal",this.duration="auto",this._easing="linear",this.easingFunction=XOt,this.endDelay=0,this.fill="auto",this.iterationStart=0,this.iterations=1,this.currentIteration=null,this.progress=null}return Object.defineProperty(t.prototype,"easing",{get:function(){return this._easing},set:function(n){this.easingFunction=QM(n),this._easing=n},enumerable:!1,configurable:!0}),t}();function dMt(t){var n=[];for(var e in t)if(!(e in["easing","offset","composite"])){var r=t[e];Array.isArray(r)||(r=[r]);for(var i=r.length,a=0;a<i;a++){if(!n[a]){var o={};"offset"in t&&(o.offset=Number(t.offset)),"easing"in t&&(o.easing=t.easing),"composite"in t&&(o.composite=t.composite),n[a]=o}r[a]!==void 0&&r[a]!==null&&(n[a][e]=r[a])}}return n.sort(function(s,l){return(s.computedOffset||0)-(l.computedOffset||0)}),n}function Z_(t,n){if(t===null)return[];Array.isArray(t)||(t=dMt(t));for(var e=t.map(function(l){var c={};n!=null&&n.composite&&(c.composite="auto");for(var u in l){var f=l[u];if(u==="offset"){if(f!==null){if(f=Number(f),!isFinite(f))throw new Error("Keyframe offsets must be numbers.");if(f<0||f>1)throw new Error("Keyframe offsets must be between 0 and 1.");c.computedOffset=f}}else if(u==="composite"&&["replace","add","accumulate","auto"].indexOf(f)===-1)throw new Error("".concat(f," compositing is not supported"));c[u]=f}return c.offset===void 0&&(c.offset=null),c.easing===void 0&&(c.easing=(n==null?void 0:n.easing)||"linear"),c.composite===void 0&&(c.composite="auto"),c}),r=!0,i=-1/0,a=0;a<e.length;a++){var o=e[a].offset;if(yx(o))r=!1;else{if(o<i)throw new TypeError("Keyframes are not loosely sorted by offset. Sort or specify offsets.");i=o}}e=e.filter(function(l){return Number(l.offset)>=0&&Number(l.offset)<=1});function s(){var l,c,u=e.length;e[u-1].computedOffset=Number((l=e[u-1].offset)!==null&&l!==void 0?l:1),u>1&&(e[0].computedOffset=Number((c=e[0].offset)!==null&&c!==void 0?c:0));for(var f=0,h=Number(e[0].computedOffset),d=1;d<u;d++){var p=e[d].computedOffset;if(!yx(p)&&!yx(h)){for(var v=1;v<d-f;v++)e[f+v].computedOffset=h+(Number(p)-h)*v/(d-f);f=d,h=Number(p)}}}return r||s(),e}var pMt="backwards|forwards|both|none".split("|"),vMt="reverse|alternate|alternate-reverse".split("|");function gMt(t,n){var e=new hMt;return n&&(e.fill="both",e.duration="auto"),typeof t=="number"&&!isNaN(t)?e.duration=t:t!==void 0&&Object.keys(t).forEach(function(r){if(t[r]!==void 0&&t[r]!==null&&t[r]!=="auto"){if((typeof e[r]=="number"||r==="duration")&&(typeof t[r]!="number"||isNaN(t[r]))||r==="fill"&&pMt.indexOf(t[r])===-1||r==="direction"&&vMt.indexOf(t[r])===-1)return;e[r]=t[r]}}),e}function yMt(t,n){return t=mMt(t??{duration:"auto"}),gMt(t,n)}function mMt(t){return typeof t=="number"&&(isNaN(t)?t={duration:"auto"}:t={duration:t}),t}var xMt=function(){function t(n,e,r){var i=this;this.composite="replace",this.iterationComposite="replace",this.target=n,this.timing=yMt(r,!1),this.timing.effect=this,this.timing.activeDuration=JOt(this.timing),this.timing.endTime=Math.max(0,this.timing.delay+this.timing.activeDuration+this.timing.endDelay),this.normalizedKeyframes=Z_(e,this.timing),this.interpolations=lMt(this.normalizedKeyframes,this.timing,this.target);var a=tt.globalThis.Proxy;this.computedTiming=a?new a(this.timing,{get:function(o,s){return s==="duration"?o.duration==="auto"?0:o.duration:s==="fill"?o.fill==="auto"?"none":o.fill:s==="localTime"?i.animation&&i.animation.currentTime||null:s==="currentIteration"?!i.animation||i.animation.playState!=="running"?null:o.currentIteration||0:s==="progress"?!i.animation||i.animation.playState!=="running"?null:o.progress||0:o[s]},set:function(){return!0}}):this.timing}return t.prototype.applyInterpolations=function(){this.interpolations(this.target,Number(this.timeFraction))},t.prototype.update=function(n){return n===null?!1:(this.timeFraction=sMt(this.timing.activeDuration,n,this.timing),this.timeFraction!==null)},t.prototype.getKeyframes=function(){return this.normalizedKeyframes},t.prototype.setKeyframes=function(n){this.normalizedKeyframes=Z_(n)},t.prototype.getComputedTiming=function(){return this.computedTiming},t.prototype.getTiming=function(){return this.timing},t.prototype.updateTiming=function(n){var e=this;Object.keys(n||{}).forEach(function(r){e.timing[r]=n[r]})},t}();function K_(t,n){return Number(t.id)-Number(n.id)}var bMt=function(){function t(n){var e=this;this.document=n,this.animations=[],this.ticking=!1,this.timelineTicking=!1,this.hasRestartedThisFrame=!1,this.animationsWithPromises=[],this.inTick=!1,this.pendingEffects=[],this.currentTime=null,this.rafId=0,this.rafCallbacks=[],this.webAnimationsNextTick=function(r){e.currentTime=r,e.discardAnimations(),e.animations.length===0?e.timelineTicking=!1:e.requestAnimationFrame(e.webAnimationsNextTick)},this.processRafCallbacks=function(r){var i=e.rafCallbacks;e.rafCallbacks=[],r<Number(e.currentTime)&&(r=Number(e.currentTime)),e.animations.sort(K_),e.animations=e.tick(r,!0,e.animations)[0],i.forEach(function(a){a[1](r)}),e.applyPendingEffects()}}return t.prototype.getAnimations=function(){return this.discardAnimations(),this.animations.slice()},t.prototype.isTicking=function(){return this.inTick},t.prototype.play=function(n,e,r){var i=new xMt(n,e,r),a=new ROt(i,this);return this.animations.push(a),this.restartWebAnimationsNextTick(),a.updatePromises(),a.play(),a.updatePromises(),a},t.prototype.applyDirtiedAnimation=function(n){var e=this;if(!this.inTick){n.markTarget();var r=n.targetAnimations();r.sort(K_);var i=this.tick(Number(this.currentTime),!1,r.slice())[1];i.forEach(function(a){var o=e.animations.indexOf(a);o!==-1&&e.animations.splice(o,1)}),this.applyPendingEffects()}},t.prototype.restart=function(){return this.ticking||(this.ticking=!0,this.requestAnimationFrame(function(){}),this.hasRestartedThisFrame=!0),this.hasRestartedThisFrame},t.prototype.destroy=function(){this.document.defaultView.cancelAnimationFrame(this.frameId)},t.prototype.applyPendingEffects=function(){this.pendingEffects.forEach(function(n){n==null||n.applyInterpolations()}),this.pendingEffects=[]},t.prototype.updateAnimationsPromises=function(){this.animationsWithPromises=this.animationsWithPromises.filter(function(n){return n.updatePromises()})},t.prototype.discardAnimations=function(){this.updateAnimationsPromises(),this.animations=this.animations.filter(function(n){return n.playState!=="finished"&&n.playState!=="idle"})},t.prototype.restartWebAnimationsNextTick=function(){this.timelineTicking||(this.timelineTicking=!0,this.requestAnimationFrame(this.webAnimationsNextTick))},t.prototype.rAF=function(n){var e=this.rafId++;return this.rafCallbacks.length===0&&(this.frameId=this.document.defaultView.requestAnimationFrame(this.processRafCallbacks)),this.rafCallbacks.push([e,n]),e},t.prototype.requestAnimationFrame=function(n){var e=this;return this.rAF(function(r){e.updateAnimationsPromises(),n(r),e.updateAnimationsPromises()})},t.prototype.tick=function(n,e,r){var i,a,o=this;this.inTick=!0,this.hasRestartedThisFrame=!1,this.currentTime=n,this.ticking=!1;var s=[],l=[],c=[],u=[];return r.forEach(function(f){f.tick(n,e),f._inEffect?(l.push(f.effect),f.markTarget()):(s.push(f.effect),f.unmarkTarget()),f._needsTick&&(o.ticking=!0);var h=f._inEffect||f._needsTick;f._inTimeline=h,h?c.push(f):u.push(f)}),(i=this.pendingEffects).push.apply(i,X([],R(s),!1)),(a=this.pendingEffects).push.apply(a,X([],R(l),!1)),this.ticking&&this.requestAnimationFrame(function(){}),this.inTick=!1,[c,u]},t}();tt.EasingFunction=QM;tt.AnimationTimeline=bMt;function Ot(t){return new ty([t],null,t,t.ownerDocument)}let ty=class Fn{constructor(n=null,e=null,r=null,i=null,a=[null,null,null,null,null],o=[],s=[]){this._elements=Array.from(n),this._data=e,this._parent=r,this._document=i,this._enter=a[0],this._update=a[1],this._exit=a[2],this._merge=a[3],this._split=a[4],this._transitions=o,this._facetElements=s}selectAll(n){const e=typeof n=="string"?this._parent.querySelectorAll(n):n;return new Fn(e,null,this._elements[0],this._document)}selectFacetAll(n){const e=typeof n=="string"?this._parent.querySelectorAll(n):n;return new Fn(this._elements,null,this._parent,this._document,void 0,void 0,e)}select(n){const e=typeof n=="string"?this._parent.querySelectorAll(n)[0]||null:n;return new Fn([e],null,e,this._document)}append(n){const e=typeof n=="function"?n:()=>this.createElement(n),r=[];if(this._data!==null){for(let i=0;i<this._data.length;i++){const a=this._data[i],[o,s]=Array.isArray(a)?a:[a,null],l=e(o,i);l.__data__=o,s!==null&&(l.__fromElements__=s),this._parent.appendChild(l),r.push(l)}return new Fn(r,null,this._parent,this._document)}else{for(let i=0;i<this._elements.length;i++){const a=this._elements[i],o=a.__data__,s=e(o,i);a.appendChild(s),r.push(s)}return new Fn(r,null,r[0],this._document)}}maybeAppend(n,e,r){const i=this._elements[0],a=i.getElementById(n);if(a)return new Fn([a],null,this._parent,this._document);const o=typeof e=="string"?this.createElement(e):e();return o.id=n,r&&(o.className=r),i.appendChild(o),new Fn([o],null,this._parent,this._document)}data(n,e=i=>i,r=()=>null){const i=[],a=[],o=new Set(this._elements),s=[],l=new Set,c=new Map(this._elements.map((d,p)=>[e(d.__data__,p),d])),u=new Map(this._facetElements.map((d,p)=>[e(d.__data__,p),d])),f=Be(this._elements,d=>r(d.__data__));for(let d=0;d<n.length;d++){const p=n[d],v=e(p,d),g=r(p,d);if(c.has(v)){const y=c.get(v);y.__data__=p,y.__facet__=!1,a.push(y),o.delete(y),c.delete(v)}else if(u.has(v)){const y=u.get(v);y.__data__=p,y.__facet__=!0,a.push(y),u.delete(v)}else if(f.has(v)){const y=f.get(v);s.push([p,y]);for(const m of y)o.delete(m);f.delete(v)}else if(c.has(g)){const y=c.get(g);y.__toData__?y.__toData__.push(p):y.__toData__=[p],l.add(y),o.delete(y)}else i.push(p)}const h=[new Fn([],i,this._parent,this._document),new Fn(a,null,this._parent,this._document),new Fn(o,null,this._parent,this._document),new Fn([],s,this._parent,this._document),new Fn(l,null,this._parent,this._document)];return new Fn(this._elements,null,this._parent,this._document,h)}merge(n){const e=[...this._elements,...n._elements],r=[...this._transitions,...n._transitions];return new Fn(e,null,this._parent,this._document,void 0,r)}createElement(n){if(this._document)return this._document.createElement(n,{});const e=Fn.registry[n];return e?new e:nu(`Unknown node type: ${n}`)}join(n=o=>o,e=o=>o,r=o=>o.remove(),i=o=>o,a=o=>o.remove()){const o=n(this._enter),s=e(this._update),l=r(this._exit),c=i(this._merge),u=a(this._split);return s.merge(o).merge(l).merge(c).merge(u)}remove(){for(let n=0;n<this._elements.length;n++){const e=this._transitions[n];if(e){const r=Array.isArray(e)?e:[e];Promise.all(r.map(i=>i.finished)).then(()=>{this._elements[n].remove()})}else this._elements[n].remove()}return new Fn([],null,this._parent,this._document,void 0,this._transitions)}each(n){for(let e=0;e<this._elements.length;e++){const r=this._elements[e],i=r.__data__;n(i,e,r)}return this}attr(n,e){const r=typeof e!="function"?()=>e:e;return this.each(function(i,a,o){e!==void 0&&(o[n]=r(i,a,o))})}style(n,e){const r=typeof e!="function"?()=>e:e;return this.each(function(i,a,o){e!==void 0&&(o.style[n]=r(i,a,o))})}transition(n){const e=typeof n!="function"?()=>n:n,{_transitions:r}=this;return this.each(function(i,a,o){r[a]=e(i,a,o)})}on(n,e){return this.each(function(r,i,a){a.addEventListener(n,e)}),this}call(n,...e){return n(this,...e),this}node(){return this._elements[0]}nodes(){return this._elements}transitions(){return this._transitions}parent(){return this._parent}};ty.registry={g:$n,rect:Nl,circle:Yd,path:lr,text:Fi,ellipse:UM,image:qM,line:Wd,polygon:Vd,polyline:ZM,html:Mm};function fv(t,n,e){return Math.max(n,Math.min(t,e))}function ey(t,n=10){return typeof t!="number"||Math.abs(t)<1e-15?t:parseFloat(t.toFixed(n))}function gt(t,n){for(const[e,r]of Object.entries(n))t.style(e,r)}function wMt(t,n){return n.forEach((e,r)=>r===0?t.moveTo(e[0],e[1]):t.lineTo(e[0],e[1])),t.closePath(),t}function SMt(t,n,e){const{arrowSize:r}=e,i=typeof r=="string"?+parseFloat(r)/100*Re(t,n):r,a=Math.PI/6,o=Math.atan2(n[1]-t[1],n[0]-t[0]),s=Math.PI/2-o-a,l=[n[0]-i*Math.sin(s),n[1]-i*Math.cos(s)],c=o-a,u=[n[0]-i*Math.cos(c),n[1]-i*Math.sin(c)];return[l,u]}function Kh(t,n,e,r,i){const a=pi(Ue(r,n))+Math.PI,o=pi(Ue(r,e))+Math.PI;return t.arc(r[0],r[1],i,a,o,o-a<0),t}function y6(t,n,e,r="y",i="between",a=!1){const o=(g,y)=>g==="y"||g===!0?y?180:90:y?90:0,s=r==="y"||r===!0?e:n,l=o(r,a),c=Fl(s),[u,f]=Wa(c,g=>s[g]),h=new eo({domain:[u,f],range:[0,100]}),d=g=>h.map(s[g]),p={between:g=>`${t[g]} ${d(g)}%`,start:g=>g===0?`${t[g]} ${d(g)}%`:`${t[g-1]} ${d(g)}%, ${t[g]} ${d(g)}%`,end:g=>g===t.length-1?`${t[g]} ${d(g)}%`:`${t[g]} ${d(g)}%, ${t[g+1]} ${d(g)}%`},v=c.sort((g,y)=>d(g)-d(y)).map(p[i]||p.between).join(",");return`linear-gradient(${l}deg, ${v})`}function Em(t){const[n,e,r,i]=t;return[i,n,e,r]}function $l(t,n,e){const[r,i,,a]=_e(t)?Em(n):n,[o,s]=e,l=t.getCenter(),c=au(Ue(r,l)),u=au(Ue(i,l)),f=u===c&&o!==s?u+Math.PI*2:u;return{startAngle:c,endAngle:f-c>=0?f:Math.PI*2+f,innerRadius:Re(a,l),outerRadius:Re(r,l)}}function m6(t){const{colorAttribute:n,opacityAttribute:e=n}=t;return`${e}Opacity`}function x6(t,n){if(!Fe(t))return"";const e=t.getCenter(),{transform:r}=n;return`translate(${e[0]}, ${e[1]}) ${r||""}`}function b6(t){if(t.length===1)return t[0];const[[n,e,r=0],[i,a,o=0]]=t;return[(n+i)/2,(e+a)/2,(r+o)/2]}var Zv=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};function w6(t,n,e,r,i={}){const{inset:a=0,radius:o=0,insetLeft:s=a,insetTop:l=a,insetRight:c=a,insetBottom:u=a,radiusBottomLeft:f=o,radiusBottomRight:h=o,radiusTopLeft:d=o,radiusTopRight:p=o,minWidth:v=-1/0,maxWidth:g=1/0,minHeight:y=-1/0}=i,m=Zv(i,["inset","radius","insetLeft","insetTop","insetRight","insetBottom","radiusBottomLeft","radiusBottomRight","radiusTopLeft","radiusTopRight","minWidth","maxWidth","minHeight"]);if(!Fe(r)&&!bz(r)){const M=!!_e(r),[A,,T]=M?Em(n):n,[C,P]=A,[_,k]=Ue(T,A),I=_>0?C:C+_,L=k>0?P:P+k,F=Math.abs(_),B=Math.abs(k),D=I+s,N=L+l,j=F-(s+c),Y=B-(l+u),W=M?fv(j,y,1/0):fv(j,v,g),V=M?fv(Y,v,g):fv(Y,y,1/0),H=M?D:D-(W-j)/2,Q=M?N-(V-Y)/2:N-(V-Y);return Ot(t.createElement("rect",{})).style("x",H).style("y",Q).style("width",W).style("height",V).style("radius",[d,p,h,f]).call(gt,m).node()}const{y:x,y1:b}=e,w=r.getCenter(),S=$l(r,n,[x,b]),O=gm().cornerRadius(o).padAngle(a*Math.PI/180);return Ot(t.createElement("path",{})).style("path",O(S)).style("transform",`translate(${w[0]}, ${w[1]})`).style("radius",o).style("inset",a).call(gt,m).node()}const Hd=(t,n)=>{const{colorAttribute:e,opacityAttribute:r="fill",first:i=!0,last:a=!0}=t,o=Zv(t,["colorAttribute","opacityAttribute","first","last"]),{coordinate:s,document:l}=n;return(c,u,f)=>{const{color:h,radius:d=0}=f,p=Zv(f,["color","radius"]),v=p.lineWidth||1,{stroke:g,radius:y=d,radiusTopLeft:m=y,radiusTopRight:x=y,radiusBottomRight:b=y,radiusBottomLeft:w=y,innerRadius:S=0,innerRadiusTopLeft:O=S,innerRadiusTopRight:M=S,innerRadiusBottomRight:A=S,innerRadiusBottomLeft:T=S,lineWidth:C=e==="stroke"||g?v:0,inset:P=0,insetLeft:_=P,insetRight:k=P,insetBottom:I=P,insetTop:L=P,minWidth:F,maxWidth:B,minHeight:D}=o,N=Zv(o,["stroke","radius","radiusTopLeft","radiusTopRight","radiusBottomRight","radiusBottomLeft","innerRadius","innerRadiusTopLeft","innerRadiusTopRight","innerRadiusBottomRight","innerRadiusBottomLeft","lineWidth","inset","insetLeft","insetRight","insetBottom","insetTop","minWidth","maxWidth","minHeight"]),{color:j=h,opacity:Y}=u,W=[i?m:O,i?x:M,a?b:A,a?w:T],V=["radiusTopLeft","radiusTopRight","radiusBottomRight","radiusBottomLeft"];_e(s)&&V.push(V.shift());const H=Object.assign(Object.assign({radius:y},Object.fromEntries(V.map((Q,Z)=>[Q,W[Z]]))),{inset:P,insetLeft:_,insetRight:k,insetBottom:I,insetTop:L,minWidth:F,maxWidth:B,minHeight:D});return Ot(w6(l,c,u,s,H)).call(gt,p).style("fill","transparent").style(e,j).style(m6(t),Y).style("lineWidth",C).style("stroke",g===void 0?j:g).call(gt,N).node()}};Hd.props={defaultEnterAnimation:"scaleInY",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const jl=(t,n)=>Hd(Object.assign({colorAttribute:"fill"},t),n);jl.props=Object.assign(Object.assign({},Hd.props),{defaultMarker:"square"});const Tm=(t,n)=>Hd(Object.assign({colorAttribute:"stroke"},t),n);Tm.props=Object.assign(Object.assign({},Hd.props),{defaultMarker:"hollowSquare"});var Q_=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};function OMt(t,n,e){const[r,i,a,o]=t;if(_e(e)){const c=[n?n[0][0]:i[0],i[1]],u=[n?n[3][0]:a[0],a[1]];return[r,c,u,o]}const s=[i[0],n?n[0][1]:i[1]],l=[a[0],n?n[3][1]:a[1]];return[r,s,l,o]}const tA=(t,n)=>{const{adjustPoints:e=OMt}=t,r=Q_(t,["adjustPoints"]),{coordinate:i,document:a}=n;return(o,s,l,c)=>{const{index:u}=s,{color:f}=l,h=Q_(l,["color"]),d=c[u+1],p=e(o,d,i),v=!!_e(i),[g,y,m,x]=v?Em(p):p,{color:b=f,opacity:w}=s,S=es().curve(RM)([g,y,m,x]);return Ot(a.createElement("path",{})).call(gt,h).style("path",S).style("fill",b).style("fillOpacity",w).call(gt,r).node()}};tA.props={defaultMarker:"square"};function MMt(t,n,e){const[r,i,a,o]=t;if(_e(e)){const c=[n?n[0][0]:(i[0]+a[0])/2,i[1]],u=[n?n[3][0]:(i[0]+a[0])/2,a[1]];return[r,c,u,o]}const s=[i[0],n?n[0][1]:(i[1]+a[1])/2],l=[a[0],n?n[3][1]:(i[1]+a[1])/2];return[r,s,l,o]}const S6=(t,n)=>tA(Object.assign({adjustPoints:MMt},t),n);S6.props={defaultMarker:"square"};function cu(t){const n=typeof t=="function"?t:t.render;return class extends XM{connectedCallback(){this.draw()}attributeChangedCallback(){this.draw()}draw(){n(this)}}}var J_=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};const AMt=cu(t=>{const{d1:n,d2:e,style1:r,style2:i}=t.attributes,a=t.ownerDocument;Ot(t).maybeAppend("line",()=>a.createElement("path",{})).style("d",n).call(gt,r),Ot(t).maybeAppend("line1",()=>a.createElement("path",{})).style("d",e).call(gt,i)});function EMt(t,n){const e=[],r=[];let i=!1,a=null;for(const o of t)!n(o[0])||!n(o[1])?i=!0:(e.push(o),i&&(i=!1,r.push([a,o])),a=o);return[e,r]}const wi=(t,n)=>{const{curve:e,gradient:r=!1,gradientColor:i="between",defined:a=u=>!Number.isNaN(u)&&u!==void 0&&u!==null,connect:o=!1}=t,s=J_(t,["curve","gradient","gradientColor","defined","connect"]),{coordinate:l,document:c}=n;return(u,f,h)=>{const{color:d,lineWidth:p}=h,v=J_(h,["color","lineWidth"]),{color:g=d,size:y=p,seriesColor:m,seriesX:x,seriesY:b}=f,w=x6(l,f),S=_e(l),O=r&&m?y6(m,x,b,r,i,S):g,M=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},v),O&&{stroke:O}),y&&{lineWidth:y}),w&&{transform:w}),s);let A;if(Fe(l)){const I=l.getCenter();A=L=>bbt().angle((F,B)=>au(Ue(L[B],I))).radius((F,B)=>Re(L[B],I)).defined(([F,B])=>a(F)&&a(B)).curve(e)(L)}else A=es().x(I=>I[0]).y(I=>I[1]).defined(([I,L])=>a(I)&&a(L)).curve(e);const[T,C]=EMt(u,a),P=ct(M,"connect"),_=!!C.length;if(!_||o&&!Object.keys(P).length)return Ot(c.createElement("path",{})).style("d",A(T)||[]).call(gt,M).node();if(_&&!o)return Ot(c.createElement("path",{})).style("d",A(u)).call(gt,M).node();const k=I=>I.map(A).join(",");return Ot(new AMt).style("style1",Object.assign(Object.assign({},M),P)).style("style2",M).style("d1",k(C)).style("d2",A(u)).node()}};wi.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const O6=(t,n)=>{const{coordinate:e}=n;return(...r)=>{const i=Fe(e)?RM:jd;return wi(Object.assign({curve:i},t),n)(...r)}};O6.props=Object.assign(Object.assign({},wi.props),{defaultMarker:"line"});var TMt=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};const M6=(t,n)=>{const e=TMt(t,[]),{coordinate:r}=n;return(...i)=>{const a=Fe(r)?fz:_e(r)?gz:vz;return wi(Object.assign({curve:a},e),n)(...i)}};M6.props=Object.assign(Object.assign({},wi.props),{defaultMarker:"smooth"});const A6=(t,n)=>wi(Object.assign({curve:xz},t),n);A6.props=Object.assign(Object.assign({},wi.props),{defaultMarker:"hv"});const E6=(t,n)=>wi(Object.assign({curve:mz},t),n);E6.props=Object.assign(Object.assign({},wi.props),{defaultMarker:"vh"});const T6=(t,n)=>wi(Object.assign({curve:yz},t),n);T6.props=Object.assign(Object.assign({},wi.props),{defaultMarker:"hvh"});var CMt=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};function PMt(t,n,e,r,i){const a=Ue(e,n),o=pi(a),s=o+Math.PI/2,l=[r/2*Math.cos(s),r/2*Math.sin(s)],c=[i/2*Math.cos(s),i/2*Math.sin(s)],u=[i/2*Math.cos(o),i/2*Math.sin(o)],f=[r/2*Math.cos(o),r/2*Math.sin(o)],h=Hp(n,l),d=Hp(e,c),p=Hp(d,u),v=Hp(e,u),g=Ue(v,c),y=Ue(e,c),m=Ue(n,l),x=Ue(m,f),b=Ue(n,f),w=Ue(h,f);t.moveTo(...h),t.lineTo(...d),t.arcTo(...p,...v,i/2),t.arcTo(...g,...y,i/2),t.lineTo(...m),t.arcTo(...x,...b,r/2),t.arcTo(...w,...h,r/2),t.closePath()}const C6=(t,n)=>{const{document:e}=n;return(r,i,a)=>{const{seriesSize:o,color:s}=i,{color:l}=a,c=CMt(a,["color"]),u=bi();for(let f=0;f<r.length-1;f++){const h=r[f],d=r[f+1],p=o[f],v=o[f+1];[...h,...d].every(Oe)&&PMt(u,h,d,p,v)}return Ot(e.createElement("path",{})).call(gt,c).style("fill",s||l).style("d",u.toString()).call(gt,t).node()}};C6.props=Object.assign(Object.assign({},wi.props),{defaultMarker:"line"});var kMt=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};const eA=(t,n,e)=>[["M",t-e,n],["A",e,e,0,1,0,t+e,n],["A",e,e,0,1,0,t-e,n],["Z"]];eA.style=["fill"];const P6=eA.bind(void 0);P6.style=["stroke","lineWidth"];const Cm=(t,n,e)=>[["M",t-e,n-e],["L",t+e,n-e],["L",t+e,n+e],["L",t-e,n+e],["Z"]];Cm.style=["fill"];const k6=Cm.bind(void 0);k6.style=["fill"];const _6=Cm.bind(void 0);_6.style=["stroke","lineWidth"];const nA=(t,n,e)=>{const r=e*.618;return[["M",t-r,n],["L",t,n-e],["L",t+r,n],["L",t,n+e],["Z"]]};nA.style=["fill"];const L6=nA.bind(void 0);L6.style=["stroke","lineWidth"];const rA=(t,n,e)=>{const r=e*Math.sin(.3333333333333333*Math.PI);return[["M",t-e,n+r],["L",t,n-r],["L",t+e,n+r],["Z"]]};rA.style=["fill"];const I6=rA.bind(void 0);I6.style=["stroke","lineWidth"];const iA=(t,n,e)=>{const r=e*Math.sin(.3333333333333333*Math.PI);return[["M",t-e,n-r],["L",t+e,n-r],["L",t,n+r],["Z"]]};iA.style=["fill"];const F6=iA.bind(void 0);F6.style=["stroke","lineWidth"];const aA=(t,n,e)=>{const r=e/2*Math.sqrt(3);return[["M",t,n-e],["L",t+r,n-e/2],["L",t+r,n+e/2],["L",t,n+e],["L",t-r,n+e/2],["L",t-r,n-e/2],["Z"]]};aA.style=["fill"];const D6=aA.bind(void 0);D6.style=["stroke","lineWidth"];const oA=(t,n,e)=>{const r=e-1.5;return[["M",t-e,n-r],["L",t+e,n+r],["L",t+e,n-r],["L",t-e,n+r],["Z"]]};oA.style=["fill"];const R6=oA.bind(void 0);R6.style=["stroke","lineWidth"];const B6=(t,n,e)=>[["M",t,n+e],["L",t,n-e]];B6.style=["stroke","lineWidth"];const N6=(t,n,e)=>[["M",t-e,n-e],["L",t+e,n+e],["M",t+e,n-e],["L",t-e,n+e]];N6.style=["stroke","lineWidth"];const $6=(t,n,e)=>[["M",t-e/2,n-e],["L",t+e/2,n-e],["M",t,n-e],["L",t,n+e],["M",t-e/2,n+e],["L",t+e/2,n+e]];$6.style=["stroke","lineWidth"];const j6=(t,n,e)=>[["M",t-e,n],["L",t+e,n],["M",t,n-e],["L",t,n+e]];j6.style=["stroke","lineWidth"];const z6=(t,n,e)=>[["M",t-e,n],["L",t+e,n]];z6.style=["stroke","lineWidth"];const sA=(t,n,e)=>[["M",t-e,n],["L",t+e,n]];sA.style=["stroke","lineWidth"];const G6=sA.bind(void 0);G6.style=["stroke","lineWidth"];const Y6=(t,n,e)=>[["M",t-e,n],["A",e/2,e/2,0,1,1,t,n],["A",e/2,e/2,0,1,0,t+e,n]];Y6.style=["stroke","lineWidth"];const W6=(t,n,e)=>[["M",t-e-1,n-2.5],["L",t,n-2.5],["L",t,n+2.5],["L",t+e+1,n+2.5]];W6.style=["stroke","lineWidth"];const V6=(t,n,e)=>[["M",t-e-1,n+2.5],["L",t,n+2.5],["L",t,n-2.5],["L",t+e+1,n-2.5]];V6.style=["stroke","lineWidth"];const H6=(t,n,e)=>[["M",t-(e+1),n+2.5],["L",t-e/2,n+2.5],["L",t-e/2,n-2.5],["L",t+e/2,n-2.5],["L",t+e/2,n+2.5],["L",t+e+1,n+2.5]];H6.style=["stroke","lineWidth"];const X6=(t,n,e)=>[["M",t-5,n+2.5],["L",t-5,n],["L",t,n],["L",t,n-3],["L",t,n+3],["L",t+6.5,n+3]];X6.style=["stroke","lineWidth"];const ny=new Map([["bowtie",oA],["cross",N6],["dash",G6],["diamond",nA],["dot",sA],["hexagon",aA],["hollowBowtie",R6],["hollowDiamond",L6],["hollowHexagon",D6],["hollowPoint",P6],["hollowSquare",_6],["hollowTriangle",I6],["hollowTriangleDown",F6],["hv",W6],["hvh",H6],["hyphen",z6],["line",B6],["plus",j6],["point",eA],["rect",k6],["smooth",Y6],["square",Cm],["tick",$6],["triangleDown",iA],["triangle",rA],["vh",V6],["vhv",X6]]);function _Mt(t,n){var{d:e,fill:r,strokeWidth:i,path:a,stroke:o,lineWidth:s,color:l}=n,c=kMt(n,["d","fill","strokeWidth","path","stroke","lineWidth","color"]);const u=ny.get(t)||ny.get("point");return(...f)=>new lr({style:Object.assign(Object.assign({},c),{path:u(...f),stroke:u.style.includes("stroke")?l||o:"",fill:u.style.includes("fill")?l||r:"",lineWidth:u.style.includes("lineWidth")?s||s||2:0})})}var LMt=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};function IMt(t,n,e,r){if(n.length===1)return;const{size:i}=e;if(t==="fixed")return i;if(t==="normal"||wz(r)){const[[a,o],[s,l]]=n,c=Math.abs((s-a)/2),u=Math.abs((l-o)/2);return Math.max(0,(c+u)/2)}return i}const zt=(t,n)=>{const{colorAttribute:e,symbol:r,mode:i="auto"}=t,a=LMt(t,["colorAttribute","symbol","mode"]),o=ny.get(r)||ny.get("point"),{coordinate:s,document:l}=n;return(c,u,f)=>{const{lineWidth:h,color:d}=f,p=a.stroke?h||1:h,{color:v=d,transform:g,opacity:y}=u,[m,x]=b6(c),w=IMt(i,c,u,s)||a.r||f.r;return Ot(l.createElement("path",{})).call(gt,f).style("fill","transparent").style("d",o(m,x,w)).style("lineWidth",p).style("transform",g).style("stroke",v).style(m6(t),y).style(e,v).call(gt,a).node()}};zt.props={defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const U6=(t,n)=>zt(Object.assign({colorAttribute:"stroke",symbol:"bowtie"},t),n);U6.props=Object.assign({defaultMarker:"hollowBowtie"},zt.props);const q6=(t,n)=>zt(Object.assign({colorAttribute:"stroke",symbol:"diamond"},t),n);q6.props=Object.assign({defaultMarker:"hollowDiamond"},zt.props);const Z6=(t,n)=>zt(Object.assign({colorAttribute:"stroke",symbol:"hexagon"},t),n);Z6.props=Object.assign({defaultMarker:"hollowHexagon"},zt.props);const K6=(t,n)=>zt(Object.assign({colorAttribute:"stroke",symbol:"point"},t),n);K6.props=Object.assign({defaultMarker:"hollowPoint"},zt.props);const Q6=(t,n)=>zt(Object.assign({colorAttribute:"stroke",symbol:"square"},t),n);Q6.props=Object.assign({defaultMarker:"hollowSquare"},zt.props);const J6=(t,n)=>zt(Object.assign({colorAttribute:"stroke",symbol:"triangle"},t),n);J6.props=Object.assign({defaultMarker:"hollowTriangle"},zt.props);const t8=(t,n)=>zt(Object.assign({colorAttribute:"stroke",symbol:"triangle-down"},t),n);t8.props=Object.assign({defaultMarker:"hollowTriangleDown"},zt.props);const e8=(t,n)=>zt(Object.assign({colorAttribute:"fill",symbol:"bowtie"},t),n);e8.props=Object.assign({defaultMarker:"bowtie"},zt.props);const n8=(t,n)=>zt(Object.assign({colorAttribute:"stroke",symbol:"cross"},t),n);n8.props=Object.assign({defaultMarker:"cross"},zt.props);const r8=(t,n)=>zt(Object.assign({colorAttribute:"fill",symbol:"diamond"},t),n);r8.props=Object.assign({defaultMarker:"diamond"},zt.props);const i8=(t,n)=>zt(Object.assign({colorAttribute:"fill",symbol:"hexagon"},t),n);i8.props=Object.assign({defaultMarker:"hexagon"},zt.props);const a8=(t,n)=>zt(Object.assign({colorAttribute:"stroke",symbol:"hyphen"},t),n);a8.props=Object.assign({defaultMarker:"hyphen"},zt.props);const o8=(t,n)=>zt(Object.assign({colorAttribute:"stroke",symbol:"line"},t),n);o8.props=Object.assign({defaultMarker:"line"},zt.props);const s8=(t,n)=>zt(Object.assign({colorAttribute:"stroke",symbol:"plus"},t),n);s8.props=Object.assign({defaultMarker:"plus"},zt.props);const l8=(t,n)=>zt(Object.assign({colorAttribute:"fill",symbol:"point"},t),n);l8.props=Object.assign({defaultMarker:"point"},zt.props);const c8=(t,n)=>zt(Object.assign({colorAttribute:"fill",symbol:"square"},t),n);c8.props=Object.assign({defaultMarker:"square"},zt.props);const u8=(t,n)=>zt(Object.assign({colorAttribute:"stroke",symbol:"tick"},t),n);u8.props=Object.assign({defaultMarker:"tick"},zt.props);const f8=(t,n)=>zt(Object.assign({colorAttribute:"fill",symbol:"triangle"},t),n);f8.props=Object.assign({defaultMarker:"triangle"},zt.props);const h8=(t,n)=>zt(Object.assign({colorAttribute:"fill",symbol:"triangle-down"},t),n);h8.props=Object.assign({defaultMarker:"triangleDown"},zt.props);var tL=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};const lA=(t,n)=>{const{arrow:e=!0,arrowSize:r="40%"}=t,i=tL(t,["arrow","arrowSize"]),{document:a}=n;return(o,s,l)=>{const{defaultColor:c}=l,u=tL(l,["defaultColor"]),{color:f=c,transform:h}=s,[d,p]=o,v=bi();if(v.moveTo(...d),v.lineTo(...p),e){const[g,y]=SMt(d,p,{arrowSize:r});v.moveTo(...p),v.lineTo(...g),v.moveTo(...p),v.lineTo(...y)}return Ot(a.createElement("path",{})).call(gt,u).style("d",v.toString()).style("stroke",f).style("transform",h).call(gt,i).node()}};lA.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var FMt=function(t){return t!==null&&typeof t!="function"&&isFinite(t.length)};const eL=FMt,Si=function(t){return typeof t=="function"};var DMt=function(t){return t==null};const cA=DMt;var RMt={}.toString,BMt=function(t,n){return RMt.call(t)==="[object "+n+"]"};const Pm=BMt,ao=function(t){return Array.isArray?Array.isArray(t):Pm(t,"Array")},d8=function(t){var n=typeof t;return t!==null&&n==="object"||n==="function"};var NMt=function(t){return typeof t=="object"&&t!==null};const Vw=NMt;var $Mt=function(t){if(!Vw(t)||!Pm(t,"Object"))return!1;if(Object.getPrototypeOf(t)===null)return!0;for(var n=t;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(t)===n};const ry=$Mt,nL=function(t){if(ao(t))return t.reduce(function(n,e){return Math.max(n,e)},t[0])},rL=function(t){if(ao(t))return t.reduce(function(n,e){return Math.min(n,e)},t[0])},uu=function(t){return Pm(t,"String")};var jMt=function(t,n,e){return t<n?n:t>e?e:t};const Xa=jMt;var zMt=function(t){return Pm(t,"Number")};const km=zMt,GMt=function(t,n){if(ao(t)){for(var e,r=-1/0,i=0;i<t.length;i++){var a=t[i],o=Si(n)?n(a):a[n];o>r&&(e=a,r=o)}return e}},YMt=function(t,n){if(ao(t)){for(var e,r=1/0,i=0;i<t.length;i++){var a=t[i],o=Si(n)?n(a):a[n];o<r&&(e=a,r=o)}return e}};function WMt(t,n){return!t||!n?t:t.replace(/\\?\{([^{}]+)\}/g,function(e,r){return e.charAt(0)==="\\"?e.slice(1):n[r]===void 0?"":n[r]})}var VMt=function(t){return t===void 0};const HMt=VMt;var Hw=function(t){if(typeof t!="object"||t===null)return t;var n;if(ao(t)){n=[];for(var e=0,r=t.length;e<r;e++)typeof t[e]=="object"&&t[e]!=null?n[e]=Hw(t[e]):n[e]=t[e]}else{n={};for(var i in t)typeof t[i]=="object"&&t[i]!=null?n[i]=Hw(t[i]):n[i]=t[i]}return n};const uA=Hw;function XMt(t,n,e){var r;return function(){var i=this,a=arguments,o=function(){r=null,e||t.apply(i,a)},s=e&&!r;clearTimeout(r),r=setTimeout(o,n),s&&t.apply(i,a)}}const UMt=function(t,n,e){if(e===void 0&&(e=128),!Si(t))throw new TypeError("Expected a function");var r=function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var o=n?n.apply(this,i):i[0],s=r.cache;if(s.has(o))return s.get(o);var l=t.apply(this,i);return s.set(o,l),l};return r.cache=cM(e),r};var qMt=5;function ZMt(t,n){if(Object.hasOwn)return Object.hasOwn(t,n);if(t==null)throw new TypeError("Cannot convert undefined or null to object");return Object.prototype.hasOwnProperty.call(Object(t),n)}function p8(t,n,e,r){e=e||0,r=r||qMt;for(var i in n)if(ZMt(n,i)){var a=n[i];a!==null&&ry(a)?(ry(t[i])||(t[i]={}),e<r?p8(t[i],a,e+1,r):t[i]=n[i]):ao(a)?(t[i]=[],t[i]=t[i].concat(a)):a!==void 0&&(t[i]=a)}}var KMt=function(t){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];for(var r=0;r<n.length;r+=1)p8(t,n[r]);return t};const _m=KMt;var Xw=function(t,n){if(t===n)return!0;if(!t||!n||uu(t)||uu(n))return!1;if(eL(t)||eL(n)){if(t.length!==n.length)return!1;for(var e=!0,r=0;r<t.length&&(e=Xw(t[r],n[r]),!!e);r++);return e}if(Vw(t)||Vw(n)){var i=Object.keys(t),a=Object.keys(n);if(i.length!==a.length)return!1;for(var e=!0,r=0;r<i.length&&(e=Xw(t[i[r]],n[i[r]]),!!e);r++);return e}return!1};const QMt=Xw,v8=function(t,n,e){for(var r=0,i=uu(n)?n.split("."):n;t&&r<i.length;)t=t[i[r++]];return t===void 0||r<i.length?e:t},JMt=function(t,n,e){var r=t,i=uu(n)?n.split("."):n;return i.forEach(function(a,o){o<i.length-1?(d8(r[a])||(r[a]=km(i[o+1])?[]:{}),r=r[a]):r[a]=e}),t},bx=function(){};function iL(t){var n=document.createElement("div");n.innerHTML=t;var e=n.childNodes[0];return e&&n.contains(e)&&n.removeChild(e),e}function g8(t,n){n(t),t.children&&t.children.forEach(function(e){e&&g8(e,n)})}function Xd(t){Lm(t,!0)}function gs(t){Lm(t,!1)}function Lm(t,n){var e=n?"visible":"hidden";g8(t,function(r){r.attr("visibility",e)})}var tAt=function(t){G(n,t);function n(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var i=t.apply(this,X([],R(e),!1))||this;return i.addEventListener(Dt.INSERTED,function(){gs(i)}),i}return n}($n);function y8(t){var n=t.appendChild(new tAt({class:"offscreen"}));return gs(n),n}function eAt(t){for(var n=t;n;){if(n.className==="offscreen")return!0;n=n.parent}return!1}var fA=function(t){G(n,t);function n(e){e===void 0&&(e={});var r=e.style,i=vt(e,["style"]);return t.call(this,E({style:E({text:"",fill:"black",fontFamily:"sans-serif",fontSize:16,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",lineWidth:1,textAlign:"start",textBaseline:"middle"},r)},i))||this}return Object.defineProperty(n.prototype,"offscreenGroup",{get:function(){return this._offscreen||(this._offscreen=y8(this)),this._offscreen},enumerable:!1,configurable:!0}),n.prototype.disconnectedCallback=function(){var e;(e=this._offscreen)===null||e===void 0||e.destroy()},n}(Fi);function fu(t){return t*Math.PI/180}function m8(t){return Number((t*180/Math.PI).toPrecision(5))}var ze=function(){function t(n,e,r,i){n===void 0&&(n=0),e===void 0&&(e=0),r===void 0&&(r=0),i===void 0&&(i=0),this.x=0,this.y=0,this.width=0,this.height=0,this.x=n,this.y=e,this.width=r,this.height=i}return Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),t.fromRect=function(n){return new t(n.x,n.y,n.width,n.height)},t.prototype.toJSON=function(){return{x:this.x,y:this.y,width:this.width,height:this.height,top:this.top,right:this.right,bottom:this.bottom,left:this.left}},t}();function vi(t,n){return Si(t)?t.apply(void 0,X([],R(n),!1)):t}var Oi=function(t,n){var e=function(i){return"".concat(n,"-").concat(i)},r=Object.fromEntries(Object.entries(t).map(function(i){var a=R(i,2),o=a[0],s=a[1],l=e(s);return[o,{name:l,class:".".concat(l),id:"#".concat(l),toString:function(){return l}}]}));return Object.assign(r,{prefix:e}),r},nAt=5,x8=function(t,n,e,r){e===void 0&&(e=0),r===void 0&&(r=nAt),Object.entries(n).forEach(function(i){var a=R(i,2),o=a[0],s=a[1],l=t;Object.prototype.hasOwnProperty.call(n,o)&&(s?ry(s)?(ry(t[o])||(l[o]={}),e<r?x8(t[o],s,e+1,r):l[o]=n[o]):ao(s)?(l[o]=[],l[o]=l[o].concat(s)):l[o]=s:l[o]=s)})},no=function(t){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];for(var r=0;r<n.length;r+=1)x8(t,n[r]);return t},b8=function(t){return t!==void 0&&t!=null&&!Number.isNaN(t)},hv,rAt=UMt(function(t,n){var e=n.fontSize,r=n.fontFamily,i=n.fontWeight,a=n.fontStyle,o=n.fontVariant;return hv||(hv=tt.offscreenCanvasCreator.getOrCreateContext(void 0)),hv.font=[a,o,i,"".concat(e,"px"),r].join(" "),hv.measureText(t).width},function(t,n){return[t,Object.values(n||w8(t)).join()].join("")},4096),w8=function(t){var n=t.style.fontFamily||"sans-serif",e=t.style.fontWeight||"normal",r=t.style.fontStyle||"normal",i=t.style.fontVariant,a=t.style.fontSize;return a=typeof a=="object"?a.value:a,{fontSize:a,fontFamily:n,fontWeight:e,fontStyle:r,fontVariant:i}};function S8(t){return t.nodeName==="text"?t:t.nodeName==="g"&&t.children.length===1&&t.children[0].nodeName==="text"?t.children[0]:null}function O8(t,n){var e=S8(t);e&&e.attr(n)}function Uw(t,n,e){e===void 0&&(e="..."),O8(t,{wordWrap:!0,wordWrapWidth:n,maxLines:1,textOverflow:e})}function iAt(t,n,e,r){e===void 0&&(e=2),r===void 0&&(r="top"),O8(t,{wordWrap:!0,wordWrapWidth:n,maxLines:e,textBaseline:r})}function iy(t){var n=t.canvas,e=t.touches,r=t.offsetX,i=t.offsetY;if(n){var a=n.x,o=n.y;return[a,o]}if(e){var s=e[0],l=s.clientX,c=s.clientY;return[l,c]}return r&&i?[r,i]:[0,0]}function Ol(t){return typeof t=="function"?t():uu(t)||km(t)?new fA({style:{text:String(t)}}):t}function aAt(t,n){return t.reduce(function(e,r){return(e[r[n]]=e[r[n]]||[]).push(r),e},{})}function Or(t,n,e,r,i){return r===void 0&&(r=!0),i===void 0&&(i=function(a){a.node().removeChildren()}),t?e(n):(r&&i(n),null)}function Dn(t,n,e,r,i){return r===void 0&&(r=!0),i===void 0&&(i=!1),r&&t===n||i&&t===e?!0:t>n&&t<e}var oAt=function(t,n){return function(e){return t*(1-e)+n*e}};function sAt(t,n){var e=n?n.length:0,r=t?Math.min(e,t.length):0;return function(i){var a=new Array(r),o=new Array(e),s=0;for(s=0;s<r;++s)a[s]=hA(t[s],n[s]);for(;s<e;++s)o[s]=n[s];for(s=0;s<r;++s)o[s]=a[s](i);return o}}function lAt(t,n){t===void 0&&(t={}),n===void 0&&(n={});var e={},r={};return Object.entries(n).forEach(function(i){var a=R(i,2),o=a[0],s=a[1];o in t?e[o]=hA(t[o],s):r[o]=s}),function(i){return Object.entries(e).forEach(function(a){var o=R(a,2),s=o[0],l=o[1];return r[s]=l(i)}),r}}function hA(t,n){return typeof t=="number"&&typeof n=="number"?oAt(t,n):Array.isArray(t)&&Array.isArray(n)?sAt(t,n):typeof t=="object"&&typeof n=="object"?lAt(t,n):function(e){return t}}function cAt(t,n,e,r){if(!r)return t.attr("__keyframe_data__",e),null;var i=r.duration,a=i===void 0?0:i,o=hA(n,e),s=Math.ceil(+a/16),l=new Array(s).fill(0).map(function(c,u,f){return{__keyframe_data__:o(u/(f.length-1))}});return t.animate(l,E({fill:"both"},r))}function aL(t){for(var n=1/0,e=1/0,r=-1/0,i=-1/0,a=0;a<t.length;a++){var o=t[a],s=o.x,l=o.y,c=o.width,u=o.height,f=R([s+c,l+u],2),h=f[0],d=f[1];s<n&&(n=s),l<e&&(e=l),h>r&&(r=h),d>i&&(i=d)}return new ze(n,e,r-n,i-e)}var uAt=function(t,n,e){var r=t.width,i=t.height,a=e.flexDirection,o=a===void 0?"row":a;e.flexWrap;var s=e.justifyContent,l=s===void 0?"flex-start":s;e.alignContent;var c=e.alignItems,u=c===void 0?"flex-start":c,f=o==="row",h=o==="row"||o==="column",d=f?h?[1,0]:[-1,0]:h?[0,1]:[0,-1],p=R([0,0],2),v=p[0],g=p[1],y=n.map(function(M){var A,T=M.width,C=M.height,P=R([v,g],2),_=P[0],k=P[1];return A=R([v+T*d[0],g+C*d[1]],2),v=A[0],g=A[1],new ze(_,k,T,C)}),m=aL(y),x={"flex-start":0,"flex-end":f?r-m.width:i-m.height,center:f?(r-m.width)/2:(i-m.height)/2},b=y.map(function(M){var A=M.x,T=M.y,C=ze.fromRect(M);return C.x=f?A+x[l]:A,C.y=f?T:T+x[l],C});aL(b);var w=function(M){var A=R(f?["height",i]:["width",r],2),T=A[0],C=A[1];switch(u){case"flex-start":return 0;case"flex-end":return C-M[T];case"center":return C/2-M[T]/2;default:return 0}},S=b.map(function(M){var A=M.x,T=M.y,C=ze.fromRect(M);return C.x=f?A:A+w(C),C.y=f?T+w(C):T,C}),O=S.map(function(M){var A,T,C=ze.fromRect(M);return C.x+=(A=t.x)!==null&&A!==void 0?A:0,C.y+=(T=t.y)!==null&&T!==void 0?T:0,C});return O},fAt=function(t,n,e){return[]};const hAt=function(t,n,e){if(n.length===0)return[];var r={flex:uAt,grid:fAt},i=e.display in r?r[e.display]:null;return(i==null?void 0:i.call(null,t,n,e))||[]};function Fa(t,n){return[t[0]*n,t[1]*n]}function Ef(t,n){return[t[0]+n[0],t[1]+n[1]]}function wx(t,n){return[t[0]-n[0],t[1]-n[1]]}function Ps(t,n){return[Math.min(t[0],n[0]),Math.min(t[1],n[1])]}function ks(t,n){return[Math.max(t[0],n[0]),Math.max(t[1],n[1])]}function Qh(t,n){return Math.sqrt(Math.pow(t[0]-n[0],2)+Math.pow(t[1]-n[1],2))}function M8(t){if(t[0]===0&&t[1]===0)return[0,0];var n=Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2));return[t[0]/n,t[1]/n]}function dAt(t,n){return n?[t[1],-t[0]]:[-t[1],t[0]]}function qw(t,n){return+t.toPrecision(n)}function oL(t,n){var e={},r=Array.isArray(n)?n:[n];for(var i in t)r.includes(i)||(e[i]=t[i]);return e}function pAt(t,n,e,r){var i,a=[],o=!!r,s,l,c=[1/0,1/0],u=[-1/0,-1/0],f,h,d;if(o){i=R(r,2),c=i[0],u=i[1];for(var p=0,v=t.length;p<v;p+=1){var g=t[p];c=Ps(c,g),u=ks(u,g)}}for(var p=0,y=t.length;p<y;p+=1){var g=t[p];if(p===0&&!e)d=g;else if(p===y-1&&!e)h=g,a.push(d),a.push(h);else{var m=[p?p-1:y-1,p-1][e?0:1];s=t[m],l=t[e?(p+1)%y:p+1];var x=[0,0];x=wx(l,s),x=Fa(x,n);var b=Qh(g,s),w=Qh(g,l),S=b+w;S!==0&&(b/=S,w/=S);var O=Fa(x,-b),M=Fa(x,w);h=Ef(g,O),f=Ef(g,M),f=Ps(f,ks(l,g)),f=ks(f,Ps(l,g)),O=wx(f,g),O=Fa(O,-b/w),h=Ef(g,O),h=Ps(h,ks(s,g)),h=ks(h,Ps(s,g)),M=wx(g,h),M=Fa(M,w/b),f=Ef(g,M),o&&(h=ks(h,c),h=Ps(h,u),f=ks(f,c),f=Ps(f,u)),a.push(d),a.push(h),d=f}}return e&&a.push(a.shift()),a}function vAt(t,n,e){var r;n===void 0&&(n=!1),e===void 0&&(e=[[0,0],[1,1]]);for(var i=!!n,a=[],o=0,s=t.length;o<s;o+=2)a.push([t[o],t[o+1]]);for(var l=pAt(a,.4,i,e),c=a.length,u=[],f,h,d,o=0;o<c-1;o+=1)f=l[o*2],h=l[o*2+1],d=a[o+1],u.push(["C",f[0],f[1],h[0],h[1],d[0],d[1]]);return i&&(f=l[c],h=l[c+1],r=R(a,1),d=r[0],u.push(["C",f[0],f[1],h[0],h[1],d[0],d[1]])),u}var gAt=["$el","anchor","cx","cy","d","defX","defY","dx","dy","fill","fillOpacity","filter","fontFamily","fontSize","fontStyle","fontVariant","fontWeight","height","img","increasedLineWidthForHitTesting","innerHTML","isBillboard","billboardRotation","isSizeAttenuation","isClosed","isOverflowing","leading","letterSpacing","lineDash","lineHeight","lineWidth","markerEnd","markerEndOffset","markerMid","markerStart","markerStartOffset","maxLines","metrics","miterLimit","offsetX","offsetY","opacity","path","points","r","radius","rx","ry","shadowColor","src","stroke","strokeOpacity","text","textAlign","textBaseline","textDecorationColor","textDecorationLine","textDecorationStyle","textOverflow","textPath","textPathSide","textPathStartOffset","transform","transformOrigin","visibility","width","wordWrap","wordWrapWidth","x","x1","x2","y","y1","y2","z1","z2","zIndex"];function yAt(t){return gAt.includes(t)}function sL(t){var n={};for(var e in t)yAt(e)&&(n[e]=t[e]);return n}function mAt(t,n){if(t.length<=n)return t;for(var e=Math.floor(t.length/n),r=[],i=0;i<t.length;i+=e)r.push(t[i]);return r}function dA(t,n,e){e===void 0&&(e=!1);var r=t.getBBox(),i=r.width,a=r.height,o=n/Math.max(i,a);return e&&t.scale(o),o}function xAt(t,n){var e=new Map;return t.forEach(function(r){var i=n(r);e.has(i)||e.set(i,[]),e.get(i).push(r)}),e}function bAt(t){throw new Error(t)}var wAt=function(){function t(i,a,o,s,l,c,u){i===void 0&&(i=null),a===void 0&&(a=null),o===void 0&&(o=null),s===void 0&&(s=null),l===void 0&&(l=[null,null,null,null,null]),c===void 0&&(c=[]),u===void 0&&(u=[]),n.add(this),this._elements=Array.from(i),this._data=a,this._parent=o,this._document=s,this._enter=l[0],this._update=l[1],this._exit=l[2],this._merge=l[3],this._split=l[4],this._transitions=c,this._facetElements=u}t.prototype.selectAll=function(i){var a=typeof i=="string"?this._parent.querySelectorAll(i):i;return new e(a,null,this._elements[0],this._document)},t.prototype.selectFacetAll=function(i){var a=typeof i=="string"?this._parent.querySelectorAll(i):i;return new e(this._elements,null,this._parent,this._document,void 0,void 0,a)},t.prototype.select=function(i){var a=typeof i=="string"?this._parent.querySelectorAll(i)[0]||null:i;return new e([a],null,a,this._document)},t.prototype.append=function(i){var a=this,o=typeof i=="function"?i:function(){return a.createElement(i)},s=[];if(this._data!==null){for(var l=0;l<this._data.length;l++){var c=this._data[l],u=R(Array.isArray(c)?c:[c,null],2),f=u[0],h=u[1],d=o(f,l);d.__data__=f,h!==null&&(d.__fromElements__=h),this._parent.appendChild(d),s.push(d)}return new e(s,null,this._parent,this._document)}for(var l=0;l<this._elements.length;l++){var p=this._elements[l],f=p.__data__,d=o(f,l);p.appendChild(d),s.push(d)}return new e(s,null,s[0],this._document)},t.prototype.maybeAppend=function(i,a){var o=n1(this,n,"m",r).call(this,i[0]==="#"?i:"#".concat(i),a);return o.attr("id",i),o},t.prototype.maybeAppendByClassName=function(i,a){var o=i.toString(),s=n1(this,n,"m",r).call(this,o[0]==="."?o:".".concat(o),a);return s.attr("className",o),s},t.prototype.maybeAppendByName=function(i,a){var o=n1(this,n,"m",r).call(this,'[name="'.concat(i,'"]'),a);return o.attr("name",i),o},t.prototype.data=function(i,a,o){var s,l;a===void 0&&(a=function(T){return T}),o===void 0&&(o=function(){return null});for(var c=[],u=[],f=new Set(this._elements),h=[],d=new Set,p=new Map(this._elements.map(function(T,C){return[a(T.__data__,C),T]})),v=new Map(this._facetElements.map(function(T,C){return[a(T.__data__,C),T]})),g=xAt(this._elements,function(T){return o(T.__data__)}),y=0;y<i.length;y++){var m=i[y],x=a(m,y),b=o(m,y);if(p.has(x)){var w=p.get(x);w.__data__=m,w.__facet__=!1,u.push(w),f.delete(w),p.delete(x)}else if(v.has(x)){var w=v.get(x);w.__data__=m,w.__facet__=!0,u.push(w),v.delete(x)}else if(g.has(x)){var S=g.get(x);h.push([m,S]);try{for(var O=(s=void 0,Ct(S)),M=O.next();!M.done;M=O.next()){var w=M.value;f.delete(w)}}catch(T){s={error:T}}finally{try{M&&!M.done&&(l=O.return)&&l.call(O)}finally{if(s)throw s.error}}g.delete(x)}else if(p.has(b)){var w=p.get(b);w.__toData__?w.__toData__.push(m):w.__toData__=[m],d.add(w),f.delete(w)}else c.push(m)}var A=[new e([],c,this._parent,this._document),new e(u,null,this._parent,this._document),new e(f,null,this._parent,this._document),new e([],h,this._parent,this._document),new e(d,null,this._parent,this._document)];return new e(this._elements,null,this._parent,this._document,A)},t.prototype.merge=function(i){var a=X(X([],R(this._elements),!1),R(i._elements),!1),o=X(X([],R(this._transitions),!1),R(i._transitions),!1);return new e(a,null,this._parent,this._document,void 0,o)},t.prototype.createElement=function(i){if(this._document)return this._document.createElement(i,{});var a=e.registry[i];return a?new a:bAt("Unknown node type: ".concat(i))},t.prototype.join=function(i,a,o,s,l){i===void 0&&(i=function(p){return p}),a===void 0&&(a=function(p){return p}),o===void 0&&(o=function(p){return p.remove()}),s===void 0&&(s=function(p){return p}),l===void 0&&(l=function(p){return p.remove()});var c=i(this._enter),u=a(this._update),f=o(this._exit),h=s(this._merge),d=l(this._split);return u.merge(c).merge(f).merge(h).merge(d)},t.prototype.remove=function(){for(var i=function(s){var l=a._elements[s],c=a._transitions[s];c?c.then(function(){return l.remove()}):l.remove()},a=this,o=0;o<this._elements.length;o++)i(o);return new e([],null,this._parent,this._document,void 0,this._transitions)},t.prototype.each=function(i){for(var a=0;a<this._elements.length;a++){var o=this._elements[a],s=o.__data__;i.call(o,s,a)}return this},t.prototype.attr=function(i,a){var o=typeof a!="function"?function(){return a}:a;return this.each(function(s,l){a!==void 0&&(this[i]=o.call(this,s,l))})},t.prototype.style=function(i,a,o){o===void 0&&(o=!0);var s=typeof a!="function"||!o?function(){return a}:a;return this.each(function(l,c){a!==void 0&&(this.style[i]=s.call(this,l,c))})},t.prototype.styles=function(i,a){return i===void 0&&(i={}),a===void 0&&(a=!0),this.each(function(o,s){var l=this;Object.entries(i).forEach(function(c){var u=R(c,2),f=u[0],h=u[1],d=typeof h!="function"||!a?function(){return h}:h;h!==void 0&&l.attr(f,d.call(l,o,s))})})},t.prototype.update=function(i,a){a===void 0&&(a=!0);var o=typeof i!="function"||!a?function(){return i}:i;return this.each(function(s,l){i&&this.update&&this.update(o.call(this,s,l))})},t.prototype.maybeUpdate=function(i,a){a===void 0&&(a=!0);var o=typeof i!="function"||!a?function(){return i}:i;return this.each(function(s,l){i&&this.update&&this.update(o.call(this,s,l))})},t.prototype.transition=function(i){var a=this._transitions;return this.each(function(o,s){a[s]=i.call(this,o,s)})},t.prototype.on=function(i,a){return this.each(function(){this.addEventListener(i,a)}),this},t.prototype.call=function(i){for(var a=[],o=1;o<arguments.length;o++)a[o-1]=arguments[o];return i.call.apply(i,X([this._parent,this],R(a),!1)),this},t.prototype.node=function(){return this._elements[0]},t.prototype.nodes=function(){return this._elements},t.prototype.transitions=function(){return this._transitions.filter(function(i){return!!i})},t.prototype.parent=function(){return this._parent};var n,e,r;return e=t,n=new WeakSet,r=function(a,o){var s=this._elements[0],l=s.querySelector(a);if(l)return new e([l],null,this._parent,this._document);var c=typeof o=="string"?this.createElement(o):o();return s.appendChild(c),new e([c],null,this._parent,this._document)},t.registry={g:$n,rect:Nl,circle:Yd,path:lr,text:fA,ellipse:UM,image:qM,line:Wd,polygon:Vd,polyline:ZM,html:Mm},t}();function _t(t){return new wAt([t],null,t,t.ownerDocument)}function SAt(t,n,e){return t.querySelector(n)?_t(t).select(n):_t(t).append(e)}function Rn(t){if(km(t))return[t,t,t,t];if(ao(t)){var n=t.length;if(n===1)return[t[0],t[0],t[0],t[0]];if(n===2)return[t[0],t[1],t[0],t[1]];if(n===3)return[t[0],t[1],t[2],t[1]];if(n===4)return t}return[0,0,0,0]}function lL(t){var n=t.getLocalBounds(),e=n.min,r=n.max,i=R([e,r],2),a=R(i[0],2),o=a[0],s=a[1],l=R(i[1],2),c=l[0],u=l[1];return{x:o,y:s,width:c-o,height:u-s,left:o,bottom:u,top:s,right:c}}function OAt(t,n){var e=R(t,2),r=e[0],i=e[1],a=R(n,2),o=a[0],s=a[1];return r!==o&&i===s}function MAt(t,n){var e,r,i=n.attributes;try{for(var a=Ct(Object.entries(i)),o=a.next();!o.done;o=a.next()){var s=R(o.value,2),l=s[0],c=s[1];l!=="id"&&l!=="className"&&t.attr(l,c)}}catch(u){e={error:u}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}}function pA(t){return t.toString().charAt(0).toUpperCase()+t.toString().slice(1)}function AAt(t){return t.toString().charAt(0).toLowerCase()+t.toString().slice(1)}function EAt(t,n){return"".concat(n).concat(pA(t))}function cL(t,n,e){var r;e===void 0&&(e=!0);var i=n||((r=t.match(/^([a-z][a-z0-9]+)/))===null||r===void 0?void 0:r[0])||"",a=t.replace(new RegExp("^(".concat(i,")")),"");return e?AAt(a):a}function TAt(t,n){Object.entries(n).forEach(function(e){var r=R(e,2),i=r[0],a=r[1];X([t],R(t.querySelectorAll(i)),!1).filter(function(o){return o.matches(i)}).forEach(function(o){if(o){var s=o;s.style.cssText+=Object.entries(a).reduce(function(l,c){return"".concat(l).concat(c.join(":"),";")},"")}})})}var dv=function(t,n){if(!(t!=null&&t.startsWith(n)))return!1;var e=t[n.length];return e>="A"&&e<="Z"};function Bt(t,n,e){e===void 0&&(e=!1);var r={};return Object.entries(t).forEach(function(i){var a=R(i,2),o=a[0],s=a[1];if(!(o==="className"||o==="class")){if(dv(o,"show")&&dv(cL(o,"show"),n)!==e)o===EAt(n,"show")?r[o]=s:r[o.replace(new RegExp(pA(n)),"")]=s;else if(!dv(o,"show")&&dv(o,n)!==e){var l=cL(o,n);l==="filter"&&typeof s=="function"||(r[l]=s)}}}),r}function Qi(t,n){return Object.entries(t).reduce(function(e,r){var i=R(r,2),a=i[0],o=i[1];return a.startsWith("show")?e["show".concat(n).concat(a.slice(4))]=o:e["".concat(n).concat(pA(a))]=o,e},{})}function ro(t,n){n===void 0&&(n=["x","y","class","className"]);var e=["transform","transformOrigin","anchor","visibility","pointerEvents","zIndex","cursor","clipPath","clipPathTargets","offsetPath","offsetPathTargets","offsetDistance","draggable","droppable"],r={},i={};return Object.entries(t).forEach(function(a){var o=R(a,2),s=o[0],l=o[1];n.includes(s)||(e.indexOf(s)!==-1?i[s]=l:r[s]=l)}),[r,i]}function CAt(t,n){return t===void 0&&(t=0),n===void 0&&(n=!1),function(e,r,i){var a=i.value,o;typeof a=="function"&&(i.value=function(){for(var s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];if(!o){var c=this;n&&a.apply(c,s),o=window.setTimeout(function(){a.apply(c,s),o=null},t)}})}}function PAt(t,n,e){var r=t.getBBox(),i=r.width,a=r.height,o=R([n,e].map(function(c,u){var f;return c.includes("%")?parseFloat(((f=c.match(/[+-]?([0-9]*[.])?[0-9]+/))===null||f===void 0?void 0:f[0])||"0")/100*(u===0?i:a):c}),2),s=o[0],l=o[1];return[s,l]}function ay(t,n){if(n)try{var e=/translate\(([+-]*[\d]+[%]*),[ ]*([+-]*[\d]+[%]*)\)/g,r=n.replace(e,function(i,a,o){return"translate(".concat(PAt(t,a,o),")")});t.attr("transform",r)}catch{}}function kAt(t){var n;return((n=t[0])===null||n===void 0?void 0:n.map(function(e,r){return t.map(function(i){return i[r]})}))||[]}function _At(){Lm(this,this.attributes.visibility!=="hidden")}var In=function(t){G(n,t);function n(e,r){r===void 0&&(r={});var i=t.call(this,no({},{style:r},e))||this;return i.initialized=!1,i._defaultOptions=r,i}return Object.defineProperty(n.prototype,"offscreenGroup",{get:function(){return this._offscreen||(this._offscreen=y8(this)),this._offscreen},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"defaultOptions",{get:function(){return this._defaultOptions},enumerable:!1,configurable:!0}),n.prototype.connectedCallback=function(){this.render(this.attributes,this),this.bindEvents(this.attributes,this),this.initialized=!0},n.prototype.disconnectedCallback=function(){var e;(e=this._offscreen)===null||e===void 0||e.destroy()},n.prototype.attributeChangedCallback=function(e){e==="visibility"&&_At.call(this)},n.prototype.update=function(e,r){var i;return this.attr(no({},this.attributes,e||{})),(i=this.render)===null||i===void 0?void 0:i.call(this,this.attributes,this,r)},n.prototype.clear=function(){this.removeChildren()},n.prototype.bindEvents=function(e,r){},n}(XM),A8=function(t,n,e){return[["M",t-e,n],["A",e,e,0,1,0,t+e,n],["A",e,e,0,1,0,t-e,n],["Z"]]},LAt=A8,IAt=function(t,n,e){return[["M",t-e,n-e],["L",t+e,n-e],["L",t+e,n+e],["L",t-e,n+e],["Z"]]},FAt=function(t,n,e){return[["M",t-e,n],["L",t,n-e],["L",t+e,n],["L",t,n+e],["Z"]]},DAt=function(t,n,e){var r=e*Math.sin(.3333333333333333*Math.PI);return[["M",t-e,n+r],["L",t,n-r],["L",t+e,n+r],["Z"]]},RAt=function(t,n,e){var r=e*Math.sin(.3333333333333333*Math.PI);return[["M",t-e,n-r],["L",t+e,n-r],["L",t,n+r],["Z"]]},BAt=function(t,n,e){var r=e/2*Math.sqrt(3);return[["M",t,n-e],["L",t+r,n-e/2],["L",t+r,n+e/2],["L",t,n+e],["L",t-r,n+e/2],["L",t-r,n-e/2],["Z"]]},NAt=function(t,n,e){var r=e-1.5;return[["M",t-e,n-r],["L",t+e,n+r],["L",t+e,n-r],["L",t-e,n+r],["Z"]]},E8=function(t,n,e){return[["M",t,n+e],["L",t,n-e]]},$At=function(t,n,e){return[["M",t-e,n-e],["L",t+e,n+e],["M",t+e,n-e],["L",t-e,n+e]]},jAt=function(t,n,e){return[["M",t-e/2,n-e],["L",t+e/2,n-e],["M",t,n-e],["L",t,n+e],["M",t-e/2,n+e],["L",t+e/2,n+e]]},zAt=function(t,n,e){return[["M",t-e,n],["L",t+e,n],["M",t,n-e],["L",t,n+e]]},GAt=function(t,n,e){return[["M",t-e,n],["L",t+e,n]]},T8=function(t,n,e){return[["M",t-e,n],["L",t+e,n]]},YAt=T8,WAt=function(t,n,e){return[["M",t-e,n],["A",e/2,e/2,0,1,1,t,n],["A",e/2,e/2,0,1,0,t+e,n]]},VAt=function(t,n,e){return[["M",t-e-1,n-2.5],["L",t,n-2.5],["L",t,n+2.5],["L",t+e+1,n+2.5]]},HAt=function(t,n,e){return[["M",t-e-1,n+2.5],["L",t,n+2.5],["L",t,n-2.5],["L",t+e+1,n-2.5]]},XAt=function(t,n,e){return[["M",t-(e+1),n+2.5],["L",t-e/2,n+2.5],["L",t-e/2,n-2.5],["L",t+e/2,n-2.5],["L",t+e/2,n+2.5],["L",t+e+1,n+2.5]]};function UAt(t,n){return[["M",t-5,n+2.5],["L",t-5,n],["L",t,n],["L",t,n-3],["L",t,n+3],["L",t+6.5,n+3]]}var qAt=function(t,n,e){return[["M",t-e,n-e],["L",t+e,n],["L",t-e,n+e],["Z"]]};function ZAt(t){var n="default";if(d8(t)&&t instanceof Image)n="image";else if(Si(t))n="symbol";else if(uu(t)){var e=new RegExp("data:(image|text)");t.match(e)?n="base64":/^(https?:\/\/(([a-zA-Z0-9]+-?)+[a-zA-Z0-9]+\.)+[a-zA-Z]+)(:\d+)?(\/.*)?(\?.*)?(#.*)?$/.test(t)?n="url":n="symbol"}return n}function KAt(t){var n=ZAt(t);return["base64","url","image"].includes(n)?"image":t&&n==="symbol"?"path":null}var xe=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.render=function(e,r){var i=e.symbol,a=e.size,o=a===void 0?16:a,s=vt(e,["symbol","size"]),l=KAt(i);Or(!!l,_t(r),function(c){c.maybeAppendByClassName("marker",l).attr("className","marker ".concat(l,"-marker")).call(function(u){if(l==="image"){var f=o*2;u.styles({img:i,width:f,height:f,x:-o,y:-o})}else{var f=o/2,h=Si(i)?i:n.getSymbol(i);u.styles(E({path:h==null?void 0:h(0,0,f)},s))}})})},n.MARKER_SYMBOL_MAP=new Map,n.registerSymbol=function(e,r){n.MARKER_SYMBOL_MAP.set(e,r)},n.getSymbol=function(e){return n.MARKER_SYMBOL_MAP.get(e)},n.getSymbols=function(){return Array.from(n.MARKER_SYMBOL_MAP.keys())},n}(In);xe.registerSymbol("cross",$At);xe.registerSymbol("hyphen",GAt);xe.registerSymbol("line",E8);xe.registerSymbol("plus",zAt);xe.registerSymbol("tick",jAt);xe.registerSymbol("circle",A8);xe.registerSymbol("point",LAt);xe.registerSymbol("bowtie",NAt);xe.registerSymbol("hexagon",BAt);xe.registerSymbol("square",IAt);xe.registerSymbol("diamond",FAt);xe.registerSymbol("triangle",DAt);xe.registerSymbol("triangle-down",RAt);xe.registerSymbol("line",E8);xe.registerSymbol("dot",T8);xe.registerSymbol("dash",YAt);xe.registerSymbol("smooth",WAt);xe.registerSymbol("hv",VAt);xe.registerSymbol("vh",HAt);xe.registerSymbol("hvh",XAt);xe.registerSymbol("vhv",UAt);function oy(t,...n){return n.reduce((e,r)=>i=>e(r(i)),t)}function Zw(t,n){return n-t?e=>(e-t)/(n-t):e=>.5}function QAt(t,n){const e=n<t?n:t,r=t>n?t:n;return i=>Math.min(Math.max(e,i),r)}function JAt(t,n,e,r,i){let a=e||0,o=r||t.length;const s=i||(l=>l);for(;a<o;){const l=Math.floor((a+o)/2);s(t[l])>n?o=l:a=l+1}return a}const uL=Math.sqrt(50),fL=Math.sqrt(10),hL=Math.sqrt(2);function Kv(t,n,e){const r=(n-t)/Math.max(0,e),i=Math.floor(Math.log(r)/Math.LN10),a=r/10**i;return i>=0?(a>=uL?10:a>=fL?5:a>=hL?2:1)*10**i:-(10**-i)/(a>=uL?10:a>=fL?5:a>=hL?2:1)}const tEt=(t,n,e=5)=>{const r=[t,n];let i=0,a=r.length-1,o=r[i],s=r[a],l;return s<o&&([o,s]=[s,o],[i,a]=[a,i]),l=Kv(o,s,e),l>0?(o=Math.floor(o/l)*l,s=Math.ceil(s/l)*l,l=Kv(o,s,e)):l<0&&(o=Math.ceil(o*l)/l,s=Math.floor(s*l)/l,l=Kv(o,s,e)),l>0?(r[i]=Math.floor(o/l)*l,r[a]=Math.ceil(s/l)*l):l<0&&(r[i]=Math.ceil(o*l)/l,r[a]=Math.floor(s*l)/l),r};var eEt={}.toString,Im=function(t,n){return eEt.call(t)==="[object "+n+"]"};const C8=function(t){return Im(t,"Function")},P8=function(t){return Array.isArray?Array.isArray(t):Im(t,"Array")},nEt=function(t){var n=typeof t;return t!==null&&n==="object"||n==="function"};function rEt(t,n){if(t){var e;if(P8(t))for(var r=0,i=t.length;r<i&&(e=n(t[r],r),e!==!1);r++);else if(nEt(t)){for(var a in t)if(t.hasOwnProperty(a)&&(e=n(t[a],a),e===!1))break}}}var iEt=function(t){return typeof t=="object"&&t!==null},dL=function(t){if(!iEt(t)||!Im(t,"Object"))return!1;if(Object.getPrototypeOf(t)===null)return!0;for(var n=t;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(t)===n};const aEt=function(t){return Im(t,"String")};var oEt=Object.values?function(t){return Object.values(t)}:function(t){var n=[];return rEt(t,function(e,r){C8(t)&&r==="prototype"||n.push(e)}),n},sEt=function(t){return t===null},lEt=function(t){return t===void 0};const cEt=function(t,n){if(!C8(t))throw new TypeError("Expected a function");var e=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var a=n?n.apply(this,r):r[0],o=e.cache;if(o.has(a))return o.get(a);var s=t.apply(this,r);return o.set(a,s),s};return e.cache=new Map,e};var uEt=5;function k8(t,n,e,r){e=e||0,r=r||uEt;for(var i in n)if(n.hasOwnProperty(i)){var a=n[i];a!==null&&dL(a)?(dL(t[i])||(t[i]={}),e<r?k8(t[i],a,e+1,r):t[i]=n[i]):P8(a)?(t[i]=[],t[i]=t[i].concat(a)):a!==void 0&&(t[i]=a)}}var fEt=function(t){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];for(var r=0;r<n.length;r+=1)k8(t,n[r]);return t};const pL=fEt,Kw=function(t){return t};var pv;cEt(function(t,n){n===void 0&&(n={});var e=n.fontSize,r=n.fontFamily,i=n.fontWeight,a=n.fontStyle,o=n.fontVariant;return pv||(pv=document.createElement("canvas").getContext("2d")),pv.font=[a,o,i,e+"px",r].join(" "),pv.measureText(aEt(t)?t:"").width},function(t,n){return n===void 0&&(n={}),rl([t],oEt(n)).join("")});function vL(t){return!lEt(t)&&!sEt(t)&&!Number.isNaN(t)}function Sx(t,n,e){let r=e;return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(n-t)*6*r:r<1/2?n:r<2/3?t+(n-t)*(2/3-r)*6:t}function hEt(t){const n=t[0]/360,e=t[1]/100,r=t[2]/100,i=t[3];if(e===0)return[r*255,r*255,r*255,i];const a=r<.5?r*(1+e):r+e-r*e,o=2*r-a,s=Sx(o,a,n+1/3),l=Sx(o,a,n),c=Sx(o,a,n-1/3);return[s*255,l*255,c*255,i]}function gL(t){const n=lM.get(t);if(!n)return null;const{model:e,value:r}=n;return e==="rgb"?r:e==="hsl"?hEt(r):null}const sy=(t,n)=>e=>t*(1-e)+n*e,dEt=(t,n)=>{const e=gL(t),r=gL(n);return e===null||r===null?e?()=>t:()=>n:i=>{const a=new Array(4);for(let u=0;u<4;u+=1){const f=e[u],h=r[u];a[u]=f*(1-i)+h*i}const[o,s,l,c]=a;return`rgba(${Math.round(o)}, ${Math.round(s)}, ${Math.round(l)}, ${c})`}},pEt=(t,n)=>typeof t=="number"&&typeof n=="number"?sy(t,n):typeof t=="string"&&typeof n=="string"?dEt(t,n):()=>t,vEt=(t,n)=>{const e=sy(t,n);return r=>Math.round(e(r))};function yL({map:t,initKey:n},e){const r=n(e);return t.has(r)?t.get(r):e}function gEt({map:t,initKey:n},e){const r=n(e);return t.has(r)?t.get(r):(t.set(r,e),e)}function yEt({map:t,initKey:n},e){const r=n(e);return t.has(r)&&(e=t.get(r),t.delete(r)),e}function mEt(t){return typeof t=="object"?t.valueOf():t}let mL=class extends Map{constructor(n){if(super(),this.map=new Map,this.initKey=mEt,n!==null)for(const[e,r]of n)this.set(e,r)}get(n){return super.get(yL({map:this.map,initKey:this.initKey},n))}has(n){return super.has(yL({map:this.map,initKey:this.initKey},n))}set(n,e){return super.set(gEt({map:this.map,initKey:this.initKey},n),e)}delete(n){return super.delete(yEt({map:this.map,initKey:this.initKey},n))}},_8=class{constructor(n){this.options=pL({},this.getDefaultOptions()),this.update(n)}getOptions(){return this.options}update(n={}){this.options=pL({},this.options,n),this.rescale(n)}rescale(n){}};const vA=Symbol("defaultUnknown");function xL(t,n,e){for(let r=0;r<n.length;r+=1)t.has(n[r])||t.set(e(n[r]),r)}function bL(t){const{value:n,from:e,to:r,mapper:i,notFoundReturn:a}=t;let o=i.get(n);if(o===void 0){if(a!==vA)return a;o=e.push(n)-1,i.set(n,o)}return r[o%r.length]}function wL(t){return t instanceof Date?n=>`${n}`:typeof t=="object"?n=>JSON.stringify(n):n=>n}let xEt=class L8 extends _8{getDefaultOptions(){return{domain:[],range:[],unknown:vA}}constructor(n){super(n)}map(n){return this.domainIndexMap.size===0&&xL(this.domainIndexMap,this.getDomain(),this.domainKey),bL({value:this.domainKey(n),mapper:this.domainIndexMap,from:this.getDomain(),to:this.getRange(),notFoundReturn:this.options.unknown})}invert(n){return this.rangeIndexMap.size===0&&xL(this.rangeIndexMap,this.getRange(),this.rangeKey),bL({value:this.rangeKey(n),mapper:this.rangeIndexMap,from:this.getRange(),to:this.getDomain(),notFoundReturn:this.options.unknown})}rescale(n){const[e]=this.options.domain,[r]=this.options.range;if(this.domainKey=wL(e),this.rangeKey=wL(r),!this.rangeIndexMap){this.rangeIndexMap=new Map,this.domainIndexMap=new Map;return}(!n||n.range)&&this.rangeIndexMap.clear(),(!n||n.domain||n.compare)&&(this.domainIndexMap.clear(),this.sortedDomain=void 0)}clone(){return new L8(this.options)}getRange(){return this.options.range}getDomain(){if(this.sortedDomain)return this.sortedDomain;const{domain:n,compare:e}=this.options;return this.sortedDomain=e?[...n].sort(e):n,this.sortedDomain}};function bEt(t){const n=Math.min(...t);return t.map(e=>e/n)}function wEt(t,n){const e=t.length,r=n-e;return r>0?[...t,...new Array(r).fill(1)]:r<0?t.slice(0,n):t}function SEt(t){return Math.round(t*1e12)/1e12}function OEt(t){const{domain:n,range:e,paddingOuter:r,paddingInner:i,flex:a,round:o,align:s}=t,l=n.length,c=wEt(a,l),[u,f]=e,h=f-u,d=2/l*r+1-1/l*i,p=h/d,v=p*i/l,g=p-l*v,y=bEt(c),m=y.reduce((P,_)=>P+_),x=g/m,b=new mL(n.map((P,_)=>{const k=y[_]*x;return[P,o?Math.floor(k):k]})),w=new mL(n.map((P,_)=>{const I=y[_]*x+v;return[P,o?Math.floor(I):I]})),S=Array.from(w.values()).reduce((P,_)=>P+_),M=(h-(S-S/l*i))*s,A=u+M;let T=o?Math.round(A):A;const C=new Array(l);for(let P=0;P<l;P+=1){C[P]=SEt(T);const _=n[P];T+=w.get(_)}return{valueBandWidth:b,valueStep:w,adjustedRange:C}}function MEt(t){var n;const{domain:e}=t,r=e.length;if(r===0)return{valueBandWidth:void 0,valueStep:void 0,adjustedRange:[]};if(!!(!((n=t.flex)===null||n===void 0)&&n.length))return OEt(t);const{range:a,paddingOuter:o,paddingInner:s,round:l,align:c}=t;let u,f,h=a[0];const p=a[1]-h,v=o*2,g=r-s;u=p/Math.max(1,v+g),l&&(u=Math.floor(u)),h+=(p-u*(r-s))*c,f=u*(1-s),l&&(h=Math.round(h),f=Math.round(f));const y=new Array(r).fill(0).map((m,x)=>h+x*u);return{valueStep:u,valueBandWidth:f,adjustedRange:y}}let AEt=class I8 extends xEt{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,paddingInner:0,paddingOuter:0,padding:0,unknown:vA,flex:[]}}constructor(n){super(n)}clone(){return new I8(this.options)}getStep(n){return this.valueStep===void 0?1:typeof this.valueStep=="number"?this.valueStep:n===void 0?Array.from(this.valueStep.values())[0]:this.valueStep.get(n)}getBandWidth(n){return this.valueBandWidth===void 0?1:typeof this.valueBandWidth=="number"?this.valueBandWidth:n===void 0?Array.from(this.valueBandWidth.values())[0]:this.valueBandWidth.get(n)}getRange(){return this.adjustedRange}getPaddingInner(){const{padding:n,paddingInner:e}=this.options;return n>0?n:e}getPaddingOuter(){const{padding:n,paddingOuter:e}=this.options;return n>0?n:e}rescale(){super.rescale();const{align:n,domain:e,range:r,round:i,flex:a}=this.options,{adjustedRange:o,valueBandWidth:s,valueStep:l}=MEt({align:n,range:r,round:i,flex:a,paddingInner:this.getPaddingInner(),paddingOuter:this.getPaddingOuter(),domain:e});this.valueStep=l,this.valueBandWidth=s,this.adjustedRange=o}};const EEt=(t,n,e)=>{let r,i,a=t,o=n;if(a===o&&e>0)return[a];let s=Kv(a,o,e);if(s===0||!Number.isFinite(s))return[];if(s>0){a=Math.ceil(a/s),o=Math.floor(o/s),i=new Array(r=Math.ceil(o-a+1));for(let l=0;l<r;l+=1)i[l]=(a+l)*s}else{s=-s,a=Math.ceil(a*s),o=Math.floor(o*s),i=new Array(r=Math.ceil(o-a+1));for(let l=0;l<r;l+=1)i[l]=(a+l)/s}return i},TEt=(t,n,e)=>{const[r,i]=t,[a,o]=n;let s,l;return r<i?(s=Zw(r,i),l=e(a,o)):(s=Zw(i,r),l=e(o,a)),oy(l,s)},CEt=(t,n,e)=>{const r=Math.min(t.length,n.length)-1,i=new Array(r),a=new Array(r),o=t[0]>t[r],s=o?[...t].reverse():t,l=o?[...n].reverse():n;for(let c=0;c<r;c+=1)i[c]=Zw(s[c],s[c+1]),a[c]=e(l[c],l[c+1]);return c=>{const u=JAt(t,c,1,r)-1,f=i[u],h=a[u];return oy(h,f)(c)}},SL=(t,n,e,r)=>(Math.min(t.length,n.length)>2?CEt:TEt)(t,n,r?vEt:e);let PEt=class extends _8{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:sy,tickCount:5}}map(n){return vL(n)?this.output(n):this.options.unknown}invert(n){return vL(n)?this.input(n):this.options.unknown}nice(){if(!this.options.nice)return;const[n,e,r,...i]=this.getTickMethodOptions();this.options.domain=this.chooseNice()(n,e,r,...i)}getTicks(){const{tickMethod:n}=this.options,[e,r,i,...a]=this.getTickMethodOptions();return n(e,r,i,...a)}getTickMethodOptions(){const{domain:n,tickCount:e}=this.options,r=n[0],i=n[n.length-1];return[r,i,e]}chooseNice(){return tEt}rescale(){this.nice();const[n,e]=this.chooseTransforms();this.composeOutput(n,this.chooseClamp(n)),this.composeInput(n,e,this.chooseClamp(e))}chooseClamp(n){const{clamp:e,range:r}=this.options,i=this.options.domain.map(n),a=Math.min(i.length,r.length);return e?QAt(i[0],i[a-1]):Kw}composeOutput(n,e){const{domain:r,range:i,round:a,interpolate:o}=this.options,s=SL(r.map(n),i,o,a);this.output=oy(s,e,n)}composeInput(n,e,r){const{domain:i,range:a}=this.options,o=SL(a,i.map(n),sy);this.input=oy(e,r,o)}},Jf=class F8 extends PEt{getDefaultOptions(){return{domain:[0,1],range:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolate:pEt,tickMethod:EEt,tickCount:5}}chooseTransforms(){return[Kw,Kw]}clone(){return new F8(this.options)}};var kEt=function(t){G(n,t);function n(e){var r=this,i=e.style,a=vt(e,["style"]);return r=t.call(this,_m({},{type:"column"},E({style:i},a)))||this,r.columnsGroup=new $n({name:"columns"}),r.appendChild(r.columnsGroup),r.render(),r}return n.prototype.render=function(){var e=this.attributes.columns;_t(this.columnsGroup).selectAll(".column").data(e.flat()).join(function(r){return r.append("rect").attr("className","column").each(function(i){this.attr(i)})},function(r){return r.each(function(i){this.attr(i)})},function(r){return r.remove()})},n.prototype.update=function(e){this.attr(no({},this.attributes,e)),this.render()},n.prototype.clear=function(){this.removeChildren()},n}(Kn),_Et=function(t){G(n,t);function n(e){var r=this,i=e.style,a=vt(e,["style"]);return r=t.call(this,_m({},{type:"lines"},E({style:i},a)))||this,r.linesGroup=r.appendChild(new $n),r.areasGroup=r.appendChild(new $n),r.render(),r}return n.prototype.render=function(){var e=this.attributes,r=e.lines,i=e.areas;r&&this.renderLines(r),i&&this.renderAreas(i)},n.prototype.clear=function(){this.linesGroup.removeChildren(),this.areasGroup.removeChildren()},n.prototype.update=function(e){this.attr(no({},this.attributes,e)),this.render()},n.prototype.renderLines=function(e){_t(this.linesGroup).selectAll(".line").data(e).join(function(r){return r.append("path").attr("className","line").each(function(i){this.attr(i)})},function(r){return r.each(function(i){this.attr(i)})},function(r){return r.remove()})},n.prototype.renderAreas=function(e){_t(this.linesGroup).selectAll(".area").data(e).join(function(r){return r.append("path").attr("className","area").each(function(i){this.attr(i)})},function(r){return r.each(function(i){this.style(i)})},function(r){return r.remove()})},n}(Kn);function LEt(t,n){var e,r=n.x,i=n.y,a=R(i.getOptions().range||[0,0],2),o=a[0],s=a[1];return s>o&&(e=R([o,s],2),s=e[0],o=e[1]),t.map(function(l){var c=l.map(function(u,f){return[r.map(f),Xa(i.map(u),s,o)]});return c})}function Jh(t,n){n===void 0&&(n=!1);var e=n?t.length-1:0,r=t.map(function(i,a){return X([a===e?"M":"L"],R(i),!1)});return n?r.reverse():r}function ly(t,n){if(n===void 0&&(n=!1),t.length<=2)return Jh(t);for(var e=[],r=t.length,i=0;i<r;i+=1){var a=n?t[r-i-1]:t[i];QMt(a,e.slice(-2))||e.push.apply(e,X([],R(a),!1))}var o=vAt(e,!1);return n?o.unshift(X(["M"],R(t[r-1]),!1)):o.unshift(X(["M"],R(t[0]),!1)),o}function gA(t,n,e){var r=uA(t);return r.push(["L",n,e],["L",0,e],["Z"]),r}function IEt(t,n,e,r){return t.map(function(i){return gA(n?ly(i):Jh(i),e,r)})}function FEt(t,n,e){for(var r=[],i=t.length-1;i>=0;i-=1){var a=t[i],o=Jh(a),s=void 0;if(i===0)s=gA(o,n,e);else{var l=t[i-1],c=Jh(l,!0);c[0][0]="L",s=X(X(X([],R(o),!1),R(c),!1),[["Z"]],!1)}r.push(s)}return r}function DEt(t,n,e){for(var r=[],i=t.length-1;i>=0;i-=1){var a=t[i],o=ly(a),s=void 0;if(i===0)s=gA(o,n,e);else{var l=t[i-1],c=ly(l,!0),u=a[0];c[0][0]="L",s=X(X(X([],R(o),!1),R(c),!1),[X(["M"],R(u),!1),["Z"]],!1)}r.push(s)}return r}function OL(t){return t.length===0?[0,0]:[rL(YMt(t,function(n){return rL(n)||0})),nL(GMt(t,function(n){return nL(n)||0}))]}function ML(t){for(var n=uA(t),e=n[0].length,r=R([Array(e).fill(0),Array(e).fill(0)],2),i=r[0],a=r[1],o=0;o<n.length;o+=1)for(var s=n[o],l=0;l<e;l+=1)s[l]>=0?(s[l]+=i[l],i[l]=s[l]):(s[l]+=a[l],a[l]=s[l]);return n}var REt=function(t){G(n,t);function n(e){return t.call(this,e,{type:"line",width:200,height:20,isStack:!1,color:["#83daad","#edbf45","#d2cef9","#e290b3","#6f63f4"],smooth:!0,lineLineWidth:1,areaOpacity:0,isGroup:!1,columnLineWidth:1,columnStroke:"#fff",scale:1,spacing:0})||this}return Object.defineProperty(n.prototype,"rawData",{get:function(){var e=this.attributes.data;if(!e||(e==null?void 0:e.length)===0)return[[]];var r=uA(e);return km(r[0])?[r]:r},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"data",{get:function(){return this.attributes.isStack?ML(this.rawData):this.rawData},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"scales",{get:function(){return this.createScales(this.data)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"baseline",{get:function(){var e=this.scales.y,r=R(e.getOptions().domain||[0,0],2),i=r[0],a=r[1];return a<0?e.map(a):e.map(i<0?0:i)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"containerShape",{get:function(){var e=this.attributes,r=e.width,i=e.height;return{width:r,height:i}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"linesStyle",{get:function(){var e=this,r=this.attributes,i=r.type,a=r.isStack,o=r.smooth;if(i!=="line")throw new Error("linesStyle can only be used in line type");var s=Bt(this.attributes,"area"),l=Bt(this.attributes,"line"),c=this.containerShape.width,u=this.data;if(u[0].length===0)return{lines:[],areas:[]};var f=this.scales,h=f.x,d=f.y,p=LEt(u,{type:"line",x:h,y:d}),v=[];if(s){var g=this.baseline;a?v=o?DEt(p,c,g):FEt(p,c,g):v=IEt(p,o,c,g)}return{lines:p.map(function(y,m){return E({stroke:e.getColor(m),path:o?ly(y):Jh(y)},l)}),areas:v.map(function(y,m){return E({path:y,fill:e.getColor(m)},s)})}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"columnsStyle",{get:function(){var e=this,r=Bt(this.attributes,"column"),i=this.attributes,a=i.isStack,o=i.type,s=i.scale;if(o!=="column")throw new Error("columnsStyle can only be used in column type");var l=this.containerShape.height,c=this.rawData;if(!c)return{columns:[]};a&&(c=ML(c));var u=this.createScales(c),f=u.x,h=u.y,d=R(OL(c),2),p=d[0],v=d[1],g=new Jf({domain:[0,v-(p>0?0:p)],range:[0,l*s]}),y=f.getBandWidth(),m=this.rawData;return{columns:c.map(function(x,b){return x.map(function(w,S){var O=y/c.length,M=function(){return{x:f.map(S)+O*b,y:w>=0?h.map(w):h.map(0),width:O,height:g.map(Math.abs(w))}},A=function(){return{x:f.map(S),y:h.map(w),width:y,height:g.map(m[b][S])}};return E(E({fill:e.getColor(b)},r),a?A():M())})})}},enumerable:!1,configurable:!0}),n.prototype.render=function(e,r){SAt(r,".container","rect").attr("className","container").node();var i=e.type,a="spark".concat(i),o=i==="line"?this.linesStyle:this.columnsStyle;_t(r).selectAll(".spark").data([i]).join(function(s){return s.append(function(l){return l==="line"?new _Et({className:a,style:o}):new kEt({className:a,style:o})}).attr("className","spark ".concat(a))},function(s){return s.update(o)},function(s){return s.remove()})},n.prototype.getColor=function(e){var r=this.attributes.color;return ao(r)?r[e%r.length]:Si(r)?r.call(null,e):r},n.prototype.createScales=function(e){var r,i,a=this.attributes,o=a.type,s=a.scale,l=a.range,c=l===void 0?[]:l,u=a.spacing,f=this.containerShape,h=f.width,d=f.height,p=R(OL(e),2),v=p[0],g=p[1],y=new Jf({domain:[(r=c[0])!==null&&r!==void 0?r:v,(i=c[1])!==null&&i!==void 0?i:g],range:[d,d*(1-s)]});return o==="line"?{type:o,x:new Jf({domain:[0,e[0].length-1],range:[0,h]}),y}:{type:o,x:new AEt({domain:e[0].map(function(m,x){return x}),range:[0,h],paddingInner:u,paddingOuter:u/2,align:.5}),y}},n.tag="sparkline",n}(In);function BEt(t){return typeof t=="boolean"?!1:"enter"in t&&"update"in t&&"exit"in t}function AL(t){if(!t)return{enter:!1,update:!1,exit:!1};var n=["enter","update","exit"],e=Object.fromEntries(Object.entries(t).filter(function(r){var i=R(r,1),a=i[0];return!n.includes(a)}));return Object.fromEntries(n.map(function(r){return BEt(t)?t[r]===!1?[r,!1]:[r,E(E({},t[r]),e)]:[r,e]}))}function ju(t,n){t?t.finished.then(n):n()}function NEt(t,n){t.length===0?n():Promise.all(t.map(function(e){return e==null?void 0:e.finished})).then(n)}function D8(t,n){"update"in t?t.update(n):t.attr(n)}function R8(t,n,e){if(n.length===0)return null;if(!e){var r=n.slice(-1)[0];return D8(t,{style:r}),null}return t.animate(n,e)}function $Et(t,n){return!(t.nodeName!=="text"||n.nodeName!=="text"||t.attributes.text!==n.attributes.text)}function jEt(t,n,e,r){if(r===void 0&&(r="destroy"),$Et(t,n))return t.remove(),[null];var i=function(){r==="destroy"?t.destroy():r==="hide"&&gs(t),n.isVisible()&&Xd(n)};if(!e)return i(),[null];var a=e.duration,o=a===void 0?0:a,s=e.delay,l=s===void 0?0:s,c=Math.ceil(+o/2),u=+o/4,f=function(C){if(C.nodeName==="circle"){var P=R(C.getLocalPosition(),2),_=P[0],k=P[1],I=C.attr("r");return[_-I,k-I]}return C.getLocalPosition()},h=R(f(t),2),d=h[0],p=h[1],v=R(f(n),2),g=v[0],y=v[1],m=R([(d+g)/2-d,(p+y)/2-p],2),x=m[0],b=m[1],w=t.style.opacity,S=w===void 0?1:w,O=n.style.opacity,M=O===void 0?1:O,A=t.animate([{opacity:S,transform:"translate(0, 0)"},{opacity:0,transform:"translate(".concat(x,", ").concat(b,")")}],E(E({fill:"both"},e),{duration:l+c+u})),T=n.animate([{opacity:0,transform:"translate(".concat(-x,", ").concat(-b,")"),offset:.01},{opacity:M,transform:"translate(0, 0)"}],E(E({fill:"both"},e),{duration:c+u,delay:l+c-u}));return ju(T,i),[A,T]}function Di(t,n,e){var r={},i={};return Object.entries(n).forEach(function(a){var o=R(a,2),s=o[0],l=o[1];if(!cA(l)){var c=t.style[s]||t.parsedStyle[s]||0;c!==l&&(r[s]=c,i[s]=l)}}),e?R8(t,[r,i],E({fill:"both"},e)):(D8(t,i),null)}function Fm(t,n){return t.style.opacity||(t.style.opacity=1),Di(t,{opacity:0},n)}var B8={fill:"#fff",lineWidth:1,radius:2,size:10,stroke:"#bfbfbf",strokeOpacity:1,zIndex:0},N8={fill:"#000",fillOpacity:.45,fontSize:12,textAlign:"center",textBaseline:"middle",zIndex:1},$8={orientation:"horizontal",showLabel:!0,type:"start"},Xi=Oi({foreground:"foreground",handle:"handle",selection:"selection",sparkline:"sparkline",sparklineGroup:"sparkline-group",track:"track",brushArea:"brush-area"},"slider"),Mo=Oi({labelGroup:"label-group",label:"label",iconGroup:"icon-group",icon:"icon",iconRect:"icon-rect",iconLine:"icon-line"},"handle"),zEt=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.render=function(e,r){var i=e.size,a=i===void 0?10:i,o=e.radius,s=o===void 0?a/4:o,l=e.orientation,c=vt(e,["size","radius","orientation"]),u=a,f=u*2.4,h=_t(r).maybeAppendByClassName(Mo.iconRect,"rect").styles(E(E({},c),{width:u,height:f,radius:s,x:-u/2,y:-f/2})),d=1/3*u,p=2/3*u,v=1/4*f,g=3/4*f;h.maybeAppendByClassName("".concat(Mo.iconLine,"-1"),"line").styles(E({x1:d,x2:d,y1:v,y2:g},c)),h.maybeAppendByClassName("".concat(Mo.iconLine,"-2"),"line").styles(E({x1:p,x2:p,y1:v,y2:g},c)),h.node().setOrigin(u/2,f/2),l==="vertical"?r.setLocalEulerAngles(90):r.setLocalEulerAngles(0)},n}(In),j8=function(t){G(n,t);function n(e){return t.call(this,e,$8)||this}return n.prototype.renderLabel=function(e){var r=this,i=this.attributes.showLabel,a=Bt(this.attributes,"label"),o=a.transform,s=vt(a,["transform"]),l=R(ro(s,[]),2),c=l[0],u=l[1],f=_t(e).maybeAppendByClassName(Mo.labelGroup,"g").styles(u),h=E(E({},N8),c),d=h.text,p=vt(h,["text"]);Or(!!i,f,function(v){r.label=v.maybeAppendByClassName(Mo.label,"text").styles(E(E({},p),{transform:o,text:"".concat(d)})),r.label.on("mousedown",function(g){g.stopPropagation()}),r.label.on("touchstart",function(g){g.stopPropagation()})})},n.prototype.renderIcon=function(e){var r=this.attributes,i=r.orientation,a=r.type,o=E(E({orientation:i},B8),Bt(this.attributes,"icon")),s=this.attributes.iconShape,l=s===void 0?function(){return new zEt({style:o})}:s,c=_t(e).maybeAppendByClassName(Mo.iconGroup,"g");c.selectAll(Mo.icon.class).data([l]).join(function(u){return u.append(typeof l=="string"?l:function(){return l(a)}).attr("className",Mo.icon.name)},function(u){return u.update(o)},function(u){return u.remove()})},n.prototype.render=function(e,r){this.renderIcon(r),this.renderLabel(r)},n}(In),z8=function(t){G(n,t);function n(e){var r=t.call(this,e,E(E(E({animate:{duration:100,fill:"both"},brushable:!0,formatter:function(i){return i.toString()},handleSpacing:2,orientation:"horizontal",padding:0,autoFitLabel:!0,scrollable:!0,selectionFill:"#5B8FF9",selectionFillOpacity:.45,selectionZIndex:2,showHandle:!0,showLabel:!0,slidable:!0,trackFill:"#416180",trackLength:200,trackOpacity:.05,trackSize:20,trackZIndex:-1,values:[0,1],type:"range",selectionType:"select",handleIconOffset:0},Qi($8,"handle")),Qi(B8,"handleIcon")),Qi(N8,"handleLabel")))||this;return r.range=[0,1],r.onDragStart=function(i){return function(a){a.stopPropagation(),r.target=i,r.prevPos=r.getOrientVal(iy(a));var o=r.availableSpace,s=o.x,l=o.y,c=r.getBBox(),u=c.x,f=c.y;r.selectionStartPos=r.getRatio(r.prevPos-r.getOrientVal([s,l])-r.getOrientVal([+u,+f])),r.selectionWidth=0,document.addEventListener("pointermove",r.onDragging),document.addEventListener("pointerup",r.onDragEnd)}},r.onDragging=function(i){var a=r.attributes,o=a.slidable,s=a.brushable,l=a.type;i.stopPropagation();var c=r.getOrientVal(iy(i)),u=c-r.prevPos;if(u){var f=r.getRatio(u);switch(r.target){case"start":o&&r.setValuesOffset(f);break;case"end":o&&r.setValuesOffset(0,f);break;case"selection":o&&r.setValuesOffset(f,f);break;case"track":if(!s)return;r.selectionWidth+=f,l==="range"?r.innerSetValues([r.selectionStartPos,r.selectionStartPos+r.selectionWidth].sort(),!0):r.innerSetValues([0,r.selectionStartPos+r.selectionWidth],!0);break}r.prevPos=c}},r.onDragEnd=function(){document.removeEventListener("pointermove",r.onDragging),document.removeEventListener("pointermove",r.onDragging),document.removeEventListener("pointerup",r.onDragEnd),r.target="",r.updateHandlesPosition(!1)},r.onValueChange=function(i){var a=r.attributes,o=a.onChange,s=a.type,l=s==="range"?i:i[1],c=s==="range"?r.getValues():r.getValues()[1],u=new Se("valuechange",{detail:{oldValue:l,value:c}});r.dispatchEvent(u),o==null||o(c)},r.selectionStartPos=0,r.selectionWidth=0,r.prevPos=0,r.target="",r}return Object.defineProperty(n.prototype,"values",{get:function(){return this.attributes.values},set:function(e){this.attributes.values=this.clampValues(e)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"sparklineStyle",{get:function(){var e=this.attributes.orientation;if(e!=="horizontal")return null;var r=Bt(this.attributes,"sparkline");return E(E({zIndex:0},this.availableSpace),r)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"shape",{get:function(){var e=this.attributes,r=e.trackLength,i=e.trackSize,a=R(this.getOrientVal([[r,i],[i,r]]),2),o=a[0],s=a[1];return{width:o,height:s}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"availableSpace",{get:function(){var e=this.attributes.padding,r=R(Rn(e),4),i=r[0],a=r[1],o=r[2],s=r[3],l=this.shape,c=l.width,u=l.height;return{x:s,y:i,width:c-(s+a),height:u-(i+o)}},enumerable:!1,configurable:!0}),n.prototype.getValues=function(){return this.values},n.prototype.setValues=function(e,r){e===void 0&&(e=[0,0]),r===void 0&&(r=!1),this.attributes.values=e;var i=r===!1?!1:this.attributes.animate;this.updateSelectionArea(i),this.updateHandlesPosition(i)},n.prototype.updateSelectionArea=function(e){var r=this.calcSelectionArea();this.foregroundGroup.selectAll(Xi.selection.class).each(function(i,a){Di(this,r[a],e)})},n.prototype.updateHandlesPosition=function(e){this.attributes.showHandle&&(this.startHandle&&Di(this.startHandle,this.getHandleStyle("start"),e),this.endHandle&&Di(this.endHandle,this.getHandleStyle("end"),e))},n.prototype.innerSetValues=function(e,r){e===void 0&&(e=[0,0]),r===void 0&&(r=!1);var i=this.values,a=this.clampValues(e);this.attributes.values=a,this.setValues(a),r&&this.onValueChange(i)},n.prototype.renderTrack=function(e){var r=Bt(this.attributes,"track");this.trackShape=_t(e).maybeAppendByClassName(Xi.track,"rect").styles(E(E({},this.shape),r))},n.prototype.renderBrushArea=function(e){var r=this.attributes.brushable;this.brushArea=_t(e).maybeAppendByClassName(Xi.brushArea,"rect").styles(E({fill:"transparent",cursor:r?"crosshair":"default"},this.shape))},n.prototype.renderSparkline=function(e){var r=this,i=this.attributes.orientation,a=_t(e).maybeAppendByClassName(Xi.sparklineGroup,"g");Or(i==="horizontal",a,function(o){var s=r.sparklineStyle;o.maybeAppendByClassName(Xi.sparkline,function(){return new REt({style:s})}).update(s)})},n.prototype.renderHandles=function(){var e=this,r,i=this.attributes,a=i.showHandle,o=i.type,s=o==="range"?["start","end"]:["end"],l=a?s:[],c=this;(r=this.foregroundGroup)===null||r===void 0||r.selectAll(Xi.handle.class).data(l.map(function(u){return{type:u}}),function(u){return u.type}).join(function(u){return u.append(function(f){var h=f.type;return new j8({style:e.getHandleStyle(h)})}).each(function(f){var h=f.type;this.attr("class","".concat(Xi.handle.name," ").concat(h,"-handle"));var d="".concat(h,"Handle");c[d]=this,this.addEventListener("pointerdown",c.onDragStart(h))})},function(u){return u.each(function(f){var h=f.type;this.update(c.getHandleStyle(h))})},function(u){return u.each(function(f){var h=f.type,d="".concat(h,"Handle");c[d]=void 0}).remove()})},n.prototype.renderSelection=function(e){var r=this.attributes,i=r.type,a=r.selectionType;this.foregroundGroup=_t(e).maybeAppendByClassName(Xi.foreground,"g");var o=Bt(this.attributes,"selection"),s=function(c){return c.style("visibility",function(u){return u.show?"visible":"hidden"}).style("cursor",function(u){return a==="select"?"grab":a==="invert"?"crosshair":"default"}).styles(o)},l=this;this.foregroundGroup.selectAll(Xi.selection.class).data(i==="value"?[]:this.calcSelectionArea().map(function(c,u){return{style:E({},c),index:u,show:a==="select"?u===1:u!==1}}),function(c){return c.index}).join(function(c){return c.append("rect").attr("className",Xi.selection.name).call(s).each(function(u,f){var h=this;f===1?(l.selectionShape=_t(this),this.on("pointerdown",function(d){h.attr("cursor","grabbing"),l.onDragStart("selection")(d)}),l.dispatchCustomEvent(this,"pointerenter","selectionMouseenter"),l.dispatchCustomEvent(this,"pointerleave","selectionMouseleave"),l.dispatchCustomEvent(this,"click","selectionClick"),this.addEventListener("pointerdown",function(){h.attr("cursor","grabbing")}),this.addEventListener("pointerup",function(){h.attr("cursor","pointer")}),this.addEventListener("pointerover",function(){h.attr("cursor","pointer")})):this.on("pointerdown",l.onDragStart("track"))})},function(c){return c.call(s)},function(c){return c.remove()}),this.updateSelectionArea(!1),this.renderHandles()},n.prototype.render=function(e,r){this.renderTrack(r),this.renderSparkline(r),this.renderBrushArea(r),this.renderSelection(r)},n.prototype.clampValues=function(e,r){var i;r===void 0&&(r=4);var a=R(this.range,2),o=a[0],s=a[1],l=R(this.getValues().map(function(g){return qw(g,r)}),2),c=l[0],u=l[1],f=Array.isArray(e)?e:[c,e??u],h=R((f||[c,u]).map(function(g){return qw(g,r)}),2),d=h[0],p=h[1];if(this.attributes.type==="value")return[0,Xa(p,o,s)];d>p&&(i=R([p,d],2),d=i[0],p=i[1]);var v=p-d;return v>s-o?[o,s]:d<o?c===o&&u===p?[o,p]:[o,v+o]:p>s?u===s&&c===d?[d,s]:[s-v,s]:[d,p]},n.prototype.calcSelectionArea=function(e){var r=R(this.clampValues(e),2),i=r[0],a=r[1],o=this.availableSpace,s=o.x,l=o.y,c=o.width,u=o.height;return this.getOrientVal([[{y:l,height:u,x:s,width:i*c},{y:l,height:u,x:i*c+s,width:(a-i)*c},{y:l,height:u,x:a*c,width:(1-a)*c}],[{x:s,width:c,y:l,height:i*u},{x:s,width:c,y:i*u+l,height:(a-i)*u},{x:s,width:c,y:a*u,height:(1-a)*u}]])},n.prototype.calcHandlePosition=function(e){var r=this.attributes.handleIconOffset,i=this.availableSpace,a=i.x,o=i.y,s=i.width,l=i.height,c=R(this.clampValues(),2),u=c[0],f=c[1],h=e==="start"?-r:r,d=(e==="start"?u:f)*this.getOrientVal([s,l])+h;return{x:a+this.getOrientVal([d,s/2]),y:o+this.getOrientVal([l/2,d])}},n.prototype.inferTextStyle=function(e){var r=this.attributes.orientation;return r==="horizontal"?{}:e==="start"?{transform:"rotate(90)",textAlign:"start"}:e==="end"?{transform:"rotate(90)",textAlign:"end"}:{}},n.prototype.calcHandleText=function(e){var r,i=this.attributes,a=i.type,o=i.orientation,s=i.formatter,l=i.autoFitLabel,c=Bt(this.attributes,"handle"),u=Bt(c,"label"),f=c.spacing,h=this.getHandleSize(),d=this.clampValues(),p=e==="start"?d[0]:d[1],v=s(p),g=new fA({style:E(E(E({},u),this.inferTextStyle(e)),{text:v})}),y=g.getBBox(),m=y.width,x=y.height;if(g.destroy(),!l){if(a==="value")return{text:v,x:0,y:-x-f};var b=f+h+(o==="horizontal"?m/2:0);return r={text:v},r[o==="horizontal"?"x":"y"]=e==="start"?-b:b,r}var w=0,S=0,O=this.availableSpace,M=O.width,A=O.height,T=this.calcSelectionArea()[1],C=T.x,P=T.y,_=T.width,k=T.height,I=f+h;if(o==="horizontal"){var L=I+m/2;if(e==="start"){var F=C-I-m;w=F>0?-L:L}else{var B=M-C-_-I>m;w=B?L:-L}}else{var D=I,N=x+I;e==="start"?S=P-h>x?-N:D:S=A-(P+k)-h>x?N:-D}return{x:w,y:S,text:v}},n.prototype.getHandleLabelStyle=function(e){var r=Bt(this.attributes,"handleLabel");return E(E(E({},r),this.calcHandleText(e)),this.inferTextStyle(e))},n.prototype.getHandleIconStyle=function(){var e=this.attributes.handleIconShape,r=Bt(this.attributes,"handleIcon"),i=this.getOrientVal(["ew-resize","ns-resize"]),a=this.getHandleSize();return E({cursor:i,shape:e,size:a},r)},n.prototype.getHandleStyle=function(e){var r=this.attributes,i=r.showLabel,a=r.showLabelOnInteraction,o=r.orientation,s=this.calcHandlePosition(e),l=this.calcHandleText(e),c=i;return!i&&a&&(this.target?c=!0:c=!1),E(E(E(E({},Qi(this.getHandleIconStyle(),"icon")),Qi(E(E({},this.getHandleLabelStyle(e)),l),"label")),s),{orientation:o,showLabel:c,type:e,zIndex:3})},n.prototype.getHandleSize=function(){var e=this.attributes,r=e.handleIconSize,i=e.width,a=e.height;return r||Math.floor((this.getOrientVal([+a,+i])+4)/2.4)},n.prototype.getOrientVal=function(e){var r=R(e,2),i=r[0],a=r[1],o=this.attributes.orientation;return o==="horizontal"?i:a},n.prototype.setValuesOffset=function(e,r,i){r===void 0&&(r=0),i===void 0&&(i=!1);var a=this.attributes.type,o=R(this.getValues(),2),s=o[0],l=o[1],c=a==="range"?e:0,u=[s+c,l+r].sort();i?this.setValues(u):this.innerSetValues(u,!0)},n.prototype.getRatio=function(e){var r=this.availableSpace,i=r.width,a=r.height;return e/this.getOrientVal([i,a])},n.prototype.dispatchCustomEvent=function(e,r,i){var a=this;e.on(r,function(o){o.stopPropagation(),a.dispatchEvent(new Se(i,{detail:o}))})},n.prototype.bindEvents=function(){this.addEventListener("wheel",this.onScroll);var e=this.brushArea;this.dispatchCustomEvent(e,"click","trackClick"),this.dispatchCustomEvent(e,"pointerenter","trackMouseenter"),this.dispatchCustomEvent(e,"pointerleave","trackMouseleave"),e.on("pointerdown",this.onDragStart("track"))},n.prototype.onScroll=function(e){var r=this.attributes.scrollable;if(r){var i=e.deltaX,a=e.deltaY,o=a||i,s=this.getRatio(o);this.setValuesOffset(s,s,!0)}},n.tag="slider",n}(In),GEt=function(t){G(n,t);function n(e){var r=t.call(this,e,{isRound:!0,orientation:"vertical",padding:[2,2,2,2],scrollable:!0,slidable:!0,thumbCursor:"default",trackSize:10,value:0})||this;return r.range=[0,1],r.onValueChange=function(i){var a=r.attributes.value;if(i!==a){var o={detail:{oldValue:i,value:a}};r.dispatchEvent(new Se("scroll",o)),r.dispatchEvent(new Se("valuechange",o))}},r.onTrackClick=function(i){var a=r.attributes.slidable;if(a){var o=R(r.getLocalPosition(),2),s=o[0],l=o[1],c=R(r.padding,4),u=c[0],f=c[3],h=r.getOrientVal([s+f,l+u]),d=r.getOrientVal(iy(i)),p=(d-h)/r.trackLength;r.setValue(p,!0)}},r.onThumbMouseenter=function(i){r.dispatchEvent(new Se("thumbMouseenter",{detail:i.detail}))},r.onTrackMouseenter=function(i){r.dispatchEvent(new Se("trackMouseenter",{detail:i.detail}))},r.onThumbMouseleave=function(i){r.dispatchEvent(new Se("thumbMouseleave",{detail:i.detail}))},r.onTrackMouseleave=function(i){r.dispatchEvent(new Se("trackMouseleave",{detail:i.detail}))},r}return Object.defineProperty(n.prototype,"padding",{get:function(){var e=this.attributes.padding;return Rn(e)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"value",{get:function(){var e=this.attributes.value,r=R(this.range,2),i=r[0],a=r[1];return Xa(e,i,a)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"trackLength",{get:function(){var e=this.attributes,r=e.viewportLength,i=e.trackLength,a=i===void 0?r:i;return a},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"availableSpace",{get:function(){var e=this.attributes.trackSize,r=this.trackLength,i=R(this.padding,4),a=i[0],o=i[1],s=i[2],l=i[3],c=R(this.getOrientVal([[r,e],[e,r]]),2),u=c[0],f=c[1];return{x:l,y:a,width:+u-(l+o),height:+f-(a+s)}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"trackRadius",{get:function(){var e=this.attributes,r=e.isRound,i=e.trackSize;return r?i/2:0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"thumbRadius",{get:function(){var e=this.attributes,r=e.isRound,i=e.thumbRadius;if(!r)return 0;var a=this.availableSpace,o=a.width,s=a.height;return i||this.getOrientVal([s,o])/2},enumerable:!1,configurable:!0}),n.prototype.getValues=function(e){e===void 0&&(e=this.value);var r=this.attributes,i=r.viewportLength,a=r.contentLength,o=i/a,s=R(this.range,2),l=s[0],c=s[1],u=e*(c-l-o);return[u,u+o]},n.prototype.getValue=function(){return this.value},n.prototype.renderSlider=function(e){var r=this.attributes,i=r.orientation,a=r.trackSize,o=r.padding,s=r.slidable,l=Bt(this.attributes,"track"),c=Bt(this.attributes,"thumb"),u=E(E({brushable:!1,orientation:i,padding:o,selectionRadius:this.thumbRadius,showHandle:!1,slidable:s,trackLength:this.trackLength,trackRadius:this.trackRadius,trackSize:a,values:this.getValues()},Qi(l,"track")),Qi(c,"selection"));this.slider=_t(e).maybeAppendByClassName("scrollbar",function(){return new z8({style:u})}).update(u).node()},n.prototype.render=function(e,r){this.renderSlider(r)},n.prototype.setValue=function(e,r){r===void 0&&(r=!1);var i=this.attributes.value,a=R(this.range,2),o=a[0],s=a[1];this.slider.setValues(this.getValues(Xa(e,o,s)),r),this.onValueChange(i)},n.prototype.bindEvents=function(){var e=this;this.slider.addEventListener("trackClick",function(r){r.stopPropagation(),e.onTrackClick(r.detail)}),this.onHover()},n.prototype.getOrientVal=function(e){var r=this.attributes.orientation;return r==="horizontal"?e[0]:e[1]},n.prototype.onHover=function(){this.slider.addEventListener("selectionMouseenter",this.onThumbMouseenter),this.slider.addEventListener("trackMouseenter",this.onTrackMouseenter),this.slider.addEventListener("selectionMouseleave",this.onThumbMouseleave),this.slider.addEventListener("trackMouseleave",this.onTrackMouseleave)},n.tag="scrollbar",n}(In),yA={data:[],animate:{enter:!1,update:{duration:100,easing:"ease-in-out-sine",fill:"both"},exit:{duration:100,fill:"both"}},showArrow:!0,showGrid:!0,showLabel:!0,showLine:!0,showTick:!0,showTitle:!0,showTrunc:!1,dataThreshold:100,lineLineWidth:1,lineStroke:"black",crossPadding:10,titleFill:"black",titleFontSize:12,titlePosition:"lb",titleSpacing:0,titleTextAlign:"center",titleTextBaseline:"middle",lineArrow:function(){return new lr({style:{path:[["M",10,10],["L",-10,0],["L",10,-10],["L",0,0],["L",10,10],["Z"]],anchor:"0.5 0.5",fill:"black",transformOrigin:"center"}})},labelAlign:"parallel",labelDirection:"positive",labelFontSize:12,labelSpacing:0,gridConnect:"line",gridControlAngles:[],gridDirection:"positive",gridLength:0,gridType:"segment",lineArrowOffset:15,lineArrowSize:10,tickDirection:"positive",tickLength:5,tickLineWidth:1,tickStroke:"black",labelOverlap:[]};_m({},yA,{style:{type:"arc"}});_m({},yA,{style:{}});var ve=Oi({mainGroup:"main-group",gridGroup:"grid-group",grid:"grid",lineGroup:"line-group",line:"line",tickGroup:"tick-group",tick:"tick",tickItem:"tick-item",labelGroup:"label-group",label:"label",labelItem:"label-item",titleGroup:"title-group",title:"title",lineFirst:"line-first",lineSecond:"line-second"},"axis"),hu=Oi({lineGroup:"line-group",line:"line",regionGroup:"region-group",region:"region"},"grid");function G8(t){return t.reduce(function(n,e,r){return n.push(X([r===0?"M":"L"],R(e),!1)),n},[])}function YEt(t,n,e){var r=n.connect,i=r===void 0?"line":r,a=n.center;if(i==="line")return G8(t);if(!a)return[];var o=Qh(t[0],a),s=e?0:1;return t.reduce(function(l,c,u){return u===0?l.push(X(["M"],R(c),!1)):l.push(X(["A",o,o,0,0,s],R(c),!1)),l},[])}function Qw(t,n,e){return n.type==="surround"?YEt(t,n,e):G8(t)}function WEt(t,n,e){var r=e.type,i=e.connect,a=e.center,o=e.closed,s=o?[["Z"]]:[],l=R([Qw(t,e),Qw(n.slice().reverse(),e,!0)],2),c=l[0],u=l[1],f=R([t[0],n.slice(-1)[0]],2),h=f[0],d=f[1],p=function(m,x){return[c,m,u,x,s].flat()};if(i==="line"||r==="surround")return p([X(["L"],R(d),!1)],[X(["L"],R(h),!1)]);if(!a)throw new Error("Arc grid need to specified center");var v=R([Qh(d,a),Qh(h,a)],2),g=v[0],y=v[1];return p([X(["A",g,g,0,0,1],R(d),!1),X(["L"],R(d),!1)],[X(["A",y,y,0,0,0],R(h),!1),X(["L"],R(h),!1)])}function VEt(t,n,e,r){var i=e.animate,a=e.isBillboard,o=n.map(function(s,l){return{id:s.id||"grid-line-".concat(l),path:Qw(s.points,e)}});return t.selectAll(hu.line.class).data(o,function(s){return s.id}).join(function(s){return s.append("path").each(function(l,c){var u=vi(sL(E({path:l.path},r)),[l,c,o]);this.attr(E({class:hu.line.name,stroke:"#D9D9D9",lineWidth:1,lineDash:[4,4],isBillboard:a},u))})},function(s){return s.transition(function(l,c){var u=vi(sL(E({path:l.path},r)),[l,c,o]);return Di(this,u,i.update)})},function(s){return s.transition(function(){var l=this,c=Fm(this,i.exit);return ju(c,function(){return l.remove()}),c})}).transitions()}function HEt(t,n,e){var r=e.animate,i=e.connect,a=e.areaFill;if(n.length<2||!a||!i)return[];for(var o=Array.isArray(a)?a:[a,"transparent"],s=function(p){return o[p%o.length]},l=[],c=0;c<n.length-1;c++){var u=R([n[c].points,n[c+1].points],2),f=u[0],h=u[1],d=WEt(f,h,e);l.push({path:d,fill:s(c)})}return t.selectAll(hu.region.class).data(l,function(p,v){return v}).join(function(p){return p.append("path").each(function(v,g){var y=vi(v,[v,g,l]);this.attr(y)}).attr("className",hu.region.name)},function(p){return p.transition(function(v,g){var y=vi(v,[v,g,l]);return Di(this,y,r.update)})},function(p){return p.transition(function(){var v=this,g=Fm(this,r.exit);return ju(g,function(){return v.remove()}),g})}).transitions()}function XEt(t){var n=t.data,e=n===void 0?[]:n,r=t.closed;return r?e.map(function(i){var a=i.points,o=R(a,1),s=o[0];return E(E({},i),{points:X(X([],R(a),!1),[s],!1)})}):e}var UEt=function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.render=function(e,r){e.type,e.center,e.areaFill,e.closed;var i=vt(e,["type","center","areaFill","closed"]),a=XEt(e),o=_t(r).maybeAppendByClassName(hu.lineGroup,"g"),s=_t(r).maybeAppendByClassName(hu.regionGroup,"g"),l=VEt(o,a,e,i),c=HEt(s,a,e);return X(X([],R(l),!1),R(c),!1)},n}(In);function Y8(t,n){return Object.fromEntries(Object.entries(t).map(function(e){var r=R(e,2),i=r[0],a=r[1];return[i,vi(a,n)]}))}function mA(t,n){return n&&Si(n)?t.filter(n):t}function W8(t,n){var e=n.startAngle,r=n.endAngle;return(r-e)*t+e}function Dm(t,n){if(n.type==="linear"){var e=R(n.startPos,2),r=e[0],i=e[1],a=R(n.endPos,2),o=a[0],s=a[1],l=R([o-r,s-i],2),c=l[0],u=l[1];return M8([c,u])}var f=fu(W8(t,n));return[-Math.sin(f),Math.cos(f)]}function xA(t,n,e){var r=Dm(t,e);return dAt(r,n!=="positive")}function Ud(t,n){return xA(t,n.labelDirection,n)}function qEt(t,n){var e=R(n.startPos,2),r=e[0],i=e[1],a=R(n.endPos,2),o=a[0],s=a[1],l=R([o-r,s-i],2),c=l[0],u=l[1];return[r+c*t,i+u*t]}function ZEt(t,n){var e=n.radius,r=R(n.center,2),i=r[0],a=r[1],o=fu(W8(t,n));return[i+e*Math.cos(o),a+e*Math.sin(o)]}function Rm(t,n){return n.type==="linear"?qEt(t,n):ZEt(t,n)}function V8(t){return Dm(0,t)[1]===0}function H8(t){return Dm(0,t)[0]===0}function X8(t,n){return n-t===360}function EL(t,n,e,r,i){var a=n-t,o=R([i,i],2),s=o[0],l=o[1],c=R([fu(t),fu(n)],2),u=c[0],f=c[1],h=function(A){return[e+i*Math.cos(A),r+i*Math.sin(A)]},d=R(h(u),2),p=d[0],v=d[1],g=R(h(f),2),y=g[0],m=g[1];if(X8(t,n)){var x=(f+u)/2,b=R(h(x),2),w=b[0],S=b[1];return[["M",p,v],["A",s,l,0,1,0,w,S],["A",s,l,0,1,0,y,m]]}var O=a>180?1:0,M=t>n?0:1;return"M".concat(p,",").concat(v,",A").concat(s,",").concat(l,",0,").concat(O,",").concat(M,",").concat(y,",").concat(m)}function KEt(t){var n=t.attributes,e=n.startAngle,r=n.endAngle,i=n.center,a=n.radius;return X(X([e,r],R(i),!1),[a],!1)}function QEt(t,n,e,r){var i=n.startAngle,a=n.endAngle,o=n.center,s=n.radius;return t.selectAll(ve.line.class).data([{path:EL.apply(void 0,X(X([i,a],R(o),!1),[s],!1))}],function(l,c){return c}).join(function(l){return l.append("path").attr("className",ve.line.name).styles(n).styles({path:function(c){return c.path}})},function(l){return l.transition(function(){var c=this,u=cAt(this,KEt(this),X(X([i,a],R(o),!1),[s],!1),r.update);if(u){var f=function(){var h=v8(c.attributes,"__keyframe_data__");c.style.path=EL.apply(void 0,X([],R(h),!1))};u.onframe=f,u.onfinish=f}return u}).styles(n)},function(l){return l.remove()}).styles(e).transitions()}function JEt(t,n){n.truncRange,n.truncShape,n.lineExtension}function tTt(t,n,e){e===void 0&&(e=[0,0]);var r=R([t,n,e],3),i=R(r[0],2),a=i[0],o=i[1],s=R(r[1],2),l=s[0],c=s[1],u=R(r[2],2),f=u[0],h=u[1],d=R([l-a,c-o],2),p=d[0],v=d[1],g=Math.sqrt(Math.pow(p,2)+Math.pow(v,2)),y=R([-f/g,h/g],2),m=y[0],x=y[1];return[m*p,m*v,x*p,x*v]}function TL(t){var n=R(t,2),e=R(n[0],2),r=e[0],i=e[1],a=R(n[1],2),o=a[0],s=a[1];return{x1:r,y1:i,x2:o,y2:s}}function eTt(t,n,e,r){var i=n.showTrunc,a=n.startPos,o=n.endPos,s=n.truncRange,l=n.lineExtension,c=R([a,o],2),u=R(c[0],2),f=u[0],h=u[1],d=R(c[1],2),p=d[0],v=d[1],g=R(l?tTt(a,o,l):new Array(4).fill(0),4),y=g[0],m=g[1],x=g[2],b=g[3],w=function(B){return t.selectAll(ve.line.class).data(B,function(D,N){return N}).join(function(D){return D.append("line").attr("className",function(N){return"".concat(ve.line.name," ").concat(N.className)}).styles(e).transition(function(N){return Di(this,TL(N.line),!1)})},function(D){return D.styles(e).transition(function(N){var j=N.line;return Di(this,TL(j),r.update)})},function(D){return D.remove()}).transitions()};if(!i||!s)return w([{line:[[f+y,h+m],[p+x,v+b]],className:ve.line.name}]);var S=R(s,2),O=S[0],M=S[1],A=p-f,T=v-h,C=R([f+A*O,h+T*O],2),P=C[0],_=C[1],k=R([f+A*M,h+T*M],2),I=k[0],L=k[1],F=w([{line:[[f+y,h+m],[P,_]],className:ve.lineFirst.name},{line:[[I,L],[p+x,v+b]],className:ve.lineSecond.name}]);return JEt(t,n),F}function nTt(t,n,e,r){var i=e.showArrow,a=e.showTrunc,o=e.lineArrow,s=e.lineArrowOffset,l=e.lineArrowSize,c;if(n==="arc"?c=t.select(ve.line.class):a?c=t.select(ve.lineSecond.class):c=t.select(ve.line.class),!i||!o||e.type==="arc"&&X8(e.startAngle,e.endAngle)){var u=c.node();u&&(u.style.markerEnd=void 0);return}var f=Ol(o);f.attr(r),dA(f,l,!0),c.style("markerEnd",f).style("markerEndOffset",-s)}function rTt(t,n,e){var r=n.type,i,a=Bt(n,"line");return r==="linear"?i=eTt(t,n,oL(a,"arrow"),e):i=QEt(t,n,oL(a,"arrow"),e),nTt(t,r,n,a),i}function iTt(t,n){return xA(t,n.gridDirection,n)}function U8(t){var n=t.type,e=t.gridCenter;return n==="linear"?e:e||t.center}function aTt(t,n){var e=n.gridLength;return t.map(function(r,i){var a=r.value,o=R(Rm(a,n),2),s=o[0],l=o[1],c=R(Fa(iTt(a,n),e),2),u=c[0],f=c[1];return{id:i,points:[[s,l],[s+u,l+f]]}})}function oTt(t,n){var e=n.gridControlAngles,r=U8(n);if(!r)throw new Error("grid center is not provide");if(t.length<2)throw new Error("Invalid grid data");if(!e||e.length===0)throw new Error("Invalid gridControlAngles");var i=R(r,2),a=i[0],o=i[1];return t.map(function(s,l){var c=s.value,u=R(Rm(c,n),2),f=u[0],h=u[1],d=R([f-a,h-o],2),p=d[0],v=d[1],g=[];return e.forEach(function(y){var m=fu(y),x=R([Math.cos(m),Math.sin(m)],2),b=x[0],w=x[1],S=p*b-v*w+a,O=p*w+v*b+o;g.push([S,O])}),{points:g,id:l}})}function sTt(t,n,e,r){var i=Bt(e,"grid"),a=i.type,o=i.areaFill,s=U8(e),l=mA(n,e.gridFilter),c=a==="segment"?aTt(l,e):oTt(l,e),u=E(E({},i),{center:s,areaFill:Si(o)?l.map(function(f,h){return vi(o,[f,h,l])}):o,animate:r,data:c});return t.selectAll(ve.grid.class).data([1]).join(function(f){return f.append(function(){return new UEt({style:u})}).attr("className",ve.grid.name)},function(f){return f.transition(function(){return this.update(u)})},function(f){return f.remove()}).transitions()}var Jw=function(){function t(n,e,r,i){this.set(n,e,r,i)}return Object.defineProperty(t.prototype,"left",{get:function(){return this.x1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.defined("x2")&&this.defined("x1")?this.x2-this.x1:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.defined("y2")&&this.defined("y1")?this.y2-this.y1:void 0},enumerable:!1,configurable:!0}),t.prototype.rotatedPoints=function(n,e,r){var i=this,a=i.x1,o=i.y1,s=i.x2,l=i.y2,c=Math.cos(n),u=Math.sin(n),f=e-e*c+r*u,h=r-e*u-r*c,d=[[c*a-u*l+f,u*a+c*l+h],[c*s-u*l+f,u*s+c*l+h],[c*a-u*o+f,u*a+c*o+h],[c*s-u*o+f,u*s+c*o+h]];return d},t.prototype.set=function(n,e,r,i){return r<n?(this.x2=n,this.x1=r):(this.x1=n,this.x2=r),i<e?(this.y2=e,this.y1=i):(this.y1=e,this.y2=i),this},t.prototype.defined=function(n){return this[n]!==Number.MAX_VALUE&&this[n]!==-Number.MAX_VALUE},t}();function t2(t,n){var e=t.getEulerAngles()||0;t.setEulerAngles(0);var r=t.getLocalBounds(),i=R(r.min,2),a=i[0],o=i[1],s=R(r.max,2),l=s[0],c=s[1],u=bA(t),f=u.width,h=u.height,d=h,p=0,v=0,g=a,y=o,m=S8(t);if(m){d-=1.5;var x=m.style.textAlign,b=m.style.textBaseline;x==="center"?g=(a+l)/2:(x==="right"||x==="end")&&(g=l),b==="middle"?y=(o+c)/2:b==="bottom"&&(y=c)}var w=R(Rn(n),4),S=w[0],O=S===void 0?0:S,M=w[1],A=M===void 0?0:M,T=w[2],C=T===void 0?O:T,P=w[3],_=P===void 0?A:P,k=new Jw((p+=a)-_,(v+=o)-O,p+f+A,v+d+C);return t.setEulerAngles(e),k.rotatedPoints(fu(e),g,y)}function bA(t){return t.__bbox__?t.__bbox__:t.getBBox()}function Tf(t,n){return n[0]<=Math.max(t[0][0],t[1][0])&&n[0]<=Math.min(t[0][0],t[1][0])&&n[1]<=Math.max(t[0][1],t[1][1])&&n[1]<=Math.min(t[0][1],t[1][1])}function Cf(t,n,e){var r=(n[1]-t[1])*(e[0]-n[0])-(n[0]-t[0])*(e[1]-n[1]);return r===0?0:r<0?2:1}function lTt(t,n){var e=Cf(t[0],t[1],n[0]),r=Cf(t[0],t[1],n[1]),i=Cf(n[0],n[1],t[0]),a=Cf(n[0],n[1],t[1]);return!!(e!==r&&i!==a||e===0&&Tf(t,n[0])||r===0&&Tf(t,n[1])||i===0&&Tf(n,t[0])||a===0&&Tf(n,t[1]))}function cTt(t,n){var e=t.length;if(e<3)return!1;var r=[n,[9999,n[1]]],i=0,a=0;do{var o=[t[a],t[(a+1)%e]];if(lTt(o,r)){if(Cf(o[0],n,o[1])===0)return Tf(o,n);i++}a=(a+1)%e}while(a!==0);return!!(i&1)}function uTt(t,n){return n.every(function(e){return cTt(t,e)})}function fTt(t,n,e){var r=t.x1,i=t.x2,a=t.y1,o=t.y2,s=[[r,a],[i,a],[i,o],[r,o]],l=t2(n,e);return uTt(s,l)}function hTt(t,n){var e=R(t,4),r=e[0],i=e[1],a=e[2],o=e[3],s=R(n,4),l=s[0],c=s[1],u=s[2],f=s[3],h=a-r,d=o-i,p=u-l,v=f-c,g=h*v-p*d;if(g===0)return!1;var y=g>0,m=r-l,x=i-c,b=h*x-d*m;if(b<0===y)return!1;var w=p*x-v*m;return!(w<0===y||b>g===y||w>g===y)}function dTt(t,n){var e=[[t[0],t[1],t[2],t[3]],[t[2],t[3],t[4],t[5]],[t[4],t[5],t[6],t[7]],[t[6],t[7],t[0],t[1]]];return e.some(function(r){return hTt(n,r)})}function pTt(t,n,e){var r,i,a=t2(t,e).flat(1),o=t2(n,e).flat(1),s=[[a[0],a[1],a[2],a[3]],[a[0],a[1],a[4],a[5]],[a[4],a[5],a[6],a[7]],[a[2],a[3],a[6],a[7]]];try{for(var l=Ct(s),c=l.next();!c.done;c=l.next()){var u=c.value;if(dTt(o,u))return!0}}catch(f){r={error:f}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}return!1}function vTt(t,n){var e=t.type,r=t.labelDirection,i=t.crossSize;if(!i)return!1;if(e==="arc"){var a=t.center,o=t.radius,s=R(a,2),l=s[0],c=s[1],u=r==="negative"?0:i,f=-o-u,h=o+u,d=R(Rn(n),4),p=d[0],v=d[1],g=d[2],y=d[3];return new Jw(l+f-y,c+f-p,l+h+v,c+h+g)}var m=R(t.startPos,2),x=m[0],b=m[1],w=R(t.endPos,2),S=w[0],O=w[1],M=R(H8(t)?[-n,0,n,0]:[0,n,0,-n],4),A=M[0],T=M[1],C=M[2],P=M[3],_=Ud(0,t),k=Fa(_,i),I=new Jw(x,b,S,O);return I.x1+=P,I.y1+=A,I.x2+=T+k[0],I.y2+=C+k[1],I}function Bm(t,n,e){var r,i,a=n.crossPadding,o=new Set,s=null,l=vTt(n,a),c=function(p){return l?fTt(l,p):!0},u=function(p,v){return p?!pTt(p,v,Rn(e)):!0};try{for(var f=Ct(t),h=f.next();!h.done;h=f.next()){var d=h.value;c(d)?!s||u(s,d)?s=d:(o.add(s),o.add(d)):o.add(d)}}catch(p){r={error:p}}finally{try{h&&!h.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}return Array.from(o)}function Ox(t,n){return n===void 0&&(n={}),cA(t)?0:typeof t=="number"?t:Math.floor(rAt(t,n))}function gTt(t,n,e,r){if(!(t.length<=1)){var i=n.suffix,a=i===void 0?"...":i,o=n.minLength,s=n.maxLength,l=s===void 0?1/0:s,c=n.step,u=c===void 0?" ":c,f=n.margin,h=f===void 0?[0,0,0,0]:f,d=w8(r.getTextShape(t[0])),p=Ox(u,d),v=o?Ox(o,d):p,g=Ox(l,d);(cA(g)||g===1/0)&&(g=Math.max.apply(null,t.map(function(S){return bA(S).width})));var y=t.slice(),m=R(h,4);m[0],m[1],m[2],m[3];for(var x=function(S){if(y.forEach(function(O){r.ellipsis(r.getTextShape(O),S,a)}),y=Bm(t,e,h),y.length<1)return{value:void 0}},b=g;b>v+p;b-=p){var w=x(b);if(typeof w=="object")return w.value}}}var yTt={parity:function(t,n){var e=n.seq,r=e===void 0?2:e;return t.filter(function(i,a){return a%r?(gs(i),!1):!0})}},mTt=function(t){return t.filter(b8)};function xTt(t,n,e,r){var i=t.length,a=n.keepHeader,o=n.keepTail;if(!(i<=1||i===2&&a&&o)){var s=yTt.parity,l=function(x){return x.forEach(r.show),x},c=2,u=t.slice(),f=t.slice(),h=Math.min.apply(Math,X([1],R(t.map(function(x){return bA(x).width})),!1));if(e.type==="linear"&&(V8(e)||H8(e))){var d=lL(t[0]).left,p=lL(t[i-1]).right,v=Math.abs(p-d)||1;c=Math.max(Math.floor(i*h/v),c)}var g,y;for(a&&(g=u.splice(0,1)[0]),o&&(y=u.splice(-1,1)[0],u.reverse()),l(u);c<t.length&&Bm(mTt(y?X(X([y],R(f),!1),[g],!1):X([g],R(f),!1)),e,n==null?void 0:n.margin).length;){if(y&&!g&&c%2===0){var m=u.splice(0,1);m.forEach(r.hide)}else if(y&&g){var m=u.splice(0,1);m.forEach(r.hide)}f=s(l(u),{seq:c}),c++}}}function bTt(t,n,e,r){var i,a,o=n.optionalAngles,s=o===void 0?[0,45,90]:o,l=n.margin,c=n.recoverWhenFailed,u=c===void 0?!0:c,f=t.map(function(y){return y.getLocalEulerAngles()}),h=function(){return Bm(t,e,l).length<1},d=function(y){return t.forEach(function(m,x){var b=Array.isArray(y)?y[x]:y;r.rotate(m,+b)})};try{for(var p=Ct(s),v=p.next();!v.done;v=p.next()){var g=v.value;if(d(g),h())return}}catch(y){i={error:y}}finally{try{v&&!v.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}u&&d(f)}function wTt(t){var n=t.type,e=t.labelDirection;return n==="linear"&&V8(t)?e==="negative"?"bottom":"top":"middle"}function STt(t,n,e,r){var i=n.wordWrapWidth,a=i===void 0?50:i,o=n.maxLines,s=o===void 0?3:o,l=n.recoverWhenFailed,c=l===void 0?!0:l,u=n.margin,f=u===void 0?[0,0,0,0]:u,h=t.map(function(m){return m.attr("maxLines")||1}),d=Math.min.apply(Math,X([],R(h),!1)),p=function(){return Bm(t,e,f).length<1},v=wTt(e),g=function(m){return t.forEach(function(x,b){var w=Array.isArray(m)?m[b]:m;r.wrap(x,a,w,v)})};if(!(d>s)){for(var y=d;y<=s;y++)if(g(y),p())return;c&&g(h)}}var OTt=new Map([["hide",xTt],["rotate",bTt],["ellipsis",gTt],["wrap",STt]]);function MTt(t,n,e){return n.labelOverlap.length<1?!1:e==="hide"?!eAt(t[0]):e==="rotate"?!t.some(function(r){var i;return!!(!((i=r.attr("transform"))===null||i===void 0)&&i.includes("rotate"))}):e==="ellipsis"||e==="wrap"?t.filter(function(r){return r.querySelector("text")}).length>1:!0}function ATt(t,n,e){var r=n.labelOverlap,i=r===void 0?[]:r;i.length&&i.forEach(function(a){var o=a.type,s=OTt.get(o);MTt(t,n,o)&&(s==null||s(t,a,n,e))})}function ETt(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var e=function(r){return r==="positive"?-1:1};return t.reduce(function(r,i){return r*e(i)},1)}function CL(t){for(var n=t;n<0;)n+=360;return Math.round(n%360)}function e2(t,n){var e=R(t,2),r=e[0],i=e[1],a=R(n,2),o=a[0],s=a[1],l=R([r*o+i*s,r*s-i*o],2),c=l[0],u=l[1];return Math.atan2(u,c)}function TTt(t){var n=(t+360)%180;return Dn(n,-90,90)||(n+=180),n}function CTt(t,n,e){var r,i=e.labelAlign,a=(r=n.style.transform)===null||r===void 0?void 0:r.includes("rotate");if(a)return n.getLocalEulerAngles();var o=0,s=Ud(t.value,e),l=Dm(t.value,e);return i==="horizontal"?0:(i==="perpendicular"?o=e2([1,0],s):o=e2([l[0]<0?-1:1,0],l),TTt(m8(o)))}function q8(t,n,e){var r=e.type,i=e.labelAlign,a=Ud(t,e),o=CL(n),s=CL(m8(e2([1,0],a))),l="center",c="middle";return r==="linear"?[90,270].includes(s)&&o===0?(l="center",c=a[1]===1?"top":"bottom"):!(s%180)&&[90,270].includes(o)?l="center":s===0?(Dn(o,0,90,!1,!0)||Dn(o,0,90)||Dn(o,270,360))&&(l="start"):s===90?Dn(o,0,90,!1,!0)?l="start":(Dn(o,90,180)||Dn(o,270,360))&&(l="end"):s===270?Dn(o,0,90,!1,!0)?l="end":(Dn(o,90,180)||Dn(o,270,360))&&(l="start"):s===180&&(o===90?l="start":(Dn(o,0,90)||Dn(o,270,360))&&(l="end")):i==="parallel"?Dn(s,0,180,!0)?c="top":c="bottom":i==="horizontal"?Dn(s,90,270,!1)?l="end":(Dn(s,270,360,!1)||Dn(s,0,90))&&(l="start"):i==="perpendicular"&&(Dn(s,90,270)?l="end":l="start"),{textAlign:l,textBaseline:c}}function PTt(t,n,e){n.setLocalEulerAngles(t);var r=n.__data__.value,i=q8(r,t,e),a=n.querySelector(ve.labelItem.class);a&&Z8(a,i)}function PL(t,n,e){var r=e.showTick,i=e.tickLength,a=e.tickDirection,o=e.labelDirection,s=e.labelSpacing,l=n.indexOf(t),c=vi(s,[t,l,n]),u=R([Ud(t.value,e),ETt(o,a)],2),f=u[0],h=u[1],d=h===1?vi(r?i:0,[t,l,n]):0,p=R(Ef(Fa(f,c+d),Rm(t.value,e)),2),v=p[0],g=p[1];return{x:v,y:g}}function kTt(t,n,e,r){var i=r.labelFormatter,a=Si(i)?function(){return Ol(vi(i,[t,n,e,Ud(t.value,r)]))}:function(){return Ol(t.label||"")};return a}function Z8(t,n){t.nodeName==="text"&&t.attr(n)}function kL(t){ATt(this.node().childNodes,t,{hide:gs,show:Xd,rotate:function(n,e){PTt(+e,n,t)},ellipsis:function(n,e,r){n&&Uw(n,e||1/0,r)},wrap:function(n,e,r){n&&iAt(n,e,r)},getTextShape:function(n){return n.querySelector("text")}})}function _L(t,n,e,r,i){var a=e.indexOf(n),o=_t(t).append(kTt(n,a,e,i)).attr("className",ve.labelItem.name).node(),s=R(ro(Y8(r,[n,a,e])),2),l=s[0],c=s[1],u=c.transform,f=vt(c,["transform"]);ay(t,u);var h=CTt(n,t,i);return t.setLocalEulerAngles(+h),Z8(o,E(E({},q8(n.value,h,i)),l)),ay(t,u),t.attr(f),o}function _Tt(t,n,e,r){var i=mA(n,e.labelFilter),a=Bt(e,"label");return t.selectAll(ve.label.class).data(i,function(o,s){return s}).join(function(o){return o.append("g").attr("className",ve.label.name).transition(function(s){return _L(this,s,n,a,e),this.attr(PL(s,n,e)),this.__bbox__=s.bbox,null}).call(function(){return kL.call(t,e)})},function(o){return o.transition(function(s){var l=this.querySelector(ve.labelItem.class),c=_L(this,s,n,a,e),u=jEt(l,c,r.update),f=Di(this,PL(s,n,e),r.update);return this.__bbox__=s.bbox,X(X([],R(u),!1),[f],!1)}).call(function(s){var l=v8(s,"_transitions").flat().filter(b8);NEt(l,function(){return kL.call(t,e)})})},function(o){return o.transition(function(){var s=this,l=Fm(this.childNodes[0],r.exit);return ju(l,function(){return _t(s).remove()}),l})}).transitions()}function K8(t,n){return xA(t,n.tickDirection,n)}function LTt(t,n){var e=R(t,2),r=e[0],i=e[1];return[[0,0],[r*n,i*n]]}function ITt(t,n,e,r,i){var a=i.tickLength,o=R(LTt(r,vi(a,[t,n,e])),2),s=R(o[0],2),l=s[0],c=s[1],u=R(o[1],2),f=u[0],h=u[1];return{x1:l,x2:f,y1:c,y2:h}}function FTt(t,n,e,r,i){var a=i.tickFormatter,o=K8(n.value,i),s="line";return Si(a)&&(s=function(){return vi(a,[n,e,r,o])}),t.append(s).attr("className",ve.tickItem.name)}function DTt(t,n,e,r,i,a,o){var s=K8(t.value,a),l=ITt(t,n,e,s,a),c=l.x1,u=l.x2,f=l.y1,h=l.y2,d=R(ro(Y8(o,[t,n,e,s])),2),p=d[0],v=d[1];r.node().nodeName==="line"&&r.styles(E({x1:c,x2:u,y1:f,y2:h},p)),i.attr(v),r.styles(p)}function LL(t,n,e,r,i,a){var o=FTt(_t(this),t,n,e,r);DTt(t,n,e,o,this,r,i);var s=R(Rm(t.value,r),2),l=s[0],c=s[1];return Di(this,{x:l,y:c},a)}function RTt(t,n,e,r){var i=mA(n,e.tickFilter),a=Bt(e,"tick");return t.selectAll(ve.tick.class).data(i,function(o){return o.id||o.label}).join(function(o){return o.append("g").attr("className",ve.tick.name).transition(function(s,l){return LL.call(this,s,l,i,e,a,!1)})},function(o){return o.transition(function(s,l){return this.removeChildren(),LL.call(this,s,l,i,e,a,r.update)})},function(o){return o.transition(function(){var s=this,l=Fm(this.childNodes[0],r.exit);return ju(l,function(){return s.remove()}),l})}).transitions()}var IL=Oi({text:"text"},"title");function Nm(t){return/\S+-\S+/g.test(t)?t.split("-").map(function(n){return n[0]}):t.length>2?[t[0]]:t.split("")}function BTt(t,n){var e=t.attributes,r=e.position,i=e.spacing,a=e.inset,o=e.text,s=t.getBBox(),l=n.getBBox(),c=Nm(r),u=R(Rn(o?i:0),4),f=u[0],h=u[1],d=u[2],p=u[3],v=R(Rn(a),4),g=v[0],y=v[1],m=v[2],x=v[3],b=R([p+h,f+d],2),w=b[0],S=b[1],O=R([x+y,g+m],2),M=O[0],A=O[1];if(c[0]==="l")return new ze(s.x,s.y,l.width+s.width+w+M,Math.max(l.height+A,s.height));if(c[0]==="t")return new ze(s.x,s.y,Math.max(l.width+M,s.width),l.height+s.height+S+A);var T=R([n.attributes.width||l.width,n.attributes.height||l.height],2),C=T[0],P=T[1];return new ze(l.x,l.y,C+s.width+w+M,P+s.height+S+A)}function NTt(t,n){var e=Object.entries(n).reduce(function(r,i){var a=R(i,2),o=a[0],s=a[1],l=t.node().attr(o);return l||(r[o]=s),r},{});t.styles(e)}function $Tt(t){var n,e,r,i,a=t,o=a.width,s=a.height,l=a.position,c=R([+o/2,+s/2],2),u=c[0],f=c[1],h=R([+u,+f,"center","middle"],4),d=h[0],p=h[1],v=h[2],g=h[3],y=Nm(l);return y.includes("l")&&(n=R([0,"start"],2),d=n[0],v=n[1]),y.includes("r")&&(e=R([+o,"end"],2),d=e[0],v=e[1]),y.includes("t")&&(r=R([0,"top"],2),p=r[0],g=r[1]),y.includes("b")&&(i=R([+s,"bottom"],2),p=i[0],g=i[1]),{x:d,y:p,textAlign:v,textBaseline:g}}var Q8=function(t){G(n,t);function n(e){return t.call(this,e,{text:"",width:0,height:0,fill:"#4a505a",fontWeight:"bold",fontSize:12,fontFamily:"sans-serif",inset:0,spacing:0,position:"top-left"})||this}return n.prototype.getAvailableSpace=function(){var e=this,r=this.attributes,i=r.width,a=r.height,o=r.position,s=r.spacing,l=r.inset,c=e.querySelector(IL.text.class);if(!c)return new ze(0,0,+i,+a);var u=c.getBBox(),f=u.width,h=u.height,d=R(Rn(s),4),p=d[0],v=d[1],g=d[2],y=d[3],m=R([0,0,+i,+a],4),x=m[0],b=m[1],w=m[2],S=m[3],O=Nm(o);if(O.includes("i"))return new ze(x,b,w,S);O.forEach(function(L,F){var B,D,N,j;L==="t"&&(B=R(F===0?[h+g,+a-h-g]:[0,+a],2),b=B[0],S=B[1]),L==="r"&&(D=R([+i-f-y],1),w=D[0]),L==="b"&&(N=R([+a-h-p],1),S=N[0]),L==="l"&&(j=R(F===0?[f+v,+i-f-v]:[0,+i],2),x=j[0],w=j[1])});var M=R(Rn(l),4),A=M[0],T=M[1],C=M[2],P=M[3],_=R([P+T,A+C],2),k=_[0],I=_[1];return new ze(x+P,b+A,w-k,S-I)},n.prototype.getBBox=function(){return this.title?this.title.getBBox():new ze(0,0,0,0)},n.prototype.render=function(e,r){var i=this;e.width,e.height,e.position,e.spacing;var a=vt(e,["width","height","position","spacing"]),o=R(ro(a),1),s=o[0],l=$Tt(e),c=l.x,u=l.y,f=l.textAlign,h=l.textBaseline;Or(!!a.text,_t(r),function(d){i.title=d.maybeAppendByClassName(IL.text,"text").styles(s).call(NTt,{x:c,y:u,textAlign:f,textBaseline:h}).node()})},n}(In);function jTt(t,n,e){var r=e.titlePosition,i=r===void 0?"lb":r,a=e.titleSpacing,o=Nm(i),s=t.node().getLocalBounds(),l=R(s.min,2),c=l[0],u=l[1],f=R(s.halfExtents,2),h=f[0],d=f[1],p=R(n.node().getLocalBounds().halfExtents,2),v=p[0],g=p[1],y=R([c+h,u+d],2),m=y[0],x=y[1],b=R(Rn(a),4),w=b[0],S=b[1],O=b[2],M=b[3];if(["start","end"].includes(i)&&e.type==="linear"){var A=e.startPos,T=e.endPos,C=R(i==="start"?[A,T]:[T,A],2),P=C[0],_=C[1],k=M8([-_[0]+P[0],-_[1]+P[1]]),I=R(Fa(k,w),2),L=I[0],F=I[1];return{x:P[0]+L,y:P[1]+F}}return o.includes("t")&&(x-=d+g+w),o.includes("r")&&(m+=h+v+S),o.includes("l")&&(m-=h+v*2+M),o.includes("b")&&(x+=d+g*2+O),{x:m,y:x}}function zTt(t,n,e){var r=t.cloneNode(!0);r.style.transform="scale(1, 1)",r.style.transform="none";var i=r.getBBox().height;if(n==="vertical"){if(e==="left")return"rotate(-90) translate(0, ".concat(i/2,")");if(e==="right")return"rotate(-90) translate(0, -".concat(i/2,")")}return""}function FL(t,n,e,r,i){var a=Bt(r,"title"),o=R(ro(a),2),s=o[0],l=o[1],c=l.transform,u=vt(l,["transform"]);t.styles(s),n.styles(u);var f=c||zTt(t.node(),s.direction,s.position);ay(t.node(),f);var h=jTt(_t(e._offscreen||e.querySelector(ve.mainGroup.class)),n,r),d=h.x,p=h.y,v=Di(n.node(),{x:d,y:p},i);return ay(t.node(),f),v}function GTt(t,n,e,r){var i=e.titleText;return t.selectAll(ve.title.class).data([{title:i}].filter(function(a){return!!a.title}),function(a,o){return a.title}).join(function(a){return a.append(function(){return Ol(i)}).attr("className",ve.title.name).transition(function(){return FL(_t(this),t,n,e,r.enter)})},function(a){return a.transition(function(){return FL(_t(this),t,n,e,r.update)})},function(a){return a.remove()}).transitions()}function DL(t,n,e,r){var i=t.showLine,a=t.showTick,o=t.showLabel,s=n.maybeAppendByClassName(ve.lineGroup,"g"),l=Or(i,s,function(d){return rTt(d,t,r)})||[],c=n.maybeAppendByClassName(ve.tickGroup,"g"),u=Or(a,c,function(d){return RTt(d,e,t,r)})||[],f=n.maybeAppendByClassName(ve.labelGroup,"g"),h=Or(o,f,function(d){return _Tt(d,e,t,r)})||[];return X(X(X([],R(l),!1),R(u),!1),R(h),!1).filter(function(d){return!!d})}var wA=function(t){G(n,t);function n(e){return t.call(this,e,yA)||this}return n.prototype.render=function(e,r,i){var a=this,o=e.titleText,s=e.data,l=e.animate,c=e.showTitle,u=e.showGrid,f=e.dataThreshold,h=e.truncRange,d=mAt(s,f).filter(function(w){var S=w.value;return!(h&&S>h[0]&&S<h[1])}),p=AL(i===void 0?l:i),v=_t(r).maybeAppendByClassName(ve.gridGroup,"g"),g=Or(u,v,function(w){return sTt(w,d,e,p)})||[],y=_t(r).maybeAppendByClassName(ve.mainGroup,"g");o&&(!this.initialized&&p.enter||this.initialized&&p.update)&&DL(e,_t(this.offscreenGroup),d,AL(!1));var m=DL(e,_t(y.node()),d,p),x=_t(r).maybeAppendByClassName(ve.titleGroup,"g"),b=Or(c,x,function(w){return GTt(w,a,e,p)})||[];return X(X(X([],R(g),!1),R(m),!1),R(b),!1).flat().filter(function(w){return!!w})},n}(In),ri=Oi({prevBtnGroup:"prev-btn-group",prevBtn:"prev-btn",nextBtnGroup:"next-btn-group",nextBtn:"next-btn",pageInfoGroup:"page-info-group",pageInfo:"page-info",playWindow:"play-window",contentGroup:"content-group",controller:"controller",clipPath:"clip-path"},"navigator"),YTt=function(t){G(n,t);function n(e){var r=t.call(this,e,{animate:{easing:"linear",duration:200,fill:"both"},buttonCursor:"pointer",buttonFill:"black",buttonPath:qAt(0,0,6),buttonSize:12,controllerPadding:5,controllerSpacing:5,formatter:function(i,a){return"".concat(i,"/").concat(a)},defaultPage:0,loop:!1,orientation:"horizontal",pageNumFill:"black",pageNumFontSize:12,pageNumTextAlign:"start",pageNumTextBaseline:"middle"})||this;return r.playState="idle",r.contentGroup=r.appendChild(new $n({class:ri.contentGroup.name})),r.playWindow=r.contentGroup.appendChild(new $n({class:ri.playWindow.name})),r.innerCurrPage=r.defaultPage,r}return Object.defineProperty(n.prototype,"defaultPage",{get:function(){var e=this.attributes.defaultPage;return Xa(e,0,Math.max(this.pageViews.length-1,0))},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"pageViews",{get:function(){return this.playWindow.children},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"controllerShape",{get:function(){return this.totalPages>1?{width:55,height:0}:{width:0,height:0}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"pageShape",{get:function(){var e=this.pageViews,r=R(kAt(e.map(function(f){var h=f.getBBox(),d=h.width,p=h.height;return[d,p]})).map(function(f){return Math.max.apply(Math,X([],R(f),!1))}),2),i=r[0],a=r[1],o=this.attributes,s=o.pageWidth,l=s===void 0?i:s,c=o.pageHeight,u=c===void 0?a:c;return{pageWidth:l,pageHeight:u}},enumerable:!1,configurable:!0}),n.prototype.getContainer=function(){return this.playWindow},Object.defineProperty(n.prototype,"totalPages",{get:function(){return this.pageViews.length},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"currPage",{get:function(){return this.innerCurrPage},enumerable:!1,configurable:!0}),n.prototype.getBBox=function(){var e=t.prototype.getBBox.call(this),r=e.x,i=e.y,a=this.controllerShape,o=this.pageShape,s=o.pageWidth,l=o.pageHeight;return new ze(r,i,s+a.width,l)},n.prototype.goTo=function(e){var r=this,i=this.attributes.animate,a=this,o=a.currPage,s=a.playState,l=a.playWindow,c=a.pageViews;if(s!=="idle"||e<0||c.length<=0||e>=c.length)return null;c[o].setLocalPosition(0,0),this.prepareFollowingPage(e);var u=R(this.getFollowingPageDiff(e),2),f=u[0],h=u[1];this.playState="running";var d=R8(l,[{transform:"translate(0, 0)"},{transform:"translate(".concat(-f,", ").concat(-h,")")}],i);return ju(d,function(){r.innerCurrPage=e,r.playState="idle",r.setVisiblePages([e]),r.updatePageInfo()}),d},n.prototype.prev=function(){var e=this.attributes.loop,r=this.pageViews.length,i=this.currPage;if(!e&&i<=0)return null;var a=e?(i-1+r)%r:Xa(i-1,0,r);return this.goTo(a)},n.prototype.next=function(){var e=this.attributes.loop,r=this.pageViews.length,i=this.currPage;if(!e&&i>=r-1)return null;var a=e?(i+1)%r:Xa(i+1,0,r);return this.goTo(a)},n.prototype.renderClipPath=function(e){var r=this.pageShape,i=r.pageWidth,a=r.pageHeight;if(!i||!a){this.contentGroup.style.clipPath=void 0;return}this.clipPath=e.maybeAppendByClassName(ri.clipPath,"rect").styles({width:i,height:a}),this.contentGroup.attr("clipPath",this.clipPath.node())},n.prototype.setVisiblePages=function(e){this.playWindow.children.forEach(function(r,i){e.includes(i)?Xd(r):gs(r)})},n.prototype.adjustControllerLayout=function(){var e=this,r=e.prevBtnGroup,i=e.nextBtnGroup,a=e.pageInfoGroup,o=this.attributes,s=o.orientation,l=o.controllerPadding,c=a.getBBox(),u=c.width;c.height;var f=R(s==="horizontal"?[-180,0]:[-90,90],2),h=f[0],d=f[1];r.setLocalEulerAngles(h),i.setLocalEulerAngles(d);var p=r.getBBox(),v=p.width,g=p.height,y=i.getBBox(),m=y.width,x=y.height,b=Math.max(v,u,m),w=s==="horizontal"?{offset:[[0,0],[v/2+l,0],[v+u+l*2,0]],textAlign:"start"}:{offset:[[b/2,-g-l],[b/2,0],[b/2,x+l]],textAlign:"center"},S=R(w.offset,3),O=R(S[0],2),M=O[0],A=O[1],T=R(S[1],2),C=T[0],P=T[1],_=R(S[2],2),k=_[0],I=_[1],L=w.textAlign,F=a.querySelector("text");F&&(F.style.textAlign=L),r.setLocalPosition(M,A),a.setLocalPosition(C,P),i.setLocalPosition(k,I)},n.prototype.updatePageInfo=function(){var e,r=this,i=r.currPage,a=r.pageViews,o=r.attributes.formatter;a.length<2||((e=this.pageInfoGroup.querySelector(ri.pageInfo.class))===null||e===void 0||e.attr("text",o(i+1,a.length)),this.adjustControllerLayout())},n.prototype.getFollowingPageDiff=function(e){var r=this.currPage;if(r===e)return[0,0];var i=this.attributes.orientation,a=this.pageShape,o=a.pageWidth,s=a.pageHeight,l=e<r?-1:1;return i==="horizontal"?[l*o,0]:[0,l*s]},n.prototype.prepareFollowingPage=function(e){var r=this,i=r.currPage,a=r.pageViews;if(this.setVisiblePages([e,i]),e!==i){var o=R(this.getFollowingPageDiff(e),2),s=o[0],l=o[1];a[e].setLocalPosition(s,l)}},n.prototype.renderController=function(e){var r=this,i=this.attributes.controllerSpacing,a=this.pageShape,o=a.pageWidth,s=a.pageHeight,l=this.pageViews.length>=2,c=e.maybeAppendByClassName(ri.controller,"g");if(Lm(c.node(),l),!!l){var u=Bt(this.attributes,"button"),f=Bt(this.attributes,"pageNum"),h=R(ro(u),2),d=h[0],p=h[1],v=d.size,g=vt(d,["size"]),y=!c.select(ri.prevBtnGroup.class).node(),m=c.maybeAppendByClassName(ri.prevBtnGroup,"g").styles(p);this.prevBtnGroup=m.node();var x=m.maybeAppendByClassName(ri.prevBtn,"path"),b=c.maybeAppendByClassName(ri.nextBtnGroup,"g").styles(p);this.nextBtnGroup=b.node();var w=b.maybeAppendByClassName(ri.nextBtn,"path");[x,w].forEach(function(O){O.styles(E(E({},g),{transformOrigin:"center"})),dA(O.node(),v,!0)});var S=c.maybeAppendByClassName(ri.pageInfoGroup,"g");this.pageInfoGroup=S.node(),S.maybeAppendByClassName(ri.pageInfo,"text").styles(f),this.updatePageInfo(),c.node().setLocalPosition(o+i,s/2),y&&(this.prevBtnGroup.addEventListener("click",function(){r.prev()}),this.nextBtnGroup.addEventListener("click",function(){r.next()}))}},n.prototype.render=function(e,r){var i=_t(r);this.renderClipPath(i),this.renderController(i),this.setVisiblePages([this.defaultPage]),this.goTo(this.defaultPage)},n.prototype.bindEvents=function(){var e=this,r=XMt(function(){return e.render(e.attributes,e)},50);this.playWindow.addEventListener(Dt.INSERTED,r),this.playWindow.addEventListener(Dt.REMOVED,r)},n}(In);function WTt(t,n,e){var r=Math.round((t-e)/n);return e+r*n}function VTt(t,n,e){var r=1.4,i=r*e;return[["M",t-e,n-i],["L",t+e,n-i],["L",t+e,n+i],["L",t-e,n+i],["Z"]]}var J8=1.4,t9=.4;function HTt(t,n,e){var r=e,i=r*J8,a=r/2,o=r/6,s=t+i*t9;return[["M",t,n],["L",s,n+a],["L",t+i,n+a],["L",t+i,n-a],["L",s,n-a],["Z"],["M",s,n+o],["L",t+i-2,n+o],["M",s,n-o],["L",t+i-2,n-o]]}function XTt(t,n,e){var r=e,i=r*J8,a=r/2,o=r/6,s=n+i*t9;return[["M",t,n],["L",t-a,s],["L",t-a,n+i],["L",t+a,n+i],["L",t+a,s],["Z"],["M",t-o,s],["L",t-o,n+i-2],["M",t+o,s],["L",t+o,n+i-2]]}xe.registerSymbol("hiddenHandle",VTt);xe.registerSymbol("verticalHandle",HTt);xe.registerSymbol("horizontalHandle",XTt);function UTt(t,n,e,r){var i,a=R(t,2),o=a[0],s=a[1],l=R(n,2),c=l[0],u=l[1],f=R(e,2),h=f[0],d=f[1],p=R([c,u],2),v=p[0],g=p[1],y=g-v;return v>g&&(i=R([g,v],2),v=i[0],g=i[1]),y>s-o?[o,s]:v<o?h===o&&d===g?[o,g]:[o,y+o]:g>s?d===s&&h===v?[v,s]:[s-y,s]:[v,g]}function aa(t,n,e){return t===void 0&&(t="horizontal"),t==="horizontal"?n:e}var Ir=Oi({layout:"flex",markerGroup:"marker-group",marker:"marker",labelGroup:"label-group",label:"label",valueGroup:"value-group",value:"value",backgroundGroup:"background-group",background:"background"},"legend-category-item");function qTt(t){var n=t.querySelector(Ir.marker.class);return n?n.style:{}}var ZTt=function(t){G(n,t);function n(e){return t.call(this,e,{span:[1,1],marker:function(){return new Yd({style:{r:6}})},markerSize:10,labelFill:"#646464",valueFill:"#646464",labelFontSize:12,valueFontSize:12,labelTextBaseline:"middle",valueTextBaseline:"middle"})||this}return Object.defineProperty(n.prototype,"showValue",{get:function(){var e=this.attributes.valueText;return e?typeof e=="string"||typeof e=="number"?e!=="":typeof e=="function"?!0:e.attr("text")!=="":!1},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"actualSpace",{get:function(){var e=this.labelGroup,r=this.valueGroup,i=this.attributes.markerSize,a=e.node().getBBox(),o=a.width,s=a.height,l=r.node().getBBox(),c=l.width,u=l.height;return{markerWidth:i,labelWidth:o,valueWidth:c,height:Math.max(i,s,u)}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"span",{get:function(){var e=this.attributes.span;if(!e)return[1,1];var r=R(Rn(e),2),i=r[0],a=r[1],o=this.showValue?a:0,s=i+o;return[i/s,o/s]},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"shape",{get:function(){var e,r=this.attributes,i=r.markerSize,a=r.width,o=this.actualSpace,s=o.markerWidth,l=o.height,c=this.actualSpace,u=c.labelWidth,f=c.valueWidth,h=R(this.spacing,2),d=h[0],p=h[1];if(a){var v=a-i-d-p,g=R(this.span,2),y=g[0],m=g[1];e=R([y*v,m*v],2),u=e[0],f=e[1]}var x=s+u+f+d+p;return{width:x,height:l,markerWidth:s,labelWidth:u,valueWidth:f}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"spacing",{get:function(){var e=this.attributes.spacing;if(!e)return[0,0];var r=R(Rn(e),2),i=r[0],a=r[1];return this.showValue?[i,a]:[i,0]},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"layout",{get:function(){var e=this.shape,r=e.markerWidth,i=e.labelWidth,a=e.valueWidth,o=e.width,s=e.height,l=R(this.spacing,2),c=l[0],u=l[1];return{height:s,width:o,markerWidth:r,labelWidth:i,valueWidth:a,position:[r/2,r+c,r+i+c+u]}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"scaleSize",{get:function(){var e=qTt(this.markerGroup.node()),r=this.attributes,i=r.markerSize,a=r.markerStrokeWidth,o=a===void 0?e.strokeWidth:a,s=r.markerLineWidth,l=s===void 0?e.lineWidth:s,c=r.markerStroke,u=c===void 0?e.stroke:c,f=+(o||l||(u?1:0))*Math.sqrt(2),h=this.markerGroup.node().getBBox(),d=h.width,p=h.height;return(1-f/Math.max(d,p))*i},enumerable:!1,configurable:!0}),n.prototype.renderMarker=function(e){var r=this,i=this.attributes.marker,a=Bt(this.attributes,"marker");this.markerGroup=e.maybeAppendByClassName(Ir.markerGroup,"g").style("zIndex",0),Or(!!i,this.markerGroup,function(){var o=r.markerGroup.node(),s=o.getElementsByClassName(Ir.marker.name)[0],l=i();s?l.nodeName===s.nodeName?(MAt(s,l),_t(s).styles(a)):(s.remove(),_t(l).attr("className",Ir.marker.name).styles(a),o.appendChild(l)):(_t(l).attr("className",Ir.marker.name).styles(a),o.appendChild(l)),r.markerGroup.node().scale(1/r.markerGroup.node().getScale()[0]),dA(r.markerGroup.node(),r.scaleSize,!0)})},n.prototype.renderLabel=function(e){var r=Bt(this.attributes,"label"),i=r.text,a=vt(r,["text"]);this.labelGroup=e.maybeAppendByClassName(Ir.labelGroup,"g").style("zIndex",0),this.labelGroup.maybeAppendByClassName(Ir.label,function(){return Ol(i)}).styles(a)},n.prototype.renderValue=function(e){var r=this,i=Bt(this.attributes,"value"),a=i.text,o=vt(i,["text"]);this.valueGroup=e.maybeAppendByClassName(Ir.valueGroup,"g").style("zIndex",0),Or(this.showValue,this.valueGroup,function(){r.valueGroup.maybeAppendByClassName(Ir.value,function(){return Ol(a)}).styles(o)})},n.prototype.renderBackground=function(e){var r=this.shape,i=r.width,a=r.height,o=Bt(this.attributes,"background");this.background=e.maybeAppendByClassName(Ir.backgroundGroup,"g").style("zIndex",-1),this.background.maybeAppendByClassName(Ir.background,"rect").styles(E({width:i,height:a},o))},n.prototype.adjustLayout=function(){var e=this.layout,r=e.labelWidth,i=e.valueWidth,a=e.height,o=R(e.position,3),s=o[0],l=o[1],c=o[2],u=a/2;this.markerGroup.styles({x:s,y:u}),this.labelGroup.styles({x:l,y:u}),Uw(this.labelGroup.select(Ir.label.class).node(),Math.ceil(r)),this.showValue&&(this.valueGroup.styles({x:c,y:u}),Uw(this.valueGroup.select(Ir.value.class).node(),Math.ceil(i)))},n.prototype.render=function(e,r){var i=_t(r);this.renderMarker(i),this.renderLabel(i),this.renderValue(i),this.renderBackground(i),this.adjustLayout()},n}(In),_s=Oi({page:"item-page",navigator:"navigator",item:"item"},"items"),RL=function(t,n,e){return e===void 0&&(e=!0),t?n(t):e},KTt=function(t){G(n,t);function n(e){var r=t.call(this,e,{data:[],gridRow:1/0,gridCol:void 0,padding:0,width:1e3,height:100,rowPadding:0,colPadding:0,layout:"flex",orientation:"horizontal",click:bx,mouseenter:bx,mouseleave:bx})||this;return r.navigatorShape=[0,0],r}return Object.defineProperty(n.prototype,"pageViews",{get:function(){return this.navigator.getContainer()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"grid",{get:function(){var e=this.attributes,r=e.gridRow,i=e.gridCol,a=e.data;if(!r&&!i)throw new Error("gridRow and gridCol can not be set null at the same time");return r&&i?[r,i]:r?[r,a.length]:[a.length,i]},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"renderData",{get:function(){var e=this.attributes,r=e.data,i=e.layout,a=Bt(this.attributes,"item"),o=r.map(function(s,l){var c=s.id,u=c===void 0?l:c,f=s.label,h=s.value;return{id:"".concat(u),index:l,style:E({layout:i,labelText:f,valueText:h},Object.fromEntries(Object.entries(a).map(function(d){var p=R(d,2),v=p[0],g=p[1];return[v,vi(g,[s,l,r])]})))}});return o},enumerable:!1,configurable:!0}),n.prototype.getGridLayout=function(){var e=this,r=this.attributes,i=r.orientation,a=r.width,o=r.rowPadding,s=r.colPadding,l=R(this.navigatorShape,1),c=l[0],u=R(this.grid,2),f=u[0],h=u[1],d=h*f,p=0;return this.pageViews.children.map(function(v,g){var y,m,x=Math.floor(g/d),b=g%d,w=e.ifHorizontal(h,f),S=[Math.floor(b/w),b%w];i==="vertical"&&S.reverse();var O=R(S,2),M=O[0],A=O[1],T=(a-c-(h-1)*s)/h,C=v.getBBox().height,P=R([0,0],2),_=P[0],k=P[1];return i==="horizontal"?(y=R([p,M*(C+o)],2),_=y[0],k=y[1],p=A===h-1?0:p+T+s):(m=R([A*(T+s),p],2),_=m[0],k=m[1],p=M===f-1?0:p+C+o),{page:x,index:g,row:M,col:A,pageIndex:b,width:T,height:C,x:_,y:k}})},n.prototype.getFlexLayout=function(){var e=this.attributes,r=e.width,i=e.height,a=e.rowPadding,o=e.colPadding,s=R(this.navigatorShape,1),l=s[0],c=R(this.grid,2),u=c[0],f=c[1],h=R([r-l,i],2),d=h[0],p=h[1],v=R([0,0,0,0,0,0,0,0],8),g=v[0],y=v[1],m=v[2],x=v[3],b=v[4],w=v[5],S=v[6],O=v[7];return this.pageViews.children.map(function(M,A){var T,C,P,_,k=M.getBBox(),I=k.width,L=k.height,F=S===0?0:o,B=S+F+I;if(B<=d&&RL(b,function(N){return N<f}))return T=R([S+F,O,B],3),g=T[0],y=T[1],S=T[2],{width:I,height:L,x:g,y,page:m,index:A,pageIndex:x++,row:w,col:b++};C=R([w+1,0,0,O+L+a],4),w=C[0],b=C[1],S=C[2],O=C[3];var D=O+L;return D<=p&&RL(w,function(N){return N<u})?(P=R([S,O,I],3),g=P[0],y=P[1],S=P[2],{width:I,height:L,x:g,y,page:m,index:A,pageIndex:x++,row:w,col:b++}):(_=R([0,0,I,0,m+1,0,0,0],8),g=_[0],y=_[1],S=_[2],O=_[3],m=_[4],x=_[5],w=_[6],b=_[7],{width:I,height:L,x:g,y,page:m,index:A,pageIndex:x++,row:w,col:b++})})},Object.defineProperty(n.prototype,"itemsLayout",{get:function(){this.navigatorShape=[0,0];var e=this.attributes.layout==="grid"?this.getGridLayout:this.getFlexLayout,r=e.call(this);return r.slice(-1)[0].page>0?(this.navigatorShape=[55,0],e.call(this)):r},enumerable:!1,configurable:!0}),n.prototype.ifHorizontal=function(e,r){var i=this.attributes.orientation;return aa(i,e,r)},n.prototype.flattenPage=function(e){e.querySelectorAll(_s.item.class).forEach(function(r){e.appendChild(r)}),e.querySelectorAll(_s.page.class).forEach(function(r){var i=e.removeChild(r);i.destroy()})},n.prototype.renderItems=function(e){var r=this.attributes,i=r.click,a=r.mouseenter,o=r.mouseleave;this.flattenPage(e);var s=this.dispatchCustomEvent.bind(this);_t(e).selectAll(_s.item.class).data(this.renderData,function(l){return l.id}).join(function(l){return l.append(function(c){var u=c.style;return new ZTt({style:u})}).attr("className",_s.item.name).on("click",function(){i==null||i(this),s("itemClick",{item:this})}).on("pointerenter",function(){a==null||a(this),s("itemMouseenter",{item:this})}).on("pointerleave",function(){o==null||o(this),s("itemMouseleave",{item:this})})},function(l){return l.each(function(c){var u=c.style;this.update(u)})},function(l){return l.remove()})},n.prototype.relayoutNavigator=function(){var e,r=this.attributes,i=r.layout,a=r.width,o=((e=this.pageViews.children[0])===null||e===void 0?void 0:e.getBBox().height)||0,s=R(this.navigatorShape,2),l=s[0],c=s[1];this.navigator.update(i==="grid"?{pageWidth:a-l,pageHeight:o-c}:{})},n.prototype.adjustLayout=function(){var e=this,r=Object.entries(aAt(this.itemsLayout,"page")).map(function(a){var o=R(a,2),s=o[0],l=o[1];return{page:s,layouts:l}}),i=X([],R(this.navigator.getContainer().children),!1);r.forEach(function(a){var o=a.layouts,s=e.pageViews.appendChild(new $n({className:_s.page.name}));o.forEach(function(l){var c=l.x,u=l.y,f=l.index,h=l.width,d=l.height,p=i[f];s.appendChild(p),JMt(p,"__layout__",l),p.update({x:c,y:u,width:h,height:d})})}),this.relayoutNavigator()},n.prototype.renderNavigator=function(e){var r=this.attributes.orientation,i=Bt(this.attributes,"nav"),a=no({orientation:r},i),o=this;return e.selectAll(_s.navigator.class).data(["nav"]).join(function(s){return s.append(function(){return new YTt({style:a})}).attr("className",_s.navigator.name).each(function(){o.navigator=this})},function(s){return s.each(function(){this.update(a)})},function(s){return s.remove()}),this.navigator},n.prototype.getBBox=function(){return this.navigator.getBBox()},n.prototype.render=function(e,r){var i=this.attributes.data;if(!(!i||i.length===0)){var a=this.renderNavigator(_t(r));this.renderItems(a.getContainer()),this.adjustLayout()}},n.prototype.dispatchCustomEvent=function(e,r){var i=new Se(e,{detail:r});this.dispatchEvent(i)},n}(In),df=Oi({markerGroup:"marker-group",marker:"marker",labelGroup:"label-group",label:"label"},"handle"),e9={showLabel:!0,formatter:function(t){return t.toString()},markerSize:25,markerStroke:"#c5c5c5",markerFill:"#fff",markerLineWidth:1,labelFontSize:12,labelFill:"#c5c5c5",labelText:"",orientation:"vertical",spacing:0},QTt=function(t){G(n,t);function n(e){return t.call(this,e,e9)||this}return n.prototype.render=function(e,r){var i=_t(r).maybeAppendByClassName(df.markerGroup,"g");this.renderMarker(i);var a=_t(r).maybeAppendByClassName(df.labelGroup,"g");this.renderLabel(a)},n.prototype.renderMarker=function(e){var r=this,i=this.attributes,a=i.orientation,o=i.markerSymbol,s=o===void 0?aa(a,"horizontalHandle","verticalHandle"):o;Or(!!s,e,function(l){var c=Bt(r.attributes,"marker"),u=E({symbol:s},c);r.marker=l.maybeAppendByClassName(df.marker,function(){return new xe({style:u})}).update(u)})},n.prototype.renderLabel=function(e){var r=this,i=this.attributes,a=i.showLabel,o=i.orientation,s=i.spacing,l=s===void 0?0:s,c=i.formatter;Or(a,e,function(u){var f,h=Bt(r.attributes,"label"),d=h.text,p=vt(h,["text"]),v=((f=u.select(df.marker.class))===null||f===void 0?void 0:f.node().getBBox())||{},g=v.width,y=g===void 0?0:g,m=v.height,x=m===void 0?0:m,b=R(aa(o,[0,x+l,"center","top"],[y+l,0,"start","middle"]),4),w=b[0],S=b[1],O=b[2],M=b[3];u.maybeAppendByClassName(df.label,"text").styles(E(E({},p),{x:w,y:S,text:c(d).toString(),textAlign:O,textBaseline:M}))})},n}(In),n9={showTitle:!0,padding:0,orientation:"horizontal",backgroundFill:"transparent",titleText:"",titleSpacing:4,titlePosition:"top-left",titleFill:"#2C3542",titleFontWeight:"bold",titleFontFamily:"sans-serif",titleFontSize:12},JTt=no({},n9,{}),tCt=no({},n9,Qi(e9,"handle"),{color:["#d0e3fa","#acc7f6","#8daaf2","#6d8eea","#4d73cd","#325bb1","#5a3e75","#8c3c79","#e23455","#e7655b"],indicatorBackgroundFill:"#262626",indicatorLabelFill:"white",indicatorLabelFontSize:12,indicatorVisibility:"hidden",labelAlign:"value",labelDirection:"positive",labelSpacing:5,showHandle:!0,showIndicator:!0,showLabel:!0,slidable:!0,titleText:"",type:"continuous"}),eCt=.01,On=Oi({title:"title",titleGroup:"title-group",items:"items",itemsGroup:"items-group",contentGroup:"content-group",ribbonGroup:"ribbon-group",ribbon:"ribbon",handlesGroup:"handles-group",handle:"handle",startHandle:"start-handle",endHandle:"end-handle",labelGroup:"label-group",label:"label",indicator:"indicator"},"legend"),nCt=function(t){G(n,t);function n(e){return t.call(this,e,JTt)||this}return n.prototype.renderTitle=function(e,r,i){var a=this.attributes,o=a.showTitle,s=a.titleText,l=Bt(this.attributes,"title"),c=R(ro(l),2),u=c[0],f=c[1];this.titleGroup=e.maybeAppendByClassName(On.titleGroup,"g").styles(f);var h=E(E({width:r,height:i},u),{text:o?s:""});this.title=this.titleGroup.maybeAppendByClassName(On.title,function(){return new Q8({style:h})}).update(h)},n.prototype.renderItems=function(e,r){var i=r.x,a=r.y,o=r.width,s=r.height,l=Bt(this.attributes,"title",!0),c=R(ro(l),2),u=c[0],f=c[1],h=E(E({},u),{width:o,height:s,x:0,y:0});this.itemsGroup=e.maybeAppendByClassName(On.itemsGroup,"g").styles(E({x:i,y:a},f));var d=this;this.itemsGroup.selectAll(On.items.class).data(["items"]).join(function(p){return p.append(function(){return new KTt({style:h})}).attr("className",On.items.name).each(function(){d.items=_t(this)})},function(p){return p.update(h)},function(p){return p.remove()})},n.prototype.adjustLayout=function(){var e=this.attributes.showTitle;if(e){var r=this.title.node().getAvailableSpace(),i=r.x,a=r.y;this.itemsGroup.node().setLocalPosition(i,a)}},Object.defineProperty(n.prototype,"availableSpace",{get:function(){var e=this.attributes,r=e.showTitle,i=e.width,a=e.height;return r?this.title.node().getAvailableSpace():new ze(0,0,i,a)},enumerable:!1,configurable:!0}),n.prototype.getBBox=function(){var e,r,i=(e=this.title)===null||e===void 0?void 0:e.node(),a=(r=this.items)===null||r===void 0?void 0:r.node();return!i||!a?t.prototype.getBBox.call(this):BTt(i,a)},n.prototype.render=function(e,r){var i=e.width,a=e.height,o=_t(r);this.renderTitle(o,i,a),this.renderItems(o,this.availableSpace),this.adjustLayout()},n}(In),rCt={backgroundFill:"#262626",backgroundLineCap:"round",backgroundLineWidth:1,backgroundStroke:"#333",backgroundZIndex:-1,formatter:function(t){return t.toString()},labelFill:"#fff",labelFontSize:12,labelTextBaseline:"middle",padding:[2,4],position:"right",radius:0,zIndex:999},Mx=Oi({background:"background",labelGroup:"label-group",label:"label"},"indicator"),iCt=function(t){G(n,t);function n(e){var r=t.call(this,e,rCt)||this;return r.point=[0,0],r.group=r.appendChild(new $n({})),r.isMutationObserved=!0,r}return n.prototype.renderBackground=function(){if(this.label){var e=this.attributes,r=e.position,i=e.padding,a=R(Rn(i),4),o=a[0],s=a[1],l=a[2],c=a[3],u=this.label.node().getLocalBounds(),f=u.min,h=u.max,d=new ze(f[0]-c,f[1]-o,h[0]+s-f[0]+c,h[1]+l-f[1]+o),p=this.getPath(r,d),v=Bt(this.attributes,"background");this.background=_t(this.group).maybeAppendByClassName(Mx.background,"path").styles(E(E({},v),{path:p})),this.group.appendChild(this.label.node())}},n.prototype.renderLabel=function(){var e=this.attributes,r=e.formatter,i=e.labelText,a=Bt(this.attributes,"label"),o=R(ro(a),2),s=o[0],l=o[1];s.text;var c=vt(s,["text"]);if(this.label=_t(this.group).maybeAppendByClassName(Mx.labelGroup,"g").styles(l),!!i){var u=this.label.maybeAppendByClassName(Mx.label,function(){return Ol(r(i))}).style("text",r(i).toString());u.selectAll("text").styles(c)}},n.prototype.adjustLayout=function(){var e=R(this.point,2),r=e[0],i=e[1];this.group.attr("x",-r).attr("y",-i)},n.prototype.getPath=function(e,r){var i=this.attributes.radius,a=r.x,o=r.y,s=r.width,l=r.height,c=[["M",a+i,o],["L",a+s-i,o],["A",i,i,0,0,1,a+s,o+i],["L",a+s,o+l-i],["A",i,i,0,0,1,a+s-i,o+l],["L",a+i,o+l],["A",i,i,0,0,1,a,o+l-i],["L",a,o+i],["A",i,i,0,0,1,a+i,o],["Z"]],u={top:4,right:6,bottom:0,left:2},f=u[e],h=this.createCorner([c[f].slice(-2),c[f+1].slice(-2)]);return c.splice.apply(c,X([f+1,1],R(h),!1)),c[0][0]="M",c},n.prototype.createCorner=function(e,r){r===void 0&&(r=10);var i=.8,a=OAt.apply(void 0,X([],R(e),!1)),o=R(e,2),s=R(o[0],2),l=s[0],c=s[1],u=R(o[1],2),f=u[0],h=u[1],d=R(a?[f-l,[l,f]]:[h-c,[c,h]],2),p=d[0],v=R(d[1],2),g=v[0],y=v[1],m=p/2,x=p/Math.abs(p),b=r*x,w=b/2,S=b*Math.sqrt(3)/2*i,O=R([g,g+m-w,g+m,g+m+w,y],5),M=O[0],A=O[1],T=O[2],C=O[3],P=O[4];return a?(this.point=[T,c-S],[["L",M,c],["L",A,c],["L",T,c-S],["L",C,c],["L",P,c]]):(this.point=[l+S,T],[["L",l,M],["L",l,A],["L",l+S,T],["L",l,C],["L",l,P]])},n.prototype.applyVisibility=function(){var e=this.attributes.visibility;e==="hidden"?gs(this):Xd(this)},n.prototype.bindEvents=function(){this.label.on(Dt.BOUNDS_CHANGED,this.renderBackground)},n.prototype.render=function(){this.renderLabel(),this.renderBackground(),this.adjustLayout(),this.applyVisibility()},n}(In);function aCt(t,n){for(var e=1;e<t.length;e+=1){var r=t[e-1],i=t[e];if(n>=r&&n<=i)return[r,i]}return[n,n]}function oCt(t,n,e){var r=Array.from(n),i=t.length;return new Array(i).fill(0).reduce(function(a,o,s){var l=r[s%r.length];return a+=" ".concat(t[s],":").concat(l).concat(s<i-1?" ".concat(t[s+1],":").concat(l):"")},"l(".concat(e==="horizontal"?"0":"270",")"))}function BL(t,n){var e=R(aCt(t,n),2),r=e[0],i=e[1];return{tick:n>(r+i)/2?i:r,range:[r,i]}}var td=Oi({trackGroup:"background-group",track:"background",selectionGroup:"ribbon-group",selection:"ribbon",clipPath:"clip-path"},"ribbon");function r9(t){var n=t.orientation,e=t.size,r=t.length;return aa(n,[r,e],[e,r])}function i9(t){var n=t.type,e=R(r9(t),2),r=e[0],i=e[1];return n==="size"?[["M",0,i],["L",0+r,0],["L",0+r,i],["Z"]]:[["M",0,i],["L",0,0],["L",0+r,0],["L",0+r,i],["Z"]]}function sCt(t){return i9(t)}function lCt(t){var n=t.orientation,e=t.color,r=t.block,i=t.partition,a;if(Si(e)){var o=20;a=new Array(o).fill(0).map(function(c,u,f){return e(u/(f.length-1))})}else a=e;var s=a.length,l=a.map(function(c){return Ha(c).toString()});return s?s===1?l[0]:r?oCt(i,l,n):l.reduce(function(c,u,f){return c+=" ".concat(f/(s-1),":").concat(u)},"l(".concat(aa(n,"0","270"),")")):""}function cCt(t){var n=t.orientation,e=t.range;if(!e)return[];var r=R(r9(t),2),i=r[0],a=r[1],o=R(e,2),s=o[0],l=o[1],c=aa(n,s*i,0),u=aa(n,0,s*a),f=aa(n,l*i,i),h=aa(n,a,l*a);return[["M",c,u],["L",c,h],["L",f,h],["L",f,u],["Z"]]}function uCt(t,n){var e=Bt(n,"track");t.maybeAppendByClassName(td.track,"path").styles(E({path:i9(n)},e))}function fCt(t,n){var e=Bt(n,"selection"),r=lCt(n),i=t.maybeAppendByClassName(td.selection,"path").styles(E({path:sCt(n),fill:r},e)),a=i.maybeAppendByClassName(td.clipPath,"path").styles({path:cCt(n)}).node();i.style("clip-path",a)}var hCt=function(t){G(n,t);function n(e){return t.call(this,e,{type:"color",orientation:"horizontal",size:30,range:[0,1],length:200,block:!1,partition:[],color:["#fff","#000"],trackFill:"#e5e5e5"})||this}return n.prototype.render=function(e,r){var i=_t(r).maybeAppendByClassName(td.trackGroup,"g");uCt(i,e);var a=_t(r).maybeAppendByClassName(td.selectionGroup,"g");fCt(a,e)},n}(In);function dCt(t){return{min:Math.min.apply(Math,X([],R(t.map(function(n){return n.value})),!1)),max:Math.max.apply(Math,X([],R(t.map(function(n){return n.value})),!1))}}var pCt=function(t){G(n,t);function n(e){var r=t.call(this,e,tCt)||this;return r.eventToOffsetScale=new Jf({}),r.innerRibbonScale=new Jf({}),r.cacheLabelBBox=null,r.cacheHandleBBox=null,r.onHovering=function(i){var a=r.attributes,o=a.data,s=a.block;i.stopPropagation();var l=r.getValueByCanvasPoint(i);if(s){var c=BL(o.map(function(f){var h=f.value;return h}),l).range;r.showIndicator((c[0]+c[1])/2,"".concat(c[0],"-").concat(c[1])),r.dispatchIndicated(l,c)}else{var u=r.getTickValue(l);r.showIndicator(u),r.dispatchIndicated(u)}},r.onDragStart=function(i){return function(a){a.stopPropagation(),r.attributes.slidable&&(r.target=i,r.prevValue=r.getTickValue(r.getValueByCanvasPoint(a)),document.addEventListener("mousemove",r.onDragging),document.addEventListener("touchmove",r.onDragging),document.addEventListener("mouseleave",r.onDragEnd),document.addEventListener("mouseup",r.onDragEnd),document.addEventListener("mouseup",r.onDragEnd),document.addEventListener("touchend",r.onDragEnd))}},r.onDragging=function(i){var a=r.target;r.updateMouse();var o=R(r.selection,2),s=o[0],l=o[1],c=r.getTickValue(r.getValueByCanvasPoint(i)),u=c-r.prevValue;a==="start"?s!==c&&r.updateSelection(c,l):a==="end"?l!==c&&r.updateSelection(s,c):a==="ribbon"&&u!==0&&(r.prevValue=c,r.updateSelection(u,u,!0))},r.onDragEnd=function(){r.style.cursor="pointer",document.removeEventListener("mousemove",r.onDragging),document.removeEventListener("touchmove",r.onDragging),document.removeEventListener("mouseup",r.onDragEnd),document.removeEventListener("touchend",r.onDragEnd)},r}return Object.defineProperty(n.prototype,"handleOffsetRatio",{get:function(){return this.ifHorizontal(.5,.5)},enumerable:!1,configurable:!0}),n.prototype.getBBox=function(){var e=this.attributes,r=e.width,i=e.height;return new ze(0,0,r,i)},n.prototype.render=function(e,r){var i=this,a=e.showLabel;this.renderTitle(_t(r));var o=this.availableSpace,s=o.x,l=o.y,c=_t(r).maybeAppendByClassName(On.contentGroup,"g").styles({x:s,y:l}),u=c.maybeAppendByClassName(On.labelGroup,"g").styles({zIndex:1});Or(!!a,u,function(h){i.renderLabel(h)});var f=c.maybeAppendByClassName(On.ribbonGroup,"g").styles({zIndex:0});this.handlesGroup=c.maybeAppendByClassName(On.handlesGroup,"g").styles({zIndex:2}),this.renderHandles(),this.renderRibbon(f),this.renderIndicator(c),this.adjustLabel(),this.adjustHandles()},Object.defineProperty(n.prototype,"range",{get:function(){var e=this.attributes,r=e.data,i=e.domain;return i?{min:i[0],max:i[1]}:dCt(r)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"ribbonScale",{get:function(){var e=this.range,r=e.min,i=e.max;return this.innerRibbonScale.update({domain:[r,i],range:[0,1]}),this.innerRibbonScale},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"ribbonRange",{get:function(){var e=R(this.selection,2),r=e[0],i=e[1],a=this.ribbonScale;return[a.map(r),a.map(i)]},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"selection",{get:function(){var e=this.range,r=e.min,i=e.max,a=this.attributes.defaultValue,o=a===void 0?[r,i]:a,s=R(o,2),l=s[0],c=s[1];return[l,c]},enumerable:!1,configurable:!0}),n.prototype.ifHorizontal=function(e,r){return aa(this.attributes.orientation,typeof e=="function"?e():e,typeof r=="function"?r():r)},n.prototype.renderTitle=function(e){var r=this.attributes,i=r.showTitle,a=r.titleText,o=r.width,s=r.height,l=Bt(this.attributes,"title"),c=E(E({},l),{width:o,height:s,text:a}),u=this;e.selectAll(On.title.class).data(i?[a]:[]).join(function(f){return f.append(function(){return new Q8({style:c})}).attr("className",On.title.name).each(function(){u.title=this})},function(f){return f.update(c)},function(f){return f.each(function(){u.title=void 0}).remove()})},Object.defineProperty(n.prototype,"availableSpace",{get:function(){if(this.title)return this.title.getAvailableSpace();var e=this.attributes,r=e.width,i=e.height;return new ze(0,0,r,i)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"labelFixedSpacing",{get:function(){var e=this.attributes.showTick;return e?5:0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"labelPosition",{get:function(){var e=this.attributes,r=e.orientation,i=e.labelDirection,a={vertical:{positive:"right",negative:"left"},horizontal:{positive:"bottom",negative:"top"}};return a[r][i]},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"labelBBox",{get:function(){var e,r=this.attributes.showLabel;if(!r)return new ze(0,0,0,0);if(this.cacheLabelBBox)return this.cacheLabelBBox;var i=((e=this.label.querySelector(ve.labelGroup.class))===null||e===void 0?void 0:e.children.slice(-1)[0]).getBBox(),a=i.width,o=i.height;return this.cacheLabelBBox=new ze(0,0,a,o),this.cacheLabelBBox},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"labelShape",{get:function(){var e=this.attributes,r=e.showLabel,i=e.labelSpacing,a=i===void 0?0:i;if(!r)return{width:0,height:0,size:0,length:0};var o=this.labelBBox,s=o.width,l=o.height,c=this.ifHorizontal(l,s)+a+this.labelFixedSpacing,u=this.ifHorizontal(s,l);return{width:s,height:l,size:c,length:u}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"ribbonBBox",{get:function(){var e=this.attributes,r=e.showHandle,i=e.ribbonSize,a=this.availableSpace,o=a.width,s=a.height,l=this.labelShape,c=l.size,u=l.length,f=R(this.ifHorizontal([s,o],[o,s]),2),h=f[0],d=f[1],p=r?this.handleShape:{size:0,length:0},v=p.size,g=p.length,y=this.handleOffsetRatio,m=0,x=this.labelPosition;i?m=i:["bottom","right"].includes(x)?m=Math.min(h-c,(h-v)/y):h*(1-y)>v?m=Math.max(h-c,0):m=Math.max((h-c-v)/y,0);var b=Math.max(g,u),w=d-b,S=R(this.ifHorizontal([w,m],[m,w]),2),O=S[0],M=S[1],A=["top","left"].includes(x)?c:0,T=R(this.ifHorizontal([b/2,A],[A,b/2]),2),C=T[0],P=T[1];return new ze(C,P,O,M)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"ribbonShape",{get:function(){var e=this.ribbonBBox,r=e.width,i=e.height;return this.ifHorizontal({size:i,length:r},{size:r,length:i})},enumerable:!1,configurable:!0}),n.prototype.renderRibbon=function(e){var r=this.attributes,i=r.data,a=r.type,o=r.orientation,s=r.color,l=r.block,c=Bt(this.attributes,"ribbon"),u=this.range,f=u.min,h=u.max,d=this.ribbonBBox,p=d.x,v=d.y,g=this.ribbonShape,y=g.length,m=g.size,x=no({x:p,y:v,length:y,size:m,type:a,orientation:o,color:s,block:l,partition:i.map(function(b){return(b.value-f)/(h-f)}),range:this.ribbonRange},c);this.ribbon=e.maybeAppendByClassName(On.ribbon,function(){return new hCt({style:x})}).update(x)},n.prototype.getHandleClassName=function(e){return"".concat(On.prefix("".concat(e,"-handle")))},n.prototype.renderHandles=function(){var e=this.attributes,r=e.showHandle,i=e.orientation,a=Bt(this.attributes,"handle"),o=R(this.selection,2),s=o[0],l=o[1],c=E(E({},a),{orientation:i}),u=a.shape,f=u===void 0?"slider":u,h=f==="basic"?QTt:j8,d=this;this.handlesGroup.selectAll(On.handle.class).data(r?[{value:s,type:"start"},{value:l,type:"end"}]:[],function(p){return p.type}).join(function(p){return p.append(function(){return new h({style:c})}).attr("className",function(v){var g=v.type;return"".concat(On.handle," ").concat(d.getHandleClassName(g))}).each(function(v){var g=v.type,y=v.value;this.update({labelText:y});var m="".concat(g,"Handle");d[m]=this,this.addEventListener("pointerdown",d.onDragStart(g))})},function(p){return p.update(c).each(function(v){var g=v.value;this.update({labelText:g})})},function(p){return p.each(function(v){var g=v.type,y="".concat(g,"Handle");d[y]=void 0}).remove()})},n.prototype.adjustHandles=function(){var e=R(this.selection,2),r=e[0],i=e[1];this.setHandlePosition("start",r),this.setHandlePosition("end",i)},n.prototype.adjustTitle=function(){var e=this.attributes,r=e.titlePosition,i=e.orientation,a=R(this.getElementsByClassName(On.title.name),1),o=a[0],s=this.handlesGroup.select(".".concat(this.getHandleClassName("start"))).node();if(!(!o||!s)&&!(r!=="top-left"||i!=="horizontal")){var l=R(s.getLocalBounds().min,1),c=l[0],u=R(o.getLocalBounds().min,1),f=u[0],h=c-f;o.style.x=+(this.style.x||0)+h}},Object.defineProperty(n.prototype,"handleBBox",{get:function(){if(this.cacheHandleBBox)return this.cacheHandleBBox;if(!this.attributes.showHandle)return new ze(0,0,0,0);var e=this.startHandle.getBBox(),r=e.width,i=e.height,a=this.endHandle.getBBox(),o=a.width,s=a.height,l=R([Math.max(r,o),Math.max(i,s)],2),c=l[0],u=l[1];return this.cacheHandleBBox=new ze(0,0,c,u),this.cacheHandleBBox},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"handleShape",{get:function(){var e=this.handleBBox,r=e.width,i=e.height,a=R(this.ifHorizontal([i,r],[r,i]),2),o=a[0],s=a[1];return{width:r,height:i,size:o,length:s}},enumerable:!1,configurable:!0}),n.prototype.setHandlePosition=function(e,r){var i=this.attributes.handleFormatter,a=this.ribbonBBox,o=a.x,s=a.y,l=this.ribbonShape.size,c=this.getOffset(r),u=R(this.ifHorizontal([o+c,s+l*this.handleOffsetRatio],[o+l*this.handleOffsetRatio,s+c]),2),f=u[0],h=u[1],d=this.handlesGroup.select(".".concat(this.getHandleClassName(e))).node();d==null||d.update({x:f,y:h,formatter:i})},n.prototype.renderIndicator=function(e){var r=Bt(this.attributes,"indicator");this.indicator=e.maybeAppendByClassName(On.indicator,function(){return new iCt({})}).update(r)},Object.defineProperty(n.prototype,"labelData",{get:function(){var e=this,r=this.attributes.data;return r.reduce(function(i,a,o,s){var l,c,u=(l=a==null?void 0:a.id)!==null&&l!==void 0?l:o.toString();if(i.push(E(E({},a),{id:u,index:o,type:"value",label:(c=a==null?void 0:a.label)!==null&&c!==void 0?c:a.value.toString(),value:e.ribbonScale.map(a.value)})),o<s.length-1){var f=s[o+1],h=R([a.value,f.value],2),d=h[0],p=h[1],v=(d+p)/2;i.push(E(E({},a),{id:u,index:o,type:"range",range:[d,p],label:[d,p].join("~"),value:e.ribbonScale.map(v)}))}return i},[])},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"labelStyle",{get:function(){var e=R(["center","middle"],2),r=e[0],i=e[1],a=this.labelPosition;return a==="top"?i="bottom":a==="bottom"?i="top":a==="left"?r="end":a==="right"&&(r="start"),{labelTextAlign:r,labelTextBaseline:i}},enumerable:!1,configurable:!0}),n.prototype.renderLabel=function(e){var r=this.attributes,i=r.showTick,a=i===void 0?!1:i,o=r.labelFilter,s=r.labelFormatter,l=Bt(this.attributes,"tick"),c=Bt(this.attributes,"label"),u=c.align,f=no(E({showLine:!1,showGrid:!1,showTick:a,type:"linear",startPos:[0,0],endPos:[0,0],tickDirection:"negative",labelTransform:"rotate(0)"},this.labelStyle),Qi(l,"tick"),Qi(c,"label"),{data:this.labelData}),h={tickFilter:function(p,v,g){return(p==null?void 0:p.type)!=="value"?!1:o?o(p,p.index,g.filter(function(y){return y.type!=="value"})):!0},labelFilter:function(p,v,g){return(p==null?void 0:p.type)!==u?!1:o?o(p,p.index,g.filter(function(y){return y.type===u})):!0},labelFormatter:s},d=E(E(E({},f),h),{labelOverlap:[{type:"hide"}]});this.label=e.maybeAppendByClassName(On.label,function(){return new wA({style:d})}).node(),this.label.update(d,!1)},Object.defineProperty(n.prototype,"labelAxisStyle",{get:function(){var e=this.attributes,r=e.showTick,i=e.labelDirection,a=e.labelSpacing,o=e.tickLength,s=this.ribbonShape.size,l=this.labelPosition,c=this.labelFixedSpacing,u=R([0,0,0],3),f=u[0];u[1];var h=u[2],d=o??s;return r?(h=d,i==="positive"?l==="right"?(f=d,h=d):l==="bottom"&&(f=h):i==="negative"&&(l==="top"||l==="left")&&(f=s)):i==="positive"&&(l==="right"||l==="bottom"&&(f=s+c)),{offset:f,spacing:a,tickLength:h}},enumerable:!1,configurable:!0}),n.prototype.adjustLabel=function(){var e=this.attributes.showLabel;if(e){var r=this.ribbonBBox,i=r.x,a=r.y,o=r.width,s=r.height,l=this.labelAxisStyle,c=l.offset,u=l.spacing,f=l.tickLength,h=R(this.ifHorizontal([[i,a+c],[i+o,a+c]],[[i+c,a+s],[i+c,a]]),2),d=h[0],p=h[1];this.label.update({startPos:d,endPos:p,tickLength:f,labelSpacing:u},!1)}},n.prototype.bindEvents=function(){this.style.cursor="pointer",this.ribbon.on("pointerdown",this.onDragStart("ribbon")),this.ribbon.on("pointermove",this.onHovering),this.addEventListener("pointerout",this.hideIndicator)},n.prototype.showIndicator=function(e,r){r===void 0&&(r="".concat(e));var i=this.attributes.showIndicator;if(!i||typeof e!="number"){this.hideIndicator();return}var a=this.range,o=a.min,s=a.max,l=this.ribbonBBox,c=l.x,u=l.y,f=Xa(e,o,s),h=this.getOffset(f),d=this.ifHorizontal([h+c,u],[c,h+u]);this.indicator.update({x:d[0],y:d[1],position:this.ifHorizontal("top","left"),labelText:r}),Xd(this.indicator.node())},n.prototype.hideIndicator=function(){gs(this.indicator.node())},n.prototype.updateMouse=function(){this.attributes.slidable&&(this.style.cursor="grabbing")},n.prototype.setSelection=function(e,r){this.updateSelection(e,r)},n.prototype.updateSelection=function(e,r,i){var a;i===void 0&&(i=!1);var o=R(this.selection,2),s=o[0],l=o[1],c=R([e,r],2),u=c[0],f=c[1];i&&(u+=s,f+=l);var h=this.range,d=h.min,p=h.max;a=R(UTt([d,p],[u,f],this.selection),2),u=a[0],f=a[1],this.update({defaultValue:[u,f]}),this.dispatchSelection()},Object.defineProperty(n.prototype,"step",{get:function(){var e=this.attributes.step,r=e===void 0?1:e,i=this.range,a=i.min,o=i.max;return HMt(r)?qw((o-a)*eCt,0):r},enumerable:!1,configurable:!0}),n.prototype.getTickValue=function(e){var r=this.attributes,i=r.data,a=r.block,o=this.range.min;return a?BL(i.map(function(s){var l=s.value;return l}),e).tick:WTt(e,this.step,o)},n.prototype.getValueByCanvasPoint=function(e,r){var i=this.range,a=i.min,o=i.max,s=R(this.ribbon.node().getPosition(),2),l=s[0],c=s[1],u=this.ifHorizontal(l,c),f=this.ifHorizontal.apply(this,X([],R(iy(e)),!1)),h=f-u,d=Xa(this.getOffset(h,!0),a,o);return d},n.prototype.getOffset=function(e,r){r===void 0&&(r=!1);var i=this.range,a=i.min,o=i.max,s=this.ribbonShape.length,l=this.eventToOffsetScale;return l.update({domain:[a,o],range:[0,s]}),r?l.invert(e):l.map(e)},n.prototype.dispatchSelection=function(){var e=new Se("valuechange",{detail:{value:this.selection}});this.dispatchEvent(e)},n.prototype.dispatchIndicated=function(e,r){var i=new Se("indicate",{detail:{value:e,range:r}});this.dispatchEvent(i)},n}(In);function n2(t){return t===void 0&&(t=""),{CONTAINER:"".concat(t,"tooltip"),TITLE:"".concat(t,"tooltip-title"),LIST:"".concat(t,"tooltip-list"),LIST_ITEM:"".concat(t,"tooltip-list-item"),NAME:"".concat(t,"tooltip-list-item-name"),MARKER:"".concat(t,"tooltip-list-item-marker"),NAME_LABEL:"".concat(t,"tooltip-list-item-name-label"),VALUE:"".concat(t,"tooltip-list-item-value"),CROSSHAIR_X:"".concat(t,"tooltip-crosshair-x"),CROSSHAIR_Y:"".concat(t,"tooltip-crosshair-y")}}var NL={overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"};function vCt(t){var n;t===void 0&&(t="");var e=n2(t);return n={},n[".".concat(e.CONTAINER)]={position:"absolute",visibility:"visible","z-index":8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)","background-color":"rgba(255, 255, 255, 0.96)","box-shadow":"0 6px 12px 0 rgba(0, 0, 0, 0.12)","border-radius":"4px",color:"rgba(0, 0, 0, 0.65)","font-size":"12px","line-height":"20px",padding:"12px","min-width":"120px","max-width":"360px","font-family":"Roboto-Regular"},n[".".concat(e.TITLE)]={color:"rgba(0, 0, 0, 0.45)"},n[".".concat(e.LIST)]={margin:"0px","list-style-type":"none",padding:"0px"},n[".".concat(e.LIST_ITEM)]={"list-style-type":"none",display:"flex","line-height":"2em","align-items":"center","justify-content":"space-between","white-space":"nowrap"},n[".".concat(e.MARKER)]={width:"8px",height:"8px","border-radius":"50%",display:"inline-block","margin-right":"4px"},n[".".concat(e.NAME)]={display:"flex","align-items":"center","max-width":"216px"},n[".".concat(e.NAME_LABEL)]=E({flex:1},NL),n[".".concat(e.VALUE)]=E({display:"inline-block",float:"right",flex:1,"text-align":"right","min-width":"28px","margin-left":"30px",color:"rgba(0, 0, 0, 0.85)"},NL),n[".".concat(e.CROSSHAIR_X)]={position:"absolute",width:"1px","background-color":"rgba(0, 0, 0, 0.25)"},n[".".concat(e.CROSSHAIR_Y)]={position:"absolute",height:"1px","background-color":"rgba(0, 0, 0, 0.25)"},n}var gCt=function(t){G(n,t);function n(e){var r=this,i,a,o=(a=(i=e.style)===null||i===void 0?void 0:i.template)===null||a===void 0?void 0:a.prefixCls,s=n2(o);return r=t.call(this,e,{data:[],x:0,y:0,visibility:"visible",title:"",position:"bottom-right",offset:[5,5],enterable:!1,container:{x:0,y:0},bounding:null,template:{prefixCls:"",container:'<div class="'.concat(s.CONTAINER,'"></div>'),title:'<div class="'.concat(s.TITLE,'"></div>'),item:'<li class="'.concat(s.LIST_ITEM,`" data-index={index}>
        <span class="`).concat(s.NAME,`">
          <span class="`).concat(s.MARKER,`" style="background:{color}"></span>
          <span class="`).concat(s.NAME_LABEL,`" title="{name}">{name}</span>
        </span>
        <span class="`).concat(s.VALUE,`" title="{value}">{value}</span>
      </li>`)},style:vCt(o)})||this,r.prevCustomContentKey=r.attributes.contentKey,r.initShape(),r.render(r.attributes,r),r}return Object.defineProperty(n.prototype,"HTMLTooltipElement",{get:function(){return this.element},enumerable:!1,configurable:!0}),n.prototype.getContainer=function(){return this.element},Object.defineProperty(n.prototype,"position",{set:function(e){var r=R(e,2),i=r[0],a=r[1];this.attributes.x=i,this.attributes.y=a,this.updatePosition()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"elementSize",{get:function(){var e=this.element.offsetWidth,r=this.element.offsetHeight;return{width:e,height:r}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"HTMLTooltipItemsElements",{get:function(){var e=this.attributes,r=e.data,i=e.template;return r.map(function(a,o){var s=a.name,l=s===void 0?"":s,c=a.color,u=c===void 0?"black":c,f=a.index,h=vt(a,["name","color","index"]),d=E({name:l,color:u,index:f??o},h);return iL(WMt(i.item,d))})},enumerable:!1,configurable:!0}),n.prototype.render=function(e,r){this.renderHTMLTooltipElement(),this.updatePosition()},n.prototype.destroy=function(){var e;(e=this.element)===null||e===void 0||e.remove(),t.prototype.destroy.call(this)},n.prototype.show=function(e,r){var i=this,a=e!==void 0&&r!==void 0;if(a){var o=this.element.style.transition;this.element.style.transition="none",this.position=[e??+this.attributes.x,r??+this.attributes.y],setTimeout(function(){i.element.style.transition=o},10)}this.element.style.visibility="visible"},n.prototype.hide=function(){this.element.style.visibility="hidden"},n.prototype.initShape=function(){var e=this.attributes.template;this.element=iL(e.container),this.id&&this.element.setAttribute("id",this.id)},n.prototype.renderCustomContent=function(){if(!(this.prevCustomContentKey!==void 0&&this.prevCustomContentKey===this.attributes.contentKey)){this.prevCustomContentKey=this.attributes.contentKey;var e=this.attributes.content;e&&(typeof e=="string"?this.element.innerHTML=e:this.element.replaceChildren(e))}},n.prototype.renderHTMLTooltipElement=function(){var e,r,i=this.attributes,a=i.template,o=i.title,s=i.enterable,l=i.style,c=i.content,u=n2(a.prefixCls),f=this.element;if(this.element.style.pointerEvents=s?"auto":"none",c)this.renderCustomContent();else{o?(f.innerHTML=a.title,f.getElementsByClassName(u.TITLE)[0].innerHTML=o):(r=(e=f.getElementsByClassName(u.TITLE))===null||e===void 0?void 0:e[0])===null||r===void 0||r.remove();var h=this.HTMLTooltipItemsElements,d=document.createElement("ul");d.className=u.LIST,d.replaceChildren.apply(d,X([],R(h),!1));var p=this.element.querySelector(".".concat(u.LIST));p?p.replaceWith(d):f.appendChild(d)}TAt(f,l)},n.prototype.getRelativeOffsetFromCursor=function(e){var r=this.attributes,i=r.position,a=r.offset,o=e||i,s=o.split("-"),l={left:[-1,0],right:[1,0],top:[0,-1],bottom:[0,1]},c=this.elementSize,u=c.width,f=c.height,h=[-u/2,-f/2];return s.forEach(function(d){var p=R(h,2),v=p[0],g=p[1],y=R(l[d],2),m=y[0],x=y[1];h=[v+(u/2+a[0])*m,g+(f/2+a[1])*x]}),h},n.prototype.setOffsetPosition=function(e){var r=R(e,2),i=r[0],a=r[1],o=this.attributes,s=o.x,l=s===void 0?0:s,c=o.y,u=c===void 0?0:c,f=o.container,h=f.x,d=f.y;this.element.style.left="".concat(+l+h+i,"px"),this.element.style.top="".concat(+u+d+a,"px")},n.prototype.updatePosition=function(){this.setOffsetPosition(this.autoPosition(this.getRelativeOffsetFromCursor()))},n.prototype.autoPosition=function(e){var r=R(e,2),i=r[0],a=r[1],o=this.attributes,s=o.x,l=o.y,c=o.bounding,u=o.position;if(!c)return[i,a];var f=this.element,h=f.offsetWidth,d=f.offsetHeight,p=R([+s+i,+l+a],2),v=p[0],g=p[1],y={left:"right",right:"left",top:"bottom",bottom:"top"},m=c.x,x=c.y,b=c.width,w=c.height,S={left:v<m,right:v+h>m+b,top:g<x,bottom:g+d>x+w},O=[];u.split("-").forEach(function(A){S[A]?O.push(y[A]):O.push(A)});var M=O.join("-");return this.getRelativeOffsetFromCursor(M)},n.tag="tooltip",SH([CAt(100,!0)],n.prototype,"updatePosition",null),n}(In),yCt=function(t){G(n,t);function n(e){var r=t.call(this,e)||this;r.layoutEvents=[Dt.BOUNDS_CHANGED,Dt.INSERTED,Dt.REMOVED],r.$margin=Rn(0),r.$padding=Rn(0);var i=e.style||{},a=i.margin,o=a===void 0?0:a,s=i.padding,l=s===void 0?0:s;return r.margin=o,r.padding=l,r.isMutationObserved=!0,r.bindEvents(),r}return Object.defineProperty(n.prototype,"margin",{get:function(){return this.$margin},set:function(e){this.$margin=Rn(e)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"padding",{get:function(){return this.$padding},set:function(e){this.$padding=Rn(e)},enumerable:!1,configurable:!0}),n.prototype.getBBox=function(){var e=this.attributes,r=e.x,i=r===void 0?0:r,a=e.y,o=a===void 0?0:a,s=e.width,l=e.height,c=R(this.$margin,4),u=c[0],f=c[1],h=c[2],d=c[3];return new ze(i-d,o-u,s+d+f,l+u+h)},n.prototype.appendChild=function(e,r){return e.isMutationObserved=!0,t.prototype.appendChild.call(this,e,r),e},n.prototype.getAvailableSpace=function(){var e=this.attributes,r=e.width,i=e.height,a=R(this.$padding,4),o=a[0],s=a[1],l=a[2],c=a[3],u=R(this.$margin,4),f=u[0],h=u[3];return new ze(c+h,o+f,r-c-s,i-o-l)},n.prototype.layout=function(){if(!(!this.attributes.display||!this.isConnected)&&!this.children.some(function(r){return!r.isConnected}))try{var e=hAt(this.getAvailableSpace(),this.children.map(function(r){return r.getBBox()}),this.attributes);this.children.forEach(function(r,i){var a=e[i],o=a.x,s=a.y;r.attr({x:o,y:s})})}catch{}},n.prototype.bindEvents=function(){var e=this;this.layoutEvents.forEach(function(r){e.addEventListener(r,function(i){i.target.isMutationObserved=!0,e.layout()})})},n.prototype.attributeChangedCallback=function(e,r,i){e==="margin"?this.margin=i:e==="padding"&&(this.padding=i),this.layout()},n}($n),Ax=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};function mCt(t){const{min:[n,e],max:[r,i]}=t.getLocalBounds();let a=0,o=0;return n>0&&(a=n),r<0&&(a=r),e>0&&(o=e),i<0&&(o=i),[a,o]}function xCt(t,n=[]){const[e=0,r=0,i=e,a=r]=n,o=t.parentNode,s=o.getEulerAngles();o.setEulerAngles(0);const{min:l,halfExtents:c}=t.getLocalBounds(),[u,f]=l,[h,d]=c;return o.setEulerAngles(s),{x:u-a,y:f-e,width:h*2+a+r,height:d*2+e+i}}const bCt=(t,n,e)=>{const r=Re(t,n),i=Re(n,e),a=Re(e,t);return(Math.pow(r,2)+Math.pow(i,2)-Math.pow(a,2))/(2*r*i)};function wCt(t,n,e,r){const[[i,a],[o,s]]=n,[l,c]=mCt(t);if(i===o&&a===s)return es()([[0,0],[l,c]]);const u=[[i-o,a-s]].concat(e.length?e:[[0,0]]),f=[r[0]-o,r[1]-s],[h,d]=u;if(bCt(f,h,d)>0){const p=(()=>{const{min:v,max:g}=t.getLocalBounds(),y=h[0]+(h[1]-f[1])*(h[1]-0)/(h[0]-f[0]);return g[0]<f[0]?Math.min(g[0],y):Math.max(v[0],y)})();u.splice(1,1,[p,0])}return es()(u)}const a9=cu(t=>{const n=t.attributes,{className:e,class:r,transform:i,rotate:a,labelTransform:o,labelTransformOrigin:s,x:l,y:c,x0:u=l,y0:f=c,text:h,background:d,connector:p,startMarker:v,endMarker:g,coordCenter:y,innerHTML:m}=n,x=Ax(n,["className","class","transform","rotate","labelTransform","labelTransformOrigin","x","y","x0","y0","text","background","connector","startMarker","endMarker","coordCenter","innerHTML"]);if([l,c,u,f].some(L=>!tu(L))){t.children.forEach(L=>L.remove());return}const b=ct(x,"background"),{padding:w}=b,S=Ax(b,["padding"]),O=ct(x,"connector"),{points:M=[]}=O,A=Ax(O,["points"]),T=[[+u,+f],[+l,+c]];let C;m?C=Ot(t).maybeAppend("html","html",e).style("zIndex",0).style("innerHTML",m).call(gt,Object.assign({transform:o,transformOrigin:s},x)).node():C=Ot(t).maybeAppend("text","text").style("zIndex",0).style("text",h).call(gt,Object.assign({textBaseline:"middle",transform:o,transformOrigin:s},x)).node();const P=Ot(t).maybeAppend("background","rect").style("zIndex",-1).call(gt,xCt(C,w)).call(gt,d?S:{}).node(),_=wCt(P,T,M,y),k=v&&new xe({id:"startMarker",style:Object.assign({x:0,y:0},ct(x,"startMarker"))}),I=g&&new xe({id:"endMarker",style:Object.assign({x:0,y:0},ct(x,"endMarker"))});Ot(t).maybeAppend("connector","path").style("zIndex",0).style("path",_).style("markerStart",k).style("markerEnd",I).call(gt,p?A:{})}),o9=(t,n)=>{const{coordinate:e}=n;return(r,i,a)=>{const{color:o,text:s="",fontSize:l,rotate:c=0,transform:u=""}=i,f={text:String(s),stroke:o,fill:o,fontSize:l},[[h,d]]=r;return Ot(new a9).style("x",h).style("y",d).call(gt,a).style("transform",`${u}rotate(${+c})`).style("coordCenter",e.getCenter()).call(gt,f).call(gt,t).node()}};o9.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var r2=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};function SCt(t){const n=t/Math.sqrt(2),e=t*Math.sqrt(2),[r,i]=[-n,n-e],[a,o]=[0,0],[s,l]=[n,n-e];return[["M",r,i],["A",t,t,0,1,1,s,l],["L",a,o],["Z"]]}function OCt(t){const{min:n,max:e}=t.getLocalBounds();return[(n[0]+e[0])*.5,(n[1]+e[1])*.5]}const MCt=cu(t=>{const n=t.attributes,e=r2(n,["class","x","y"]),r=ct(e,"marker"),{size:i=24}=r,a=()=>SCt(i/2),o=Ot(t).maybeAppend("marker",()=>new xe({})).call(c=>c.node().update(Object.assign({symbol:a},r))).node(),[s,l]=OCt(o);Ot(t).maybeAppend("text","text").style("x",s).style("y",l).call(gt,e)}),s9=(t,n)=>{const e=r2(t,[]);return(r,i,a)=>{const{color:o}=a,s=r2(a,["color"]),{color:l=o,text:c=""}=i,u={text:String(c),stroke:l,fill:l},[[f,h]]=r;return Ot(new MCt).call(gt,s).style("x",f).style("y",h).call(gt,u).call(gt,e).node()}};s9.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var ACt=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};function ECt(t,n){const e=[],r=[],i=[];let a=!1,o=null;const s=t.length/2;for(let l=0;l<s;l++){const c=t[l],u=t[l+s];if([...c,...u].some(f=>!n(f)))a=!0;else{if(e.push(c),r.push(u),a&&o){a=!1;const[f,h]=o;i.push([f,c,h,u])}o=[c,u]}}return[e.concat(r),i]}const $L=cu(t=>{const{areaPath:n,connectPath:e,areaStyle:r,connectStyle:i}=t.attributes,a=t.ownerDocument;Ot(t).maybeAppend("connect-path",()=>a.createElement("path",{})).style("d",e).call(gt,i),Ot(t).maybeAppend("area-path",()=>a.createElement("path",{})).style("d",n).call(gt,r)}),Yi=(t,n)=>{const{curve:e,gradient:r=!1,defined:i=c=>!Number.isNaN(c)&&c!==void 0&&c!==null,connect:a=!1}=t,o=ACt(t,["curve","gradient","defined","connect"]),{coordinate:s,document:l}=n;return(c,u,f)=>{const{color:h}=f,{color:d=h,seriesColor:p,seriesX:v,seriesY:g}=u,y=_e(s),m=x6(s,u),x=r&&p?y6(p,v,g,r,void 0,y):d,b=Object.assign(Object.assign(Object.assign(Object.assign({},f),{stroke:x,fill:x}),m&&{transform:m}),o),[w,S]=ECt(c,i),O=ct(b,"connect"),M=!!S.length,A=T=>Ot(l.createElement("path",{})).style("d",T||"").call(gt,b).node();if(Fe(s)){const T=C=>{const P=s.getCenter(),_=C.slice(0,C.length/2),k=C.slice(C.length/2);return wbt().angle((I,L)=>au(Ue(_[L],P))).outerRadius((I,L)=>Re(_[L],P)).innerRadius((I,L)=>Re(k[L],P)).defined((I,L)=>[..._[L],...k[L]].every(i)).curve(e)(k)};return!M||a&&!Object.keys(O).length?A(T(w)):M&&!a?A(T(c)):Ot(new $L).style("areaStyle",b).style("connectStyle",Object.assign(Object.assign({},O),o)).style("areaPath",T(c)).style("connectPath",S.map(T).join("")).node()}else{const T=C=>{const P=C.slice(0,C.length/2),_=C.slice(C.length/2);return y?Ew().y((k,I)=>P[I][1]).x1((k,I)=>P[I][0]).x0((k,I)=>_[I][0]).defined((k,I)=>[...P[I],..._[I]].every(i)).curve(e)(P):Ew().x((k,I)=>P[I][0]).y1((k,I)=>P[I][1]).y0((k,I)=>_[I][1]).defined((k,I)=>[...P[I],..._[I]].every(i)).curve(e)(P)};return!M||a&&!Object.keys(O).length?A(T(w)):M&&!a?A(T(c)):Ot(new $L).style("areaStyle",b).style("connectStyle",Object.assign(Object.assign({},O),o)).style("areaPath",T(c)).style("connectPath",S.map(T).join("")).node()}}};Yi.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const l9=(t,n)=>{const{coordinate:e}=n;return(...r)=>{const i=Fe(e)?RM:jd;return Yi(Object.assign({curve:i},t),n)(...r)}};l9.props=Object.assign(Object.assign({},Yi.props),{defaultMarker:"square"});var TCt=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};const c9=(t,n)=>{const e=TCt(t,[]),{coordinate:r}=n;return(...i)=>{const a=Fe(r)?fz:_e(r)?gz:vz;return Yi(Object.assign({curve:a},e),n)(...i)}};c9.props=Object.assign(Object.assign({},Yi.props),{defaultMarker:"smooth"});const u9=(t,n)=>(...e)=>Yi(Object.assign({curve:yz},t),n)(...e);u9.props=Object.assign(Object.assign({},Yi.props),{defaultMarker:"hvh"});const f9=(t,n)=>(...e)=>Yi(Object.assign({curve:mz},t),n)(...e);f9.props=Object.assign(Object.assign({},Yi.props),{defaultMarker:"vh"});const h9=(t,n)=>(...e)=>Yi(Object.assign({curve:xz},t),n)(...e);h9.props=Object.assign(Object.assign({},Yi.props),{defaultMarker:"hv"});const d9=(t,n)=>{const{arrow:e=!1}=t;return(...r)=>lA(Object.assign(Object.assign({},t),{arrow:e}),n)(...r)};d9.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var jL=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};const p9=(t,n)=>{const e=jL(t,[]),{document:r}=n;return(i,a,o)=>{const{color:s}=o,l=jL(o,["color"]),{color:c=s,transform:u}=a,[f,h]=i,d=bi();return d.moveTo(f[0],f[1]),d.bezierCurveTo(f[0]/2+h[0]/2,f[1],f[0]/2+h[0]/2,h[1],h[0],h[1]),Ot(r.createElement("path",{})).call(gt,l).style("d",d.toString()).style("stroke",c).style("transform",u).call(gt,e).node()}};p9.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var zL=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};function CCt(t,n,e,r){const i=bi();if(Fe(e)){const a=e.getCenter(),o=Re(t,a),l=(Re(n,a)-o)*r+o;return i.moveTo(t[0],t[1]),Kh(i,t,n,a,l),i.lineTo(n[0],n[1]),i}return _e(e)?(i.moveTo(t[0],t[1]),i.lineTo(t[0]+(n[0]-t[0])*r,t[1]),i.lineTo(t[0]+(n[0]-t[0])*r,n[1]),i.lineTo(n[0],n[1]),i):(i.moveTo(t[0],t[1]),i.lineTo(t[0],t[1]+(n[1]-t[1])*r),i.lineTo(n[0],t[1]+(n[1]-t[1])*r),i.lineTo(n[0],n[1]),i)}const v9=(t,n)=>{const{cornerRatio:e=1/3}=t,r=zL(t,["cornerRatio"]),{coordinate:i,document:a}=n;return(o,s,l)=>{const{defaultColor:c}=l,u=zL(l,["defaultColor"]),{color:f=c,transform:h}=s,[d,p]=o,v=CCt(d,p,i,e);return Ot(a.createElement("path",{})).call(gt,u).style("d",v.toString()).style("stroke",f).style("transform",h).call(gt,r).node()}};v9.props={defaultMarker:"vhv",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var GL=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};const g9=(t,n)=>{const e=GL(t,[]),{coordinate:r,document:i}=n;return(a,o,s)=>{const{color:l}=s,c=GL(s,["color"]),{color:u=l,transform:f}=o,[h,d]=a,p=bi();if(p.moveTo(h[0],h[1]),Fe(r)){const v=r.getCenter();p.quadraticCurveTo(v[0],v[1],d[0],d[1])}else{const v=Zj(h,d),g=Re(h,d)/2;Kh(p,h,d,v,g)}return Ot(i.createElement("path",{})).call(gt,c).style("d",p.toString()).style("stroke",u).style("transform",f).call(gt,e).node()}};g9.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};function PCt(t,n){return t.parent===n.parent?1:2}function kCt(t){return t.reduce(_Ct,0)/t.length}function _Ct(t,n){return t+n.x}function LCt(t){return 1+t.reduce(ICt,0)}function ICt(t,n){return Math.max(t,n.y)}function FCt(t){for(var n;n=t.children;)t=n[0];return t}function DCt(t){for(var n;n=t.children;)t=n[n.length-1];return t}function RCt(){var t=PCt,n=1,e=1,r=!1;function i(a){var o,s=0;a.eachAfter(function(h){var d=h.children;d?(h.x=kCt(d),h.y=LCt(d)):(h.x=o?s+=t(h,o):0,h.y=0,o=h)});var l=FCt(a),c=DCt(a),u=l.x-t(l,c)/2,f=c.x+t(c,l)/2;return a.eachAfter(r?function(h){h.x=(h.x-a.x)*n,h.y=(a.y-h.y)*e}:function(h){h.x=(h.x-u)/(f-u)*n,h.y=(1-(a.y?h.y/a.y:1))*e})}return i.separation=function(a){return arguments.length?(t=a,i):t},i.size=function(a){return arguments.length?(r=!1,n=+a[0],e=+a[1],i):r?null:[n,e]},i.nodeSize=function(a){return arguments.length?(r=!0,n=+a[0],e=+a[1],i):r?[n,e]:null},i}function BCt(t){var n=0,e=t.children,r=e&&e.length;if(!r)n=1;else for(;--r>=0;)n+=e[r].value;t.value=n}function NCt(){return this.eachAfter(BCt)}function $Ct(t,n){let e=-1;for(const r of this)t.call(n,r,++e,this);return this}function jCt(t,n){for(var e=this,r=[e],i,a,o=-1;e=r.pop();)if(t.call(n,e,++o,this),i=e.children)for(a=i.length-1;a>=0;--a)r.push(i[a]);return this}function zCt(t,n){for(var e=this,r=[e],i=[],a,o,s,l=-1;e=r.pop();)if(i.push(e),a=e.children)for(o=0,s=a.length;o<s;++o)r.push(a[o]);for(;e=i.pop();)t.call(n,e,++l,this);return this}function GCt(t,n){let e=-1;for(const r of this)if(t.call(n,r,++e,this))return r}function YCt(t){return this.eachAfter(function(n){for(var e=+t(n.data)||0,r=n.children,i=r&&r.length;--i>=0;)e+=r[i].value;n.value=e})}function WCt(t){return this.eachBefore(function(n){n.children&&n.children.sort(t)})}function VCt(t){for(var n=this,e=HCt(n,t),r=[n];n!==e;)n=n.parent,r.push(n);for(var i=r.length;t!==e;)r.splice(i,0,t),t=t.parent;return r}function HCt(t,n){if(t===n)return t;var e=t.ancestors(),r=n.ancestors(),i=null;for(t=e.pop(),n=r.pop();t===n;)i=t,t=e.pop(),n=r.pop();return i}function XCt(){for(var t=this,n=[t];t=t.parent;)n.push(t);return n}function UCt(){return Array.from(this)}function qCt(){var t=[];return this.eachBefore(function(n){n.children||t.push(n)}),t}function ZCt(){var t=this,n=[];return t.each(function(e){e!==t&&n.push({source:e.parent,target:e})}),n}function*KCt(){var t=this,n,e=[t],r,i,a;do for(n=e.reverse(),e=[];t=n.pop();)if(yield t,r=t.children)for(i=0,a=r.length;i<a;++i)e.push(r[i]);while(e.length)}function zu(t,n){t instanceof Map?(t=[void 0,t],n===void 0&&(n=tPt)):n===void 0&&(n=JCt);for(var e=new du(t),r,i=[e],a,o,s,l;r=i.pop();)if((o=n(r.data))&&(l=(o=Array.from(o)).length))for(r.children=o,s=l-1;s>=0;--s)i.push(a=o[s]=new du(o[s])),a.parent=r,a.depth=r.depth+1;return e.eachBefore(y9)}function QCt(){return zu(this).eachBefore(ePt)}function JCt(t){return t.children}function tPt(t){return Array.isArray(t)?t[1]:null}function ePt(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function y9(t){var n=0;do t.height=n;while((t=t.parent)&&t.height<++n)}function du(t){this.data=t,this.depth=this.height=0,this.parent=null}du.prototype=zu.prototype={constructor:du,count:NCt,each:$Ct,eachAfter:zCt,eachBefore:jCt,find:GCt,sum:YCt,sort:WCt,path:VCt,ancestors:XCt,descendants:UCt,leaves:qCt,links:ZCt,copy:QCt,[Symbol.iterator]:KCt};function Qv(t){return t==null?null:m9(t)}function m9(t){if(typeof t!="function")throw new Error;return t}function Ns(){return 0}function ac(t){return function(){return t}}const nPt=1664525,rPt=1013904223,YL=4294967296;function iPt(){let t=1;return()=>(t=(nPt*t+rPt)%YL)/YL}function aPt(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function oPt(t,n){let e=t.length,r,i;for(;e;)i=n()*e--|0,r=t[e],t[e]=t[i],t[i]=r;return t}function sPt(t,n){for(var e=0,r=(t=oPt(Array.from(t),n)).length,i=[],a,o;e<r;)a=t[e],o&&x9(o,a)?++e:(o=cPt(i=lPt(i,a)),e=0);return o}function lPt(t,n){var e,r;if(Ex(n,t))return[n];for(e=0;e<t.length;++e)if(vv(n,t[e])&&Ex(Pf(t[e],n),t))return[t[e],n];for(e=0;e<t.length-1;++e)for(r=e+1;r<t.length;++r)if(vv(Pf(t[e],t[r]),n)&&vv(Pf(t[e],n),t[r])&&vv(Pf(t[r],n),t[e])&&Ex(b9(t[e],t[r],n),t))return[t[e],t[r],n];throw new Error}function vv(t,n){var e=t.r-n.r,r=n.x-t.x,i=n.y-t.y;return e<0||e*e<r*r+i*i}function x9(t,n){var e=t.r-n.r+Math.max(t.r,n.r,1)*1e-9,r=n.x-t.x,i=n.y-t.y;return e>0&&e*e>r*r+i*i}function Ex(t,n){for(var e=0;e<n.length;++e)if(!x9(t,n[e]))return!1;return!0}function cPt(t){switch(t.length){case 1:return uPt(t[0]);case 2:return Pf(t[0],t[1]);case 3:return b9(t[0],t[1],t[2])}}function uPt(t){return{x:t.x,y:t.y,r:t.r}}function Pf(t,n){var e=t.x,r=t.y,i=t.r,a=n.x,o=n.y,s=n.r,l=a-e,c=o-r,u=s-i,f=Math.sqrt(l*l+c*c);return{x:(e+a+l/f*u)/2,y:(r+o+c/f*u)/2,r:(f+i+s)/2}}function b9(t,n,e){var r=t.x,i=t.y,a=t.r,o=n.x,s=n.y,l=n.r,c=e.x,u=e.y,f=e.r,h=r-o,d=r-c,p=i-s,v=i-u,g=l-a,y=f-a,m=r*r+i*i-a*a,x=m-o*o-s*s+l*l,b=m-c*c-u*u+f*f,w=d*p-h*v,S=(p*b-v*x)/(w*2)-r,O=(v*g-p*y)/w,M=(d*x-h*b)/(w*2)-i,A=(h*y-d*g)/w,T=O*O+A*A-1,C=2*(a+S*O+M*A),P=S*S+M*M-a*a,_=-(Math.abs(T)>1e-6?(C+Math.sqrt(C*C-4*T*P))/(2*T):P/C);return{x:r+S+O*_,y:i+M+A*_,r:_}}function WL(t,n,e){var r=t.x-n.x,i,a,o=t.y-n.y,s,l,c=r*r+o*o;c?(a=n.r+e.r,a*=a,l=t.r+e.r,l*=l,a>l?(i=(c+l-a)/(2*c),s=Math.sqrt(Math.max(0,l/c-i*i)),e.x=t.x-i*r-s*o,e.y=t.y-i*o+s*r):(i=(c+a-l)/(2*c),s=Math.sqrt(Math.max(0,a/c-i*i)),e.x=n.x+i*r-s*o,e.y=n.y+i*o+s*r)):(e.x=n.x+e.r,e.y=n.y)}function VL(t,n){var e=t.r+n.r-1e-6,r=n.x-t.x,i=n.y-t.y;return e>0&&e*e>r*r+i*i}function HL(t){var n=t._,e=t.next._,r=n.r+e.r,i=(n.x*e.r+e.x*n.r)/r,a=(n.y*e.r+e.y*n.r)/r;return i*i+a*a}function gv(t){this._=t,this.next=null,this.previous=null}function fPt(t,n){if(!(a=(t=aPt(t)).length))return 0;var e,r,i,a,o,s,l,c,u,f,h;if(e=t[0],e.x=0,e.y=0,!(a>1))return e.r;if(r=t[1],e.x=-r.r,r.x=e.r,r.y=0,!(a>2))return e.r+r.r;WL(r,e,i=t[2]),e=new gv(e),r=new gv(r),i=new gv(i),e.next=i.previous=r,r.next=e.previous=i,i.next=r.previous=e;t:for(l=3;l<a;++l){WL(e._,r._,i=t[l]),i=new gv(i),c=r.next,u=e.previous,f=r._.r,h=e._.r;do if(f<=h){if(VL(c._,i._)){r=c,e.next=r,r.previous=e,--l;continue t}f+=c._.r,c=c.next}else{if(VL(u._,i._)){e=u,e.next=r,r.previous=e,--l;continue t}h+=u._.r,u=u.previous}while(c!==u.next);for(i.previous=e,i.next=r,e.next=r.previous=r=i,o=HL(e);(i=i.next)!==r;)(s=HL(i))<o&&(e=i,o=s);r=e.next}for(e=[r._],i=r;(i=i.next)!==r;)e.push(i._);for(i=sPt(e,n),l=0;l<a;++l)e=t[l],e.x-=i.x,e.y-=i.y;return i.r}function hPt(t){return Math.sqrt(t.value)}function dPt(){var t=null,n=1,e=1,r=Ns;function i(a){const o=iPt();return a.x=n/2,a.y=e/2,t?a.eachBefore(XL(t)).eachAfter(Tx(r,.5,o)).eachBefore(UL(1)):a.eachBefore(XL(hPt)).eachAfter(Tx(Ns,1,o)).eachAfter(Tx(r,a.r/Math.min(n,e),o)).eachBefore(UL(Math.min(n,e)/(2*a.r))),a}return i.radius=function(a){return arguments.length?(t=Qv(a),i):t},i.size=function(a){return arguments.length?(n=+a[0],e=+a[1],i):[n,e]},i.padding=function(a){return arguments.length?(r=typeof a=="function"?a:ac(+a),i):r},i}function XL(t){return function(n){n.children||(n.r=Math.max(0,+t(n)||0))}}function Tx(t,n,e){return function(r){if(i=r.children){var i,a,o=i.length,s=t(r)*n||0,l;if(s)for(a=0;a<o;++a)i[a].r+=s;if(l=fPt(i,e),s)for(a=0;a<o;++a)i[a].r-=s;r.r=l+s}}}function UL(t){return function(n){var e=n.parent;n.r*=t,e&&(n.x=e.x+t*n.x,n.y=e.y+t*n.y)}}function w9(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function qd(t,n,e,r,i){for(var a=t.children,o,s=-1,l=a.length,c=t.value&&(r-n)/t.value;++s<l;)o=a[s],o.y0=e,o.y1=i,o.x0=n,o.x1=n+=o.value*c}function pPt(){var t=1,n=1,e=0,r=!1;function i(o){var s=o.height+1;return o.x0=o.y0=e,o.x1=t,o.y1=n/s,o.eachBefore(a(n,s)),r&&o.eachBefore(w9),o}function a(o,s){return function(l){l.children&&qd(l,l.x0,o*(l.depth+1)/s,l.x1,o*(l.depth+2)/s);var c=l.x0,u=l.y0,f=l.x1-e,h=l.y1-e;f<c&&(c=f=(c+f)/2),h<u&&(u=h=(u+h)/2),l.x0=c,l.y0=u,l.x1=f,l.y1=h}}return i.round=function(o){return arguments.length?(r=!!o,i):r},i.size=function(o){return arguments.length?(t=+o[0],n=+o[1],i):[t,n]},i.padding=function(o){return arguments.length?(e=+o,i):e},i}var vPt={depth:-1},qL={},Cx={};function gPt(t){return t.id}function yPt(t){return t.parentId}function i2(){var t=gPt,n=yPt,e;function r(i){var a=Array.from(i),o=t,s=n,l,c,u,f,h,d,p,v,g=new Map;if(e!=null){const y=a.map((b,w)=>mPt(e(b,w,i))),m=y.map(ZL),x=new Set(y).add("");for(const b of m)x.has(b)||(x.add(b),y.push(b),m.push(ZL(b)),a.push(Cx));o=(b,w)=>y[w],s=(b,w)=>m[w]}for(u=0,l=a.length;u<l;++u)c=a[u],d=a[u]=new du(c),(p=o(c,u,i))!=null&&(p+="")&&(v=d.id=p,g.set(v,g.has(v)?qL:d)),(p=s(c,u,i))!=null&&(p+="")&&(d.parent=p);for(u=0;u<l;++u)if(d=a[u],p=d.parent){if(h=g.get(p),!h)throw new Error("missing: "+p);if(h===qL)throw new Error("ambiguous: "+p);h.children?h.children.push(d):h.children=[d],d.parent=h}else{if(f)throw new Error("multiple roots");f=d}if(!f)throw new Error("no root");if(e!=null){for(;f.data===Cx&&f.children.length===1;)f=f.children[0],--l;for(let y=a.length-1;y>=0&&(d=a[y],d.data===Cx);--y)d.data=null}if(f.parent=vPt,f.eachBefore(function(y){y.depth=y.parent.depth+1,--l}).eachBefore(y9),f.parent=null,l>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(t=Qv(i),r):t},r.parentId=function(i){return arguments.length?(n=Qv(i),r):n},r.path=function(i){return arguments.length?(e=Qv(i),r):e},r}function mPt(t){t=`${t}`;let n=t.length;return a2(t,n-1)&&!a2(t,n-2)&&(t=t.slice(0,-1)),t[0]==="/"?t:`/${t}`}function ZL(t){let n=t.length;if(n<2)return"";for(;--n>1&&!a2(t,n););return t.slice(0,n)}function a2(t,n){if(t[n]==="/"){let e=0;for(;n>0&&t[--n]==="\\";)++e;if(!(e&1))return!0}return!1}function xPt(t,n){return t.parent===n.parent?1:2}function Px(t){var n=t.children;return n?n[0]:t.t}function kx(t){var n=t.children;return n?n[n.length-1]:t.t}function bPt(t,n,e){var r=e/(n.i-t.i);n.c-=r,n.s+=e,t.c+=r,n.z+=e,n.m+=e}function wPt(t){for(var n=0,e=0,r=t.children,i=r.length,a;--i>=0;)a=r[i],a.z+=n,a.m+=n,n+=a.s+(e+=a.c)}function SPt(t,n,e){return t.a.parent===n.parent?t.a:e}function Jv(t,n){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=n}Jv.prototype=Object.create(du.prototype);function OPt(t){for(var n=new Jv(t,0),e,r=[n],i,a,o,s;e=r.pop();)if(a=e._.children)for(e.children=new Array(s=a.length),o=s-1;o>=0;--o)r.push(i=e.children[o]=new Jv(a[o],o)),i.parent=e;return(n.parent=new Jv(null,0)).children=[n],n}function MPt(){var t=xPt,n=1,e=1,r=null;function i(c){var u=OPt(c);if(u.eachAfter(a),u.parent.m=-u.z,u.eachBefore(o),r)c.eachBefore(l);else{var f=c,h=c,d=c;c.eachBefore(function(m){m.x<f.x&&(f=m),m.x>h.x&&(h=m),m.depth>d.depth&&(d=m)});var p=f===h?1:t(f,h)/2,v=p-f.x,g=n/(h.x+p+v),y=e/(d.depth||1);c.eachBefore(function(m){m.x=(m.x+v)*g,m.y=m.depth*y})}return c}function a(c){var u=c.children,f=c.parent.children,h=c.i?f[c.i-1]:null;if(u){wPt(c);var d=(u[0].z+u[u.length-1].z)/2;h?(c.z=h.z+t(c._,h._),c.m=c.z-d):c.z=d}else h&&(c.z=h.z+t(c._,h._));c.parent.A=s(c,h,c.parent.A||f[0])}function o(c){c._.x=c.z+c.parent.m,c.m+=c.parent.m}function s(c,u,f){if(u){for(var h=c,d=c,p=u,v=h.parent.children[0],g=h.m,y=d.m,m=p.m,x=v.m,b;p=kx(p),h=Px(h),p&&h;)v=Px(v),d=kx(d),d.a=c,b=p.z+m-h.z-g+t(p._,h._),b>0&&(bPt(SPt(p,c,f),c,b),g+=b,y+=b),m+=p.m,g+=h.m,x+=v.m,y+=d.m;p&&!kx(d)&&(d.t=p,d.m+=m-y),h&&!Px(v)&&(v.t=h,v.m+=g-x,f=c)}return f}function l(c){c.x*=n,c.y=c.depth*e}return i.separation=function(c){return arguments.length?(t=c,i):t},i.size=function(c){return arguments.length?(r=!1,n=+c[0],e=+c[1],i):r?null:[n,e]},i.nodeSize=function(c){return arguments.length?(r=!0,n=+c[0],e=+c[1],i):r?[n,e]:null},i}function $m(t,n,e,r,i){for(var a=t.children,o,s=-1,l=a.length,c=t.value&&(i-e)/t.value;++s<l;)o=a[s],o.x0=n,o.x1=r,o.y0=e,o.y1=e+=o.value*c}var S9=(1+Math.sqrt(5))/2;function O9(t,n,e,r,i,a){for(var o=[],s=n.children,l,c,u=0,f=0,h=s.length,d,p,v=n.value,g,y,m,x,b,w,S;u<h;){d=i-e,p=a-r;do g=s[f++].value;while(!g&&f<h);for(y=m=g,w=Math.max(p/d,d/p)/(v*t),S=g*g*w,b=Math.max(m/S,S/y);f<h;++f){if(g+=c=s[f].value,c<y&&(y=c),c>m&&(m=c),S=g*g*w,x=Math.max(m/S,S/y),x>b){g-=c;break}b=x}o.push(l={value:g,dice:d<p,children:s.slice(u,f)}),l.dice?qd(l,e,r,i,v?r+=p*g/v:a):$m(l,e,r,v?e+=d*g/v:i,a),v-=g,u=f}return o}const M9=function t(n){function e(r,i,a,o,s){O9(n,r,i,a,o,s)}return e.ratio=function(r){return t((r=+r)>1?r:1)},e}(S9);function APt(){var t=M9,n=!1,e=1,r=1,i=[0],a=Ns,o=Ns,s=Ns,l=Ns,c=Ns;function u(h){return h.x0=h.y0=0,h.x1=e,h.y1=r,h.eachBefore(f),i=[0],n&&h.eachBefore(w9),h}function f(h){var d=i[h.depth],p=h.x0+d,v=h.y0+d,g=h.x1-d,y=h.y1-d;g<p&&(p=g=(p+g)/2),y<v&&(v=y=(v+y)/2),h.x0=p,h.y0=v,h.x1=g,h.y1=y,h.children&&(d=i[h.depth+1]=a(h)/2,p+=c(h)-d,v+=o(h)-d,g-=s(h)-d,y-=l(h)-d,g<p&&(p=g=(p+g)/2),y<v&&(v=y=(v+y)/2),t(h,p,v,g,y))}return u.round=function(h){return arguments.length?(n=!!h,u):n},u.size=function(h){return arguments.length?(e=+h[0],r=+h[1],u):[e,r]},u.tile=function(h){return arguments.length?(t=m9(h),u):t},u.padding=function(h){return arguments.length?u.paddingInner(h).paddingOuter(h):u.paddingInner()},u.paddingInner=function(h){return arguments.length?(a=typeof h=="function"?h:ac(+h),u):a},u.paddingOuter=function(h){return arguments.length?u.paddingTop(h).paddingRight(h).paddingBottom(h).paddingLeft(h):u.paddingTop()},u.paddingTop=function(h){return arguments.length?(o=typeof h=="function"?h:ac(+h),u):o},u.paddingRight=function(h){return arguments.length?(s=typeof h=="function"?h:ac(+h),u):s},u.paddingBottom=function(h){return arguments.length?(l=typeof h=="function"?h:ac(+h),u):l},u.paddingLeft=function(h){return arguments.length?(c=typeof h=="function"?h:ac(+h),u):c},u}function EPt(t,n,e,r,i){var a=t.children,o,s=a.length,l,c=new Array(s+1);for(c[0]=l=o=0;o<s;++o)c[o+1]=l+=a[o].value;u(0,s,t.value,n,e,r,i);function u(f,h,d,p,v,g,y){if(f>=h-1){var m=a[f];m.x0=p,m.y0=v,m.x1=g,m.y1=y;return}for(var x=c[f],b=d/2+x,w=f+1,S=h-1;w<S;){var O=w+S>>>1;c[O]<b?w=O+1:S=O}b-c[w-1]<c[w]-b&&f+1<w&&--w;var M=c[w]-x,A=d-M;if(g-p>y-v){var T=d?(p*A+g*M)/d:g;u(f,w,M,p,v,T,y),u(w,h,A,T,v,g,y)}else{var C=d?(v*A+y*M)/d:y;u(f,w,M,p,v,g,C),u(w,h,A,p,C,g,y)}}}function TPt(t,n,e,r,i){(t.depth&1?$m:qd)(t,n,e,r,i)}const CPt=function t(n){function e(r,i,a,o,s){if((l=r._squarify)&&l.ratio===n)for(var l,c,u,f,h=-1,d,p=l.length,v=r.value;++h<p;){for(c=l[h],u=c.children,f=c.value=0,d=u.length;f<d;++f)c.value+=u[f].value;c.dice?qd(c,i,a,o,v?a+=(s-a)*c.value/v:s):$m(c,i,a,v?i+=(o-i)*c.value/v:o,s),v-=c.value}else r._squarify=l=O9(n,r,i,a,o,s),l.ratio=n}return e.ratio=function(r){return t((r=+r)>1?r:1)},e}(S9);function A9(t={}){const{shapes:n}=t;return[{name:"color"},{name:"opacity"},{name:"shape",range:n},{name:"enterType"},{name:"enterDelay",scaleKey:"enter"},{name:"enterDuration",scaleKey:"enter"},{name:"enterEasing"},{name:"key",scale:"identity"},{name:"groupKey",scale:"identity"},{name:"label",scale:"identity"}]}function cr(t={}){return[...A9(t),{name:"title",scale:"identity"}]}function ys(){return[{type:om,channel:"color"},{type:lm,channel:["x","y"]}]}function Gu(){return[{type:om,channel:"x"},{type:lm,channel:["y"]}]}function PPt(){return[{type:om,channel:"color"},{type:lm,channel:["position"]}]}function Yu(t={}){return A9(t)}function rn(){return[{type:V4}]}function cn(){return[]}function _x(t,n){return t.getBandWidth(t.invert(n))}function zl(t,n,e={}){const{x:r,y:i,series:a}=n,{x:o,y:s,series:l}=t,{style:{bandOffset:c=l?0:.5,bandOffsetX:u=c,bandOffsetY:f=c}={}}=e,h=!!(o!=null&&o.getBandWidth),d=!!(s!=null&&s.getBandWidth),p=!!(l!=null&&l.getBandWidth);return!h&&!d?v=>v:(v,g)=>{const y=h?_x(o,r[g]):0,m=d?_x(s,i[g]):0,b=p&&a?(()=>(_x(l,a[g])/2+ +a[g])*y)():0,[w,S]=v;return[w+u*y+b,S+f*m]}}function cy(t){return parseFloat(t)/100}function SA(t,n,e,r){const{x:i,y:a}=e,{innerWidth:o,innerHeight:s}=r.getOptions(),l=Array.from(t,c=>{const u=i[c],f=a[c],h=typeof u=="string"?cy(u)*o:+u,d=typeof f=="string"?cy(f)*s:+f;return[[h,d]]});return[t,l]}function ha(t){return typeof t=="function"?t:n=>n[t]}function Lx(t,n){return Array.from(t,ha(n))}function OA(t,n){const{source:e=u=>u.source,target:r=u=>u.target,value:i=u=>u.value}=n,{links:a,nodes:o}=t,s=Lx(a,e),l=Lx(a,r),c=Lx(a,i);return{links:a.map((u,f)=>({target:l[f],source:s[f],value:c[f]})),nodes:o||Array.from(new Set([...s,...l]),u=>({key:u}))}}function kPt(t,n){return Array.isArray(t)?typeof n=="function"?i2().path(n)(t):i2()(t):zu(t)}var _Pt=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};const E9=(t,n)=>{const{coordinate:e,document:r}=n;return(i,a,o)=>{const{color:s}=o,l=_Pt(o,["color"]),{color:c=s,src:u="",size:f=32,transform:h=""}=a;let{width:d=f,height:p=f}=t;const[[v,g]]=i,[y,m]=e.getSize();d=typeof d=="string"?cy(d)*y:d,p=typeof p=="string"?cy(p)*m:p;const x=v-Number(d)/2,b=g-Number(p)/2;return Ot(r.createElement("image",{})).call(gt,l).style("x",x).style("y",b).style("img",u).style("stroke",c).style("transform",h).call(gt,t).style("width",d).style("height",p).node()}};E9.props={defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var LPt=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};function IPt(t,n){const e=bi();if(Fe(n)){const r=n.getCenter(),i=[...t,t[0]],a=i.map(o=>Re(o,r));return i.forEach((o,s)=>{if(s===0){e.moveTo(o[0],o[1]);return}const l=a[s],c=t[s-1],u=a[s-1];u!==void 0&&Math.abs(l-u)<1e-10?Kh(e,c,o,r,l):e.lineTo(o[0],o[1])}),e.closePath(),e}return wMt(e,t)}const T9=(t,n)=>{const{coordinate:e,document:r}=n;return(i,a,o)=>{const{color:s}=o,l=LPt(o,["color"]),{color:c=s,transform:u}=a,f=IPt(i,e);return Ot(r.createElement("path",{})).call(gt,l).style("d",f.toString()).style("stroke",c).style("fill",c).style("transform",u).call(gt,t).node()}};T9.props={defaultMarker:"square",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var KL=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};function FPt(t,n){const[e,r,i,a]=t,o=bi();if(Fe(n)){const s=n.getCenter(),l=Re(s,e);return o.moveTo(e[0],e[1]),o.quadraticCurveTo(s[0],s[1],i[0],i[1]),Kh(o,i,a,s,l),o.quadraticCurveTo(s[0],s[1],r[0],r[1]),Kh(o,r,e,s,l),o.closePath(),o}return o.moveTo(e[0],e[1]),o.bezierCurveTo(e[0]/2+i[0]/2,e[1],e[0]/2+i[0]/2,i[1],i[0],i[1]),o.lineTo(a[0],a[1]),o.bezierCurveTo(a[0]/2+r[0]/2,a[1],a[0]/2+r[0]/2,r[1],r[0],r[1]),o.lineTo(e[0],e[1]),o.closePath(),o}const C9=(t,n)=>{const e=KL(t,[]),{coordinate:r,document:i}=n;return(a,o,s)=>{const{color:l}=s,c=KL(s,["color"]),{color:u=l,transform:f}=o,h=FPt(a,r);return Ot(i.createElement("path",{})).call(gt,c).style("d",h.toString()).style("fill",u||l).style("stroke",u||l).style("transform",f).call(gt,e).node()}};C9.props={defaultMarker:"square",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var DPt=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};function RPt(t,n){const e=bi();if(!Fe(n))e.moveTo(...t[0]),e.lineTo(...t[1]),e.moveTo(...t[2]),e.lineTo(...t[3]),e.moveTo(...t[4]),e.lineTo(...t[5]),e.lineTo(...t[6]),e.lineTo(...t[7]),e.closePath(),e.moveTo(...t[8]),e.lineTo(...t[9]),e.moveTo(...t[10]),e.lineTo(...t[11]),e.moveTo(...t[12]),e.lineTo(...t[13]);else{const r=n.getCenter(),[i,a]=r,o=pi(Ue(t[0],r)),s=pi(Ue(t[1],r)),l=Re(r,t[2]),c=Re(r,t[3]),u=Re(r,t[8]),f=Re(r,t[10]),h=Re(r,t[11]);e.moveTo(...t[0]),e.arc(i,a,l,o,s),e.arc(i,a,l,s,o,!0),e.moveTo(...t[2]),e.lineTo(...t[3]),e.moveTo(...t[4]),e.arc(i,a,c,o,s),e.lineTo(...t[6]),e.arc(i,a,f,s,o,!0),e.closePath(),e.moveTo(...t[8]),e.arc(i,a,u,o,s),e.arc(i,a,u,s,o,!0),e.moveTo(...t[10]),e.lineTo(...t[11]),e.moveTo(...t[12]),e.arc(i,a,h,o,s),e.arc(i,a,h,s,o,!0)}return e}const P9=(t,n)=>{const{coordinate:e,document:r}=n;return(i,a,o)=>{const{color:s,transform:l}=a,{color:c,fill:u=c,stroke:f=c}=o,h=DPt(o,["color","fill","stroke"]),d=RPt(i,e);return Ot(r.createElement("path",{})).call(gt,h).style("d",d.toString()).style("stroke",f).style("fill",s||u).style("transform",l).call(gt,t).node()}};P9.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var BPt=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};function NPt(t,n,e=4){const r=bi();if(!Fe(n))return r.moveTo(...t[2]),r.lineTo(...t[3]),r.lineTo(t[3][0]-e,t[3][1]),r.lineTo(t[10][0]-e,t[10][1]),r.lineTo(t[10][0]+e,t[10][1]),r.lineTo(t[3][0]+e,t[3][1]),r.lineTo(...t[3]),r.closePath(),r.moveTo(...t[10]),r.lineTo(...t[11]),r.moveTo(t[3][0]+e/2,t[8][1]),r.arc(t[3][0],t[8][1],e/2,0,Math.PI*2),r.closePath(),r;const i=n.getCenter(),[a,o]=i,s=Re(i,t[3]),l=Re(i,t[8]),c=Re(i,t[10]),u=pi(Ue(t[2],i)),f=Math.asin(e/l),h=u-f,d=u+f;r.moveTo(...t[2]),r.lineTo(...t[3]),r.moveTo(Math.cos(h)*s+a,Math.sin(h)*s+o),r.arc(a,o,s,h,d),r.lineTo(Math.cos(d)*c+a,Math.sin(d)*c+o),r.arc(a,o,c,d,h,!0),r.lineTo(Math.cos(h)*s+a,Math.sin(h)*s+o),r.closePath(),r.moveTo(...t[10]),r.lineTo(...t[11]);const p=(h+d)/2;return r.moveTo(Math.cos(p)*(l+e/2)+a,Math.sin(p)*(l+e/2)+o),r.arc(Math.cos(p)*l+a,Math.sin(p)*l+o,e/2,p,Math.PI*2+p),r.closePath(),r}const k9=(t,n)=>{const{coordinate:e,document:r}=n;return(i,a,o)=>{const{color:s,transform:l}=a,c=4,{color:u,fill:f=u,stroke:h=u}=o,d=BPt(o,["color","fill","stroke"]),p=NPt(i,e,c);return Ot(r.createElement("path",{})).call(gt,d).style("d",p.toString()).style("stroke",h).style("fill",s||f).style("transform",l).call(gt,t).node()}};k9.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var QL=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};function $Pt(t,n,e){return t.createElement("path",{style:Object.assign({path:`M ${n},${n} L -${n},0 L ${n},-${n} L 0,0 Z`,anchor:"0.5 0.5",transformOrigin:"center"},e)})}function jPt(t,n){if(!Fe(n))return es().x(r=>r[0]).y(r=>r[1])(t);const e=n.getCenter();return gm()({startAngle:0,endAngle:Math.PI*2,outerRadius:Re(t[0],e),innerRadius:Re(t[1],e)})}function zPt(t,n){if(!Fe(t))return n;const[e,r]=t.getCenter();return`translate(${e}, ${r}) ${n||""}`}const MA=(t,n)=>{const{arrow:e,arrowSize:r=4}=t,i=QL(t,["arrow","arrowSize"]),{coordinate:a,document:o}=n;return(s,l,c)=>{const{color:u,lineWidth:f}=c,h=QL(c,["color","lineWidth"]),{color:d=u,size:p=f}=l,v=e?$Pt(o,r,Object.assign({fill:i.stroke||d,stroke:i.stroke||d},ct(i,"arrow"))):null,g=jPt(s,a),y=zPt(a,l.transform);return Ot(o.createElement("path",{})).call(gt,h).style("d",g).style("stroke",d).style("lineWidth",p).style("transform",y).style("markerEnd",v).call(gt,i).node()}};MA.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var JL=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};function GPt(t,n,e){return[["M",t,n],["L",t+2*e,n-e],["L",t+2*e,n+e],["Z"]]}function YPt(t){return es().x(n=>n[0]).y(n=>n[1])(t)}function WPt(t,n,e,r,i=0){const[[a,o],[s,l]]=n;if(_e(t)){const h=a+e,d=s+r,p=h+i;return[[h,o],[p,o],[p,l],[d,l]]}const c=o-e,u=l-r,f=c-i;return[[a,c],[a,f],[s,f],[s,u]]}const _9=(t,n)=>{const{offset:e=0,offset1:r=e,offset2:i=e,connectLength1:a,endMarker:o=!0}=t,s=JL(t,["offset","offset1","offset2","connectLength1","endMarker"]),{coordinate:l}=n;return(c,u,f)=>{const{color:h,connectLength1:d}=f,p=JL(f,["color","connectLength1"]),{color:v,transform:g}=u,y=WPt(l,c,r,i,a??d),m=ct(Object.assign(Object.assign({},s),f),"endMarker");return Ot(new lr).call(gt,p).style("path",YPt(y)).style("stroke",v||h).style("transform",g).style("markerEnd",o?new xe({className:"marker",style:Object.assign(Object.assign({},m),{symbol:GPt})}):null).call(gt,s).node()}};_9.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};function L9(t){return t.replace(/-(\w)/g,function(n,e){return e.toUpperCase()})}function VPt(t){return t.replace(/([A-Z])/g,"-$1").toLowerCase()}function HPt(t,n,e,r){const i=n.length/2,a=n.slice(0,i),o=n.slice(i);let s=Nu(a,(d,p)=>Math.abs(d[1]-o[p][1]));s=Math.max(Math.min(s,i-2),1);const l=d=>[a[d][0],(a[d][1]+o[d][1])/2],c=l(s),u=l(s-1),f=l(s+1),h=pi(Ue(f,u))/Math.PI*180;return{x:c[0],y:c[1],transform:`rotate(${h})`,textAlign:"center",textBaseline:"middle"}}function I9(t,n,e,r){const{bounds:i}=e,[[a,o],[s,l]]=i,c=s-a,u=l-o,f=h=>{const{x:d,y:p}=h,v=zk(e.x,c),g=zk(e.y,u);return Object.assign(Object.assign({},h),{x:(v||d)+a,y:(g||p)+o})};return f(t==="left"?{x:0,y:u/2,textAnchor:"start",textBaseline:"middle"}:t==="right"?{x:c,y:u/2,textAnchor:"end",textBaseline:"middle"}:t==="top"?{x:c/2,y:0,textAnchor:"center",textBaseline:"top"}:t==="bottom"?{x:c/2,y:u,textAnchor:"center",textBaseline:"bottom"}:t==="top-left"?{x:0,y:0,textAnchor:"start",textBaseline:"top"}:t==="top-right"?{x:c,y:0,textAnchor:"end",textBaseline:"top"}:t==="bottom-left"?{x:0,y:u,textAnchor:"start",textBaseline:"bottom"}:t==="bottom-right"?{x:c,y:u,textAnchor:"end",textBaseline:"bottom"}:{x:c/2,y:u/2,textAnchor:"center",textBaseline:"middle"})}function F9(t,n,e,r){const{y:i,y1:a,autoRotate:o,rotateToAlignArc:s}=e,l=r.getCenter(),c=$l(r,n,[i,a]),{innerRadius:u,outerRadius:f,startAngle:h,endAngle:d}=c,p=t==="inside"?(h+d)/2:d,v=AA(p,o,s),g=(()=>{const[y,m]=n,x=u+(f-u)*.5,[b,w]=t==="inside"?ed(l,p,x):Zj(y,m);return{x:b,y:w}})();return Object.assign(Object.assign({},g),{textAlign:t==="inside"?"center":"start",textBaseline:"middle",rotate:v})}function ed(t,n,e){return[t[0]+Math.sin(n)*e,t[1]-Math.cos(n)*e]}function AA(t,n,e){if(!n)return 0;const r=e?0:Math.sin(t)<0?90:-90;return t/Math.PI*180+r}function XPt(t,n,e,r){const{y:i,y1:a,autoRotate:o,rotateToAlignArc:s,radius:l=.5,offset:c=0}=e,u=$l(r,n,[i,a]),{startAngle:f,endAngle:h}=u,d=r.getCenter(),p=(f+h)/2,g={textAlign:"center",textBaseline:"middle",rotate:AA(p,o,s)},{innerRadius:y,outerRadius:m}=u,b=y+(m-y)*l+c,[w,S]=ed(d,p,b);return Object.assign({x:w,y:S},g)}function tI(t){return t===void 0?null:t}function D9(t,n,e,r){const{bounds:i}=e,[a]=i;return{x:tI(a[0]),y:tI(a[1])}}function Ea(t,n,e,r){const{bounds:i}=e;return i.length===1?D9(t,n,e):(mm(r)?F9:$u(r)?XPt:I9)(t,n,e,r)}function UPt(t,n,e,r,i){const[a,o]=ed(t,n,e),[s,l]=ed(t,n,r),c=Math.sin(n)>0?1:-1;return[[a,o],[s,l],[s+c*i,l]]}function R9(t,n,e){const r=$l(e,t,[n.y,n.y1]),{innerRadius:i,outerRadius:a}=r;return i+(a-i)}function B9(t,n,e){const r=$l(e,t,[n.y,n.y1]),{startAngle:i,endAngle:a}=r;return(i+a)/2}function EA(t,n,e,r){const{autoRotate:i,rotateToAlignArc:a,offset:o=0,connector:s=!0,connectorLength:l=o,connectorLength2:c=0,connectorDistance:u=0}=e,f=r.getCenter(),h=B9(n,e,r),d=Math.sin(h)>0?1:-1,p=AA(h,i,a),v={textAlign:d>0||mm(r)?"start":"end",textBaseline:"middle",rotate:p},g=R9(n,e,r),y=g+(s?l:o),[[m,x],[b,w],[S,O]]=UPt(f,h,g,y,s?c:0),M=s?+u*d:0,A=S+M,T=O,C={connector:s,connectorPoints:[[b-A,w-T],[S-A,O-T]]};return Object.assign(Object.assign({x0:m,y0:x,x:S+M,y:O},v),C)}function qPt(t,n,e,r){const{bounds:i}=e;return i.length===1?D9(t,n,e):(mm(r)?F9:$u(r)?EA:I9)(t,n,e,r)}var ZPt=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};function KPt(t,n,e,r){if(!$u(r))return{};const{connectorLength:i,connectorLength2:a,connectorDistance:o}=e,s=ZPt(EA("outside",n,e,r),[]),l=r.getCenter(),c=R9(n,e,r),u=B9(n,e,r),f=c+i+a,h=Math.sin(u)>0?1:-1,d=l[0]+(f+ +o)*h,{x:p}=s,v=d-p;return s.x+=v,s.connectorPoints[0][0]-=v,s}var QPt=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};function JPt(t,n,e,r){if(!$u(r))return{};const{connectorLength:i,connectorLength2:a,connectorDistance:o}=e,s=QPt(EA("outside",n,e,r),[]),{x0:l,y0:c}=s,u=r.getCenter(),h=Mbt(r)+i,d=au([l-u[0],c-u[1]]),p=Math.sin(d)>0?1:-1,[v,g]=ed(u,d,h);return s.x=v+(a+o)*p,s.y=g,s}const tkt=Object.freeze(Object.defineProperty({__proto__:null,area:HPt,bottom:Ea,bottomLeft:Ea,bottomRight:Ea,inside:Ea,left:Ea,outside:qPt,right:Ea,spider:KPt,surround:JPt,top:Ea,topLeft:Ea,topRight:Ea},Symbol.toStringTag,{value:"Module"}));var eI=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};function ekt(t,n){return t!==void 0?t:$u(n)?"inside":_e(n)?"right":"top"}function nkt(t,n,e,r,i){const{position:a}=n,{render:o}=i,s=ekt(a,e),c=r[o?"htmlLabel":s==="inside"?"innerLabel":"label"],u=Object.assign({},c,n),f=tkt[L9(s)];if(!f)throw new Error(`Unknown position: ${s}`);return Object.assign(Object.assign({},c),f(s,t,u,e,i))}const N9=(t,n)=>{const{coordinate:e,theme:r}=n,{render:i}=t;return(a,o)=>{const{text:s,x:l,y:c,transform:u="",transformOrigin:f,className:h=""}=o,d=eI(o,["text","x","y","transform","transformOrigin","className"]),p=nkt(a,o,e,r,t),{rotate:v=0,transform:g=""}=p,y=eI(p,["rotate","transform"]);return Ot(new a9).call(gt,y).style("text",`${s}`).style("className",`${h} g2-label`).style("innerHTML",i?i(s,o.datum,o.index):void 0).style("labelTransform",`${g} rotate(${+v}) ${u}`.trim()).style("labelTransformOrigin",f).style("coordCenter",e.getCenter()).call(gt,d).node()}};N9.props={defaultMarker:"point"};var nI=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};const TA=(t,n)=>{const{arrow:e,colorAttribute:r}=t,i=nI(t,["arrow","colorAttribute"]),{coordinate:a,document:o}=n;return(s,l,c)=>{const{color:u,stroke:f}=c,h=nI(c,["color","stroke"]),{d,color:p=u}=l,[v,g]=a.getSize();return Ot(o.createElement("path",{})).call(gt,h).style("d",typeof d=="function"?d({width:v,height:g}):d).style(r,p).call(gt,i).node()}};TA.props={defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const $9=(t,n)=>TA(Object.assign({colorAttribute:"fill"},t),n);$9.props={defaultMarker:"hvh",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const j9=(t,n)=>TA(Object.assign({fill:"none",colorAttribute:"stroke"},t),n);j9.props={defaultMarker:"hvh",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var rkt=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};const z9=(t,n)=>{const{document:e}=n;return(r,i,a)=>{const{transform:o}=i,{color:s}=a,l=rkt(a,["color"]),{color:c=s}=i,[u,...f]=r,h=bi();return h.moveTo(...u),f.forEach(([d,p])=>{h.lineTo(d,p)}),h.closePath(),Ot(e.createElement("path",{})).call(gt,l).style("d",h.toString()).style("stroke",c||s).style("fill",c||s).style("fillOpacity",.4).style("transform",o).call(gt,t).node()}};z9.props={defaultMarker:"square",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};cM(3);function ikt(t,n=(...r)=>`${r[0]}`,e=16){const r=cM(e);return(...i)=>{const a=n(...i);let o=r.get(a);return r.has(a)?r.get(a):(o=t(...i),r.set(a,o),o)}}function akt(t){return typeof t=="string"?t.split(" ").map(n=>{const[e,r]=n.split(":");return[+e,r]}):t}function uy(t,n,e){const r=t?t():document.createElement("canvas");return r.width=n,r.height=e,r}const okt=ikt((t,n,e)=>{const r=uy(e,t*2,t*2),i=r.getContext("2d"),a=t,o=t;if(n===1)i.beginPath(),i.arc(a,o,t,0,2*Math.PI,!1),i.fillStyle="rgba(0,0,0,1)",i.fill();else{const s=i.createRadialGradient(a,o,t*n,a,o,t);s.addColorStop(0,"rgba(0,0,0,1)"),s.addColorStop(1,"rgba(0,0,0,0)"),i.fillStyle=s,i.fillRect(0,0,2*t,2*t)}return r},t=>`${t}`);function skt(t,n){const r=uy(n,256,1).getContext("2d"),i=r.createLinearGradient(0,0,256,1);return akt(t).forEach(([a,o])=>{i.addColorStop(a,o)}),r.fillStyle=i,r.fillRect(0,0,256,1),r.getImageData(0,0,256,1).data}function lkt(t,n,e,r,i,a){const{blur:o}=i;let s=r.length;for(;s--;){const{x:l,y:c,value:u,radius:f}=r[s],h=Math.min(u,e),d=l-f,p=c-f,v=okt(f,1-o,a),g=(h-n)/(e-n);t.globalAlpha=Math.max(g,.001),t.drawImage(v,d,p)}return t}function ckt(t,n,e,r,i){const{minOpacity:a,opacity:o,maxOpacity:s,useGradientOpacity:l}=i,c=0,u=0,f=n,h=e,d=t.getImageData(c,u,f,h),p=d.data,v=p.length;for(let g=3;g<v;g+=4){const y=p[g],m=y*4;if(!m)continue;const x=o||Math.max(0,Math.min(s,Math.max(a,y)));p[g-3]=r[m],p[g-2]=r[m+1],p[g-1]=r[m+2],p[g]=l?r[m+3]:x}return d}function ukt(t,n,e,r,i,a,o){const s=Object.assign({blur:.85,minOpacity:0,opacity:.6,maxOpacity:1,gradient:[[.25,"rgb(0,0,255)"],[.55,"rgb(0,255,0)"],[.85,"yellow"],[1,"rgb(255,0,0)"]]},a);s.minOpacity*=255,s.opacity*=255,s.maxOpacity*=255;const c=uy(o,t,n).getContext("2d"),u=skt(s.gradient,o);c.clearRect(0,0,t,n),lkt(c,e,r,i,s,o);const f=ckt(c,t,n,u,s),d=uy(o,t,n).getContext("2d");return d.putImageData(f,0,0),d}var fkt=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};function hkt(t,n){return Object.keys(t).reduce((e,r)=>{const i=t[r];return n(i,r)||(e[r]=i),e},{})}const G9=(t,n)=>{const{gradient:e,opacity:r,maxOpacity:i,minOpacity:a,blur:o,useGradientOpacity:s}=t,l=fkt(t,["gradient","opacity","maxOpacity","minOpacity","blur","useGradientOpacity"]),{coordinate:c,createCanvas:u,document:f}=n;return(h,d,p)=>{const{transform:v}=d,[g,y]=c.getSize(),m=h.map(O=>({x:O[0],y:O[1],value:O[2],radius:O[3]})),x=Hr(h,O=>O[2]),b=he(h,O=>O[2]),S=g&&y?ukt(g,y,x,b,m,hkt({gradient:e,opacity:r,minOpacity:a,maxOpacity:i,blur:o,useGradientOpacity:s},O=>O===void 0),u):{canvas:null};return Ot(f.createElement("image",{})).call(gt,p).style("x",0).style("y",0).style("width",g).style("height",y).style("src",S.canvas).style("transform",v).call(gt,l).node()}};G9.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var dkt=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};const Y9=(t,n)=>{const{render:e}=t,r=dkt(t,["render"]);return i=>{const[[a,o]]=i;return e(Object.assign(Object.assign({},r),{x:a,y:o}),n)}};Y9.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const rI=5e3;function iI(t,n,e){return t+(n-t)*e}function pkt(t,n,e,r){return n===0?[[t+1/2*e/Math.PI/2,r/2],[t+1/2*e/Math.PI,r],[t+e/4,r]]:n===1?[[t+1/2*e/Math.PI/2*(Math.PI-2),r],[t+1/2*e/Math.PI/2*(Math.PI-1),r/2],[t+e/4,0]]:n===2?[[t+1/2*e/Math.PI/2,-r/2],[t+1/2*e/Math.PI,-r],[t+e/4,-r]]:[[t+1/2*e/Math.PI/2*(Math.PI-2),-r],[t+1/2*e/Math.PI/2*(Math.PI-1),-r/2],[t+e/4,0]]}function vkt(t,n,e,r,i,a,o){const s=Math.ceil(2*t/e*4)*4,l=[];let c=r;for(;c<-Math.PI*2;)c+=Math.PI*2;for(;c>0;)c-=Math.PI*2;c=c/Math.PI/2*e;const u=a-t+c-t*2;l.push(["M",u,n]);let f=0;for(let h=0;h<s;++h){const d=h%4,p=pkt(h*e/4,d,e,i);l.push(["C",p[0][0]+u,-p[0][1]+n,p[1][0]+u,-p[1][1]+n,p[2][0]+u,-p[2][1]+n]),h===s-1&&(f=p[2][0])}return l.push(["L",f+u,o+t]),l.push(["L",u,o+t]),l.push(["Z"]),l}function gkt(t,n,e,r,i,a,o,s,l,c,u){const{fill:f,fillOpacity:h,opacity:d}=i;for(let p=0;p<r;p++){const v=r<=1?1:p/(r-1),g=vkt(s,o+s*e,l,0,s/40,t,n),y=u.createElement("path",{style:{path:g,fill:f,opacity:iI(.2,.9,v)*Number(d||h)}});a.appendChild(y);try{if(c===!1)return;const m=[{transform:"translate(0, 0)"},{transform:`translate(${l*2}px, 0)`}];y.animate(m,{duration:iI(.5*rI,rI,v)*2,iterations:1/0})}catch{console.warn("off-screen group animate error!")}}}function ykt(t,n,e){return`
      M ${t} ${n-e} 
      a ${e} ${e} 0 1 0 0 ${e*2}
      a ${e} ${e} 0 1 0 0 ${-e*2}
      Z
    `}function mkt(t,n,e){const i=e*.618;return`
      M ${t-i} ${n-e}
      L ${t+i} ${n-e}
      L ${t+i} ${n+e}
      L ${t-i} ${n+e}
      Z
    `}function xkt(t,n,e){return`
      M ${t} ${n-e}
      L ${t+e} ${n}
      L ${t} ${n+e}
      L ${t-e} ${n}
      Z
    `}function bkt(t,n,e){return`
      M ${t} ${n-e}
      L ${t+e} ${n+e}
      L ${t-e} ${n+e}
      Z
    `}function wkt(t,n,e){const r=e*4/3,i=Math.max(r,e*2),a=r/2,o=t,s=a+n-i/2,l=Math.asin(a/((i-a)*.85)),c=Math.sin(l)*a,u=Math.cos(l)*a,f=o-u,h=s+c,d=t,p=s+a/Math.sin(l);return`
      M ${f} ${h}
      A ${a} ${a} 0 1 1 ${f+u*2} ${h}
      Q ${d} ${p} ${t} ${n+i/2}
      Q ${d} ${p} ${f} ${h}
      Z 
    `}const aI={pin:wkt,rect:mkt,circle:ykt,diamond:xkt,triangle:bkt};var oI=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};const Skt=(t="circle")=>aI[t]||aI.circle,W9=(t,n)=>{if(!n)return;const{coordinate:e}=n,{liquidOptions:r,styleOptions:i}=t,{liquidShape:a,percent:o}=r,{background:s,outline:l={},wave:c={}}=i,u=oI(i,["background","outline","wave"]),{border:f=2,distance:h=0}=l,d=oI(l,["border","distance"]),{length:p=192,count:v=3}=c;return(g,y,m)=>{const{document:x}=n.canvas,{color:b,fillOpacity:w}=m,S=Object.assign(Object.assign({fill:b},m),u),O=x.createElement("g",{}),[M,A]=e.getCenter(),T=e.getSize(),C=Math.min(...T)/2,_=(nmt(a)?a:Skt(a))(M,A,C,...T);if(Object.keys(s).length){const L=x.createElement("path",{style:Object.assign({path:_,fill:"#fff"},s)});O.appendChild(L)}if(o>0){const L=x.createElement("path",{style:{path:_}});O.appendChild(L),O.style.clipPath=L,gkt(M,A,1-o,v,S,O,L.getBBox().y,C*2,p,!0,x)}const k=x.createElement("path",{style:{path:_,fill:"transparent",lineWidth:f+2*h,stroke:"#fff"}}),I=x.createElement("path",{style:Object.assign(Object.assign(Object.assign({path:_,stroke:b,strokeOpacity:w,lineWidth:f},S),d),{fill:"transparent"})});return O.appendChild(k),O.appendChild(I),O}};W9.props={};function sI(t,n){return t.getBandWidth(t.invert(n))}const lI={rect:jl,hollow:Tm,funnel:tA,pyramid:S6},V9=()=>(t,n,e,r)=>{const{x:i,y:a,y1:o,series:s,size:l}=e,c=n.x,u=n.series,[f]=r.getSize(),h=l?l.map(v=>+v/f):null,d=l?(v,g,y)=>{const m=v+g/2,x=h[y];return[m-x/2,m+x/2]}:(v,g,y)=>[v,v+g],p=Array.from(t,v=>{const g=sI(c,i[v]),y=u?sI(u,s==null?void 0:s[v]):1,m=g*y,x=(+(s==null?void 0:s[v])||0)*g,b=+i[v]+x,[w,S]=d(b,m,v),O=+a[v],M=+o[v];return[[w,O],[S,O],[S,M],[w,M]].map(_=>r.map(_))});return[t,p]};V9.props={defaultShape:"rect",defaultLabelShape:"label",composite:!1,shape:lI,channels:[...cr({shapes:Object.keys(lI)}),{name:"x",scale:"band",required:!0},{name:"y",required:!0},{name:"series",scale:"band"},{name:"size"}],preInference:[...rn(),{type:Fd},{type:Dl}],postInference:[...cn(),...Gu()],interaction:{shareTooltip:!0}};const cI={rect:jl,hollow:Tm},H9=()=>(t,n,e,r)=>{const{x:i,x1:a,y:o,y1:s}=e,l=Array.from(t,c=>{const u=[+i[c],+o[c]],f=[+a[c],+o[c]],h=[+a[c],+s[c]],d=[+i[c],+s[c]];return[u,f,h,d].map(p=>r.map(p))});return[t,l]};H9.props={defaultShape:"rect",defaultLabelShape:"label",composite:!1,shape:cI,channels:[...cr({shapes:Object.keys(cI)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...rn(),{type:Fd}],postInference:[...cn(),...Gu()],interaction:{shareTooltip:!0}};const uI={line:O6,smooth:M6,hv:A6,vh:E6,hvh:T6,trail:C6},Okt=(t,n,e,r)=>{var i,a;const{series:o,x:s,y:l}=e,{x:c,y:u}=n;if(s===void 0||l===void 0)throw new Error("Missing encode for x or y channel.");const f=o?Array.from(Be(t,g=>o[g]).values()):[t],h=f.map(g=>g[0]).filter(g=>g!==void 0),d=(((i=c==null?void 0:c.getBandWidth)===null||i===void 0?void 0:i.call(c))||0)/2,p=(((a=u==null?void 0:u.getBandWidth)===null||a===void 0?void 0:a.call(u))||0)/2,v=Array.from(f,g=>g.map(y=>r.map([+s[y]+d,+l[y]+p])));return[h,v,f]},Mkt=(t,n,e,r)=>{const i=Object.entries(e).filter(([o])=>o.startsWith("position")).map(([,o])=>o);if(i.length===0)throw new Error("Missing encode for position channel.");const a=Array.from(t,o=>{const s=i.map(u=>+u[o]),l=r.map(s),c=[];for(let u=0;u<l.length;u+=2)c.push([l[u],l[u+1]]);return c});return[t,a]},X9=()=>(t,n,e,r)=>(xm(r)?Mkt:Okt)(t,n,e,r);X9.props={defaultShape:"line",defaultLabelShape:"label",composite:!1,shape:uI,channels:[...cr({shapes:Object.keys(uI)}),{name:"x"},{name:"y"},{name:"position",independent:!0},{name:"size"},{name:"series",scale:"band"}],preInference:[...rn(),{type:K4},{type:wM}],postInference:[...cn(),...Gu(),...PPt()],interaction:{shareTooltip:!0,seriesTooltip:!0,crosshairs:!0}};const fI={hollow:K6,hollowDiamond:q6,hollowHexagon:Z6,hollowSquare:Q6,hollowTriangleDown:t8,hollowTriangle:J6,hollowBowtie:U6,point:l8,plus:s8,diamond:r8,square:c8,triangle:f8,hexagon:i8,cross:n8,bowtie:e8,hyphen:a8,line:o8,tick:u8,triangleDown:h8},U9=t=>(n,e,r,i)=>{const{x:a,y:o,x1:s,y1:l,size:c,dx:u,dy:f}=r,[h,d]=i.getSize(),p=zl(e,r,t),v=y=>{const m=+((u==null?void 0:u[y])||0),x=+((f==null?void 0:f[y])||0),b=s?(+a[y]+ +s[y])/2:+a[y],w=l?(+o[y]+ +l[y])/2:+o[y],S=b+m,O=w+x;return[S,O]},g=c?Array.from(n,y=>{const[m,x]=v(y),b=+c[y],w=b/h,S=b/d,O=[m-w,x-S],M=[m+w,x+S];return[i.map(p(O,y)),i.map(p(M,y))]}):Array.from(n,y=>[i.map(p(v(y),y))]);return[n,g]};U9.props={defaultShape:"hollow",defaultLabelShape:"label",composite:!1,shape:fI,channels:[...cr({shapes:Object.keys(fI)}),{name:"x",required:!0},{name:"y",required:!0},{name:"series",scale:"band"},{name:"size",quantitative:"sqrt"},{name:"dx",scale:"identity"},{name:"dy",scale:"identity"}],preInference:[...rn(),{type:Dl},{type:sm}],postInference:[...cn(),{type:W4},...ys()]};const hI={text:o9,badge:s9},q9=t=>{const{cartesian:n=!1}=t;return n?SA:(e,r,i,a)=>{const{x:o,y:s}=i,l=zl(r,i,t),c=Array.from(e,u=>{const f=[+o[u],+s[u]];return[a.map(l(f,u))]});return[e,c]}};q9.props={defaultShape:"text",defaultLabelShape:"label",composite:!1,shape:hI,channels:[...cr({shapes:Object.keys(hI)}),{name:"x",required:!0},{name:"y",required:!0},{name:"text",scale:"identity"},{name:"fontSize"},{name:"rotate"}],preInference:[...rn(),{type:um},{type:cm}],postInference:[...cn(),...ys()]};const dI={cell:jl,hollow:Tm},Z9=()=>(t,n,e,r)=>{const{x:i,y:a}=e,o=n.x,s=n.y,l=Array.from(t,c=>{const u=o.getBandWidth(o.invert(+i[c])),f=s.getBandWidth(s.invert(+a[c])),h=+i[c],d=+a[c],p=[h,d],v=[h+u,d],g=[h+u,d+f],y=[h,d+f];return[p,v,g,y].map(m=>r.map(m))});return[t,l]};Z9.props={defaultShape:"cell",defaultLabelShape:"label",shape:dI,composite:!1,channels:[...cr({shapes:Object.keys(dI)}),{name:"x",required:!0,scale:"band"},{name:"y",required:!0,scale:"band"}],preInference:[...rn(),{type:Dl},{type:sm},{type:SM}],postInference:[...cn(),...ys()]};const pI={area:l9,smooth:c9,hvh:u9,vh:f9,hv:h9},K9=()=>(t,n,e,r)=>{var i,a;const{x:o,y:s,y1:l,series:c}=e,{x:u,y:f}=n,h=c?Array.from(Be(t,y=>c[y]).values()):[t],d=h.map(y=>y[0]).filter(y=>y!==void 0),p=(((i=u==null?void 0:u.getBandWidth)===null||i===void 0?void 0:i.call(u))||0)/2,v=(((a=f==null?void 0:f.getBandWidth)===null||a===void 0?void 0:a.call(f))||0)/2,g=Array.from(h,y=>{const m=y.length,x=new Array(m*2);for(let b=0;b<y.length;b++){const w=y[b];x[b]=r.map([+o[w]+p,+s[w]+v]),x[m+b]=r.map([+o[w]+p,+l[w]+v])}return x});return[d,g,h]};K9.props={defaultShape:"area",defaultLabelShape:"label",composite:!1,shape:pI,channels:[...cr({shapes:Object.keys(pI)}),{name:"x",required:!0},{name:"y",required:!0},{name:"size"},{name:"series",scale:"band"}],preInference:[...rn(),{type:wM},{type:Fd},{type:SM}],postInference:[...cn(),...Gu()],interaction:{shareTooltip:!0,seriesTooltip:!0,crosshairs:!0}};const vI={link:d9,arc:g9,smooth:p9,vhv:v9},CA=t=>(n,e,r,i)=>{const{x:a,y:o,x1:s=a,y1:l=o}=r,c=zl(e,r,t),u=n.map(f=>[i.map(c([+a[f],+o[f]],f)),i.map(c([+s[f],+l[f]],f))]);return[n,u]};CA.props={defaultShape:"link",defaultLabelShape:"label",composite:!1,shape:vI,channels:[...cr({shapes:Object.keys(vI)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...rn(),{type:U4},{type:q4}],postInference:[...cn(),...ys()]};const gI={image:E9},Q9=t=>{const{cartesian:n}=t;return n?SA:(e,r,i,a)=>{const{x:o,y:s}=i,l=zl(r,i,t),c=Array.from(e,u=>{const f=[+o[u],+s[u]];return[a.map(l(f,u))]});return[e,c]}};Q9.props={defaultShape:"image",defaultLabelShape:"label",composite:!1,shape:gI,channels:[...cr({shapes:Object.keys(gI)}),{name:"x",required:!0},{name:"y",required:!0},{name:"src",scale:"identity"},{name:"size"}],preInference:[...rn(),{type:um},{type:cm}],postInference:[...cn(),...ys()]};const yI={polygon:T9,ribbon:C9},J9=()=>(t,n,e,r)=>{const i=Object.entries(e).filter(([s])=>s.startsWith("x")).map(([,s])=>s),a=Object.entries(e).filter(([s])=>s.startsWith("y")).map(([,s])=>s),o=t.map(s=>{const l=[];for(let c=0;c<i.length;c++){const u=i[c][s];if(u===void 0)break;const f=a[c][s];l.push(r.map([+u,+f]))}return l});return[t,o]};J9.props={defaultShape:"polygon",defaultLabelShape:"label",composite:!1,shape:yI,channels:[...cr({shapes:Object.keys(yI)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...rn()],postInference:[...cn(),...ys()]};const mI={box:P9,violin:k9},t7=()=>(t,n,e,r)=>{const{x:i,y:a,y1:o,y2:s,y3:l,y4:c,series:u}=e,f=n.x,h=n.series,d=Array.from(t,p=>{const v=f.getBandWidth(f.invert(+i[p])),g=h?h.getBandWidth(h.invert(+(u==null?void 0:u[p]))):1,y=v*g,m=(+(u==null?void 0:u[p])||0)*v,x=+i[p]+m+y/2,[b,w,S,O,M]=[+a[p],+o[p],+s[p],+l[p],+c[p]];return[[x-y/2,M],[x+y/2,M],[x,M],[x,O],[x-y/2,O],[x+y/2,O],[x+y/2,w],[x-y/2,w],[x-y/2,S],[x+y/2,S],[x,w],[x,b],[x-y/2,b],[x+y/2,b]].map(T=>r.map(T))});return[t,d]};t7.props={defaultShape:"box",defaultLabelShape:"label",composite:!1,shape:mI,channels:[...cr({shapes:Object.keys(mI)}),{name:"x",scale:"band",required:!0},{name:"y",required:!0},{name:"series",scale:"band"}],preInference:[...rn(),{type:Dl}],postInference:[...cn(),...Gu()],interaction:{shareTooltip:!0}};const xI={vector:lA},e7=()=>(t,n,e,r)=>{const{x:i,y:a,size:o,rotate:s}=e,[l,c]=r.getSize(),u=t.map(f=>{const h=+s[f]/180*Math.PI,d=+o[f],p=d/l,v=d/c,g=p*Math.cos(h),y=-v*Math.sin(h);return[r.map([+i[f]-g/2,+a[f]-y/2]),r.map([+i[f]+g/2,+a[f]+y/2])]});return[t,u]};e7.props={defaultShape:"vector",defaultLabelShape:"label",composite:!1,shape:xI,channels:[...cr({shapes:Object.keys(xI)}),{name:"x",required:!0},{name:"y",required:!0},{name:"rotate",required:!0,scale:"identity"},{name:"size",required:!0}],preInference:[...rn()],postInference:[...cn(),...ys()]};const bI={line:MA},n7=t=>(n,e,r,i)=>{const{y:a}=r,o=zl(e,r,nt({style:{bandOffset:0}},t)),s=Array.from(n,l=>{const c=[0,a[l]],u=[1,a[l]];return[c,u].map(f=>i.map(o(f,l)))});return[n,s]};n7.props={defaultShape:"line",defaultLabelShape:"label",composite:!1,shape:bI,channels:[...Yu({shapes:Object.keys(bI)}),{name:"y",required:!0}],preInference:[...rn(),{type:H4}],postInference:[...cn()]};const wI={line:MA},r7=t=>(n,e,r,i)=>{const{x:a}=r,o=zl(e,r,nt({style:{bandOffset:0}},t)),s=Array.from(n,l=>{const c=[a[l],1],u=[a[l],0];return[c,u].map(f=>i.map(o(f,l)))});return[n,s]};r7.props={defaultShape:"line",defaultLabelShape:"label",composite:!1,shape:wI,channels:[...Yu({shapes:Object.keys(wI)}),{name:"x",required:!0}],preInference:[...rn(),{type:X4}],postInference:[...cn()]};const SI={connector:_9},i7=(...t)=>CA(...t);i7.props={defaultShape:"connector",defaultLabelShape:"label",composite:!1,shape:SI,channels:[...Yu({shapes:Object.keys(SI)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...rn()],postInference:[...cn()]};function OI(t,n,e,r){if(n)return()=>[0,1];const{[t]:i,[`${t}1`]:a}=e;return o=>{var s;const l=((s=r.getBandWidth)===null||s===void 0?void 0:s.call(r,r.invert(+a[o])))||0;return[i[o],a[o]+l]}}function PA(t={}){const{extendX:n=!1,extendY:e=!1}=t;return(r,i,a,o)=>{const s=OI("x",n,a,i.x),l=OI("y",e,a,i.y),c=Array.from(r,u=>{const[f,h]=s(u),[d,p]=l(u);return[[f,d],[h,d],[h,p],[f,p]].map(x=>o.map(x))});return[r,c]}}const MI={range:jl},a7=()=>PA();a7.props={defaultShape:"range",defaultLabelShape:"label",composite:!1,shape:MI,channels:[...Yu({shapes:Object.keys(MI)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...rn()],postInference:[...cn()]};const AI={range:jl},o7=()=>PA({extendY:!0});o7.props={defaultShape:"range",defaultLabelShape:"label",composite:!1,shape:AI,channels:[...Yu({shapes:Object.keys(AI)}),{name:"x",required:!0}],preInference:[...rn()],postInference:[...cn()]};const EI={range:jl},s7=()=>PA({extendX:!0});s7.props={defaultShape:"range",defaultLabelShape:"label",composite:!1,shape:EI,channels:[...Yu({shapes:Object.keys(EI)}),{name:"y",required:!0}],preInference:[...rn()],postInference:[...cn()]};function Akt(t){return t.target.depth}function Ekt(t){return t.depth}function Tkt(t,n){return n-1-t.height}function fy(t,n){return t.sourceLinks.length?t.depth:n-1}function Ckt(t){return t.targetLinks.length?t.depth:t.sourceLinks.length?Hr(t.sourceLinks,Akt)-1:0}function yv(t){return function(){return t}}function TI(t,n){return hy(t.source,n.source)||t.index-n.index}function CI(t,n){return hy(t.target,n.target)||t.index-n.index}function hy(t,n){return t.y0-n.y0}function Ix(t){return t.value}function Pkt(t){return t.index}function kkt(t){return t.nodes}function _kt(t){return t.links}function PI(t,n){const e=t.get(n);if(!e)throw new Error("missing: "+n);return e}function kI({nodes:t}){for(const n of t){let e=n.y0,r=e;for(const i of n.sourceLinks)i.y0=e+i.width/2,e+=i.width;for(const i of n.targetLinks)i.y1=r+i.width/2,r+=i.width}}function Lkt(){let t=0,n=0,e=1,r=1,i=24,a=8,o,s=Pkt,l=fy,c,u,f,h=kkt,d=_kt,p=6;function v(L){const F={nodes:h(L),links:d(L)};return g(F),y(F),m(F),x(F),S(F),kI(F),F}v.update=function(L){return kI(L),L},v.nodeId=function(L){return arguments.length?(s=typeof L=="function"?L:yv(L),v):s},v.nodeAlign=function(L){return arguments.length?(l=typeof L=="function"?L:yv(L),v):l},v.nodeDepth=function(L){return arguments.length?(c=L,v):c},v.nodeSort=function(L){return arguments.length?(u=L,v):u},v.nodeWidth=function(L){return arguments.length?(i=+L,v):i},v.nodePadding=function(L){return arguments.length?(a=o=+L,v):a},v.nodes=function(L){return arguments.length?(h=typeof L=="function"?L:yv(L),v):h},v.links=function(L){return arguments.length?(d=typeof L=="function"?L:yv(L),v):d},v.linkSort=function(L){return arguments.length?(f=L,v):f},v.size=function(L){return arguments.length?(t=n=0,e=+L[0],r=+L[1],v):[e-t,r-n]},v.extent=function(L){return arguments.length?(t=+L[0][0],e=+L[1][0],n=+L[0][1],r=+L[1][1],v):[[t,n],[e,r]]},v.iterations=function(L){return arguments.length?(p=+L,v):p};function g({nodes:L,links:F}){L.forEach((D,N)=>{D.index=N,D.sourceLinks=[],D.targetLinks=[]});const B=new Map(L.map(D=>[s(D),D]));if(F.forEach((D,N)=>{D.index=N;let{source:j,target:Y}=D;typeof j!="object"&&(j=D.source=PI(B,j)),typeof Y!="object"&&(Y=D.target=PI(B,Y)),j.sourceLinks.push(D),Y.targetLinks.push(D)}),f!=null)for(const{sourceLinks:D,targetLinks:N}of L)D.sort(f),N.sort(f)}function y({nodes:L}){for(const F of L)F.value=F.fixedValue===void 0?Math.max(ui(F.sourceLinks,Ix),ui(F.targetLinks,Ix)):F.fixedValue}function m({nodes:L}){const F=L.length;let B=new Set(L),D=new Set,N=0;for(;B.size;){if(B.forEach(j=>{j.depth=N;for(const{target:Y}of j.sourceLinks)D.add(Y)}),++N>F)throw new Error("circular link");B=D,D=new Set}if(c){const j=Math.max(he(L,W=>W.depth)+1,0);let Y;for(let W=0;W<L.length;W++)Y=L[W],Y.depth=c.call(null,Y,j)}}function x({nodes:L}){const F=L.length;let B=new Set(L),D=new Set,N=0;for(;B.size;){if(B.forEach(j=>{j.height=N;for(const{source:Y}of j.targetLinks)D.add(Y)}),++N>F)throw new Error("circular link");B=D,D=new Set}}function b({nodes:L}){const F=Math.max(he(L,N=>N.depth)+1,0),B=(e-t-i)/(F-1),D=new Array(F).fill(0).map(()=>[]);for(const N of L){const j=Math.max(0,Math.min(F-1,Math.floor(l.call(null,N,F))));N.layer=j,N.x0=t+j*B,N.x1=N.x0+i,D[j]?D[j].push(N):D[j]=[N]}if(u)for(const N of D)N.sort(u);return D}function w(L){const F=Hr(L,B=>(r-n-(B.length-1)*o)/ui(B,Ix));for(const B of L){let D=n;for(const N of B){N.y0=D,N.y1=D+N.value*F,D=N.y1+o;for(const j of N.sourceLinks)j.width=j.value*F}D=(r-D+o)/(B.length+1);for(let N=0;N<B.length;++N){const j=B[N];j.y0+=D*(N+1),j.y1+=D*(N+1)}_(B)}}function S(L){const F=b(L);o=Math.min(a,(r-n)/(he(F,B=>B.length)-1)),w(F);for(let B=0;B<p;++B){const D=Math.pow(.99,B),N=Math.max(1-D,(B+1)/p);M(F,D,N),O(F,D,N)}}function O(L,F,B){for(let D=1,N=L.length;D<N;++D){const j=L[D];for(const Y of j){let W=0,V=0;for(const{source:Q,value:Z}of Y.targetLinks){const q=Z*(Y.layer-Q.layer);W+=k(Q,Y)*q,V+=q}if(!(V>0))continue;const H=(W/V-Y.y0)*F;Y.y0+=H,Y.y1+=H,P(Y)}u===void 0&&j.sort(hy),j.length&&A(j,B)}}function M(L,F,B){for(let D=L.length,N=D-2;N>=0;--N){const j=L[N];for(const Y of j){let W=0,V=0;for(const{target:Q,value:Z}of Y.sourceLinks){const q=Z*(Q.layer-Y.layer);W+=I(Y,Q)*q,V+=q}if(!(V>0))continue;const H=(W/V-Y.y0)*F;Y.y0+=H,Y.y1+=H,P(Y)}u===void 0&&j.sort(hy),j.length&&A(j,B)}}function A(L,F){const B=L.length>>1,D=L[B];C(L,D.y0-o,B-1,F),T(L,D.y1+o,B+1,F),C(L,r,L.length-1,F),T(L,n,0,F)}function T(L,F,B,D){for(;B<L.length;++B){const N=L[B],j=(F-N.y0)*D;j>1e-6&&(N.y0+=j,N.y1+=j),F=N.y1+o}}function C(L,F,B,D){for(;B>=0;--B){const N=L[B],j=(N.y1-F)*D;j>1e-6&&(N.y0-=j,N.y1-=j),F=N.y0-o}}function P({sourceLinks:L,targetLinks:F}){if(f===void 0){for(const{source:{sourceLinks:B}}of F)B.sort(CI);for(const{target:{targetLinks:B}}of L)B.sort(TI)}}function _(L){if(f===void 0)for(const{sourceLinks:F,targetLinks:B}of L)F.sort(CI),B.sort(TI)}function k(L,F){let B=L.y0-(L.sourceLinks.length-1)*o/2;for(const{target:D,width:N}of L.sourceLinks){if(D===F)break;B+=N+o}for(const{source:D,width:N}of F.targetLinks){if(D===L)break;B-=N}return B}function I(L,F){let B=F.y0-(F.targetLinks.length-1)*o/2;for(const{source:D,width:N}of F.targetLinks){if(D===L)break;B+=N+o}for(const{target:D,width:N}of L.sourceLinks){if(D===F)break;B-=N}return B}return v}const Ikt={nodeAlign:"justify",nodeWidth:.008,nodePadding:.03,nodes:t=>t.nodes,links:t=>t.links,nodeSort:void 0,linkSort:void 0,iterations:6},Fkt={left:Ekt,right:Tkt,center:Ckt,justify:fy};function Dkt(t){const n=typeof t;return n==="string"?Fkt[t]||fy:n==="function"?t:fy}const l7=t=>n=>{const{nodeId:e,nodeSort:r,nodeAlign:i,nodeWidth:a,nodePadding:o,nodeDepth:s,nodes:l,links:c,linkSort:u,iterations:f}=Object.assign({},Ikt,t),h=Lkt().nodeSort(r).linkSort(u).links(c).nodes(l).nodeWidth(a).nodePadding(o).nodeDepth(s).nodeAlign(Dkt(i)).iterations(f).extent([[0,0],[1,1]]);typeof e=="function"&&h.nodeId(e);const d=h(n),{nodes:p,links:v}=d,g=p.map(m=>{const{x0:x,x1:b,y0:w,y1:S}=m;return Object.assign(Object.assign({},m),{x:[x,b,b,x],y:[w,w,S,S]})}),y=v.map(m=>{const{source:x,target:b}=m,w=x.x1,S=b.x0,O=m.width/2;return Object.assign(Object.assign({},m),{x:[w,w,S,S],y:[m.y0+O,m.y0-O,m.y1+O,m.y1-O]})});return{nodes:g,links:y}};l7.props={};function ya(t,n,e={},r=!1){if(to(t)||Array.isArray(t)&&r)return t;const i=ct(t,n);return nt(e,i)}function kA(t,n={}){return to(t)||Array.isArray(t)||!c7(t)?t:nt(n,t)}function c7(t){if(Object.keys(t).length===0)return!0;const{title:n,items:e}=t;return n!==void 0||e!==void 0}function ma(t,n){return typeof t=="object"?ct(t,n):t}var Rkt=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};const Bkt={nodeId:t=>t.key,nodeWidth:.02,nodePadding:.02},Nkt={type:"polygon",axis:!1,legend:!1,encode:{shape:"polygon",x:"x",y:"y"},scale:{x:{type:"identity"},y:{type:"identity"}},style:{stroke:"#000"}},$kt={type:"polygon",axis:!1,legend:!1,encode:{shape:"ribbon",x:"x",y:"y"},style:{fillOpacity:.5,stroke:void 0}},jkt={textAlign:t=>t.x[0]<.5?"start":"end",position:t=>t.x[0]<.5?"right":"left",fontSize:10},u7=t=>{const{data:n,encode:e={},scale:r,style:i={},layout:a={},nodeLabels:o=[],linkLabels:s=[],animate:l={},tooltip:c={}}=t,{links:u,nodes:f}=OA(n,e),h=ct(e,"node"),d=ct(e,"link"),{key:p=A=>A.key,color:v=p}=h,{links:g,nodes:y}=l7(Object.assign(Object.assign(Object.assign({},Bkt),{nodeId:ha(p)}),a))({links:u,nodes:f}),m=ct(i,"label"),{text:x=p,spacing:b=5}=m,w=Rkt(m,["text","spacing"]),S=ha(p),O=ya(c,"node",{title:S,items:[{field:"value"}]},!0),M=ya(c,"link",{title:"",items:[A=>({name:"source",value:S(A.source)}),A=>({name:"target",value:S(A.target)})]});return[nt({},Nkt,{data:y,encode:Object.assign(Object.assign({},h),{color:v}),scale:r,style:ct(i,"node"),labels:[Object.assign(Object.assign(Object.assign({},jkt),{text:x,dx:A=>A.x[0]<.5?b:-b}),w),...o],tooltip:O,animate:ma(l,"node"),axis:!1}),nt({},$kt,{data:g,encode:d,labels:s,style:Object.assign({fill:d.color?void 0:"#aaa",strokeWidth:0},ct(i,"link")),tooltip:M,animate:ma(l,"link")})]};u7.props={};function zkt(t,n){return n.value-t.value}function Gkt(t,n){return n.frequency-t.frequency}function Ykt(t,n){return`${t.id}`.localeCompare(`${n.id}`)}function Wkt(t,n){return`${t.name}`.localeCompare(`${n.name}`)}const Vkt=Object.freeze(Object.defineProperty({__proto__:null,frequency:Gkt,id:Ykt,name:Wkt,weight:zkt},Symbol.toStringTag,{value:"Module"})),Hkt={y:0,thickness:.05,weight:!1,marginRatio:.1,id:t=>t.id,source:t=>t.source,target:t=>t.target,sourceWeight:t=>t.value||1,targetWeight:t=>t.value||1,sortBy:null};function Xkt(t){const{y:n,thickness:e,weight:r,marginRatio:i,id:a,source:o,target:s,sourceWeight:l,targetWeight:c,sortBy:u}=Object.assign(Object.assign({},Hkt),t);function f(g){const y=g.nodes.map(x=>Object.assign({},x)),m=g.edges.map(x=>Object.assign({},x));return h(y,m),d(y),p(y,m),v(y,m),{nodes:y,edges:m}}function h(g,y){y.forEach(b=>{b.source=o(b),b.target=s(b),b.sourceWeight=l(b),b.targetWeight=c(b)});const m=Be(y,b=>b.source),x=Be(y,b=>b.target);return g.forEach(b=>{b.id=a(b);const w=m.has(b.id)?m.get(b.id):[],S=x.has(b.id)?x.get(b.id):[];b.frequency=w.length+S.length,b.value=ui(w,O=>O.sourceWeight)+ui(S,O=>O.targetWeight)}),{nodes:g,edges:y}}function d(g,y){const m=typeof u=="function"?u:Vkt[u];m&&g.sort(m)}function p(g,y){const m=g.length;if(!m)throw nu("Invalid nodes: it's empty!");if(!r){const w=1/m;return g.forEach((S,O)=>{S.x=(O+.5)*w,S.y=n}),{nodes:g,edges:y}}const x=i/(2*m),b=g.reduce((w,S)=>w+=S.value,0);return g.reduce((w,S)=>{S.weight=S.value/b,S.width=S.weight*(1-i),S.height=e;const O=x+w,M=O+S.width,A=n-e/2,T=A+e;return S.x=[O,M,M,O],S.y=[A,A,T,T],w+S.width+2*x},0),{nodes:g,edges:y}}function v(g,y){const m=new Map(g.map(w=>[w.id,w]));if(!r)return y.forEach(w=>{const S=o(w),O=s(w),M=m.get(S),A=m.get(O);M&&A&&(w.x=[M.x,A.x],w.y=[M.y,A.y])}),{nodes:g,edges:y};y.forEach(w=>{w.x=[0,0,0,0],w.y=[n,n,n,n]});const x=Be(y,w=>w.source),b=Be(y,w=>w.target);g.forEach(w=>{const{edges:S,width:O,x:M,y:A,value:T,id:C}=w,P=x.get(C)||[],_=b.get(C)||[];let k=0;P.map(I=>{const L=I.sourceWeight/T*O;I.x[0]=M[0]+k,I.x[1]=M[0]+k+L,k+=L}),_.forEach(I=>{const L=I.targetWeight/T*O;I.x[3]=M[0]+k,I.x[2]=M[0]+k+L,k+=L})})}return f}const _A=t=>n=>Xkt(t)(n);_A.props={};var _I=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};const Fx={y:0,thickness:.05,marginRatio:.1,id:t=>t.key,source:t=>t.source,target:t=>t.target,sourceWeight:t=>t.value||1,targetWeight:t=>t.value||1,sortBy:null},Ukt={type:"polygon",axis:!1,legend:!1,encode:{shape:"polygon",x:"x",y:"y"},scale:{x:{type:"identity"},y:{type:"identity"}},style:{opacity:1,fillOpacity:1,lineWidth:1}},qkt={type:"polygon",axis:!1,legend:!1,encode:{shape:"ribbon",x:"x",y:"y"},style:{opacity:.5,lineWidth:1,strokeWidth:1}},Zkt={position:"outside",fontSize:10},f7=(t,n)=>{const{data:e,encode:r={},scale:i,style:a={},layout:o={},nodeLabels:s=[],linkLabels:l=[],animate:c={},tooltip:u={}}=t,{nodes:f,links:h}=OA(e,r),d=ct(r,"node"),p=ct(r,"link"),{key:v=I=>I.key,color:g=v}=d,{linkEncodeColor:y=I=>I.source}=p,{nodeWidthRatio:m=Fx.thickness,nodePaddingRatio:x=Fx.marginRatio}=o,b=_I(o,["nodeWidthRatio","nodePaddingRatio"]),{nodes:w,edges:S}=_A(Object.assign(Object.assign(Object.assign(Object.assign({},Fx),{id:ha(v),thickness:m,marginRatio:x}),b),{weight:!0}))({nodes:f,edges:h}),O=ct(a,"label"),{text:M=v}=O,A=_I(O,["text"]),T=ya(u,"node",{title:"",items:[I=>({name:I.key,value:I.value})]},!0),C=ya(u,"link",{title:"",items:[I=>({name:`${I.source} -> ${I.target}`,value:I.value})]}),{height:P,width:_}=n,k=Math.min(P,_);return[nt({},qkt,{data:S,encode:Object.assign(Object.assign({},p),{color:y}),labels:l,style:Object.assign({fill:y?void 0:"#aaa"},ct(a,"link")),tooltip:C,animate:ma(c,"link")}),nt({},Ukt,{data:w,encode:Object.assign(Object.assign({},d),{color:g}),scale:i,style:ct(a,"node"),coordinate:{type:"polar",outerRadius:(k-20)/k,startAngle:-Math.PI*2,endAngle:0},labels:[Object.assign(Object.assign(Object.assign({},Zkt),{text:M}),A),...s],tooltip:T,animate:ma(c,"node"),axis:!1})]};f7.props={};const LI={path:$9,hollow:j9},h7=t=>(n,e,r,i)=>[n,n.map(()=>[[0,0]])];h7.props={defaultShape:"path",defaultLabelShape:"label",shape:LI,composite:!1,channels:[...cr({shapes:Object.keys(LI)}),{name:"d",scale:"identity"}],preInference:[...rn()],postInference:[...cn()]};var Kkt=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};function Qkt(t,n){const e={treemapBinary:EPt,treemapDice:qd,treemapSlice:$m,treemapSliceDice:TPt,treemapSquarify:M9,treemapResquarify:CPt},r=t==="treemapSquarify"?e[t].ratio(n):e[t];if(!r)throw new TypeError("Invalid tile method!");return r}function Jkt(t,n,e){const{value:r}=e,i=Qkt(n.tile,n.ratio),a=kPt(t,n.path);return r?a.sum(o=>n.ignoreParentValue&&o.children?0:ha(r)(o)).sort(n.sort):a.count(),APt().tile(i).size(n.size).round(n.round).paddingInner(n.paddingInner).paddingOuter(n.paddingOuter).paddingTop(n.paddingTop).paddingRight(n.paddingRight).paddingBottom(n.paddingBottom).paddingLeft(n.paddingLeft)(a),a.descendants().map(o=>Object.assign(o,{x:[o.x0,o.x1],y:[o.y0,o.y1]})).filter(typeof n.layer=="function"?n.layer:o=>o.height===n.layer)}const t_t=(t,n)=>({tile:"treemapSquarify",ratio:.5*(1+Math.sqrt(5)),size:[t,n],round:!1,ignoreParentValue:!0,padding:0,paddingInner:0,paddingOuter:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,sort:(e,r)=>r.value-e.value,layer:0}),e_t=(t,n)=>({type:"rect",axis:!1,encode:{x:"x",y:"y",color:e=>e.data.parent.name},scale:{x:{domain:[0,t],range:[0,1]},y:{domain:[0,n],range:[0,1]}},style:{stroke:"#fff"}}),n_t={fontSize:10,text:t=>t.data.name,position:"inside",fill:"#000",textOverflow:"clip",wordWrap:!0,maxLines:1,wordWrapWidth:t=>t.x1-t.x0},r_t={title:t=>t.data.name,items:[{field:"value"}]},d7=(t,n)=>{const{width:e,height:r}=n,{data:i,encode:a={},scale:o,style:s={},layout:l={},labels:c=[],tooltip:u={}}=t,f=Kkt(t,["data","encode","scale","style","layout","labels","tooltip"]),h=Jkt(i,nt({},t_t(e,r),l),a),d=ct(s,"label");return nt({},e_t(e,r),Object.assign(Object.assign({data:h,encode:a,scale:o,style:s,labels:[Object.assign(Object.assign({},n_t),d),...c]},f),{tooltip:kA(u,r_t),axis:!1}))};d7.props={};var i_t=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};const a_t=(t,n)=>({size:[t,n],padding:0,sort:(e,r)=>r.value-e.value}),o_t=(t,n,e)=>({type:"point",axis:!1,legend:!1,scale:{x:{domain:[0,t]},y:{domain:[0,n]},size:{type:"identity"}},encode:{x:"x",y:"y",size:"r",shape:"point"},style:{fill:e.color?void 0:r=>r.height===0?"#ddd":"#fff",stroke:e.color?void 0:r=>r.height===0?"":"#000"}}),s_t={text:"",position:"inside",textOverflow:"clip",wordWrap:!0,maxLines:1,wordWrapWidth:t=>t.r*2},l_t={title:t=>t.data.name,items:[{field:"value"}]},c_t=(t,n,e)=>{const{value:r}=e,i=Id(t)?i2().path(n.path)(t):zu(t);return r?i.sum(a=>ha(r)(a)).sort(n.sort):i.count(),dPt().size(n.size).padding(n.padding)(i),i.descendants()},p7=(t,n)=>{const{width:e,height:r}=n,{data:i,encode:a={},scale:o={},style:s={},layout:l={},labels:c=[],tooltip:u={}}=t,f=i_t(t,["data","encode","scale","style","layout","labels","tooltip"]),h=o_t(e,r,a),d=c_t(i,nt({},a_t(e,r),l),nt({},h.encode,a)),p=ct(s,"label");return nt({},h,Object.assign(Object.assign({data:d,encode:a,scale:o,style:s,labels:[Object.assign(Object.assign({},s_t),p),...c]},f),{tooltip:kA(u,l_t),axis:!1}))};p7.props={};var II=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};function u_t(t,n){return Hr(t,e=>n[e])}function f_t(t,n){return he(t,e=>n[e])}function v7(t,n){const e=LA(t,n)*2.5-IA(t,n)*1.5;return Hr(t,r=>n[r]>=e?n[r]:NaN)}function LA(t,n){return am(t,.25,e=>n[e])}function h_t(t,n){return am(t,.5,e=>n[e])}function IA(t,n){return am(t,.75,e=>n[e])}function g7(t,n){const e=IA(t,n)*2.5-LA(t,n)*1.5;return he(t,r=>n[r]<=e?n[r]:NaN)}function d_t(){return(t,n)=>{const{encode:e}=n,{y:r,x:i}=e,{value:a}=r,{value:o}=i;return[Array.from(Be(t,c=>o[+c]).values()).flatMap(c=>{const u=v7(c,a),f=g7(c,a);return c.filter(h=>a[h]<u||a[h]>f)}),n]}}const y7=t=>{const{data:n,encode:e,style:r={},tooltip:i={},transform:a,animate:o}=t,s=II(t,["data","encode","style","tooltip","transform","animate"]),{point:l=!0}=r,c=II(r,["point"]),{y:u}=e,f={y:u,y1:u,y2:u,y3:u,y4:u},h={y1:LA,y2:h_t,y3:IA},d=ya(i,"box",{items:[{channel:"y",name:"min"},{channel:"y1",name:"q1"},{channel:"y2",name:"q2"},{channel:"y3",name:"q3"},{channel:"y4",name:"max"}]},!0),p=ya(i,"point",{title:{channel:"x"},items:[{name:"outlier",channel:"y"}]});if(!l)return Object.assign({type:"box",data:n,transform:[Object.assign(Object.assign({type:"groupX",y:u_t},h),{y4:f_t})],encode:Object.assign(Object.assign({},e),f),style:c,tooltip:d},s);const v=ct(c,"box"),g=ct(c,"point");return[Object.assign({type:"box",data:n,transform:[Object.assign(Object.assign({type:"groupX",y:v7},h),{y4:g7})],encode:Object.assign(Object.assign({},e),f),style:v,tooltip:d,animate:ma(o,"box")},s),{type:"point",data:n,transform:[{type:d_t}],encode:e,style:Object.assign({},g),tooltip:p,animate:ma(o,"point")}]};y7.props={};const p_t={shape:Y9},m7=t=>{const{cartesian:n}=t;return n?SA:(e,r,i,a)=>{const{x:o,y:s}=i,l=zl(r,i,t),c=Array.from(e,u=>{const f=[+o[u],+s[u]];return[a.map(l(f,u))]});return[e,c]}};m7.props={defaultShape:"shape",defaultLabelShape:"label",composite:!1,shape:p_t,channels:[{name:"x",required:!0},{name:"y",required:!0}],preInference:[...rn(),{type:um},{type:cm},{type:Z4}]};function v_t(t,n){var e,r=1;t==null&&(t=0),n==null&&(n=0);function i(){var a,o=e.length,s,l=0,c=0;for(a=0;a<o;++a)s=e[a],l+=s.x,c+=s.y;for(l=(l/o-t)*r,c=(c/o-n)*r,a=0;a<o;++a)s=e[a],s.x-=l,s.y-=c}return i.initialize=function(a){e=a},i.x=function(a){return arguments.length?(t=+a,i):t},i.y=function(a){return arguments.length?(n=+a,i):n},i.strength=function(a){return arguments.length?(r=+a,i):r},i}function jr(t){return function(){return t}}function vc(t){return(t()-.5)*1e-6}function g_t(t){return t.index}function FI(t,n){var e=t.get(n);if(!e)throw new Error("node not found: "+n);return e}function y_t(t){var n=g_t,e=f,r,i=jr(30),a,o,s,l,c,u=1;t==null&&(t=[]);function f(g){return 1/Math.min(s[g.source.index],s[g.target.index])}function h(g){for(var y=0,m=t.length;y<u;++y)for(var x=0,b,w,S,O,M,A,T;x<m;++x)b=t[x],w=b.source,S=b.target,O=S.x+S.vx-w.x-w.vx||vc(c),M=S.y+S.vy-w.y-w.vy||vc(c),A=Math.sqrt(O*O+M*M),A=(A-a[x])/A*g*r[x],O*=A,M*=A,S.vx-=O*(T=l[x]),S.vy-=M*T,w.vx+=O*(T=1-T),w.vy+=M*T}function d(){if(o){var g,y=o.length,m=t.length,x=new Map(o.map((w,S)=>[n(w,S,o),w])),b;for(g=0,s=new Array(y);g<m;++g)b=t[g],b.index=g,typeof b.source!="object"&&(b.source=FI(x,b.source)),typeof b.target!="object"&&(b.target=FI(x,b.target)),s[b.source.index]=(s[b.source.index]||0)+1,s[b.target.index]=(s[b.target.index]||0)+1;for(g=0,l=new Array(m);g<m;++g)b=t[g],l[g]=s[b.source.index]/(s[b.source.index]+s[b.target.index]);r=new Array(m),p(),a=new Array(m),v()}}function p(){if(o)for(var g=0,y=t.length;g<y;++g)r[g]=+e(t[g],g,t)}function v(){if(o)for(var g=0,y=t.length;g<y;++g)a[g]=+i(t[g],g,t)}return h.initialize=function(g,y){o=g,c=y,d()},h.links=function(g){return arguments.length?(t=g,d(),h):t},h.id=function(g){return arguments.length?(n=g,h):n},h.iterations=function(g){return arguments.length?(u=+g,h):u},h.strength=function(g){return arguments.length?(e=typeof g=="function"?g:jr(+g),p(),h):e},h.distance=function(g){return arguments.length?(i=typeof g=="function"?g:jr(+g),v(),h):i},h}const m_t=1664525,x_t=1013904223,DI=4294967296;function b_t(){let t=1;return()=>(t=(m_t*t+x_t)%DI)/DI}function w_t(t){return t.x}function S_t(t){return t.y}var O_t=10,M_t=Math.PI*(3-Math.sqrt(5));function A_t(t){var n,e=1,r=.001,i=1-Math.pow(r,1/300),a=0,o=.6,s=new Map,l=vS(f),c=f4("tick","end"),u=b_t();t==null&&(t=[]);function f(){h(),c.call("tick",n),e<r&&(l.stop(),c.call("end",n))}function h(v){var g,y=t.length,m;v===void 0&&(v=1);for(var x=0;x<v;++x)for(e+=(a-e)*i,s.forEach(function(b){b(e)}),g=0;g<y;++g)m=t[g],m.fx==null?m.x+=m.vx*=o:(m.x=m.fx,m.vx=0),m.fy==null?m.y+=m.vy*=o:(m.y=m.fy,m.vy=0);return n}function d(){for(var v=0,g=t.length,y;v<g;++v){if(y=t[v],y.index=v,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var m=O_t*Math.sqrt(.5+v),x=v*M_t;y.x=m*Math.cos(x),y.y=m*Math.sin(x)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function p(v){return v.initialize&&v.initialize(t,u),v}return d(),n={tick:h,restart:function(){return l.restart(f),n},stop:function(){return l.stop(),n},nodes:function(v){return arguments.length?(t=v,d(),s.forEach(p),n):t},alpha:function(v){return arguments.length?(e=+v,n):e},alphaMin:function(v){return arguments.length?(r=+v,n):r},alphaDecay:function(v){return arguments.length?(i=+v,n):+i},alphaTarget:function(v){return arguments.length?(a=+v,n):a},velocityDecay:function(v){return arguments.length?(o=1-v,n):1-o},randomSource:function(v){return arguments.length?(u=v,s.forEach(p),n):u},force:function(v,g){return arguments.length>1?(g==null?s.delete(v):s.set(v,p(g)),n):s.get(v)},find:function(v,g,y){var m=0,x=t.length,b,w,S,O,M;for(y==null?y=1/0:y*=y,m=0;m<x;++m)O=t[m],b=v-O.x,w=g-O.y,S=b*b+w*w,S<y&&(M=O,y=S);return M},on:function(v,g){return arguments.length>1?(c.on(v,g),n):c.on(v)}}}function E_t(){var t,n,e,r,i=jr(-30),a,o=1,s=1/0,l=.81;function c(d){var p,v=t.length,g=u4(t,w_t,S_t).visitAfter(f);for(r=d,p=0;p<v;++p)n=t[p],g.visit(h)}function u(){if(t){var d,p=t.length,v;for(a=new Array(p),d=0;d<p;++d)v=t[d],a[v.index]=+i(v,d,t)}}function f(d){var p=0,v,g,y=0,m,x,b;if(d.length){for(m=x=b=0;b<4;++b)(v=d[b])&&(g=Math.abs(v.value))&&(p+=v.value,y+=g,m+=g*v.x,x+=g*v.y);d.x=m/y,d.y=x/y}else{v=d,v.x=v.data.x,v.y=v.data.y;do p+=a[v.data.index];while(v=v.next)}d.value=p}function h(d,p,v,g){if(!d.value)return!0;var y=d.x-n.x,m=d.y-n.y,x=g-p,b=y*y+m*m;if(x*x/l<b)return b<s&&(y===0&&(y=vc(e),b+=y*y),m===0&&(m=vc(e),b+=m*m),b<o&&(b=Math.sqrt(o*b)),n.vx+=y*d.value*r/b,n.vy+=m*d.value*r/b),!0;if(d.length||b>=s)return;(d.data!==n||d.next)&&(y===0&&(y=vc(e),b+=y*y),m===0&&(m=vc(e),b+=m*m),b<o&&(b=Math.sqrt(o*b)));do d.data!==n&&(x=a[d.data.index]*r/b,n.vx+=y*x,n.vy+=m*x);while(d=d.next)}return c.initialize=function(d,p){t=d,e=p,u()},c.strength=function(d){return arguments.length?(i=typeof d=="function"?d:jr(+d),u(),c):i},c.distanceMin=function(d){return arguments.length?(o=d*d,c):Math.sqrt(o)},c.distanceMax=function(d){return arguments.length?(s=d*d,c):Math.sqrt(s)},c.theta=function(d){return arguments.length?(l=d*d,c):Math.sqrt(l)},c}function T_t(t){var n=jr(.1),e,r,i;typeof t!="function"&&(t=jr(t==null?0:+t));function a(s){for(var l=0,c=e.length,u;l<c;++l)u=e[l],u.vx+=(i[l]-u.x)*r[l]*s}function o(){if(e){var s,l=e.length;for(r=new Array(l),i=new Array(l),s=0;s<l;++s)r[s]=isNaN(i[s]=+t(e[s],s,e))?0:+n(e[s],s,e)}}return a.initialize=function(s){e=s,o()},a.strength=function(s){return arguments.length?(n=typeof s=="function"?s:jr(+s),o(),a):n},a.x=function(s){return arguments.length?(t=typeof s=="function"?s:jr(+s),o(),a):t},a}function C_t(t){var n=jr(.1),e,r,i;typeof t!="function"&&(t=jr(t==null?0:+t));function a(s){for(var l=0,c=e.length,u;l<c;++l)u=e[l],u.vy+=(i[l]-u.y)*r[l]*s}function o(){if(e){var s,l=e.length;for(r=new Array(l),i=new Array(l),s=0;s<l;++s)r[s]=isNaN(i[s]=+t(e[s],s,e))?0:+n(e[s],s,e)}}return a.initialize=function(s){e=s,o()},a.strength=function(s){return arguments.length?(n=typeof s=="function"?s:jr(+s),o(),a):n},a.y=function(s){return arguments.length?(t=typeof s=="function"?s:jr(+s),o(),a):t},a}var P_t=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};const k_t={joint:!0},__t={type:"link",axis:!1,legend:!1,encode:{x:[t=>t.source.x,t=>t.target.x],y:[t=>t.source.y,t=>t.target.y]},style:{stroke:"#999",strokeOpacity:.6}},L_t={type:"point",axis:!1,legend:!1,encode:{x:"x",y:"y",size:5,color:"group",shape:"point"},style:{stroke:"#fff"}},I_t={text:""};function F_t(t,n,e){const{nodes:r,links:i}=t,{joint:a,nodeStrength:o,linkStrength:s}=n,{nodeKey:l=p=>p.id,linkKey:c=p=>p.id}=e,u=E_t(),f=y_t(i).id(ha(c));typeof o=="function"&&u.strength(o),typeof s=="function"&&f.strength(s);const h=A_t(r).force("link",f).force("charge",u);a?h.force("center",v_t()):h.force("x",T_t()).force("y",C_t()),h.stop();const d=Math.ceil(Math.log(h.alphaMin())/Math.log(1-h.alphaDecay()));for(let p=0;p<d;p++)h.tick();return{nodesData:r,linksData:i}}const x7=t=>{const{data:n,encode:e={},scale:r,style:i={},layout:a={},nodeLabels:o=[],linkLabels:s=[],animate:l={},tooltip:c={}}=t,{nodeKey:u=S=>S.id,linkKey:f=S=>S.id}=e,h=P_t(e,["nodeKey","linkKey"]),d=Object.assign({nodeKey:u,linkKey:f},h),p=ct(d,"node"),v=ct(d,"link"),{links:g,nodes:y}=OA(n,d),{nodesData:m,linksData:x}=F_t({links:g,nodes:y},nt({},k_t,a),d),b=ya(c,"link",{items:[S=>({name:"source",value:ha(f)(S.source)}),S=>({name:"target",value:ha(f)(S.target)})]}),w=ya(c,"node",{items:[S=>({name:"key",value:ha(u)(S)})]},!0);return[nt({},__t,{data:x,encode:v,labels:s,style:ct(i,"link"),tooltip:b,animate:ma(l,"link")}),nt({},L_t,{data:m,encode:Object.assign({},p),scale:r,style:ct(i,"node"),tooltip:w,labels:[Object.assign(Object.assign({},I_t),ct(i,"label")),...o],animate:ma(l,"link")})]};x7.props={};const b7=t=>n=>e=>{const{field:r="value",nodeSize:i,separation:a,sortBy:o,as:s=["x","y"]}=n,[l,c]=s,u=zu(e,p=>p.children).sum(p=>p[r]).sort(o),f=t();f.size([1,1]),i&&f.nodeSize(i),a&&f.separation(a),f(u);const h=[];u.each(p=>{p[l]=p.x,p[c]=p.y,p.name=p.data.name,h.push(p)});const d=u.links();return d.forEach(p=>{p[l]=[p.source[l],p.target[l]],p[c]=[p.source[c],p.target[c]]}),{nodes:h,edges:d}},w7=t=>b7(RCt)(t);w7.props={};const S7=t=>b7(MPt)(t);S7.props={};const D_t={sortBy:(t,n)=>n.value-t.value},R_t={axis:!1,legend:!1,type:"point",encode:{x:"x",y:"y",size:2,shape:"point"}},B_t={type:"link",encode:{x:"x",y:"y",shape:"smooth"}},N_t={text:"",fontSize:10},O7=t=>{const{data:n,encode:e={},scale:r={},style:i={},layout:a={},nodeLabels:o=[],linkLabels:s=[],animate:l={},tooltip:c={}}=t,u=e==null?void 0:e.value,{nodes:f,edges:h}=S7(Object.assign(Object.assign(Object.assign({},D_t),a),{field:u}))(n),d=ya(c,"node",{title:"name",items:["value"]},!0),p=ya(c,"link",{title:"",items:[v=>({name:"source",value:v.source.name}),v=>({name:"target",value:v.target.name})]});return[nt({},B_t,{data:h,encode:ct(e,"link"),scale:ct(r,"link"),labels:s,style:Object.assign({stroke:"#999"},ct(i,"link")),tooltip:p,animate:ma(l,"link")}),nt({},R_t,{data:f,scale:ct(r,"node"),encode:ct(e,"node"),labels:[Object.assign(Object.assign({},N_t),ct(i,"label")),...o],style:Object.assign({},ct(i,"node")),tooltip:d,animate:ma(l,"node")})]};O7.props={};var RI={},Dx={},Rx=34,pf=10,Bx=13;function M7(t){return new Function("d","return {"+t.map(function(n,e){return JSON.stringify(n)+": d["+e+'] || ""'}).join(",")+"}")}function $_t(t,n){var e=M7(t);return function(r,i){return n(e(r),i,t)}}function BI(t){var n=Object.create(null),e=[];return t.forEach(function(r){for(var i in r)i in n||e.push(n[i]=i)}),e}function vr(t,n){var e=t+"",r=e.length;return r<n?new Array(n-r+1).join(0)+e:e}function j_t(t){return t<0?"-"+vr(-t,6):t>9999?"+"+vr(t,6):vr(t,4)}function z_t(t){var n=t.getUTCHours(),e=t.getUTCMinutes(),r=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":j_t(t.getUTCFullYear())+"-"+vr(t.getUTCMonth()+1,2)+"-"+vr(t.getUTCDate(),2)+(i?"T"+vr(n,2)+":"+vr(e,2)+":"+vr(r,2)+"."+vr(i,3)+"Z":r?"T"+vr(n,2)+":"+vr(e,2)+":"+vr(r,2)+"Z":e||n?"T"+vr(n,2)+":"+vr(e,2)+"Z":"")}function G_t(t){var n=new RegExp('["'+t+`
\r]`),e=t.charCodeAt(0);function r(f,h){var d,p,v=i(f,function(g,y){if(d)return d(g,y-1);p=g,d=h?$_t(g,h):M7(g)});return v.columns=p||[],v}function i(f,h){var d=[],p=f.length,v=0,g=0,y,m=p<=0,x=!1;f.charCodeAt(p-1)===pf&&--p,f.charCodeAt(p-1)===Bx&&--p;function b(){if(m)return Dx;if(x)return x=!1,RI;var S,O=v,M;if(f.charCodeAt(O)===Rx){for(;v++<p&&f.charCodeAt(v)!==Rx||f.charCodeAt(++v)===Rx;);return(S=v)>=p?m=!0:(M=f.charCodeAt(v++))===pf?x=!0:M===Bx&&(x=!0,f.charCodeAt(v)===pf&&++v),f.slice(O+1,S-1).replace(/""/g,'"')}for(;v<p;){if((M=f.charCodeAt(S=v++))===pf)x=!0;else if(M===Bx)x=!0,f.charCodeAt(v)===pf&&++v;else if(M!==e)continue;return f.slice(O,S)}return m=!0,f.slice(O,p)}for(;(y=b())!==Dx;){for(var w=[];y!==RI&&y!==Dx;)w.push(y),y=b();h&&(w=h(w,g++))==null||d.push(w)}return d}function a(f,h){return f.map(function(d){return h.map(function(p){return u(d[p])}).join(t)})}function o(f,h){return h==null&&(h=BI(f)),[h.map(u).join(t)].concat(a(f,h)).join(`
`)}function s(f,h){return h==null&&(h=BI(f)),a(f,h).join(`
`)}function l(f){return f.map(c).join(`
`)}function c(f){return f.map(u).join(t)}function u(f){return f==null?"":f instanceof Date?z_t(f):n.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:o,formatBody:s,formatRows:l,formatRow:c,formatValue:u}}function Y_t(t){for(var n in t){var e=t[n].trim(),r,i;if(!e)e=null;else if(e==="true")e=!0;else if(e==="false")e=!1;else if(e==="NaN")e=NaN;else if(!isNaN(r=+e))e=r;else if(i=e.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))W_t&&i[4]&&!i[7]&&(e=e.replace(/-/g,"/").replace(/T/," ")),e=new Date(e);else continue;t[n]=e}return t}const W_t=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();var V_t=globalThis&&globalThis.__awaiter||function(t,n,e,r){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(t,n||[])).next())})};const A7=t=>{const{value:n,format:e=n.split(".").pop(),delimiter:r=",",autoType:i=!0}=t;return()=>V_t(void 0,void 0,void 0,function*(){const a=yield fetch(n);if(e==="csv"){const o=yield a.text();return G_t(r).parse(o,i?Y_t:gl)}else if(e==="json")return yield a.json();throw new Error(`Unknown format: ${e}.`)})};A7.props={};function H_t(t){return!t||Object.keys(t).length===0}const E7=t=>{const{fields:n,key:e="key",value:r="value"}=t;return i=>H_t(n)?i:i.flatMap(a=>n.map(o=>Object.assign(Object.assign({},a),{[e]:o,[r]:a[o]})))};E7.props={};function X_t(t){return t!=null&&!Number.isNaN(t)}const T7=t=>{const{callback:n=X_t}=t;return e=>e.filter(n)};T7.props={};const C7=t=>{const{callback:n}=t;return e=>Array.isArray(e)?[...e].sort(n):e};C7.props={};function U_t(t,n=[]){return n.reduce((e,r)=>(r in t&&(e[r]=t[r]),e),{})}const P7=t=>{const{fields:n}=t;return e=>e.map(r=>U_t(r,n))};P7.props={};function q_t(t){return Object.keys(t).length===0}const k7=t=>n=>{if(!t||q_t(t))return n;const e=r=>Object.entries(r).reduce((i,[a,o])=>(i[t[a]||a]=o,i),{});return n.map(e)};k7.props={};function Z_t(t,n){return t.map(e=>{if(Array.isArray(e)){const[r,i=n]=e;return[r,i]}return[e,n]})}const _7=t=>{const{fields:n=[]}=t,e=Z_t(n,!0);return r=>{const i=(a,o)=>e.reduce((s,[l,c=!0])=>s!==0?s:c?a[l]<o[l]?-1:+(a[l]!==o[l]):a[l]>o[l]?-1:+(a[l]!==o[l]),0);return[...r].sort(i)}};_7.props={};const L7=t=>{const{value:n}=t;return()=>n};L7.props={};const I7=t=>{const{callback:n=gl}=t;return e=>n(e)};I7.props={};const F7=t=>{const{callback:n=gl}=t;return e=>Array.isArray(e)?e.map(n):e};F7.props={};const Nx=Math.PI/180,kf=64,tg=2048;function K_t(t){return t.text}function Q_t(){return"serif"}function NI(){return"normal"}function J_t(t){return t.value}function tLt(){return~~(Math.random()*2)*90}function eLt(){return 1}function nLt(){}function rLt(t,n,e,r){if(n.sprite)return;const i=t.context,a=t.ratio;i.clearRect(0,0,(kf<<5)/a,tg/a);let o=0,s=0,l=0;const c=e.length;for(--r;++r<c;){n=e[r],i.save(),i.font=n.style+" "+n.weight+" "+~~((n.size+1)/a)+"px "+n.font;let h=i.measureText(n.text+"m").width*a,d=n.size<<1;if(n.rotate){const p=Math.sin(n.rotate*Nx),v=Math.cos(n.rotate*Nx),g=h*v,y=h*p,m=d*v,x=d*p;h=Math.max(Math.abs(g+x),Math.abs(g-x))+31>>5<<5,d=~~Math.max(Math.abs(y+m),Math.abs(y-m))}else h=h+31>>5<<5;if(d>l&&(l=d),o+h>=kf<<5&&(o=0,s+=l,l=0),s+d>=tg)break;i.translate((o+(h>>1))/a,(s+(d>>1))/a),n.rotate&&i.rotate(n.rotate*Nx),i.fillText(n.text,0,0),n.padding&&(i.lineWidth=2*n.padding,i.strokeText(n.text,0,0)),i.restore(),n.width=h,n.height=d,n.xoff=o,n.yoff=s,n.x1=h>>1,n.y1=d>>1,n.x0=-n.x1,n.y0=-n.y1,n.hasText=!0,o+=h}const u=i.getImageData(0,0,(kf<<5)/a,tg/a).data,f=[];for(;--r>=0;){if(n=e[r],!n.hasText)continue;const h=n.width,d=h>>5;let p=n.y1-n.y0;for(let y=0;y<p*d;y++)f[y]=0;if(o=n.xoff,o==null)return;s=n.yoff;let v=0,g=-1;for(let y=0;y<p;y++){for(let m=0;m<h;m++){const x=d*y+(m>>5),b=u[(s+y)*(kf<<5)+(o+m)<<2]?1<<31-m%32:0;f[x]|=b,v|=b}v?g=y:(n.y0++,p--,y--,s++)}n.y1=n.y0+g,n.sprite=f.slice(0,(n.y1-n.y0)*d)}}function iLt(t,n,e){e>>=5;const r=t.sprite,i=t.width>>5,a=t.x-(i<<4),o=a&127,s=32-o,l=t.y1-t.y0;let c=(t.y+t.y0)*e+(a>>5),u;for(let f=0;f<l;f++){u=0;for(let h=0;h<=i;h++)if((u<<s|(h<i?(u=r[f*i+h])>>>o:0))&n[c+h])return!0;c+=e}return!1}function aLt(t,n){const e=t[0],r=t[1];n.x+n.x0<e.x&&(e.x=n.x+n.x0),n.y+n.y0<e.y&&(e.y=n.y+n.y0),n.x+n.x1>r.x&&(r.x=n.x+n.x1),n.y+n.y1>r.y&&(r.y=n.y+n.y1)}function oLt(t,n){return t.x+t.x1>n[0].x&&t.x+t.x0<n[1].x&&t.y+t.y1>n[0].y&&t.y+t.y0<n[1].y}function D7(t){const n=t[0]/t[1];return function(e){return[n*(e*=.1)*Math.cos(e),e*Math.sin(e)]}}function sLt(t){const e=4*t[0]/t[1];let r=0,i=0;return function(a){const o=a<0?-1:1;switch(Math.sqrt(1+4*o*a)-o&3){case 0:r+=e;break;case 1:i+=4;break;case 2:r-=e;break;default:i-=4;break}return[r,i]}}function $I(t){const n=[];let e=-1;for(;++e<t;)n[e]=0;return n}function lLt(){return document.createElement("canvas")}function ho(t){return typeof t=="function"?t:function(){return t}}const cLt={archimedean:D7,rectangular:sLt};function uLt(){let t=[256,256],n=K_t,e=Q_t,r=J_t,i=NI,a=tLt,o=eLt,s=D7,l=Math.random,c=nLt,u=[],f=null,h=1/0;const d=NI,p=lLt,v={};v.start=function(){const[m,x]=t,b=g(p()),w=v.board?v.board:$I((t[0]>>5)*t[1]),S=u.length,O=[],M=u.map(function(P,_,k){return P.text=n.call(this,P,_,k),P.font=e.call(this,P,_,k),P.style=d.call(this,P,_,k),P.weight=i.call(this,P,_,k),P.rotate=a.call(this,P,_,k),P.size=~~r.call(this,P,_,k),P.padding=o.call(this,P,_,k),P}).sort(function(P,_){return _.size-P.size});let A=-1,T=v.board?[{x:0,y:0},{x:m,y:x}]:void 0;f&&clearInterval(f),f=setInterval(C,0),C();function C(){const P=Date.now();for(;Date.now()-P<h&&++A<S;){const _=M[A];_.x=m*(l()+.5)>>1,_.y=x*(l()+.5)>>1,rLt(b,_,M,A),_.hasText&&y(w,_,T)&&(c.call(null,"word",{cloud:v,word:_}),O.push(_),T?v.hasImage||aLt(T,_):T=[{x:_.x+_.x0,y:_.y+_.y0},{x:_.x+_.x1,y:_.y+_.y1}],_.x-=t[0]>>1,_.y-=t[1]>>1)}v._tags=O,v._bounds=T,A>=S&&(v.stop(),c.call(null,"end",{cloud:v,words:O,bounds:T}))}return v},v.stop=function(){return f&&(clearInterval(f),f=null),v};function g(m){m.width=m.height=1;const x=Math.sqrt(m.getContext("2d").getImageData(0,0,1,1).data.length>>2);m.width=(kf<<5)/x,m.height=tg/x;const b=m.getContext("2d");return b.fillStyle=b.strokeStyle="red",b.textAlign="center",{context:b,ratio:x}}function y(m,x,b){const w=x.x,S=x.y,O=Math.sqrt(t[0]*t[0]+t[1]*t[1]),M=s(t),A=l()<.5?1:-1;let T,C=-A,P,_;for(;(T=M(C+=A))&&(P=~~T[0],_=~~T[1],!(Math.min(Math.abs(P),Math.abs(_))>=O));)if(x.x=w+P,x.y=S+_,!(x.x+x.x0<0||x.y+x.y0<0||x.x+x.x1>t[0]||x.y+x.y1>t[1])&&(!b||!iLt(x,m,t[0]))&&(!b||oLt(x,b))){const k=x.sprite,I=x.width>>5,L=t[0]>>5,F=x.x-(I<<4),B=F&127,D=32-B,N=x.y1-x.y0;let j,Y=(x.y+x.y0)*L+(F>>5);for(let W=0;W<N;W++){j=0;for(let V=0;V<=I;V++)m[Y+V]|=j<<D|(V<I?(j=k[W*I+V])>>>B:0);Y+=L}return delete x.sprite,!0}return!1}return v.createMask=m=>{const x=document.createElement("canvas"),[b,w]=t;if(!b||!w)return;const S=b>>5,O=$I((b>>5)*w);x.width=b,x.height=w;const M=x.getContext("2d");M.drawImage(m,0,0,m.width,m.height,0,0,b,w);const A=M.getImageData(0,0,b,w).data;for(let T=0;T<w;T++)for(let C=0;C<b;C++){const P=S*T+(C>>5),_=T*b+C<<2,I=A[_]>=250&&A[_+1]>=250&&A[_+2]>=250?1<<31-C%32:0;O[P]|=I}v.board=O,v.hasImage=!0},v.timeInterval=function(m){h=m??1/0},v.words=function(m){u=m},v.size=function(m=[]){t=[+m[0],+m[1]]},v.text=function(m){n=ho(m)},v.font=function(m){e=ho(m)},v.fontWeight=function(m){i=ho(m)},v.rotate=function(m){a=ho(m)},v.spiral=function(m){s=cLt[m]||m},v.fontSize=function(m){r=ho(m)},v.padding=function(m){o=ho(m)},v.random=function(m){l=ho(m)},v.on=function(m){c=ho(m)},v}var fLt=globalThis&&globalThis.__awaiter||function(t,n,e,r){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(t,n||[])).next())})};function hLt(t,n){return{set(e,r,i){if(n[e]===void 0)return this;const a=r?r.call(null,n[e]):n[e];return i?i.call(null,a):typeof t[e]=="function"?t[e](a):t[e]=a,this},setAsync(e,r,i){return fLt(this,void 0,void 0,function*(){if(n[e]===void 0)return this;const a=r?yield r.call(null,n[e]):n[e];return i?i.call(null,a):typeof t[e]=="function"?t[e](a):t[e]=a,this})}}}var dLt=globalThis&&globalThis.__awaiter||function(t,n,e,r){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(t,n||[])).next())})},pLt=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};const vLt={size:[500,500],fontSize:[14,28]};function gLt(t){return new Promise((n,e)=>{if(t instanceof HTMLImageElement){n(t);return}if(typeof t=="string"){const r=new Image;r.crossOrigin="anonymous",r.src=t,r.onload=()=>n(r),r.onerror=()=>{console.error(`'image ${t} load failed !!!'`),e()};return}e()})}function yLt(t,n){if(typeof t=="function")return t;if(Array.isArray(t)){const[e,r]=t;if(!n)return()=>(r+e)/2;const[i,a]=n;return a===i?()=>(r+e)/2:({value:o})=>(r-e)/(a-i)*(o-i)+e}return()=>t}const R7=t=>n=>dLt(void 0,void 0,void 0,function*(){const e=Object.assign({},vLt,t),r=uLt();yield hLt(r,e).set("fontSize",y=>{const m=n.map(x=>x.value);return yLt(y,[Hr(m),he(m)])}).set("font").set("fontStyle").set("fontWeight").set("padding").set("rotate").set("size").set("spiral").set("timeInterval").set("random").set("text").set("on").setAsync("imageMask",gLt,r.createMask),r.words([...n]);const i=r.start(),[a,o]=e.size,s=[{x:0,y:0},{x:a,y:o}],{_bounds:l=s,_tags:c,hasImage:u}=i,f=c.map(y=>{var{x:m,y:x}=y,b=pLt(y,["x","y"]);return Object.assign(Object.assign({},b),{x:m+a/2,y:x+o/2})}),[{x:h,y:d},{x:p,y:v}]=l,g={text:"",value:0,opacity:0,fontSize:0};return f.push(Object.assign(Object.assign({},g),{x:u?0:h,y:u?0:d}),Object.assign(Object.assign({},g),{x:u?a:p,y:u?o:v})),f});R7.props={};function jI(t){return typeof t=="string"?n=>n[t]:t}const B7=t=>{const{join:n,on:e,select:r=[],as:i=r,unknown:a=NaN}=t,[o,s]=e,l=jI(s),c=jI(o),u=vM(n,([f])=>f,f=>l(f));return f=>f.map(h=>{const d=u.get(c(h));return Object.assign(Object.assign({},h),r.reduce((p,v,g)=>(p[i[g]]=d?d[v]:a,p),{}))})};B7.props={};const N7=t=>{const{start:n,end:e}=t;return r=>r.slice(n,e)};N7.props={};const $7=t=>{const{field:n,groupBy:e,as:r=["y","size"],min:i,max:a,size:o=10,width:s}=t,[l,c]=r;return u=>Array.from(Be(u,h=>e.map(d=>h[d]).join("-")).values()).map(h=>{const d=J$.create(h.map(g=>g[n]),{min:i,max:a,size:o,width:s}),p=d.map(g=>g.x),v=d.map(g=>g.y);return Object.assign(Object.assign({},h[0]),{[l]:p,[c]:v})})};$7.props={};const j7=1e-10;function z7(t,n){const e=xLt(t),r=e.filter(function(l){return mLt(l,t)});let i=0,a=0,o;const s=[];if(r.length>1){const l=bLt(r);for(o=0;o<r.length;++o){const u=r[o];u.angle=Math.atan2(u.x-l.x,u.y-l.y)}r.sort(function(u,f){return f.angle-u.angle});let c=r[r.length-1];for(o=0;o<r.length;++o){const u=r[o];a+=(c.x+u.x)*(u.y-c.y);const f={x:(u.x+c.x)/2,y:(u.y+c.y)/2};let h=null;for(let d=0;d<u.parentIndex.length;++d)if(c.parentIndex.indexOf(u.parentIndex[d])>-1){const p=t[u.parentIndex[d]],v=Math.atan2(u.x-p.x,u.y-p.y),g=Math.atan2(c.x-p.x,c.y-p.y);let y=g-v;y<0&&(y+=2*Math.PI);const m=g-y/2;let x=nd(f,{x:p.x+p.radius*Math.sin(m),y:p.y+p.radius*Math.cos(m)});x>p.radius*2&&(x=p.radius*2),(h===null||h.width>x)&&(h={circle:p,width:x,p1:u,p2:c})}h!==null&&(s.push(h),i+=o2(h.circle.radius,h.width),c=u)}}else{let l=t[0];for(o=1;o<t.length;++o)t[o].radius<l.radius&&(l=t[o]);let c=!1;for(o=0;o<t.length;++o)if(nd(t[o],l)>Math.abs(l.radius-t[o].radius)){c=!0;break}c?i=a=0:(i=l.radius*l.radius*Math.PI,s.push({circle:l,p1:{x:l.x,y:l.y+l.radius},p2:{x:l.x-j7,y:l.y+l.radius},width:l.radius*2}))}return a/=2,n&&(n.area=i+a,n.arcArea=i,n.polygonArea=a,n.arcs=s,n.innerPoints=r,n.intersectionPoints=e),i+a}function mLt(t,n){for(let e=0;e<n.length;++e)if(nd(t,n[e])>n[e].radius+j7)return!1;return!0}function xLt(t){const n=[];for(let e=0;e<t.length;++e)for(let r=e+1;r<t.length;++r){const i=Y7(t[e],t[r]);for(let a=0;a<i.length;++a){const o=i[a];o.parentIndex=[e,r],n.push(o)}}return n}function o2(t,n){return t*t*Math.acos(1-n/t)-(t-n)*Math.sqrt(n*(2*t-n))}function nd(t,n){return Math.sqrt((t.x-n.x)*(t.x-n.x)+(t.y-n.y)*(t.y-n.y))}function G7(t,n,e){if(e>=t+n)return 0;if(e<=Math.abs(t-n))return Math.PI*Math.min(t,n)*Math.min(t,n);const r=t-(e*e-n*n+t*t)/(2*e),i=n-(e*e-t*t+n*n)/(2*e);return o2(t,r)+o2(n,i)}function Y7(t,n){const e=nd(t,n),r=t.radius,i=n.radius;if(e>=r+i||e<=Math.abs(r-i))return[];const a=(r*r-i*i+e*e)/(2*e),o=Math.sqrt(r*r-a*a),s=t.x+a*(n.x-t.x)/e,l=t.y+a*(n.y-t.y)/e,c=-(n.y-t.y)*(o/e),u=-(n.x-t.x)*(o/e);return[{x:s+c,y:l-u},{x:s-c,y:l+u}]}function bLt(t){const n={x:0,y:0};for(let e=0;e<t.length;++e)n.x+=t[e].x,n.y+=t[e].y;return n.x/=t.length,n.y/=t.length,n}function wLt(t,n){n=n||{},n.maxIterations=n.maxIterations||500;const e=n.initialLayout||ALt,r=n.lossFunction||FA;t=SLt(t);const i=e(t,n),a=[],o=[];let s;for(s in i)i.hasOwnProperty(s)&&(a.push(i[s].x),a.push(i[s].y),o.push(s));const c=tM(function(u){const f={};for(let h=0;h<o.length;++h){const d=o[h];f[d]={x:u[2*h],y:u[2*h+1],radius:i[d].radius}}return r(f,t)},a,n).x;for(let u=0;u<o.length;++u)s=o[u],i[s].x=c[2*u],i[s].y=c[2*u+1];return i}const W7=1e-10;function s2(t,n,e){return Math.min(t,n)*Math.min(t,n)*Math.PI<=e+W7?Math.abs(t-n):$$(function(r){return G7(t,n,r)-e},0,t+n)}function SLt(t){t=t.slice();const n=[],e={};let r,i,a,o;for(r=0;r<t.length;++r){const s=t[r];s.sets.length==1?n.push(s.sets[0]):s.sets.length==2&&(a=s.sets[0],o=s.sets[1],e[[a,o]]=!0,e[[o,a]]=!0)}for(n.sort((s,l)=>s>l?1:-1),r=0;r<n.length;++r)for(a=n[r],i=r+1;i<n.length;++i)o=n[i],[a,o]in e||t.push({sets:[a,o],size:0});return t}function OLt(t,n,e){const r=Bg(n.length,n.length),i=Bg(n.length,n.length);return t.filter(function(a){return a.sets.length==2}).map(function(a){const o=e[a.sets[0]],s=e[a.sets[1]],l=Math.sqrt(n[o].size/Math.PI),c=Math.sqrt(n[s].size/Math.PI),u=s2(l,c,a.size);r[o][s]=r[s][o]=u;let f=0;a.size+1e-10>=Math.min(n[o].size,n[s].size)?f=1:a.size<=1e-10&&(f=-1),i[o][s]=i[s][o]=f}),{distances:r,constraints:i}}function MLt(t,n,e,r){let i=0,a;for(a=0;a<n.length;++a)n[a]=0;for(a=0;a<e.length;++a){const o=t[2*a],s=t[2*a+1];for(let l=a+1;l<e.length;++l){const c=t[2*l],u=t[2*l+1],f=e[a][l],h=r[a][l],d=(c-o)*(c-o)+(u-s)*(u-s),p=Math.sqrt(d),v=d-f*f;h>0&&p<=f||h<0&&p>=f||(i+=2*v*v,n[2*a]+=4*v*(o-c),n[2*a+1]+=4*v*(s-u),n[2*l]+=4*v*(c-o),n[2*l+1]+=4*v*(u-s))}}return i}function ALt(t,n){let e=TLt(t,n);const r=n.lossFunction||FA;if(t.length>=8){const i=ELt(t,n),a=r(i,t),o=r(e,t);a+1e-8<o&&(e=i)}return e}function ELt(t,n){n=n||{};const e=n.restarts||10,r=[],i={};let a;for(a=0;a<t.length;++a){const v=t[a];v.sets.length==1&&(i[v.sets[0]]=r.length,r.push(v))}const o=OLt(t,r,i);let s=o.distances;const l=o.constraints,c=Dh(s.map(Dh))/s.length;s=s.map(function(v){return v.map(function(g){return g/c})});const u=function(v,g){return MLt(v,g,s,l)};let f,h;for(a=0;a<e;++a){const v=Rg(s.length*2).map(Math.random);h=j$(u,v,n),(!f||h.fx<f.fx)&&(f=h)}const d=f.x,p={};for(a=0;a<r.length;++a){const v=r[a];p[v.sets[0]]={x:d[2*a]*c,y:d[2*a+1]*c,radius:Math.sqrt(v.size/Math.PI)}}if(n.history)for(a=0;a<n.history.length;++a)Ng(n.history[a].x,c);return p}function TLt(t,n){const e=n&&n.lossFunction?n.lossFunction:FA,r={},i={};let a;for(let f=0;f<t.length;++f){const h=t[f];h.sets.length==1&&(a=h.sets[0],r[a]={x:1e10,y:1e10,rowid:Object.keys(r).length,size:h.size,radius:Math.sqrt(h.size/Math.PI)},i[a]=[])}t=t.filter(function(f){return f.sets.length==2});for(let f=0;f<t.length;++f){const h=t[f];let d=h.hasOwnProperty("weight")?h.weight:1;const p=h.sets[0],v=h.sets[1];h.size+W7>=Math.min(r[p].size,r[v].size)&&(d=0),i[p].push({set:v,size:h.size,weight:d}),i[v].push({set:p,size:h.size,weight:d})}const o=[];for(a in i)if(i.hasOwnProperty(a)){let f=0;for(let h=0;h<i[a].length;++h)f+=i[a][h].size*i[a][h].weight;o.push({set:a,size:f})}function s(f,h){return h.size-f.size}o.sort(s);const l={};function c(f){return f.set in l}function u(f,h){r[h].x=f.x,r[h].y=f.y,l[h]=!0}u({x:0,y:0},o[0].set);for(let f=1;f<o.length;++f){const h=o[f].set,d=i[h].filter(c);if(a=r[h],d.sort(s),d.length===0)throw"ERROR: missing pairwise overlap information";const p=[];for(let y=0;y<d.length;++y){const m=r[d[y].set],x=s2(a.radius,m.radius,d[y].size);p.push({x:m.x+x,y:m.y}),p.push({x:m.x-x,y:m.y}),p.push({y:m.y+x,x:m.x}),p.push({y:m.y-x,x:m.x});for(let b=y+1;b<d.length;++b){const w=r[d[b].set],S=s2(a.radius,w.radius,d[b].size),O=Y7({x:m.x,y:m.y,radius:x},{x:w.x,y:w.y,radius:S});for(let M=0;M<O.length;++M)p.push(O[M])}}let v=1e50,g=p[0];for(let y=0;y<p.length;++y){r[h].x=p[y].x,r[h].y=p[y].y;const m=e(r,t);m<v&&(v=m,g=p[y])}u(g,h)}return r}function FA(t,n){let e=0;function r(i){return i.map(function(a){return t[a]})}for(let i=0;i<n.length;++i){const a=n[i];let o;if(a.sets.length==1)continue;if(a.sets.length==2){const l=t[a.sets[0]],c=t[a.sets[1]];o=G7(l.radius,c.radius,nd(l,c))}else o=z7(r(a.sets));const s=a.hasOwnProperty("weight")?a.weight:1;e+=s*(o-a.size)*(o-a.size)}return e}function CLt(t){const n=function(e){const r=Math.max.apply(null,t.map(function(a){return a[e]+a.radius})),i=Math.min.apply(null,t.map(function(a){return a[e]-a.radius}));return{max:r,min:i}};return{xRange:n("x"),yRange:n("y")}}function PLt(t,n,e,r){const i=[],a=[];for(const v in t)t.hasOwnProperty(v)&&(a.push(v),i.push(t[v]));n-=2*r,e-=2*r;const o=CLt(i),s=o.xRange,l=o.yRange;if(s.max==s.min||l.max==l.min)return console.log("not scaling solution: zero size detected"),t;const c=n/(s.max-s.min),u=e/(l.max-l.min),f=Math.min(u,c),h=(n-(s.max-s.min)*f)/2,d=(e-(l.max-l.min)*f)/2,p={};for(let v=0;v<i.length;++v){const g=i[v];p[a[v]]={radius:f*g.radius,x:r+h+(g.x-s.min)*f,y:r+d+(g.y-l.min)*f}}return p}function kLt(t,n,e){const r=[],i=t-e,a=n;return r.push("M",i,a),r.push("A",e,e,0,1,0,i+2*e,a),r.push("A",e,e,0,1,0,i,a),r.join(" ")}function _Lt(t){const n={};z7(t,n);const e=n.arcs;if(e.length===0)return"M 0 0";if(e.length==1){const r=e[0].circle;return kLt(r.x,r.y,r.radius)}else{const r=[`
M`,e[0].p2.x,e[0].p2.y];for(let i=0;i<e.length;++i){const a=e[i],o=a.circle.radius,s=a.width>o;r.push(`
A`,o,o,0,s?1:0,1,a.p1.x,a.p1.y)}return r.join(" ")}}const V7=t=>{const{sets:n="sets",size:e="size",as:r=["key","path"],padding:i=0}=t,[a,o]=r;return s=>{const l=s.map(f=>Object.assign(Object.assign({},f),{sets:f[n],size:f[e],[a]:f.sets.join("&")}));l.sort((f,h)=>f.sets.length-h.sets.length);const c=wLt(l);let u;return l.map(f=>{const h=f[n],d=({width:p,height:v})=>{u=u||PLt(c,p,v,i);const g=h.map(m=>u[m]);let y=_Lt(g);return/[zZ]$/.test(y)||(y+=" Z"),y};return Object.assign(Object.assign({},f),{[o]:d})})}};V7.props={};const H7=()=>t=>(console.log("G2 data section:",t),t);H7.props={};var LLt=globalThis&&globalThis.__awaiter||function(t,n,e,r){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(t,n||[])).next())})},ILt=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};function FLt(t,n){const{text:e="text",value:r="value"}=n;return t.map(i=>Object.assign(Object.assign({},i),{text:i[e],value:i[r]}))}const DLt=(t,n)=>({size:[t,n]}),RLt=(t,n)=>({axis:!1,type:"text",encode:{x:"x",y:"y",text:"text",rotate:"rotate",fontSize:"size"},scale:{x:{domain:[0,t],range:[0,1]},y:{domain:[0,n],range:[0,1]},fontSize:{type:"identity"},rotate:{type:"identity"}},style:{textAlign:"center"}}),X7=(t,n)=>LLt(void 0,void 0,void 0,function*(){const{width:e,height:r}=n,{data:i,encode:a={},scale:o,style:s={},layout:l={}}=t,c=ILt(t,["data","encode","scale","style","layout"]),u=FLt(i,a),f=yield R7(Object.assign(Object.assign({},DLt(e,r)),l))(u);return nt({},RLt(e,r),Object.assign(Object.assign({data:f,encode:a,scale:o,style:s},c),{axis:!1}))});X7.props={};var eg=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};const BLt=(t,n)=>{const{shape:e,radius:r}=t,i=eg(t,["shape","radius"]),a=ct(i,"pointer"),o=ct(i,"pin"),{shape:s}=a,l=eg(a,["shape"]),{shape:c}=o,u=eg(o,["shape"]),{coordinate:f,theme:h}=n;return(d,p)=>{const v=d.map(k=>f.invert(k)),[g,y,m]=Abt(f,"polar"),x=f.clone(),{color:b}=p,w=fM({startAngle:g,endAngle:y,innerRadius:m,outerRadius:r});w.push(["cartesian"]),x.update({transformations:w});const S=v.map(k=>x.map(k)),[O,M]=b6(S),[A,T]=f.getCenter(),C=Object.assign(Object.assign({x1:O,y1:M,x2:A,y2:T,stroke:b},l),i),P=Object.assign(Object.assign({cx:A,cy:T,stroke:b},u),i),_=Ot(new $n);return to(s)||(typeof s=="function"?_.append(()=>s(S,p,x,h)):_.append("line").call(gt,C).node()),to(c)||(typeof c=="function"?_.append(()=>c(S,p,x,h)):_.append("circle").call(gt,P).node()),_.node()}},zI={coordinate:{type:"radial",innerRadius:.9,outerRadius:1,startAngle:-11/10*Math.PI,endAngle:1/10*Math.PI},axis:{x:!1},legend:!1,tooltip:!1,encode:{x:"x",y:"y",color:"color"},scale:{color:{range:["#30BF78","#D0D0D0"]}}},NLt={style:{shape:BLt,lineWidth:4,pointerLineCap:"round",pinR:10,pinFill:"#fff",radius:.6}},$Lt={type:"text",style:{x:"50%",y:"60%",textAlign:"center",textBaseline:"middle",fontSize:20,fontWeight:800,fill:"#888"}};function jLt(t){if(tu(t)){const n=Math.max(0,Math.min(t,1));return{percent:n,target:n,total:1}}return t}function zLt(t,n){const{name:e="score",target:r,total:i,percent:a,thresholds:o=[]}=jLt(t),s=a||r,l=a?1:i,c=Object.assign({y:{domain:[0,l]}},n);return o.length?{targetData:[{x:e,y:s,color:"target"}],totalData:o.map((u,f)=>({x:e,y:f>=1?u-o[f-1]:u,color:f})),target:s,total:l,scale:c}:{targetData:[{x:e,y:s,color:"target"}],totalData:[{x:e,y:s,color:"target"},{x:e,y:l-s,color:"total"}],target:s,total:l,scale:c}}function GLt(t,{target:n,total:e}){const{content:r}=t;return r?r(n,e):n.toString()}const U7=t=>{const{data:n={},scale:e={},style:r={},animate:i={},transform:a=[]}=t,o=eg(t,["data","scale","style","animate","transform"]),{targetData:s,totalData:l,target:c,total:u,scale:f}=zLt(n,e),h=ct(r,"text"),d=t1t(r,["pointer","pin"]);return[nt({},zI,Object.assign({type:"interval",transform:[{type:"stackY"}],data:l,scale:f,style:ct(r,"arc"),animate:typeof i=="object"?ct(i,"arc"):i},o)),nt({},zI,NLt,Object.assign({type:"point",data:s,scale:f,style:d,animate:typeof i=="object"?ct(i,"indicator"):i},o)),nt({},$Lt,{style:Object.assign({text:GLt(h,{target:c,total:u})},h),animate:typeof i=="object"?ct(i,"text"):i})]};U7.props={};const GI={density:z9},q7=()=>(t,n,e,r)=>{const{x:i,series:a}=e,o=Object.entries(e).filter(([f])=>f.startsWith("y")).map(([,f])=>f),s=Object.entries(e).filter(([f])=>f.startsWith("size")).map(([,f])=>f);if(i===void 0||o===void 0||s===void 0)throw new Error("Missing encode for x or y or size channel.");const l=n.x,c=n.series,u=Array.from(t,f=>{const h=l.getBandWidth(l.invert(+i[f])),d=c?c.getBandWidth(c.invert(+(a==null?void 0:a[f]))):1,p=h*d,v=(+(a==null?void 0:a[f])||0)*h,g=+i[f]+v+p/2;return[...o.map((m,x)=>[g+ +s[x][f]/t.length,+o[x][f]]),...o.map((m,x)=>[g-+s[x][f]/t.length,+o[x][f]]).reverse()].map(m=>r.map(m))});return[t,u]};q7.props={defaultShape:"density",defaultLabelShape:"label",composite:!1,shape:GI,channels:[...cr({shapes:Object.keys(GI)}),{name:"x",scale:"band",required:!0},{name:"y",required:!0},{name:"size",required:!0},{name:"series",scale:"band"},{name:"size",required:!0,scale:"identity"}],preInference:[...rn(),{type:Fd},{type:Dl}],postInference:[...cn(),...Gu()],interaction:{shareTooltip:!0}};const YI={heatmap:G9},Z7=t=>(n,e,r,i)=>{const{x:a,y:o,size:s,color:l}=r,c=Array.from(n,u=>{const f=s?+s[u]:40;return[...i.map([+a[u],+o[u]]),l[u],f]});return[[0],[c]]};Z7.props={defaultShape:"heatmap",defaultLabelShape:"label",composite:!1,shape:YI,channels:[...cr({shapes:Object.keys(YI)}),{name:"x",required:!0},{name:"y",required:!0},{name:"color",scale:"identity",required:!0},{name:"size"}],preInference:[...rn(),{type:Dl},{type:sm}],postInference:[...cn(),...ys()]};var YLt=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};const WLt={axis:{x:!1,y:!1},legend:!1,tooltip:!1,encode:{x:"type",y:"percent"},scale:{y:{domain:[0,1]}},style:{shape:W9},animate:{enter:{type:"fadeIn"}}},VLt={type:"text",style:{x:"50%",y:"50%",textAlign:"center",textBaseline:"middle",fontSize:20,fontWeight:800,fill:"#888"},animate:{enter:{type:"fadeIn"}}},K7=t=>{const{data:n={},style:e={},animate:r}=t,i=YLt(t,["data","style","animate"]),a=Math.max(0,tu(n)?n:n==null?void 0:n.percent),o=[{percent:a,type:"liquid"}],s=ct(e,"text"),l=ct(e,"outline"),c=ct(e,"wave"),u=ct(e,"background");return[nt({},WLt,Object.assign({type:"interval",data:o,style:{liquidOptions:{percent:a,liquidShape:e==null?void 0:e.shape},styleOptions:Object.assign(Object.assign({},e),{outline:l,wave:c,background:u})},animate:r},i)),nt({},VLt,{style:Object.assign({text:`${ey(a*100)} %`},s),animate:r})]};K7.props={};const Q7=()=>["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#6F5EF9","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"];Q7.props={};const J7=()=>["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#6F5EF9","#D3CEFD","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"];J7.props={};const tG=t=>new Hh(t);tG.props={};const eG=t=>new eo(t);eG.props={};const nG=t=>new gj(t);nG.props={};const rG=t=>new bj(t);rG.props={};const iG=t=>new yxt(t);iG.props={};const aG=t=>new Cxt(t);aG.props={};const oG=t=>new Oxt(t);oG.props={};const sG=t=>new Mj(t);sG.props={};const lG=t=>new dm(t);lG.props={};const cG=t=>new _j(t);cG.props={};const uG=t=>new Pj(t);uG.props={};const fG=t=>new wxt(t);fG.props={};const hG=t=>new Ow(t);hG.props={};const dG=t=>new EM(t);dG.props={};function DA({colorDefault:t,colorBlack:n,colorWhite:e,colorStroke:r,colorBackground:i,padding1:a,padding2:o,padding3:s,alpha90:l,alpha65:c,alpha45:u,alpha25:f,alpha10:h,category10:d,category20:p,sizeDefault:v=1,padding:g="auto",margin:y=16}){return{padding:g,margin:y,size:v,color:t,category10:d,category20:p,enter:{duration:300,fill:"both",delay:0},update:{duration:300,fill:"both",delay:0},exit:{duration:300,fill:"both",delay:0},view:{viewFill:i,plotFill:"transparent",mainFill:"transparent",contentFill:"transparent"},line:{line:{fill:"",strokeOpacity:1,lineWidth:1,lineCap:"round"}},point:{point:{r:3,fillOpacity:.95,lineWidth:0},hollow:{r:3,strokeOpacity:.95,lineWidth:1},plus:{r:3,strokeOpacity:.95,lineWidth:3},diamond:{r:3,strokeOpacity:.95,lineWidth:1}},interval:{rect:{fillOpacity:.95},hollow:{fill:"",strokeOpacity:1,lineWidth:2}},area:{area:{fillOpacity:.85,lineWidth:0}},polygon:{polygon:{fillOpacity:.95}},cell:{cell:{fillOpacity:.95},hollow:{fill:"",strokeOpacity:1,lineWidth:2}},rect:{rect:{fillOpacity:.95},hollow:{fill:"",strokeOpacity:1,lineWidth:2}},link:{link:{fill:"",strokeOpacity:1}},vector:{vector:{fillOpacity:1}},box:{box:{fillOpacity:.95,stroke:n,lineWidth:1}},text:{text:{fill:"#1D2129",fontSize:12,strokeWidth:0,connectorStroke:r,connectorStrokeOpacity:.45,connectorLineWidth:1,backgroundFill:r,backgroundFillOpacity:.15,backgroundPadding:[2,4],startMarkerSymbol:"circle",startMarkerSize:4,endMarkerSymbol:"circle",endMarkerSize:4},badge:{fill:"#1D2129",fillOpacity:.65,strokeWidth:0,fontSize:10,textAlign:"center",textBaseline:"middle",markerFill:r,markerFillOpacity:.25,markerStrokeOpacity:0}},lineX:{line:{stroke:r,strokeOpacity:.45,lineWidth:1}},lineY:{line:{stroke:r,strokeOpacity:.45,lineWidth:1}},rangeX:{range:{fill:r,fillOpacity:.15,lineWidth:0}},rangeY:{range:{fill:r,fillOpacity:.15,lineWidth:0}},connector:{connector:{stroke:r,strokeOpacity:.45,lineWidth:1,connectLength1:12,endMarker:!0,endMarkerSize:6,endMarkerFill:r,endMarkerFillOpacity:.95}},axis:{arrow:!1,gridLineDash:[3,4],gridLineWidth:.5,gridStroke:n,gridStrokeOpacity:h,labelAlign:"horizontal",labelFill:n,labelOpacity:u,labelFontSize:12,labelFontWeight:"normal",labelSpacing:a,line:!1,lineLineWidth:.5,lineStroke:n,lineStrokeOpacity:u,tickLength:4,tickLineWidth:1,tickStroke:n,tickOpacity:u,titleFill:n,titleOpacity:l,titleFontSize:12,titleFontWeight:"normal",titleSpacing:12,titleTransformOrigin:"center",lineArrowOffset:6,lineArrowSize:6},axisTop:{gridDirection:"positive",labelDirection:"negative",tickDirection:"negative",titlePosition:"top",titleSpacing:12,labelSpacing:4,titleTextBaseline:"middle"},axisBottom:{gridDirection:"negative",labelDirection:"positive",tickDirection:"positive",titlePosition:"bottom",titleSpacing:12,labelSpacing:4,titleTextBaseline:"bottom"},axisLeft:{gridDirection:"positive",labelDirection:"negative",labelSpacing:4,tickDirection:"negative",titlePosition:"left",titleSpacing:12,titleTextBaseline:"middle",titleDirection:"vertical",titleTransformOrigin:"center"},axisRight:{gridDirection:"negative",labelDirection:"positive",labelSpacing:4,tickDirection:"positive",titlePosition:"right",titleSpacing:12,titleTextBaseline:"top",titleDirection:"vertical",titleTransformOrigin:"center"},axisLinear:{girdClosed:!0,gridConnect:"arc",gridDirection:"negative",gridType:"surround",titlePosition:"top",titleSpacing:0},axisArc:{title:!1,titlePosition:"inner",line:!1,tick:!0,labelSpacing:4},axisRadar:{girdClosed:!0,gridStrokeOpacity:.3,gridType:"surround",label:!1,tick:!1,titlePosition:"start"},legendCategory:{backgroundFill:"transparent",itemBackgroundFill:"transparent",itemLabelFill:n,itemLabelFillOpacity:l,itemLabelFontSize:12,itemLabelFontWeight:"normal",itemMarkerFillOpacity:1,itemMarkerSize:8,itemSpacing:[a,a],itemValueFill:n,itemValueFillOpacity:.65,itemValueFontSize:12,itemValueFontWeight:"normal",navButtonFill:n,navButtonFillOpacity:.65,navPageNumFill:n,navPageNumFillOpacity:.45,navPageNumFontSize:12,padding:8,title:!1,titleFill:n,titleFillOpacity:.65,titleFontSize:12,titleFontWeight:"normal",titleSpacing:4,tickStroke:n,tickStrokeOpacity:.25,rowPadding:a,colPadding:o,maxRows:3,maxCols:3},legendContinuous:{handleHeight:12,handleLabelFill:n,handleLabelFillOpacity:u,handleLabelFontSize:12,handleLabelFontWeight:"normal",handleMarkerFill:n,handleMarkerFillOpacity:.6,handleMarkerLineWidth:1,handleMarkerStroke:n,handleMarkerStrokeOpacity:.25,handleWidth:10,labelFill:n,labelFillOpacity:u,labelFontSize:12,labelFontWeight:"normal",labelSpacing:3,tick:!0,tickLength:12,ribbonSize:12,ribbonFill:"#aaa",handle:!0,handleLabel:!1,handleShape:"slider",handleIconSize:12/1.8,indicator:!1,titleFontSize:12,titleSpacing:4,titleFontWeight:"normal",titleFillOpacity:l,tickStroke:n,tickStrokeOpacity:u},label:{fill:n,fillOpacity:.65,fontSize:12,fontWeight:"normal",stroke:void 0,offset:12,connectorStroke:n,connectorStrokeOpacity:.45,connectorLineWidth:1,connectorLength:12,connectorLength2:8,connectorDistance:4},innerLabel:{fill:e,fontSize:12,fillOpacity:.85,fontWeight:"normal",stroke:void 0,offset:0},htmlLabel:{fontSize:12,opacity:.65,color:n,fontWeight:"normal"},slider:{trackSize:16,trackFill:r,trackFillOpacity:1,selectionFill:t,selectionFillOpacity:.15,handleIconSize:10,handleIconFill:"#f7f7f7",handleIconFillOpacity:1,handleIconStroke:n,handleIconStrokeOpacity:.25,handleIconLineWidth:1,handleIconRadius:2,handleLabelFill:n,handleLabelFillOpacity:.45,handleLabelFontSize:12,handleLabelFontWeight:"normal"},scrollbar:{padding:[0,0,0,0],trackSize:6,isRound:!0,slidable:!0,scrollable:!0,trackFill:"#e5e5e5",trackFillOpacity:0,thumbFill:"#000",thumbFillOpacity:.15,thumbHighlightedFillOpacity:.2},title:{spacing:8,titleFill:n,titleFillOpacity:l,titleFontSize:16,titleFontWeight:"bold",titleTextBaseline:"top",subtitleFill:n,subtitleFillOpacity:c,subtitleFontSize:12,subtitleFontWeight:"normal",subtitleTextBaseline:"top"}}}const HLt={colorBlack:"#1D2129",colorWhite:"#ffffff",colorStroke:"#416180",colorDefault:"#1783FF",colorBackground:"transparent",category10:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F"],category20:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F","#AABA01","#BC7CFC","#237CBC","#2DE379","#CE8032","#FF7AF4","#545FD3","#AFE410","#D8C608","#FFA1E0"],padding1:8,padding2:12,padding3:20,alpha90:.9,alpha65:.65,alpha45:.45,alpha25:.25,alpha10:.1},XLt=DA(HLt),RA=t=>nt({},XLt,t);RA.props={};const pG=t=>nt({},RA(),{category10:"category10",category20:"category20"},t);pG.props={};const ULt={colorBlack:"#fff",colorWhite:"#000",colorStroke:"#416180",colorDefault:"#1783FF",colorBackground:"#141414",category10:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F"],category20:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F","#AABA01","#BC7CFC","#237CBC","#2DE379","#CE8032","#FF7AF4","#545FD3","#AFE410","#D8C608","#FFA1E0"],padding1:8,padding2:12,padding3:20,alpha90:.9,alpha65:.65,alpha45:.45,alpha25:.25,alpha10:.25},qLt=DA(ULt),vG=t=>nt({},qLt,{tooltip:{crosshairsStroke:"#fff",crosshairsLineWidth:1,crosshairsStrokeOpacity:.25,css:{".g2-tooltip":{background:"#1f1f1f",opacity:.95},".g2-tooltip-title":{color:"#A6A6A6"},".g2-tooltip-list-item-name-label":{color:"#A6A6A6"},".g2-tooltip-list-item-value":{color:"#A6A6A6"}}}},t),gG=t=>Object.assign({},vG(),{category10:"category10",category20:"category20"},t);gG.props={};const ZLt={colorBlack:"#000",colorWhite:"#fff",colorStroke:"#888",colorDefault:"#4e79a7",colorBackground:"transparent",category10:["#4e79a7","#f28e2c","#e15759","#76b7b2","#59a14f","#edc949","#af7aa1","#ff9da7","#9c755f","#bab0ab"],category20:["#4e79a7","#f28e2c","#e15759","#76b7b2","#59a14f","#edc949","#af7aa1","#ff9da7","#9c755f","#bab0ab"],padding1:8,padding2:12,padding3:20,alpha90:.9,alpha65:.65,alpha45:.45,alpha25:.25,alpha10:.1},KLt=DA(ZLt),yG=t=>nt({},KLt,{text:{text:{fontSize:10}},axis:{gridLineDash:[0,0],gridLineWidth:1,gridStroke:"#ddd",gridStrokeOpacity:1,labelOpacity:1,labelStrokeOpacity:1,labelFontSize:10,line:!0,lineLineWidth:1,lineStroke:"#888",lineStrokeOpacity:1,tickLength:5,tickStrokeOpacity:1,titleOpacity:1,titleStrokeOpacity:1,titleFillOpacity:1,titleFontSize:11,titleFontWeight:"bold"},axisLeft:{gridFilter:(n,e)=>e!==0},axisRight:{gridFilter:(n,e)=>e!==0},legendCategory:{itemLabelFillOpacity:1,itemLabelFontSize:10,itemValueFillOpacity:1,itemValueFontSize:10,titleFillOpacity:1,titleFontSize:11,titleFontWeight:"bold"},legendContinuous:{handleLabelFontSize:10,labelFillOpacity:.45,labelFontSize:10},label:{fontSize:10},innerLabel:{fontSize:10},htmlLabel:{fontSize:10},slider:{handleLabelFontSize:10,trackFillOpacity:.05}},t);yG.props={};function QLt(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function dy(t,n){if((e=(t=n?t.toExponential(n-1):t.toExponential()).indexOf("e"))<0)return null;var e,r=t.slice(0,e);return[r.length>1?r[0]+r.slice(2):r,+t.slice(e+1)]}function JLt(t){return t=dy(Math.abs(t)),t?t[1]:NaN}function tIt(t,n){return function(e,r){for(var i=e.length,a=[],o=0,s=t[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),a.push(e.substring(i-=s,i+s)),!((l+=s+1)>r));)s=t[o=(o+1)%t.length];return a.reverse().join(n)}}function eIt(t){return function(n){return n.replace(/[0-9]/g,function(e){return t[+e]})}}var nIt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function l2(t){if(!(n=nIt.exec(t)))throw new Error("invalid format: "+t);var n;return new BA({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}l2.prototype=BA.prototype;function BA(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}BA.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function rIt(t){t:for(var n=t.length,e=1,r=-1,i;e<n;++e)switch(t[e]){case".":r=i=e;break;case"0":r===0&&(r=e),i=e;break;default:if(!+t[e])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var mG;function iIt(t,n){var e=dy(t,n);if(!e)return t+"";var r=e[0],i=e[1],a=i-(mG=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+dy(t,Math.max(0,n+a-1))[0]}function WI(t,n){var e=dy(t,n);if(!e)return t+"";var r=e[0],i=e[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const VI={"%":(t,n)=>(t*100).toFixed(n),b:t=>Math.round(t).toString(2),c:t=>t+"",d:QLt,e:(t,n)=>t.toExponential(n),f:(t,n)=>t.toFixed(n),g:(t,n)=>t.toPrecision(n),o:t=>Math.round(t).toString(8),p:(t,n)=>WI(t*100,n),r:WI,s:iIt,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function HI(t){return t}var XI=Array.prototype.map,UI=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function aIt(t){var n=t.grouping===void 0||t.thousands===void 0?HI:tIt(XI.call(t.grouping,Number),t.thousands+""),e=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?HI:eIt(XI.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"−":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(f){f=l2(f);var h=f.fill,d=f.align,p=f.sign,v=f.symbol,g=f.zero,y=f.width,m=f.comma,x=f.precision,b=f.trim,w=f.type;w==="n"?(m=!0,w="g"):VI[w]||(x===void 0&&(x=12),b=!0,w="g"),(g||h==="0"&&d==="=")&&(g=!0,h="0",d="=");var S=v==="$"?e:v==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",O=v==="$"?r:/[%p]/.test(w)?o:"",M=VI[w],A=/[defgprs%]/.test(w);x=x===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x));function T(C){var P=S,_=O,k,I,L;if(w==="c")_=M(C)+_,C="";else{C=+C;var F=C<0||1/C<0;if(C=isNaN(C)?l:M(Math.abs(C),x),b&&(C=rIt(C)),F&&+C==0&&p!=="+"&&(F=!1),P=(F?p==="("?p:s:p==="-"||p==="("?"":p)+P,_=(w==="s"?UI[8+mG/3]:"")+_+(F&&p==="("?")":""),A){for(k=-1,I=C.length;++k<I;)if(L=C.charCodeAt(k),48>L||L>57){_=(L===46?i+C.slice(k+1):C.slice(k))+_,C=C.slice(0,k);break}}}m&&!g&&(C=n(C,1/0));var B=P.length+C.length+_.length,D=B<y?new Array(y-B+1).join(h):"";switch(m&&g&&(C=n(D+C,D.length?y-_.length:1/0),D=""),d){case"<":C=P+C+_+D;break;case"=":C=P+D+C+_;break;case"^":C=D.slice(0,B=D.length>>1)+P+C+_+D.slice(B);break;default:C=D+P+C+_;break}return a(C)}return T.toString=function(){return f+""},T}function u(f,h){var d=c((f=l2(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(JLt(h)/3)))*3,v=Math.pow(10,-p),g=UI[8+p/3];return function(y){return d(v*y)+g}}return{format:c,formatPrefix:u}}var mv,ms;oIt({thousands:",",grouping:[3],currency:["$",""]});function oIt(t){return mv=aIt(t),ms=mv.format,mv.formatPrefix,mv}var sIt=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};function lIt(t){return class extends XM{constructor(n){super(n),this.descriptor=t}connectedCallback(){var n,e;(e=(n=this.descriptor).render)===null||e===void 0||e.call(n,this.attributes,this)}update(n={}){var e,r;this.attr(nt({},this.attributes,n)),(r=(e=this.descriptor).render)===null||r===void 0||r.call(e,this.attributes,this)}}}function qI(t,n,e){return t.querySelector(n)?Ot(t).select(n):Ot(t).append(e)}function jm(t){return Array.isArray(t)?t.join(", "):`${t||""}`}function xG(t,n){const e={display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center"};let{flexDirection:r,justifyContent:i,alignItems:a}=e;const o={top:["row","flex-start","center"],bottom:["row","flex-start","center"],left:["column","center","center"],right:["column","center","center"],center:["column","center","center"]};return t in o&&([r,i,a]=o[t]),Object.assign({display:"flex",flexDirection:r,justifyContent:i,alignItems:a},n)}class bG extends yCt{get child(){var n;return(n=this.children)===null||n===void 0?void 0:n[0]}update(n){var e;this.attr(n);const{subOptions:r}=n;(e=this.child)===null||e===void 0||e.update(r)}}class cIt extends bG{update(n){var e;const{subOptions:r}=n;this.attr(n),(e=this.child)===null||e===void 0||e.update(r)}}function da(t,n){var e;return(e=t.filter(r=>r.getOptions().name===n))===null||e===void 0?void 0:e[0]}function uIt(t){return t==="horizontal"||t===0}function fIt(t){return t==="vertical"||t===-Math.PI/2}function wG(t,n,e){const{bbox:r}=t,{position:i="top",size:a,length:o}=n,s=["top","bottom","center"].includes(i),[l,c]=s?[r.height,r.width]:[r.width,r.height],{defaultSize:u,defaultLength:f}=e.props,h=a||u||l,d=o||f||c,p=s?"horizontal":"vertical",[v,g]=s?[d,h]:[h,d];return{orientation:p,width:v,height:g,size:h,length:d}}function hIt(t){return t.find(n=>n.getOptions().domain.length>0).getOptions().domain}function zm(t){const n=["arrow","crosshairs","grid","handle","handleLabel","indicator","label","line","tick","tip","title","trunc"],{style:e}=t,r=sIt(t,["style"]),i={};return Object.entries(r).forEach(([a,o])=>{n.includes(a)?i[`show${us(a)}`]=o:i[a]=o}),Object.assign(Object.assign({},i),e)}var SG=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};function OG(t,n){const{eulerAngles:e,origin:r}=n;r&&t.setOrigin(r),e&&t.rotate(e[0],e[1],e[2])}function MG(t){const{innerWidth:n,innerHeight:e,depth:r}=t.getOptions();return[n,e,r]}function dIt(t,n){const{width:e,height:r}=n.getOptions();return i=>{if(!wz(n))return i;const a=t==="bottom"?[i,1]:[0,i],o=n.map(a);if(t==="bottom"){const s=o[0];return new eo({domain:[0,e],range:[0,1]}).map(s)}else if(t==="left"){const s=o[1];return new eo({domain:[0,r],range:[0,1]}).map(s)}return i}}function pIt(t,n,e){if(t.getTicks)return t.getTicks();if(!e)return n;const[r,i]=Wa(n,o=>+o),{tickCount:a}=t.getOptions();return e(r,i,a)}function vIt(t,n){if(Fe(n))return d=>d;const e=n.getOptions(),{innerWidth:r,innerHeight:i,insetTop:a,insetBottom:o,insetLeft:s,insetRight:l}=e,[c,u,f]=t==="left"||t==="right"?[a,o,i]:[s,l,r],h=new eo({domain:[0,1],range:[c/f,1-u/f]});return d=>h.map(d)}function AG(t,n,e,r,i,a,o,s){var l;(e!==void 0||a!==void 0)&&t.update(Object.assign(Object.assign({},e&&{tickCount:e}),a&&{tickMethod:a}));const c=pIt(t,n,a),u=i?c.filter(i):c,f=y=>y instanceof Date?String(y):typeof y=="object"&&y?y:String(y),h=r||((l=t.getFormatter)===null||l===void 0?void 0:l.call(t))||f,d=vIt(o,s),p=dIt(o,s),v=y=>["top","bottom","center","outer"].includes(y),g=y=>["left","right"].includes(y);return Fe(s)||_e(s)?u.map((y,m,x)=>{var b,w;const S=((b=t.getBandWidth)===null||b===void 0?void 0:b.call(t,y))/2||0,O=d(t.map(y)+S);return{value:mm(s)&&o==="center"||_e(s)&&((w=t.getTicks)===null||w===void 0?void 0:w.call(t))&&v(o)||_e(s)&&g(o)?1-O:O,label:f(h(ey(y),m,x)),id:String(m)}}):u.map((y,m,x)=>{var b;const w=((b=t.getBandWidth)===null||b===void 0?void 0:b.call(t,y))/2||0,S=p(d(t.map(y)+w));return{value:g(o)?1-S:S,label:f(h(ey(y),m,x)),id:String(m)}})}function gIt(t,n,e="xy"){const[r,i,a]=MG(n);return e==="xy"?t.includes("bottom")||t.includes("top")?i:r:e==="xz"?t.includes("bottom")||t.includes("top")?a:r:t.includes("bottom")||t.includes("top")?i:a}function yIt(t=[],n){if(t.length>0)return t;const{labelAutoRotate:e,labelAutoHide:r,labelAutoEllipsis:i,labelAutoWrap:a}=n,o=[],s=(l,c)=>{c&&o.push(Object.assign(Object.assign({},l),c))};return s({type:"rotate",optionalAngles:[0,15,30,45,60,90]},e),s({type:"ellipsis",minLength:20},i),s({type:"hide"},r),s({type:"wrap",wordWrapWidth:100,maxLines:3,recoveryWhenFail:!0},a),o}function mIt(t,n,e,r,i){const{x:a,y:o,width:s,height:l}=n,c=[a+s/2,o+l/2],u=Math.min(s,l)/2,[f,h]=BM(i),[d,p]=MG(i),v=Math.min(d,p)/2,g={center:c,radius:u,startAngle:f,endAngle:h,gridLength:(r-e)*v};if(t==="inner"){const{insetLeft:y,insetTop:m}=i.getOptions();return Object.assign(Object.assign({},g),{center:[c[0]-y,c[1]-m],labelAlign:"perpendicular",labelDirection:"positive",tickDirection:"positive",gridDirection:"negative"})}return Object.assign(Object.assign({},g),{labelAlign:"parallel",labelDirection:"negative",tickDirection:"negative",gridDirection:"positive"})}function xIt(t,n,e){return Obt(n)||xm(n)?!1:t===void 0?!!e.getTicks:t}function bIt(t){const{depth:n}=t.getOptions();return n?{tickIsBillboard:!0,lineIsBillboard:!0,labelIsBillboard:!0,titleIsBillboard:!0,gridIsBillboard:!0}:{}}function wIt(t,n,e,r){const{x:i,y:a,width:o,height:s}=e;if(t==="bottom")return{startPos:[i,a],endPos:[i+o,a]};if(t==="left")return{startPos:[i+o,a+s],endPos:[i+o,a]};if(t==="right")return{startPos:[i,a+s],endPos:[i,a]};if(t==="top")return{startPos:[i,a+s],endPos:[i+o,a+s]};if(t==="center"){if(n==="vertical")return{startPos:[i,a],endPos:[i,a+s]};if(n==="horizontal")return{startPos:[i,a],endPos:[i+o,a]};if(typeof n=="number"){const[l,c]=r.getCenter(),[u,f]=bm(r),[h,d]=BM(r),p=Math.min(o,s)/2,{insetLeft:v,insetTop:g}=r.getOptions(),y=u*p,m=f*p,[x,b]=[l+i-v,c+a-g],[w,S]=[Math.cos(n),Math.sin(n)],O=[x+m*w,b+m*S],M=[x+y*w,b+y*S];return{startPos:O,endPos:M,gridClosed:d-h===360,gridCenter:[x,b],gridControlAngles:new Array(3).fill(0).map((A,T,C)=>(d-h)/(C.length-1)*T)}}}return{}}const SIt=t=>{const{order:n,size:e,position:r,orientation:i,labelFormatter:a,tickFilter:o,tickCount:s,tickMethod:l,important:c={},style:u={},indexBBox:f,title:h,grid:d=!1}=t,p=SG(t,["order","size","position","orientation","labelFormatter","tickFilter","tickCount","tickMethod","important","style","indexBBox","title","grid"]);return({scales:[v],value:g,coordinate:y,theme:m})=>{const{bbox:x}=g,{domain:b}=v.getOptions(),w=AG(v,b,s,a,o,l,r,y),S=f?w.map((_,k)=>{const I=f.get(k);return!I||I[0]!==_.label?_:Object.assign(Object.assign({},_),{bbox:I[1]})}):w,[O,M]=bm(y),A=mIt(r,x,O,M,y),{axis:T,axisArc:C={}}=m,P=zm(nt({},T,C,A,Object.assign(Object.assign({type:"arc",data:S,titleText:jm(h),grid:d},p),c)));return new wA({style:P4(P,["transform"])})}};function OIt(t,n,e,r,i,a){const o=e.axis,s=["top","right","bottom","left"].includes(i)?e[`axis${xM(i)}`]:e.axisLinear,l=t.getOptions().name,c=e[`axis${us(l)}`]||{};return Object.assign({},o,s,c)}function MIt(t,n,e,r,i,a){const o=OIt(t,n,e,r,i);return i==="center"?Object.assign(Object.assign(Object.assign(Object.assign({},o),{labelDirection:r==="right"?"negative":"positive"}),r==="center"?{labelTransform:"translate(50%,0)"}:null),{tickDirection:r==="right"?"negative":"positive",labelSpacing:r==="center"?0:4,titleSpacing:fIt(a)?10:0,tick:r==="center"?!1:void 0}):o}const AIt=t=>{const{direction:n="left",important:e={},labelFormatter:r,order:i,orientation:a,actualPosition:o,position:s,size:l,style:c={},title:u,tickCount:f,tickFilter:h,tickMethod:d,transform:p,indexBBox:v}=t,g=SG(t,["direction","important","labelFormatter","order","orientation","actualPosition","position","size","style","title","tickCount","tickFilter","tickMethod","transform","indexBBox"]);return({scales:[y],value:m,coordinate:x,theme:b})=>{const{bbox:w}=m,{domain:S}=y.getOptions(),O=MIt(y,x,b,n,s,a),M=Object.assign(Object.assign(Object.assign({},O),c),g),A=gIt(o||s,x,t.plane),T=wIt(s,a,w,x),C=bIt(x),P=AG(y,S,f,r,h,d,s,x),_=v?P.map((L,F)=>{const B=v.get(F);return!B||B[0]!==L.label?L:Object.assign(Object.assign({},L),{bbox:B[1]})}):P,k=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},M),{type:"linear",data:_,crossSize:l,titleText:jm(u),labelOverlap:yIt(p,M),grid:xIt(M.grid,x,y),gridLength:A,line:!0,indexBBox:v}),M.line?null:{lineOpacity:0}),T),C),e);return k.labelOverlap.find(L=>L.type==="hide")&&(k.crossSize=!1),new wA({className:"axis",style:zm(k)})}},EG=t=>n=>{const{labelFormatter:e,labelFilter:r=()=>!0}=n;return i=>{var a;const{scales:[o]}=i,s=((a=o.getTicks)===null||a===void 0?void 0:a.call(o))||o.getOptions().domain,l=typeof e=="string"?ms(e):e,c=(f,h,d)=>r(s[h],h,s),u=Object.assign(Object.assign({},n),{labelFormatter:l,labelFilter:c,scale:o});return t(u)(i)}},xs=EG(AIt),TG=EG(SIt);xs.props={defaultPosition:"center",defaultSize:45,defaultOrder:0,defaultCrossPadding:[12,12],defaultPadding:[12,12]};TG.props={defaultPosition:"outer",defaultOrientation:"vertical",defaultSize:45,defaultOrder:0,defaultCrossPadding:[12,12],defaultPadding:[12,12]};const CG=t=>(...n)=>{const e=xs(Object.assign({},{crossPadding:50},t))(...n);return OG(e,t),e};CG.props=Object.assign(Object.assign({},xs.props),{defaultPosition:"bottom"});const PG=t=>(...n)=>{const e=xs(Object.assign({},{crossPadding:10},t))(...n);return OG(e,t),e};PG.props=Object.assign(Object.assign({},xs.props),{defaultPosition:"left"});var EIt=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};function TIt(t){const n=t%(Math.PI*2);return n===Math.PI/2?{titleTransform:"translate(0, 50%)"}:n>-Math.PI/2&&n<Math.PI/2?{titleTransform:"translate(50%, 0)"}:n>Math.PI/2&&n<Math.PI*3/2?{titleTransform:"translate(-50%, 0)"}:{}}function CIt(t,n,e,r){const{radar:i}=t,[a]=r,o=a.getOptions().name,[s,l]=BM(e),{axisRadar:c={}}=n;return Object.assign(Object.assign({},c),{grid:o==="position",gridConnect:"line",gridControlAngles:new Array(i.count).fill(0).map((u,f)=>(l-s)/i.count*f)})}const kG=t=>{const{important:n={}}=t,e=EIt(t,["important"]);return r=>{const{theme:i,coordinate:a,scales:o}=r;return xs(Object.assign(Object.assign(Object.assign({},e),TIt(t.orientation)),{important:Object.assign(Object.assign({},CIt(t,i,a,o)),n)}))(r)}};kG.props=Object.assign(Object.assign({},xs.props),{defaultPosition:"center"});var PIt=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};function kIt(t,n){const e=da(t,"shape"),r=da(t,"color"),i=e?e.clone():null,a=[];for(const[s,l]of n){const c=s.type,f=((r==null?void 0:r.getOptions().domain.length)>0?r==null?void 0:r.getOptions().domain:l.data).map((h,d)=>{var p;return i?i.map(h||"point"):((p=s==null?void 0:s.style)===null||p===void 0?void 0:p.shape)||l.defaultShape||"point"});typeof c=="string"&&a.push([c,f])}if(a.length===0)return["point",["point"]];if(a.length===1||!e)return a[0];const{range:o}=e.getOptions();return a.map(([s,l])=>{let c=0;for(let u=0;u<a.length;u++){const f=o[u%o.length];l[u]===f&&c++}return[c/l.length,[s,l]]}).sort((s,l)=>l[0]-s[0])[0][1]}function _It(t,n){const{scales:e,library:r,markState:i}=n,[a,o]=kIt(e,i),{itemMarker:s,itemMarkerSize:l}=t,c=(h,d)=>{var p,v,g;const y=((g=(v=(p=r[`mark.${a}`])===null||p===void 0?void 0:p.props)===null||v===void 0?void 0:v.shape[h])===null||g===void 0?void 0:g.props.defaultMarker)||dmt(h.split(".")),m=typeof l=="function"?l(d):l;return()=>_Mt(y,{color:d.color})(0,0,m)},u=h=>`${o[h]}`;return da(e,"shape")&&!s?(h,d)=>c(u(d),h):typeof s=="function"?(h,d)=>{const p=s(h.id,d);return typeof p=="string"?c(p,h):p}:(h,d)=>c(s||u(d),h)}function LIt(t){const n=da(t,"opacity");if(n){const{range:e}=n.getOptions();return(r,i)=>e[i]}}function IIt(t,n){const e=da(t,"size");return e instanceof bj?e.map(NaN)*2:n}function FIt(t,n){const{labelFormatter:e=h=>`${h}`}=t,{scales:r,theme:i}=n,a=i.legendCategory.itemMarkerSize,o=IIt(r,a),s={itemMarker:_It(Object.assign(Object.assign({},t),{itemMarkerSize:o}),n),itemMarkerSize:o,itemMarkerOpacity:LIt(r)},l=typeof e=="string"?ms(e):e,c=da(r,"color"),u=hIt(r),f=c?h=>c.map(h):()=>n.theme.color;return Object.assign(Object.assign({},s),{data:u.map(h=>({id:h,label:l(h),color:f(h)}))})}function DIt(t,n,e){const{position:r}=n;if(r==="center"){const{bbox:o}=t,{width:s,height:l}=o;return{width:s,height:l}}const{width:i,height:a}=wG(t,n,e);return{width:i,height:a}}const NA=t=>{const{labelFormatter:n,layout:e,order:r,orientation:i,position:a,size:o,title:s,cols:l,itemMarker:c}=t,u=PIt(t,["labelFormatter","layout","order","orientation","position","size","title","cols","itemMarker"]),{gridRow:f}=u;return h=>{const{value:d,theme:p}=h,{bbox:v}=d,{width:g,height:y}=DIt(d,t,NA),m=xG(a,e),x=Object.assign(Object.assign(Object.assign(Object.assign({orientation:["right","left","center"].includes(a)?"vertical":"horizontal",width:g,height:y,layout:l!==void 0?"grid":"flex"},l!==void 0&&{gridCol:l}),f!==void 0&&{gridRow:f}),{titleText:jm(s)}),FIt(t,h)),{legendCategory:b={}}=p,w=zm(Object.assign({},b,x,u)),S=new cIt({style:Object.assign(Object.assign({x:v.x,y:v.y,width:v.width,height:v.height},m),{subOptions:w})});return S.appendChild(new nCt({className:"legend-category",style:w})),S}};NA.props={defaultPosition:"top",defaultOrder:1,defaultSize:40,defaultCrossPadding:[12,12],defaultPadding:[12,12]};var RIt=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};function BIt(t,n,e){return t.size=n,uIt(e)?t.height=n:t.width=n,t}function NIt(t,n,e){const{size:r}=n,i=wG(t,n,e);return BIt(i,r,i.orientation)}function $It(t){return n=>({value:n/t,label:String(n)})}function jIt(t,n,e,r,i){const a=n.thresholds,o=$It(r);return Object.assign(Object.assign({},t),{color:i,data:[e,...a,r].map(o)})}function zIt(t,n,e){const i=[-1/0,...n.thresholds,1/0].map((a,o)=>({value:o,label:a}));return Object.assign(Object.assign({},t),{data:i,color:e,labelFilter:(a,o)=>o>0&&o<i.length-1})}function c2(t){const{domain:n}=t.getOptions(),[e,r]=[n[0],B4(n)];return[e,r]}function GIt(t,n){const e=t.getOptions(),r=t.clone();return r.update(Object.assign(Object.assign({},e),{range:[Ha(n).toString()]})),r}function YIt(t,n,e,r,i,a){const{length:o}=t,s=e||r,l=i.color?a.legendContinuous.ribbonFill||"black":a.color,c=n||GIt(s,l),[u,f]=c2(c),[h,d]=c2([n,e,r].filter(p=>p!==void 0).find(p=>!(p instanceof EM)));return Object.assign(Object.assign({},t),{domain:[h,d],data:c.getTicks().map(p=>({value:p})),color:new Array(Math.floor(o)).fill(0).map((p,v)=>{const g=(f-u)/(o-1)*v+u,y=c.map(g)||l,m=r?r.map(g):1;return y.replace(/rgb[a]*\(([\d]{1,3}) *, *([\d]{1,3}) *, *([\d]{1,3})[\S\s]*\)/,(x,b,w,S)=>`rgba(${b}, ${w}, ${S}, ${m})`)})})}function WIt(t,n,e,r,i,a){const o=da(t,"color"),s=NIt(e,r,i);if(o instanceof dm){const{range:u}=o.getOptions(),[f,h]=c2(o);return o instanceof Pj||o instanceof _j?jIt(s,o,f,h,u):zIt(s,o,u)}const l=da(t,"size"),c=da(t,"opacity");return YIt(s,o,l,c,n,a)}const bs=t=>{const{labelFormatter:n,layout:e,order:r,orientation:i,position:a,size:o,title:s,style:l,crossPadding:c,padding:u}=t,f=RIt(t,["labelFormatter","layout","order","orientation","position","size","title","style","crossPadding","padding"]);return({scales:h,value:d,theme:p,scale:v})=>{const{bbox:g}=d,{x:y,y:m,width:x,height:b}=g,w=xG(a,e),{legendContinuous:S={}}=p,O=zm(Object.assign({},S,Object.assign(Object.assign({titleText:jm(s),labelAlign:"value",labelFormatter:typeof n=="string"?A=>ms(n)(A.label):n},WIt(h,v,d,t,bs,p)),l),f)),M=new bG({style:Object.assign(Object.assign({x:y,y:m,width:x,height:b},w),{subOptions:O})});return M.appendChild(new pCt({className:"legend-continuous",style:O})),M}};bs.props={defaultPosition:"top",defaultOrientation:"vertical",defaultOrder:1,defaultSize:60,defaultLength:200,defaultLegendSize:60,defaultPadding:[20,10],defaultCrossPadding:[12,12]};const _G=t=>(...n)=>bs(Object.assign({},{block:!0},t))(...n);_G.props=Object.assign(Object.assign({},bs.props),{defaultPosition:"top",defaultOrientation:"horizontal"});const $A=t=>n=>{const{scales:e}=n,r=da(e,"size");return bs(Object.assign({},{type:"size",data:r.getTicks().map((i,a)=>({value:i,label:String(i)}))},t))(n)};$A.props=Object.assign(Object.assign({},bs.props),{defaultPosition:"top",defaultOrientation:"horizontal"});const LG=t=>$A(Object.assign({},{block:!0},t));LG.props=Object.assign(Object.assign({},bs.props),{defaultPosition:"top",defaultOrientation:"horizontal"});var VIt=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};function ZI(t,n,e,r){switch(r){case"center":return{x:t+e/2,y:n,textAlign:"middle"};case"right":return{x:t+e,y:n,textAlign:"right"};default:return{x:t,y:n,textAlign:"left"}}}const HIt=lIt({render(t,n){const{width:e,title:r,subtitle:i,spacing:a=2,align:o="left"}=t,s=VIt(t,["width","title","subtitle","spacing","align"]),l=ct(s,"title"),c=ct(s,"subtitle"),f=qI(n,".title","text").attr("className","title").call(gt,Object.assign(Object.assign(Object.assign({},ZI(0,0,e,o)),{fontSize:14,textBaseline:"top",text:r}),l)).node().getLocalBounds();qI(n,".sub-title","text").attr("className","sub-title").call(h=>{if(!i)return h.node().remove();h.node().attr(Object.assign(Object.assign(Object.assign({},ZI(0,f.max[1]+a,e,o)),{fontSize:12,textBaseline:"top",text:i}),c))})}}),IG=t=>({value:n,theme:e})=>{const{x:r,y:i,width:a,height:o}=n.bbox;return new HIt({style:nt({},e.title,Object.assign({x:r,y:i,width:a,height:o},t))})};IG.props={defaultPosition:"top",defaultOrder:2,defaultSize:36,defaultCrossPadding:[20,20],defaultPadding:[12,12]};function XIt(t,n,e){return Math.min(e,Math.max(n,t))}function th(t){return!!t.getBandWidth}function pu(t,n,e){if(!th(t))return t.invert(n);const{adjustedRange:r}=t,{domain:i}=t.getOptions(),a=e?-1:0,o=t.getStep(),s=e?r:r.map(u=>u+o),l=Tmt(s,n),c=XIt(l+a,0,i.length-1);return i[c]}function Lo(t,n,e){if(!n)return t.getOptions().domain;if(!th(t)){const l=Va(n);if(!e)return l;const[c]=l,{range:u}=t.getOptions(),[f,h]=u,d=f>h?-1:1,p=t.invert(t.map(c)+d*e);return[c,p]}const{domain:r}=t.getOptions(),i=n[0],a=r.indexOf(i);if(e){const l=a+Math.round(r.length*e);return r.slice(a,l)}const o=n[n.length-1],s=r.indexOf(o);return r.slice(a,s+1)}function ng(t,n,e,r,i,a){const{x:o,y:s}=i,l=(d,p)=>{const[v,g]=a.invert(d);return[pu(o,v,p),pu(s,g,p)]},c=l([t,n],!0),u=l([e,r],!1),f=Lo(o,[c[0],u[0]]),h=Lo(s,[c[1],u[1]]);return[f,h]}function py(t,n){const[e,r]=t,i=a=>a.getStep?a.getStep():0;return[n.map(e),n.map(r)+i(n)]}function UIt(t,n,e){const{x:r,y:i}=n,[a,o]=t,s=py(a,r),l=py(o,i),c=[s[0],l[0]],u=[s[1],l[1]],[f,h]=e.map(c),[d,p]=e.map(u);return[f,h,d,p]}var qIt=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};function ZIt(t,n,e){const{x:r,y:i,width:a,height:o}=t;if(n==="left")return[r+a-e,i];if(n==="right")return[r,i];if(n==="bottom")return[r,i];if(n==="top")return[r,i+o-e]}const Zd=t=>{const{orientation:n,labelFormatter:e,size:r,style:i={},position:a}=t,o=qIt(t,["orientation","labelFormatter","size","style","position"]);return s=>{var l;const{scales:[c],value:u,theme:f,coordinate:h}=s,{bbox:d}=u,{width:p,height:v}=d,{slider:g={}}=f,y=((l=c.getFormatter)===null||l===void 0?void 0:l.call(c))||(M=>M+""),m=typeof e=="string"?ms(e):e,x=n==="horizontal",b=_e(h)&&x,{trackSize:w=g.trackSize}=i,[S,O]=ZIt(d,a,w);return new z8({className:"slider",style:Object.assign({},g,Object.assign(Object.assign({x:S,y:O,trackLength:x?p:v,orientation:n,formatter:M=>{const A=m||y,T=b?1-M:M,C=pu(c,T,!0);return A(C)},sparklineData:QIt(t,s)},i),o))})}};function KIt(t,n){const[e]=Array.from(t.entries()).filter(([i])=>i.type==="line"||i.type==="area").map(([i])=>{const{encode:a,slider:o}=i;if(o!=null&&o.x&&Object.keys(o.x).length===0){const s=l=>{const c=a[l];return[l,c?c.value:void 0]};return Object.fromEntries(n.map(s))}});if(!(e!=null&&e.series))return e==null?void 0:e.y;const r=e.series.reduce((i,a,o)=>(i[a]=i[a]||[],i[a].push(e.y[o]),i),{});return Object.values(r)}function QIt(t,n){const{markState:e}=n;return Id(t.sparklineData)?t.sparklineData:KIt(e,["y","series"])}Zd.props={defaultPosition:"bottom",defaultSize:24,defaultOrder:1,defaultCrossPadding:[12,12],defaultPadding:[12,12]};const FG=t=>Zd(Object.assign(Object.assign({},t),{orientation:"horizontal"}));FG.props=Object.assign(Object.assign({},Zd.props),{defaultPosition:"bottom"});const DG=t=>Zd(Object.assign(Object.assign({},t),{orientation:"vertical"}));DG.props=Object.assign(Object.assign({},Zd.props),{defaultPosition:"left"});var JIt=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};const Kd=t=>{const{orientation:n,labelFormatter:e,style:r}=t,i=JIt(t,["orientation","labelFormatter","style"]);return({scales:[a],value:o,theme:s})=>{const{bbox:l}=o,{x:c,y:u,width:f,height:h}=l,{scrollbar:d={}}=s,{ratio:p,range:v}=a.getOptions(),g=n==="horizontal"?f:h,y=g/p,[m,x]=v,b=x>m?0:1;return new GEt({className:"g2-scrollbar",style:Object.assign({},d,Object.assign(Object.assign(Object.assign(Object.assign({},r),{x:c,y:u,trackLength:g,value:b}),i),{orientation:n,contentLength:y,viewportLength:g}))})}};Kd.props={defaultPosition:"bottom",defaultSize:24,defaultOrder:1,defaultCrossPadding:[12,12],defaultPadding:[12,12]};const RG=t=>Kd(Object.assign(Object.assign({},t),{orientation:"horizontal"}));RG.props=Object.assign(Object.assign({},Kd.props),{defaultPosition:"bottom"});const BG=t=>Kd(Object.assign(Object.assign({},t),{orientation:"vertical"}));BG.props=Object.assign(Object.assign({},Kd.props),{defaultPosition:"left"});const NG=t=>()=>new $n;NG.props={};const jA=(t,n)=>{const{coordinate:r}=n;return(i,a,o)=>{const[s]=i,{transform:l="",fillOpacity:c=1,strokeOpacity:u=1,opacity:f=1}=s.style,[h,d]=_e(r)?["left bottom",`scale(1, ${1e-4})`]:["left top",`scale(${1e-4}, 1)`],p=[{transform:`${l} ${d}`.trimStart(),transformOrigin:h,fillOpacity:0,strokeOpacity:0,opacity:0},{transform:`${l} ${d}`.trimStart(),transformOrigin:h,fillOpacity:c,strokeOpacity:u,opacity:f,offset:.01},{transform:`${l} scale(1, 1)`.trimStart(),transformOrigin:h,fillOpacity:c,strokeOpacity:u,opacity:f}];return s.animate(p,Object.assign(Object.assign({},o),t))}},tFt=(t,n)=>{const{coordinate:r}=n;return(i,a,o)=>{const[s]=i,{transform:l="",fillOpacity:c=1,strokeOpacity:u=1,opacity:f=1}=s.style,[h,d]=_e(r)?["left bottom",`scale(1, ${1e-4})`]:["left top",`scale(${1e-4}, 1)`],p=[{transform:`${l} scale(1, 1)`.trimStart(),transformOrigin:h},{transform:`${l} ${d}`.trimStart(),transformOrigin:h,fillOpacity:c,strokeOpacity:u,opacity:f,offset:.99},{transform:`${l} ${d}`.trimStart(),transformOrigin:h,fillOpacity:0,strokeOpacity:0,opacity:0}];return s.animate(p,Object.assign(Object.assign({},o),t))}},$G=(t,n)=>{const{coordinate:r}=n;return o6.registerProperty({name:"scaleInYRadius",inherits:!1,initialValue:"",interpolable:!0,syntax:lt.NUMBER}),(i,a,o)=>{const[s]=i,l=u=>{const{__data__:f,style:h}=u,{radius:d=0,inset:p=0,fillOpacity:v=1,strokeOpacity:g=1,opacity:y=1}=h,{points:m,y:x,y1:b}=f,w=$l(r,m,[x,b]),{innerRadius:S,outerRadius:O}=w,M=gm().cornerRadius(d).padAngle(p*Math.PI/180),A=new lr({}),T=r.getCenter(),C=k=>{A.attr({d:M(k),transform:`translate(${T[0]}, ${T[1]})`});const I=YM(A);return A.style.transform="",I},P=[{scaleInYRadius:S+1e-4,fillOpacity:0,strokeOpacity:0,opacity:0},{scaleInYRadius:S+1e-4,fillOpacity:v,strokeOpacity:g,opacity:y,offset:.01},{scaleInYRadius:O,fillOpacity:v,strokeOpacity:g,opacity:y}],_=u.animate(P,Object.assign(Object.assign({},o),t));return _.onframe=function(){u.style.path=C(Object.assign(Object.assign({},w),{outerRadius:Number(u.style.scaleInYRadius)}))},_.onfinish=function(){u.style.path=C(Object.assign(Object.assign({},w),{outerRadius:O}))},_},c=u=>{const{style:f}=u,{transform:h="",fillOpacity:d=1,strokeOpacity:p=1,opacity:v=1}=f,[g,y]=_e(r)?["left top",`scale(${1e-4}, 1)`]:["left bottom",`scale(1, ${1e-4})`],m=[{transform:`${h} ${y}`.trimStart(),transformOrigin:g,fillOpacity:0,strokeOpacity:0,opacity:0},{transform:`${h} ${y}`.trimStart(),transformOrigin:g,fillOpacity:d,strokeOpacity:p,opacity:v,offset:.01},{transform:`${h} scale(1, 1)`.trimStart(),transformOrigin:g,fillOpacity:d,strokeOpacity:p,opacity:v}];return u.animate(m,Object.assign(Object.assign({},o),t))};return Fe(r)?l(s):c(s)}},eFt=(t,n)=>{const{coordinate:r}=n;return(i,a,o)=>{const[s]=i,{transform:l="",fillOpacity:c=1,strokeOpacity:u=1,opacity:f=1}=s.style,[h,d]=_e(r)?["left top",`scale(${1e-4}, 1)`]:["left bottom",`scale(1, ${1e-4})`],p=[{transform:`${l} scale(1, 1)`.trimStart(),transformOrigin:h},{transform:`${l} ${d}`.trimStart(),transformOrigin:h,fillOpacity:c,strokeOpacity:u,opacity:f,offset:.99},{transform:`${l} ${d}`.trimStart(),transformOrigin:h,fillOpacity:0,strokeOpacity:0,opacity:0}];return s.animate(p,Object.assign(Object.assign({},o),t))}},jG=t=>(n,e,r)=>{const[i]=n,{fillOpacity:a=1,strokeOpacity:o=1,opacity:s=1}=i.style,l=[{fillOpacity:0,strokeOpacity:0,opacity:0},{fillOpacity:a,strokeOpacity:o,opacity:s}];return i.animate(l,Object.assign(Object.assign({},r),t))};jG.props={};const zG=t=>(n,e,r)=>{const[i]=n,{fillOpacity:a=1,strokeOpacity:o=1,opacity:s=1}=i.style,l=[{fillOpacity:a,strokeOpacity:o,opacity:s},{fillOpacity:0,strokeOpacity:0,opacity:0}];return i.animate(l,Object.assign(Object.assign({},r),t))};zG.props={};function vu(t,n){const e={};for(const r of n){const i=t.style[r];i&&(e[r]=i)}return e}const gu=["fill","stroke","fillOpacity","strokeOpacity","opacity","lineWidth"];function u2(t){const{min:n,max:e}=t.getLocalBounds(),[r,i]=n,[a,o]=e,s=o-i,l=a-r;return[r,i,l,s]}function nFt(t){const[n,e,r,i]=t;return`
    M ${n} ${e}
    L ${n+r} ${e}
    L ${n+r} ${e+i}
    L ${n} ${e+i}
    Z
  `}function rFt(t,n){const[e,r,i,a]=u2(t),o=a/i,s=Math.ceil(Math.sqrt(n/o)),l=Math.ceil(n/s),c=[],u=a/l;let f=0,h=n;for(;h>0;){const d=Math.min(h,s),p=i/d;for(let v=0;v<d;v++){const g=e+v*p,y=r+f*u;c.push(nFt([g,y,p,u]))}h-=d,f+=1}return c}function iFt(t="pack"){return typeof t=="function"?t:rFt}function aFt(t,n,e){const[r,i,a,o]=u2(t),{transform:s}=t.style,{transform:l}=n.style;GG(n,t);const[c,u,f,h]=u2(n),d=r-c,p=i-u,v=a/f,g=o/h,y=[Object.assign({transform:`${s?s+" ":""}translate(${d}, ${p}) scale(${v}, ${g})`},vu(t,gu)),Object.assign({transform:`${l?l+" ":""}translate(0, 0) scale(1, 1)`},vu(n,gu))];return n.animate(y,e)}function GG(t,n){t.__data__=n.__data__,t.className=n.className,t.markType=n.markType,n.parentNode.replaceChild(t,n)}function oFt(t,n){const{nodeName:e}=t;if(e==="path")return t;const r=new lr({style:Object.assign(Object.assign({},vu(t,gu)),{d:n})});return GG(r,t),r}function KI(t,n){const e=t.indexOf(n),r=t.lastIndexOf(n);return e===r}function sFt(t){return!KI(t,"m")||!KI(t,"M")}function QI(t){const n=YM(t);if(n&&!sFt(n))return n}function zA(t,n,e,r){const{nodeName:i}=n,{nodeName:a}=e,o=QI(n),s=QI(e);if(i===a&&i!=="path"||(o===void 0||s===void 0))return aFt(n,e,r);const u=oFt(t,o),f=[Object.assign({path:o},vu(n,gu)),Object.assign({path:s},vu(e,gu))],h=u.animate(f,r);return h.onfinish=()=>{u.style.transform="none",bM(u,e)},u.style.transform="none",h}function lFt(t,n,e,r){t.style.visibility="hidden";const i=r(t,n.length);return n.map((a,o)=>{const s=new lr({style:Object.assign({path:i[o]},vu(t,gu))});return zA(a,s,a,e)})}function cFt(t,n,e,r){const i=r(n,t.length),{fillOpacity:a=1,strokeOpacity:o=1,opacity:s=1}=n.style,l=[{fillOpacity:0,strokeOpacity:0,opacity:0},{fillOpacity:0,strokeOpacity:0,opacity:0,offset:.99},{fillOpacity:a,strokeOpacity:o,opacity:s}],c=n.animate(l,e);return[...t.map((f,h)=>{const d=new lr({style:{path:i[h],fill:n.style.fill}});return zA(f,f,d,e)}),c]}const YG=t=>(n,e,r)=>{const i=iFt(t.split),a=Object.assign(Object.assign({},r),t),{length:o}=n,{length:s}=e;if(o===1&&s===1||o>1&&s>1){const[l]=n,[c]=e;return zA(l,l,c,a)}if(o===1&&s>1){const[l]=n;return lFt(l,e,a,i)}if(o>1&&s===1){const[l]=e;return cFt(n,l,a,i)}return null};YG.props={};const WG=(t,n)=>{o6.registerProperty({name:"waveInArcAngle",inherits:!1,initialValue:"",interpolable:!0,syntax:lt.NUMBER});const{coordinate:r}=n;return(i,a,o)=>{const[s]=i;if(!Fe(r))return jA(t,n)(i,a,o);const l=r.getCenter(),{__data__:c,style:u}=s,{radius:f=0,inset:h=0,fillOpacity:d=1,strokeOpacity:p=1,opacity:v=1}=u,{points:g,y,y1:m}=c,x=gm().cornerRadius(f).padAngle(h*Math.PI/180),b=$l(r,g,[y,m]),{startAngle:w,endAngle:S}=b,O=new lr({}),M=C=>{O.attr({d:x(C),transform:`translate(${l[0]}, ${l[1]})`});const P=YM(O);return O.style.transform="",P},A=[{waveInArcAngle:w+1e-4,fillOpacity:0,strokeOpacity:0,opacity:0},{waveInArcAngle:w+1e-4,fillOpacity:d,strokeOpacity:p,opacity:v,offset:.01},{waveInArcAngle:S,fillOpacity:d,strokeOpacity:p,opacity:v}],T=s.animate(A,Object.assign(Object.assign({},o),t));return T.onframe=function(){s.style.path=M(Object.assign(Object.assign({},b),{endAngle:Number(s.style.waveInArcAngle)}))},T.onfinish=function(){s.style.path=M(Object.assign(Object.assign({},b),{endAngle:S}))},T}};WG.props={};const uFt=t=>(e,r,i)=>{const[a]=e,{transform:o="",fillOpacity:s=1,strokeOpacity:l=1,opacity:c=1}=a.style,u="center center",f=[{transform:`${o} scale(${1e-4})`.trimStart(),transformOrigin:u,fillOpacity:0,strokeOpacity:0,opacity:0},{transform:`${o} scale(${1e-4})`.trimStart(),transformOrigin:u,fillOpacity:s,strokeOpacity:l,opacity:c,offset:.01},{transform:`${o} scale(1)`.trimStart(),transformOrigin:u,fillOpacity:s,strokeOpacity:l,opacity:c}];return a.animate(f,Object.assign(Object.assign({},i),t))},fFt=t=>(e,r,i)=>{const[a]=e,{transform:o="",fillOpacity:s=1,strokeOpacity:l=1,opacity:c=1}=a.style,u="center center",f=[{transform:`${o} scale(1)`.trimStart(),transformOrigin:u},{transform:`${o} scale(${1e-4})`.trimStart(),transformOrigin:u,fillOpacity:s,strokeOpacity:l,opacity:c,offset:.99},{transform:`${o} scale(${1e-4})`.trimStart(),transformOrigin:u,fillOpacity:0,strokeOpacity:0,opacity:0}];return a.animate(f,Object.assign(Object.assign({},i),t))},VG=t=>(n,e,r)=>{var i,a;const[o]=n,s=((a=(i=o).getTotalLength)===null||a===void 0?void 0:a.call(i))||0,l=[{lineDash:[0,s]},{lineDash:[s,0]}];return o.animate(l,Object.assign(Object.assign({},r),t))};VG.props={};const HG=(t,n)=>(e,r,i)=>{const[a]=e,{height:o,width:s}=a.getBoundingClientRect(),l=new lr({style:{path:`M0,0L${s},0L${s},${o}L0,${o}Z`}});return a.appendChild(l),a.style.clipPath=l,jA(t,n)([l],r,i)};HG.props={};const XG=(t,n)=>(e,r,i)=>{const[a]=e,{height:o,width:s}=a.getBoundingClientRect(),l=new lr({style:{path:`M0,0L${s},0L${s},${o}L0,${o}Z`}});return a.appendChild(l),a.style.clipPath=l,$G(t,n)([l],r,i)};XG.props={};const JI="main-layer",f2="label-layer",_a="element",h2="view",vy="plot",tF="component",d2="label",eF="area";var hFt=function(t,n,e){return t<n?n:t>e?e:t};const dFt=hFt;function pFt(t,n){var e=n.r;t.arc(e,e,e,0,Math.PI*2,!1)}function vFt(t,n){var e=n.rx,r=n.ry,i=e,a=r;if(t.ellipse)t.ellipse(i,a,i,a,0,0,Math.PI*2,!1);else{var o=i>a?i:a,s=i>a?1:i/a,l=i>a?a/i:1;t.save(),t.scale(s,l),t.arc(o,o,o,0,Math.PI*2)}}function gFt(t,n){var e=n.x1,r=n.y1,i=n.x2,a=n.y2,o=n.defX,s=o===void 0?0:o,l=n.defY,c=l===void 0?0:l,u=n.markerStart,f=n.markerEnd,h=n.markerStartOffset,d=n.markerEndOffset,p=0,v=0,g=0,y=0,m=0,x,b;u&&Zt(u)&&h&&(x=i-e,b=a-r,m=Math.atan2(b,x),p=Math.cos(m)*(h||0),v=Math.sin(m)*(h||0)),f&&Zt(f)&&d&&(x=e-i,b=r-a,m=Math.atan2(b,x),g=Math.cos(m)*(d||0),y=Math.sin(m)*(d||0)),t.moveTo(e-s+p,r-c+v),t.lineTo(i-s+g,a-c+y)}function yFt(t,n){var e=n.defX,r=e===void 0?0:e,i=n.defY,a=i===void 0?0:i,o=n.markerStart,s=n.markerEnd,l=n.markerStartOffset,c=n.markerEndOffset,u=n.path,f=u.absolutePath,h=u.segments,d=0,p=0,v=0,g=0,y=0,m,x;if(o&&Zt(o)&&l){var b=R(o.parentNode.getStartTangent(),2),w=b[0],S=b[1];m=w[0]-S[0],x=w[1]-S[1],y=Math.atan2(x,m),d=Math.cos(y)*(l||0),p=Math.sin(y)*(l||0)}if(s&&Zt(s)&&c){var O=R(s.parentNode.getEndTangent(),2),w=O[0],S=O[1];m=w[0]-S[0],x=w[1]-S[1],y=Math.atan2(x,m),v=Math.cos(y)*(c||0),g=Math.sin(y)*(c||0)}for(var M=0;M<f.length;M++){var A=f[M],T=A[0],C=f[M+1],P=M===0&&(d!==0||p!==0),_=(M===f.length-1||C&&(C[0]==="M"||C[0]==="Z"))&&v!==0&&g!==0;switch(T){case"M":P?(t.moveTo(A[1]-r+d,A[2]-a+p),t.lineTo(A[1]-r,A[2]-a)):t.moveTo(A[1]-r,A[2]-a);break;case"L":_?t.lineTo(A[1]-r+v,A[2]-a+g):t.lineTo(A[1]-r,A[2]-a);break;case"Q":t.quadraticCurveTo(A[1]-r,A[2]-a,A[3]-r,A[4]-a),_&&t.lineTo(A[3]-r+v,A[4]-a+g);break;case"C":t.bezierCurveTo(A[1]-r,A[2]-a,A[3]-r,A[4]-a,A[5]-r,A[6]-a),_&&t.lineTo(A[5]-r+v,A[6]-a+g);break;case"A":{var k=h[M].arcParams,I=k.cx,L=k.cy,F=k.rx,B=k.ry,D=k.startAngle,N=k.endAngle,j=k.xRotation,Y=k.sweepFlag;if(t.ellipse)t.ellipse(I-r,L-a,F,B,j,D,N,!!(1-Y));else{var W=F>B?F:B,V=F>B?1:F/B,H=F>B?B/F:1;t.translate(I-r,L-a),t.rotate(j),t.scale(V,H),t.arc(0,0,W,D,N,!!(1-Y)),t.scale(1/V,1/H),t.rotate(-j),t.translate(-(I-r),-(L-a))}_&&t.lineTo(A[6]-r+v,A[7]-a+g);break}case"Z":t.closePath();break}}}function mFt(t,n){var e=n.defX,r=e===void 0?0:e,i=n.defY,a=i===void 0?0:i,o=n.markerStart,s=n.markerEnd,l=n.markerStartOffset,c=n.markerEndOffset,u=n.points.points,f=u.length,h=u[0][0]-r,d=u[0][1]-a,p=u[f-1][0]-r,v=u[f-1][1]-a,g=0,y=0,m=0,x=0,b=0,w,S;o&&Zt(o)&&l&&(w=u[1][0]-u[0][0],S=u[1][1]-u[0][1],b=Math.atan2(S,w),g=Math.cos(b)*(l||0),y=Math.sin(b)*(l||0)),s&&Zt(s)&&c&&(w=u[f-1][0]-u[0][0],S=u[f-1][1]-u[0][1],b=Math.atan2(S,w),m=Math.cos(b)*(c||0),x=Math.sin(b)*(c||0)),t.moveTo(h+(g||m),d+(y||x));for(var O=1;O<f-1;O++){var M=u[O];t.lineTo(M[0]-r,M[1]-a)}t.lineTo(p,v)}function xFt(t,n){var e=n.defX,r=e===void 0?0:e,i=n.defY,a=i===void 0?0:i,o=n.markerStart,s=n.markerEnd,l=n.markerStartOffset,c=n.markerEndOffset,u=n.points.points,f=u.length,h=u[0][0]-r,d=u[0][1]-a,p=u[f-1][0]-r,v=u[f-1][1]-a,g=0,y=0,m=0,x=0,b=0,w,S;o&&Zt(o)&&l&&(w=u[1][0]-u[0][0],S=u[1][1]-u[0][1],b=Math.atan2(S,w),g=Math.cos(b)*(l||0),y=Math.sin(b)*(l||0)),s&&Zt(s)&&c&&(w=u[f-2][0]-u[f-1][0],S=u[f-2][1]-u[f-1][1],b=Math.atan2(S,w),m=Math.cos(b)*(c||0),x=Math.sin(b)*(c||0)),t.moveTo(h+g,d+y);for(var O=1;O<f-1;O++){var M=u[O];t.lineTo(M[0]-r,M[1]-a)}t.lineTo(p+m,v+x)}function bFt(t,n){var e=n.radius,r=n.width,i=n.height,a=r,o=i,s=e&&e.some(function(g){return g!==0});if(!s)t.rect(0,0,a,o);else{var l=r>0?1:-1,c=i>0?1:-1,u=l+c===0,f=R(e.map(function(g){return dFt(g,0,Math.min(Math.abs(a)/2,Math.abs(o)/2))}),4),h=f[0],d=f[1],p=f[2],v=f[3];t.moveTo(l*h,0),t.lineTo(a-l*d,0),d!==0&&t.arc(a-l*d,c*d,d,-c*Math.PI/2,l>0?0:Math.PI,u),t.lineTo(a,o-c*p),p!==0&&t.arc(a-l*p,o-c*p,p,l>0?0:Math.PI,c>0?Math.PI/2:1.5*Math.PI,u),t.lineTo(l*v,o),v!==0&&t.arc(l*v,o-c*v,v,c>0?Math.PI/2:-Math.PI/2,l>0?Math.PI:0,u),t.lineTo(0,c*h),h!==0&&t.arc(l*h,c*h,h,l>0?Math.PI:0,c>0?Math.PI*1.5:Math.PI/2,u)}}var wFt=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.name="canvas-path-generator",e}return n.prototype.init=function(){var e,r=(e={},e[K.CIRCLE]=pFt,e[K.ELLIPSE]=vFt,e[K.RECT]=bFt,e[K.LINE]=gFt,e[K.POLYLINE]=xFt,e[K.POLYGON]=mFt,e[K.PATH]=yFt,e[K.TEXT]=void 0,e[K.GROUP]=void 0,e[K.IMAGE]=void 0,e[K.HTML]=void 0,e[K.MESH]=void 0,e);this.context.pathGeneratorFactory=r},n.prototype.destroy=function(){delete this.context.pathGeneratorFactory},n}(vs),SFt=function(t,n,e){return t<n?n:t>e?e:t};const OFt=SFt;function xv(t,n,e){var r=t*Math.cos(e)-n*Math.sin(e),i=t*Math.sin(e)+n*Math.cos(e);return{x:r,y:i}}function UG(t,n,e,r,i,a,o,s,l,c){var u=t,f=n,h=e,d=r,p=s,v=l,g=Math.PI*120/180,y=Math.PI/180*(+i||0),m=[],x,b,w,S,O;if(c)b=c[0],w=c[1],S=c[2],O=c[3];else{x=xv(u,f,-y),u=x.x,f=x.y,x=xv(p,v,-y),p=x.x,v=x.y;var M=(u-p)/2,A=(f-v)/2,T=M*M/(h*h)+A*A/(d*d);T>1&&(T=Math.sqrt(T),h*=T,d*=T);var C=h*h,P=d*d,_=(a===o?-1:1)*Math.sqrt(Math.abs((C*P-C*A*A-P*M*M)/(C*A*A+P*M*M)));S=_*h*A/d+(u+p)/2,O=_*-d*M/h+(f+v)/2,b=Math.asin(((f-O)/d*Math.pow(10,9)>>0)/Math.pow(10,9)),w=Math.asin(((v-O)/d*Math.pow(10,9)>>0)/Math.pow(10,9)),b=u<S?Math.PI-b:b,w=p<S?Math.PI-w:w,b<0&&(b=Math.PI*2+b),w<0&&(w=Math.PI*2+w),o&&b>w&&(b-=Math.PI*2),!o&&w>b&&(w-=Math.PI*2)}var k=w-b;if(Math.abs(k)>g){var I=w,L=p,F=v;w=b+g*(o&&w>b?1:-1),p=S+h*Math.cos(w),v=O+d*Math.sin(w),m=UG(p,v,h,d,i,0,o,L,F,[w,I,S,O])}k=w-b;var B=Math.cos(b),D=Math.sin(b),N=Math.cos(w),j=Math.sin(w),Y=Math.tan(k/4),W=4/3*h*Y,V=4/3*d*Y,H=[u,f],Q=[u+W*D,f-V*B],Z=[p+W*j,v-V*N],q=[p,v];if(Q[0]=2*H[0]-Q[0],Q[1]=2*H[1]-Q[1],c)return Q.concat(Z,q,m);m=Q.concat(Z,q,m);for(var rt=[],it=0,ft=m.length;it<ft;it+=1)rt[it]=it%2?xv(m[it-1],m[it],y).y:xv(m[it],m[it+1],y).x;return rt}function el(t,n,e,r){var i=t-e,a=n-r;return Math.sqrt(i*i+a*a)}var MFt=1e-4;function qG(t,n,e,r,i,a){var o=-1,s=1/0,l=[e,r],c=20;a&&a>200&&(c=a/10);for(var u=1/c,f=u/10,h=0;h<=c;h++){var d=h*u,p=[i.apply(void 0,X([],R(t.concat([d])),!1)),i.apply(void 0,X([],R(n.concat([d])),!1))],v=el(l[0],l[1],p[0],p[1]);v<s&&(o=d,s=v)}if(o===0)return{x:t[0],y:n[0]};if(o===1){var g=t.length;return{x:t[g-1],y:n[g-1]}}s=1/0;for(var h=0;h<32&&!(f<MFt);h++){var y=o-f,m=o+f,p=[i.apply(void 0,X([],R(t.concat([y])),!1)),i.apply(void 0,X([],R(n.concat([y])),!1))],v=el(l[0],l[1],p[0],p[1]);if(y>=0&&v<s)o=y,s=v;else{var x=[i.apply(void 0,X([],R(t.concat([m])),!1)),i.apply(void 0,X([],R(n.concat([m])),!1))],b=el(l[0],l[1],x[0],x[1]);m<=1&&b<s?(o=m,s=b):f*=.5}}return{x:i.apply(void 0,X([],R(t.concat([o])),!1)),y:i.apply(void 0,X([],R(n.concat([o])),!1))}}function AFt(t,n,e,r,i,a){var o=[e-t,r-n];if(LR(o,[0,0]))return Math.sqrt((i-t)*(i-t)+(a-n)*(a-n));var s=[-o[1],o[0]];hS(s,s);var l=[i-t,a-n];return Math.abs(_R(l,s))}function EFt(t,n,e,r,i){var a=1-i;return a*a*a*t+3*n*i*a*a+3*e*i*i*a+r*i*i*i}function TFt(t,n,e,r,i,a,o,s,l,c,u){return qG([t,e,i,o],[n,r,a,s],l,c,EFt,u)}function nF(t,n,e,r,i,a,o,s,l,c,u){var f=TFt(t,n,e,r,i,a,o,s,l,c,u);return el(f.x,f.y,l,c)}function CFt(t,n,e,r){var i=1-r;return i*i*t+2*r*i*n+r*r*e}function PFt(t,n,e,r,i,a,o,s){return qG([t,e,i],[n,r,a],o,s,CFt)}function kFt(t,n,e,r,i,a,o,s){var l=PFt(t,n,e,r,i,a,o,s);return el(l.x,l.y,o,s)}var _Ft=$t(),LFt=$t(),IFt=$t(),FFt=pe(),DFt=function(){function t(){var n=this;this.isHit=function(e,r,i,a){var o=n.context.pointInPathPickerFactory[e.nodeName];if(o){var s=_i(FFt,i),l=vn(LFt,Pi(IFt,r[0],r[1],0),s),c=e.getGeometryBounds().halfExtents,u=e.parsedStyle.anchor;if(l[0]+=(u&&u[0]||0)*c[0]*2,l[1]+=(u&&u[1]||0)*c[1]*2,o(e,new kn(l[0],l[1]),a,n.isPointInPath,n.context,n.runtime))return!0}return!1},this.isPointInPath=function(e,r){var i=n.runtime.offscreenCanvasCreator.getOrCreateContext(n.context.config.offscreenCanvas),a=n.context.pathGeneratorFactory[e.nodeName];return a&&(i.beginPath(),a(i,e.parsedStyle),i.closePath()),i.isPointInPath(r.x,r.y)}}return t.prototype.apply=function(n,e){var r=this,i,a=n.renderingService,o=n.renderingContext;this.context=n,this.runtime=e;var s=(i=o.root)===null||i===void 0?void 0:i.ownerDocument;a.hooks.pick.tapPromise(t.tag,function(l){return Ri(r,void 0,void 0,function(){return Bi(this,function(c){return[2,this.pick(s,l)]})})}),a.hooks.pickSync.tap(t.tag,function(l){return r.pick(s,l)})},t.prototype.pick=function(n,e){var r,i,a=e.topmost,o=e.position,s=o.x,l=o.y,c=Pi(_Ft,s,l,0),u=n.elementsFromBBox(c[0],c[1],c[0],c[1]),f=[];try{for(var h=Ct(u),d=h.next();!d.done;d=h.next()){var p=d.value,v=p.getWorldTransform(),g=this.isHit(p,c,v,!1);if(g){var y=Kz(p);if(y){var m=y.parsedStyle.clipPath,x=this.isHit(m,c,m.getWorldTransform(),!0);if(x){if(a)return e.picked=[p],e;f.push(p)}}else{if(a)return e.picked=[p],e;f.push(p)}}}}catch(b){r={error:b}}finally{try{d&&!d.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}return e.picked=f,e},t.tag="CanvasPicker",t}();function RFt(t,n,e){var r=t.parsedStyle,i=r.r,a=r.fill,o=r.stroke,s=r.lineWidth,l=r.increasedLineWidthForHitTesting,c=r.pointerEvents,u=((s||0)+(l||0))/2,f=el(i,i,n.x,n.y),h=R(Bl(c,a,o),2),d=h[0],p=h[1];return d&&p||e?f<=i+u:d?f<=i:p?f>=i-u&&f<=i+u:!1}function bv(t,n,e,r){return t/(e*e)+n/(r*r)}function BFt(t,n,e){var r=t.parsedStyle,i=r.rx,a=r.ry,o=r.fill,s=r.stroke,l=r.lineWidth,c=r.increasedLineWidthForHitTesting,u=r.pointerEvents,f=n.x,h=n.y,d=R(Bl(u,o,s),2),p=d[0],v=d[1],g=((l||0)+(c||0))/2,y=(f-i)*(f-i),m=(h-a)*(h-a);return p&&v||e?bv(y,m,i+g,a+g)<=1:p?bv(y,m,i,a)<=1:v?bv(y,m,i-g,a-g)>=1&&bv(y,m,i+g,a+g)<=1:!1}function Ws(t,n,e,r,i,a){return i>=t&&i<=t+e&&a>=n&&a<=n+r}function NFt(t,n,e,r,i,a,o){var s=i/2;return Ws(t-s,n-s,e,i,a,o)||Ws(t+e-s,n-s,i,r,a,o)||Ws(t+s,n+r-s,e,i,a,o)||Ws(t-s,n+s,i,r,a,o)}function wv(t,n,e,r,i,a,o,s){var l=(Math.atan2(s-n,o-t)+Math.PI*2)%(Math.PI*2),c={x:t+e*Math.cos(l),y:n+e*Math.sin(l)};return el(c.x,c.y,o,s)<=a/2}function Io(t,n,e,r,i,a,o){var s=Math.min(t,e),l=Math.max(t,e),c=Math.min(n,r),u=Math.max(n,r),f=i/2;return a>=s-f&&a<=l+f&&o>=c-f&&o<=u+f?AFt(t,n,e,r,a,o)<=i/2:!1}function ZG(t,n,e,r,i){var a=t.length;if(a<2)return!1;for(var o=0;o<a-1;o++){var s=t[o][0],l=t[o][1],c=t[o+1][0],u=t[o+1][1];if(Io(s,l,c,u,n,e,r))return!0}if(i){var f=t[0],h=t[a-1];if(Io(f[0],f[1],h[0],h[1],n,e,r))return!0}return!1}var $Ft=1e-6;function $x(t){return Math.abs(t)<$Ft?0:t<0?-1:1}function jFt(t,n,e){return(e[0]-t[0])*(n[1]-t[1])===(n[0]-t[0])*(e[1]-t[1])&&Math.min(t[0],n[0])<=e[0]&&e[0]<=Math.max(t[0],n[0])&&Math.min(t[1],n[1])<=e[1]&&e[1]<=Math.max(t[1],n[1])}function KG(t,n,e){var r=!1,i=t.length;if(i<=2)return!1;for(var a=0;a<i;a++){var o=t[a],s=t[(a+1)%i];if(jFt(o,s,[n,e]))return!0;$x(o[1]-e)>0!=$x(s[1]-e)>0&&$x(n-(e-o[1])*(o[0]-s[0])/(o[1]-s[1])-o[0])<0&&(r=!r)}return r}function rF(t,n,e){for(var r=!1,i=0;i<t.length;i++){var a=t[i];if(r=KG(a,n,e),r)break}return r}function zFt(t,n,e){var r=t.parsedStyle,i=r.x1,a=r.y1,o=r.x2,s=r.y2,l=r.lineWidth,c=r.increasedLineWidthForHitTesting,u=r.defX,f=u===void 0?0:u,h=r.defY,d=h===void 0?0:h,p=r.pointerEvents,v=r.fill,g=r.stroke,y=R(Bl(p,v,g),2),m=y[1];return!m&&!e||!l?!1:Io(i,a,o,s,(l||0)+(c||0),n.x+f,n.y+d)}function GFt(t,n,e,r,i){for(var a=!1,o=n/2,s=0;s<t.length;s++){var l=t[s],c=l.currentPoint,u=l.params,f=l.prePoint,h=l.box;if(!(h&&!Ws(h.x-o,h.y-o,h.width+n,h.height+n,e,r)))switch(l.command){case"L":case"Z":if(a=Io(f[0],f[1],c[0],c[1],n,e,r),a)return!0;break;case"Q":var d=kFt(f[0],f[1],u[1],u[2],u[3],u[4],e,r);if(a=d<=n/2,a)return!0;break;case"C":var p=nF(f[0],f[1],u[1],u[2],u[3],u[4],u[5],u[6],e,r,i);if(a=p<=n/2,a)return!0;break;case"A":l.cubicParams||(l.cubicParams=UG(f[0],f[1],u[1],u[2],u[3],u[4],u[5],u[6],u[7],void 0));for(var v=l.cubicParams,g=f,y=0;y<v.length;y+=6){var m=nF(g[0],g[1],v[y],v[y+1],v[y+2],v[y+3],v[y+4],v[y+5],e,r,i);if(g=[v[y+4],v[y+5]],a=m<=n/2,a)return!0}break}}return a}function YFt(t,n,e,r,i,a){var o=t.parsedStyle,s=o.lineWidth,l=o.increasedLineWidthForHitTesting,c=o.stroke,u=o.fill,f=o.defX,h=f===void 0?0:f,d=o.defY,p=d===void 0?0:d,v=o.path,g=o.pointerEvents,y=v.segments,m=v.hasArc,x=v.polylines,b=v.polygons,w=R(Bl(g,(b==null?void 0:b.length)&&u,c),2),S=w[0],O=w[1],M=Nw(t),A=!1;return S||e?(m?A=r(t,n):A=rF(b,n.x+h,n.y+p)||rF(x,n.x+h,n.y+p),A):((O||e)&&(A=GFt(y,(s||0)+(l||0),n.x+h,n.y+p,M)),A)}function WFt(t,n,e){var r=t.parsedStyle,i=r.stroke,a=r.fill,o=r.lineWidth,s=r.increasedLineWidthForHitTesting,l=r.points,c=r.defX,u=c===void 0?0:c,f=r.defY,h=f===void 0?0:f,d=r.pointerEvents,p=R(Bl(d,a,i),2),v=p[0],g=p[1],y=!1;return(g||e)&&(y=ZG(l.points,(o||0)+(s||0),n.x+u,n.y+h,!0)),!y&&(v||e)&&(y=KG(l.points,n.x+u,n.y+h)),y}function VFt(t,n,e){var r=t.parsedStyle,i=r.lineWidth,a=r.increasedLineWidthForHitTesting,o=r.points,s=r.defX,l=s===void 0?0:s,c=r.defY,u=c===void 0?0:c,f=r.pointerEvents,h=r.fill,d=r.stroke,p=R(Bl(f,h,d),2),v=p[1];return!v&&!e||!i?!1:ZG(o.points,(i||0)+(a||0),n.x+l,n.y+u,!1)}function HFt(t,n,e,r,i){var a=t.parsedStyle,o=a.radius,s=a.fill,l=a.stroke,c=a.lineWidth,u=a.increasedLineWidthForHitTesting,f=a.width,h=a.height,d=a.pointerEvents,p=R(Bl(d,s,l),2),v=p[0],g=p[1],y=o&&o.some(function(w){return w!==0}),m=(c||0)+(u||0);if(y){var b=!1;return(g||e)&&(b=XFt(0,0,f,h,o.map(function(w){return OFt(w,0,Math.min(Math.abs(f)/2,Math.abs(h)/2))}),m,n.x,n.y)),!b&&(v||e)&&(b=r(t,n)),b}else{var x=m/2;if(v&&g||e)return Ws(0-x,0-x,f+x,h+x,n.x,n.y);if(v)return Ws(0,0,f,h,n.x,n.y);if(g)return NFt(0,0,f,h,m,n.x,n.y)}return!1}function XFt(t,n,e,r,i,a,o,s){var l=R(i,4),c=l[0],u=l[1],f=l[2],h=l[3];return Io(t+c,n,t+e-u,n,a,o,s)||Io(t+e,n+u,t+e,n+r-f,a,o,s)||Io(t+e-f,n+r,t+h,n+r,a,o,s)||Io(t,n+r-h,t,n+c,a,o,s)||wv(t+e-u,n+u,u,1.5*Math.PI,2*Math.PI,a,o,s)||wv(t+e-f,n+r-f,f,0,.5*Math.PI,a,o,s)||wv(t+h,n+r-h,h,.5*Math.PI,Math.PI,a,o,s)||wv(t+c,n+c,c,Math.PI,1.5*Math.PI,a,o,s)}function UFt(t,n,e,r,i,a){var o=t.parsedStyle,s=o.pointerEvents,l=o.width,c=o.height;if(s==="non-transparent-pixel"){var u=i.config.offscreenCanvas,f=a.offscreenCanvasCreator.getOrCreateCanvas(u),h=a.offscreenCanvasCreator.getOrCreateContext(u,{willReadFrequently:!0});f.width=l,f.height=c,i.defaultStyleRendererFactory[K.IMAGE].render(h,t.parsedStyle,t,void 0,void 0,void 0);var d=h.getImageData(n.x,n.y,1,1).data;return d.every(function(p){return p!==0})}return!0}var qFt=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.name="canvas-picker",e}return n.prototype.init=function(){var e,r=function(){return!0},i=(e={},e[K.CIRCLE]=RFt,e[K.ELLIPSE]=BFt,e[K.RECT]=HFt,e[K.LINE]=zFt,e[K.POLYLINE]=VFt,e[K.POLYGON]=WFt,e[K.PATH]=YFt,e[K.TEXT]=r,e[K.GROUP]=null,e[K.IMAGE]=UFt,e[K.HTML]=null,e[K.MESH]=null,e);this.context.pointInPathPickerFactory=i,this.addRenderingPlugin(new DFt)},n.prototype.destroy=function(){delete this.context.pointInPathPickerFactory,this.removeAllRenderingPlugins()},n}(vs),ZFt=function(t){return t==null};const Tn=ZFt;var KFt={}.toString,QFt=function(t,n){return KFt.call(t)==="[object "+n+"]"};const JFt=QFt,tDt=function(t){return JFt(t,"String")};var eDt=function(){function t(n){this.canvasRendererPluginOptions=n,this.removedRBushNodeAABBs=[],this.renderQueue=[],this.restoreStack=[],this.clearFullScreen=!1,this.vpMatrix=pe(),this.dprMatrix=pe(),this.tmpMat4=pe(),this.vec3a=$t(),this.vec3b=$t(),this.vec3c=$t(),this.vec3d=$t()}return t.prototype.apply=function(n,e){var r=this;this.context=n;var i=n.config,a=n.camera,o=n.renderingService,s=n.renderingContext,l=n.rBushRoot,c=n.pathGeneratorFactory;this.rBush=l,this.pathGeneratorFactory=c;var u=n.contextService,f=s.root.ownerDocument.defaultView,h=function(v){var g=v.target,y=g.rBushNode;y.aabb&&r.removedRBushNodeAABBs.push(y.aabb)},d=function(v){var g=v.target,y=g.rBushNode;y.aabb&&r.removedRBushNodeAABBs.push(y.aabb)};o.hooks.init.tap(t.tag,function(){f.addEventListener(Dt.UNMOUNTED,h),f.addEventListener(Dt.CULLED,d);var v=u.getDPR(),g=i.width,y=i.height,m=u.getContext();r.clearRect(m,0,0,g*v,y*v,i.background)}),o.hooks.destroy.tap(t.tag,function(){f.removeEventListener(Dt.UNMOUNTED,h),f.removeEventListener(Dt.CULLED,d),r.renderQueue=[],r.removedRBushNodeAABBs=[],r.restoreStack=[]}),o.hooks.beginFrame.tap(t.tag,function(){var v=u.getContext(),g=u.getDPR(),y=i.width,m=i.height,x=r.canvasRendererPluginOptions,b=x.dirtyObjectNumThreshold,w=x.dirtyObjectRatioThreshold,S=o.getStats(),O=S.total,M=S.rendered,A=M/O;r.clearFullScreen=o.disableDirtyRectangleRendering()||M>b&&A>w,v&&(v.resetTransform?v.resetTransform():v.setTransform(1,0,0,1,0,0),r.clearFullScreen&&r.clearRect(v,0,0,y*g,m*g,i.background))});var p=function(v,g){v.isVisible()&&!v.isCulled()&&(r.renderDisplayObject(v,g,r.context,r.restoreStack,e),r.saveDirtyAABB(v));var y=v.sortable.sorted||v.childNodes;y.forEach(function(m){p(m,g)})};o.hooks.endFrame.tap(t.tag,function(){var v=u.getContext(),g=u.getDPR();if(uS(r.dprMatrix,[g,g,1]),Vn(r.vpMatrix,r.dprMatrix,a.getOrthoMatrix()),r.clearFullScreen)p(s.root,v);else{var y=r.safeMergeAABB.apply(r,X([r.mergeDirtyAABBs(r.renderQueue)],R(r.removedRBushNodeAABBs.map(function(j){var Y=j.minX,W=j.minY,V=j.maxX,H=j.maxY,Q=new dn;return Q.setMinMax([Y,W,0],[V,H,0]),Q})),!1));if(r.removedRBushNodeAABBs=[],dn.isEmpty(y)){r.renderQueue=[];return}var m=r.convertAABB2Rect(y),x=m.x,b=m.y,w=m.width,S=m.height,O=vn(r.vec3a,[x,b,0],r.vpMatrix),M=vn(r.vec3b,[x+w,b,0],r.vpMatrix),A=vn(r.vec3c,[x,b+S,0],r.vpMatrix),T=vn(r.vec3d,[x+w,b+S,0],r.vpMatrix),C=Math.min(O[0],M[0],T[0],A[0]),P=Math.min(O[1],M[1],T[1],A[1]),_=Math.max(O[0],M[0],T[0],A[0]),k=Math.max(O[1],M[1],T[1],A[1]),I=Math.floor(C),L=Math.floor(P),F=Math.ceil(_-C),B=Math.ceil(k-P);v.save(),r.clearRect(v,I,L,F,B,i.background),v.beginPath(),v.rect(I,L,F,B),v.clip(),v.setTransform(r.vpMatrix[0],r.vpMatrix[1],r.vpMatrix[4],r.vpMatrix[5],r.vpMatrix[12],r.vpMatrix[13]);var D=i.renderer.getConfig().enableDirtyRectangleRenderingDebug;D&&f.dispatchEvent(new Se(wr.DIRTY_RECTANGLE,{dirtyRect:{x:I,y:L,width:F,height:B}}));var N=r.searchDirtyObjects(y);N.sort(function(j,Y){return j.sortable.renderOrder-Y.sortable.renderOrder}).forEach(function(j){j&&j.isVisible()&&!j.isCulled()&&r.renderDisplayObject(j,v,r.context,r.restoreStack,e)}),v.restore(),r.renderQueue.forEach(function(j){r.saveDirtyAABB(j)}),r.renderQueue=[]}r.restoreStack.forEach(function(){v.restore()}),r.restoreStack=[]}),o.hooks.render.tap(t.tag,function(v){r.clearFullScreen||r.renderQueue.push(v)})},t.prototype.clearRect=function(n,e,r,i,a,o){n.clearRect(e,r,i,a),o&&(n.fillStyle=o,n.fillRect(e,r,i,a))},t.prototype.renderDisplayObject=function(n,e,r,i,a){var o=n.nodeName,s=i[i.length-1];s&&!(n.compareDocumentPosition(s)&Sn.DOCUMENT_POSITION_CONTAINS)&&(e.restore(),i.pop());var l=this.context.styleRendererFactory[o],c=this.pathGeneratorFactory[o],u=n.parsedStyle.clipPath;if(u){this.applyWorldTransform(e,u);var f=this.pathGeneratorFactory[u.nodeName];f&&(e.save(),i.push(n),e.beginPath(),f(e,u.parsedStyle),e.closePath(),e.clip())}l&&(this.applyWorldTransform(e,n),e.save(),this.applyAttributesToContext(e,n)),c&&(e.beginPath(),c(e,n.parsedStyle),n.nodeName!==K.LINE&&n.nodeName!==K.PATH&&n.nodeName!==K.POLYLINE&&e.closePath()),l&&(l.render(e,n.parsedStyle,n,r,this,a),e.restore()),n.renderable.dirty=!1},t.prototype.convertAABB2Rect=function(n){var e=n.getMin(),r=n.getMax(),i=Math.floor(e[0]),a=Math.floor(e[1]),o=Math.ceil(r[0]),s=Math.ceil(r[1]),l=o-i,c=s-a;return{x:i,y:a,width:l,height:c}},t.prototype.mergeDirtyAABBs=function(n){var e=new dn;return n.forEach(function(r){var i=r.getRenderBounds();e.add(i);var a=r.renderable.dirtyRenderBounds;a&&e.add(a)}),e},t.prototype.searchDirtyObjects=function(n){var e=R(n.getMin(),2),r=e[0],i=e[1],a=R(n.getMax(),2),o=a[0],s=a[1],l=this.rBush.search({minX:r,minY:i,maxX:o,maxY:s});return l.map(function(c){var u=c.displayObject;return u})},t.prototype.saveDirtyAABB=function(n){var e=n.renderable;e.dirtyRenderBounds||(e.dirtyRenderBounds=new dn);var r=n.getRenderBounds();r&&e.dirtyRenderBounds.update(r.center,r.halfExtents)},t.prototype.applyAttributesToContext=function(n,e){var r=e.parsedStyle,i=r.stroke,a=r.fill,o=r.opacity,s=r.lineDash,l=r.lineDashOffset;s&&n.setLineDash(s),Tn(l)||(n.lineDashOffset=l),Tn(o)||(n.globalAlpha*=o),!Tn(i)&&!Array.isArray(i)&&!i.isNone&&(n.strokeStyle=e.attributes.stroke),!Tn(a)&&!Array.isArray(a)&&!a.isNone&&(n.fillStyle=e.attributes.fill)},t.prototype.applyWorldTransform=function(n,e,r){var i=0,a=0,o=(e.parsedStyle||{}).anchor,s=o&&o[0]||0,l=o&&o[1]||0;if(s!==0||l!==0){var c=e.geometry.contentBounds,u=c&&c.halfExtents[0]*2||0,f=c&&c.halfExtents[1]*2||0;i=-(s*u),a=-(l*f)}r?(al(this.tmpMat4,e.getLocalTransform()),this.vec3a[0]=i,this.vec3a[1]=a,this.vec3a[2]=0,Ro(this.tmpMat4,this.tmpMat4,this.vec3a),Vn(this.tmpMat4,r,this.tmpMat4),Vn(this.tmpMat4,this.vpMatrix,this.tmpMat4)):(al(this.tmpMat4,e.getWorldTransform()),this.vec3a[0]=i,this.vec3a[1]=a,this.vec3a[2]=0,Ro(this.tmpMat4,this.tmpMat4,this.vec3a),Vn(this.tmpMat4,this.vpMatrix,this.tmpMat4)),n.setTransform(this.tmpMat4[0],this.tmpMat4[1],this.tmpMat4[4],this.tmpMat4[5],this.tmpMat4[12],this.tmpMat4[13])},t.prototype.safeMergeAABB=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var r=new dn;return n.forEach(function(i){r.add(i)}),r},t.tag="CanvasRenderer",t}(),ws=function(){function t(n){this.imagePool=n}return t.prototype.render=function(n,e,r,i,a,o){var s=e.fill,l=e.fillRule,c=e.opacity,u=e.fillOpacity,f=e.stroke,h=e.strokeOpacity,d=e.lineWidth,p=e.lineCap,v=e.lineJoin,g=e.shadowType,y=e.shadowColor,m=e.shadowBlur,x=e.filter,b=e.miterLimit,w=!Tn(s)&&!s.isNone,S=!Tn(f)&&!f.isNone&&d>0,O=s.alpha===0,M=!!(x&&x.length),A=!Tn(y)&&m>0,T=r.nodeName,C=g==="inner",P=S&&A&&(T===K.PATH||T===K.LINE||T===K.POLYLINE||O||C);w&&(n.globalAlpha=c*u,P||gy(r,n,A),this.fill(n,r,s,l,i,a,o),P||this.clearShadowAndFilter(n,M,A)),S&&(n.globalAlpha=c*h,n.lineWidth=d,Tn(b)||(n.miterLimit=b),Tn(p)||(n.lineCap=p),Tn(v)||(n.lineJoin=v),P&&(C&&(n.globalCompositeOperation="source-atop"),gy(r,n,!0),C&&(this.stroke(n,r,f,i,a,o),n.globalCompositeOperation="source-over",this.clearShadowAndFilter(n,M,!0))),this.stroke(n,r,f,i,a,o))},t.prototype.clearShadowAndFilter=function(n,e,r){if(r&&(n.shadowColor="transparent",n.shadowBlur=0),e){var i=n.filter;!Tn(i)&&i.indexOf("drop-shadow")>-1&&(n.filter=i.replace(/drop-shadow\([^)]*\)/,"").trim()||"none")}},t.prototype.fill=function(n,e,r,i,a,o,s){var l=this;Array.isArray(r)?r.forEach(function(c){n.fillStyle=l.getColor(c,e,n),i?n.fill(i):n.fill()}):(Zh(r)&&(n.fillStyle=this.getPattern(r,e,n,a,o,s)),i?n.fill(i):n.fill())},t.prototype.stroke=function(n,e,r,i,a,o){var s=this;Array.isArray(r)?r.forEach(function(l){n.strokeStyle=s.getColor(l,e,n),n.stroke()}):(Zh(r)&&(n.strokeStyle=this.getPattern(r,e,n,i,a,o)),n.stroke())},t.prototype.getPattern=function(n,e,r,i,a,o){var s,l;if(n.image.nodeName==="rect"){var c=n.image.parsedStyle,u=c.width,f=c.height;l=i.contextService.getDPR();var h=i.config.offscreenCanvas;s=o.offscreenCanvasCreator.getOrCreateCanvas(h),s.width=u*l,s.height=f*l;var d=o.offscreenCanvasCreator.getOrCreateContext(h),p=[];n.image.forEach(function(g){a.renderDisplayObject(g,d,i,p,o)}),p.forEach(function(){d.restore()})}var v=this.imagePool.getOrCreatePatternSync(n,r,s,l,function(){e.renderable.dirty=!0,i.renderingService.dirtify()});return v},t.prototype.getColor=function(n,e,r){var i;if(n.type===ia.LinearGradient||n.type===ia.RadialGradient){var a=e.getGeometryBounds(),o=a&&a.halfExtents[0]*2||1,s=a&&a.halfExtents[1]*2||1;i=this.imagePool.getOrCreateGradient(E(E({type:n.type},n.value),{width:o,height:s}),r)}return i},t}();function gy(t,n,e){var r=t.parsedStyle,i=r.filter,a=r.shadowColor,o=r.shadowBlur,s=r.shadowOffsetX,l=r.shadowOffsetY;i&&i.length&&(n.filter=t.style.filter),e&&(n.shadowColor=a.toString(),n.shadowBlur=o||0,n.shadowOffsetX=s||0,n.shadowOffsetY=l||0)}var nDt=function(){function t(n){this.imagePool=n}return t.prototype.render=function(n,e,r){var i=e.width,a=e.height,o=e.img,s=e.shadowColor,l=e.shadowBlur,c,u=i,f=a;if(tDt(o)?c=this.imagePool.getImageSync(o):(u||(u=o.width),f||(f=o.height),c=o),c){var h=!Tn(s)&&l>0;gy(r,n,h);try{n.drawImage(c,0,0,u,f)}catch{}}},t}(),rDt=function(){function t(){}return t.prototype.render=function(n,e,r,i,a,o){var s=e,l=s.lineWidth,c=s.textAlign,u=s.textBaseline,f=s.lineJoin,h=s.miterLimit,d=s.letterSpacing,p=s.stroke,v=s.fill,g=s.fillOpacity,y=s.strokeOpacity,m=s.opacity,x=s.metrics,b=s.dx,w=s.dy,S=s.shadowColor,O=s.shadowBlur,M=x.font,A=x.lines,T=x.height,C=x.lineHeight,P=x.lineMetrics;n.font=M,n.lineWidth=l,n.textAlign=c==="middle"?"center":c;var _=u;!o.enableCSSParsing&&_==="alphabetic"&&(_="bottom"),n.lineJoin=f,Tn(h)||(n.miterLimit=h);var k=0;u==="middle"?k=-T/2-C/2:u==="bottom"||u==="alphabetic"||u==="ideographic"?k=-T:(u==="top"||u==="hanging")&&(k=-C);var I=b||0;k+=w||0,A.length===1&&(_==="bottom"?(_="middle",k-=.5*T):_==="top"&&(_="middle",k+=.5*T)),n.textBaseline=_;var L=!Tn(S)&&O>0;gy(r,n,L);for(var F=0;F<A.length;F++){var B=l/2+I;k+=C,!Tn(p)&&!p.isNone&&l&&this.drawLetterSpacing(n,A[F],P[F],c,B,k,d,g,y,m,!0),Tn(v)||this.drawLetterSpacing(n,A[F],P[F],c,B,k,d,g,y,m)}},t.prototype.drawLetterSpacing=function(n,e,r,i,a,o,s,l,c,u,f){if(f===void 0&&(f=!1),s===0){f?this.strokeText(n,e,a,o,c):this.fillText(n,e,a,o,l,u);return}var h=n.textAlign;n.textAlign="left";var d=a;i==="center"||i==="middle"?d=a-r.width/2:(i==="right"||i==="end")&&(d=a-r.width);for(var p=Array.from(e),v=n.measureText(e).width,g=0,y=0;y<p.length;++y){var m=p[y];f?this.strokeText(n,m,d,o,c):this.fillText(n,m,d,o,l,u),g=n.measureText(e.substring(y+1)).width,d+=v-g+s,v=g}n.textAlign=h},t.prototype.fillText=function(n,e,r,i,a,o){var s,l=!Tn(a)&&a!==1;l&&(s=n.globalAlpha,n.globalAlpha=a*o),n.fillText(e,r,i),l&&(n.globalAlpha=s)},t.prototype.strokeText=function(n,e,r,i,a){var o,s=!Tn(a)&&a!==1;s&&(o=n.globalAlpha,n.globalAlpha=a),n.strokeText(e,r,i),s&&(n.globalAlpha=o)},t}();(function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n})(ws);(function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n})(ws);(function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n})(ws);(function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n})(ws);(function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n})(ws);(function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n})(ws);(function(t){G(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n})(ws);var iDt=function(t){G(n,t);function n(e){e===void 0&&(e={});var r=t.call(this)||this;return r.options=e,r.name="canvas-renderer",r}return n.prototype.init=function(){var e,r=E({dirtyObjectNumThreshold:500,dirtyObjectRatioThreshold:.8},this.options),i=this.context.imagePool,a=new ws(i),o=(e={},e[K.CIRCLE]=a,e[K.ELLIPSE]=a,e[K.RECT]=a,e[K.IMAGE]=new nDt(i),e[K.TEXT]=new rDt,e[K.LINE]=a,e[K.POLYLINE]=a,e[K.POLYGON]=a,e[K.PATH]=a,e[K.GROUP]=void 0,e[K.HTML]=void 0,e[K.MESH]=void 0,e);this.context.defaultStyleRendererFactory=o,this.context.styleRendererFactory=o,this.addRenderingPlugin(new eDt(r))},n.prototype.destroy=function(){this.removeAllRenderingPlugins(),delete this.context.defaultStyleRendererFactory,delete this.context.styleRendererFactory},n}(vs),aDt=function(){function t(){}return t.prototype.apply=function(n,e){var r=this,i=n.renderingService,a=n.renderingContext,o=n.config;this.context=n;var s=a.root.ownerDocument.defaultView,l=function(S){i.hooks.pointerMove.call(S)},c=function(S){i.hooks.pointerUp.call(S)},u=function(S){i.hooks.pointerDown.call(S)},f=function(S){i.hooks.pointerOver.call(S)},h=function(S){i.hooks.pointerOut.call(S)},d=function(S){i.hooks.pointerCancel.call(S)},p=function(S){i.hooks.pointerWheel.call(S)},v=function(S){i.hooks.click.call(S)},g=function(S){e.globalThis.document.addEventListener("pointermove",l,!0),S.addEventListener("pointerdown",u,!0),S.addEventListener("pointerleave",h,!0),S.addEventListener("pointerover",f,!0),e.globalThis.addEventListener("pointerup",c,!0),e.globalThis.addEventListener("pointercancel",d,!0)},y=function(S){S.addEventListener("touchstart",u,!0),S.addEventListener("touchend",c,!0),S.addEventListener("touchmove",l,!0),S.addEventListener("touchcancel",d,!0)},m=function(S){e.globalThis.document.addEventListener("mousemove",l,!0),S.addEventListener("mousedown",u,!0),S.addEventListener("mouseout",h,!0),S.addEventListener("mouseover",f,!0),e.globalThis.addEventListener("mouseup",c,!0)},x=function(S){e.globalThis.document.removeEventListener("pointermove",l,!0),S.removeEventListener("pointerdown",u,!0),S.removeEventListener("pointerleave",h,!0),S.removeEventListener("pointerover",f,!0),e.globalThis.removeEventListener("pointerup",c,!0)},b=function(S){S.removeEventListener("touchstart",u,!0),S.removeEventListener("touchend",c,!0),S.removeEventListener("touchmove",l,!0),S.removeEventListener("touchcancel",d,!0)},w=function(S){e.globalThis.document.removeEventListener("mousemove",l,!0),S.removeEventListener("mousedown",u,!0),S.removeEventListener("mouseout",h,!0),S.removeEventListener("mouseover",f,!0),e.globalThis.removeEventListener("mouseup",c,!0)};i.hooks.init.tap(t.tag,function(){var S=r.context.contextService.getDomElement();e.globalThis.navigator.msPointerEnabled?(S.style.msContentZooming="none",S.style.msTouchAction="none"):s.supportsPointerEvents&&(S.style.touchAction="none"),s.supportsPointerEvents?g(S):m(S),s.supportsTouchEvents&&y(S),o.useNativeClickEvent&&S.addEventListener("click",v,!0),S.addEventListener("wheel",p,{passive:!0,capture:!0})}),i.hooks.destroy.tap(t.tag,function(){var S=r.context.contextService.getDomElement();e.globalThis.navigator.msPointerEnabled?(S.style.msContentZooming="",S.style.msTouchAction=""):s.supportsPointerEvents&&(S.style.touchAction=""),s.supportsPointerEvents?x(S):w(S),s.supportsTouchEvents&&b(S),o.useNativeClickEvent&&S.removeEventListener("click",v,!0),S.removeEventListener("wheel",p,!0)})},t.tag="DOMInteraction",t}(),oDt=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.name="dom-interaction",e}return n.prototype.init=function(){this.addRenderingPlugin(new aDt)},n.prototype.destroy=function(){this.removeAllRenderingPlugins()},n}(vs),sDt=function(t){return t==null};const lDt=sDt;var cDt={}.toString,uDt=function(t,n){return cDt.call(t)==="[object "+n+"]"};const QG=uDt,fDt=function(t){return QG(t,"String")};var hDt=function(t){return QG(t,"Number")};const iF=hDt;var dDt="g-canvas-camera",pDt=function(){function t(){this.displayObjectHTMLElementMap=new WeakMap}return t.prototype.joinTransformMatrix=function(n){return"matrix(".concat([n[0],n[1],n[4],n[5],n[12],n[13]].join(","),")")},t.prototype.apply=function(n,e){var r=this,i=n.camera,a=n.renderingContext,o=n.renderingService;this.context=n;var s=a.root.ownerDocument.defaultView,l=function(p,v){v.style.transform=r.joinTransformMatrix(p.getWorldTransform())},c=function(p){var v=p.target;if(v.nodeName===K.HTML){r.$camera||(r.$camera=r.createCamera(i));var g=r.getOrCreateEl(v);if(r.$camera.appendChild(g),e.enableCSSParsing){var y=v.ownerDocument.documentElement.attributes;Object.keys(y).forEach(function(m){g.style[m]=y[m]})}Object.keys(v.attributes).forEach(function(m){r.updateAttribute(m,v)}),l(v,g),r.context.nativeHTMLMap.set(g,v)}},u=function(p){var v=p.target;if(v.nodeName===K.HTML&&r.$camera){var g=r.getOrCreateEl(v);g&&(g.remove(),r.context.nativeHTMLMap.delete(g))}},f=function(p){var v=p.target;if(v.nodeName===K.HTML){var g=p.attrName;r.updateAttribute(g,v)}},h=function(p){var v=p.target;if(v.nodeName===K.HTML){var g=r.getOrCreateEl(v);l(v,g)}},d=function(){if(r.$camera){var p=r.context.config,v=p.width,g=p.height;r.$camera.style.width="".concat(v||0,"px"),r.$camera.style.height="".concat(g||0,"px")}};o.hooks.init.tap(t.tag,function(){s.addEventListener(wr.RESIZE,d),s.addEventListener(Dt.MOUNTED,c),s.addEventListener(Dt.UNMOUNTED,u),s.addEventListener(Dt.ATTR_MODIFIED,f),s.addEventListener(Dt.BOUNDS_CHANGED,h)}),o.hooks.endFrame.tap(t.tag,function(){r.$camera&&a.renderReasons.has(Wo.CAMERA_CHANGED)&&(r.$camera.style.transform=r.joinTransformMatrix(i.getOrthoMatrix()))}),o.hooks.destroy.tap(t.tag,function(){r.$camera&&r.$camera.remove(),s.removeEventListener(wr.RESIZE,d),s.removeEventListener(Dt.MOUNTED,c),s.removeEventListener(Dt.UNMOUNTED,u),s.removeEventListener(Dt.ATTR_MODIFIED,f),s.removeEventListener(Dt.BOUNDS_CHANGED,h)})},t.prototype.createCamera=function(n){var e=this.context.config,r=e.document,i=e.width,a=e.height,o=this.context.contextService.getDomElement(),s=o.parentNode;if(s){var l=dDt,c=s.querySelector("#"+l);if(!c){var u=(r||document).createElement("div");c=u,u.id=l,u.style.position="absolute",u.style.left="".concat(o.offsetLeft||0,"px"),u.style.top="".concat(o.offsetTop||0,"px"),u.style.transformOrigin="left top",u.style.transform=this.joinTransformMatrix(n.getOrthoMatrix()),u.style.overflow="hidden",u.style.pointerEvents="none",u.style.width="".concat(i||0,"px"),u.style.height="".concat(a||0,"px"),s.appendChild(u)}return c}return null},t.prototype.getOrCreateEl=function(n){var e=this.context.config.document,r=this.displayObjectHTMLElementMap.get(n);return r||(r=(e||document).createElement("div"),n.parsedStyle.$el=r,this.displayObjectHTMLElementMap.set(n,r),n.id&&(r.id=n.id),n.name&&r.setAttribute("name",n.name),n.className&&(r.className=n.className),r.style.position="absolute",r.style.left="0px",r.style.top="0px",r.style["will-change"]="transform",r.style.transform=this.joinTransformMatrix(n.getWorldTransform())),r},t.prototype.updateAttribute=function(n,e){var r=this.getOrCreateEl(e);switch(n){case"innerHTML":var i=e.parsedStyle.innerHTML;fDt(i)?r.innerHTML=i:(r.innerHTML="",r.appendChild(i));break;case"transformOrigin":var a=e.parsedStyle.transformOrigin;r.style["transform-origin"]="".concat(a[0].value," ").concat(a[1].value);break;case"width":if(this.context.enableCSSParsing){var o=e.computedStyleMap().get("width");r.style.width=o.toString()}else{var o=e.parsedStyle.width;r.style.width=iF(o)?"".concat(o,"px"):o.toString()}break;case"height":if(this.context.enableCSSParsing){var s=e.computedStyleMap().get("height");r.style.height=s.toString()}else{var s=e.parsedStyle.height;r.style.height=iF(s)?"".concat(s,"px"):s.toString()}break;case"zIndex":var l=e.parsedStyle.zIndex;r.style["z-index"]="".concat(l);break;case"visibility":var c=e.parsedStyle.visibility;r.style.visibility=c;break;case"pointerEvents":var u=e.parsedStyle.pointerEvents;r.style.pointerEvents=u;break;case"opacity":var f=e.parsedStyle.opacity;r.style.opacity="".concat(f);break;case"fill":var h=e.parsedStyle.fill,d="";Zg(h)?h.isNone?d="transparent":d=e.getAttribute("fill"):Array.isArray(h)?d=e.getAttribute("fill"):Zh(h),r.style.background=d;break;case"stroke":var p=e.parsedStyle.stroke,v="";Zg(p)?p.isNone?v="transparent":v=e.getAttribute("stroke"):Array.isArray(p)?v=e.getAttribute("stroke"):Zh(p),r.style["border-color"]=v,r.style["border-style"]="solid";break;case"lineWidth":var g=e.parsedStyle.lineWidth;r.style["border-width"]="".concat(g||0,"px");break;case"lineDash":r.style["border-style"]="dashed";break;case"filter":var y=e.style.filter;r.style.filter=y;break;default:n!=="x"&&n!=="y"&&!lDt(e.style[n])&&e.style[n]!==""&&(r.style[n]=e.style[n])}},t.tag="HTMLRendering",t}(),vDt=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.name="html-renderer",e}return n.prototype.init=function(){this.addRenderingPlugin(new pDt)},n.prototype.destroy=function(){this.removeAllRenderingPlugins()},n}(vs),gDt={}.toString,yDt=function(t,n){return gDt.call(t)==="[object "+n+"]"};const mDt=yDt,yy=function(t){return mDt(t,"String")};var xDt=function(){function t(n){this.canvasConfig=n,this.imageCache={},this.gradientCache={},this.patternCache={}}return t.prototype.getImageSync=function(n,e){return this.imageCache[n]?e&&e(this.imageCache[n]):this.getOrCreateImage(n).then(function(r){e&&e(r)}),this.imageCache[n]},t.prototype.getOrCreateImage=function(n){var e=this;if(this.imageCache[n])return Promise.resolve(this.imageCache[n]);var r=this.canvasConfig.createImage;return new Promise(function(i,a){var o;r?o=r(n):Gd&&(o=new window.Image),o&&(o.onload=function(){e.imageCache[n]=o,i(o)},o.onerror=function(s){a(s)},o.crossOrigin="Anonymous",o.src=n)})},t.prototype.getOrCreatePatternSync=function(n,e,r,i,a){var o=this.generatePatternKey(n);if(o&&this.patternCache[o])return this.patternCache[o];var s=n.image,l=n.repetition,c=n.transform,u,f=!1;yy(s)?u=this.getImageSync(s,a):r?(u=r,f=!0):u=s;var h=u&&e.createPattern(u,l);if(h){var d=void 0;c?d=HM(Qg(c),new Kn({})):d=gd(pe()),f&&ug(d,d,[1/i,1/i,1]),h.setTransform({a:d[0],b:d[1],c:d[4],d:d[5],e:d[12],f:d[13]})}return o&&h&&(this.patternCache[o]=h),h},t.prototype.getOrCreateGradient=function(n,e){var r=this.generateGradientKey(n),i=n.type,a=n.steps,o=n.width,s=n.height,l=n.angle,c=n.cx,u=n.cy,f=n.size;if(this.gradientCache[r])return this.gradientCache[r];var h=null;if(i===ia.LinearGradient){var d=Qwt(o,s,l),p=d.x1,v=d.y1,g=d.x2,y=d.y2;h=e.createLinearGradient(p,v,g,y)}else if(i===ia.RadialGradient){var m=Jwt(o,s,c,u,f),x=m.x,b=m.y,w=m.r;h=e.createRadialGradient(x,b,0,x,b,w)}return h&&(a.forEach(function(S){var O=S.offset,M=S.color;O.unit===st.kPercentage&&(h==null||h.addColorStop(O.value/100,M.toString()))}),this.gradientCache[r]=h),this.gradientCache[r]},t.prototype.generateGradientKey=function(n){var e=n.type,r=n.width,i=n.height,a=n.steps,o=n.angle,s=n.cx,l=n.cy,c=n.size;return"gradient-".concat(e,"-").concat((o==null?void 0:o.toString())||0,"-").concat((s==null?void 0:s.toString())||0,"-").concat((l==null?void 0:l.toString())||0,"-").concat((c==null?void 0:c.toString())||0,"-").concat(r,"-").concat(i,"-").concat(a.map(function(u){var f=u.offset,h=u.color;return"".concat(f).concat(h)}).join("-"))},t.prototype.generatePatternKey=function(n){var e=n.image,r=n.repetition;if(yy(e))return"pattern-".concat(e,"-").concat(r);if(e.nodeName==="rect")return"pattern-".concat(e.entity,"-").concat(r)},t}(),bDt=function(){function t(){}return t.prototype.apply=function(n){var e=n.renderingService,r=n.renderingContext,i=n.imagePool,a=r.root.ownerDocument.defaultView,o=function(c,u,f){var h=c.parsedStyle,d=h.width,p=h.height;d&&!p?c.setAttribute("height",f/u*d):!d&&p&&c.setAttribute("width",u/f*p)},s=function(c){var u=c.target,f=u.nodeName,h=u.attributes;if(f===K.IMAGE){var d=h.img,p=h.keepAspectRatio;yy(d)&&i.getImageSync(d,function(v){var g=v.width,y=v.height;p&&o(u,g,y),u.renderable.dirty=!0,e.dirtify()})}},l=function(c){var u=c.target,f=c.attrName,h=c.newValue;u.nodeName===K.IMAGE&&f==="img"&&yy(h)&&i.getOrCreateImage(h).then(function(d){var p=d.width,v=d.height;u.attributes.keepAspectRatio&&o(u,p,v),u.renderable.dirty=!0,e.dirtify()})};e.hooks.init.tap(t.tag,function(){a.addEventListener(Dt.MOUNTED,s),a.addEventListener(Dt.ATTR_MODIFIED,l)}),e.hooks.destroy.tap(t.tag,function(){a.removeEventListener(Dt.MOUNTED,s),a.removeEventListener(Dt.ATTR_MODIFIED,l)})},t.tag="LoadImage",t}(),wDt=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.name="image-loader",e}return n.prototype.init=function(){this.context.imagePool=new xDt(this.context.config),this.addRenderingPlugin(new bDt)},n.prototype.destroy=function(){this.removeAllRenderingPlugins()},n}(vs),SDt=function(){function t(n){this.renderingContext=n.renderingContext,this.canvasConfig=n.config}return t.prototype.init=function(){var n=this.canvasConfig,e=n.container,r=n.canvas;if(r)this.$canvas=r,e&&r.parentElement!==e&&e.appendChild(r),this.$container=r.parentElement,this.canvasConfig.container=this.$container;else if(e&&(this.$container=vw(e)?document.getElementById(e):e,this.$container)){var i=document.createElement("canvas");this.$container.appendChild(i),this.$container.style.position||(this.$container.style.position="relative"),this.$canvas=i}this.context=this.$canvas.getContext("2d"),this.resize(this.canvasConfig.width,this.canvasConfig.height)},t.prototype.getContext=function(){return this.context},t.prototype.getDomElement=function(){return this.$canvas},t.prototype.getDPR=function(){return this.dpr},t.prototype.getBoundingClientRect=function(){if(this.$canvas.getBoundingClientRect)return this.$canvas.getBoundingClientRect()},t.prototype.destroy=function(){this.$container&&this.$canvas&&this.$canvas.parentNode&&this.$container.removeChild(this.$canvas)},t.prototype.resize=function(n,e){var r=this.canvasConfig.devicePixelRatio,i=r||Gd&&window.devicePixelRatio||1;i=i>=1?Math.ceil(i):1,this.dpr=i,this.$canvas&&(this.$canvas.width=this.dpr*n,this.$canvas.height=this.dpr*e,aSt(this.$canvas,n,e)),this.renderingContext.renderReasons.add(Wo.CAMERA_CHANGED)},t.prototype.applyCursorStyle=function(n){this.$container&&this.$container.style&&(this.$container.style.cursor=n)},t.prototype.toDataURL=function(n){return n===void 0&&(n={}),Ri(this,void 0,void 0,function(){var e,r;return Bi(this,function(i){return e=n.type,r=n.encoderOptions,[2,this.context.canvas.toDataURL(e,r)]})})},t}(),ODt=function(t){G(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.name="canvas-context-register",e}return n.prototype.init=function(){this.context.ContextService=SDt},n.prototype.destroy=function(){delete this.context.ContextService},n}(vs),JG=function(t){G(n,t);function n(e){var r=t.call(this,e)||this;return r.registerPlugin(new ODt),r.registerPlugin(new wDt),r.registerPlugin(new wFt),r.registerPlugin(new iDt),r.registerPlugin(new oDt),r.registerPlugin(new qFt),r.registerPlugin(new vDt),r}return n}(Swt);function MDt(t,n){return Math.sqrt((t[0]-n[0])*(t[0]-n[0])+(t[1]-n[1])*(t[1]-n[1]))}var ADt=function(){function t(n){this.dragndropPluginOptions=n}return t.prototype.apply=function(n){var e=this,r=n.renderingService,i=n.renderingContext,a=i.root.ownerDocument,o=a.defaultView,s=function(l){var c=l.target,u=c===a,f=u&&e.dragndropPluginOptions.isDocumentDraggable?a:c.closest&&c.closest("[draggable=true]");if(f){var h=!1,d=l.timeStamp,p=[l.clientX,l.clientY],v=null,g=[l.clientX,l.clientY],y=function(x){return Ri(e,void 0,void 0,function(){var b,w,S,O,M,A;return Bi(this,function(T){switch(T.label){case 0:if(!h){if(b=x.timeStamp-d,w=MDt([x.clientX,x.clientY],p),b<=this.dragndropPluginOptions.dragstartTimeThreshold||w<=this.dragndropPluginOptions.dragstartDistanceThreshold)return[2];x.type="dragstart",f.dispatchEvent(x),h=!0}return x.type="drag",x.dx=x.clientX-g[0],x.dy=x.clientY-g[1],f.dispatchEvent(x),g=[x.clientX,x.clientY],u?[3,2]:(S=this.dragndropPluginOptions.overlap==="pointer"?[x.canvasX,x.canvasY]:c.getBounds().center,[4,a.elementsFromPoint(S[0],S[1])]);case 1:O=T.sent(),M=O[O.indexOf(c)+1],A=(M==null?void 0:M.closest("[droppable=true]"))||(this.dragndropPluginOptions.isDocumentDroppable?a:null),v!==A&&(v&&(x.type="dragleave",x.target=v,v.dispatchEvent(x)),A&&(x.type="dragenter",x.target=A,A.dispatchEvent(x)),v=A,v&&(x.type="dragover",x.target=v,v.dispatchEvent(x))),T.label=2;case 2:return[2]}})})};o.addEventListener("pointermove",y);var m=function(x){if(h){x.detail={preventClick:!0};var b=x.clone();v&&(b.type="drop",b.target=v,v.dispatchEvent(b)),b.type="dragend",f.dispatchEvent(b),h=!1}o.removeEventListener("pointermove",y)};c.addEventListener("pointerup",m,{once:!0}),c.addEventListener("pointerupoutside",m,{once:!0})}};r.hooks.init.tap(t.tag,function(){o.addEventListener("pointerdown",s)}),r.hooks.destroy.tap(t.tag,function(){o.removeEventListener("pointerdown",s)})},t.tag="Dragndrop",t}(),tY=function(t){G(n,t);function n(e){e===void 0&&(e={});var r=t.call(this)||this;return r.options=e,r.name="dragndrop",r}return n.prototype.init=function(){this.addRenderingPlugin(new ADt(E({overlap:"pointer",isDocumentDraggable:!1,isDocumentDroppable:!1,dragstartDistanceThreshold:0,dragstartTimeThreshold:0},this.options)))},n.prototype.destroy=function(){this.removeAllRenderingPlugins()},n.prototype.setOptions=function(e){Object.assign(this.plugins[0].dragndropPluginOptions,e)},n}(vs);const fe={BEFORE_RENDER:"beforerender",AFTER_RENDER:"afterrender",BEFORE_PAINT:"beforepaint",AFTER_PAINT:"afterpaint",BEFORE_CHANGE_DATA:"beforechangedata",AFTER_CHANGE_DATA:"afterchangedata",BEFORE_CLEAR:"beforeclear",AFTER_CLEAR:"afterclear",BEFORE_DESTROY:"beforedestroy",AFTER_DESTROY:"afterdestroy",BEFORE_CHANGE_SIZE:"beforechangesize",AFTER_CHANGE_SIZE:"afterchangesize",POINTER_TAP:"pointertap",POINTER_DOWN:"pointerdown",POINTER_UP:"pointerup",POINTER_OVER:"pointerover",POINTER_OUT:"pointerout",POINTER_MOVE:"pointermove",POINTER_ENTER:"pointerenter",POINTER_LEAVE:"pointerleave",POINTER_UPOUTSIDE:"pointerupoutside",DRAG_START:"dragstart",DRAG:"drag",DRAG_END:"dragend",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"DROP",CLICK:"click",DBLCLICK:"dblclick"},EDt=[["legendCategory",[[["color","discrete"],["opacity","discrete"],["shape","discrete"],["size","constant"]],[["color","discrete"],["opacity","constant"],["shape","discrete"],["size","constant"]],[["color","discrete"],["opacity","discrete"],["shape","constant"],["size","constant"]],[["color","discrete"],["opacity","constant"],["shape","constant"],["size","constant"]],[["color","constant"],["opacity","discrete"],["shape","discrete"],["size","constant"]],[["color","constant"],["opacity","constant"],["shape","discrete"],["size","constant"]],[["color","constant"],["opacity","discrete"],["shape","constant"],["size","constant"]],[["color","discrete"],["shape","discrete"],["size","constant"]],[["color","discrete"],["opacity","discrete"],["shape","discrete"]],[["color","discrete"],["opacity","discrete"],["size","constant"]],[["color","discrete"],["opacity","constant"],["shape","discrete"]],[["color","discrete"],["opacity","constant"],["size","constant"]],[["color","discrete"],["shape","constant"],["size","constant"]],[["color","discrete"],["opacity","discrete"],["shape","constant"]],[["color","discrete"],["opacity","constant"],["shape","constant"]],[["color","constant"],["shape","discrete"],["size","constant"]],[["color","constant"],["opacity","discrete"],["shape","discrete"]],[["color","constant"],["opacity","discrete"],["size","constant"]],[["color","constant"],["opacity","constant"],["shape","discrete"]],[["color","constant"],["opacity","discrete"],["shape","constant"]],[["color","discrete"],["shape","discrete"]],[["color","discrete"],["size","constant"]],[["color","discrete"],["opacity","discrete"]],[["color","discrete"],["opacity","constant"]],[["color","discrete"],["shape","constant"]],[["color","constant"],["shape","discrete"]],[["color","constant"],["size","constant"]],[["color","constant"],["opacity","discrete"]],[["color","discrete"]]]],["legendContinuousSize",[[["color","continuous"],["opacity","continuous"],["size","continuous"]],[["color","constant"],["opacity","continuous"],["size","continuous"]],[["color","continuous"],["size","continuous"]],[["color","constant"],["size","continuous"]],[["size","continuous"],["opacity","continuous"]],[["size","continuous"]]]],["legendContinuousBlockSize",[[["color","distribution"],["opacity","distribution"],["size","distribution"]],[["color","distribution"],["size","distribution"]]]],["legendContinuousBlock",[[["color","distribution"],["opacity","continuous"]],[["color","distribution"]]]],["legendContinuous",[[["color","continuous"],["opacity","continuous"]],[["color","continuous"]],[["opacity","continuous"]]]]];function eY(t){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];return t?n.reduce(function(r,i){return function(a){return i(r(a))}},t):Rc}function nY(t){return t instanceof Float32Array||t instanceof Array}var rY=globalThis&&globalThis.__read||function(t,n){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var r=e.call(t),i,a=[],o;try{for(;(n===void 0||n-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(o)throw o.error}}return a},iY=globalThis&&globalThis.__spreadArray||function(t,n,e){if(e||arguments.length===2)for(var r=0,i=n.length,a;r<i;r++)(a||!(r in n))&&(a||(a=Array.prototype.slice.call(n,0,r)),a[r]=n[r]);return t.concat(a||Array.prototype.slice.call(n))};function TDt(t){return function(n){for(var e=[],r=0;r<n.length-1;r+=2){var i=[n[r],n[r+1]],a=t(i);e.push.apply(e,iY([],rY(a),!1))}return e}}function CDt(t){return function(n){for(var e=[],r=0;r<n.length-1;r+=3){var i=[n[r],n[r+1],n[r+2]],a=t(i);e.push.apply(e,iY([],rY(a),!1))}return e}}function aY(t,n,e){for(;t<n;)t+=Math.PI*2;for(;t>e;)t-=Math.PI*2;return t}var PDt=globalThis&&globalThis.__read||function(t,n){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var r=e.call(t),i,a=[],o;try{for(;(n===void 0||n-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(o)throw o.error}}return a},kDt=function(t,n,e,r,i){var a=PDt(t,2),o=a[0],s=a[1],l=Eu();return pR(l,[o,s])};function my(t,...n){return n.reduce((e,r)=>i=>e(r(i)),t)}function p2(t,n){return n-t?e=>(e-t)/(n-t):e=>.5}function _Dt(t,n){const e=n<t?n:t,r=t>n?t:n;return i=>Math.min(Math.max(e,i),r)}function LDt(t,n,e,r,i){let a=e||0,o=r||t.length;const s=i||(l=>l);for(;a<o;){const l=Math.floor((a+o)/2);s(t[l])>n?o=l:a=l+1}return a}const aF=Math.sqrt(50),oF=Math.sqrt(10),sF=Math.sqrt(2);function rg(t,n,e){const r=(n-t)/Math.max(0,e),i=Math.floor(Math.log(r)/Math.LN10),a=r/10**i;return i>=0?(a>=aF?10:a>=oF?5:a>=sF?2:1)*10**i:-(10**-i)/(a>=aF?10:a>=oF?5:a>=sF?2:1)}const IDt=(t,n,e=5)=>{const r=[t,n];let i=0,a=r.length-1,o=r[i],s=r[a],l;return s<o&&([o,s]=[s,o],[i,a]=[a,i]),l=rg(o,s,e),l>0?(o=Math.floor(o/l)*l,s=Math.ceil(s/l)*l,l=rg(o,s,e)):l<0&&(o=Math.ceil(o*l)/l,s=Math.floor(s*l)/l,l=rg(o,s,e)),l>0?(r[i]=Math.floor(o/l)*l,r[a]=Math.ceil(s/l)*l):l<0&&(r[i]=Math.ceil(o*l)/l,r[a]=Math.floor(s*l)/l),r};function lF(t){return!To(t)&&!KD(t)&&!Number.isNaN(t)}function jx(t,n,e){let r=e;return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(n-t)*6*r:r<1/2?n:r<2/3?t+(n-t)*(2/3-r)*6:t}function FDt(t){const n=t[0]/360,e=t[1]/100,r=t[2]/100,i=t[3];if(e===0)return[r*255,r*255,r*255,i];const a=r<.5?r*(1+e):r+e-r*e,o=2*r-a,s=jx(o,a,n+1/3),l=jx(o,a,n),c=jx(o,a,n-1/3);return[s*255,l*255,c*255,i]}function cF(t){const n=lM.get(t);if(!n)return null;const{model:e,value:r}=n;return e==="rgb"?r:e==="hsl"?FDt(r):null}const xy=(t,n)=>e=>t*(1-e)+n*e,DDt=(t,n)=>{const e=cF(t),r=cF(n);return e===null||r===null?e?()=>t:()=>n:i=>{const a=new Array(4);for(let u=0;u<4;u+=1){const f=e[u],h=r[u];a[u]=f*(1-i)+h*i}const[o,s,l,c]=a;return`rgba(${Math.round(o)}, ${Math.round(s)}, ${Math.round(l)}, ${c})`}},RDt=(t,n)=>typeof t=="number"&&typeof n=="number"?xy(t,n):typeof t=="string"&&typeof n=="string"?DDt(t,n):()=>t,BDt=(t,n)=>{const e=xy(t,n);return r=>Math.round(e(r))};function uF({map:t,initKey:n},e){const r=n(e);return t.has(r)?t.get(r):e}function NDt({map:t,initKey:n},e){const r=n(e);return t.has(r)?t.get(r):(t.set(r,e),e)}function $Dt({map:t,initKey:n},e){const r=n(e);return t.has(r)&&(e=t.get(r),t.delete(r)),e}function jDt(t){return typeof t=="object"?t.valueOf():t}class fF extends Map{constructor(n){if(super(),this.map=new Map,this.initKey=jDt,n!==null)for(const[e,r]of n)this.set(e,r)}get(n){return super.get(uF({map:this.map,initKey:this.initKey},n))}has(n){return super.has(uF({map:this.map,initKey:this.initKey},n))}set(n,e){return super.set(NDt({map:this.map,initKey:this.initKey},n),e)}delete(n){return super.delete($Dt({map:this.map,initKey:this.initKey},n))}}let oY=class{constructor(n){this.options=ot({},this.getDefaultOptions()),this.update(n)}getOptions(){return this.options}update(n={}){this.options=ot({},this.options,n),this.rescale(n)}rescale(n){}};const Gm=Symbol("defaultUnknown");function hF(t,n,e){for(let r=0;r<n.length;r+=1)t.has(n[r])||t.set(e(n[r]),r)}function dF(t){const{value:n,from:e,to:r,mapper:i,notFoundReturn:a}=t;let o=i.get(n);if(o===void 0){if(a!==Gm)return a;o=e.push(n)-1,i.set(n,o)}return r[o%r.length]}function pF(t){return t instanceof Date?n=>`${n}`:typeof t=="object"?n=>JSON.stringify(n):n=>n}class GA extends oY{getDefaultOptions(){return{domain:[],range:[],unknown:Gm}}constructor(n){super(n)}map(n){return this.domainIndexMap.size===0&&hF(this.domainIndexMap,this.getDomain(),this.domainKey),dF({value:this.domainKey(n),mapper:this.domainIndexMap,from:this.getDomain(),to:this.getRange(),notFoundReturn:this.options.unknown})}invert(n){return this.rangeIndexMap.size===0&&hF(this.rangeIndexMap,this.getRange(),this.rangeKey),dF({value:this.rangeKey(n),mapper:this.rangeIndexMap,from:this.getRange(),to:this.getDomain(),notFoundReturn:this.options.unknown})}rescale(n){const[e]=this.options.domain,[r]=this.options.range;if(this.domainKey=pF(e),this.rangeKey=pF(r),!this.rangeIndexMap){this.rangeIndexMap=new Map,this.domainIndexMap=new Map;return}(!n||n.range)&&this.rangeIndexMap.clear(),(!n||n.domain||n.compare)&&(this.domainIndexMap.clear(),this.sortedDomain=void 0)}clone(){return new GA(this.options)}getRange(){return this.options.range}getDomain(){if(this.sortedDomain)return this.sortedDomain;const{domain:n,compare:e}=this.options;return this.sortedDomain=e?[...n].sort(e):n,this.sortedDomain}}function zDt(t){const n=Math.min(...t);return t.map(e=>e/n)}function GDt(t,n){const e=t.length,r=n-e;return r>0?[...t,...new Array(r).fill(1)]:r<0?t.slice(0,n):t}function YDt(t){return Math.round(t*1e12)/1e12}function WDt(t){const{domain:n,range:e,paddingOuter:r,paddingInner:i,flex:a,round:o,align:s}=t,l=n.length,c=GDt(a,l),[u,f]=e,h=f-u,d=2/l*r+1-1/l*i,p=h/d,v=p*i/l,g=p-l*v,y=zDt(c),m=y.reduce((P,_)=>P+_),x=g/m,b=new fF(n.map((P,_)=>{const k=y[_]*x;return[P,o?Math.floor(k):k]})),w=new fF(n.map((P,_)=>{const I=y[_]*x+v;return[P,o?Math.floor(I):I]})),S=Array.from(w.values()).reduce((P,_)=>P+_),M=(h-(S-S/l*i))*s,A=u+M;let T=o?Math.round(A):A;const C=new Array(l);for(let P=0;P<l;P+=1){C[P]=YDt(T);const _=n[P];T+=w.get(_)}return{valueBandWidth:b,valueStep:w,adjustedRange:C}}function VDt(t){var n;const{domain:e}=t,r=e.length;if(r===0)return{valueBandWidth:void 0,valueStep:void 0,adjustedRange:[]};if(!!(!((n=t.flex)===null||n===void 0)&&n.length))return WDt(t);const{range:a,paddingOuter:o,paddingInner:s,round:l,align:c}=t;let u,f,h=a[0];const p=a[1]-h,v=o*2,g=r-s;u=p/Math.max(1,v+g),l&&(u=Math.floor(u)),h+=(p-u*(r-s))*c,f=u*(1-s),l&&(h=Math.round(h),f=Math.round(f));const y=new Array(r).fill(0).map((m,x)=>h+x*u);return{valueStep:u,valueBandWidth:f,adjustedRange:y}}class YA extends GA{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,paddingInner:0,paddingOuter:0,padding:0,unknown:Gm,flex:[]}}constructor(n){super(n)}clone(){return new YA(this.options)}getStep(n){return this.valueStep===void 0?1:typeof this.valueStep=="number"?this.valueStep:n===void 0?Array.from(this.valueStep.values())[0]:this.valueStep.get(n)}getBandWidth(n){return this.valueBandWidth===void 0?1:typeof this.valueBandWidth=="number"?this.valueBandWidth:n===void 0?Array.from(this.valueBandWidth.values())[0]:this.valueBandWidth.get(n)}getRange(){return this.adjustedRange}getPaddingInner(){const{padding:n,paddingInner:e}=this.options;return n>0?n:e}getPaddingOuter(){const{padding:n,paddingOuter:e}=this.options;return n>0?n:e}rescale(){super.rescale();const{align:n,domain:e,range:r,round:i,flex:a}=this.options,{adjustedRange:o,valueBandWidth:s,valueStep:l}=VDt({align:n,range:r,round:i,flex:a,paddingInner:this.getPaddingInner(),paddingOuter:this.getPaddingOuter(),domain:e});this.valueStep=l,this.valueBandWidth=s,this.adjustedRange=o}}const HDt=(t,n,e)=>{let r,i,a=t,o=n;if(a===o&&e>0)return[a];let s=rg(a,o,e);if(s===0||!Number.isFinite(s))return[];if(s>0){a=Math.ceil(a/s),o=Math.floor(o/s),i=new Array(r=Math.ceil(o-a+1));for(let l=0;l<r;l+=1)i[l]=(a+l)*s}else{s=-s,a=Math.ceil(a*s),o=Math.floor(o*s),i=new Array(r=Math.ceil(o-a+1));for(let l=0;l<r;l+=1)i[l]=(a+l)/s}return i},XDt=(t,n,e)=>{const[r,i]=t,[a,o]=n;let s,l;return r<i?(s=p2(r,i),l=e(a,o)):(s=p2(i,r),l=e(o,a)),my(l,s)},UDt=(t,n,e)=>{const r=Math.min(t.length,n.length)-1,i=new Array(r),a=new Array(r),o=t[0]>t[r],s=o?[...t].reverse():t,l=o?[...n].reverse():n;for(let c=0;c<r;c+=1)i[c]=p2(s[c],s[c+1]),a[c]=e(l[c],l[c+1]);return c=>{const u=LDt(t,c,1,r)-1,f=i[u],h=a[u];return my(h,f)(c)}},vF=(t,n,e,r)=>(Math.min(t.length,n.length)>2?UDt:XDt)(t,n,r?BDt:e);class qDt extends oY{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:xy,tickCount:5}}map(n){return lF(n)?this.output(n):this.options.unknown}invert(n){return lF(n)?this.input(n):this.options.unknown}nice(){if(!this.options.nice)return;const[n,e,r,...i]=this.getTickMethodOptions();this.options.domain=this.chooseNice()(n,e,r,...i)}getTicks(){const{tickMethod:n}=this.options,[e,r,i,...a]=this.getTickMethodOptions();return n(e,r,i,...a)}getTickMethodOptions(){const{domain:n,tickCount:e}=this.options,r=n[0],i=n[n.length-1];return[r,i,e]}chooseNice(){return IDt}rescale(){this.nice();const[n,e]=this.chooseTransforms();this.composeOutput(n,this.chooseClamp(n)),this.composeInput(n,e,this.chooseClamp(e))}chooseClamp(n){const{clamp:e,range:r}=this.options,i=this.options.domain.map(n),a=Math.min(i.length,r.length);return e?_Dt(i[0],i[a-1]):Rc}composeOutput(n,e){const{domain:r,range:i,round:a,interpolate:o}=this.options,s=vF(r.map(n),i,o,a);this.output=my(s,e,n)}composeInput(n,e,r){const{domain:i,range:a}=this.options,o=vF(a,i.map(n),xy);this.input=my(e,r,o)}}class or extends qDt{getDefaultOptions(){return{domain:[0,1],range:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolate:RDt,tickMethod:HDt,tickCount:5}}chooseTransforms(){return[Rc,Rc]}clone(){return new or(this.options)}}class WA extends YA{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,padding:0,unknown:Gm,paddingInner:1,paddingOuter:0}}constructor(n){super(n)}getPaddingInner(){return 1}clone(){return new WA(this.options)}update(n){super.update(n)}getPaddingOuter(){return this.options.padding}}var gF=globalThis&&globalThis.__read||function(t,n){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var r=e.call(t),i,a=[],o;try{for(;(n===void 0||n-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(o)throw o.error}}return a},ZDt=function(t,n,e,r,i){var a=new or({range:[n,n+r]}),o=new or({range:[e,e+i]});return{transform:function(s){var l=gF(s,2),c=l[0],u=l[1];return[a.map(c),o.map(u)]},untransform:function(s){var l=gF(s,2),c=l[0],u=l[1];return[a.invert(c),o.invert(u)]}}},KDt=globalThis&&globalThis.__read||function(t,n){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var r=e.call(t),i,a=[],o;try{for(;(n===void 0||n-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(o)throw o.error}}return a},QDt=function(t,n,e,r,i){var a=KDt(t,1),o=a[0];return o(n,e,r,i)},JDt=globalThis&&globalThis.__read||function(t,n){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var r=e.call(t),i,a=[],o;try{for(;(n===void 0||n-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(o)throw o.error}}return a},tRt=function(t,n,e,r,i){var a=JDt(t,1),o=a[0];return o},zx=globalThis&&globalThis.__read||function(t,n){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var r=e.call(t),i,a=[],o;try{for(;(n===void 0||n-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(o)throw o.error}}return a},eRt=function(t,n,e,r,i){var a=zx(t,4),o=a[0],s=a[1],l=a[2],c=a[3],u=new or({range:[l,c]}),f=new or({range:[o,s]}),h=i/r,d=h>1?1:h,p=h>1?1/h:1;return{transform:function(v){var g=zx(v,2),y=g[0],m=g[1],x=f.map(y),b=u.map(m),w=b*Math.cos(x)*d,S=b*Math.sin(x)*p,O=w*.5+.5,M=S*.5+.5;return[O,M]},untransform:function(v){var g=zx(v,2),y=g[0],m=g[1],x=(y-.5)*2/d,b=(m-.5)*2/p,w=Math.sqrt(Math.pow(x,2)+Math.pow(b,2)),S=Math.atan2(b,x),O=aY(S,o,s),M=f.invert(O),A=u.invert(w);return[M,A]}}},yF=globalThis&&globalThis.__read||function(t,n){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var r=e.call(t),i,a=[],o;try{for(;(n===void 0||n-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(o)throw o.error}}return a},nRt=function(t,n,e,r,i){return{transform:function(a){var o=yF(a,2),s=o[0],l=o[1];return[l,s]},untransform:function(a){var o=yF(a,2),s=o[0],l=o[1];return[l,s]}}},rRt=globalThis&&globalThis.__read||function(t,n){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var r=e.call(t),i,a=[],o;try{for(;(n===void 0||n-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(o)throw o.error}}return a},Ym=function(t,n,e,r,i){var a=rRt(t,2),o=a[0],s=a[1],l=Eu();return gR(l,[o,s])},VA=globalThis&&globalThis.__read||function(t,n){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var r=e.call(t),i,a=[],o;try{for(;(n===void 0||n-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(o)throw o.error}}return a},HA=globalThis&&globalThis.__spreadArray||function(t,n,e){if(e||arguments.length===2)for(var r=0,i=n.length,a;r<i;r++)(a||!(r in n))&&(a||(a=Array.prototype.slice.call(n,0,r)),a[r]=n[r]);return t.concat(a||Array.prototype.slice.call(n))},iRt=function(t){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];return Ym.apply(void 0,HA([[-1,-1]],VA(n),!1))},aRt=function(t){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];return Ym.apply(void 0,HA([[-1,1]],VA(n),!1))},oRt=function(t){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];return Ym.apply(void 0,HA([[1,-1]],VA(n),!1))},sRt=globalThis&&globalThis.__read||function(t,n){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var r=e.call(t),i,a=[],o;try{for(;(n===void 0||n-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(o)throw o.error}}return a},lRt=function(t,n,e,r,i){var a=sRt(t,1),o=a[0],s=Eu();return vR(s,o)},Gx=globalThis&&globalThis.__read||function(t,n){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var r=e.call(t),i,a=[],o;try{for(;(n===void 0||n-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(o)throw o.error}}return a},cRt=function(t,n,e,r,i){var a=Gx(t,4),o=a[0],s=a[1],l=a[2],c=a[3],u=(s-0)/(2*Math.PI)+1,f=(c-l)/u,h=f/(Math.PI*2),d=new or({range:[l,l+f*.99]}),p=new or({range:[o,s]}),v=i/r,g=v>1?1:v,y=v>1?1/v:1;return{transform:function(m){var x=Gx(m,2),b=x[0],w=x[1],S=p.map(b),O=d.map(w),M=Math.cos(S)*(h*S+O)*g,A=Math.sin(S)*(h*S+O)*y,T=M*.5+.5,C=A*.5+.5;return[T,C]},untransform:function(m){var x=Gx(m,2),b=x[0],w=x[1],S=(b-.5)*2/g,O=(w-.5)*2/y,M=Math.sqrt(Math.pow(S,2)+Math.pow(O,2)),A=Math.atan2(O,S)+Math.floor(M/f)*Math.PI*2,T=aY(A,o,s),C=M-h*T,P=p.invert(T),_=d.invert(C);return[P,_]}}},uRt=globalThis&&globalThis.__read||function(t,n){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var r=e.call(t),i,a=[],o;try{for(;(n===void 0||n-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(o)throw o.error}}return a},fRt=function(t,n,e,r,i){var a=uRt(t,4),o=a[0],s=a[1],l=a[2],c=a[3],u=new or({range:[l,c]});return{transform:function(f){for(var h=[],d=f.length,p=new WA({domain:new Array(d).fill(0).map(function(x,b){return b}),range:[o,s]}),v=0;v<d;v++){var g=f[v],y=p.map(v),m=u.map(g);h.push(y,m)}return h},untransform:function(f){for(var h=[],d=0;d<f.length;d+=2){var p=f[d+1];h.push(u.invert(p))}return h}}},_c=globalThis&&globalThis.__read||function(t,n){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var r=e.call(t),i,a=[],o;try{for(;(n===void 0||n-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(o)throw o.error}}return a};function sY(t){return 1/Math.tan(t)}var hRt=function(t,n,e,r,i){var a=_c(t,1),o=a[0],s=sY(o);return{transform:function(l){var c=_c(l,2),u=c[0],f=c[1],h=u+f*s;return[h,f]},untransform:function(l){var c=_c(l,2),u=c[0],f=c[1],h=u-f*s;return[h,f]}}},dRt=function(t,n,e,r,i){var a=_c(t,1),o=a[0],s=sY(o);return{transform:function(l){var c=_c(l,2),u=c[0],f=c[1],h=f+u*s;return[u,h]},untransform:function(l){var c=_c(l,2),u=c[0],f=c[1],h=f-u*s;return[u,h]}}},fi=globalThis&&globalThis.__read||function(t,n){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var r=e.call(t),i,a=[],o;try{for(;(n===void 0||n-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(o)throw o.error}}return a};function rd(t,n,e,r,i){var a=t<n,o=(a?n-r:i-n)||i-r,s=a?-1:1;return s*o*(e+1)/(e+o/((t-n)*s))+n}function id(t,n,e,r,i){var a=t<n,o=(a?n-r:i-n)||i-r,s=a?-1:1;return o/(o*(e+1)/(t-n)-e*s)+n}function by(t,n,e){if(!e)return t;var r=new or({range:[0,1],domain:[0,n]});return r.map(t)}var pRt=function(t,n,e,r,i){var a=fi(t,3),o=a[0],s=a[1],l=a[2],c=l===void 0?!1:l,u=by(o,r,c);return{transform:function(f){var h=fi(f,2),d=h[0],p=h[1],v=rd(d,u,s,0,1);return[v,p]},untransform:function(f){var h=fi(f,2),d=h[0],p=h[1],v=id(d,u,s,0,1);return[v,p]}}},vRt=function(t,n,e,r,i){var a=fi(t,3),o=a[0],s=a[1],l=a[2],c=l===void 0?!1:l,u=by(o,i,c);return{transform:function(f){var h=fi(f,2),d=h[0],p=h[1],v=rd(p,u,s,0,1);return[d,v]},untransform:function(f){var h=fi(f,2),d=h[0],p=h[1],v=id(p,u,s,0,1);return[d,v]}}},gRt=function(t,n,e,r,i){var a=fi(t,5),o=a[0],s=a[1],l=a[2],c=a[3],u=a[4],f=u===void 0?!1:u,h=by(o,r,f),d=by(s,i,f);return{transform:function(p){var v=fi(p,2),g=v[0],y=v[1],m=rd(g,h,l,0,1),x=rd(y,d,c,0,1);return[m,x]},untransform:function(p){var v=fi(p,2),g=v[0],y=v[1],m=id(g,h,l,0,1),x=id(y,d,c,0,1);return[m,x]}}},yRt=function(t,n,e,r,i){var a=fi(t,5),o=a[0],s=a[1],l=a[2],c=a[3],u=a[4],f=u===void 0?!1:u,h=new or({range:[0,r]}),d=new or({range:[0,i]}),p=f?o:h.map(o),v=f?s:d.map(s);return{transform:function(g){var y=fi(g,2),m=y[0],x=y[1],b=h.map(m)-p,w=d.map(x)-v,S=Math.sqrt(b*b+w*w);if(S>l)return[m,x];var O=rd(S,0,c,0,l),M=Math.atan2(w,b),A=p+O*Math.cos(M),T=v+O*Math.sin(M);return[h.invert(A),d.invert(T)]},untransform:function(g){var y=fi(g,2),m=y[0],x=y[1],b=h.map(m)-p,w=d.map(x)-v,S=Math.sqrt(b*b+w*w);if(S>l)return[m,x];var O=id(S,0,c,0,l),M=Math.atan2(w,b),A=p+O*Math.cos(M),T=v+O*Math.sin(M);return[h.invert(A),d.invert(T)]}}},mF=globalThis&&globalThis.__read||function(t,n){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var r=e.call(t),i,a=[],o;try{for(;(n===void 0||n-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(o)throw o.error}}return a},mRt=function(t,n,e,r,i,a,o){var s=new or({range:[n,n+i]}),l=new or({range:[e,e+a]}),c=new or({range:[r,r+o]});return{transform:function(u){var f=mF(u,3),h=f[0],d=f[1],p=f[2];return[s.map(h),l.map(d),c.map(p)]},untransform:function(u){var f=mF(u,3),h=f[0],d=f[1],p=f[2];return[s.invert(h),l.invert(d),c.invert(p)]}}},xRt=globalThis&&globalThis.__read||function(t,n){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var r=e.call(t),i,a=[],o;try{for(;(n===void 0||n-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(o)throw o.error}}return a},bRt=function(t,n,e,r,i,a,o){var s=xRt(t,3),l=s[0],c=s[1],u=s[2];return cS(pe(),[l,c,u])},xF=globalThis&&globalThis.__read||function(t,n){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var r=e.call(t),i,a=[],o;try{for(;(n===void 0||n-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(o)throw o.error}}return a},wRt=function(t,n,e,r,i,a,o){return{transform:function(s){var l=xF(s,3),c=l[0],u=l[1],f=l[2];return[u,c,f]},untransform:function(s){var l=xF(s,3),c=l[0],u=l[1],f=l[2];return[u,c,f]}}},SRt=globalThis&&globalThis.__read||function(t,n){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var r=e.call(t),i,a=[],o;try{for(;(n===void 0||n-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(o)throw o.error}}return a},ORt=function(t,n,e,r,i,a,o){var s=SRt(t,3),l=s[0],c=s[1],u=s[2];return uS(pe(),[l,c,u])},ql=globalThis&&globalThis.__read||function(t,n){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var r=e.call(t),i,a=[],o;try{for(;(n===void 0||n-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(o)throw o.error}}return a},Zl=globalThis&&globalThis.__spreadArray||function(t,n,e){if(e||arguments.length===2)for(var r=0,i=n.length,a;r<i;r++)(a||!(r in n))&&(a||(a=Array.prototype.slice.call(n,0,r)),a[r]=n[r]);return t.concat(a||Array.prototype.slice.call(n))},MRt=globalThis&&globalThis.__values||function(t){var n=typeof Symbol=="function"&&Symbol.iterator,e=n&&t[n],r=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")},ARt=function(){function t(n){this.options={x:0,y:0,width:300,height:150,transformations:[]},this.transformers={cartesian:ZDt,translate:kDt,custom:QDt,matrix:tRt,polar:eRt,transpose:nRt,scale:Ym,"shear.x":hRt,"shear.y":dRt,reflect:iRt,"reflect.x":aRt,"reflect.y":oRt,rotate:lRt,helix:cRt,parallel:fRt,fisheye:gRt,"fisheye.x":pRt,"fisheye.y":vRt,"fisheye.circular":yRt},this.update(n)}return t.prototype.update=function(n){this.options=ot({},this.options,n),this.recoordinate()},t.prototype.clone=function(){return new t(this.options)},t.prototype.getOptions=function(){return this.options},t.prototype.clear=function(){this.update({transformations:[]})},t.prototype.getSize=function(){var n=this.options,e=n.width,r=n.height;return[e,r]},t.prototype.getCenter=function(){var n=this.options,e=n.x,r=n.y,i=n.width,a=n.height;return[(e*2+i)/2,(r*2+a)/2]},t.prototype.transform=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var r=this.options.transformations;return this.update({transformations:Zl(Zl([],ql(r),!1),[Zl([],ql(n),!1)],!1)}),this},t.prototype.map=function(n){return this.output(n)},t.prototype.invert=function(n){return this.input(n)},t.prototype.recoordinate=function(){this.output=this.compose(),this.input=this.compose(!0)},t.prototype.compose=function(n){var e,r;n===void 0&&(n=!1);var i=n?Zl([],ql(this.options.transformations),!1).reverse():this.options.transformations,a=n?function(O){return O.untransform}:function(O){return O.transform},o=[],s=[],l=function(O,M){return M===void 0&&(M=!0),s.push(M?TDt(O):O)};try{for(var c=MRt(i),u=c.next();!u.done;u=c.next()){var f=ql(u.value),h=f[0],d=f.slice(1),p=this.transformers[h];if(p){var v=this.options,g=v.x,y=v.y,m=v.width,x=v.height,b=p(Zl([],ql(d),!1),g,y,m,x);if(nY(b))o.push(b);else{if(o.length){var w=this.createMatrixTransform(o,n);l(w),o.splice(0,o.length)}var S=a(b)||Rc;l(S,h!=="parallel")}}}}catch(O){e={error:O}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(e)throw e.error}}if(o.length){var S=this.createMatrixTransform(o,n);l(S)}return eY.apply(void 0,Zl([],ql(s),!1))},t.prototype.createMatrixTransform=function(n,e){var r=Eu();return e&&n.reverse(),n.forEach(function(i){return KX(r,r,i)}),e&&dR(r,qX(r)),function(i){var a=[i[0],i[1],1];return ol(a,a,r),[a[0],a[1]]}},t}(),Kl=globalThis&&globalThis.__read||function(t,n){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var r=e.call(t),i,a=[],o;try{for(;(n===void 0||n-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(o)throw o.error}}return a},Ql=globalThis&&globalThis.__spreadArray||function(t,n,e){if(e||arguments.length===2)for(var r=0,i=n.length,a;r<i;r++)(a||!(r in n))&&(a||(a=Array.prototype.slice.call(n,0,r)),a[r]=n[r]);return t.concat(a||Array.prototype.slice.call(n))},ERt=globalThis&&globalThis.__values||function(t){var n=typeof Symbol=="function"&&Symbol.iterator,e=n&&t[n],r=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")},TRt=function(){function t(n){this.options={x:0,y:0,z:0,width:300,height:150,depth:150,transformations:[]},this.transformers={cartesian3D:mRt,translate3D:bRt,scale3D:ORt,transpose3D:wRt},this.update(n)}return t.prototype.update=function(n){this.options=ot({},this.options,n),this.recoordinate()},t.prototype.clone=function(){return new t(this.options)},t.prototype.getOptions=function(){return this.options},t.prototype.clear=function(){this.update({transformations:[]})},t.prototype.getSize=function(){var n=this.options,e=n.width,r=n.height,i=n.depth;return[e,r,i]},t.prototype.getCenter=function(){var n=this.options,e=n.x,r=n.y,i=n.z,a=n.width,o=n.height,s=n.depth;return[(e*2+a)/2,(r*2+o)/2,(i*2+s)/2]},t.prototype.transform=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var r=this.options.transformations;return this.update({transformations:Ql(Ql([],Kl(r),!1),[Ql([],Kl(n),!1)],!1)}),this},t.prototype.map=function(n){return this.output(n)},t.prototype.invert=function(n){return this.input(n)},t.prototype.recoordinate=function(){this.output=this.compose(),this.input=this.compose(!0)},t.prototype.compose=function(n){var e,r;n===void 0&&(n=!1);var i=n?Ql([],Kl(this.options.transformations),!1).reverse():this.options.transformations,a=n?function(A){return A.untransform}:function(A){return A.transform},o=[],s=[],l=function(A,T){return T===void 0&&(T=!0),s.push(T?CDt(A):A)};try{for(var c=ERt(i),u=c.next();!u.done;u=c.next()){var f=Kl(u.value),h=f[0],d=f.slice(1),p=this.transformers[h];if(p){var v=this.options,g=v.x,y=v.y,m=v.z,x=v.width,b=v.height,w=v.depth,S=p(Ql([],Kl(d),!1),g,y,m,x,b,w);if(nY(S))o.push(S);else{if(o.length){var O=this.createMatrixTransform(o,n);l(O),o.splice(0,o.length)}var M=a(S)||Rc;l(M,!0)}}}}catch(A){e={error:A}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(e)throw e.error}}if(o.length){var M=this.createMatrixTransform(o,n);l(M)}return eY.apply(void 0,Ql([],Kl(s),!1))},t.prototype.createMatrixTransform=function(n,e){var r=pe();return e&&n.reverse(),n.forEach(function(i){return CR(r,r,i)}),e&&_i(r,lS(r)),function(i){var a=[i[0],i[1],i[2],1];return uc(a,a,r),[a[0],a[1],a[2]]}},t}(),CRt=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};function Wu(t){return(n,...e)=>nt({},t(n,...e),n)}function Vu(t){return(n,...e)=>nt({},n,t(n,...e))}function XA(t,n){if(!t)return n;if(Array.isArray(t))return t;const{value:e=n}=t,r=CRt(t,["value"]);return Object.assign(Object.assign({},r),{value:e})}var PRt=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};const lY=()=>t=>{const{children:n}=t;if(!Array.isArray(n))return[];const{x:e=0,y:r=0,width:i,height:a,data:o}=t;return n.map(s=>{var{data:l,x:c,y:u,width:f,height:h}=s,d=PRt(s,["data","x","y","width","height"]);return Object.assign(Object.assign({},d),{data:XA(l,o),x:c??e,y:u??r,width:f??i,height:h??a})})};lY.props={};var kRt=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};const cY=()=>t=>{const{children:n}=t;if(!Array.isArray(n))return[];const{direction:e="row",ratio:r=n.map(()=>1),padding:i=0,data:a}=t,[o,s,l,c]=e==="col"?["y","height","width","x"]:["x","width","height","y"],u=r.reduce((v,g)=>v+g),f=t[s]-i*(n.length-1),h=r.map(v=>f*(v/u)),d=[];let p=t[o]||0;for(let v=0;v<h.length;v+=1){const g=n[v],{data:y}=g,m=kRt(g,["data"]),x=XA(y,a);d.push(Object.assign({[o]:p,[s]:h[v],[c]:t[c]||0,[l]:t[l],data:x},m)),p+=h[v]+i}return d};cY.props={};var Yx=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};const uY=()=>t=>{const{children:n}=t,e=Yx(t,["children"]);if(!Array.isArray(n))return[];const{data:r,scale:i={},axis:a={},legend:o={},encode:s={},transform:l=[]}=e,c=Yx(e,["data","scale","axis","legend","encode","transform"]),u=n.map(f=>{var{data:h,scale:d={},axis:p={},legend:v={},encode:g={},transform:y=[]}=f,m=Yx(f,["data","scale","axis","legend","encode","transform"]);return Object.assign({data:XA(h,r),scale:nt({},i,d),encode:nt({},s,g),transform:[...l,...y],axis:p&&a?nt({},a,p):!1,legend:v&&o?nt({},o,v):!1},m)});return[Object.assign(Object.assign({},c),{marks:u,type:"standardView"})]};uY.props={};var _Rt=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};const fY=({static:t=!1}={})=>n=>{const{width:e,height:r,depth:i,paddingLeft:a,paddingRight:o,paddingTop:s,paddingBottom:l,padding:c,inset:u,insetLeft:f,insetTop:h,insetRight:d,insetBottom:p,margin:v,marginLeft:g,marginBottom:y,marginTop:m,marginRight:x,data:b,coordinate:w,theme:S,component:O,interaction:M,x:A,y:T,z:C,key:P,frame:_,labelTransform:k,parentKey:I,clip:L,viewStyle:F,title:B}=n,D=_Rt(n,["width","height","depth","paddingLeft","paddingRight","paddingTop","paddingBottom","padding","inset","insetLeft","insetTop","insetRight","insetBottom","margin","marginLeft","marginBottom","marginTop","marginRight","data","coordinate","theme","component","interaction","x","y","z","key","frame","labelTransform","parentKey","clip","viewStyle","title"]);return[Object.assign(Object.assign({type:"standardView",x:A,y:T,z:C,key:P,width:e,height:r,depth:i,padding:c,paddingLeft:a,paddingRight:o,paddingTop:s,inset:u,insetLeft:f,insetTop:h,insetRight:d,insetBottom:p,paddingBottom:l,theme:S,coordinate:w,component:O,interaction:M,frame:_,labelTransform:k,margin:v,marginLeft:g,marginBottom:y,marginTop:m,marginRight:x,parentKey:I,clip:L,style:F},!t&&{title:B}),{marks:[Object.assign(Object.assign(Object.assign({},D),{key:`${P}-0`,data:b}),t&&{title:B})]})]};fY.props={};class Qd{constructor(n){this.$value=n}static of(n){return new Qd(n)}call(n,...e){return this.$value=n(this.$value,...e),this}value(){return this.$value}}var LRt=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};const IRt=Wu(t=>{const{encode:n,data:e,scale:r,shareSize:i=!1}=t,{x:a,y:o}=n,s=(l,c)=>{var u;if(l===void 0||!i)return{};const f=Be(e,p=>p[l]),h=((u=r==null?void 0:r[c])===null||u===void 0?void 0:u.domain)||Array.from(f.keys()),d=h.map(p=>f.has(p)?f.get(p).length:1);return{domain:h,flex:d}};return{scale:{x:Object.assign(Object.assign({paddingOuter:0,paddingInner:.1,guide:a===void 0?null:{position:"top"}},a===void 0&&{paddingInner:0}),s(a,"x")),y:Object.assign(Object.assign({range:[0,1],paddingOuter:0,paddingInner:.1,guide:o===void 0?null:{position:"right"}},o===void 0&&{paddingInner:0}),s(o,"y"))}}}),UA=Wu(t=>{const{data:n,scale:e}=t,r=[t];let i,a,o;for(;r.length;){const f=r.shift(),{children:h,encode:d={},scale:p={},legend:v={}}=f,{color:g}=d,{color:y}=p,{color:m}=v;g!==void 0&&(i=g),y!==void 0&&(a=y),m!==void 0&&(o=m),Array.isArray(h)&&r.push(...h)}const s=()=>{var f;const h=(f=e==null?void 0:e.color)===null||f===void 0?void 0:f.domain;if(h!==void 0)return[h];if(i===void 0)return[void 0];const d=typeof i=="function"?i:v=>v[i],p=n.map(d);return p.some(v=>typeof v=="number")?[Wa(p)]:[Array.from(new Set(p)),"ordinal"]},l=typeof i=="string"?i:"",[c,u]=s();return{encode:{color:i},scale:{color:nt({},a,{domain:c,type:u})},legend:{color:nt({title:l},o)}}}),qA=Wu(()=>({animate:{enterType:"fadeIn"}})),ZA=Vu(()=>({frame:!1,encode:{shape:"hollow"},style:{lineWidth:0}})),KA=Vu(()=>({type:"cell"})),hY=Vu(t=>{const{data:n}=t;return{data:{type:"inline",value:n,transform:[{type:"custom",callback:()=>{const{data:r,encode:i}=t,{x:a,y:o}=i,s=a?Array.from(new Set(r.map(u=>u[a]))):[],l=o?Array.from(new Set(r.map(u=>u[o]))):[];return(()=>{if(s.length&&l.length){const u=[];for(const f of s)for(const h of l)u.push({[a]:f,[o]:h});return u}if(s.length)return s.map(u=>({[a]:u}));if(l.length)return l.map(u=>({[o]:u}))})()}}]}}}),dY=Vu((t,n=FRt,e=DRt,r=RRt,i={})=>{const{data:a,encode:o,children:s,scale:l,x:c=0,y:u=0,shareData:f=!1,key:h}=t,{value:d}=a,{x:p,y:v}=o,{color:g}=l,{domain:y}=g;return{children:(x,b,w)=>{const{x:S,y:O}=b,{paddingLeft:M,paddingTop:A,marginLeft:T,marginTop:C}=w,{domain:P}=S.getOptions(),{domain:_}=O.getOptions(),k=Fl(x),I=x.map(n),L=x.map(({x:Y,y:W})=>[S.invert(Y),O.invert(W)]),B=L.map(([Y,W])=>V=>{const{[p]:H,[v]:Q}=V;return(p!==void 0?H===Y:!0)&&(v!==void 0?Q===W:!0)}).map(Y=>d.filter(Y)),D=f?he(B,Y=>Y.length):void 0,N=L.map(([Y,W])=>({columnField:p,columnIndex:P.indexOf(Y),columnValue:Y,columnValuesLength:P.length,rowField:v,rowIndex:_.indexOf(W),rowValue:W,rowValuesLength:_.length})),j=N.map(Y=>Array.isArray(s)?s:[s(Y)].flat(1));return k.flatMap(Y=>{const[W,V,H,Q]=I[Y],Z=N[Y],q=B[Y];return j[Y].map(it=>{var ft,yt,{scale:mt,key:St,facet:Wt=!0,axis:Ft={},legend:ne={}}=it,Je=LRt(it,["scale","key","facet","axis","legend"]);const ur=((ft=mt==null?void 0:mt.y)===null||ft===void 0?void 0:ft.guide)||Ft.y,Oa=((yt=mt==null?void 0:mt.x)===null||yt===void 0?void 0:yt.guide)||Ft.x,Os={x:{tickCount:p?5:void 0},y:{tickCount:v?5:void 0}},Qn=Wt?q:q.length===0?[]:d,Jr={color:{domain:y}},le={x:bF(Oa,e)(Z,Qn),y:bF(ur,r)(Z,Qn)};return Object.assign(Object.assign({key:`${St}-${Y}`,data:Qn,margin:0,x:W+M+c+T,y:V+A+u+C,parentKey:h,width:H,height:Q,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,frame:!!Qn.length,dataDomain:D,scale:nt(Os,mt,Jr),axis:nt({},Ft,le),legend:!1},Je),i)})})}}});function FRt(t){const{points:n}=t;return PM(n)}function Wm(t,n){return n.length?nt({title:!1,tick:null,label:null},t):nt({title:!1,tick:null,label:null,grid:null},t)}function DRt(t){return(n,e)=>{const{rowIndex:r,rowValuesLength:i,columnIndex:a,columnValuesLength:o}=n;if(r!==i-1)return Wm(t,e);const s=a!==o-1?!1:void 0,l=e.length?void 0:null;return nt({title:s,grid:l},t)}}function RRt(t){return(n,e)=>{const{rowIndex:r,columnIndex:i}=n;if(i!==0)return Wm(t,e);const a=r!==0?!1:void 0,o=e.length?void 0:null;return nt({title:a,grid:o},t)}}function bF(t,n){return typeof t=="function"?t:t===null||t===!1?()=>null:n(t)}const pY=()=>t=>[Qd.of(t).call(KA).call(UA).call(qA).call(IRt).call(ZA).call(hY).call(dY).value()];pY.props={};var v2=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};const BRt=Wu(t=>({scale:{x:{guide:null,paddingOuter:0,paddingInner:.1},y:{guide:null,range:[0,1],paddingOuter:0,paddingInner:.1}}})),NRt=Vu(t=>{const{data:n,children:e,x:r=0,y:i=0,key:a}=t;return{children:(s,l,c)=>{const{x:u,y:f}=l,{paddingLeft:h,paddingTop:d,marginLeft:p,marginTop:v}=c,{domain:g}=u.getOptions(),{domain:y}=f.getOptions(),m=Fl(s),x=s.map(({points:O})=>PM(O)),b=s.map(({x:O,y:M})=>[u.invert(O),f.invert(M)]),w=b.map(([O,M])=>({columnField:O,columnIndex:g.indexOf(O),columnValue:O,columnValuesLength:g.length,rowField:M,rowIndex:y.indexOf(M),rowValue:M,rowValuesLength:y.length})),S=w.map(O=>Array.isArray(e)?e:[e(O)].flat(1));return m.flatMap(O=>{const[M,A,T,C]=x[O],[P,_]=b[O],k=w[O];return S[O].map(L=>{var F,B;const{scale:D,key:N,encode:j,axis:Y,interaction:W}=L,V=v2(L,["scale","key","encode","axis","interaction"]),H=(F=D==null?void 0:D.y)===null||F===void 0?void 0:F.guide,Q=(B=D==null?void 0:D.x)===null||B===void 0?void 0:B.guide,Z={x:{facet:!1},y:{facet:!1}},q={x:jRt(Q)(k,n),y:zRt(H)(k,n)},rt={x:{tickCount:5},y:{tickCount:5}};return Object.assign({data:n,parentKey:a,key:`${N}-${O}`,x:M+h+r+p,y:A+d+i+v,width:T,height:C,margin:0,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,frame:!0,scale:nt(Z,D),axis:nt(rt,Y,q),legend:!1,encode:nt({},j,{x:P,y:_}),interaction:nt({},W,{legendFilter:!1})},V)})})}}}),$Rt=Vu(t=>{const{encode:n}=t,e=v2(t,["encode"]),{position:r=[],x:i=r,y:a=[...r].reverse()}=n,o=v2(n,["position","x","y"]),s=[];for(const l of[i].flat(1))for(const c of[a].flat(1))s.push({$x:l,$y:c});return Object.assign(Object.assign({},e),{data:s,encode:Object.assign(Object.assign({},o),{x:"$x",y:"$y"}),scale:Object.assign(Object.assign({},[i].flat(1).length===1&&{x:{paddingInner:0}}),[a].flat(1).length===1&&{y:{paddingInner:0}})})});function jRt(t){return typeof t=="function"?t:t===null?()=>null:(n,e)=>{const{rowIndex:r,rowValuesLength:i}=n;if(r!==i-1)return Wm(t,e)}}function zRt(t){return typeof t=="function"?t:t===null?()=>null:(n,e)=>{const{columnIndex:r}=n;if(r!==0)return Wm(t,e)}}const GRt=()=>t=>[Qd.of(t).call(KA).call(UA).call(NRt).call($Rt).call(qA).call(ZA).call(BRt).value()];var YRt=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};const WRt=Wu(t=>({scale:{x:{guide:{type:"axisArc"},paddingOuter:0,paddingInner:.1},y:{guide:null,range:[0,1],paddingOuter:0,paddingInner:.1}}})),VRt=Wu(t=>({coordinate:{type:"polar"}})),HRt=t=>{const{encode:n}=t,e=YRt(t,["encode"]),{position:r}=n;return Object.assign(Object.assign({},e),{encode:{x:r}})};function wF(t){return n=>null}function XRt(t){const{points:n}=t,[e,r,i,a]=n,o=Re(e,a),s=Ue(e,a),l=Ue(r,i),c=qj(s,l),u=1/Math.sin(c/2),f=o/(1+u),h=f*Math.sqrt(2),[d,p]=i,g=au(s)+c/2,y=f*u,m=d+y*Math.sin(g),x=p-y*Math.cos(g);return[m-h/2,x-h/2,h,h]}const URt=()=>t=>[Qd.of(t).call(KA).call(HRt).call(UA).call(VRt).call(hY).call(dY,XRt,wF,wF,{frame:!1}).call(qA).call(ZA).call(WRt).value()];function qRt(t,n,e){const i=e,a=[0,i],o=[-i+1,-0+1];if(t==="normal")return a;if(t==="reverse")return o;if(t==="alternate")return n%2===0?a:o;if(t==="reverse-alternate")return n%2===0?o:a}function ZRt(t,n,e){const r=[t];for(;r.length;){const i=r.pop();i.animate=nt({enter:{duration:n},update:{duration:n,easing:e,type:"morphing",fill:"both"},exit:{type:"fadeOut",duration:n}},i.animate||{});const{children:a}=i;Array.isArray(a)&&r.push(...a)}return t}const vY=()=>t=>{const{children:n=[],duration:e=1e3,iterationCount:r=1,direction:i="normal",easing:a="ease-in-out-sine"}=t,o=n.length;if(!Array.isArray(n)||o===0)return[];const{key:s}=n[0],l=n.map(c=>Object.assign(Object.assign({},c),{key:s})).map(c=>ZRt(c,e,a));return function*(){let c=0,u;for(;r==="infinite"||c<r;){const[f,h]=qRt(i,c,o);for(let d=f;d<h;d+=1){const p=Math.abs(d);u!==p&&(yield l[p]),u=p}c++}}};vY.props={};var KRt=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};const gY=()=>t=>{const{type:n,data:e,scale:r,encode:i,style:a,animate:o,key:s,state:l}=t,c=KRt(t,["type","data","scale","encode","style","animate","key","state"]);return[Object.assign(Object.assign({type:"geoView"},c),{children:[{type:"geoPath",key:`${s}-0`,data:{value:e},scale:r,encode:i,style:a,animate:o,state:l}]})]};gY.props={};class Ml{constructor(){this._partials=new Float64Array(32),this._n=0}add(n){const e=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const a=e[i],o=n+a,s=Math.abs(n)<Math.abs(a)?n-(o-a):a-(o-n);s&&(e[r++]=s),n=o}return e[r]=n,this._n=r+1,this}valueOf(){const n=this._partials;let e=this._n,r,i,a,o=0;if(e>0){for(o=n[--e];e>0&&(r=o,i=n[--e],o=r+i,a=i-(o-r),!a););e>0&&(a<0&&n[e-1]<0||a>0&&n[e-1]>0)&&(i=a*2,r=o+i,i==r-o&&(o=r))}return o}}function*QRt(t){for(const n of t)yield*n}function yY(t){return Array.from(QRt(t))}function gc(t,n,e){t=+t,n=+n,e=(i=arguments.length)<2?(n=t,t=0,1):i<3?1:+e;for(var r=-1,i=Math.max(0,Math.ceil((n-t)/e))|0,a=new Array(i);++r<i;)a[r]=t+r*e;return a}var At=1e-6,mY=1e-12,Gt=Math.PI,en=Gt/2,SF=Gt/4,Xr=Gt*2,Yn=180/Gt,He=Gt/180,oe=Math.abs,Hu=Math.atan,io=Math.atan2,jt=Math.cos,Sv=Math.ceil,xY=Math.exp,wy=Math.log,Wx=Math.pow,Rt=Math.sin,li=Math.sign||function(t){return t>0?1:t<0?-1:0},Tr=Math.sqrt,QA=Math.tan;function bY(t){return t>1?0:t<-1?Gt:Math.acos(t)}function gi(t){return t>1?en:t<-1?-en:Math.asin(t)}function ci(){}function Sy(t,n){t&&MF.hasOwnProperty(t.type)&&MF[t.type](t,n)}var OF={Feature:function(t,n){Sy(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,r=-1,i=e.length;++r<i;)Sy(e[r].geometry,n)}},MF={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)t=e[r],n.point(t[0],t[1],t[2])},LineString:function(t,n){g2(t.coordinates,n,0)},MultiLineString:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)g2(e[r],n,0)},Polygon:function(t,n){AF(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)AF(e[r],n)},GeometryCollection:function(t,n){for(var e=t.geometries,r=-1,i=e.length;++r<i;)Sy(e[r],n)}};function g2(t,n,e){var r=-1,i=t.length-e,a;for(n.lineStart();++r<i;)a=t[r],n.point(a[0],a[1],a[2]);n.lineEnd()}function AF(t,n){var e=-1,r=t.length;for(n.polygonStart();++e<r;)g2(t[e],n,1);n.polygonEnd()}function oc(t,n){t&&OF.hasOwnProperty(t.type)?OF[t.type](t,n):Sy(t,n)}function y2(t){return[io(t[1],t[0]),gi(t[2])]}function yu(t){var n=t[0],e=t[1],r=jt(e);return[r*jt(n),r*Rt(n),Rt(e)]}function Ov(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function Oy(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function Vx(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]}function Mv(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function m2(t){var n=Tr(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}function x2(t,n){function e(r,i){return r=t(r,i),n(r[0],r[1])}return t.invert&&n.invert&&(e.invert=function(r,i){return r=n.invert(r,i),r&&t.invert(r[0],r[1])}),e}function b2(t,n){return oe(t)>Gt&&(t-=Math.round(t/Xr)*Xr),[t,n]}b2.invert=b2;function wY(t,n,e){return(t%=Xr)?n||e?x2(TF(t),CF(n,e)):TF(t):n||e?CF(n,e):b2}function EF(t){return function(n,e){return n+=t,oe(n)>Gt&&(n-=Math.round(n/Xr)*Xr),[n,e]}}function TF(t){var n=EF(t);return n.invert=EF(-t),n}function CF(t,n){var e=jt(t),r=Rt(t),i=jt(n),a=Rt(n);function o(s,l){var c=jt(l),u=jt(s)*c,f=Rt(s)*c,h=Rt(l),d=h*e+u*r;return[io(f*i-d*a,u*e-h*r),gi(d*i+f*a)]}return o.invert=function(s,l){var c=jt(l),u=jt(s)*c,f=Rt(s)*c,h=Rt(l),d=h*i-f*a;return[io(f*i+h*a,u*e+d*r),gi(d*e-u*r)]},o}function JRt(t){t=wY(t[0]*He,t[1]*He,t.length>2?t[2]*He:0);function n(e){return e=t(e[0]*He,e[1]*He),e[0]*=Yn,e[1]*=Yn,e}return n.invert=function(e){return e=t.invert(e[0]*He,e[1]*He),e[0]*=Yn,e[1]*=Yn,e},n}function t5t(t,n,e,r,i,a){if(e){var o=jt(n),s=Rt(n),l=r*e;i==null?(i=n+r*Xr,a=n-l/2):(i=PF(o,i),a=PF(o,a),(r>0?i<a:i>a)&&(i+=r*Xr));for(var c,u=i;r>0?u>a:u<a;u-=l)c=y2([o,-s*jt(u),-s*Rt(u)]),t.point(c[0],c[1])}}function PF(t,n){n=yu(n),n[0]-=t,m2(n);var e=bY(-n[1]);return((-n[2]<0?-e:e)+Xr-At)%Xr}function SY(){var t=[],n;return{point:function(e,r,i){n.push([e,r,i])},lineStart:function(){t.push(n=[])},lineEnd:ci,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var e=t;return t=[],n=null,e}}}function ig(t,n){return oe(t[0]-n[0])<At&&oe(t[1]-n[1])<At}function Av(t,n,e,r){this.x=t,this.z=n,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function OY(t,n,e,r,i){var a=[],o=[],s,l;if(t.forEach(function(p){if(!((v=p.length-1)<=0)){var v,g=p[0],y=p[v],m;if(ig(g,y)){if(!g[2]&&!y[2]){for(i.lineStart(),s=0;s<v;++s)i.point((g=p[s])[0],g[1]);i.lineEnd();return}y[0]+=2*At}a.push(m=new Av(g,p,null,!0)),o.push(m.o=new Av(g,null,m,!1)),a.push(m=new Av(y,p,null,!1)),o.push(m.o=new Av(y,null,m,!0))}}),!!a.length){for(o.sort(n),kF(a),kF(o),s=0,l=o.length;s<l;++s)o[s].e=e=!e;for(var c=a[0],u,f;;){for(var h=c,d=!0;h.v;)if((h=h.n)===c)return;u=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(d)for(s=0,l=u.length;s<l;++s)i.point((f=u[s])[0],f[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(d)for(u=h.p.z,s=u.length-1;s>=0;--s)i.point((f=u[s])[0],f[1]);else r(h.x,h.p.x,-1,i);h=h.p}h=h.o,u=h.z,d=!d}while(!h.v);i.lineEnd()}}}function kF(t){if(n=t.length){for(var n,e=0,r=t[0],i;++e<n;)r.n=i=t[e],i.p=r,r=i;r.n=i=t[0],i.p=r}}function Hx(t){return oe(t[0])<=Gt?t[0]:li(t[0])*((oe(t[0])+Gt)%Xr-Gt)}function e5t(t,n){var e=Hx(n),r=n[1],i=Rt(r),a=[Rt(e),-jt(e),0],o=0,s=0,l=new Ml;i===1?r=en+At:i===-1&&(r=-en-At);for(var c=0,u=t.length;c<u;++c)if(h=(f=t[c]).length)for(var f,h,d=f[h-1],p=Hx(d),v=d[1]/2+SF,g=Rt(v),y=jt(v),m=0;m<h;++m,p=b,g=S,y=O,d=x){var x=f[m],b=Hx(x),w=x[1]/2+SF,S=Rt(w),O=jt(w),M=b-p,A=M>=0?1:-1,T=A*M,C=T>Gt,P=g*S;if(l.add(io(P*A*Rt(T),y*O+P*jt(T))),o+=C?M+A*Xr:M,C^p>=e^b>=e){var _=Oy(yu(d),yu(x));m2(_);var k=Oy(a,_);m2(k);var I=(C^M>=0?-1:1)*gi(k[2]);(r>I||r===I&&(_[0]||_[1]))&&(s+=C^M>=0?1:-1)}}return(o<-At||o<At&&l<-mY)^s&1}function MY(t,n,e,r){return function(i){var a=n(i),o=SY(),s=n(o),l=!1,c,u,f,h={point:d,lineStart:v,lineEnd:g,polygonStart:function(){h.point=y,h.lineStart=m,h.lineEnd=x,u=[],c=[]},polygonEnd:function(){h.point=d,h.lineStart=v,h.lineEnd=g,u=yY(u);var b=e5t(c,r);u.length?(l||(i.polygonStart(),l=!0),OY(u,r5t,b,e,i)):b&&(l||(i.polygonStart(),l=!0),i.lineStart(),e(null,null,1,i),i.lineEnd()),l&&(i.polygonEnd(),l=!1),u=c=null},sphere:function(){i.polygonStart(),i.lineStart(),e(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function d(b,w){t(b,w)&&i.point(b,w)}function p(b,w){a.point(b,w)}function v(){h.point=p,a.lineStart()}function g(){h.point=d,a.lineEnd()}function y(b,w){f.push([b,w]),s.point(b,w)}function m(){s.lineStart(),f=[]}function x(){y(f[0][0],f[0][1]),s.lineEnd();var b=s.clean(),w=o.result(),S,O=w.length,M,A,T;if(f.pop(),c.push(f),f=null,!!O){if(b&1){if(A=w[0],(M=A.length-1)>0){for(l||(i.polygonStart(),l=!0),i.lineStart(),S=0;S<M;++S)i.point((T=A[S])[0],T[1]);i.lineEnd()}return}O>1&&b&2&&w.push(w.pop().concat(w.shift())),u.push(w.filter(n5t))}}return h}}function n5t(t){return t.length>1}function r5t(t,n){return((t=t.x)[0]<0?t[1]-en-At:en-t[1])-((n=n.x)[0]<0?n[1]-en-At:en-n[1])}const _F=MY(function(){return!0},i5t,o5t,[-Gt,-en]);function i5t(t){var n=NaN,e=NaN,r=NaN,i;return{lineStart:function(){t.lineStart(),i=1},point:function(a,o){var s=a>0?Gt:-Gt,l=oe(a-n);oe(l-Gt)<At?(t.point(n,e=(e+o)/2>0?en:-en),t.point(r,e),t.lineEnd(),t.lineStart(),t.point(s,e),t.point(a,e),i=0):r!==s&&l>=Gt&&(oe(n-r)<At&&(n-=r*At),oe(a-s)<At&&(a-=s*At),e=a5t(n,e,a,o),t.point(r,e),t.lineEnd(),t.lineStart(),t.point(s,e),i=0),t.point(n=a,e=o),r=s},lineEnd:function(){t.lineEnd(),n=e=NaN},clean:function(){return 2-i}}}function a5t(t,n,e,r){var i,a,o=Rt(t-e);return oe(o)>At?Hu((Rt(n)*(a=jt(r))*Rt(e)-Rt(r)*(i=jt(n))*Rt(t))/(i*a*o)):(n+r)/2}function o5t(t,n,e,r){var i;if(t==null)i=e*en,r.point(-Gt,i),r.point(0,i),r.point(Gt,i),r.point(Gt,0),r.point(Gt,-i),r.point(0,-i),r.point(-Gt,-i),r.point(-Gt,0),r.point(-Gt,i);else if(oe(t[0]-n[0])>At){var a=t[0]<n[0]?Gt:-Gt;i=e*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(n[0],n[1])}function s5t(t){var n=jt(t),e=6*He,r=n>0,i=oe(n)>At;function a(u,f,h,d){t5t(d,t,e,h,u,f)}function o(u,f){return jt(u)*jt(f)>n}function s(u){var f,h,d,p,v;return{lineStart:function(){p=d=!1,v=1},point:function(g,y){var m=[g,y],x,b=o(g,y),w=r?b?0:c(g,y):b?c(g+(g<0?Gt:-Gt),y):0;if(!f&&(p=d=b)&&u.lineStart(),b!==d&&(x=l(f,m),(!x||ig(f,x)||ig(m,x))&&(m[2]=1)),b!==d)v=0,b?(u.lineStart(),x=l(m,f),u.point(x[0],x[1])):(x=l(f,m),u.point(x[0],x[1],2),u.lineEnd()),f=x;else if(i&&f&&r^b){var S;!(w&h)&&(S=l(m,f,!0))&&(v=0,r?(u.lineStart(),u.point(S[0][0],S[0][1]),u.point(S[1][0],S[1][1]),u.lineEnd()):(u.point(S[1][0],S[1][1]),u.lineEnd(),u.lineStart(),u.point(S[0][0],S[0][1],3)))}b&&(!f||!ig(f,m))&&u.point(m[0],m[1]),f=m,d=b,h=w},lineEnd:function(){d&&u.lineEnd(),f=null},clean:function(){return v|(p&&d)<<1}}}function l(u,f,h){var d=yu(u),p=yu(f),v=[1,0,0],g=Oy(d,p),y=Ov(g,g),m=g[0],x=y-m*m;if(!x)return!h&&u;var b=n*y/x,w=-n*m/x,S=Oy(v,g),O=Mv(v,b),M=Mv(g,w);Vx(O,M);var A=S,T=Ov(O,A),C=Ov(A,A),P=T*T-C*(Ov(O,O)-1);if(!(P<0)){var _=Tr(P),k=Mv(A,(-T-_)/C);if(Vx(k,O),k=y2(k),!h)return k;var I=u[0],L=f[0],F=u[1],B=f[1],D;L<I&&(D=I,I=L,L=D);var N=L-I,j=oe(N-Gt)<At,Y=j||N<At;if(!j&&B<F&&(D=F,F=B,B=D),Y?j?F+B>0^k[1]<(oe(k[0]-I)<At?F:B):F<=k[1]&&k[1]<=B:N>Gt^(I<=k[0]&&k[0]<=L)){var W=Mv(A,(-T+_)/C);return Vx(W,O),[k,y2(W)]}}}function c(u,f){var h=r?t:Gt-t,d=0;return u<-h?d|=1:u>h&&(d|=2),f<-h?d|=4:f>h&&(d|=8),d}return MY(o,s,a,r?[0,-t]:[-Gt,t-Gt])}function l5t(t,n,e,r,i,a){var o=t[0],s=t[1],l=n[0],c=n[1],u=0,f=1,h=l-o,d=c-s,p;if(p=e-o,!(!h&&p>0)){if(p/=h,h<0){if(p<u)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>u&&(u=p)}if(p=i-o,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>u&&(u=p)}else if(h>0){if(p<u)return;p<f&&(f=p)}if(p=r-s,!(!d&&p>0)){if(p/=d,d<0){if(p<u)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>u&&(u=p)}if(p=a-s,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>u&&(u=p)}else if(d>0){if(p<u)return;p<f&&(f=p)}return u>0&&(t[0]=o+u*h,t[1]=s+u*d),f<1&&(n[0]=o+f*h,n[1]=s+f*d),!0}}}}}var _f=1e9,Ev=-_f;function AY(t,n,e,r){function i(c,u){return t<=c&&c<=e&&n<=u&&u<=r}function a(c,u,f,h){var d=0,p=0;if(c==null||(d=o(c,f))!==(p=o(u,f))||l(c,u)<0^f>0)do h.point(d===0||d===3?t:e,d>1?r:n);while((d=(d+f+4)%4)!==p);else h.point(u[0],u[1])}function o(c,u){return oe(c[0]-t)<At?u>0?0:3:oe(c[0]-e)<At?u>0?2:1:oe(c[1]-n)<At?u>0?1:0:u>0?3:2}function s(c,u){return l(c.x,u.x)}function l(c,u){var f=o(c,1),h=o(u,1);return f!==h?f-h:f===0?u[1]-c[1]:f===1?c[0]-u[0]:f===2?c[1]-u[1]:u[0]-c[0]}return function(c){var u=c,f=SY(),h,d,p,v,g,y,m,x,b,w,S,O={point:M,lineStart:P,lineEnd:_,polygonStart:T,polygonEnd:C};function M(I,L){i(I,L)&&u.point(I,L)}function A(){for(var I=0,L=0,F=d.length;L<F;++L)for(var B=d[L],D=1,N=B.length,j=B[0],Y,W,V=j[0],H=j[1];D<N;++D)Y=V,W=H,j=B[D],V=j[0],H=j[1],W<=r?H>r&&(V-Y)*(r-W)>(H-W)*(t-Y)&&++I:H<=r&&(V-Y)*(r-W)<(H-W)*(t-Y)&&--I;return I}function T(){u=f,h=[],d=[],S=!0}function C(){var I=A(),L=S&&I,F=(h=yY(h)).length;(L||F)&&(c.polygonStart(),L&&(c.lineStart(),a(null,null,1,c),c.lineEnd()),F&&OY(h,s,I,a,c),c.polygonEnd()),u=c,h=d=p=null}function P(){O.point=k,d&&d.push(p=[]),w=!0,b=!1,m=x=NaN}function _(){h&&(k(v,g),y&&b&&f.rejoin(),h.push(f.result())),O.point=M,b&&u.lineEnd()}function k(I,L){var F=i(I,L);if(d&&p.push([I,L]),w)v=I,g=L,y=F,w=!1,F&&(u.lineStart(),u.point(I,L));else if(F&&b)u.point(I,L);else{var B=[m=Math.max(Ev,Math.min(_f,m)),x=Math.max(Ev,Math.min(_f,x))],D=[I=Math.max(Ev,Math.min(_f,I)),L=Math.max(Ev,Math.min(_f,L))];l5t(B,D,t,n,e,r)?(b||(u.lineStart(),u.point(B[0],B[1])),u.point(D[0],D[1]),F||u.lineEnd(),S=!1):F&&(u.lineStart(),u.point(I,L),S=!1)}m=I,x=L,b=F}return O}}function LF(t,n,e){var r=gc(t,n-At,e).concat(n);return function(i){return r.map(function(a){return[i,a]})}}function IF(t,n,e){var r=gc(t,n-At,e).concat(n);return function(i){return r.map(function(a){return[a,i]})}}function c5t(){var t,n,e,r,i,a,o,s,l=10,c=l,u=90,f=360,h,d,p,v,g=2.5;function y(){return{type:"MultiLineString",coordinates:m()}}function m(){return gc(Sv(r/u)*u,e,u).map(p).concat(gc(Sv(s/f)*f,o,f).map(v)).concat(gc(Sv(n/l)*l,t,l).filter(function(x){return oe(x%u)>At}).map(h)).concat(gc(Sv(a/c)*c,i,c).filter(function(x){return oe(x%f)>At}).map(d))}return y.lines=function(){return m().map(function(x){return{type:"LineString",coordinates:x}})},y.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(v(o).slice(1),p(e).reverse().slice(1),v(s).reverse().slice(1))]}},y.extent=function(x){return arguments.length?y.extentMajor(x).extentMinor(x):y.extentMinor()},y.extentMajor=function(x){return arguments.length?(r=+x[0][0],e=+x[1][0],s=+x[0][1],o=+x[1][1],r>e&&(x=r,r=e,e=x),s>o&&(x=s,s=o,o=x),y.precision(g)):[[r,s],[e,o]]},y.extentMinor=function(x){return arguments.length?(n=+x[0][0],t=+x[1][0],a=+x[0][1],i=+x[1][1],n>t&&(x=n,n=t,t=x),a>i&&(x=a,a=i,i=x),y.precision(g)):[[n,a],[t,i]]},y.step=function(x){return arguments.length?y.stepMajor(x).stepMinor(x):y.stepMinor()},y.stepMajor=function(x){return arguments.length?(u=+x[0],f=+x[1],y):[u,f]},y.stepMinor=function(x){return arguments.length?(l=+x[0],c=+x[1],y):[l,c]},y.precision=function(x){return arguments.length?(g=+x,h=LF(a,i,90),d=IF(n,t,g),p=LF(s,o,90),v=IF(r,e,g),y):g},y.extentMajor([[-180,-90+At],[180,90-At]]).extentMinor([[-180,-80-At],[180,80+At]])}function u5t(){return c5t()()}const ad=t=>t;var Xx=new Ml,w2=new Ml,EY,TY,S2,O2,Ao={point:ci,lineStart:ci,lineEnd:ci,polygonStart:function(){Ao.lineStart=f5t,Ao.lineEnd=d5t},polygonEnd:function(){Ao.lineStart=Ao.lineEnd=Ao.point=ci,Xx.add(oe(w2)),w2=new Ml},result:function(){var t=Xx/2;return Xx=new Ml,t}};function f5t(){Ao.point=h5t}function h5t(t,n){Ao.point=CY,EY=S2=t,TY=O2=n}function CY(t,n){w2.add(O2*t-S2*n),S2=t,O2=n}function d5t(){CY(EY,TY)}const FF=Ao;var mu=1/0,My=mu,od=-mu,Ay=od,p5t={point:v5t,lineStart:ci,lineEnd:ci,polygonStart:ci,polygonEnd:ci,result:function(){var t=[[mu,My],[od,Ay]];return od=Ay=-(My=mu=1/0),t}};function v5t(t,n){t<mu&&(mu=t),t>od&&(od=t),n<My&&(My=n),n>Ay&&(Ay=n)}const Ey=p5t;var M2=0,A2=0,Lf=0,Ty=0,Cy=0,yc=0,E2=0,T2=0,If=0,PY,kY,Ji,ta,ki={point:Al,lineStart:DF,lineEnd:RF,polygonStart:function(){ki.lineStart=m5t,ki.lineEnd=x5t},polygonEnd:function(){ki.point=Al,ki.lineStart=DF,ki.lineEnd=RF},result:function(){var t=If?[E2/If,T2/If]:yc?[Ty/yc,Cy/yc]:Lf?[M2/Lf,A2/Lf]:[NaN,NaN];return M2=A2=Lf=Ty=Cy=yc=E2=T2=If=0,t}};function Al(t,n){M2+=t,A2+=n,++Lf}function DF(){ki.point=g5t}function g5t(t,n){ki.point=y5t,Al(Ji=t,ta=n)}function y5t(t,n){var e=t-Ji,r=n-ta,i=Tr(e*e+r*r);Ty+=i*(Ji+t)/2,Cy+=i*(ta+n)/2,yc+=i,Al(Ji=t,ta=n)}function RF(){ki.point=Al}function m5t(){ki.point=b5t}function x5t(){_Y(PY,kY)}function b5t(t,n){ki.point=_Y,Al(PY=Ji=t,kY=ta=n)}function _Y(t,n){var e=t-Ji,r=n-ta,i=Tr(e*e+r*r);Ty+=i*(Ji+t)/2,Cy+=i*(ta+n)/2,yc+=i,i=ta*t-Ji*n,E2+=i*(Ji+t),T2+=i*(ta+n),If+=i*3,Al(Ji=t,ta=n)}const BF=ki;function LY(t){this._context=t}LY.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,n){switch(this._point){case 0:{this._context.moveTo(t,n),this._point=1;break}case 1:{this._context.lineTo(t,n);break}default:{this._context.moveTo(t+this._radius,n),this._context.arc(t,n,this._radius,0,Xr);break}}},result:ci};var C2=new Ml,Ux,IY,FY,Ff,Df,Py={point:ci,lineStart:function(){Py.point=w5t},lineEnd:function(){Ux&&DY(IY,FY),Py.point=ci},polygonStart:function(){Ux=!0},polygonEnd:function(){Ux=null},result:function(){var t=+C2;return C2=new Ml,t}};function w5t(t,n){Py.point=DY,IY=Ff=t,FY=Df=n}function DY(t,n){Ff-=t,Df-=n,C2.add(Tr(Ff*Ff+Df*Df)),Ff=t,Df=n}const NF=Py;let $F,ky,jF,zF;class GF{constructor(n){this._append=n==null?RY:S5t(n),this._radius=4.5,this._=""}pointRadius(n){return this._radius=+n,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(n,e){switch(this._point){case 0:{this._append`M${n},${e}`,this._point=1;break}case 1:{this._append`L${n},${e}`;break}default:{if(this._append`M${n},${e}`,this._radius!==jF||this._append!==ky){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,jF=r,ky=this._append,zF=this._,this._=i}this._+=zF;break}}}result(){const n=this._;return this._="",n.length?n:null}}function RY(t){let n=1;this._+=t[0];for(const e=t.length;n<e;++n)this._+=arguments[n]+t[n]}function S5t(t){const n=Math.floor(t);if(!(n>=0))throw new RangeError(`invalid digits: ${t}`);if(n>15)return RY;if(n!==$F){const e=10**n;$F=n,ky=function(i){let a=1;this._+=i[0];for(const o=i.length;a<o;++a)this._+=Math.round(arguments[a]*e)/e+i[a]}}return ky}function BY(t,n){let e=3,r=4.5,i,a;function o(s){return s&&(typeof r=="function"&&a.pointRadius(+r.apply(this,arguments)),oc(s,i(a))),a.result()}return o.area=function(s){return oc(s,i(FF)),FF.result()},o.measure=function(s){return oc(s,i(NF)),NF.result()},o.bounds=function(s){return oc(s,i(Ey)),Ey.result()},o.centroid=function(s){return oc(s,i(BF)),BF.result()},o.projection=function(s){return arguments.length?(i=s==null?(t=null,ad):(t=s).stream,o):t},o.context=function(s){return arguments.length?(a=s==null?(n=null,new GF(e)):new LY(n=s),typeof r!="function"&&a.pointRadius(r),o):n},o.pointRadius=function(s){return arguments.length?(r=typeof s=="function"?s:(a.pointRadius(+s),+s),o):r},o.digits=function(s){if(!arguments.length)return e;if(s==null)e=null;else{const l=Math.floor(s);if(!(l>=0))throw new RangeError(`invalid digits: ${s}`);e=l}return n===null&&(a=new GF(e)),o},o.projection(t).digits(e).context(n)}function Vm(t){return function(n){var e=new P2;for(var r in t)e[r]=t[r];return e.stream=n,e}}function P2(){}P2.prototype={constructor:P2,point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function JA(t,n,e){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),r!=null&&t.clipExtent(null),oc(e,t.stream(Ey)),n(Ey.result()),r!=null&&t.clipExtent(r),t}function Hm(t,n,e){return JA(t,function(r){var i=n[1][0]-n[0][0],a=n[1][1]-n[0][1],o=Math.min(i/(r[1][0]-r[0][0]),a/(r[1][1]-r[0][1])),s=+n[0][0]+(i-o*(r[1][0]+r[0][0]))/2,l=+n[0][1]+(a-o*(r[1][1]+r[0][1]))/2;t.scale(150*o).translate([s,l])},e)}function tE(t,n,e){return Hm(t,[[0,0],n],e)}function eE(t,n,e){return JA(t,function(r){var i=+n,a=i/(r[1][0]-r[0][0]),o=(i-a*(r[1][0]+r[0][0]))/2,s=-a*r[0][1];t.scale(150*a).translate([o,s])},e)}function nE(t,n,e){return JA(t,function(r){var i=+n,a=i/(r[1][1]-r[0][1]),o=-a*r[0][0],s=(i-a*(r[1][1]+r[0][1]))/2;t.scale(150*a).translate([o,s])},e)}var YF=16,O5t=jt(30*He);function WF(t,n){return+n?A5t(t,n):M5t(t)}function M5t(t){return Vm({point:function(n,e){n=t(n,e),this.stream.point(n[0],n[1])}})}function A5t(t,n){function e(r,i,a,o,s,l,c,u,f,h,d,p,v,g){var y=c-r,m=u-i,x=y*y+m*m;if(x>4*n&&v--){var b=o+h,w=s+d,S=l+p,O=Tr(b*b+w*w+S*S),M=gi(S/=O),A=oe(oe(S)-1)<At||oe(a-f)<At?(a+f)/2:io(w,b),T=t(A,M),C=T[0],P=T[1],_=C-r,k=P-i,I=m*_-y*k;(I*I/x>n||oe((y*_+m*k)/x-.5)>.3||o*h+s*d+l*p<O5t)&&(e(r,i,a,o,s,l,C,P,A,b/=O,w/=O,S,v,g),g.point(C,P),e(C,P,A,b,w,S,c,u,f,h,d,p,v,g))}}return function(r){var i,a,o,s,l,c,u,f,h,d,p,v,g={point:y,lineStart:m,lineEnd:b,polygonStart:function(){r.polygonStart(),g.lineStart=w},polygonEnd:function(){r.polygonEnd(),g.lineStart=m}};function y(M,A){M=t(M,A),r.point(M[0],M[1])}function m(){f=NaN,g.point=x,r.lineStart()}function x(M,A){var T=yu([M,A]),C=t(M,A);e(f,h,u,d,p,v,f=C[0],h=C[1],u=M,d=T[0],p=T[1],v=T[2],YF,r),r.point(f,h)}function b(){g.point=y,r.lineEnd()}function w(){m(),g.point=S,g.lineEnd=O}function S(M,A){x(i=M,A),a=f,o=h,s=d,l=p,c=v,g.point=x}function O(){e(f,h,u,d,p,v,a,o,i,s,l,c,YF,r),g.lineEnd=b,b()}return g}}var E5t=Vm({point:function(t,n){this.stream.point(t*He,n*He)}});function T5t(t){return Vm({point:function(n,e){var r=t(n,e);return this.stream.point(r[0],r[1])}})}function C5t(t,n,e,r,i){function a(o,s){return o*=r,s*=i,[n+t*o,e-t*s]}return a.invert=function(o,s){return[(o-n)/t*r,(e-s)/t*i]},a}function VF(t,n,e,r,i,a){if(!a)return C5t(t,n,e,r,i);var o=jt(a),s=Rt(a),l=o*t,c=s*t,u=o/t,f=s/t,h=(s*e-o*n)/t,d=(s*n+o*e)/t;function p(v,g){return v*=r,g*=i,[l*v-c*g+n,e-c*v-l*g]}return p.invert=function(v,g){return[r*(u*v-f*g+h),i*(d-f*v-u*g)]},p}function Sa(t){return rE(function(){return t})()}function rE(t){var n,e=150,r=480,i=250,a=0,o=0,s=0,l=0,c=0,u,f=0,h=1,d=1,p=null,v=_F,g=null,y,m,x,b=ad,w=.5,S,O,M,A,T;function C(I){return M(I[0]*He,I[1]*He)}function P(I){return I=M.invert(I[0],I[1]),I&&[I[0]*Yn,I[1]*Yn]}C.stream=function(I){return A&&T===I?A:A=E5t(T5t(u)(v(S(b(T=I)))))},C.preclip=function(I){return arguments.length?(v=I,p=void 0,k()):v},C.postclip=function(I){return arguments.length?(b=I,g=y=m=x=null,k()):b},C.clipAngle=function(I){return arguments.length?(v=+I?s5t(p=I*He):(p=null,_F),k()):p*Yn},C.clipExtent=function(I){return arguments.length?(b=I==null?(g=y=m=x=null,ad):AY(g=+I[0][0],y=+I[0][1],m=+I[1][0],x=+I[1][1]),k()):g==null?null:[[g,y],[m,x]]},C.scale=function(I){return arguments.length?(e=+I,_()):e},C.translate=function(I){return arguments.length?(r=+I[0],i=+I[1],_()):[r,i]},C.center=function(I){return arguments.length?(a=I[0]%360*He,o=I[1]%360*He,_()):[a*Yn,o*Yn]},C.rotate=function(I){return arguments.length?(s=I[0]%360*He,l=I[1]%360*He,c=I.length>2?I[2]%360*He:0,_()):[s*Yn,l*Yn,c*Yn]},C.angle=function(I){return arguments.length?(f=I%360*He,_()):f*Yn},C.reflectX=function(I){return arguments.length?(h=I?-1:1,_()):h<0},C.reflectY=function(I){return arguments.length?(d=I?-1:1,_()):d<0},C.precision=function(I){return arguments.length?(S=WF(O,w=I*I),k()):Tr(w)},C.fitExtent=function(I,L){return Hm(C,I,L)},C.fitSize=function(I,L){return tE(C,I,L)},C.fitWidth=function(I,L){return eE(C,I,L)},C.fitHeight=function(I,L){return nE(C,I,L)};function _(){var I=VF(e,0,0,h,d,f).apply(null,n(a,o)),L=VF(e,r-I[0],i-I[1],h,d,f);return u=wY(s,l,c),O=x2(n,L),M=x2(u,O),S=WF(O,w),k()}function k(){return A=T=null,C}return function(){return n=t.apply(this,arguments),C.invert=n.invert&&P,_()}}function iE(t){var n=0,e=Gt/3,r=rE(t),i=r(n,e);return i.parallels=function(a){return arguments.length?r(n=a[0]*He,e=a[1]*He):[n*Yn,e*Yn]},i}function P5t(t){var n=jt(t);function e(r,i){return[r*n,Rt(i)/n]}return e.invert=function(r,i){return[r/n,gi(i*n)]},e}function NY(t,n){var e=Rt(t),r=(e+Rt(n))/2;if(oe(r)<At)return P5t(t);var i=1+e*(2*r-e),a=Tr(i)/r;function o(s,l){var c=Tr(i-2*r*Rt(l))/r;return[c*Rt(s*=r),a-c*jt(s)]}return o.invert=function(s,l){var c=a-l,u=io(s,oe(c))*li(c);return c*r<0&&(u-=Gt*li(s)*li(c)),[u/r,gi((i-(s*s+c*c)*r*r)/(2*r))]},o}function _y(){return iE(NY).scale(155.424).center([0,33.6442])}function $Y(){return _y().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function k5t(t){var n=t.length;return{point:function(e,r){for(var i=-1;++i<n;)t[i].point(e,r)},sphere:function(){for(var e=-1;++e<n;)t[e].sphere()},lineStart:function(){for(var e=-1;++e<n;)t[e].lineStart()},lineEnd:function(){for(var e=-1;++e<n;)t[e].lineEnd()},polygonStart:function(){for(var e=-1;++e<n;)t[e].polygonStart()},polygonEnd:function(){for(var e=-1;++e<n;)t[e].polygonEnd()}}}function _5t(){var t,n,e=$Y(),r,i=_y().rotate([154,0]).center([-2,58.5]).parallels([55,65]),a,o=_y().rotate([157,0]).center([-3,19.9]).parallels([8,18]),s,l,c={point:function(h,d){l=[h,d]}};function u(h){var d=h[0],p=h[1];return l=null,r.point(d,p),l||(a.point(d,p),l)||(s.point(d,p),l)}u.invert=function(h){var d=e.scale(),p=e.translate(),v=(h[0]-p[0])/d,g=(h[1]-p[1])/d;return(g>=.12&&g<.234&&v>=-.425&&v<-.214?i:g>=.166&&g<.234&&v>=-.214&&v<-.115?o:e).invert(h)},u.stream=function(h){return t&&n===h?t:t=k5t([e.stream(n=h),i.stream(h),o.stream(h)])},u.precision=function(h){return arguments.length?(e.precision(h),i.precision(h),o.precision(h),f()):e.precision()},u.scale=function(h){return arguments.length?(e.scale(h),i.scale(h*.35),o.scale(h),u.translate(e.translate())):e.scale()},u.translate=function(h){if(!arguments.length)return e.translate();var d=e.scale(),p=+h[0],v=+h[1];return r=e.translate(h).clipExtent([[p-.455*d,v-.238*d],[p+.455*d,v+.238*d]]).stream(c),a=i.translate([p-.307*d,v+.201*d]).clipExtent([[p-.425*d+At,v+.12*d+At],[p-.214*d-At,v+.234*d-At]]).stream(c),s=o.translate([p-.205*d,v+.212*d]).clipExtent([[p-.214*d+At,v+.166*d+At],[p-.115*d-At,v+.234*d-At]]).stream(c),f()},u.fitExtent=function(h,d){return Hm(u,h,d)},u.fitSize=function(h,d){return tE(u,h,d)},u.fitWidth=function(h,d){return eE(u,h,d)},u.fitHeight=function(h,d){return nE(u,h,d)};function f(){return t=n=null,u}return u.scale(1070)}function jY(t){return function(n,e){var r=jt(n),i=jt(e),a=t(r*i);return a===1/0?[2,0]:[a*i*Rt(n),a*Rt(e)]}}function Jd(t){return function(n,e){var r=Tr(n*n+e*e),i=t(r),a=Rt(i),o=jt(i);return[io(n*a,r*o),gi(r&&e*a/r)]}}var aE=jY(function(t){return Tr(2/(1+t))});aE.invert=Jd(function(t){return 2*gi(t/2)});function L5t(){return Sa(aE).scale(124.75).clipAngle(180-.001)}var oE=jY(function(t){return(t=bY(t))&&t/Rt(t)});oE.invert=Jd(function(t){return t});function I5t(){return Sa(oE).scale(79.4188).clipAngle(180-.001)}function tp(t,n){return[t,wy(QA((en+n)/2))]}tp.invert=function(t,n){return[t,2*Hu(xY(n))-en]};function F5t(){return zY(tp).scale(961/Xr)}function zY(t){var n=Sa(t),e=n.center,r=n.scale,i=n.translate,a=n.clipExtent,o=null,s,l,c;n.scale=function(f){return arguments.length?(r(f),u()):r()},n.translate=function(f){return arguments.length?(i(f),u()):i()},n.center=function(f){return arguments.length?(e(f),u()):e()},n.clipExtent=function(f){return arguments.length?(f==null?o=s=l=c=null:(o=+f[0][0],s=+f[0][1],l=+f[1][0],c=+f[1][1]),u()):o==null?null:[[o,s],[l,c]]};function u(){var f=Gt*r(),h=n(JRt(n.rotate()).invert([0,0]));return a(o==null?[[h[0]-f,h[1]-f],[h[0]+f,h[1]+f]]:t===tp?[[Math.max(h[0]-f,o),s],[Math.min(h[0]+f,l),c]]:[[o,Math.max(h[1]-f,s)],[l,Math.min(h[1]+f,c)]])}return u()}function Tv(t){return QA((en+t)/2)}function GY(t,n){var e=jt(t),r=t===n?Rt(t):wy(e/jt(n))/wy(Tv(n)/Tv(t)),i=e*Wx(Tv(t),r)/r;if(!r)return tp;function a(o,s){i>0?s<-en+At&&(s=-en+At):s>en-At&&(s=en-At);var l=i/Wx(Tv(s),r);return[l*Rt(r*o),i-l*jt(r*o)]}return a.invert=function(o,s){var l=i-s,c=li(r)*Tr(o*o+l*l),u=io(o,oe(l))*li(l);return l*r<0&&(u-=Gt*li(o)*li(l)),[u/r,2*Hu(Wx(i/c,1/r))-en]},a}function D5t(){return iE(GY).scale(109.5).parallels([30,30])}function sd(t,n){return[t,n]}sd.invert=sd;function R5t(){return Sa(sd).scale(152.63)}function YY(t,n){var e=jt(t),r=t===n?Rt(t):(e-jt(n))/(n-t),i=e/r+t;if(oe(r)<At)return sd;function a(o,s){var l=i-s,c=r*o;return[l*Rt(c),i-l*jt(c)]}return a.invert=function(o,s){var l=i-s,c=io(o,oe(l))*li(l);return l*r<0&&(c-=Gt*li(o)*li(l)),[c/r,i-li(r)*Tr(o*o+l*l)]},a}function B5t(){return iE(YY).scale(131.154).center([0,13.9389])}var eh=1.340264,nh=-.081106,rh=893e-6,ih=.003796,Ly=Tr(3)/2,N5t=12;function sE(t,n){var e=gi(Ly*Rt(n)),r=e*e,i=r*r*r;return[t*jt(e)/(Ly*(eh+3*nh*r+i*(7*rh+9*ih*r))),e*(eh+nh*r+i*(rh+ih*r))]}sE.invert=function(t,n){for(var e=n,r=e*e,i=r*r*r,a=0,o,s,l;a<N5t&&(s=e*(eh+nh*r+i*(rh+ih*r))-n,l=eh+3*nh*r+i*(7*rh+9*ih*r),e-=o=s/l,r=e*e,i=r*r*r,!(oe(o)<mY));++a);return[Ly*t*(eh+3*nh*r+i*(7*rh+9*ih*r))/jt(e),gi(Rt(e)/Ly)]};function $5t(){return Sa(sE).scale(177.158)}function lE(t,n){var e=jt(n),r=jt(t)*e;return[e*Rt(t)/r,Rt(n)/r]}lE.invert=Jd(Hu);function j5t(){return Sa(lE).scale(144.049).clipAngle(60)}function z5t(){var t=1,n=0,e=0,r=1,i=1,a=0,o,s,l=null,c,u,f,h=1,d=1,p=Vm({point:function(b,w){var S=x([b,w]);this.stream.point(S[0],S[1])}}),v=ad,g,y;function m(){return h=t*r,d=t*i,g=y=null,x}function x(b){var w=b[0]*h,S=b[1]*d;if(a){var O=S*o-w*s;w=w*o+S*s,S=O}return[w+n,S+e]}return x.invert=function(b){var w=b[0]-n,S=b[1]-e;if(a){var O=S*o+w*s;w=w*o-S*s,S=O}return[w/h,S/d]},x.stream=function(b){return g&&y===b?g:g=p(v(y=b))},x.postclip=function(b){return arguments.length?(v=b,l=c=u=f=null,m()):v},x.clipExtent=function(b){return arguments.length?(v=b==null?(l=c=u=f=null,ad):AY(l=+b[0][0],c=+b[0][1],u=+b[1][0],f=+b[1][1]),m()):l==null?null:[[l,c],[u,f]]},x.scale=function(b){return arguments.length?(t=+b,m()):t},x.translate=function(b){return arguments.length?(n=+b[0],e=+b[1],m()):[n,e]},x.angle=function(b){return arguments.length?(a=b%360*He,s=Rt(a),o=jt(a),m()):a*Yn},x.reflectX=function(b){return arguments.length?(r=b?-1:1,m()):r<0},x.reflectY=function(b){return arguments.length?(i=b?-1:1,m()):i<0},x.fitExtent=function(b,w){return Hm(x,b,w)},x.fitSize=function(b,w){return tE(x,b,w)},x.fitWidth=function(b,w){return eE(x,b,w)},x.fitHeight=function(b,w){return nE(x,b,w)},x}function cE(t,n){var e=n*n,r=e*e;return[t*(.8707-.131979*e+r*(-.013791+r*(.003971*e-.001529*r))),n*(1.007226+e*(.015085+r*(-.044475+.028874*e-.005916*r)))]}cE.invert=function(t,n){var e=n,r=25,i;do{var a=e*e,o=a*a;e-=i=(e*(1.007226+a*(.015085+o*(-.044475+.028874*a-.005916*o)))-n)/(1.007226+a*(.015085*3+o*(-.044475*7+.028874*9*a-.005916*11*o)))}while(oe(i)>At&&--r>0);return[t/(.8707+(a=e*e)*(-.131979+a*(-.013791+a*a*a*(.003971-.001529*a)))),e]};function G5t(){return Sa(cE).scale(175.295)}function uE(t,n){return[jt(n)*Rt(t),Rt(n)]}uE.invert=Jd(gi);function Y5t(){return Sa(uE).scale(249.5).clipAngle(90+At)}function fE(t,n){var e=jt(n),r=1+jt(t)*e;return[e*Rt(t)/r,Rt(n)/r]}fE.invert=Jd(function(t){return 2*Hu(t)});function W5t(){return Sa(fE).scale(250).clipAngle(142)}function hE(t,n){return[wy(QA((en+n)/2)),-t]}hE.invert=function(t,n){return[-n,2*Hu(xY(t))-en]};function V5t(){var t=zY(hE),n=t.center,e=t.rotate;return t.center=function(r){return arguments.length?n([-r[1],r[0]]):(r=n(),[r[1],-r[0]])},t.rotate=function(r){return arguments.length?e([r[0],r[1],r.length>2?r[2]+90:90]):(r=e(),[r[0],r[1],r[2]-90])},e([0,0,90]).scale(159.155)}const H5t=Object.freeze(Object.defineProperty({__proto__:null,geoAlbers:$Y,geoAlbersUsa:_5t,geoAzimuthalEqualArea:L5t,geoAzimuthalEqualAreaRaw:aE,geoAzimuthalEquidistant:I5t,geoAzimuthalEquidistantRaw:oE,geoConicConformal:D5t,geoConicConformalRaw:GY,geoConicEqualArea:_y,geoConicEqualAreaRaw:NY,geoConicEquidistant:B5t,geoConicEquidistantRaw:YY,geoEqualEarth:$5t,geoEqualEarthRaw:sE,geoEquirectangular:R5t,geoEquirectangularRaw:sd,geoGnomonic:j5t,geoGnomonicRaw:lE,geoIdentity:z5t,geoMercator:F5t,geoMercatorRaw:tp,geoNaturalEarth1:G5t,geoNaturalEarth1Raw:cE,geoOrthographic:Y5t,geoOrthographicRaw:uE,geoProjection:Sa,geoProjectionMutator:rE,geoStereographic:W5t,geoStereographicRaw:fE,geoTransverseMercator:V5t,geoTransverseMercatorRaw:hE},Symbol.toStringTag,{value:"Module"}));var X5t=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};function U5t(t){if(typeof t=="function")return t;const n=`geo${us(t)}`,e=H5t[n];if(!e)throw new Error(`Unknown coordinate: ${t}`);return e}function q5t(t){return{type:"FeatureCollection",features:t.flatMap(n=>Z5t(n).features)}}function Z5t(t){const n={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featureCollection"};if(!t||!t.type)return null;const e=n[t.type];if(!e)return null;if(e==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:t}]};if(e==="feature")return{type:"FeatureCollection",features:[t]};if(e==="featureCollection")return t}function K5t(t,n){var e;for(const[r,i]of Object.entries(n))(e=t[r])===null||e===void 0||e.call(t,i)}function Q5t(t,n,e,r){const i=()=>{const s=n.filter(WY);return s.find(c=>c.sphere)?{type:"Sphere"}:q5t(s.filter(c=>!c.sphere).flatMap(c=>c.data.value))},{outline:a=i()}=r,{size:o="fitExtent"}=r;if(o==="fitExtent")return J5t(t,a,e);if(o==="fitWidth")return tBt(t,a,e)}function J5t(t,n,e){const{x:r,y:i,width:a,height:o}=e;t.fitExtent([[r,i],[a,o]],n)}function tBt(t,n,e){const{width:r,height:i}=e,[[a,o],[s,l]]=BY(t.fitWidth(r,n)).bounds(n),c=Math.ceil(l-o),u=Math.min(Math.ceil(s-a),c),f=t.scale()*(u-1)/u,[h,d]=t.translate(),p=d+(i-c)/2;t.scale(f).translate([h,p]).precision(.2)}function eBt(t){const{data:n}=t;if(Array.isArray(n))return Object.assign(Object.assign({},t),{data:{value:n}});const{type:e}=n;return e==="graticule10"?Object.assign(Object.assign({},t),{data:{value:[u5t()]}}):e==="sphere"?Object.assign(Object.assign({},t),{sphere:!0,data:{value:[{type:"Sphere"}]}}):t}function WY(t){return t.type==="geoPath"}const VY=()=>t=>{const{children:n,coordinate:e={}}=t;if(!Array.isArray(n))return[];const{type:r="equalEarth"}=e,i=X5t(e,["type"]),a=U5t(r),o=n.map(eBt);let s;function l(){return[["custom",(f,h,d,p)=>{const v=a();Q5t(v,o,{x:f,y:h,width:d,height:p},i),K5t(v,i),s=BY(v);const y=new eo({domain:[f,f+d]}),m=new eo({domain:[h,h+p]}),x=w=>{const S=v(w);if(!S)return[null,null];const[O,M]=S;return[y.map(O),m.map(M)]},b=w=>{if(!w)return null;const[S,O]=w,M=[y.invert(S),m.invert(O)];return v.invert(M)};return{transform:w=>x(w),untransform:w=>b(w)}}]]}function c(f){const{style:h,tooltip:d={}}=f;return Object.assign(Object.assign({},f),{type:"path",tooltip:kA(d,{title:"id",items:[{channel:"color"}]}),style:Object.assign(Object.assign({},h),{d:p=>s(p)||[]})})}const u=f=>WY(f)?c(f):f;return[Object.assign(Object.assign({},t),{type:"view",scale:{x:{type:"identity"},y:{type:"identity"}},axis:!1,coordinate:{type:l},children:o.flatMap(u)})]};VY.props={};function HY(t,n){const{__data__:e}=t,{markKey:r,index:i,seriesIndex:a}=e,{markState:o}=n,s=Array.from(o.keys()).find(l=>l.key===r);if(s)return a?a.map(l=>s.data[l]):s.data[i]}function XY(t,n){if(n(t))return t;let e=t.parent;for(;e&&!n(e);)e=e.parent;return e}function nBt(t){return XY(t,n=>n.className==="component")}function rBt(t){return XY(t,n=>n.className==="element")}function wn(t,n,e,r=i=>!0){return i=>{if(!r(i))return;e.emit(`plot:${t}`,i);const{target:a}=i;if(!a)return;const{className:o}=a;if(o==="plot")return;const s=rBt(a),l=nBt(a),c=s||l;if(!c)return;const{className:u,markType:f}=c;if(u==="element"){const h=Object.assign(Object.assign({},i),{nativeEvent:!0,data:{data:HY(c,n)}});e.emit(`element:${t}`,h),e.emit(`${f}:${t}`,h)}else{const h=Object.assign(Object.assign({},i),{nativeEvent:!0});e.emit(`component:${t}`,h),e.emit(`${o}:${t}`,h)}}}function UY(){return(t,n,e)=>{const{container:r,view:i}=t,a=wn(fe.CLICK,i,e,O=>O.detail===1),o=wn(fe.DBLCLICK,i,e,O=>O.detail===2),s=wn(fe.POINTER_TAP,i,e),l=wn(fe.POINTER_DOWN,i,e),c=wn(fe.POINTER_UP,i,e),u=wn(fe.POINTER_OVER,i,e),f=wn(fe.POINTER_OUT,i,e),h=wn(fe.POINTER_MOVE,i,e),d=wn(fe.POINTER_ENTER,i,e),p=wn(fe.POINTER_LEAVE,i,e),v=wn(fe.POINTER_UPOUTSIDE,i,e),g=wn(fe.DRAG_START,i,e),y=wn(fe.DRAG,i,e),m=wn(fe.DRAG_END,i,e),x=wn(fe.DRAG_ENTER,i,e),b=wn(fe.DRAG_LEAVE,i,e),w=wn(fe.DRAG_OVER,i,e),S=wn(fe.DROP,i,e);return r.addEventListener("click",a),r.addEventListener("click",o),r.addEventListener("pointertap",s),r.addEventListener("pointerdown",l),r.addEventListener("pointerup",c),r.addEventListener("pointerover",u),r.addEventListener("pointerout",f),r.addEventListener("pointermove",h),r.addEventListener("pointerenter",d),r.addEventListener("pointerleave",p),r.addEventListener("pointerupoutside",v),r.addEventListener("dragstart",g),r.addEventListener("drag",y),r.addEventListener("dragend",m),r.addEventListener("dragenter",x),r.addEventListener("dragleave",b),r.addEventListener("dragover",w),r.addEventListener("drop",S),()=>{r.removeEventListener("click",a),r.removeEventListener("click",o),r.removeEventListener("pointertap",s),r.removeEventListener("pointerdown",l),r.removeEventListener("pointerup",c),r.removeEventListener("pointerover",u),r.removeEventListener("pointerout",f),r.removeEventListener("pointermove",h),r.removeEventListener("pointerenter",d),r.removeEventListener("pointerleave",p),r.removeEventListener("pointerupoutside",v),r.removeEventListener("dragstart",g),r.removeEventListener("drag",y),r.removeEventListener("dragend",m),r.removeEventListener("dragenter",x),r.removeEventListener("dragleave",b),r.removeEventListener("dragover",w),r.removeEventListener("drop",S)}}}UY.props={reapplyWhenUpdate:!0};function iBt(){return{"component.axisRadar":kG,"component.axisLinear":xs,"component.axisArc":TG,"component.legendContinuousBlock":_G,"component.legendContinuousBlockSize":LG,"component.legendContinuousSize":$A,"interaction.event":UY,"composition.mark":fY,"composition.view":uY,"shape.label.label":N9}}var aBt=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};function Le(t,n){const e=Object.assign(Object.assign({},iBt()),n),r=a=>{if(typeof a!="string")return a;const o=`${t}.${a}`;return e[o]||nu(`Unknown Component: ${o}`)};return[(a,o)=>{const{type:s}=a,l=aBt(a,["type"]);s||nu("Plot type is required!");const c=r(s);return c==null?void 0:c(l,o)},r]}function qY(t){const{canvas:n,group:e}=t;return(n==null?void 0:n.document)||(e==null?void 0:e.ownerDocument)||nu("Cannot find library document")}var HF=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};function oBt(t,n,e){const[r]=Le("coordinate",e),{innerHeight:i,innerWidth:a,insetLeft:o,insetTop:s,insetRight:l,insetBottom:c}=t,{coordinates:u=[]}=n,f=hBt(u),h=f[0].type==="cartesian3D",d=Object.assign(Object.assign({},t),{x:o,y:s,width:a-o-l,height:i-c-s,transformations:f.flatMap(r)});return h?new TRt(d):new ARt(d)}function ZY(t,n){const{coordinate:e={}}=t,r=HF(t,["coordinate"]),{type:i,transform:a=[]}=e,o=HF(e,["type","transform"]);if(!i)return Object.assign(Object.assign({},r),{coordinates:a});const[,s]=Le("coordinate",n),{transform:l=!1}=s(i).props||{};if(l)throw new Error(`Unknown coordinate: ${i}.`);return Object.assign(Object.assign({},r),{coordinates:[Object.assign({type:i},o),...a]})}function zi(t,n){return t.filter(e=>e.type===n)}function Vs(t){return zi(t,"polar").length>0}function sBt(t){return zi(t,"helix").length>0}function Lc(t){return zi(t,"transpose").length%2===1}function lBt(t){return zi(t,"parallel").length>0}function KY(t){return zi(t,"theta").length>0}function cBt(t){return zi(t,"reflect").length>0}function ah(t){return zi(t,"radial").length>0}function uBt(t){return zi(t,"radar").length>0}function fBt(t){return zi(t,"reflectY").length>0}function hBt(t){return t.find(n=>n.type==="cartesian"||n.type==="cartesian3D")?t:[...t,{type:"cartesian"}]}function Nt(t){for(var n=t.length/6|0,e=new Array(n),r=0;r<n;)e[r]="#"+t.slice(r*6,++r*6);return e}const dBt=Nt("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),pBt=Nt("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),vBt=Nt("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),gBt=Nt("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),yBt=Nt("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),mBt=Nt("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),xBt=Nt("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),bBt=Nt("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),wBt=Nt("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),SBt=Nt("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),Te=t=>dq(t[t.length-1]);var QY=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(Nt);const OBt=Te(QY);var JY=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(Nt);const MBt=Te(JY);var tW=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(Nt);const ABt=Te(tW);var eW=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(Nt);const EBt=Te(eW);var nW=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(Nt);const TBt=Te(nW);var rW=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(Nt);const CBt=Te(rW);var iW=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(Nt);const PBt=Te(iW);var aW=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(Nt);const kBt=Te(aW);var oW=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(Nt);const _Bt=Te(oW);var sW=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(Nt);const LBt=Te(sW);var lW=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(Nt);const IBt=Te(lW);var cW=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(Nt);const FBt=Te(cW);var uW=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Nt);const DBt=Te(uW);var fW=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(Nt);const RBt=Te(fW);var hW=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(Nt);const BBt=Te(hW);var dW=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(Nt);const NBt=Te(dW);var pW=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(Nt);const $Bt=Te(pW);var vW=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(Nt);const jBt=Te(vW);var gW=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Nt);const zBt=Te(gW);var yW=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(Nt);const GBt=Te(yW);var mW=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Nt);const YBt=Te(mW);var xW=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Nt);const WBt=Te(xW);var bW=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Nt);const VBt=Te(bW);var wW=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Nt);const HBt=Te(wW);var SW=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Nt);const XBt=Te(SW);var OW=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Nt);const UBt=Te(OW);var MW=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Nt);const qBt=Te(MW);function ZBt(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-t*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-t*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-t*2475.67)))))))+")"}const KBt=xS(pa(300,.5,0),pa(-240,.5,1));var QBt=xS(pa(-100,.75,.35),pa(80,1.5,.8)),JBt=xS(pa(260,.75,.35),pa(80,1.5,.8)),Cv=pa();function t3t(t){(t<0||t>1)&&(t-=Math.floor(t));var n=Math.abs(t-.5);return Cv.h=360*t-100,Cv.s=1.5-1.5*n,Cv.l=.8-.9*n,Cv+""}var Pv=ph(),e3t=Math.PI/3,n3t=Math.PI*2/3;function r3t(t){var n;return t=(.5-t)*Math.PI,Pv.r=255*(n=Math.sin(t))*n,Pv.g=255*(n=Math.sin(t+e3t))*n,Pv.b=255*(n=Math.sin(t+n3t))*n,Pv+""}function i3t(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-t*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+t*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-t*6838.66)))))))+")"}function Xm(t){var n=t.length;return function(e){return t[Math.max(0,Math.min(n-1,Math.floor(e*n)))]}}const a3t=Xm(Nt("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var o3t=Xm(Nt("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),s3t=Xm(Nt("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),l3t=Xm(Nt("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));const k2=Object.freeze(Object.defineProperty({__proto__:null,interpolateBlues:WBt,interpolateBrBG:OBt,interpolateBuGn:LBt,interpolateBuPu:IBt,interpolateCividis:ZBt,interpolateCool:JBt,interpolateCubehelixDefault:KBt,interpolateGnBu:FBt,interpolateGreens:VBt,interpolateGreys:HBt,interpolateInferno:s3t,interpolateMagma:o3t,interpolateOrRd:DBt,interpolateOranges:qBt,interpolatePRGn:MBt,interpolatePiYG:ABt,interpolatePlasma:l3t,interpolatePuBu:BBt,interpolatePuBuGn:RBt,interpolatePuOr:EBt,interpolatePuRd:NBt,interpolatePurples:XBt,interpolateRainbow:t3t,interpolateRdBu:TBt,interpolateRdGy:CBt,interpolateRdPu:$Bt,interpolateRdYlBu:PBt,interpolateRdYlGn:kBt,interpolateReds:UBt,interpolateSinebow:r3t,interpolateSpectral:_Bt,interpolateTurbo:i3t,interpolateViridis:a3t,interpolateWarm:QBt,interpolateYlGn:zBt,interpolateYlGnBu:jBt,interpolateYlOrBr:GBt,interpolateYlOrRd:YBt,schemeAccent:pBt,schemeBlues:xW,schemeBrBG:QY,schemeBuGn:sW,schemeBuPu:lW,schemeCategory10:dBt,schemeDark2:vBt,schemeGnBu:cW,schemeGreens:bW,schemeGreys:wW,schemeOrRd:uW,schemeOranges:MW,schemePRGn:JY,schemePaired:gBt,schemePastel1:yBt,schemePastel2:mBt,schemePiYG:tW,schemePuBu:hW,schemePuBuGn:fW,schemePuOr:eW,schemePuRd:dW,schemePurples:SW,schemeRdBu:nW,schemeRdGy:rW,schemeRdPu:pW,schemeRdYlBu:iW,schemeRdYlGn:aW,schemeReds:OW,schemeSet1:xBt,schemeSet2:bBt,schemeSet3:wBt,schemeSpectral:oW,schemeTableau10:SBt,schemeYlGn:gW,schemeYlGnBu:vW,schemeYlOrBr:yW,schemeYlOrRd:mW},Symbol.toStringTag,{value:"Module"}));function c3t(t,n,e,r,i,a){const{guide:o={}}=e,s=m3t(t,n,e);if(typeof s!="string")return e;const l=x3t(s,t,n,e),c=v3t(s,l,e);return Object.assign(Object.assign(Object.assign({},e),w3t(s,t,n,e,r)),{domain:c,range:b3t(s,t,n,e,c,i,a),expectedDomain:l,guide:o,name:t,type:s})}function u3t(t,n){const e={};for(const r of t){const{values:i,name:a}=r,o=n[a];for(const s of i){const{name:l,value:c}=s;e[l]=c.map(u=>o.map(u))}}return e}function f3t(t,n){var e;const{components:r=[]}=n,i=["scale","encode","axis","legend","data","transform"],a=Array.from(new Set(t.flatMap(s=>s.channels.map(l=>l.scale)))),o=new Map(a.map(s=>[s.name,s]));for(const s of r){const l=p3t(s);for(const c of l){const u=o.get(c),f=((e=s.scale)===null||e===void 0?void 0:e[c])||{},{independent:h=!1}=f;if(u&&!h){const{guide:d}=u,p=typeof d=="boolean"?{}:d;u.guide=nt({},p,s),Object.assign(u,f)}else{const d=Object.assign(Object.assign({},f),{expectedDomain:f.domain,name:c,guide:P4(s,i)});a.push(d)}}}return a}function h3t(t){if(!t||!Array.isArray(t))return[gl,gl];let n,e;return[a=>{var o;n=a.map.bind(a),e=(o=a.invert)===null||o===void 0?void 0:o.bind(a);const s=t.filter(([h])=>typeof h=="function"),l=t.filter(([h])=>typeof h!="function"),c=new Map(l);if(a.map=h=>{for(const[d,p]of s)if(d(h))return p;return c.has(h)?c.get(h):n(h)},!e)return a;const u=new Map(l.map(([h,d])=>[d,h])),f=new Map(s.map(([h,d])=>[d,h]));return a.invert=h=>f.has(h)?h:u.has(h)?u.get(h):e(h),a},a=>(n!==null&&(a.map=n),e!==null&&(a.invert=e),a)]}function XF(t,n){const e=Object.keys(t);for(const r of Object.values(n)){const{name:i}=r.getOptions();if(!(i in t))t[i]=r;else{const a=e.filter(l=>l.startsWith(i)).map(l=>+(l.replace(i,"")||0)),o=he(a)+1,s=`${i}${o}`;t[s]=r,r.getOptions().key=s}}return t}function UF(t,n){const[e]=Le("scale",n),{relations:r}=t,[i]=h3t(r),a=e(t);return i(a)}function d3t(t){const n=t.flatMap(e=>Array.from(e.values())).flatMap(e=>e.channels.map(r=>r.scale));qF(n,"x"),qF(n,"y")}function p3t(t){const{channels:n=[],type:e,scale:r={}}=t,i=["shape","color","opacity","size"];return n.length!==0?n:e==="axisX"?["x"]:e==="axisY"?["y"]:e==="legends"?Object.keys(r).filter(a=>i.includes(a)):[]}function qF(t,n){const e=t.filter(({name:a,facet:o=!0})=>o&&a===n),r=e.flatMap(a=>a.domain),i=e.every(AW)?Wa(r):e.every(EW)?Array.from(new Set(r)):null;if(i!==null)for(const a of e)a.domain=i}function v3t(t,n,e){const{ratio:r}=e;return r==null?n:AW({type:t})?g3t(n,r,t):EW({type:t})?y3t(n,r):n}function g3t(t,n,e){const r=t.map(Number),i=new eo({domain:r,range:[r[0],r[0]+(r[r.length-1]-r[0])*n]});return e==="time"?t.map(a=>new Date(i.map(a))):t.map(a=>i.map(a))}function y3t(t,n){const e=Math.round(t.length*n);return t.slice(0,e)}function AW(t){const{type:n}=t;return typeof n!="string"?!1:["linear","log","pow","time"].includes(n)}function EW(t){const{type:n}=t;return typeof n!="string"?!1:["band","point","ordinal"].includes(n)}function m3t(t,n,e){const{type:r,domain:i,range:a,quantitative:o,ordinal:s}=e;return r!==void 0?r:L3t(n)?"identity":typeof a=="string"?"linear":(i||a||[]).length>2?qx(t,s):i!==void 0?JF([i])?qx(t,s):tD(n)?"time":KF(t,a,o):JF(n)?qx(t,s):tD(n)?"time":KF(t,a,o)}function x3t(t,n,e,r){const{domain:i}=r;if(i!==void 0)return i;switch(t){case"linear":case"time":case"log":case"pow":case"sqrt":case"quantize":case"threshold":return QF(C3t(e,r),r);case"band":case"ordinal":case"point":return TW(e);case"quantile":return P3t(e);case"sequential":return QF(k3t(e),r);default:return[]}}function b3t(t,n,e,r,i,a,o){const{range:s}=r;if(typeof s=="string")return S3t(s);if(s!==void 0)return s;const{rangeMin:l,rangeMax:c}=r;switch(t){case"linear":case"time":case"log":case"pow":case"sqrt":{const u=ZF(e,r,i,a,o),[f,h]=_3t(n,u);return[l||f,c||h]}case"band":case"point":return[l||(n==="size"?5:0),c||(n==="size"?10:1)];case"ordinal":return ZF(e,r,i,a,o);case"sequential":return;case"constant":return[e[0][0]];default:return[]}}function w3t(t,n,e,r,i){switch(t){case"linear":case"time":case"log":case"pow":case"sqrt":return A3t(i,r);case"band":case"point":return E3t(t,n,i,r);case"sequential":return M3t(r);default:return r}}function ZF(t,n,e,r,i){const[a]=Le("palette",i),{category10:o,category20:s}=r,l=n1t(t.flat()).length<=o.length?o:s,{palette:c=l,offset:u}=n;if(Array.isArray(c))return c;try{return a({type:c})}catch{const h=O3t(c,e,u);if(h)return h;throw new Error(`Unknown Component: ${c} `)}}function S3t(t){return t.split("-")}function O3t(t,n,e=r=>r){if(!t)return null;const r=us(t),i=k2[`scheme${r}`],a=k2[`interpolate${r}`];if(!i&&!a)return null;if(i){if(!i.some(Array.isArray))return i;const o=i[n.length];if(o)return o}return n.map((o,s)=>a(e(s/n.length)))}function M3t(t){const{palette:n="ylGnBu",offset:e}=t,r=us(n),i=k2[`interpolate${r}`];if(!i)throw new Error(`Unknown palette: ${r}`);return{interpolator:e?a=>i(e(a)):i}}function A3t(t,n){const{interpolate:e=Bd,nice:r=!1,tickCount:i=5}=n;return Object.assign(Object.assign({},n),{interpolate:e,nice:r,tickCount:i})}function E3t(t,n,e,r){if(r.padding!==void 0||r.paddingInner!==void 0||r.paddingOuter!==void 0)return Object.assign(Object.assign({},r),{unknown:NaN});const i=T3t(t,n,e),{paddingInner:a=i,paddingOuter:o=i}=r;return Object.assign(Object.assign({},r),{paddingInner:a,paddingOuter:o,padding:i,unknown:NaN})}function T3t(t,n,e){return n==="enterDelay"||n==="enterDuration"||n==="size"?0:t==="band"?KY(e)?0:.1:t==="point"?.5:0}function qx(t,n){return n||(I3t(t)?"point":"ordinal")}function KF(t,n,e){return e||(t!=="color"||n?"linear":"sequential")}function QF(t,n){if(t.length===0)return t;const{domainMin:e,domainMax:r}=n,[i,a]=t;return[e??i,r??a]}function C3t(t,n){const{zero:e=!1}=n;let r=1/0,i=-1/0;for(const a of t)for(const o of a)Oe(o)&&(r=Math.min(r,+o),i=Math.max(i,+o));return r===1/0?[]:e?[Math.min(0,r),i]:[r,i]}function TW(t){return Array.from(new Set(t.flat()))}function P3t(t){return TW(t).sort()}function k3t(t){let n=1/0,e=-1/0;for(const r of t)for(const i of r)Oe(i)&&(n=Math.min(n,+i),e=Math.max(e,+i));return n===1/0?[]:[n<0?-e:n,e]}function _3t(t,n){return t==="enterDelay"?[0,1e3]:t=="enterDuration"?[300,1e3]:t.startsWith("y")||t.startsWith("position")?[1,0]:t==="color"?[e1t(n),B4(n)]:t==="opacity"?[0,1]:t==="size"?[1,10]:[0,1]}function JF(t){return dE(t,n=>{const e=typeof n;return e==="string"||e==="boolean"})}function tD(t){return dE(t,n=>n instanceof Date)}function L3t(t){return dE(t,zh)}function dE(t,n){for(const e of t)if(e.some(n))return!0;return!1}function I3t(t){return t.startsWith("x")||t.startsWith("y")||t.startsWith("position")||t.startsWith("size")}function F3t(t){return t.startsWith("x")||t.startsWith("y")||t.startsWith("position")||t==="enterDelay"||t==="enterDuration"||t==="updateDelay"||t==="updateDuration"||t==="exitDelay"||t==="exitDuration"}function D3t(t){if(!t||!t.type)return!1;if(typeof t.type=="function")return!0;const{type:n,domain:e,range:r,interpolator:i}=t,a=e&&e.length>0,o=r&&r.length>0;return!!(["linear","sqrt","log","time","pow","threshold","quantize","quantile","ordinal","band","point"].includes(n)&&a&&o||["sequential"].includes(n)&&a&&(o||i)||["constant","identity"].includes(n)&&o)}const R3t={linear:"linear",identity:"identity",log:"log",pow:"pow",sqrt:"sqrt",sequential:"sequential"},B3t={threshold:"threshold",quantize:"quantize",quantile:"quantile"},N3t={ordinal:"ordinal",band:"band",point:"point"},$3t={constant:"constant"};var Ss=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};function j3t(t,n,e){const{coordinates:r=[],title:i}=n,[,a]=Le("component",e),o=t.filter(({guide:u})=>u!==null),s=[],l=Z3t(n,t,e);if(s.push(...l),i){const{props:u}=a("title"),{defaultPosition:f,defaultOrientation:h,defaultOrder:d,defaultSize:p,defaultCrossPadding:v}=u,g=typeof i=="string"?{title:i}:i;s.push(Object.assign({type:"title",position:f,orientation:h,order:d,crossPadding:v[0],defaultSize:p},g))}return V3t(o,r).forEach(([u,f])=>{const{props:h}=a(u),{defaultPosition:d,defaultPlane:p="xy",defaultOrientation:v,defaultSize:g,defaultOrder:y,defaultLength:m,defaultPadding:x=[0,0],defaultCrossPadding:b=[0,0]}=h,w=nt({},...f),{guide:S,field:O}=w,M=Array.isArray(S)?S:[S];for(const A of M){const[T,C]=U3t(u,d,v,A,f,o,r);if(!T&&!C)continue;const P=T==="left"||T==="right",_=P?x[1]:x[0],k=P?b[1]:b[0],{size:I,order:L=y,length:F=m,padding:B=_,crossPadding:D=k}=A;s.push(Object.assign(Object.assign({title:O},A),{defaultSize:g,length:F,position:T,plane:p,orientation:C,padding:B,order:L,crossPadding:D,size:I,type:u,scales:f}))}}),s}function eD(t,n,e,r,i){const[a]=Le("component",r),{scaleInstances:o,scale:s,bbox:l}=t,c=Ss(t,["scaleInstances","scale","bbox"]),u={bbox:l,library:r};return a(c)({coordinate:n,library:r,markState:i,scales:o,theme:e,value:u,scale:s})}function z3t(t){return t.map(n=>{const e=nt(n,n.style);return delete e.style,e})}function CW(t,n){const e=["left","right","bottom","top"];return pM(t,({type:a,position:o,group:s})=>e.includes(o)?s===void 0?a.startsWith("legend")?`legend-${o}`:Symbol("independent"):s==="independent"?Symbol("independent"):s:Symbol("independent")).flatMap(([,a])=>{if(a.length===1)return a[0];if(n!==void 0){const u=a.filter(v=>v.length!==void 0).map(v=>v.length),f=ui(u);if(f>n)return a.forEach(v=>v.group=Symbol("independent")),a;const h=n-f,d=a.length-u.length,p=h/d;a.forEach(v=>{v.length===void 0&&(v.length=p)})}const o=he(a,u=>u.size),s=he(a,u=>u.order),l=he(a,u=>u.crossPadding),c=a[0].position;return{type:"group",size:o,order:s,position:c,children:a,crossPadding:l}})}function G3t(t,n){const e=["shape","size","color","opacity"],r=(h,d)=>h==="constant"&&d==="size",i=t.filter(({type:h,name:d})=>typeof h=="string"&&e.includes(d)&&!r(h,d)),a=i.filter(({type:h})=>h==="constant"),o=i.filter(({type:h})=>h!=="constant"),l=pM(o,h=>h.field?h.field:Symbol("independent")).map(([h,d])=>[h,[...d,...a]]).filter(([,h])=>h.some(d=>d.type!=="constant")),c=new Map(l);if(c.size===0)return[];const u=h=>h.sort(([d],[p])=>d.localeCompare(p));return Array.from(c).map(([,h])=>{const p=r1t(h).sort((v,g)=>g.length-v.length).map(v=>({combination:v,option:v.map(g=>[g.name,Y3t(g)])}));for(const{option:v,combination:g}of p)if(!v.every(y=>y[1]==="constant")&&v.every(y=>y[1]==="discrete"||y[1]==="constant"))return["legendCategory",g];for(const[v,g]of EDt)for(const{option:y,combination:m}of p)if(g.some(x=>wmt(u(x),u(y))))return[v,m];return null}).filter(Oe)}function Y3t(t){const{type:n}=t;return typeof n!="string"?null:n in R3t?"continuous":n in N3t?"discrete":n in B3t?"distribution":n in $3t?"constant":null}function W3t(t,n){return t.map(e=>{const{name:r}=e;if(sBt(n)||KY(n)||Lc(n)&&(Vs(n)||ah(n)))return null;if(r.startsWith("x"))return Vs(n)?["axisArc",[e]]:ah(n)?["axisLinear",[e]]:[Lc(n)?"axisY":"axisX",[e]];if(r.startsWith("y"))return Vs(n)?["axisLinear",[e]]:ah(n)?["axisArc",[e]]:[Lc(n)?"axisX":"axisY",[e]];if(r.startsWith("z"))return["axisZ",[e]];if(r.startsWith("position")){if(uBt(n))return["axisRadar",[e]];if(!Vs(n))return["axisY",[e]]}return null}).filter(Oe)}function V3t(t,n){const e=t.filter(r=>D3t(r));return[...G3t(e),...W3t(e,n)]}function _2(t){const n=zi(t,"polar");if(n.length){const r=n[n.length-1],{startAngle:i,endAngle:a}=y4(r);return[i,a]}const e=zi(t,"radial");if(e.length){const r=e[e.length-1],{startAngle:i,endAngle:a}=x4(r);return[i,a]}return[-Math.PI/2,Math.PI/2*3]}function H3t(t){const n=/position(\d*)/g.exec(t);return n?+n[1]:null}function X3t(t,n,e,r,i){const{name:a}=e[0];if(t==="axisRadar"){const o=r.filter(f=>f.name.startsWith("position")),s=H3t(a);if(a===o.slice(-1)[0].name||s===null)return[null,null];const[l,c]=_2(i);return["center",(c-l)/(o.length-1)*s+l]}if(t==="axisY"&&lBt(i))return Lc(i)?["center","horizontal"]:["center","vertical"];if(t==="axisLinear"){const[o]=_2(i);return["center",o]}return t==="axisArc"?n[0]==="inner"?["inner",null]:["outer",null]:Vs(i)?["center",null]:ah(i)?["center",null]:t==="axisX"&&cBt(i)||t==="axisX"&&fBt(i)?["top",null]:n}function U3t(t,n,e,r,i,a,o){const[s]=_2(o),l=[r.position||n,s??e];return typeof t=="string"&&t.startsWith("axis")?X3t(t,l,i,a,o):typeof t=="string"&&t.startsWith("legend")&&Vs(o)&&r.position==="center"?["center","vertical"]:l}function q3t(t,n,e=[]){return t==="x"?Lc(e)?`${n}Y`:`${n}X`:t==="y"?Lc(e)?`${n}X`:`${n}Y`:null}function Z3t(t,n,e){const[,r]=Le("component",e),{coordinates:i}=t;function a(o,s,l,c){const u=q3t(s,o,i);if(!c||!u)return;const{props:f}=r(u),{defaultPosition:h,defaultSize:d,defaultOrder:p,defaultCrossPadding:[v]}=f;return Object.assign(Object.assign({position:h,defaultSize:d,order:p,type:u,crossPadding:v},c),{scales:[l]})}return n.filter(o=>o.slider||o.scrollbar).flatMap(o=>{const{slider:s,scrollbar:l,name:c}=o;return[a("slider",c,o,s),a("scrollbar",c,o,l)]}).filter(o=>!!o)}function PW(t,n,e,r,i,a){const{type:o}=t;if(!["left","right","bottom","top"].includes(r)||typeof o!="string")return;const l=o;return(()=>l.startsWith("axis")?eNt:l.startsWith("group")?K3t:l.startsWith("legendContinuous")?nNt:l==="legendCategory"?rNt:l.startsWith("slider")?tNt:l==="title"?J3t:l.startsWith("scrollbar")?Q3t:()=>{})()(t,n,e,r,i,a)}function K3t(t,n,e,r,i,a){const{children:o}=t,s=he(o,c=>c.crossPadding);o.forEach(c=>c.crossPadding=s),o.forEach(c=>PW(c,n,e,r,i,a));const l=he(o,c=>c.size);t.size=l,o.forEach(c=>c.size=l)}function Q3t(t,n,e,r,i,a){const{trackSize:o=6}=nt({},i.scrollbar,t);t.size=o}function J3t(t,n,e,r,i,a){const o=nt({},i.title,t),{title:s,subtitle:l,spacing:c=0}=o,u=Ss(o,["title","subtitle","spacing"]);if(s){const f=ct(u,"title"),h=Iy(s,f);t.size=h.height}if(l){const f=ct(u,"subtitle"),h=Iy(l,f);t.size+=c+h.height}}function tNt(t,n,e,r,i,a){const o=()=>{const{slider:u}=i;return nt({},u,t)},{trackSize:s,handleIconSize:l}=o(),c=Math.max(s,l*2.4);t.size=c}function eNt(t,n,e,r,i,a){t.transform=t.transform||[{type:"hide"}];const o=r==="left"||r==="right",s=kW(t,r,i),{tickLength:l=0,labelSpacing:c=0,titleSpacing:u=0,labelAutoRotate:f}=s,h=Ss(s,["tickLength","labelSpacing","titleSpacing","labelAutoRotate"]),d=Um(t,a),p=qm(h,d),v=l+c;if(p&&p.length){const y=he(p,x=>x.width),m=he(p,x=>x.height);if(o)t.size=y+v;else{const{tickFilter:x,labelTransform:b}=t;oNt(d,p,n,e,x)&&!b&&f!==!1&&f!==null?(t.labelTransform="rotate(90)",t.size=y+v):t.size=m+v}}else t.size=l;const g=Zm(h);g&&(o?t.size+=u+g.width:t.size+=u+g.height)}function nNt(t,n,e,r,i,a){const s=(()=>{const{legendContinuous:b}=i;return nt({},b,t)})(),{labelSpacing:l=0,titleSpacing:c=0}=s,u=Ss(s,["labelSpacing","titleSpacing"]),f=r==="left"||r==="right",h=ct(u,"ribbon"),{size:d}=h,p=ct(u,"handleIcon"),{size:v}=p,g=Math.max(d,v*2.4);t.size=g;const y=Um(t,a),m=qm(u,y);if(m){const b=f?"width":"height",w=he(m,S=>S[b]);t.size+=w+l}const x=Zm(u);x&&(f?t.size=Math.max(t.size,x.width):t.size+=c+x.height)}function rNt(t,n,e,r,i,a){const s=(()=>{const{legendCategory:k}=i,{title:I}=t,[L,F]=Array.isArray(I)?[I,void 0]:[void 0,I];return nt({title:L},k,Object.assign(Object.assign({},t),{title:F}))})(),{itemSpacing:l,itemMarkerSize:c,titleSpacing:u,rowPadding:f,colPadding:h,maxCols:d=1/0,maxRows:p=1/0}=s,v=Ss(s,["itemSpacing","itemMarkerSize","titleSpacing","rowPadding","colPadding","maxCols","maxRows"]),{cols:g,length:y}=t,m=k=>Math.min(k,p),x=k=>Math.min(k,d),b=r==="left"||r==="right",w=y===void 0?n+(b?0:e[0]+e[1]):y,S=Zm(v),O=Um(t,a),M=qm(v,O,"itemLabel"),A=Math.max(M[0].height,c)+f,T=(k,I=0)=>c+k+l[0]+I;b?(()=>{let k=-1/0,I=0,L=1,F=0,B=-1/0,D=-1/0;const N=S?S.height:0,j=w-N;for(const{width:Y}of M){const W=T(Y);k=Math.max(k,W),I+A>j?(L++,B=Math.max(B,F),D=Math.max(D,I),F=1,I=A):(I+=A,F++)}L<=1&&(B=F,D=I),t.size=k*x(L),t.length=D+N,nt(t,{cols:x(L),gridRow:B})})():typeof g=="number"?(()=>{const k=Math.ceil(M.length/g),I=he(M,L=>T(L.width))*g;t.size=A*m(k)-f,t.length=Math.min(I,w)})():(()=>{let k=1,I=0,L=-1/0;for(const{width:F}of M){const B=T(F,h);I+B>w?(L=Math.max(L,I),I=B,k++):I+=B}k===1&&(L=I),t.size=A*m(k)-f,t.length=L})(),S&&(b?t.size=Math.max(t.size,S.width):t.size+=u+S.height)}function Um(t,n){const[e]=Le("scale",n),{scales:r,tickCount:i,tickMethod:a}=t,o=r.find(s=>s.type!=="constant"&&s.type!=="identity");return i!==void 0&&(o.tickCount=i),a!==void 0&&(o.tickMethod=a),e(o)}function qm(t,n,e="label"){const{labelFormatter:r,tickFilter:i,label:a=!0}=t,o=Ss(t,["labelFormatter","tickFilter","label"]);if(!a)return null;const s=iNt(n,r,i),l=ct(o,e),c=s.map((h,d)=>Object.fromEntries(Object.entries(l).map(([p,v])=>[p,typeof v=="function"?v(h,d):v]))),u=s.map((h,d)=>{const p=c[d];return Iy(h,p)});if(!c.some(h=>h.transform)){const h=s.map((d,p)=>p);t.indexBBox=new Map(h.map(d=>[d,[s[d],u[d]]]))}return u}function Zm(t){const n=c=>c===!1||c===null,{title:e}=t,r=Ss(t,["title"]);if(n(e)||e===void 0)return null;const i=ct(r,"title"),{direction:a,transform:o}=i,s=Array.isArray(e)?e.join(","):e;return typeof s!="string"?null:Iy(s,Object.assign(Object.assign({},i),{transform:o||(a==="vertical"?"rotate(-90)":"")}))}function kW(t,n,e){const{title:r}=t,[i,a]=Array.isArray(r)?[r,void 0]:[void 0,r],{axis:o,[`axis${xM(n)}`]:s}=e;return nt({title:i},o,s,Object.assign(Object.assign({},t),{title:a}))}function _W(t,n){const e=t.getTicks?t.getTicks():t.getOptions().domain;return n?e.filter(n):e}function iNt(t,n,e){const i=_W(t,e).map(o=>typeof o=="number"?ey(o):o),a=n?typeof n=="string"?ms(n):n:t.getFormatter?t.getFormatter():o=>`${o}`;return i.map(a)}function aNt(t,n){return t.getBandWidth?t.getBandWidth(n)/2:0}function oNt(t,n,e,r,i){if(ui(n,d=>d.width)>e)return!0;const o=t.clone();o.update({range:[0,e]});const s=_W(t,i),l=s.map(d=>o.map(d)+aNt(o,d)),c=s.map((d,p)=>p),u=-r[0],f=e+r[1],h=(d,p)=>{const{width:v}=p;return[d-v/2,d+v/2]};for(let d=0;d<c.length;d++){const p=l[d],[v,g]=h(p,n[d]);if(v<u||g>f)return!0;const y=l[d+1];if(y){const[m]=h(y,n[d+1]);if(g>m)return!0}}return!1}function Iy(t,n){const e=sNt(t),r=Ss(n,["filter"]);return e.attr(Object.assign(Object.assign({},r),{visibility:"none"})),e.getBBox()}function sNt(t){return t instanceof Kn?t:new Fi({style:{text:`${t}`}})}function lNt(t){const n=t.find(({type:e})=>e==="axisZ");if(n){const e=t.find(({type:i})=>i==="axisX");e.plane="xy";const r=t.find(({type:i})=>i==="axisY");r.plane="xy",n.plane="yz",n.origin=[e.bbox.x,e.bbox.y,0],n.eulerAngles=[0,-90,0],n.bbox.x=e.bbox.x,n.bbox.y=e.bbox.y,t.push(Object.assign(Object.assign({},e),{plane:"xz",showLabel:!1,showTitle:!1,origin:[e.bbox.x,e.bbox.y,0],eulerAngles:[-90,0,0]})),t.push(Object.assign(Object.assign({},r),{plane:"yz",showLabel:!1,showTitle:!1,origin:[r.bbox.x+r.bbox.width,r.bbox.y,0],eulerAngles:[0,-90,0]})),t.push(Object.assign(Object.assign({},n),{plane:"xz",actualPosition:"left",showLabel:!1,showTitle:!1,eulerAngles:[90,-90,0]}))}}function cNt(t,n,e,r){var i,a;const{width:o,height:s,depth:l,x:c=0,y:u=0,z:f=0,inset:h=(i=e.inset)!==null&&i!==void 0?i:0,insetLeft:d=h,insetTop:p=h,insetBottom:v=h,insetRight:g=h,margin:y=(a=e.margin)!==null&&a!==void 0?a:0,marginLeft:m=y,marginBottom:x=y,marginTop:b=y,marginRight:w=y,padding:S=e.padding,paddingBottom:O=S,paddingLeft:M=S,paddingRight:A=S,paddingTop:T=S}=fNt(t,n,e,r),C=1/4,P=(it,ft,yt,mt,St)=>{const{marks:Wt}=n;if(Wt.length===0)return[mt,St];if(it-mt-St-it*C>0)return[mt,St];const Je=it*(1-C);return[ft==="auto"?Je*mt/(mt+St):mt,yt==="auto"?Je*St/(mt+St):St]},_=it=>it==="auto"?20:it??20,k=_(T),I=_(O),L=nD(t,s-k-I,[k+b,I+x],["left","right"],n,e,r),{paddingLeft:F,paddingRight:B}=L,D=o-m-w,[N,j]=P(D,M,A,F,B),Y=D-N-j,W=nD(t,Y,[N+m,j+w],["bottom","top"],n,e,r),{paddingTop:V,paddingBottom:H}=W,Q=s-x-b,[Z,q]=P(Q,O,T,H,V),rt=Q-Z-q;return{width:o,height:s,depth:l,insetLeft:d,insetTop:p,insetBottom:v,insetRight:g,innerWidth:Y,innerHeight:rt,paddingLeft:N,paddingRight:j,paddingTop:q,paddingBottom:Z,marginLeft:m,marginBottom:x,marginTop:b,marginRight:w,x:c,y:u,z:f}}function uNt(t){const{height:n,width:e,padding:r=0,paddingLeft:i=r,paddingRight:a=r,paddingTop:o=r,paddingBottom:s=r,margin:l=16,marginLeft:c=l,marginRight:u=l,marginTop:f=l,marginBottom:h=l,inset:d=0,insetLeft:p=d,insetRight:v=d,insetTop:g=d,insetBottom:y=d}=t,m=w=>w==="auto"?20:w,x=e-m(i)-m(a)-c-u-p-v,b=n-m(o)-m(s)-f-h-g-y;return{width:x,height:b}}function fNt(t,n,e,r){const{coordinates:i}=n;if(!Vs(i)&&!ah(i))return n;const a=t.filter(y=>typeof y.type=="string"&&y.type.startsWith("axis"));if(a.length===0)return n;const o=a.map(y=>{const m=y.type==="axisArc"?"arc":"linear";return kW(y,m,e)}),s=he(o,y=>{var m;return(m=y.labelSpacing)!==null&&m!==void 0?m:0}),l=a.flatMap((y,m)=>{const x=o[m],b=Um(y,r);return qm(x,b)}).filter(Oe),c=he(l,y=>y.height)+s,u=a.flatMap((y,m)=>{const x=o[m];return Zm(x)}).filter(y=>y!==null),f=u.length===0?0:he(u,y=>y.height),{inset:h=c,insetLeft:d=h,insetBottom:p=h,insetTop:v=h+f,insetRight:g=h}=n;return Object.assign(Object.assign({},n),{insetLeft:d,insetBottom:p,insetTop:v,insetRight:g})}function nD(t,n,e,r,i,a,o){const s=Be(t,p=>p.position),{padding:l=a.padding,paddingLeft:c=l,paddingRight:u=l,paddingBottom:f=l,paddingTop:h=l}=i,d={paddingBottom:f,paddingLeft:c,paddingTop:h,paddingRight:u};for(const p of r){const v=`padding${xM(L9(p))}`,g=s.get(p)||[],y=d[v],m=A=>{A.size===void 0&&(A.size=A.defaultSize)},x=A=>{A.type==="group"?(A.children.forEach(m),A.size=he(A.children,T=>T.size)):A.size=A.defaultSize},b=A=>{A.size||(y!=="auto"?x(A):(PW(A,n,e,p,a,o),m(A)))},w=A=>{A.type.startsWith("axis")&&A.labelAutoHide===void 0&&(A.labelAutoHide=!0)},S=p==="bottom"||p==="top",O=Hr(g,A=>A.order),M=g.filter(A=>A.type.startsWith("axis")&&A.order==O);if(M.length&&(M[0].crossPadding=0),typeof y=="number")g.forEach(m),g.forEach(w);else if(g.length===0)d[v]=0;else{const A=S?n+e[0]+e[1]:n,T=CW(g,A);T.forEach(b);const C=T.reduce((P,{size:_,crossPadding:k=12})=>P+_+k,0);d[v]=C}}return d}function hNt(t,n,e){const r=Be(t,S=>`${S.plane||"xy"}-${S.position}`),{paddingLeft:i,paddingRight:a,paddingTop:o,paddingBottom:s,marginLeft:l,marginTop:c,marginBottom:u,marginRight:f,innerHeight:h,innerWidth:d,insetBottom:p,insetLeft:v,insetRight:g,insetTop:y,height:m,width:x,depth:b}=e,w={xy:Zx({width:x,height:m,paddingLeft:i,paddingRight:a,paddingTop:o,paddingBottom:s,marginLeft:l,marginTop:c,marginBottom:u,marginRight:f,innerHeight:h,innerWidth:d,insetBottom:p,insetLeft:v,insetRight:g,insetTop:y}),yz:Zx({width:b,height:m,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,marginLeft:0,marginTop:0,marginBottom:0,marginRight:0,innerWidth:b,innerHeight:m,insetBottom:0,insetLeft:0,insetRight:0,insetTop:0}),xz:Zx({width:x,height:b,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,marginLeft:0,marginTop:0,marginBottom:0,marginRight:0,innerWidth:x,innerHeight:b,insetBottom:0,insetLeft:0,insetRight:0,insetTop:0})};for(const[S,O]of r.entries()){const[M,A]=S.split("-"),T=w[M][A],[C,P]=N4(O,_=>typeof _.type!="string"?!1:!!(A==="center"||_.type.startsWith("axis")&&["inner","outer"].includes(A)));C.length&&dNt(C,n,T,A),P.length&&SNt(O,n,T)}}function Zx({width:t,height:n,paddingLeft:e,paddingRight:r,paddingTop:i,paddingBottom:a,marginLeft:o,marginTop:s,marginBottom:l,marginRight:c,innerHeight:u,innerWidth:f,insetBottom:h,insetLeft:d,insetRight:p,insetTop:v}){const g=e+o,y=i+s,m=r+c,x=a+l,b=t-o-c,w=[g+d,y+v,f-d-p,u-v-h,"center",null,null];return{top:[g,0,f,y,"vertical",!0,Xe,o,b],right:[t-m,y,m,u,"horizontal",!1,Xe],bottom:[g,n-x,f,x,"vertical",!1,Xe,o,b],left:[0,y,g,u,"horizontal",!0,Xe],"top-left":[g,0,f,y,"vertical",!0,Xe],"top-right":[g,0,f,y,"vertical",!0,Xe],"bottom-left":[g,n-x,f,x,"vertical",!1,Xe],"bottom-right":[g,n-x,f,x,"vertical",!1,Xe],center:w,inner:w,outer:w}}function dNt(t,n,e,r){const[i,a]=N4(t,o=>!!(typeof o.type=="string"&&o.type.startsWith("axis")));pNt(i,n,e,r),ONt(a,n,e)}function pNt(t,n,e,r){r==="center"?Sbt(n)?wNt(t,n,e):Fe(n)?yNt(t,n,e):xm(n)&&mNt(t,n,e,t[0].orientation):r==="inner"?vNt(t,n,e):r==="outer"&&gNt(t,n,e)}function vNt(t,n,e){const[r,i,,a]=e,[o,s]=n.getCenter(),[l]=bm(n),c=a/2,u=l*c,f=o-u,h=s-u;for(let d=0;d<t.length;d++){const p=t[d];p.bbox={x:r+f,y:i+h,width:u*2,height:u*2}}}function gNt(t,n,e){const[r,i,a,o]=e;for(const s of t)s.bbox={x:r,y:i,width:a,height:o}}function yNt(t,n,e){const[r,i,a,o]=e;for(const s of t)s.bbox={x:r,y:i,width:a,height:o}}function mNt(t,n,e,r){r==="horizontal"?bNt(t,n,e):r==="vertical"&&xNt(t,n,e)}function xNt(t,n,e){const[r,i,,a]=e,o=new Array(t.length).fill(0),l=n.map(o).filter((c,u)=>u%2===0).map(c=>c+r);for(let c=0;c<t.length;c++){const u=t[c],f=l[c],h=l[c+1]-f;u.bbox={x:f,y:i,width:h,height:a}}}function bNt(t,n,e){const[r,i,a]=e,o=new Array(t.length).fill(0),l=n.map(o).filter((c,u)=>u%2===1).map(c=>c+i);for(let c=0;c<t.length;c++){const u=t[c],f=l[c],h=l[c+1]-f;u.bbox={x:r,y:f,width:a,height:h}}}function wNt(t,n,e,r){const[i,a,o,s]=e;for(const l of t)l.bbox={x:i,y:a,width:o,height:s},l.radar={index:t.indexOf(l),count:t.length}}function SNt(t,n,e){const[r,i,a,o,s,l,c,u,f]=e,[h,d,p,v,g,y,m,x]=s==="vertical"?["y",i,"x",r,"height",o,"width",a]:["x",r,"y",i,"width",a,"height",o];t.sort((A,T)=>c==null?void 0:c(A.order,T.order));const b=A=>A==="title"||A==="group"||A.startsWith("legend"),w=(A,T,C)=>C===void 0?T:b(A)?C:T,S=(A,T,C)=>C===void 0?T:b(A)?C:T,O=l?d+y:d;for(let A=0,T=O;A<t.length;A++){const C=t[A],{crossPadding:P=0,type:_}=C,{size:k}=C;C.bbox={[h]:l?T-k-P:T+P,[p]:S(_,v,u),[g]:k,[m]:w(_,x,f)},T+=(k+P)*(l?-1:1)}const M=t.filter(A=>A.type==="group");for(const A of M){const{bbox:T,children:C}=A,P=T[m],_=P/C.length,k=C.reduce((D,N)=>{var j;const Y=(j=N.layout)===null||j===void 0?void 0:j.justifyContent;return Y||D},"flex-start"),I=C.map((D,N)=>{const{length:j=_,padding:Y=0}=D;return j+(N===C.length-1?0:Y)}),L=ui(I),F=P-L,B=k==="flex-start"?0:k==="center"?F/2:F;for(let D=0,N=T[p]+B;D<C.length;D++){const j=C[D],{padding:Y=0}=j,W=D===C.length-1?0:Y;j.bbox={[g]:T[g],[h]:T[h],[p]:N,[m]:I[D]-W},nt(j,{layout:{justifyContent:k}}),N+=I[D]}}}function ONt(t,n,e){if(t.length===0)return;const[r,i,a,o]=e,[s]=bm(n),l=o/2*s/Math.sqrt(2),c=r+a/2,u=i+o/2;for(let f=0;f<t.length;f++){const h=t[f];h.bbox={x:c-l,y:u-l,width:l*2,height:l*2}}}var MNt=globalThis&&globalThis.__awaiter||function(t,n,e,r){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(t,n||[])).next())})},xu=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};function ANt(t,n,e){const{encode:r={},scale:i={},transform:a=[]}=n,o=xu(n,["encode","scale","transform"]);return[t,Object.assign(Object.assign({},o),{encode:r,scale:i,transform:a})]}function LW(t,n,e){return MNt(this,void 0,void 0,function*(){const{library:r}=e,{data:i}=n,[a]=Le("data",r),o=NNt(i),{transform:s=[]}=o,u=[xu(o,["transform"]),...s].map(a),f=yield Kmt(u)(i),h=i&&!Array.isArray(i)&&!Array.isArray(f)?{value:f}:f;return[Array.isArray(f)?Fl(f):[],Object.assign(Object.assign({},n),{data:h})]})}function ENt(t,n,e){const{encode:r}=n;if(!r)return[t,n];const i={};for(const[a,o]of Object.entries(r))if(Array.isArray(o))for(let s=0;s<o.length;s++){const l=`${a}${s===0?"":s}`;i[l]=o[s]}else i[a]=o;return[t,Object.assign(Object.assign({},n),{encode:i})]}function TNt(t,n,e){const{encode:r,data:i}=n;if(!r)return[t,n];const a=fs(r,o=>DNt(o)?o:{type:RNt(i,o),value:o});return[t,Object.assign(Object.assign({},n),{encode:a})]}function CNt(t,n,e){const{encode:r}=n;if(!r)return[t,n];const i=fs(r,(a,o)=>{const{type:s}=a;return s!=="constant"||F3t(o)?a:Object.assign(Object.assign({},a),{constant:!0})});return[t,Object.assign(Object.assign({},n),{encode:i})]}function PNt(t,n,e){const{encode:r,data:i}=n;if(!r)return[t,n];const{library:a}=e,o=zNt(a),s=fs(r,l=>o(i,l));return[t,Object.assign(Object.assign({},n),{encode:s})]}function kNt(t,n,e){const{tooltip:r={}}=n;return to(r)?[t,n]:Array.isArray(r)?[t,Object.assign(Object.assign({},n),{tooltip:{items:r}})]:zh(r)&&c7(r)?[t,Object.assign(Object.assign({},n),{tooltip:r})]:[t,Object.assign(Object.assign({},n),{tooltip:{items:[r]}})]}function _Nt(t,n,e){const{data:r,encode:i,tooltip:a={}}=n;if(to(a))return[t,n];const o=f=>{if(!f)return f;if(typeof f=="string")return t.map(h=>({name:f,value:r[h][f]}));if(zh(f)){const{field:h,channel:d,color:p,name:v=h,valueFormatter:g=S=>S}=f,y=typeof g=="string"?ms(g):g,m=d&&i[d],x=m&&i[d].field,b=v||x||d,w=[];for(const S of t){const O=h?r[S][h]:m?i[d].value[S]:null;w[S]={name:b,color:p,value:y(O)}}return w}if(typeof f=="function"){const h=[];for(const d of t){const p=f(r[d],d,r,i);zh(p)?h[d]=p:h[d]={value:p}}return h}return f},{title:s,items:l=[]}=a,c=xu(a,["title","items"]),u=Object.assign({title:o(s),items:Array.isArray(l)?l.map(o):[]},c);return[t,Object.assign(Object.assign({},n),{tooltip:u})]}function LNt(t,n,e){const{encode:r}=n,i=xu(n,["encode"]);if(!r)return[t,n];const a=Object.entries(r),o=a.filter(([,l])=>{const{value:c}=l;return Array.isArray(c[0])}).flatMap(([l,c])=>{const u=[[l,new Array(t.length).fill(void 0)]],{value:f}=c,h=xu(c,["value"]);for(let d=0;d<f.length;d++){const p=f[d];if(Array.isArray(p))for(let v=0;v<p.length;v++){const g=u[v]||[`${l}${v}`,new Array(t).fill(void 0)];g[1][d]=p[v],u[v]=g}}return u.map(([d,p])=>[d,Object.assign({type:"column",value:p},h)])}),s=Object.fromEntries([...a,...o]);return[t,Object.assign(Object.assign({},i),{encode:s})]}function INt(t,n,e){const{axis:r={},legend:i={},slider:a={},scrollbar:o={}}=n,s=(c,u)=>{if(typeof c=="boolean")return c?{}:null;const f=c[u];return f===void 0||f?f:null},l=typeof r=="object"?Array.from(new Set(["x","y",...Object.keys(r)])):["x","y"];return nt(n,{scale:Object.assign(Object.assign({},Object.fromEntries(l.map(c=>{const u=s(o,c);return[c,Object.assign({guide:s(r,c),slider:s(a,c),scrollbar:u},u&&{ratio:u.ratio===void 0?.5:u.ratio})]}))),{color:{guide:s(i,"color")},size:{guide:s(i,"size")},shape:{guide:s(i,"shape")},opacity:{guide:s(i,"opacity")}})}),[t,n]}function FNt(t,n,e){const{animate:r}=n;return r||r===void 0?[t,n]:(nt(n,{animate:{enter:{type:null},exit:{type:null},update:{type:null}}}),[t,n])}function DNt(t){if(typeof t!="object"||t instanceof Date||t===null)return!1;const{type:n}=t;return Oe(n)}function RNt(t,n){return typeof n=="function"?"transform":typeof n=="string"&&BNt(t,n)?"field":"constant"}function BNt(t,n){return Array.isArray(t)?t.some(e=>e[n]!==void 0):!1}function NNt(t){if(tu(t))return{type:"inline",value:t};if(!t)return{type:"inline",value:null};if(Array.isArray(t))return{type:"inline",value:t};const{type:n="inline"}=t,e=xu(t,["type"]);return Object.assign(Object.assign({},e),{type:n})}var IW=globalThis&&globalThis.__awaiter||function(t,n,e,r){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(t,n||[])).next())})},$Nt=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};function jNt(t,n,e){return IW(this,void 0,void 0,function*(){const r={library:e},[i,a]=yield GNt(t,n,r),{encode:o,scale:s,data:l,tooltip:c}=a;if(Array.isArray(l)===!1)return null;const{channels:u}=n,f=I4(Object.entries(o).filter(([,d])=>Oe(d)),d=>d.map(([p,v])=>Object.assign({name:p},v)),([d])=>{var p;const v=(p=/([^\d]+)\d*$/.exec(d))===null||p===void 0?void 0:p[1],g=u.find(y=>y.name===v);return g!=null&&g.independent?d:v}),h=u.filter(d=>{const{name:p,required:v}=d;if(f.find(([g])=>g===p))return!0;if(v)throw new Error(`Missing encoding for channel: ${p}.`);return!1}).flatMap(d=>{const{name:p,scale:v,scaleKey:g,range:y,quantitative:m,ordinal:x}=d;return f.filter(([w])=>w.startsWith(p)).map(([w,S],O)=>{const M=S.some(F=>F.visual),A=S.some(F=>F.constant),T=s[w]||{},{independent:C=!1,key:P=g||w,type:_=A?"constant":M?"identity":v}=T,k=$Nt(T,["independent","key","type"]),I=_==="constant",L=I?void 0:y;return{name:w,values:S,scaleKey:C||I?Symbol("independent"):P,scale:Object.assign(Object.assign({type:_,range:L},k),{quantitative:m,ordinal:x})}})});return[a,Object.assign(Object.assign({},n),{index:i,channels:h,tooltip:c})]})}function zNt(t){const[n]=Le("encode",t);return(e,r)=>r===void 0||e===void 0?null:Object.assign(Object.assign({},r),{type:"column",value:n(r)(e),field:YNt(r)})}function GNt(t,n,e){return IW(this,void 0,void 0,function*(){const{library:r}=e,[i]=Le("transform",r),{preInference:a=[],postInference:o=[]}=n,{transform:s=[]}=t,l=[ANt,LW,ENt,TNt,CNt,PNt,LNt,FNt,INt,kNt,...a.map(i),...s.map(i),...o.map(i),_Nt];let c=[],u=t;for(const f of l)[c,u]=yield f(c,u,e);return[c,u]})}function YNt(t){const{type:n,value:e}=t;return n==="field"&&typeof e=="string"?e:null}var Ua=globalThis&&globalThis.__awaiter||function(t,n,e,r){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(t,n||[])).next())})},rs=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};function pE(t,n,e,r){var i,a;return Ua(this,void 0,void 0,function*(){const[o]=Le("composition",e),[s]=Le("interaction",e),l=new Set(Object.keys(e).map(k=>{var I;return(I=/mark\.(.*)/.exec(k))===null||I===void 0?void 0:I[1]}).filter(Oe)),c=new Set(Object.keys(e).map(k=>{var I;return(I=/component\.(.*)/.exec(k))===null||I===void 0?void 0:I[1]}).filter(Oe)),u=k=>{const{type:I}=k;if(typeof I=="function"){const{props:L={}}=I,{composite:F=!0}=L;if(F)return"mark"}return typeof I!="string"?I:l.has(I)||c.has(I)?"mark":I},f=k=>u(k)==="mark",h=k=>u(k)==="standardView",d=k=>{const{type:I}=k;return typeof I!="string"?!1:!!c.has(I)},p=k=>{if(h(k))return[k];const I=u(k);return o({type:I,static:d(k)})(k)},v=[],g=new Map,y=new Map,m=[t],x=[];for(;m.length;){const k=m.shift();if(h(k)){const I=y.get(k),[L,F]=I?RW(I,k,e):yield FW(k,e);g.set(L,k),v.push(L);const B=F.flatMap(p).map(D=>ZY(D,e));if(m.push(...B),B.every(h)){const D=yield Promise.all(B.map(N=>DW(N,e)));d3t(D);for(let N=0;N<B.length;N++){const j=B[N],Y=D[N];y.set(j,Y)}}}else{const I=f(k)?k:yield jW(k,e),L=p(I);Array.isArray(L)?m.push(...L):typeof L=="function"&&x.push(L())}}r.emitter.emit(fe.BEFORE_PAINT);const b=new Map,w=new Map,S=[];n.selectAll(oa(h2)).data(v,k=>k.key).join(k=>k.append("g").attr("className",h2).attr("id",I=>I.key).call(rD).each(function(I,L,F){I2(I,Ot(F),S,e,r),b.set(I,F)}),k=>k.call(rD).each(function(I,L,F){I2(I,Ot(F),S,e,r),w.set(I,F)}),k=>k.each(function(I,L,F){const B=F.nameInteraction.values();for(const D of B)D.destroy()}).remove());const O=k=>Array.from(k.entries()).map(([I,L])=>{const F=new Map,B=(j,Y=W=>W)=>F.set(j,Y),D=g.get(I),N=VNt(Ot(L),D,e,r);return{view:I,container:L,options:D,setState:B,update:j=>Ua(this,void 0,void 0,function*(){const W=mM(Array.from(F.values()))(D);return yield N(W,j)})}}),M=O(b);for(const k of M){const{options:I}=k,L=new Map;k.container.nameInteraction=L;for(const F of Fy(I)){const[B,D]=F;if(D){const j=L2(k.view,B,D,s)(k,M,r.emitter);L.set(B,{destroy:j})}}}const A=O(w);for(const k of A){const{options:I,container:L}=k,F=L.nameInteraction;for(const B of Fy(I)){const[D,N]=B,j=F.get(D);if(j&&((i=j.destroy)===null||i===void 0||i.call(j)),N){const W=L2(k.view,D,N,s)(k,A,r.emitter);F.set(D,{destroy:W})}}}const{width:T,height:C}=t,P=[];for(const k of x){const I=new Promise(L=>Ua(this,void 0,void 0,function*(){for(const F of k){const B=Object.assign({width:T,height:C},F);yield pE(B,n,e,r)}L()}));P.push(I)}r.views=v,(a=r.animations)===null||a===void 0||a.forEach(k=>k==null?void 0:k.cancel()),r.animations=S,r.emitter.emit(fe.AFTER_PAINT);const _=S.filter(Oe).map(o$t).map(k=>k.finished);return Promise.all([..._,...P])})}function rD(t){t.style("transform",n=>`translate(${n.layout.x}, ${n.layout.y})`)}function WNt(t){const[,n]=Le("interaction",t);return e=>{const[r,i]=e;try{return[r,n(r)]}catch{return[r,i.type]}}}function VNt(t,n,e,r){const i=WNt(e),a=l=>l[1]&&l[1].props&&l[1].props.reapplyWhenUpdate,s=Fy(n).map(i).filter(a).map(l=>l[0]);return(l,c)=>Ua(this,void 0,void 0,function*(){const u=[],[f,h]=yield FW(l,e);I2(f,t,u,e,r);for(const d of s.filter(p=>p!==c))HNt(d,t,l,f,e,r);for(const d of h)pE(d,t,e,r);return{options:l,view:f}})}function HNt(t,n,e,r,i,a){var o;const[s]=Le("interaction",i),c=n.node().nameInteraction,u=Fy(e).find(([v])=>v===t),f=c.get(t);if(!f||((o=f.destroy)===null||o===void 0||o.call(f),!u[1]))return;const h=L2(r,t,u[1],s),d={options:e,view:r,container:n.node(),update:v=>Promise.resolve(v)},p=h(d,[],a.emitter);c.set(t,{destroy:p})}function FW(t,n){return Ua(this,void 0,void 0,function*(){const e=yield UNt(t,n),r=XNt(e);t.interaction=r.interaction,t.coordinate=r.coordinate,t.marks=[...r.marks,...r.components];const i=ZY(r,n),a=yield DW(i,n);return RW(a,i,n)})}function XNt(t){const{coordinate:n={},interaction:e={},style:r={},marks:i}=t,a=rs(t,["coordinate","interaction","style","marks"]),o=i.map(h=>h.coordinate||{}),s=i.map(h=>h.interaction||{}),l=i.map(h=>h.viewStyle||{}),c=[...o,n].reduceRight((h,d)=>nt(h,d),{}),u=[e,...s].reduce((h,d)=>nt(h,d),{}),f=[...l,r].reduce((h,d)=>nt(h,d),{});return Object.assign(Object.assign({},a),{marks:i,coordinate:c,interaction:u,style:f})}function UNt(t,n){return Ua(this,void 0,void 0,function*(){const[e,r]=Le("mark",n),i=new Set(Object.keys(n).map(h=>{var d;return(d=/component\.(.*)/.exec(h))===null||d===void 0?void 0:d[1]}).filter(Oe)),{marks:a}=t,o=[],s=[],l=[...a],{width:c,height:u}=uNt(t),f={options:t,width:c,height:u};for(;l.length;){const[h]=l.splice(0,1),d=yield jW(h,n),{type:p=nu("G2Mark type is required."),key:v}=d;if(i.has(p))s.push(d);else{const{props:g={}}=r(p),{composite:y=!0}=g;if(!y)o.push(d);else{const{data:m}=d,x=Object.assign(Object.assign({},d),{data:m&&(Array.isArray(m)?m:m.value)}),b=yield e(x,f),w=Array.isArray(b)?b:[b];l.unshift(...w.map((S,O)=>Object.assign(Object.assign({},S),{key:`${v}-${O}`})))}}}return Object.assign(Object.assign({},t),{marks:o,components:s})})}function DW(t,n){return Ua(this,void 0,void 0,function*(){const[e]=Le("theme",n),[,r]=Le("mark",n),{theme:i,marks:a,coordinates:o=[]}=t,s=e($W(i)),l=new Map;for(const u of a){const{type:f}=u,{props:h={}}=r(f),d=yield jNt(u,h,n);if(d){const[p,v]=d;l.set(p,v)}}const c=Be(Array.from(l.values()).flatMap(u=>u.channels),({scaleKey:u})=>u);for(const u of c.values()){const f=u.reduce((x,{scale:b})=>nt(x,b),{}),{scaleKey:h}=u[0],{values:d}=u[0],p=Array.from(new Set(d.map(x=>x.field).filter(Oe))),v=nt({guide:{title:p.length===0?void 0:p},field:p[0]},f),{name:g}=u[0],y=u.flatMap(({values:x})=>x.map(b=>b.value)),m=Object.assign(Object.assign({},c3t(g,y,v,o,s,n)),{key:h});u.forEach(x=>x.scale=m)}return l})}function L2(t,n,e,r){const i=t.theme,a=typeof n=="string"?i[n]||{}:{};return r(nt(a,Object.assign({type:n},e)))}function RW(t,n,e){const[r]=Le("mark",e),[i]=Le("theme",e),[a]=Le("labelTransform",e),{key:o,frame:s=!1,theme:l,clip:c,style:u={},labelTransform:f=[]}=n,h=i($W(l)),d=Array.from(t.values()),p=f3t(d,n),v=z3t(j3t(u$t(Array.from(p),d,t),n,e)),g=cNt(v,n,h,e),y=oBt(g,n,e),m=s?nt({mainLineWidth:1,mainStroke:"#000"},u):u;hNt(CW(v),y,g),lNt(v);const x={};for(const S of v){const{scales:O=[]}=S,M=[];for(const A of O){const{name:T}=A,C=UF(A,e);M.push(C),XF(x,{[T]:C})}S.scaleInstances=M}const b=[];for(const[S,O]of t.entries()){const{children:M,dataDomain:A,modifier:T,key:C}=S,{index:P,channels:_,tooltip:k}=O,I=Object.fromEntries(_.map(({name:q,scale:rt})=>[q,rt])),L=fs(I,q=>UF(q,e));XF(x,L);const F=u3t(_,L),B=r(S),[D,N,j]=KNt(B(P,L,F,y)),Y=A||D.length,W=T?T(N,Y,g):[],V=q=>{var rt,it;return(it=(rt=k.title)===null||rt===void 0?void 0:rt[q])===null||it===void 0?void 0:it.value},H=q=>k.items.map(rt=>rt[q]),Q=D.map((q,rt)=>{const it=Object.assign({points:N[rt],transform:W[rt],index:q,markKey:C,viewKey:o},k&&{title:V(q),items:H(q)});for(const[ft,yt]of Object.entries(F))it[ft]=yt[q],j&&(it[`series${us(ft)}`]=j[rt].map(mt=>yt[mt]));return j&&(it.seriesIndex=j[rt]),j&&k&&(it.seriesItems=j[rt].map(ft=>H(ft)),it.seriesTitle=j[rt].map(ft=>V(ft))),it});O.data=Q,O.index=D;const Z=M==null?void 0:M(Q,L,g);b.push(...Z||[])}return[{layout:g,theme:h,coordinate:y,markState:t,key:o,clip:c,scale:x,style:m,components:v,labelTransform:mM(f.map(a))},b]}function I2(t,n,e,r,i){return Ua(this,void 0,void 0,function*(){const{components:a,theme:o,layout:s,markState:l,coordinate:c,key:u,style:f,clip:h,scale:d}=t,{x:p,y:v,width:g,height:y}=s,m=rs(s,["x","y","width","height"]),x=["view","plot","main","content"],b=x.map((B,D)=>D),w=["a","margin","padding","inset"],S=x.map(B=>D4(Object.assign({},o.view,f),B)),O=w.map(B=>ct(m,B)),M=B=>B.style("x",D=>_[D].x).style("y",D=>_[D].y).style("width",D=>_[D].width).style("height",D=>_[D].height).each(function(D,N,j){f$t(Ot(j),S[D])});let A=0,T=0,C=g,P=y;const _=b.map(B=>{const D=O[B],{left:N=0,top:j=0,bottom:Y=0,right:W=0}=D;return A+=N,T+=j,C-=N+W,P-=j+Y,{x:A,y:T,width:C,height:P}});n.selectAll(oa(eF)).data(b.filter(B=>Oe(S[B])),B=>x[B]).join(B=>B.append("rect").attr("className",eF).style("zIndex",-2).call(M),B=>B.call(M),B=>B.remove());const k=e$t(l),I=k?{duration:k[1]}:!1;for(const[,B]of pM(a,D=>`${D.type}-${D.position}`))B.forEach((D,N)=>D.index=N);const L=n.selectAll(oa(tF)).data(a,B=>`${B.type}-${B.position}-${B.index}`).join(B=>B.append("g").style("zIndex",({zIndex:D})=>D||-1).attr("className",tF).append(D=>eD(nt({animate:I,scale:d},D),c,o,r,l)),B=>B.transition(function(D,N,j){const{preserve:Y=!1}=D;if(Y)return;const W=eD(nt({animate:I,scale:d},D),c,o,r,l),{attributes:V}=W,[H]=j.childNodes;return H.update(V)})).transitions();e.push(...L.flat().filter(Oe));const F=n.selectAll(oa(vy)).data([s],()=>u).join(B=>B.append("rect").style("zIndex",0).style("fill","transparent").attr("className",vy).call(iD).call(aD,Array.from(l.keys())).call(oD,h),B=>B.call(aD,Array.from(l.keys())).call(D=>k?c$t(D,k):iD(D)).call(oD,h)).transitions();e.push(...F.flat());for(const[B,D]of l.entries()){const{data:N}=D,{key:j,class:Y,type:W}=B,V=n.select(`#${j}`),H=i$t(B,D,t,r,i),Q=a$t(B,D,t,r),Z=s$t(B,D,t,r),q=l$t(B,D,t,r),rt=n$t(n,V,Y,"element"),it=V.selectAll(oa(_a)).selectFacetAll(rt).data(N,ft=>ft.key,ft=>ft.groupKey).join(ft=>ft.append(H).attr("className",_a).attr("markType",W).transition(function(yt,mt,St){return Q(yt,[St])}),ft=>ft.call(yt=>{const mt=yt.parent(),St=Qmt(Wt=>{const[Ft,ne]=Wt.getBounds().min;return[Ft,ne]});yt.transition(function(Wt,Ft,ne){r$t(ne,mt,St);const Je=H(Wt,Ft),ur=Z(Wt,[ne],[Je]);return ur!==null||(ne.nodeName===Je.nodeName&&Je.nodeName!=="g"?bM(ne,Je):(ne.parentNode.replaceChild(Je,ne),Je.className=_a,Je.markType=W,Je.__data__=ne.__data__)),ur}).attr("markType",W).attr("className",_a)}),ft=>ft.each(function(yt,mt,St){St.__removed__=!0}).transition(function(yt,mt,St){return q(yt,[St])}).remove(),ft=>ft.append(H).attr("className",_a).attr("markType",W).transition(function(yt,mt,St){const{__fromElements__:Wt}=St,Ft=Z(yt,Wt,[St]);return new ty(Wt,null,St.parentNode).transition(Ft).remove(),Ft}),ft=>ft.transition(function(yt,mt,St){const Ft=new ty([],St.__toData__,St.parentNode).append(H).attr("className",_a).attr("markType",W).nodes();return Z(yt,[St],Ft)}).remove()).transitions();e.push(...it.flat())}qNt(t,n,e,r,i)})}function qNt(t,n,e,r,i){const[a]=Le("labelTransform",r),{markState:o,labelTransform:s}=t,l=n.select(oa(f2)).node(),c=new Map,u=new Map,f=Array.from(o.entries()).flatMap(([v,g])=>{const{labels:y=[],key:m}=v,x=t$t(v,g,t,r,i),b=n.select(`#${m}`).selectAll(oa(_a)).nodes().filter(w=>!w.__removed__);return y.flatMap((w,S)=>{const O=rs(w,["transform"]);return b.flatMap(M=>{const A=ZNt(O,S,M);return A.forEach(T=>{c.set(T,x),u.set(T,w)}),A})})}),h=Ot(l).selectAll(oa(d2)).data(f,v=>v.key).join(v=>v.append(g=>c.get(g)(g)).attr("className",d2),v=>v.each(function(g,y,m){const b=c.get(g)(g);bM(m,b)}),v=>v.remove()).nodes(),d=Be(h,v=>u.get(v.__data__)),{coordinate:p}=t;for(const[v,g]of d){const{transform:y=[]}=v;mM(y.map(a))(g,p)}s&&s(h,p)}function ZNt(t,n,e){const{seriesIndex:r,seriesKey:i,points:a,key:o,index:s}=e.__data__,l=JNt(e);if(!r)return[Object.assign(Object.assign({},t),{key:`${o}-${n}`,bounds:l,index:s,points:a,dependentElement:e})];const c=QNt(t),u=r.map((f,h)=>Object.assign(Object.assign({},t),{key:`${i[h]}-${n}`,bounds:[a[h]],index:f,points:a,dependentElement:e}));return c?c(u):u}function KNt([t,n,e]){if(e)return[t,n,e];const r=[],i=[];for(let a=0;a<t.length;a++){const o=t[a],s=n[a];s.every(([l,c])=>Oe(l)&&Oe(c))&&(r.push(o),i.push(s))}return[r,i]}function QNt(t){const{selector:n}=t;if(!n)return null;if(typeof n=="function")return n;if(n==="first")return e=>[e[0]];if(n==="last")return e=>[e[e.length-1]];throw new Error(`Unknown selector: ${n}`)}function JNt(t){const n=t.cloneNode(),e=t.getAnimations();n.style.visibility="hidden",e.forEach(o=>{const s=o.effect.getKeyframes();n.attr(s[s.length-1])}),t.parentNode.appendChild(n);const r=n.getLocalBounds();n.destroy();const{min:i,max:a}=r;return[i,a]}function t$t(t,n,e,r,i){const[a]=Le("shape",r),{data:o}=t,{data:s,defaultLabelShape:l}=n,c=s.map(d=>d.points),{theme:u,coordinate:f}=e,h=Object.assign(Object.assign({},i),{document:qY(i),theme:u,coordinate:f});return d=>{const{index:p,points:v}=d,g=o[p],{formatter:y=I=>`${I}`,transform:m,style:x,render:b}=d,w=rs(d,["formatter","transform","style","render"]),S=fs(Object.assign(Object.assign({},w),x),I=>BW(I,g,p,o)),{shape:O=l,text:M}=S,A=rs(S,["shape","text"]),T=typeof y=="string"?ms(y):y,C=Object.assign(Object.assign({},A),{text:T(M,g,p,o),datum:g}),P=Object.assign({type:`label.${O}`,render:b},A),_=a(P,h),k=NW(u,"label",O,"label");return _(v,C,k,c)}}function BW(t,n,e,r){return typeof t=="function"?t(n,e,r):typeof t!="string"?t:n[t]!==void 0?n[t]:t}function e$t(t){let n=-1/0,e=1/0;for(const[r,i]of t){const{animate:a={}}=r,{data:o}=i,{enter:s={},update:l={},exit:c={}}=a,{type:u,duration:f=300,delay:h=0}=l,{type:d,duration:p=300,delay:v=0}=s,{type:g,duration:y=300,delay:m=0}=c;for(const x of o){const{updateType:b=u,updateDuration:w=f,updateDelay:S=h,enterType:O=d,enterDuration:M=p,enterDelay:A=v,exitDuration:T=y,exitDelay:C=m,exitType:P=g}=x;(b===void 0||b)&&(n=Math.max(n,w+S),e=Math.min(e,S)),(P===void 0||P)&&(n=Math.max(n,T+C),e=Math.min(e,C)),(O===void 0||O)&&(n=Math.max(n,M+A),e=Math.min(e,A))}}return n===-1/0?null:[e,n-e]}function n$t(t,n,e,r){return t.node().parentElement.findAll(a=>a.style.facet!==void 0&&a.style.facet===e&&a!==n.node()).flatMap(a=>a.getElementsByClassName(r))}function r$t(t,n,e){if(!t.__facet__)return;const r=t.parentNode.parentNode,i=n.parentNode,[a,o]=e(r),[s,l]=e(i),c=`translate(${a-s}, ${o-l})`;Jmt(t,c),n.append(t)}function i$t(t,n,e,r,i){const[a]=Le("shape",r),{data:o}=t,{defaultShape:s,data:l,shape:c}=n,u=l.map(g=>g.points),{theme:f,coordinate:h}=e,{type:d,style:p={}}=t,v=Object.assign(Object.assign({},i),{document:qY(i),coordinate:h,theme:f});return g=>{const{shape:y=s}=p,{shape:m=y,points:x,seriesIndex:b,index:w}=g,S=rs(g,["shape","points","seriesIndex","index"]),O=Object.assign(Object.assign({},S),{index:w}),M=b?b.map(_=>o[_]):o[w],A=b||w,T=fs(p,_=>BW(_,M,A,o)),C=c[m]?c[m](T,v):a(Object.assign(Object.assign({},T),{type:zW(t,m)}),v),P=NW(f,d,m,s);return C(x,O,P,u)}}function NW(t,n,e,r){if(typeof n!="string")return;const{color:i}=t,a=t[n]||{},o=a[e]||a[r];return Object.assign({color:i},o)}function vE(t,n,e,r,i){var a,o;const[,s]=Le("shape",i),[l]=Le("animation",i),{defaultShape:c,shape:u}=e,{theme:f,coordinate:h}=r,p=`default${us(t)}Animation`,{[p]:v}=((a=u[c])===null||a===void 0?void 0:a.props)||s(zW(n,c)).props,{[t]:g={}}=f,y=((o=n.animate)===null||o===void 0?void 0:o[t])||{},m={coordinate:h};return(x,b,w)=>{const{[`${t}Type`]:S,[`${t}Delay`]:O,[`${t}Duration`]:M,[`${t}Easing`]:A}=x,T=Object.assign({type:S||v},y);if(!T.type)return null;const _=l(T,m)(b,w,nt(g,{delay:O,duration:M,easing:A}));return Array.isArray(_)?_:[_]}}function a$t(t,n,e,r){return vE("enter",t,n,e,r)}function o$t(t){return t.finished.then(()=>{t.cancel()}),t}function s$t(t,n,e,r){return vE("update",t,n,e,r)}function l$t(t,n,e,r){return vE("exit",t,n,e,r)}function $W(t={}){if(typeof t=="string")return{type:t};const{type:n="light"}=t,e=rs(t,["type"]);return Object.assign(Object.assign({},e),{type:n})}function Fy(t){const n={event:!0,tooltip:!0,sliderFilter:!0,legendFilter:!0,scrollbarFilter:!0},{interaction:e={}}=t;return Object.entries(nt(n,e)).reverse()}function jW(t,n){return Ua(this,void 0,void 0,function*(){const e={library:n},{data:r}=t,i=rs(t,["data"]);if(r==null)return t;const[,{data:a}]=yield LW([],{data:r},e);return Object.assign({data:a},i)})}function iD(t){t.style("x",n=>n.paddingLeft+n.marginLeft).style("y",n=>n.paddingTop+n.marginTop).style("width",n=>n.innerWidth).style("height",n=>n.innerHeight)}function c$t(t,n){const[e,r]=n;t.transition(function(i,a,o){const{x:s,y:l,width:c,height:u}=o.style,{paddingLeft:f,paddingTop:h,innerWidth:d,innerHeight:p,marginLeft:v,marginTop:g}=i,y=[{x:s,y:l,width:c,height:u},{x:f+v,y:h+g,width:d,height:p}];return o.animate(y,{delay:e,duration:r,fill:"both"})})}function zW(t,n){const{type:e}=t;return typeof n=="string"?`${e}.${n}`:n}function aD(t,n){const e=a=>a.class!==void 0?`${a.class}`:"";t.nodes().length===0||(t.selectAll(oa(JI)).data(n,a=>a.key).join(a=>a.append("g").attr("className",JI).attr("id",o=>o.key).style("facet",e).style("fill","transparent").style("zIndex",o=>{var s;return(s=o.zIndex)!==null&&s!==void 0?s:0}),a=>a.style("facet",e).style("fill","transparent").style("zIndex",o=>{var s;return(s=o.zIndex)!==null&&s!==void 0?s:0}),a=>a.remove()),t.select(oa(f2)).node())||t.append("g").attr("className",f2).style("zIndex",0)}function oa(...t){return t.map(n=>`.${n}`).join("")}function oD(t,n){t.node()&&t.style("clipPath",e=>{if(!n)return null;const{paddingTop:r,paddingLeft:i,marginLeft:a,marginTop:o,innerWidth:s,innerHeight:l}=e;return new Nl({style:{x:i+a,y:r+o,width:s,height:l}})})}function u$t(t,n,e){var r;for(const[c]of e.entries())if(c.type==="cell")return t.filter(u=>u.name!=="shape");if(n.length!==1||t.some(c=>c.name==="shape"))return t;const{defaultShape:i}=n[0];if(!["point","line","rect","hollow"].includes(i))return t;const o={point:"point",line:"hyphen",rect:"square",hollow:"hollow"},l={field:((r=t.find(c=>c.name==="color"))===null||r===void 0?void 0:r.field)||null,name:"shape",type:"constant",domain:[],range:[o[i]]};return[...t,l]}function f$t(t,n){for(const[e,r]of Object.entries(n))t.style(e,r)}function h$t(t){const n=nt({},t),e=new Map([[n,null]]),r=new Map([[null,-1]]),i=[n];for(;i.length;){const a=i.shift();if(a.key===void 0){const s=e.get(a),l=r.get(a),c=s===null?"0":`${s.key}-${l}`;a.key=c}const{children:o=[]}=a;if(Array.isArray(o))for(let s=0;s<o.length;s++){const l=nt({},o[s]);o[s]=l,e.set(l,a),r.set(l,s),i.push(l)}}return n}function d$t(t,n){const e=new JG;return e.registerPlugin(new tY),new s6({width:t,height:n,container:document.createElement("div"),renderer:e})}function p$t(t,n={},e=()=>{},r=i=>{throw i}){const{width:i=640,height:a=480,depth:o=0}=t,s=h$t(t),{canvas:l=d$t(i,a),emitter:c=new Au,library:u}=n;n.canvas=l,n.emitter=c;const{width:f,height:h}=l.getConfig();(f!==i||h!==a)&&l.resize(i,a),c.emit(fe.BEFORE_RENDER);const d=Ot(l.document.documentElement);return l.ready.then(()=>pE(Object.assign(Object.assign({},s),{width:i,height:a,depth:o}),d,u,n)).then(()=>{if(o){const[p,v]=l.document.documentElement.getPosition();l.document.documentElement.setPosition(p,v,-o/2)}l.requestAnimationFrame(()=>{c.emit(fe.AFTER_RENDER),e==null||e()})}).catch(p=>{r==null||r(p)}),g$t(l.getConfig().container)}function sD(t,n={},e=!1){const{canvas:r,emitter:i}=n;r&&(v$t(r),e?r.destroy():r.destroyChildren()),i.off()}function v$t(t){const n=t.getRoot().querySelectorAll(`.${h2}`);n==null||n.forEach(e=>{const{nameInteraction:r=new Map}=e;(r==null?void 0:r.size)>0&&Array.from(r==null?void 0:r.values()).forEach(i=>{i==null||i.destroy()})})}function g$t(t){return typeof t=="string"?document.getElementById(t):t}const y$t={visibility:"visible",opacity:1,fillOpacity:1,strokeOpacity:1};function m$t(t,n){var e;return(e=t.style[n])!==null&&e!==void 0?e:y$t[n]}function gE(t,n,e,r){t.style[n]=e,r&&t.children.forEach(i=>gE(i,n,e,r))}function yE(t){gE(t,"visibility","hidden",!0)}function mE(t){gE(t,"visibility","visible",!0)}var oh=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};function is(t){return Ot(t).selectAll(`.${_a}`).nodes().filter(n=>!n.__removed__)}function GW(t,n){return F2(t,n).flatMap(({container:e})=>is(e))}function F2(t,n){return n.filter(e=>e!==t&&e.options.parentKey===t.options.key)}function oo(t){return Ot(t).select(`.${vy}`).node()}function YW(t){if(t.nodeName!=="rect")return t.getRenderBounds();const{x:n,y:e,width:r,height:i}=t.style;return{min:[n,e],max:[n+r,e+i]}}function xE(t,n){const{offsetX:e,offsetY:r}=n,i=YW(t),{min:[a,o],max:[s,l]}=i,c=e<a||e>s,u=r<o||r>l;return c||u?null:[e-a,r-o]}function Kx(t,n){const{offsetX:e,offsetY:r}=n,[i,a,o,s]=x$t(t);return[Math.min(o,Math.max(i,e))-i,Math.min(s,Math.max(a,r))-a]}function x$t(t){const n=t.getRenderBounds(),{min:[e,r],max:[i,a]}=n;return[e,r,i,a]}function WW(t){return n=>n.__data__.color}function bE(t){return n=>n.__data__.x}function El(t){const n=Array.isArray(t)?t:[t],e=new Map(n.flatMap(r=>Array.from(r.markState.keys()).map(a=>[Dy(r.key,a.key),a.data])));return r=>{const{index:i,markKey:a,viewKey:o}=r.__data__;return e.get(Dy(o,a))[i]}}function qa(t,n=(r,i)=>r,e=(r,i,a)=>r.setAttribute(i,a)){const r="__states__",i="__ordinal__",a=u=>{const{[r]:f=[],[i]:h={}}=u,d=f.reduce((p,v)=>Object.assign(Object.assign({},p),t[v]),h);if(Object.keys(d).length!==0){for(const[p,v]of Object.entries(d)){const g=m$t(u,p),y=n(v,u);e(u,p,y),p in h||(h[p]=g)}u[i]=h}},o=u=>{u[r]||(u[r]=[])};return{setState:(u,...f)=>{o(u),u[r]=[...f],a(u)},removeState:(u,...f)=>{o(u);for(const h of f){const d=u[r].indexOf(h);d!==-1&&u[r].splice(d,1)}a(u)},hasState:(u,f)=>(o(u),u[r].indexOf(f)!==-1)}}function b$t(t){return t===void 0?!0:typeof t!="object"?!1:Object.keys(t).length===0}function Dy(t,n){return`${t},${n}`}function bu(t,n){const r=(Array.isArray(t)?t:[t]).flatMap(a=>a.marks.map(o=>[Dy(a.key,o.key),o.state])),i={};for(const a of n){const[o,s]=Array.isArray(a)?a:[a,{}];i[o]=r.reduce((l,c)=>{const[u,f={}]=c,h=b$t(f[o])?s:f[o];for(const[d,p]of Object.entries(h)){const v=l[d],g=(y,m,x,b)=>{const w=Dy(b.__data__.viewKey,b.__data__.markKey);return u!==w?v==null?void 0:v(y,m,x,b):typeof p!="function"?p:p(y,m,x,b)};l[d]=g}return l},{})}return i}function ep(t,n){const e=new Map(t.map((i,a)=>[i,a])),r=n?t.map(n):t;return(i,a)=>{if(typeof i!="function")return i;const o=e.get(a),s=n?n(a):a;return i(s,o,r,a)}}function VW(t){var{link:n=!1,valueof:e=(u,f)=>u,coordinate:r}=t,i=oh(t,["link","valueof","coordinate"]);const a="element-link";if(!n)return[()=>{},()=>{}];const o=u=>u.__data__.points,s=(u,f)=>{const[,h,d]=u,[p,,,v]=f;return[h,p,v,d]};return[u=>{var f;if(u.length<=1)return;const h=Va(u,(d,p)=>{const{x:v}=d.__data__,{x:g}=p.__data__;return v-g});for(let d=1;d<h.length;d++){const p=bi(),v=h[d-1],g=h[d],[y,m,x,b]=s(o(v),o(g));p.moveTo(...y),p.lineTo(...m),p.lineTo(...x),p.lineTo(...b),p.closePath();const w=fs(i,A=>e(A,v)),{fill:S=v.getAttribute("fill")}=w,O=oh(w,["fill"]),M=new lr({className:a,style:Object.assign({d:p.toString(),fill:S,zIndex:-2},O)});(f=v.link)===null||f===void 0||f.remove(),v.parentNode.appendChild(M),v.link=M}},u=>{var f;(f=u.link)===null||f===void 0||f.remove(),u.link=null}]}function HW(t,n,e){const r=i=>{const{transform:a}=t.style;return a?`${a} ${i}`:i};if(Fe(e)){const{points:i}=t.__data__,[a,o]=_e(e)?Em(i):i,s=e.getCenter(),l=Ue(a,s),c=Ue(o,s),u=pi(l),f=qj(l,c),h=u+f/2,d=n*Math.cos(h),p=n*Math.sin(h);return r(`translate(${d}, ${p})`)}return _e(e)?r(`translate(${n}, 0)`):r(`translate(0, ${-n})`)}function XW(t){var{document:n,background:e,scale:r,coordinate:i,valueof:a}=t,o=oh(t,["document","background","scale","coordinate","valueof"]);const s="element-background";if(!e)return[()=>{},()=>{}];const l=(y,m,x)=>{const b=y.invert(m),w=m+y.getBandWidth(b)/2,S=y.getStep(b)/2,O=S*x;return[w-S+O,w+S-O]},c=(y,m)=>{const{x}=r;if(!th(x))return[0,1];const{__data__:b}=y,{x:w}=b,[S,O]=l(x,w,m);return[S,O]},u=(y,m)=>{const{y:x}=r;if(!th(x))return[0,1];const{__data__:b}=y,{y:w}=b,[S,O]=l(x,w,m);return[S,O]},f=(y,m)=>{const{padding:x}=m,[b,w]=c(y,x),[S,O]=u(y,x),M=[[b,S],[w,S],[w,O],[b,O]].map(P=>i.map(P)),{__data__:A}=y,{y:T,y1:C}=A;return w6(n,M,{y:T,y1:C},i,m)},h=(y,m)=>{const{transform:x="scale(1.2, 1.2)",transformOrigin:b="center center",stroke:w=""}=m,S=oh(m,["transform","transformOrigin","stroke"]),O=Object.assign({transform:x,transformOrigin:b,stroke:w},S),M=y.cloneNode(!0);for(const[A,T]of Object.entries(O))M.style[A]=T;return M},d=()=>{const{x:y,y:m}=r;return[y,m].some(th)};return[y=>{y.background&&y.background.remove();const m=fs(o,P=>a(P,y)),{fill:x="#CCD6EC",fillOpacity:b=.3,zIndex:w=-2,padding:S=.001,strokeWidth:O=0}=m,M=oh(m,["fill","fillOpacity","zIndex","padding","strokeWidth"]),A=Object.assign(Object.assign({},M),{fill:x,fillOpacity:b,zIndex:w,padding:S,strokeWidth:O}),C=(d()?f:h)(y,A);C.className=s,y.parentNode.appendChild(C),y.background=C},y=>{var m;(m=y.background)===null||m===void 0||m.remove(),y.background=null},y=>y.className===s]}function wo(t,n){const r=t.getRootNode().defaultView.getContextService().getDomElement();r!=null&&r.style&&(t.cursor=r.style.cursor,r.style.cursor=n)}function w$t(t){wo(t,t.cursor)}function wE(t,n,e){return t.find(r=>Object.entries(n).every(([i,a])=>e(r)[i]===a))}var S$t=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};function O$t(t,{elements:n,datum:e,groupKey:r=f=>f,link:i=!1,background:a=!1,delay:o=60,scale:s,coordinate:l,emitter:c,state:u={}}){var f;const h=n(t),d=new Set(h),p=Be(h,r),v=ep(h,e),[g,y]=VW(Object.assign({elements:h,valueof:v,link:i,coordinate:l},ct(u.active,"link"))),[m,x,b]=XW(Object.assign({document:t.ownerDocument,scale:s,coordinate:l,background:a,valueof:v},ct(u.active,"background"))),w=nt(u,{active:Object.assign({},((f=u.active)===null||f===void 0?void 0:f.offset)&&{transform:(...F)=>{const B=u.active.offset(...F),[,D]=F;return HW(h[D],B,l)}})}),{setState:S,removeState:O,hasState:M}=qa(w,v);let A;const T=F=>{const{target:B,nativeEvent:D=!0}=F;if(!d.has(B))return;A&&clearTimeout(A);const N=r(B),j=p.get(N),Y=new Set(j);for(const W of h)Y.has(W)?M(W,"active")||S(W,"active"):(S(W,"inactive"),y(W)),W!==B&&x(W);m(B),g(j),D&&c.emit("element:highlight",{nativeEvent:D,data:{data:e(B),group:j.map(e)}})},C=()=>{A&&clearTimeout(A),A=setTimeout(()=>{P(),A=null},o)},P=(F=!0)=>{for(const B of h)O(B,"active","inactive"),x(B),y(B);F&&c.emit("element:unhighlight",{nativeEvent:F})},_=F=>{const{target:B}=F;a&&!b(B)||!a&&!d.has(B)||(o>0?C():P())},k=()=>{P()};t.addEventListener("pointerover",T),t.addEventListener("pointerout",_),t.addEventListener("pointerleave",k);const I=F=>{const{nativeEvent:B}=F;B||P(!1)},L=F=>{const{nativeEvent:B}=F;if(B)return;const{data:D}=F.data,N=wE(h,D,e);N&&T({target:N,nativeEvent:!1})};return c.on("element:highlight",L),c.on("element:unhighlight",I),()=>{t.removeEventListener("pointerover",T),t.removeEventListener("pointerout",_),t.removeEventListener("pointerleave",k),c.off("element:highlight",L),c.off("element:unhighlight",I);for(const F of h)x(F),y(F)}}function Km(t){var{delay:n,createGroup:e,background:r=!1,link:i=!1}=t,a=S$t(t,["delay","createGroup","background","link"]);return(o,s,l)=>{const{container:c,view:u,options:f}=o,{scale:h,coordinate:d}=u,p=oo(c);return O$t(p,Object.assign({elements:is,datum:El(u),groupKey:e?e(u):void 0,coordinate:d,scale:h,state:bu(f,[["active",r?{}:{lineWidth:"1",stroke:"#000"}],"inactive"]),background:r,link:i,delay:n,emitter:l},a))}}Km.props={reapplyWhenUpdate:!0};function UW(t){return Km(Object.assign(Object.assign({},t),{createGroup:bE}))}UW.props={reapplyWhenUpdate:!0};function qW(t){return Km(Object.assign(Object.assign({},t),{createGroup:WW}))}qW.props={reapplyWhenUpdate:!0};var M$t=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};function A$t(t,{elements:n,datum:e,groupKey:r=f=>f,link:i=!1,single:a=!1,coordinate:o,background:s=!1,scale:l,emitter:c,state:u={}}){var f;const h=n(t),d=new Set(h),p=Be(h,r),v=ep(h,e),[g,y]=VW(Object.assign({link:i,elements:h,valueof:v,coordinate:o},ct(u.selected,"link"))),[m,x]=XW(Object.assign({document:t.ownerDocument,background:s,coordinate:o,scale:l,valueof:v},ct(u.selected,"background"))),b=nt(u,{selected:Object.assign({},((f=u.selected)===null||f===void 0?void 0:f.offset)&&{transform:(...k)=>{const I=u.selected.offset(...k),[,L]=k;return HW(h[L],I,o)}})}),{setState:w,removeState:S,hasState:O}=qa(b,v),M=(k=!0)=>{for(const I of h)S(I,"selected","unselected"),y(I),x(I);k&&c.emit("element:unselect",{nativeEvent:!0})},A=(k,I,L=!0)=>{if(O(I,"selected"))M();else{const F=r(I),B=p.get(F),D=new Set(B);for(const N of h)D.has(N)?w(N,"selected"):(w(N,"unselected"),y(N)),N!==I&&x(N);if(g(B),m(I),!L)return;c.emit("element:select",Object.assign(Object.assign({},k),{nativeEvent:L,data:{data:[e(I),...B.map(e)]}}))}},T=(k,I,L=!0)=>{const F=r(I),B=p.get(F),D=new Set(B);if(O(I,"selected")){if(!h.some(j=>!D.has(j)&&O(j,"selected")))return M();for(const j of B)w(j,"unselected"),y(j),x(j)}else{const N=B.some(j=>O(j,"selected"));for(const j of h)D.has(j)?w(j,"selected"):O(j,"selected")||w(j,"unselected");!N&&i&&g(B),m(I)}L&&c.emit("element:select",Object.assign(Object.assign({},k),{nativeEvent:L,data:{data:h.filter(N=>O(N,"selected")).map(e)}}))},C=k=>{const{target:I,nativeEvent:L=!0}=k;return d.has(I)?a?A(k,I,L):T(k,I,L):M()};t.addEventListener("click",C);const P=k=>{const{nativeEvent:I,data:L}=k;if(I)return;const F=a?L.data.slice(0,1):L.data;for(const B of F){const D=wE(h,B,e);C({target:D,nativeEvent:!1})}},_=()=>{M(!1)};return c.on("element:select",P),c.on("element:unselect",_),()=>{for(const k of h)y(k);t.removeEventListener("click",C),c.off("element:select",P),c.off("element:unselect",_)}}function Qm(t){var{createGroup:n,background:e=!1,link:r=!1}=t,i=M$t(t,["createGroup","background","link"]);return(a,o,s)=>{const{container:l,view:c,options:u}=a,{coordinate:f,scale:h}=c,d=oo(l);return A$t(d,Object.assign({elements:is,datum:El(c),groupKey:n?n(c):void 0,coordinate:f,scale:h,state:bu(u,[["selected",e?{}:{lineWidth:"1",stroke:"#000"}],"unselected"]),background:e,link:r,emitter:s},i))}}Qm.props={reapplyWhenUpdate:!0};function ZW(t){return Qm(Object.assign(Object.assign({},t),{createGroup:bE}))}ZW.props={reapplyWhenUpdate:!0};function KW(t){return Qm(Object.assign(Object.assign({},t),{createGroup:WW}))}KW.props={reapplyWhenUpdate:!0};var E$t=globalThis&&globalThis.__awaiter||function(t,n,e,r){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(t,n||[])).next())})},T$t=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};function C$t(t){const{transform:n=[]}=t,e=n.find(i=>i.type==="normalizeY");if(e)return e;const r={type:"normalizeY"};return n.push(r),t.transform=n,r}function P$t(t,n,e){const[r]=Array.from(t.entries()).filter(([i])=>i.type===n).map(([i])=>{const{encode:a}=i,o=s=>{const l=a[s];return[s,l?l.value:void 0]};return Object.fromEntries(e.map(o))});return r}function QW(t){var{wait:n=20,leading:e,trailing:r=!1,labelFormatter:i=o=>`${o}`}=t,a=T$t(t,["wait","leading","trailing","labelFormatter"]);return o=>{const{view:s,container:l,update:c,setState:u}=o,{markState:f,scale:h,coordinate:d}=s,p=P$t(f,"line",["x","y","series"]);if(!p)return;const{y:v,x:g,series:y=[]}=p,m=v.map((F,B)=>B),x=Va(m.map(F=>g[F])),b=oo(l),w=l.getElementsByClassName(_a),S=l.getElementsByClassName(d2),M=Be(S,F=>F.__data__.key.split("-")[0]),A=new Wd({style:Object.assign({x1:0,y1:0,x2:0,y2:b.getAttribute("height"),stroke:"black",lineWidth:1},ct(a,"rule"))}),T=new Fi({style:Object.assign({x:0,y:b.getAttribute("height"),text:"",fontSize:10},ct(a,"label"))});A.append(T),b.appendChild(A);const C=(F,B,D)=>{const[N]=F.invert(D),j=B.invert(N);return x[Cmt(x,j)]},P=(F,B)=>{A.setAttribute("x1",F[0]),A.setAttribute("x2",F[0]),T.setAttribute("text",i(B))};let _;const k=F=>E$t(this,void 0,void 0,function*(){const{x:B}=h,D=C(d,B,F);P(F,D),u("chartIndex",j=>{const Y=nt({},j),W=Y.marks.find(q=>q.type==="line"),H=he(vM(m,q=>he(q,rt=>+v[rt])/Hr(q,rt=>+v[rt]),q=>y[q]).values()),Q=[1/H,H];nt(W,{scale:{y:{domain:Q}}});const Z=C$t(W);Z.groupBy="color",Z.basis=(q,rt)=>{const it=q[eu(ft=>g[+ft]).center(q,D)];return rt[it]};for(const q of Y.marks)q.animate=!1;return Y}),_=(yield c("chartIndex")).view}),I=F=>{const{scale:B,coordinate:D}=_,{x:N,y:j}=B,Y=C(D,N,F);P(F,Y);for(const W of w){const{seriesIndex:V,key:H}=W.__data__,Q=V[eu(mt=>g[+mt]).center(V,Y)],Z=[0,j.map(1)],q=[0,j.map(v[Q]/v[V[0]])],[,rt]=D.map(Z),[,it]=D.map(q),ft=rt-it;W.setAttribute("transform",`translate(0, ${ft})`);const yt=M.get(H)||[];for(const mt of yt)mt.setAttribute("dy",ft)}},L=vl(F=>{const B=xE(b,F);B&&I(B)},n,{leading:e,trailing:r});return k([0,0]),b.addEventListener("pointerenter",L),b.addEventListener("pointermove",L),b.addEventListener("pointerleave",L),()=>{A.remove(),b.removeEventListener("pointerenter",L),b.removeEventListener("pointermove",L),b.removeEventListener("pointerleave",L)}}}QW.props={reapplyWhenUpdate:!0};function k$t(t){const{coordinate:n={}}=t,{transform:e=[]}=n,r=e.find(a=>a.type==="fisheye");if(r)return r;const i={type:"fisheye"};return e.push(i),n.transform=e,t.coordinate=n,i}function _$t({wait:t=30,leading:n,trailing:e=!1}){return r=>{const{options:i,update:a,setState:o,container:s}=r,l=oo(s),c=vl(u=>{const f=xE(l,u);if(!f){o("fisheye"),a();return}o("fisheye",h=>{const d=nt({},h,{interaction:{tooltip:{preserve:!0}}});for(const y of d.marks)y.animate=!1;const[p,v]=f,g=k$t(d);return g.focusX=p,g.focusY=v,g.visual=!0,d}),a()},t,{leading:n,trailing:e});return l.addEventListener("pointerenter",c),l.addEventListener("pointermove",c),l.addEventListener("pointerleave",c),()=>{l.removeEventListener("pointerenter",c),l.removeEventListener("pointermove",c),l.removeEventListener("pointerleave",c)}}}var np=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};function Ry(t,n){return n?typeof n=="string"?document.querySelector(n):n:t.ownerDocument.defaultView.getContextService().getDomElement().parentElement}function L$t(t){const n=t.getBounds(),{min:[e,r],max:[i,a]}=n;return{x:e,y:r,width:i-e,height:a-r}}function I$t(t,n){const e=t.getBoundingClientRect(),r=n.getBoundingClientRect();return{x:e.x-r.x,y:e.y-r.y}}function F$t(t,n,e,r,i,a,o,s={}){const l={".g2-tooltip":{},".g2-tooltip-title":{overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},c=new gCt({className:"tooltip",style:{x:n,y:e,container:o,data:[],bounding:a,position:r,enterable:i,title:"",offset:[10,10],template:{prefixCls:"g2-"},style:nt(l,s)}});return t.appendChild(c.HTMLTooltipElement),c}function JW({root:t,data:n,x:e,y:r,render:i,event:a,single:o,position:s="right-bottom",enterable:l=!1,css:c,mount:u,bounding:f}){const h=Ry(t,u),d=Ry(t),p=o?d:t,v=f||L$t(t),g=I$t(d,h),{tooltipElement:y=F$t(h,e,r,s,l,v,g,c)}=p,{items:m,title:x=""}=n;y.update(Object.assign({x:e,y:r,data:m,title:x,position:s,enterable:l},i!==void 0&&{content:i(a,{items:m,title:x})})),p.tooltipElement=y}function Eo({root:t,single:n,emitter:e,nativeEvent:r=!0}){r&&e.emit("tooltip:hide",{nativeEvent:r});const i=Ry(t),a=n?i:t,{tooltipElement:o}=a;o&&o.hide()}function D2({root:t,single:n}){const e=Ry(t),r=n?e:t;if(!r)return;const{tooltipElement:i}=r;i&&(i.destroy(),r.tooltipElement=void 0)}function tV(t){const{value:n}=t;return Object.assign(Object.assign({},t),{value:n===void 0?"undefined":n})}function D$t(t){const{__data__:n}=t,{title:e,items:r=[]}=n,i=r.filter(Oe).map(a=>{var{color:o=eV(t)}=a,s=np(a,["color"]);return Object.assign(Object.assign({},s),{color:o})}).map(tV);return Object.assign(Object.assign({},e&&{title:e}),{items:i})}function R$t(t,n){const{color:e,series:r,facet:i=!1}=t,{color:a,series:o}=n,s=l=>l&&l.invert&&!(l instanceof Hh)&&!(l instanceof EM);if(s(r))return r.clone().invert(o);if(o&&r instanceof Hh&&r.invert(o)!==a&&!i)return r.invert(o);if(s(e)){const l=e.invert(a);return Array.isArray(l)?null:l}return null}function eV(t){const n=t.getAttribute("fill"),e=t.getAttribute("stroke"),{__data__:r}=t,{color:i=n&&n!=="transparent"?n:e}=r;return i}function lD(t,n=e=>e){const e=new Map(t.map(r=>[n(r),r]));return Array.from(e.values())}function nV(t,n,e,r=t.map(a=>a.__data__),i={}){const a=l=>l instanceof Date?+l:l,o=lD(r.map(l=>l.title),a).filter(Oe),s=r.flatMap((l,c)=>{const u=t[c],{items:f=[],title:h}=l,d=f.filter(Oe),p=e!==void 0?e:f.length<=1;return d.map(v=>{var{color:g=eV(u)||i.color,name:y}=v,m=np(v,["color","name"]);const x=R$t(n,l),b=p?x||y:y||x;return Object.assign(Object.assign({},m),{color:g,name:b||h})})}).map(tV);return Object.assign(Object.assign({},o.length>0&&{title:o.join(",")}),{items:lD(s,l=>`(${a(l.name)}, ${a(l.value)}, ${a(l.color)})`)})}function B$t(t,n,e){var{plotWidth:r,plotHeight:i,mainWidth:a,mainHeight:o,startX:s,startY:l,transposed:c,polar:u,insetLeft:f,insetTop:h}=e,d=np(e,["plotWidth","plotHeight","mainWidth","mainHeight","startX","startY","transposed","polar","insetLeft","insetTop"]);const p=Object.assign({lineWidth:1,stroke:"#1b1e23",strokeOpacity:.5},d),v=n.map(A=>A[1]),g=n.map(A=>A[0]),y=jh(v),m=jh(g),x=()=>{if(u){const A=Math.min(a,o)/2,T=s+f+a/2,C=l+h+o/2,P=pi(Ue([m,y],[T,C])),_=T+A*Math.cos(P),k=C+A*Math.sin(P);return[T,_,C,k]}return c?[s,s+r,y+l,y+l]:[m+s,m+s,l,l+i]},[b,w,S,O]=x(),M=()=>{const A=new Wd({style:Object.assign({x1:b,x2:w,y1:S,y2:O},p)});return t.appendChild(A),A};if(g.length>0){const A=t.ruleY||M();A.style.x1=b,A.style.x2=w,A.style.y1=S,A.style.y2=O,t.ruleY=A}}function cD(t){t.ruleY&&(t.ruleY.remove(),t.ruleY=void 0)}function N$t(t,{data:n,style:e,theme:r}){t.markers&&t.markers.forEach(a=>a.remove());const i=n.filter(a=>{const[{x:o,y:s}]=a;return Oe(o)&&Oe(s)}).map(a=>{const[{color:o,element:s},l]=a,c=o||s.style.fill||s.style.stroke||r.color;return new Yd({style:Object.assign({cx:l[0],cy:l[1],fill:c,r:4,stroke:"#fff",strokeWidth:2},e)})});for(const a of i)t.appendChild(a);t.markers=i}function uD(t){t.markers&&(t.markers.forEach(n=>n.remove()),t.markers=[])}function fD(t,n){return Array.from(t.values()).some(e=>{var r;return(r=e.interaction)===null||r===void 0?void 0:r[n]})}function Qx(t,n){return t===void 0?n:t}function rV(t){const{title:n,items:e}=t;return e.length===0&&n===void 0}function $$t(t){return Array.from(t.values()).some(n=>{var e;return((e=n.interaction)===null||e===void 0?void 0:e.seriesTooltip)&&n.tooltip})}function hD(t,n){var{elements:e,sort:r,filter:i,scale:a,coordinate:o,crosshairs:s,render:l,groupName:c,emitter:u,wait:f=50,leading:h=!0,trailing:d=!1,startX:p=0,startY:v=0,body:g=!0,single:y=!0,position:m,enterable:x,mount:b,bounding:w,theme:S,disableNative:O=!1,marker:M=!0,preserve:A=!1,style:T={},css:C={}}=n,P=np(n,["elements","sort","filter","scale","coordinate","crosshairs","render","groupName","emitter","wait","leading","trailing","startX","startY","body","single","position","enterable","mount","bounding","theme","disableNative","marker","preserve","style","css"]);const _=e(t),k=_e(o),I=Fe(o),L=nt(T,P),{innerWidth:F,innerHeight:B,width:D,height:N,insetLeft:j,insetTop:Y}=o.getOptions(),W=[],V=[];for(const le of _){const{__data__:re}=le,{seriesX:$e,title:ce,items:un}=re;$e?W.push(le):(ce||un)&&V.push(le)}const Q=!!(k?a.y:a.x).getBandWidth&&V.length>0;W.sort((le,re)=>{const $e=k?0:1,ce=un=>un.getBounds().min[$e];return k?ce(re)-ce(le):ce(le)-ce(re)});const Z=le=>{const re=k?1:0,{min:$e,max:ce}=le.getLocalBounds();return Va([$e[re],ce[re]])};V.sort((le,re)=>{const[$e,ce]=Z(le),[un,bn]=Z(re),kr=($e+ce)/2,_r=(un+bn)/2;return k?_r-kr:kr-_r});const q=new Map(W.map(le=>{const{__data__:re}=le,{seriesX:$e}=re,ce=$e.map((bn,kr)=>kr),un=Va(ce,bn=>$e[+bn]);return[le,[un,$e]]})),{x:rt}=a,it=rt!=null&&rt.getBandWidth?rt.getBandWidth()/2:0,ft=le=>{const[re]=o.invert(le);return re-it},yt=(le,re,$e)=>{const ce=ft(le),un=$e.filter(Oe),[bn,kr]=Va([un[0],un[un.length-1]]);if(!Q&&(ce<bn||ce>kr))return null;const _r=eu(so=>$e[+so]).center,Mi=_r(re,ce);return re[Mi]},mt=(le,re)=>{const ce=le[k?1:0],un=re.filter(_r=>{const[Mi,so]=Z(_r);return ce>=Mi&&ce<=so});if(!Q||un.length>0)return un;const bn=eu(_r=>{const[Mi,so]=Z(_r);return(Mi+so)/2}).center,kr=bn(re,ce);return[re[kr]].filter(Oe)},St=(le,re)=>{const{__data__:$e}=le;return Object.fromEntries(Object.entries($e).filter(([ce])=>ce.startsWith("series")&&ce!=="series").map(([ce,un])=>{const bn=un[re];return[T4(ce.replace("series","")),bn]}))},Wt=vl(le=>{const re=xE(t,le);if(!re)return;const $e=YW(t),ce=$e.min[0],un=$e.min[1],bn=[re[0]-p,re[1]-v];if(!bn)return;const kr=mt(bn,V),_r=[],Mi=[];for(const fn of W){const[Uu,e1]=q.get(fn),BE=yt(bn,Uu,e1);if(BE!==null){_r.push(fn);const NE=St(fn,BE),{x:RV,y:BV}=NE,NV=o.map([(RV||0)+it,BV||0]);Mi.push([Object.assign(Object.assign({},NE),{element:fn}),NV])}}const so=Array.from(new Set(Mi.map(fn=>fn[0].x))),FV=so[im(so,fn=>Math.abs(fn-ft(bn)))],t1=Mi.filter(fn=>fn[0].x===FV),DV=[...t1.map(fn=>fn[0]),...kr.map(fn=>fn.__data__)],RE=[..._r,...kr],Xu=nV(RE,a,c,DV,S);if(r&&Xu.items.sort((fn,Uu)=>r(fn)-r(Uu)),i&&(Xu.items=Xu.items.filter(i)),RE.length===0||rV(Xu)){Ft();return}if(g&&JW({root:t,data:Xu,x:re[0]+ce,y:re[1]+un,render:l,event:le,single:y,position:m,enterable:x,mount:b,bounding:w,css:C}),s){const fn=t1.map(e1=>e1[1]),Uu=ct(L,"crosshairs");B$t(t,fn,Object.assign(Object.assign({},Uu),{plotWidth:F,plotHeight:B,mainWidth:D,mainHeight:N,insetLeft:j,insetTop:Y,startX:p,startY:v,transposed:k,polar:I}))}if(M){const fn=ct(L,"marker");N$t(t,{data:t1,style:fn,theme:S})}u.emit("tooltip:show",Object.assign(Object.assign({},le),{nativeEvent:!0,data:{data:{x:pu(a.x,ft(bn),!0)}}}))},f,{leading:h,trailing:d}),Ft=()=>{Eo({root:t,single:y,emitter:u}),s&&cD(t),M&&uD(t)},ne=()=>{D2({root:t,single:y}),s&&cD(t),M&&uD(t)},Je=({nativeEvent:le,data:re})=>{if(le)return;const{x:$e}=re.data,{x:ce}=a,un=ce.map($e),[bn,kr]=o.map([un,.5]),{min:[_r,Mi]}=t.getRenderBounds();Wt({offsetX:bn+_r,offsetY:kr+Mi})},ur=()=>{Eo({root:t,single:y,emitter:u,nativeEvent:!1})},Oa=()=>{Jr(),ne()},Os=()=>{Qn()},Qn=()=>{O||(t.addEventListener("pointerenter",Wt),t.addEventListener("pointermove",Wt),t.addEventListener("pointerleave",Ft))},Jr=()=>{O||(t.removeEventListener("pointerenter",Wt),t.removeEventListener("pointermove",Wt),t.removeEventListener("pointerleave",Ft))};return Qn(),u.on("tooltip:show",Je),u.on("tooltip:hide",ur),u.on("tooltip:disable",Oa),u.on("tooltip:enable",Os),()=>{Jr(),u.off("tooltip:show",Je),u.off("tooltip:hide",ur),u.off("tooltip:disable",Oa),u.off("tooltip:enable",Os),A?Eo({root:t,single:y,emitter:u,nativeEvent:!1}):ne()}}function j$t(t,{elements:n,scale:e,render:r,groupName:i,sort:a,filter:o,emitter:s,wait:l=50,leading:c=!0,trailing:u=!1,groupKey:f=A=>A,single:h=!0,position:d,enterable:p,datum:v,view:g,mount:y,bounding:m,theme:x,shared:b=!1,body:w=!0,disableNative:S=!1,preserve:O=!1,css:M={}}){const A=n(t),T=new Set(A),C=Be(A,f),P=vl(N=>{const{target:j}=N;if(!T.has(j)){Eo({root:t,single:h,emitter:s});return}const Y=f(j),W=C.get(Y),V=W.length===1&&!b?D$t(W[0]):nV(W,e,i,void 0,x);if(a&&V.items.sort((Z,q)=>a(Z)-a(q)),o&&(V.items=V.items.filter(o)),rV(V)){Eo({root:t,single:h,emitter:s});return}const{offsetX:H,offsetY:Q}=N;w&&JW({root:t,data:V,x:H,y:Q,render:r,event:N,single:h,position:d,enterable:p,mount:y,bounding:m,css:M}),s.emit("tooltip:show",Object.assign(Object.assign({},N),{nativeEvent:!0,data:{data:HY(j,g)}}))},l,{leading:c,trailing:u}),_=N=>{const{target:j}=N;T.has(j)&&Eo({root:t,single:h,emitter:s})},k=()=>{S||(t.addEventListener("pointerover",P),t.addEventListener("pointermove",P),t.addEventListener("pointerout",_))},I=()=>{S||(t.removeEventListener("pointerover",P),t.removeEventListener("pointermove",P),t.removeEventListener("pointerout",_))},L=({nativeEvent:N,data:j})=>{if(N)return;const Y=wE(A,j.data,v);if(!Y)return;const W=Y.getBBox(),{x:V,y:H,width:Q,height:Z}=W;P({target:Y,offsetX:V+Q/2,offsetY:H+Z/2})},F=({nativeEvent:N}={})=>{N||Eo({root:t,single:h,emitter:s,nativeEvent:!1})},B=()=>{I(),D2({root:t,single:h})},D=()=>{k()};return s.on("tooltip:show",L),s.on("tooltip:hide",F),s.on("tooltip:enable",D),s.on("tooltip:disable",B),k(),()=>{I(),s.off("tooltip:show",L),s.off("tooltip:hide",F),O?Eo({root:t,single:h,emitter:s,nativeEvent:!1}):D2({root:t,single:h})}}function iV(t){const{shared:n,crosshairs:e,series:r,name:i,item:a=()=>({}),facet:o=!1}=t,s=np(t,["shared","crosshairs","series","name","item","facet"]);return(l,c,u)=>{const{container:f,view:h}=l,{scale:d,markState:p,coordinate:v,theme:g}=h,y=fD(p,"seriesTooltip"),m=fD(p,"crosshairs"),x=oo(f),b=Qx(r,y);if(b&&$$t(p)&&!o)return hD(x,Object.assign(Object.assign({},s),{theme:g,elements:is,scale:d,coordinate:v,crosshairs:Qx(e,m),item:a,emitter:u}));if(b&&o){const w=c.filter(C=>C!==l&&C.options.parentKey===l.options.key),S=GW(l,c),O=w[0].view.scale,M=x.getBounds(),A=M.min[0],T=M.min[1];return Object.assign(O,{facet:!0}),hD(x.parentNode.parentNode,Object.assign(Object.assign({},s),{theme:g,elements:()=>S,scale:O,coordinate:v,crosshairs:Qx(e,m),item:a,startX:A,startY:T,emitter:u}))}return j$t(x,Object.assign(Object.assign({},s),{datum:El(h),elements:is,scale:d,coordinate:v,groupKey:n?bE():void 0,item:a,emitter:u,view:h,theme:g,shared:n}))}}iV.props={reapplyWhenUpdate:!0};var ag=globalThis&&globalThis.__awaiter||function(t,n,e,r){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(t,n||[])).next())})};const aV="legend-category",z$t="legend-continuous",G$t="items-item",Y$t="legend-category-item-marker",W$t="legend-category-item-label";function oV(t){return t.getElementsByClassName(Y$t)[0]}function sV(t){return t.getElementsByClassName(W$t)[0]}function lV(t){return t.getElementsByClassName(G$t)}function cV(t){return t.getElementsByClassName(aV)}function V$t(t){return t.getElementsByClassName(z$t)}function R2(t){let n=t.parentNode;for(;n&&!n.__data__;)n=n.parentNode;return n.__data__}function H$t(t,{legends:n,marker:e,label:r,datum:i,filter:a,emitter:o,channel:s,state:l={}}){const c=new Map,u=new Map,f=new Map,{unselected:h={markerStroke:"#aaa",markerFill:"#aaa",labelFill:"#aaa"}}=l,d={unselected:ct(h,"marker")},p={unselected:ct(h,"label")},{setState:v,removeState:g}=qa(d,void 0),{setState:y,removeState:m}=qa(p,void 0),x=Array.from(n(t));let b=x.map(i);const w=()=>{for(const M of x){const A=i(M),T=e(M),C=r(M);b.includes(A)?(g(T,"unselected"),m(C,"unselected")):(v(T,"unselected"),y(C,"unselected"))}};for(const M of x){const A=()=>{wo(t,"pointer")},T=()=>{w$t(t)},C=P=>ag(this,void 0,void 0,function*(){const _=i(M),k=b.indexOf(_);k===-1?b.push(_):b.splice(k,1),b.length===0&&b.push(...x.map(i)),yield a(b),w();const{nativeEvent:I=!0}=P;I&&(b.length===x.length?o.emit("legend:reset",{nativeEvent:I}):o.emit("legend:filter",Object.assign(Object.assign({},P),{nativeEvent:I,data:{channel:s,values:b}})))});M.addEventListener("click",C),M.addEventListener("pointerenter",A),M.addEventListener("pointerout",T),c.set(M,C),u.set(M,A),f.set(M,T)}const S=M=>ag(this,void 0,void 0,function*(){const{nativeEvent:A}=M;if(A)return;const{data:T}=M,{channel:C,values:P}=T;C===s&&(b=P,yield a(b),w())}),O=M=>ag(this,void 0,void 0,function*(){const{nativeEvent:A}=M;A||(b=x.map(i),yield a(b),w())});return o.on("legend:filter",S),o.on("legend:reset",O),()=>{for(const M of x)M.removeEventListener("click",c.get(M)),M.removeEventListener("pointerenter",u.get(M)),M.removeEventListener("pointerout",f.get(M)),o.off("legend:filter",S),o.off("legend:reset",O)}}function X$t(t,{legend:n,filter:e,emitter:r,channel:i}){const a=({detail:{value:o}})=>{e(o),r.emit({nativeEvent:!0,data:{channel:i,values:o}})};return n.addEventListener("valuechange",a),()=>{n.removeEventListener("valuechange",a)}}function uV(t,{legend:n,channel:e,value:r,ordinal:i,channels:a,allChannels:o,facet:s=!1}){return ag(this,void 0,void 0,function*(){const{view:l,update:c,setState:u}=t;u(n,f=>{const{marks:h}=f,d=h.map(p=>{if(p.type==="legends")return p;const{transform:v=[]}=p,g=v.findIndex(({type:x})=>x.startsWith("group")||x.startsWith("bin")),y=[...v];y.splice(g+1,0,{type:"filter",[e]:{value:r,ordinal:i}});const m=Object.fromEntries(a.map(x=>[x,{domain:l.scale[x].getOptions().domain}]));return nt({},p,Object.assign(Object.assign({transform:y,scale:m},!i&&{animate:!1}),{legend:s?!1:Object.fromEntries(o.map(x=>[x,{preserve:!0}]))}))});return Object.assign(Object.assign({},f),{marks:d})}),yield c()})}function U$t(t,n){for(const e of t)uV(e,Object.assign(Object.assign({},n),{facet:!0}))}function q$t(){return(t,n,e)=>{const{container:r}=t,i=n.filter(f=>f!==t),a=i.length>0,o=f=>R2(f).scales.map(h=>h.name),s=[...cV(r),...V$t(r)],l=s.flatMap(o),c=a?vl(U$t,50,{trailing:!0}):vl(uV,50,{trailing:!0}),u=s.map(f=>{const{name:h,domain:d}=R2(f).scales[0],p=o(f),v={legend:f,channel:h,channels:p,allChannels:l};return f.className===aV?H$t(r,{legends:lV,marker:oV,label:sV,datum:g=>{const{__data__:y}=g,{index:m}=y;return d[m]},filter:g=>{const y=Object.assign(Object.assign({},v),{value:g,ordinal:!0});c(a?i:t,y)},state:f.attributes.state,channel:h,emitter:e}):X$t(r,{legend:f,filter:g=>{const y=Object.assign(Object.assign({},v),{value:g,ordinal:!1});c(a?i:t,y)},emitter:e,channel:h})});return()=>{u.forEach(f=>f())}}}function Z$t(){return(t,n,e)=>{const{container:r,view:i,options:a}=t,o=cV(r),s=is(r),l=d=>R2(d).scales[0].name,c=d=>{const{scale:{[d]:p}}=i;return p},u=bu(a,["active","inactive"]),f=ep(s,El(i)),h=[];for(const d of o){const p=N=>{const{data:j}=d.attributes,{__data__:Y}=N,{index:W}=Y;return j[W].label},v=l(d),g=lV(d),y=c(v),m=Be(s,N=>y.invert(N.__data__[v])),{state:x={}}=d.attributes,{inactive:b={}}=x,{setState:w,removeState:S}=qa(u,f),O={inactive:ct(b,"marker")},M={inactive:ct(b,"label")},{setState:A,removeState:T}=qa(O),{setState:C,removeState:P}=qa(M),_=N=>{for(const j of g){const Y=oV(j),W=sV(j);j===N||N===null?(T(Y,"inactive"),P(W,"inactive")):(A(Y,"inactive"),C(W,"inactive"))}},k=(N,j)=>{const Y=p(j),W=new Set(m.get(Y));for(const H of s)W.has(H)?w(H,"active"):w(H,"inactive");_(j);const{nativeEvent:V=!0}=N;V&&e.emit("legend:highlight",Object.assign(Object.assign({},N),{nativeEvent:V,data:{channel:v,value:Y}}))},I=new Map;for(const N of g){const j=Y=>{k(Y,N)};N.addEventListener("pointerover",j),I.set(N,j)}const L=N=>{for(const Y of s)S(Y,"inactive","active");_(null);const{nativeEvent:j=!0}=N;j&&e.emit("legend:unhighlight",{nativeEvent:j})},F=N=>{const{nativeEvent:j,data:Y}=N;if(j)return;const{channel:W,value:V}=Y;if(W!==v)return;const H=g.find(Q=>p(Q)===V);H&&k({nativeEvent:!1},H)},B=N=>{const{nativeEvent:j}=N;j||L({nativeEvent:!1})};d.addEventListener("pointerleave",L),e.on("legend:highlight",F),e.on("legend:unhighlight",B);const D=()=>{d.removeEventListener(L),e.off("legend:highlight",F),e.off("legend:unhighlight",B);for(const[N,j]of I)N.removeEventListener(j)};h.push(D)}return()=>h.forEach(d=>d())}}var Fr=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};function K$t(t,n){const[e,r,i,a]=t,[o,s,l,c]=n;return!(o>i||l<e||s>a||c<r)}function Q$t(t,n,e,r,i){const[a,o,s,l]=i;return[Math.max(a,Math.min(t,e)),Math.max(o,Math.min(n,r)),Math.min(s,Math.max(t,e)),Math.min(l,Math.max(n,r))]}function J$t(t){const{width:n,height:e}=t.getBBox();return[0,0,n,e]}function Ta(t,n){for(const[e,r]of Object.entries(n))t.style(e,r)}const dD=cu(t=>{const n=t.attributes,{x:e,y:r,width:i,height:a,class:o,renders:s={},handleSize:l=10,document:c}=n,u=Fr(n,["x","y","width","height","class","renders","handleSize","document"]);if(!c||i===void 0||a===void 0||e===void 0||r===void 0)return;const f=l/2,h=(V,H,Q)=>{V.handle||(V.handle=Q.createElement("rect"),V.append(V.handle));const{handle:Z}=V;return Z.attr(H),Z},d=ct(ex(u,"handleNW","handleNE"),"handleN"),{render:p=h}=d,v=Fr(d,["render"]),g=ct(u,"handleE"),{render:y=h}=g,m=Fr(g,["render"]),x=ct(ex(u,"handleSE","handleSW"),"handleS"),{render:b=h}=x,w=Fr(x,["render"]),S=ct(u,"handleW"),{render:O=h}=S,M=Fr(S,["render"]),A=ct(u,"handleNW"),{render:T=h}=A,C=Fr(A,["render"]),P=ct(u,"handleNE"),{render:_=h}=P,k=Fr(P,["render"]),I=ct(u,"handleSE"),{render:L=h}=I,F=Fr(I,["render"]),B=ct(u,"handleSW"),{render:D=h}=B,N=Fr(B,["render"]),j=(V,H)=>{const{id:Q}=V,Z=V.attributes,q=Fr(Z,["x","y"]),rt=H(V,Object.assign({x:0,y:0},q),c);rt.id=Q,rt.style.draggable=!0},Y=V=>()=>{const H=cu(Q=>j(Q,V));return new H({})},W=Ot(t).attr("className",o).style("x",e).style("y",r).style("draggable",!0);W.maybeAppend("selection","rect").style("draggable",!0).style("fill","transparent").call(Ta,Object.assign({width:i,height:a},ex(u,"handle"))),W.maybeAppend("handle-n",Y(p)).style("x",f).style("y",-f).style("width",i-l).style("height",l).style("fill","transparent").call(Ta,v),W.maybeAppend("handle-e",Y(y)).style("x",i-f).style("y",f).style("width",l).style("height",a-l).style("fill","transparent").call(Ta,m),W.maybeAppend("handle-s",Y(b)).style("x",f).style("y",a-f).style("width",i-l).style("height",l).style("fill","transparent").call(Ta,w),W.maybeAppend("handle-w",Y(O)).style("x",-f).style("y",f).style("width",l).style("height",a-l).style("fill","transparent").call(Ta,M),W.maybeAppend("handle-nw",Y(T)).style("x",-f).style("y",-f).style("width",l).style("height",l).style("fill","transparent").call(Ta,C),W.maybeAppend("handle-ne",Y(_)).style("x",i-f).style("y",-f).style("width",l).style("height",l).style("fill","transparent").call(Ta,k),W.maybeAppend("handle-se",Y(L)).style("x",i-f).style("y",a-f).style("width",l).style("height",l).style("fill","transparent").call(Ta,F),W.maybeAppend("handle-sw",Y(D)).style("x",-f).style("y",a-f).style("width",l).style("height",l).style("fill","transparent").call(Ta,N)});function SE(t,n){var{brushed:e=()=>{},brushended:r=()=>{},brushcreated:i=()=>{},brushstarted:a=()=>{},brushupdated:o=()=>{},extent:s=J$t(t),brushRegion:l=(Z,q,rt,it,ft)=>[Z,q,rt,it],reverse:c=!1,fill:u="#777",fillOpacity:f="0.3",stroke:h="#fff",selectedHandles:d=["handle-n","handle-e","handle-s","handle-w","handle-nw","handle-ne","handle-se","handle-sw"]}=n,p=Fr(n,["brushed","brushended","brushcreated","brushstarted","brushupdated","extent","brushRegion","reverse","fill","fillOpacity","stroke","selectedHandles"]);let v=null,g=null,y=null,m=null,x=null,b=!1;const[w,S,O,M]=s;wo(t,"crosshair"),t.style.draggable=!0;const A=(Z,q,rt)=>{if(a(rt),m&&m.remove(),x&&x.remove(),v=[Z,q],c)return T();C()},T=()=>{x=new lr({style:Object.assign(Object.assign({},p),{fill:u,fillOpacity:f,stroke:h,pointerEvents:"none"})}),m=new dD({style:{x:0,y:0,width:0,height:0,draggable:!0,document:t.ownerDocument},className:"mask"}),t.appendChild(x),t.appendChild(m)},C=()=>{m=new dD({style:Object.assign(Object.assign({document:t.ownerDocument,x:0,y:0},p),{fill:u,fillOpacity:f,stroke:h,draggable:!0}),className:"mask"}),t.appendChild(m)},P=(Z=!0)=>{m&&m.remove(),x&&x.remove(),v=null,g=null,y=null,b=!1,m=null,x=null,r(Z)},_=(Z,q,rt=!0)=>{const[it,ft,yt,mt]=Q$t(Z[0],Z[1],q[0],q[1],s),[St,Wt,Ft,ne]=l(it,ft,yt,mt,s);return c?I(St,Wt,Ft,ne):k(St,Wt,Ft,ne),e(St,Wt,Ft,ne,rt),[St,Wt,Ft,ne]},k=(Z,q,rt,it)=>{m.style.x=Z,m.style.y=q,m.style.width=rt-Z,m.style.height=it-q},I=(Z,q,rt,it)=>{x.style.d=`
      M${w},${S}L${O},${S}L${O},${M}L${w},${M}Z
      M${Z},${q}L${Z},${it}L${rt},${it}L${rt},${q}Z
    `,m.style.x=Z,m.style.y=q,m.style.width=rt-Z,m.style.height=it-q},L=Z=>{const q=(Wt,Ft,ne,Je,ur)=>Wt+Ft<Je?Je-Ft:Wt+ne>ur?ur-ne:Wt,rt=Z[0]-y[0],it=Z[1]-y[1],ft=q(rt,v[0],g[0],w,O),yt=q(it,v[1],g[1],S,M),mt=[v[0]+ft,v[1]+yt],St=[g[0]+ft,g[1]+yt];_(mt,St)},F={"handle-n":{vector:[0,1,0,0],cursor:"ns-resize"},"handle-e":{vector:[0,0,1,0],cursor:"ew-resize"},"handle-s":{vector:[0,0,0,1],cursor:"ns-resize"},"handle-w":{vector:[1,0,0,0],cursor:"ew-resize"},"handle-nw":{vector:[1,1,0,0],cursor:"nwse-resize"},"handle-ne":{vector:[0,1,1,0],cursor:"nesw-resize"},"handle-se":{vector:[0,0,1,1],cursor:"nwse-resize"},"handle-sw":{vector:[1,0,0,1],cursor:"nesw-resize"}},B=Z=>N(Z)||D(Z),D=Z=>{const{id:q}=Z;return d.indexOf(q)===-1?!1:new Set(Object.keys(F)).has(q)},N=Z=>Z===m.getElementById("selection"),j=Z=>{const{target:q}=Z,[rt,it]=Kx(t,Z);if(!m||!B(q)){A(rt,it,Z),b=!0;return}B(q)&&(y=[rt,it])},Y=Z=>{const{target:q}=Z,rt=Kx(t,Z);if(!v)return;if(!y)return _(v,rt);if(N(q))return L(rt);const[it,ft]=[rt[0]-y[0],rt[1]-y[1]],{id:yt}=q;if(F[yt]){const[mt,St,Wt,Ft]=F[yt].vector;return _([v[0]+it*mt,v[1]+ft*St],[g[0]+it*Wt,g[1]+ft*Ft])}},W=Z=>{if(y){y=null;const{x:yt,y:mt,width:St,height:Wt}=m.style;v=[yt,mt],g=[yt+St,mt+Wt],o(yt,mt,yt+St,mt+Wt,Z);return}g=Kx(t,Z);const[q,rt,it,ft]=_(v,g);b=!1,i(q,rt,it,ft,Z)},V=Z=>{const{target:q}=Z;m&&!B(q)&&P()},H=Z=>{const{target:q}=Z;!m||!B(q)||b?wo(t,"crosshair"):N(q)?wo(t,"move"):D(q)&&wo(t,F[q.id].cursor)},Q=()=>{wo(t,"default")};return t.addEventListener("dragstart",j),t.addEventListener("drag",Y),t.addEventListener("dragend",W),t.addEventListener("click",V),t.addEventListener("pointermove",H),t.addEventListener("pointerleave",Q),{mask:m,move(Z,q,rt,it,ft=!0){m||A(Z,q,{}),v=[Z,q],g=[rt,it],_([Z,q],[rt,it],ft)},remove(Z=!0){m&&P(Z)},destroy(){m&&P(!1),wo(t,"default"),t.removeEventListener("dragstart",j),t.removeEventListener("drag",Y),t.removeEventListener("dragend",W),t.removeEventListener("click",V),t.removeEventListener("pointermove",H),t.removeEventListener("pointerleave",Q)}}}function OE(t,n,e){return n.filter(r=>{if(r===t)return!1;const{interaction:i={}}=r.options;return Object.values(i).find(a=>a.brushKey===e)})}function t4t(t,n,e){return OE(t,n,e).map(r=>oo(r.container))}function e4t(t,n,e){return OE(t,n,e).map(r=>r.options)}function pD(t,n){var{elements:e,selectedHandles:r,siblings:i=Y=>[],datum:a,brushRegion:o,extent:s,reverse:l,scale:c,coordinate:u,series:f=!1,key:h=Y=>Y,bboxOf:d=Y=>{const{x:W,y:V,width:H,height:Q}=Y.style;return{x:W,y:V,width:H,height:Q}},state:p={},emitter:v}=n,g=Fr(n,["elements","selectedHandles","siblings","datum","brushRegion","extent","reverse","scale","coordinate","series","key","bboxOf","state","emitter"]);const y=e(t),m=i(t),x=m.flatMap(e),b=ep(y,a),w=ct(g,"mask"),{setState:S,removeState:O}=qa(p,b),M=new Map,{width:A,height:T,x:C=0,y:P=0}=d(t),_=s||[0,0,A,T],k=()=>{for(const Y of[...y,...x])O(Y,"active","inactive")},I=(Y,W,V,H)=>{var Q;for(const q of m)(Q=q.brush)===null||Q===void 0||Q.remove();const Z=new Set;for(const q of y){const{min:rt,max:it}=q.getLocalBounds(),[ft,yt]=rt,[mt,St]=it;K$t([ft,yt,mt,St],[Y,W,V,H])?(S(q,"active"),Z.add(h(q))):S(q,"inactive")}for(const q of x)Z.has(h(q))?S(q,"active"):S(q,"inactive")},L=()=>{for(const Y of y)O(Y,"inactive");for(const Y of M.values())Y.remove();M.clear()},F=(Y,W,V,H)=>{const Q=Z=>{const q=Z.cloneNode();return q.__data__=Z.__data__,Z.parentNode.appendChild(q),M.set(Z,q),q};for(const Z of y){const q=M.get(Z)||Q(Z);q.style.clipPath=new Nl({style:{x:Y+C,y:W+P,width:V-Y,height:H-W}}),S(Z,"inactive"),S(q,"active")}},B=SE(t,Object.assign(Object.assign({},w),{extent:_,brushRegion:o,reverse:l,selectedHandles:r,brushended:Y=>{const W=f?L:k;Y&&v.emit("brush:remove",{nativeEvent:!0}),W()},brushed:(Y,W,V,H,Q)=>{const Z=ng(Y,W,V,H,c,u);Q&&v.emit("brush:highlight",{nativeEvent:!0,data:{selection:Z}}),(f?F:I)(Y,W,V,H)},brushcreated:(Y,W,V,H,Q)=>{const Z=ng(Y,W,V,H,c,u);v.emit("brush:end",Object.assign(Object.assign({},Q),{nativeEvent:!0,data:{selection:Z}}))},brushupdated:(Y,W,V,H,Q)=>{const Z=ng(Y,W,V,H,c,u);v.emit("brush:end",Object.assign(Object.assign({},Q),{nativeEvent:!0,data:{selection:Z}}))},brushstarted:Y=>{v.emit("brush:start",Y)}})),D=({nativeEvent:Y,data:W})=>{if(Y)return;const{selection:V}=W,[H,Q,Z,q]=UIt(V,c,u);B.move(H,Q,Z,q,!1)};v.on("brush:highlight",D);const N=({nativeEvent:Y}={})=>{Y||B.remove(!1)};v.on("brush:remove",N);const j=B.destroy.bind(B);return B.destroy=()=>{v.off("brush:highlight",D),v.off("brush:remove",N),j()},B}function ME(t){var{facet:n,brushKey:e}=t,r=Fr(t,["facet","brushKey"]);return(i,a,o)=>{const{container:s,view:l,options:c}=i,u=oo(s),f={maskFill:"#777",maskFillOpacity:"0.3",maskStroke:"#fff",reverse:!1},h=["active",["inactive",{opacity:.5}]],{scale:d,coordinate:p}=l;if(n){const g=u.getBounds(),y=g.min[0],m=g.min[1],x=g.max[0],b=g.max[1];return pD(u.parentNode.parentNode,Object.assign(Object.assign({elements:()=>GW(i,a),datum:El(F2(i,a).map(w=>w.view)),brushRegion:(w,S,O,M)=>[w,S,O,M],extent:[y,m,x,b],state:bu(F2(i,a).map(w=>w.options),h),emitter:o,scale:d,coordinate:p,selectedHandles:void 0},f),r))}const v=pD(u,Object.assign(Object.assign({elements:is,key:g=>g.__data__.key,siblings:()=>t4t(i,a,e),datum:El([l,...OE(i,a,e).map(g=>g.view)]),brushRegion:(g,y,m,x)=>[g,y,m,x],extent:void 0,state:bu([c,...e4t(i,a,e)],h),emitter:o,scale:d,coordinate:p,selectedHandles:void 0},f),r));return u.brush=v,()=>v.destroy()}}function AE(t,n,e,r,i){const[,a,,o]=i;return[t,a,e,o]}function n4t(t){return ME(Object.assign(Object.assign({},t),{brushRegion:AE,selectedHandles:["handle-e","handle-w"]}))}function EE(t,n,e,r,i){const[a,,o]=i;return[a,n,o,r]}function r4t(t){return ME(Object.assign(Object.assign({},t),{brushRegion:EE,selectedHandles:["handle-n","handle-s"]}))}var TE=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};const i4t="axis",a4t="axis-line",o4t="axis-main-group",fV="axis-hot-area";function s4t(t){return t.getElementsByClassName(i4t)}function hV(t){return t.getElementsByClassName(a4t)[0]}function l4t(t){return t.getElementsByClassName(o4t)[0]}function dV(t){return l4t(t).getLocalBounds()}function c4t(t,n){var{cross:e,offsetX:r,offsetY:i}=n,a=TE(n,["cross","offsetX","offsetY"]);const o=dV(t),s=hV(t),[l]=s.getLocalBounds().min,[c,u]=o.min,[f,h]=o.max,d=(f-c)*2;return{brushRegion:EE,hotZone:new Nl({className:fV,style:Object.assign({x:e?c:l-d/2,width:e?d/2:d,y:u,height:h-u},a)}),extent:e?(p,v,g,y)=>[-1/0,v,1/0,y]:(p,v,g,y)=>[Math.floor(c-r),v,Math.ceil(f-r),y]}}function u4t(t,n){var{offsetY:e,offsetX:r,cross:i=!1}=n,a=TE(n,["offsetY","offsetX","cross"]);const o=dV(t),s=hV(t),[,l]=s.getLocalBounds().min,[c,u]=o.min,[f,h]=o.max,d=h-u;return{brushRegion:AE,hotZone:new Nl({className:fV,style:Object.assign({x:c,width:f-c,y:i?u:l-d,height:i?d:d*2},a)}),extent:i?(p,v,g,y)=>[p,-1/0,g,1/0]:(p,v,g,y)=>[p,Math.floor(u-e),g,Math.ceil(h-e)]}}function f4t(t,n){var{axes:e,elements:r,points:i,horizontal:a,datum:o,offsetY:s,offsetX:l,reverse:c=!1,state:u={},emitter:f,coordinate:h}=n,d=TE(n,["axes","elements","points","horizontal","datum","offsetY","offsetX","reverse","state","emitter","coordinate"]);const p=r(t),v=e(t),g=ep(p,o),{setState:y,removeState:m}=qa(u,g),x=new Map,b=ct(d,"mask"),w=D=>Array.from(x.values()).every(([N,j,Y,W])=>D.some(([V,H])=>V>=N&&V<=Y&&H>=j&&H<=W)),S=v.map(D=>D.attributes.scale),O=D=>D.length>2?[D[0],D[D.length-1]]:D,M=new Map,A=()=>{M.clear();for(let D=0;D<v.length;D++){const N=S[D],{domain:j}=N.getOptions();M.set(D,O(j))}};A();const T=(D,N)=>{const j=[];for(const W of p){const V=i(W);w(V)?(y(W,"active"),j.push(W)):y(W,"inactive")}if(M.set(D,P(j,D)),!N)return;const Y=()=>{if(!_)return Array.from(M.values());const W=[];for(const[V,H]of M){const Q=S[V],{name:Z}=Q.getOptions();Z==="x"?W[0]=H:W[1]=H}return W};f.emit("brushAxis:highlight",{nativeEvent:!0,data:{selection:Y()}})},C=D=>{for(const N of p)m(N,"active","inactive");A(),D&&f.emit("brushAxis:remove",{nativeEvent:!0})},P=(D,N)=>{const j=S[N],{name:Y}=j.getOptions(),W=D.map(V=>{const H=V.__data__;return j.invert(H[Y])});return O(Lo(j,W))},_=v.some(a)&&v.some(D=>!a(D)),k=[];for(let D=0;D<v.length;D++){const N=v[D],j=a(N)?u4t:c4t,{hotZone:Y,brushRegion:W,extent:V}=j(N,{offsetY:s,offsetX:l,cross:_,zIndex:999,fill:"transparent"});N.parentNode.appendChild(Y);const H=SE(Y,Object.assign(Object.assign({},b),{reverse:c,brushRegion:W,brushended(Q){x.delete(N),Array.from(x.entries()).length===0?C(Q):T(D,Q)},brushed(Q,Z,q,rt,it){x.set(N,V(Q,Z,q,rt)),T(D,it)}}));k.push(H)}const I=(D={})=>{const{nativeEvent:N}=D;N||k.forEach(j=>j.remove(!1))},L=(D,N,j)=>{const[Y,W]=D,V=Z=>Z.getStep?Z.getStep():0,H=F(Y,N,j),Q=F(W,N,j)+V(N);return a(j)?[H,-1/0,Q,1/0]:[-1/0,H,1/0,Q]},F=(D,N,j)=>{const{height:Y,width:W}=h.getOptions(),V=N.clone();return a(j)?V.update({range:[0,W]}):V.update({range:[Y,0]}),V.map(D)},B=D=>{const{nativeEvent:N}=D;if(N)return;const{selection:j}=D.data;for(let Y=0;Y<k.length;Y++){const W=j[Y],V=k[Y],H=v[Y];if(W){const Q=S[Y];V.move(...L(W,Q,H),!1)}else V.remove(!1)}};return f.on("brushAxis:remove",I),f.on("brushAxis:highlight",B),()=>{k.forEach(D=>D.destroy()),f.off("brushAxis:remove",I),f.off("brushAxis:highlight",B)}}function h4t(t){return(n,e,r)=>{const{container:i,view:a,options:o}=n,s=oo(i),{x:l,y:c}=s.getBBox(),{coordinate:u}=a;return f4t(i,Object.assign({elements:is,axes:s4t,offsetY:c,offsetX:l,points:f=>f.__data__.points,horizontal:f=>{const{startPos:[h,d],endPos:[p,v]}=f.attributes;return h!==p&&d===v},datum:El(a),state:bu(o,["active",["inactive",{opacity:.5}]]),coordinate:u,emitter:r},t))}}var d4t=globalThis&&globalThis.__awaiter||function(t,n,e,r){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(t,n||[])).next())})},pV=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};function p4t(t=300){let n=null;return e=>{const{timeStamp:r}=e;return n!==null&&r-n<t?(n=r,!0):(n=r,!1)}}function v4t(t,n){var{filter:e,reset:r,brushRegion:i,extent:a,reverse:o,emitter:s,scale:l,coordinate:c,selection:u,series:f=!1}=n,h=pV(n,["filter","reset","brushRegion","extent","reverse","emitter","scale","coordinate","selection","series"]);const d=ct(h,"mask"),{width:p,height:v}=t.getBBox(),g=a||[0,0,p,v],y=p4t(),m=SE(t,Object.assign(Object.assign({},d),{extent:g,brushRegion:i,reverse:o,brushcreated:x}));t.addEventListener("click",b);function x(S,O,M,A,T){T.nativeEvent=!0,e(u(S,O,M,A),T),m.remove()}function b(S){y(S)&&(S.nativeEvent=!0,r(S))}const w=({nativeEvent:S,data:O})=>{if(S)return;const{selection:M}=O;e(M,{nativeEvent:!1})};return s.on("brush:filter",w),()=>{m.destroy(),s.off("brush:filter",w),t.removeEventListener("click",b)}}function CE(t){var{hideX:n=!0,hideY:e=!0}=t,r=pV(t,["hideX","hideY"]);return(i,a,o)=>{const{container:s,view:l,options:c,update:u,setState:f}=i,h=oo(s),d={maskFill:"#777",maskFillOpacity:"0.3",maskStroke:"#fff",unhighlightedOpacity:.5,reverse:!1};let p=!1,v=!1,g=l;const{scale:y,coordinate:m}=l;return v4t(h,Object.assign(Object.assign({brushRegion:(x,b,w,S)=>[x,b,w,S],selection:(x,b,w,S)=>{const{scale:O,coordinate:M}=g;return ng(x,b,w,S,O,M)},filter:(x,b)=>d4t(this,void 0,void 0,function*(){if(v)return;v=!0;const[w,S]=x;f("brushFilter",M=>{const{marks:A}=M,T=A.map(C=>nt({axis:Object.assign(Object.assign({},n&&{x:{transform:[{type:"hide"}]}}),e&&{y:{transform:[{type:"hide"}]}})},C,{scale:{x:{domain:w,nice:!1},y:{domain:S,nice:!1}}}));return Object.assign(Object.assign({},c),{marks:T,clip:!0})}),o.emit("brush:filter",Object.assign(Object.assign({},b),{data:{selection:[w,S]}})),g=(yield u()).view,v=!1,p=!0}),reset:x=>{if(v||!p)return;const{scale:b}=l,{x:w,y:S}=b,O=w.getOptions().domain,M=S.getOptions().domain;o.emit("brush:filter",Object.assign(Object.assign({},x),{data:{selection:[O,M]}})),p=!1,g=l,f("brushFilter"),u()},extent:void 0,emitter:o,scale:y,coordinate:m},d),r))}}function g4t(t){return CE(Object.assign(Object.assign({hideX:!0},t),{brushRegion:AE}))}function y4t(t){return CE(Object.assign(Object.assign({hideY:!0},t),{brushRegion:EE}))}var m4t=globalThis&&globalThis.__awaiter||function(t,n,e,r){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(t,n||[])).next())})};const x4t="slider";function b4t(t,n,e,r=!1,i="x",a="y"){const{marks:o}=t,s=o.map(l=>{var c,u;return nt({axis:{x:{transform:[{type:"hide"}]},y:{transform:[{type:"hide"}]}}},l,{scale:n,[e]:Object.assign(Object.assign({},((c=l[e])===null||c===void 0?void 0:c[i])&&{[i]:Object.assign({preserve:!0},r&&{ratio:null})}),((u=l[e])===null||u===void 0?void 0:u[a])&&{[a]:{preserve:!0}}),animate:!1})});return Object.assign(Object.assign({},t),{marks:s,clip:!0,animate:!1})}function w4t(t,n,e){const[r,i]=t,a=e?l=>1-l:l=>l,o=pu(n,a(r),!0),s=pu(n,a(i),!1);return Lo(n,[o,s])}function kv(t){return[t[0],t[t.length-1]]}function vV({initDomain:t={},className:n=x4t,prefix:e="slider",setValue:r=(l,c)=>l.setValues(c),hasState:i=!1,wait:a=50,leading:o=!0,trailing:s=!1}){return(l,c,u)=>{const{container:f,view:h,update:d,setState:p}=l,v=f.getElementsByClassName(n);if(!v.length)return()=>{};let g=!1;const{scale:y,coordinate:m,layout:x}=h,{paddingLeft:b,paddingTop:w,paddingBottom:S,paddingRight:O}=x,{x:M,y:A}=y,T=_e(m),C=I=>{const L=I==="vertical"?"y":"x",F=I==="vertical"?"x":"y";return T?[F,L]:[L,F]},P=new Map,_=new Set,k={x:t.x||M.getOptions().domain,y:t.y||A.getOptions().domain};for(const I of v){const{orientation:L}=I.attributes,[F,B]=C(L),D=`${e}${us(F)}:filter`,N=F==="x",{ratio:j}=M.getOptions(),{ratio:Y}=A.getOptions(),W=Q=>{if(Q.data){const{selection:ft}=Q.data,[yt=kv(k.x),mt=kv(k.y)]=ft;return N?[Lo(M,yt,j),Lo(A,mt,Y)]:[Lo(A,mt,Y),Lo(M,yt,j)]}const{value:Z}=Q.detail,q=y[F],rt=w4t(Z,q,T&&L==="horizontal"),it=k[B];return[rt,it]},V=vl(Q=>m4t(this,void 0,void 0,function*(){if(g)return;g=!0;const{nativeEvent:Z=!0}=Q,[q,rt]=W(Q);if(k[F]=q,k[B]=rt,Z){const it=N?q:rt,ft=N?rt:q;u.emit(D,Object.assign(Object.assign({},Q),{nativeEvent:Z,data:{selection:[kv(it),kv(ft)]}}))}p(I,it=>Object.assign(Object.assign({},b4t(it,{[F]:{domain:q,nice:!1}},e,i,F,B)),{paddingLeft:b,paddingTop:w,paddingBottom:S,paddingRight:O})),yield d(),g=!1}),a,{leading:o,trailing:s}),H=Q=>{const{nativeEvent:Z}=Q;if(Z)return;const{data:q}=Q,{selection:rt}=q,[it,ft]=rt;I.dispatchEvent(new Se("valuechange",{data:q,nativeEvent:!1}));const yt=N?py(it,M):py(ft,A);r(I,yt)};u.on(D,H),I.addEventListener("valuechange",V),P.set(I,V),_.add([D,H])}return d(),()=>{for(const[I,L]of P)I.removeEventListener("valuechange",L);for(const[I,L]of _)u.off(I,L)}}}const vD="g2-scrollbar";function S4t(t={}){return(n,e,r)=>{const{view:i,container:a}=n;if(!a.getElementsByClassName(vD).length)return()=>{};const{scale:s}=i,{x:l,y:c}=s,u={x:[...l.getOptions().domain],y:[...c.getOptions().domain]};return l.update({domain:l.getOptions().expectedDomain}),c.update({domain:c.getOptions().expectedDomain}),vV(Object.assign(Object.assign({},t),{initDomain:u,className:vD,prefix:"scrollbar",hasState:!0,setValue:(h,d)=>h.setValue(d[0])}))(n,e,r)}}var O4t=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};function M4t(t,n,e){return`<${t} style="${Object.entries(e).map(([r,i])=>`${VPt(r)}:${i}`).join(";")}">${n}</${t}>`}const A4t={backgroundColor:"rgba(0,0,0,0.75)",color:"#fff",width:"max-content",padding:"1px 4px",fontSize:"12px",borderRadius:"2.5px",boxShadow:"0 3px 6px -4px rgba(0,0,0,0.12), 0 6px 16px 0 rgba(0,0,0,0.08), 0 9px 28px 8px rgba(0,0,0,0.05)"};function gD(t){return t.nodeName!=="text"?!1:!!t.isOverflowing()}function gV(t){var{offsetX:n=8,offsetY:e=8}=t,r=O4t(t,["offsetX","offsetY"]);return i=>{const{container:a}=i,[o,s]=a.getBounds().min,l=ct(r,"tip"),c=new Set,u=h=>{const{target:d}=h;if(!gD(d)){h.stopPropagation();return}const{offsetX:p,offsetY:v}=h,g=p+n-o,y=v+e-s;if(d.tip){d.tip.style.x=g,d.tip.style.y=y;return}const{text:m}=d.style,x=new Mm({className:"poptip",style:{innerHTML:M4t("div",m,Object.assign(Object.assign({},A4t),l)),x:g,y}});a.appendChild(x),d.tip=x,c.add(x)},f=h=>{const{target:d}=h;if(!gD(d)){h.stopPropagation();return}d.tip&&(d.tip.remove(),d.tip=null,c.delete(d.tip))};return a.addEventListener("pointerover",u),a.addEventListener("pointerout",f),()=>{a.removeEventListener("pointerover",u),a.removeEventListener("pointerout",f),c.forEach(h=>h.remove())}}}gV.props={reapplyWhenUpdate:!0};function B2(t){const{min:n,max:e}=t;return[[n[0],n[1]],[e[0],e[1]]]}function yD(t,n){const[e,r]=t,[i,a]=n;return e>=i[0]&&e<=a[0]&&r>=i[1]&&r<=a[1]}function E4t(t,n){const[e,r]=t;return!(yD(e,n)&&yD(r,n))}function T4t(t,n){const[e,r]=t,[i,a]=n;return e[0]<a[0]&&r[0]>i[0]&&e[1]<a[1]&&r[1]>i[1]}const C4t=t=>{const{priority:n}=t;return e=>{const r=[];return n&&e.sort(n),e.forEach(i=>{mE(i);const a=i.getLocalBounds();r.some(s=>T4t(B2(a),B2(s.getLocalBounds())))?yE(i):r.push(i)}),e}};function P4t([t,n],[e,r]){return r>t&&n>e}function _v(){const t=new Map;return[r=>t.get(r),(r,i)=>t.set(r,i)]}function k4t(t){const n=t.cloneNode(!0),e=n.getElementById("connector");e&&n.removeChild(e);const{min:r,max:i}=n.getRenderBounds();return n.destroy(),{min:r,max:i}}const _4t=t=>{const{maxIterations:n=10,maxError:e=.1,padding:r=1}=t;return i=>{const a=i.length;if(a<=1)return i;const[o,s]=_v(),[l,c]=_v(),[u,f]=_v(),[h,d]=_v();for(const p of i){const{min:v,max:g}=k4t(p),[y,m]=v,[x,b]=g;s(p,m),c(p,m),f(p,b-m),d(p,[y,x])}for(let p=0;p<n;p++){i.sort((g,y)=>Xe(l(g),l(y)));let v=0;for(let g=0;g<a-1;g++){const y=i[g];let m=g+1,x;for(;(x=i[m])&&!P4t(h(y),h(x));)m+=1;if(x){const b=l(y),w=u(y),S=l(x),O=S-(b+w);if(O<r){const M=(r-O)/2;v=Math.max(v,M),c(y,b-M),c(x,S+M)}}}if(v<e)break}for(const p of i)p.style.y+=l(p)-o(p);return i}};function L4t(t){return typeof t=="object"?t:Ha(t)}function Jx(t){let n=t/255;return n=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4),n}function mD(t,n,e){return .2126*Jx(t)+.7152*Jx(n)+.0722*Jx(e)}function yV(t,n){const{r:e,g:r,b:i}=t,{r:a,g:o,b:s}=n,l=mD(e,r,i),c=mD(a,o,s);return(Math.max(l,c)+.05)/(Math.min(l,c)+.05)}function I4t(t,n){const e=Nu(n,r=>yV(t,L4t(r)));return n[e]}const F4t=t=>{const{threshold:n=4.5,palette:e=["#000","#fff"]}=t;return r=>(r.forEach(i=>{const a=i.attr("dependentElement").parsedStyle.fill,o=i.parsedStyle.fill;yV(o,a)<n&&i.attr("fill",I4t(a,e))}),r)},D4t=()=>t=>(t.forEach(n=>{mE(n);const e=n.attr("bounds"),r=n.getLocalBounds();E4t(B2(r),e)&&yE(n)}),t);function R4t(){return{"data.fetch":A7,"data.inline":L7,"data.sortBy":_7,"data.sort":C7,"data.filter":T7,"data.pick":P7,"data.rename":k7,"data.fold":E7,"data.slice":N7,"data.custom":I7,"data.map":F7,"data.join":B7,"data.kde":$7,"data.log":H7,"transform.stackY":Y4,"transform.binX":Qj,"transform.bin":kM,"transform.dodgeX":Q4,"transform.jitter":Fj,"transform.jitterX":Dj,"transform.jitterY":Rj,"transform.symmetryY":Bj,"transform.diffY":Nj,"transform.stackEnter":J4,"transform.normalizeY":tj,"transform.select":pm,"transform.selectX":$j,"transform.selectY":jj,"transform.groupX":zj,"transform.groupY":Gj,"transform.groupColor":Yj,"transform.group":$d,"transform.sortX":Vj,"transform.sortY":Xj,"transform.sortColor":Hj,"transform.flexX":Uj,"transform.pack":Kj,"transform.sample":Jj,"transform.filter":tz,"coordinate.cartesian":g4,"coordinate.polar":Ld,"coordinate.transpose":uM,"coordinate.theta":m4,"coordinate.parallel":hM,"coordinate.fisheye":b4,"coordinate.radial":fM,"coordinate.radar":w4,"encode.constant":S4,"encode.field":M4,"encode.transform":O4,"encode.column":A4,"mark.interval":V9,"mark.rect":H9,"mark.line":X9,"mark.point":U9,"mark.text":q9,"mark.cell":Z9,"mark.area":K9,"mark.link":CA,"mark.image":Q9,"mark.polygon":J9,"mark.box":t7,"mark.vector":e7,"mark.lineX":r7,"mark.lineY":n7,"mark.connector":i7,"mark.range":a7,"mark.rangeX":o7,"mark.rangeY":s7,"mark.path":h7,"mark.shape":m7,"mark.density":q7,"mark.heatmap":Z7,"palette.category10":Q7,"palette.category20":J7,"scale.linear":eG,"scale.ordinal":nG,"scale.band":tG,"scale.identity":rG,"scale.point":iG,"scale.time":aG,"scale.log":oG,"scale.pow":sG,"scale.sqrt":fG,"scale.threshold":lG,"scale.quantile":cG,"scale.quantize":uG,"scale.sequential":hG,"scale.constant":dG,"theme.classic":pG,"theme.classicDark":gG,"theme.academy":yG,"theme.light":RA,"theme.dark":vG,"component.axisX":CG,"component.axisY":PG,"component.legendCategory":NA,"component.legendContinuous":bs,"component.legends":NG,"component.title":IG,"component.sliderX":FG,"component.sliderY":DG,"component.scrollbarX":RG,"component.scrollbarY":BG,"animation.scaleInX":jA,"animation.scaleOutX":tFt,"animation.scaleInY":$G,"animation.scaleOutY":eFt,"animation.waveIn":WG,"animation.fadeIn":jG,"animation.fadeOut":zG,"animation.zoomIn":uFt,"animation.zoomOut":fFt,"animation.pathIn":VG,"animation.morphing":YG,"animation.growInX":HG,"animation.growInY":XG,"interaction.elementHighlight":Km,"interaction.elementHighlightByX":UW,"interaction.elementHighlightByColor":qW,"interaction.elementSelect":Qm,"interaction.elementSelectByX":ZW,"interaction.elementSelectByColor":KW,"interaction.fisheye":_$t,"interaction.chartIndex":QW,"interaction.tooltip":iV,"interaction.legendFilter":q$t,"interaction.legendHighlight":Z$t,"interaction.brushHighlight":ME,"interaction.brushXHighlight":n4t,"interaction.brushYHighlight":r4t,"interaction.brushAxisHighlight":h4t,"interaction.brushFilter":CE,"interaction.brushXFilter":g4t,"interaction.brushYFilter":y4t,"interaction.sliderFilter":vV,"interaction.scrollbarFilter":S4t,"interaction.poptip":gV,"composition.spaceLayer":lY,"composition.spaceFlex":cY,"composition.facetRect":pY,"composition.repeatMatrix":GRt,"composition.facetCircle":URt,"composition.timingKeyframe":vY,"labelTransform.overlapHide":C4t,"labelTransform.overlapDodgeY":_4t,"labelTransform.overflowHide":D4t,"labelTransform.contrastReverse":F4t}}function B4t(){return{"composition.geoView":VY,"composition.geoPath":gY}}function N4t(){return{"data.arc":_A,"data.cluster":w7,"mark.forceGraph":x7,"mark.tree":O7,"mark.pack":p7,"mark.sankey":u7,"mark.chord":f7,"mark.treemap":d7}}function $4t(){return{"data.venn":V7,"mark.boxplot":y7,"mark.gauge":U7,"mark.wordCloud":X7,"mark.liquid":K7}}function mV(){return Object.assign(Object.assign(Object.assign(Object.assign({},B4t()),N4t()),$4t()),R4t())}function j4t(t,n){class e extends t{constructor(i){super(Object.assign(Object.assign({},i),{lib:n}))}}return e}const xV={};function bV(t,n){Object.assign(xV,{[t]:n})}const Jl=t=>t?parseInt(t):0;function z4t(t){const n=getComputedStyle(t),e=t.clientWidth||Jl(n.width),r=t.clientHeight||Jl(n.height),i=Jl(n.paddingLeft)+Jl(n.paddingRight),a=Jl(n.paddingTop)+Jl(n.paddingBottom);return{width:e-i,height:r-a}}function tb(t,n){const e=[t];for(;e.length;){const r=e.shift();n&&n(r);const i=r.children||[];for(const a of i)e.push(a)}}class PE{constructor(n={},e){this.parentNode=null,this.children=[],this.index=0,this.type=e,this.value=n}map(n=e=>e){const e=n(this.value);return this.value=e,this}attr(n,e){return arguments.length===1?this.value[n]:this.map(r=>(r[n]=e,r))}append(n){const e=new n({});return e.children=[],this.push(e),e}push(n){return n.parentNode=this,n.index=this.children.length,this.children.push(n),this}remove(){const n=this.parentNode;if(n){const{children:e}=n,r=e.findIndex(i=>i===this);e.splice(r,1)}return this}getNodeByKey(n){let e=null;return tb(this,i=>{n===i.attr("key")&&(e=i)}),e}getNodesByType(n){const e=[];return tb(this,i=>{n===i.type&&e.push(i)}),e}getNodeByType(n){let e=null;return tb(this,r=>{e||n===r.type&&(e=r)}),e}call(n,...e){return n(this.map(),...e),this}getRoot(){let n=this;for(;n&&n.parentNode;)n=n.parentNode;return n}}var wV=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};const SV=["width","height","depth","padding","paddingLeft","paddingRight","paddingBottom","paddingTop","inset","insetLeft","insetRight","insetTop","insetBottom","margin","marginLeft","marginRight","marginTop","marginBottom","autoFit","theme","title"],OV="__remove__",MV="__callback__",xD=1,bD=1;function G4t(t){if(t===void 0){const n=document.createElement("div");return n[OV]=!0,n}return typeof t=="string"?document.getElementById(t):t}function Y4t(t){const n=t.parentNode;n&&n.removeChild(t)}function W4t(t){if(t.type!==null)return t;const n=t.children[t.children.length-1];for(const e of SV)n.attr(e,t.attr(e));return n}function wD(t){return Object.assign(Object.assign({},t.value),{type:t.type})}function eb(t,n){const{width:e=640,height:r=480,autoFit:i,depth:a=0}=t;let o=e,s=r;if(i){const{width:l,height:c}=z4t(n);o=l||o,s=c||s}return{width:Math.max(tu(o)?o:xD,xD),height:Math.max(tu(s)?s:bD,bD),depth:a}}function V4t(t){const n=W4t(t),e=[n],r=new Map;for(r.set(n,wD(n));e.length;){const i=e.pop(),a=r.get(i),{children:o=[]}=i;for(const s of o)if(s.type===MV)a.children=s.value;else{const l=wD(s),{children:c=[]}=a;c.push(l),e.push(s),r.set(s,l),a.children=c}}return r.get(n)}function H4t(t,n){return typeof t=="function"?!0:new Set(Object.keys(n)).has(t)}function X4t(t,n,e,r){const{type:i}=t,{type:a=e||i}=n;if(a==="view"||!H4t(a,r))return n;const o={type:"view"},s=Object.assign({},n);for(const l of SV)s[l]!==void 0&&(o[l]=s[l],delete s[l]);return Object.assign(Object.assign({},o),{children:[s]})}function U4t(t,n,e){if(typeof t=="function")return n.mark;const i=Object.assign(Object.assign({},n),e)[t];if(!i)throw new Error(`Unknown mark: ${t}.`);return i}function q4t(t,n,e){if(typeof t=="function"){const l=new PE;return l.value=t,l.type=MV,l}const{type:r,children:i}=t,a=wV(t,["type","children"]),o=U4t(r,n,e),s=new o;return s.value=a,s.type=r,s}function Z4t(t,n){const{type:e,children:r}=n,i=wV(n,["type","children"]);t.type===e||e===void 0?R4(t.value,i):typeof e=="string"&&(t.type=e,t.value=i)}function K4t(t,n,e,r){if(!t)return;const i=[[t,n]];for(;i.length;){const[a,o]=i.shift(),s=q4t(o,e,r);Array.isArray(a.children)&&a.push(s);const{children:l}=o;if(Array.isArray(l))for(const c of l)i.push([s,c]);else typeof l=="function"&&i.push([s,l])}}function Q4t(t,n,e,r,i){const a=X4t(t,n,e,r),o=[[null,t,a]];for(;o.length;){const[s,l,c]=o.shift();if(!l)K4t(s,c,r,i);else if(!c)l.remove();else{Z4t(l,c);const{children:u}=c,{children:f}=l;if(Array.isArray(u)&&Array.isArray(f)){const h=Math.max(u.length,f.length);for(let d=0;d<h;d++){const p=u[d],v=f[d];o.push([l,v,p])}}else typeof u=="function"&&o.push([l,null,u])}}}function J4t(){let t,n;return[new Promise((r,i)=>{n=r,t=i}),n,t]}function tjt(t,n,{key:e=n}){t.prototype[n]=function(r){return arguments.length===0?this.attr(e):this.attr(e,r)}}function ejt(t,n,{key:e=n}){t.prototype[n]=function(r){if(arguments.length===0)return this.attr(e);if(Array.isArray(r))return this.attr(e,r);const i=[...this.attr(e)||[],r];return this.attr(e,i)}}function njt(t,n,{key:e=n}){t.prototype[n]=function(r,i){if(arguments.length===0)return this.attr(e);if(arguments.length===1&&typeof r!="string")return this.attr(e,r);const a=this.attr(e)||{};return a[r]=arguments.length===1?!0:i,this.attr(e,a)}}function rjt(t,n,e){t.prototype[n]=function(r){if(arguments.length===0)return this.attr(n);if(Array.isArray(r))return this.attr(n,{items:r});if(zh(r)&&(r.title!==void 0||r.items!==void 0))return this.attr(n,r);if(r===null||r===!1)return this.attr(n,r);const i=this.attr(n)||{},{items:a=[]}=i;return a.push(r),i.items=a,this.attr(n,i)}}function ijt(t,n,{ctor:e}){t.prototype[n]=function(r){const i=this.append(e);return n==="mark"&&(i.type=r),i}}function ajt(t,n,{ctor:e}){t.prototype[n]=function(){return this.type=null,this.append(e)}}function By(t){return n=>{for(const[e,r]of Object.entries(t)){const{type:i}=r;i==="value"?tjt(n,e,r):i==="array"?ejt(n,e,r):i==="object"?njt(n,e,r):i==="node"?ijt(n,e,r):i==="container"?ajt(n,e,r):i==="mix"&&rjt(n,e)}return n}}function SD(t){return Object.fromEntries(Object.entries(t).map(([n,e])=>[n,{type:"node",ctor:e}]))}const AV={encode:{type:"object"},scale:{type:"object"},data:{type:"value"},transform:{type:"array"},style:{type:"object"},animate:{type:"object"},coordinate:{type:"object"},interaction:{type:"object"},label:{type:"array",key:"labels"},axis:{type:"object"},legend:{type:"object"},slider:{type:"object"},scrollbar:{type:"object"},state:{type:"object"},layout:{type:"object"},theme:{type:"object"},title:{type:"value"}},ojt=Object.assign(Object.assign({},AV),{tooltip:{type:"mix"},viewStyle:{type:"object"}}),sjt=Object.assign(Object.assign({},AV),{labelTransform:{type:"array"}});var ljt=globalThis&&globalThis.__decorate||function(t,n,e,r){var i=arguments.length,a=i<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,e):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,n,e,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(n,e,a):o(n,e))||a);return i>3&&a&&Object.defineProperty(n,e,a),a};let Ny=class extends PE{changeData(n){var e;const r=this.getRoot();if(r)return this.attr("data",n),!((e=this.children)===null||e===void 0)&&e.length&&this.children.forEach(i=>{i.attr("data",n)}),r==null?void 0:r.render()}getView(){const n=this.getRoot(),{views:e}=n.getContext();if(e!=null&&e.length)return e.find(r=>r.key===this._key)}getScale(){var n;return(n=this.getView())===null||n===void 0?void 0:n.scale}getScaleByChannel(n){const e=this.getScale();if(e)return e[n]}getCoordinate(){var n;return(n=this.getView())===null||n===void 0?void 0:n.coordinate}getTheme(){var n;return(n=this.getView())===null||n===void 0?void 0:n.theme}getGroup(){const n=this._key;return n?this.getRoot().getContext().canvas.getRoot().getElementById(n):void 0}show(){const n=this.getGroup();n&&!n.isVisible()&&mE(n)}hide(){const n=this.getGroup();n&&n.isVisible()&&yE(n)}};Ny=ljt([By(sjt)],Ny);var cjt=globalThis&&globalThis.__decorate||function(t,n,e,r){var i=arguments.length,a=i<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,e):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,n,e,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(n,e,a):o(n,e))||a);return i>3&&a&&Object.defineProperty(n,e,a),a};let N2=class extends PE{changeData(n){const e=this.getRoot();if(e)return this.attr("data",n),e==null?void 0:e.render()}getMark(){var n;const e=(n=this.getRoot())===null||n===void 0?void 0:n.getView();if(!e)return;const{markState:r}=e,i=Array.from(r.keys()).find(a=>a.key===this.attr("key"));return r.get(i)}getScale(){var n;const e=(n=this.getRoot())===null||n===void 0?void 0:n.getView();if(e)return e==null?void 0:e.scale}getScaleByChannel(n){var e,r;const i=(e=this.getRoot())===null||e===void 0?void 0:e.getView();if(i)return(r=i==null?void 0:i.scale)===null||r===void 0?void 0:r[n]}getGroup(){const n=this.attr("key");return n?this.getRoot().getContext().canvas.getRoot().getElementById(n):void 0}};N2=cjt([By(ojt)],N2);var ujt=globalThis&&globalThis.__decorate||function(t,n,e,r){var i=arguments.length,a=i<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,e):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,n,e,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(n,e,a):o(n,e))||a);return i>3&&a&&Object.defineProperty(n,e,a),a},fjt=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};const hjt="G2_CHART_KEY";class djt extends Ny{constructor(n){const{container:e,canvas:r,renderer:i,plugins:a,lib:o}=n,s=fjt(n,["container","canvas","renderer","plugins","lib"]);super(s,"view"),this._hasBindAutoFit=!1,this._rendering=!1,this._trailing=!1,this._trailingResolve=null,this._trailingReject=null,this._previousDefinedType=null,this._onResize=ymt(()=>{this.forceFit()},300),this._renderer=i||new JG,this._plugins=a||[],this._container=G4t(e),this._emitter=new Au,this._context={library:Object.assign(Object.assign({},o),xV),emitter:this._emitter,canvas:r},this._create()}render(){if(this._rendering)return this._addToTrailing();this._context.canvas||this._createCanvas(),this._context.canvas.getConfig().supportsCSSTransform=!0,this._bindAutoFit(),this._rendering=!0;const n=new Promise((a,o)=>p$t(this._computedOptions(),this._context,this._createResolve(a),this._createReject(o))),[e,r,i]=J4t();return n.then(r).catch(i).then(()=>this._renderTrailing()),e}options(n){if(arguments.length===0)return V4t(this);const{type:e}=n;return e&&(this._previousDefinedType=e),Q4t(this,n,this._previousDefinedType,this._marks,this._compositions),this}getContainer(){return this._container}getContext(){return this._context}on(n,e,r){return this._emitter.on(n,e,r),this}once(n,e){return this._emitter.once(n,e),this}emit(n,...e){return this._emitter.emit(n,...e),this}off(n,e){return this._emitter.off(n,e),this}clear(){const n=this.options();this.emit(fe.BEFORE_CLEAR),this._reset(),sD(n,this._context,!1),this.emit(fe.AFTER_CLEAR)}destroy(){const n=this.options();this.emit(fe.BEFORE_DESTROY),this._unbindAutoFit(),this._reset(),sD(n,this._context,!0),this._container[OV]&&Y4t(this._container),this.emit(fe.AFTER_DESTROY)}forceFit(){this.options.autoFit=!0;const{width:n,height:e}=eb(this.options(),this._container);if(n===this._width&&e===this._height)return Promise.resolve(this);this.emit(fe.BEFORE_CHANGE_SIZE);const r=this.render();return r.then(()=>{this.emit(fe.AFTER_CHANGE_SIZE)}),r}changeSize(n,e){if(n===this._width&&e===this._height)return Promise.resolve(this);this.emit(fe.BEFORE_CHANGE_SIZE),this.attr("width",n),this.attr("height",e);const r=this.render();return r.then(()=>{this.emit(fe.AFTER_CHANGE_SIZE)}),r}_create(){const{library:n}=this._context,e=a=>a.startsWith("mark.")||a==="component.axisX"||a==="component.axisY"||a==="component.legends",r=["mark.mark",...Object.keys(n).filter(e)];this._marks={};for(const a of r){const o=a.split(".").pop();class s extends N2{constructor(){super({},o)}}this._marks[o]=s,this[o]=function(l){const c=this.append(s);return o==="mark"&&(c.type=l),c}}const i=["composition.view",...Object.keys(n).filter(a=>a.startsWith("composition.")&&a!=="composition.mark")];this._compositions=Object.fromEntries(i.map(a=>{const o=a.split(".").pop();let s=class extends Ny{constructor(){super({},o)}};return s=ujt([By(SD(this._marks))],s),[o,s]}));for(const a of Object.values(this._compositions))By(SD(this._compositions))(a);for(const a of i){const o=a.split(".").pop();this[o]=function(){const s=this._compositions[o];return this.type=null,this.append(s)}}}_reset(){const n=["theme","type","width","height","autoFit"];this.type="view",this.value=Object.fromEntries(Object.entries(this.value).filter(([e])=>e.startsWith("margin")||e.startsWith("padding")||e.startsWith("inset")||n.includes(e))),this.children=[]}_renderTrailing(){this._trailing&&(this._trailing=!1,this.render().then(()=>{const n=this._trailingResolve.bind(this);this._trailingResolve=null,n(this)}).catch(n=>{const e=this._trailingReject.bind(this);this._trailingReject=null,e(n)}))}_createResolve(n){return()=>{this._rendering=!1,n(this)}}_createReject(n){return e=>{this._rendering=!1,n(e)}}_computedOptions(){const n=this.options(),{key:e=hjt}=n,{width:r,height:i,depth:a}=eb(n,this._container);return this._width=r,this._height=i,this._key=e,Object.assign(Object.assign({key:this._key},n),{width:r,height:i,depth:a})}_createCanvas(){const{width:n,height:e}=eb(this.options(),this._container);this._plugins.push(new tY),this._plugins.forEach(r=>this._renderer.registerPlugin(r)),this._context.canvas=new s6({container:this._container,width:n,height:e,renderer:this._renderer})}_addToTrailing(){var n;return(n=this._trailingResolve)===null||n===void 0||n.call(this,this),this._trailing=!0,new Promise((r,i)=>{this._trailingResolve=r,this._trailingReject=i})}_bindAutoFit(){const n=this.options(),{autoFit:e}=n;if(this._hasBindAutoFit){e||this._unbindAutoFit();return}e&&(this._hasBindAutoFit=!0,window.addEventListener("resize",this._onResize))}_unbindAutoFit(){this._hasBindAutoFit&&(this._hasBindAutoFit=!1,window.removeEventListener("resize",this._onResize))}}tt.enableCSSParsing=!1;Object.assign({},mV());var $2=globalThis&&globalThis.__assign||function(){return $2=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++){n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},$2.apply(this,arguments)};globalThis&&globalThis.__awaiter;globalThis&&globalThis.__generator;var rp=$2({},jD),pjt=rp.version,vjt=rp.render;rp.unmountComponentAtNode;var kE;try{var gjt=Number((pjt||"").split(".")[0]);gjt>=18&&(kE=rp.createRoot)}catch{}function OD(t){var n=rp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;n&&typeof n=="object"&&(n.usingClientEntryPoint=t)}var MD="__rc_react_root__";function yjt(t,n){OD(!0);var e=n[MD]||kE(n);OD(!1),e.render(t),n[MD]=e}function mjt(t,n){vjt(t,n)}function xjt(t,n){if(kE){yjt(t,n);return}mjt(t,n)}var Rf=new Map;Rf.set("tooltip",document.createElement("div"));var bjt=function(t,n){n===void 0&&(n=!1);var e=document.createElement("div");return n?e=Rf.get("tooltip"):t!=null&&t.key&&(Rf.get(t.key)||Rf.set(t.key,e),e=Rf.get(t.key)),xjt(t,e),e},wjt=function(t){var n=t.attachShadow({mode:"open"}),e=document.createElement("div"),r=document.createElement("style");r.innerHTML=`.loading {
    display: inline-block;
    position: relative;
    width: 80px;
    height: 80px;
  }
  .loading div {
    position: absolute;
    top: 33px;
    width: 13px;
    height: 13px;
    border-radius: 50%;
    background: #ccc;
    animation-timing-function: cubic-bezier(0, 1, 1, 0);
  }
  .loading div:nth-child(1) {
    left: 8px;
    animation: loading1 0.6s infinite;
  }
  .loading div:nth-child(2) {
    left: 8px;
    animation: loading2 0.6s infinite;
  }
  .loading div:nth-child(3) {
    left: 32px;
    animation: loading2 0.6s infinite;
  }
  .loading div:nth-child(4) {
    left: 56px;
    animation: loading3 0.6s infinite;
  }
  @keyframes loading1 {
    0% {
      transform: scale(0);
    }
    100% {
      transform: scale(1);
    }
  }
  @keyframes loading3 {
    0% {
      transform: scale(1);
    }
    100% {
      transform: scale(0);
    }
  }
  @keyframes loading2 {
    0% {
      transform: translate(0, 0);
    }
    100% {
      transform: translate(24px, 0);
    }
  }
  `,e.classList.add("loading"),e.innerHTML="<div></div><div></div><div></div><div></div>",n.appendChild(r),n.appendChild(e)},Sjt=function(t){var n=t.loadingTemplate,e=t.theme,r=e===void 0?"light":e,i=ge.useRef(null);ge.useEffect(function(){!n&&i.current&&wjt(i.current)},[]);var a=function(){return n||ge.createElement("div",{ref:i})};return ge.createElement("div",{className:"charts-loading-container",style:{position:"absolute",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",left:0,top:0,zIndex:99,backgroundColor:r==="dark"?"rgb(20, 20, 20)":"rgb(255, 255, 255)"}},a())},Ojt=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Mjt=function(t){Ojt(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.state={hasError:!1},e.renderError=function(r){var i=e.props.errorTemplate;switch(r){default:return typeof i=="function"?i(r):i||ge.createElement("h5",null,"组件出错了，请核查后重试： ",r.message)}},e}return n.getDerivedStateFromError=function(e){return{hasError:!0,error:e}},n.getDerivedStateFromProps=function(e,r){return r.children!==e.children?{children:e.children,hasError:!1,error:void 0}:null},n.prototype.render=function(){return this.state.hasError?this.renderError(this.state.error):ge.createElement(dt.Fragment,null,this.props.children)},n}(ge.Component),Ajt=globalThis&&globalThis.__spreadArray||function(t,n,e){if(e||arguments.length===2)for(var r=0,i=n.length,a;r<i;r++)(a||!(r in n))&&(a||(a=Array.prototype.slice.call(n,0,r)),a[r]=n[r]);return t.concat(a||Array.prototype.slice.call(n))},Ejt=function(t){return Array.isArray(t)},Tjt=function(t){return t!==null&&typeof t=="object"&&!Ejt(t)},ja=function(t){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];if(!n.length)return t;var r=n.shift();for(var i in r)Object.hasOwnProperty.call(r,i)&&(Tjt(r[i])?((!t[i]||typeof t[i]!="object")&&(t[i]={}),ja(t[i],r[i])):t[i]=r[i]);return ja.apply(void 0,Ajt([t],n,!1))},Cjt=function(t){var n=/react|\.jsx|children:\[\(/i;return n.test(t)},j2=globalThis&&globalThis.__assign||function(){return j2=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++){n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},j2.apply(this,arguments)},AD=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};function Pjt(t,n){var e=dt.useRef(),r=dt.useRef(),i=dt.useRef(null),a=n.onReady,o=n.onEvent,s=function(u,f){var h;u===void 0&&(u="image/png");var d=(h=i.current)===null||h===void 0?void 0:h.getElementsByTagName("canvas")[0];return d==null?void 0:d.toDataURL(u,f)},l=function(u,f,h){u===void 0&&(u="download"),f===void 0&&(f="image/png");var d=u;u.indexOf(".")===-1&&(d="".concat(u,".").concat(f.split("/")[1]));var p=s(f,h),v=document.createElement("a");return v.href=p,v.download=d,document.body.appendChild(v),v.click(),document.body.removeChild(v),v=null,d},c=function(u,f){f===void 0&&(f=!1);var h=Object.keys(u),d=f;h.forEach(function(p){var v=u[p];p==="tooltip"&&(d=!0),Hy(v)&&Cjt("".concat(v))?u[p]=function(){for(var g=[],y=0;y<arguments.length;y++)g[y]=arguments[y];return bjt(v.apply(void 0,g),d)}:Un(v)?v.forEach(function(g){c(g,d)}):Fc(v)&&c(v,d)})};return dt.useEffect(function(){if(e.current&&!VE(r.current,n)){var u=!1;if(r.current){var f=r.current;f.data;var h=AD(f,["data"]);n.data;var d=AD(n,["data"]);u=VE(h,d)}r.current=Tk(n),u?e.current.changeData(yn(n,"data")):(c(n),e.current.update(n),e.current.render())}},[n]),dt.useEffect(function(){if(!i.current)return function(){return null};r.current||(r.current=Tk(n)),c(n);var u=new t(i.current,j2({},n));u.toDataURL=s,u.downloadImage=l,u.render(),e.current=u,a&&a(u);var f=function(h){o&&o(u,h)};return u.on("*",f),function(){e.current&&(e.current.destroy(),e.current.off("*",f),e.current=void 0)}},[]),{chart:e,container:i}}var kjt=function(t){return t!==null&&typeof t!="function"&&isFinite(t.length)};const EV=kjt;var _jt=function(t,n){if(!EV(t))return t;for(var e=[],r=0;r<t.length;r++){var i=t[r];n(i,r)&&e.push(i)}return e};const Ljt=_jt,Ijt=function(t){return typeof t=="function"};var Fjt=function(t){return t==null};const Djt=Fjt;var Rjt={}.toString,Bjt=function(t,n){return Rjt.call(t)==="[object "+n+"]"};const _E=Bjt,wu=function(t){return Array.isArray?Array.isArray(t):_E(t,"Array")},Njt=function(t){var n=typeof t;return t!==null&&n==="object"||n==="function"};function LE(t,n){if(t){var e;if(wu(t))for(var r=0,i=t.length;r<i&&(e=n(t[r],r),e!==!1);r++);else if(Njt(t)){for(var a in t)if(t.hasOwnProperty(a)&&(e=n(t[a],a),e===!1))break}}}var $jt=Object.keys?function(t){return Object.keys(t)}:function(t){var n=[];return LE(t,function(e,r){Ijt(t)&&r==="prototype"||n.push(r)}),n};const jjt=$jt;var zjt=function(t){return typeof t=="object"&&t!==null};const Gjt=zjt;var Yjt=function(t){if(!Gjt(t)||!_E(t,"Object"))return!1;if(Object.getPrototypeOf(t)===null)return!0;for(var n=t;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(t)===n};const $y=Yjt;var Wjt=function(t,n,e){if(!wu(t)&&!$y(t))return t;var r=e;return LE(t,function(i,a){r=n(r,i,a)}),r};const Vjt=Wjt,z2=function(t){return _E(t,"String")};function nb(t,n){for(var e in n)n.hasOwnProperty(e)&&e!=="constructor"&&n[e]!==void 0&&(t[e]=n[e])}function Hjt(t,n,e,r){return n&&nb(t,n),e&&nb(t,e),r&&nb(t,r),t}var Xjt=5;function Ujt(t,n){if(Object.hasOwn)return Object.hasOwn(t,n);if(t==null)throw new TypeError("Cannot convert undefined or null to object");return Object.prototype.hasOwnProperty.call(Object(t),n)}function TV(t,n,e,r){e=e||0,r=r||Xjt;for(var i in n)if(Ujt(n,i)){var a=n[i];a!==null&&$y(a)?($y(t[i])||(t[i]={}),e<r?TV(t[i],a,e+1,r):t[i]=n[i]):wu(a)?(t[i]=[],t[i]=t[i].concat(a)):a!==void 0&&(t[i]=a)}}var qjt=function(t){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];for(var r=0;r<n.length;r+=1)TV(t,n[r]);return t};const og=qjt,qi=function(t,n,e){for(var r=0,i=z2(n)?n.split("."):n;t&&r<i.length;)t=t[i[r++]];return t===void 0||r<i.length?e:t};var Zjt=Object.prototype.hasOwnProperty;const CV=function(t,n){if(t===null||!$y(t))return{};var e={};return LE(n,function(r){Zjt.call(t,r)&&(e[r]=t[r])}),e};function Kjt(t){return Djt(t)?0:EV(t)?t.length:Object.keys(t).length}const Qjt={field:"value",size:[1,1],round:!1,padding:0,sort:(t,n)=>n.value-t.value,as:["x","y"],ignoreParentValue:!0},Jjt="nodeIndex",ld="childNodeCount",tzt="nodeAncestor",rb="Invalid field: it must be a string!";function ezt(t,n){const{field:e,fields:r}=t;if(z2(e))return e;if(wu(e))return console.warn(rb),e[0];if(console.warn(`${rb} will try to get fields instead.`),z2(r))return r;if(wu(r)&&r.length)return r[0];if(n)return n;throw new TypeError(rb)}function nzt(t){const n=[];if(t&&t.each){let e,r;t.each(i=>{var a,o;i.parent!==e?(e=i.parent,r=0):r+=1;const s=Ljt((((a=i.ancestors)===null||a===void 0?void 0:a.call(i))||[]).map(l=>n.find(c=>c.name===l.name)||l),({depth:l})=>l>0&&l<i.depth);i[tzt]=s,i[ld]=((o=i.children)===null||o===void 0?void 0:o.length)||0,i[Jjt]=r,n.push(i)})}else t&&t.eachNode&&t.eachNode(e=>{n.push(e)});return n}function rzt(t,n){n=Hjt({},Qjt,n);const e=n.as;if(!wu(e)||e.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');let r;try{r=ezt(n)}catch(l){console.warn(l)}const a=(l=>pPt().size(n.size).round(n.round).padding(n.padding)(zu(l).sum(c=>Kjt(c.children)?n.ignoreParentValue?0:c[r]-Vjt(c.children,(u,f)=>u+f[r],0):c[r]).sort(n.sort)))(t),o=e[0],s=e[1];return a.each(l=>{var c,u;l[o]=[l.x0,l.x1,l.x1,l.x0],l[s]=[l.y1,l.y1,l.y0,l.y0],l.name=l.name||((c=l.data)===null||c===void 0?void 0:c.name)||((u=l.data)===null||u===void 0?void 0:u.label),l.data.name=l.name,["x0","x1","y0","y1"].forEach(f=>{e.indexOf(f)===-1&&delete l[f]})}),nzt(a)}var izt=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e};const Ic="sunburst",IE="markType",PV="path",jy="ancestor-node";function azt(t){const{data:n,encode:e}=t,{color:r,value:i}=e,o=rzt(n,{field:i,type:"hierarchy.partition",as:["x","y"]}),s=[];return o.forEach(l=>{var c,u,f,h;if(l.depth===0)return null;let d=l.data.name;const p=[d];let v=Object.assign({},l);for(;v.depth>1;)d=`${(c=v.parent.data)===null||c===void 0?void 0:c.name} / ${d}`,p.unshift((u=v.parent.data)===null||u===void 0?void 0:u.name),v=v.parent;const g=Object.assign(Object.assign(Object.assign({},CV(l.data,[i])),{[PV]:d,[jy]:v.data.name}),l);r&&r!==jy&&(g[r]=l.data[r]||((h=(f=l.parent)===null||f===void 0?void 0:f.data)===null||h===void 0?void 0:h[r])),s.push(g)}),s.map(l=>Object.assign(Object.assign({},l),{x:l.x.slice(0,2),y:[l.y[2],l.y[0]],fillOpacity:Math.pow(.85,l.depth)}))}const ED={id:Ic,encode:{x:"x",y:"y",key:PV,color:jy,value:"value"},axis:{x:!1,y:!1},style:{[IE]:Ic,stroke:"#fff",lineWidth:.5,fillOpacity:"fillOpacity",[ld]:ld,depth:"depth"},state:{active:{zIndex:2,stroke:"#000"},inactive:{zIndex:1,stroke:"#fff"}},legend:!1,interaction:{drillDown:!0},coordinate:{type:"polar",innerRadius:.2}},kV=t=>{const{encode:n,data:e=[],legend:r}=t,i=izt(t,["encode","data","legend"]),a=Object.assign(Object.assign({},i.coordinate),{innerRadius:Math.max(qi(i,["coordinate","innerRadius"],.2),1e-5)}),o=Object.assign(Object.assign({},ED.encode),n),{value:s}=o,l=azt({encode:o,data:e});return[og({},ED,Object.assign(Object.assign({type:"rect",data:l,encode:o,tooltip:{title:"path",items:[c=>({name:s,value:c[s]})]}},i),{coordinate:a}))]};kV.props={};var ozt=globalThis&&globalThis.__awaiter||function(t,n,e,r){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(t,n||[])).next())})};const szt=t=>t.querySelectorAll(".element").filter(n=>qi(n,["style",IE])===Ic);function lzt(t){return Ot(t).select(`.${vy}`).node()}const czt={rootText:"root",style:{fill:"rgba(0, 0, 0, 0.85)",fontSize:12,y:1},active:{fill:"rgba(0, 0, 0, 0.5)"}};function uzt(t={}){const{breadCrumb:n={},fixedColor:e=!0}=t,r=og({},czt,n);return i=>{const{update:a,setState:o,container:s,view:l,options:c}=i,u=lzt(s),f=c.marks.find(({id:m})=>m===Ic),{state:h}=f,d=new $n;u.appendChild(d);const p=(m,x)=>ozt(this,void 0,void 0,function*(){if(d.removeChildren(),m){const b=new Fi({style:Object.assign({x:0,text:r.rootText,depth:0},r.style)});d.appendChild(b);let w="";const S=m==null?void 0:m.split(" / ");let O=r.style.y,M=d.getBBox().width;const A=u.getBBox().width,T=S.map((C,P)=>{const _=new Fi({style:Object.assign(Object.assign({x:M,text:" / "},r.style),{y:O})});d.appendChild(_),M+=_.getBBox().width,w=`${w}${C} / `;const k=new Fi({name:w.replace(/\s\/\s$/,""),style:Object.assign(Object.assign({text:C,x:M,depth:P+1},r.style),{y:O})});return d.appendChild(k),M+=k.getBBox().width,M>A&&(O=d.getBBox().height,M=0,_.attr({x:M,y:O}),M+=_.getBBox().width,k.attr({x:M,y:O}),M+=k.getBBox().width),k});[b,...T].forEach((C,P)=>{if(P===T.length)return;const _=Object.assign({},C.attributes);C.attr("cursor","pointer"),C.addEventListener("mouseenter",()=>{C.attr(r.active)}),C.addEventListener("mouseleave",()=>{C.attr(_)}),C.addEventListener("click",()=>{p(C.name,qi(C,["style","depth"]))})})}o("drillDown",b=>{const{marks:w}=b,S=w.map(O=>{if(O.id!==Ic&&O.type!=="rect")return O;const{data:M}=O,A=Object.fromEntries(["color"].map(C=>[C,{domain:l.scale[C].getOptions().domain}])),T=M.filter(C=>{const P=C.path;return e&&(C[jy]=P.split(" / ")[x]),m?new RegExp(`^${m}.+`).test(P):!0});return og({},O,e?{data:T}:{data:T,scale:A})});return Object.assign(Object.assign({},b),{marks:S})}),yield a()}),v=m=>{const x=m.target;if(qi(x,["style",IE])!==Ic||qi(x,["markType"])!=="rect"||!qi(x,["style",ld]))return;const b=qi(x,["__data__","key"]),w=qi(x,["style","depth"]);x.style.cursor="pointer",p(b,w)};u.addEventListener("click",v);const g=jjt(Object.assign(Object.assign({},h.active),h.inactive)),y=()=>{szt(u).forEach(x=>{const b=qi(x,["style",ld]);if(qi(x,["style","cursor"])!=="pointer"&&b){x.style.cursor="pointer";const S=CV(x.attributes,g);x.addEventListener("mouseenter",()=>{x.attr(h.active)}),x.addEventListener("mouseleave",()=>{x.attr(og(S,h.inactive))})}})};return u.addEventListener("mousemove",y),()=>{d.remove(),u.removeEventListener("click",v),u.removeEventListener("mousemove",y)}}}tt.enableCSSParsing=!1;function fzt(){return{"interaction.drillDown":uzt,"mark.sunburst":kV}}var zy=globalThis&&globalThis.__assign||function(){return zy=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++){n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},zy.apply(this,arguments)},hzt=j4t(djt,zy(zy({},mV()),fzt())),cd=globalThis&&globalThis.__assign||function(){return cd=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++){n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},cd.apply(this,arguments)},dzt=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e},pzt=globalThis&&globalThis.__spreadArray||function(t,n,e){if(e||arguments.length===2)for(var r=0,i=n.length,a;r<i;r++)(a||!(r in n))&&(a||(a=Array.prototype.slice.call(n,0,r)),a[r]=n[r]);return t.concat(a||Array.prototype.slice.call(n))},G2=["width","height","renderer","autoFit","canvas","theme","inset","insetLeft","insetRight","insetTop","insetBottom","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","margin","marginTop","marginRight","marginBottom","marginLeft","depth","title","clip"],vzt=["data","type","children","direction"],Y2="__transform__",gzt="__skipDelCustomKeys__",Ls=function(t,n){return QO(n)?{type:t,available:n}:cd({type:t},n)},ud={encode:{xField:"x",yField:"y",colorField:"color",angleField:"y",keyField:"key",sizeField:"size",shapeField:"shape",seriesField:"series",positionField:"position",textField:"text",valueField:"value",binField:"x",srcField:"src"},transform:{stack:function(t){return Ls("stackY",t)},normalize:function(t){return Ls("normalizeY",t)},percent:function(t){return Ls("normalizeY",t)},group:function(t){return Ls("dodgeX",t)},sort:function(t){return Ls("sortX",t)},symmetry:function(t){return Ls("symmetryY",t)},diff:function(t){return Ls("diffY",t)}},scale:{meta:function(t){return t}},labels:{label:function(t){return t}},style:{shape:"shape",connectNulls:function(t){return QO(t)?{connect:t}:t}}},ib=pzt(["xField","yField","seriesField","colorField","keyField","positionField","meta","tooltip","animate"],Object.keys(ud.transform),!0),FE=[{key:"annotations",extend_keys:[]},{key:"line",type:"line",extend_keys:ib},{key:"point",type:"point",extend_keys:ib},{key:"area",type:"area",extend_keys:ib}],yzt=[{key:"transform",callback:function(t,n,e){var r;t[n]=t[n]||[];var i=e.available,a=i===void 0?!0:i,o=dzt(e,["available"]);a?t[n].push(cd((r={},r[Y2]=!0,r),o)):t[n].splice(t[n].indexOf(function(s){return s.type===e.type}),1)}},{key:"labels",callback:function(t,n,e){var r;if(!e||Un(e)){t[n]=e||[];return}e.text||(e.text=t.yField),t[n]=t[n]||[],t[n].push(cd((r={},r[Y2]=!0,r),e))}}],mzt=[{key:"conversionTag",shape:"ConversionTag"},{key:"axisText",shape:"BidirectionalBarAxisText"}],_V=function(){var t=[];return FE.forEach(function(n){t.push(n.key)}),t},xzt=function(){var t=[];Object.keys(ud).forEach(function(e){t.push.apply(t,Object.keys(ud[e]))});var n=_V();return t.push.apply(t,n),t},bzt=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e},de=function(t){var n=Mzt(t),e=n.children,r=e===void 0?[]:e,i=function(f){f.children,f.type,f.data;var h=bzt(f,["children","type","data"]);return JO(h,_V())},a=i(n),o=function(f,h,d){var p;return typeof f=="function"?f(h,d):(p={},p[f]=h,p)},s=function(f){var h;return(h=yzt.find(function(d){return d.key===f}))===null||h===void 0?void 0:h.callback},l=function(f,h,d){var p=s(h);p?p(f,h,d):f[h]=ja({},f[h],d)},c=function(f){Object.keys(f).forEach(function(h){var d=FE.find(function(g){return g.key===h});if(d){var p=d.type,v=d.extend_keys;p?r.push(u(ja({},J0(f,v),{type:p},f[h]))):Un(f[h])&&f[h].forEach(function(g){r.push(u(g))})}})},u=function(f,h){return c(f),Object.keys(ud).forEach(function(d){var p=ud[d];Object.keys(p).forEach(function(v){if(f[v]){var g=o(p[v],f[v],f);l(f,d,g)}Hy(h)&&h(p,d,v)})}),f};return r.forEach(function(f){var h=ja({},a,f);u(ja(f,h))}),c(n),LV(n),t},W2=globalThis&&globalThis.__assign||function(){return W2=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++){n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},W2.apply(this,arguments)};function wzt(t){var n=t.options,e=n.stack,r=n.tooltip,i=n.xField;if(!e)return t;var a=FE.map(function(s){return s.type}).filter(function(s){return!!s}),o=!1;return a.forEach(function(s){n[s]&&(o=!0,Tt(n,[s,"stack"],W2({y1:"y"},typeof e=="object"?e:{})))}),o&&!QO(r)&&!r&&Tt(n,"tooltip",{title:i,items:[{channel:"y"}]}),t}function Qe(t){return se(wzt)(t)}var sh=globalThis&&globalThis.__assign||function(){return sh=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++){n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},sh.apply(this,arguments)},DE=["radius","innerRadius","startAngle","endAngle","focusX","focusY","distortionX","distortionY","visual"];function Jm(t){var n=t.options,e=n.coordinate,r=e===void 0?{}:e;return Tt(t,["options","coordinate"],sh(sh(sh({},r),J0(n,DE)),{outerRadius:yn(n,"radius")})),t}function Szt(t){var n=t.options.layout,e=n===void 0?"horizontal":n;return t.options.coordinate.transform=e!=="horizontal"?void 0:[{type:"transpose"}],t}var TD=globalThis&&globalThis.__spreadArray||function(t,n,e){if(e||arguments.length===2)for(var r=0,i=n.length,a;r<i;r++)(a||!(r in n))&&(a||(a=Array.prototype.slice.call(n,0,r)),a[r]=n[r]);return t.concat(a||Array.prototype.slice.call(n))},LV=function(t,n){var e,r=xzt();return TD(TD([],r,!0),DE,!0).forEach(function(i){delete t[i]}),(e=t.children)===null||e===void 0||e.forEach(function(i){Object.keys(i).forEach(function(a){r.includes(a)&&delete i[a]})}),n&&Object.keys(t).forEach(function(i){vzt.includes(i)||delete t[i]}),t},Ozt=function(t){return Object.keys(t).forEach(function(n){G2.includes(n)&&delete t[n]}),t},Mzt=function(t){var n=t.options,e=n.children,r=e===void 0?[]:e;return r.forEach(function(i){Object.keys(i).forEach(function(a){Un(i[a])&&a!=="data"&&(i[a]=i[a].filter(function(o){return!o[Y2]}))})}),n},Gy=globalThis&&globalThis.__assign||function(){return Gy=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++){n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Gy.apply(this,arguments)},Azt=function(){function t(n,e){this.container=[],e&&(this.chart=n,this.options=e,this.init())}return t.prototype.getElementsLayout=function(){var n=this.canvas.document.getElementsByClassName("element"),e=[];return n.forEach(function(r){var i=r.getBBox(),a=i.x,o=i.y,s=i.width,l=i.height;e.push({bbox:i,x:a,y:o,width:s,height:l,data:r.__data__})}),e},t.prototype.getConversionTagLayout=function(){var n=this.direction==="vertical",e=this.getElementsLayout(),r=e[0],i=r.x,a=r.y,o=r.height,s=r.width,l=r.data,c=["items",0,"value"],u=yn(l,c),f=n?e[1].y-a-o:e[1].x-i-s,h=[],d=this.options,p=d.size,v=p===void 0?40:p,g=d.arrowSize,y=g===void 0?20:g,m=d.spacing,x=m===void 0?4:m;return e.forEach(function(b,w){if(w>0){var S=b.x,O=b.y,M=b.height,A=b.width,T=b.data,C=yn(T,c),P=v/2;if(n){var _=S+A/2,k=O;h.push({points:[[_+P,k-f+x],[_+P,k-y-x],[_,k-x],[_-P,k-y-x],[_-P,k-f+x]],center:[_,k-f/2-x],width:f,value:[u,C]})}else{var _=S,k=O+M/2;h.push({points:[[S-f+x,k-P],[S-y-x,k-P],[_-x,k],[S-y-x,k+P],[S-f+x,k+P]],center:[_-f/2-x,k],width:f,value:[u,C]})}u=C}}),h},t.prototype.init=function(){var n=this.chart.getContext().canvas;this.canvas=n,this.setDirection(),this.drawConversionTag()},t.prototype.setDirection=function(){var n=this.chart.getCoordinate(),e=yn(n,"options.transformations"),r="horizontal";e.forEach(function(i){i.includes("transpose")&&(r="vertical")}),this.direction=r},t.prototype.drawConversionTag=function(){var n=this,e=this.getConversionTagLayout(),r=this.options,i=r.style,a=r.text,o=a.style,s=a.formatter;e.forEach(function(l){var c=l.points,u=l.center,f=l.value,h=f[0],d=f[1],p=u[0],v=u[1],g=new Vd({style:Gy({points:c,fill:"#eee"},i)}),y=new Fi({style:Gy({x:p,y:v,text:Hy(s)?s(h,d):(d/h*100).toFixed(2)+"%",fontSize:12,textBaseline:"middle",textAlign:"center",fill:"#000"},o)});n.canvas.appendChild(g),n.canvas.appendChild(y),n.container.push(g,y)})},t.prototype.update=function(n){},t.prototype.destroy=function(){this.container.forEach(function(n){n.destroy()})},t}(),V2=32,CD=16,PD=48,lh=globalThis&&globalThis.__assign||function(){return lh=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++){n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},lh.apply(this,arguments)},Ezt=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e},Tzt=function(){function t(n,e){this.container=[],e&&(this.chart=n,this.options=e,this.init())}return t.prototype.getElementsLayout=function(){var n=this.options.layout,e=n==="vertical",r=this.canvas.document.getElementsByClassName("element"),i=[];return r.forEach(function(a){var o=a.getBBox(),s=o.x,l=o.y,c=o.width,u=o.height;i.push({bbox:o,x:s,y:l,width:c,height:u,data:a.__data__})}),e?r1(i,"x"):r1(i,"y")},t.prototype.getBidirectionalBarAxisTextLayout=function(){var n=this.options.layout,e=n==="vertical",r=this.getElementsLayout(),i=["title"],a=[],o=yn(this.views,[0,"layout"]),s=o.width,l=o.height;return r.forEach(function(c){var u=c.x,f=c.y,h=c.height,d=c.width,p=c.data,v=yn(p,i);e?a.push({x:u+d/2,y:l,text:v}):a.push({x:s,y:f+h/2,text:v})}),r1(a,"text").length!==a.length&&(a=Object.values(R$(a,"text")).map(function(c){var u,f=c.reduce(function(h,d){return h+(e?d.x:d.y)},0);return lh(lh({},c[0]),(u={},u[e?"x":"y"]=f/c.length,u))})),a},t.prototype.init=function(){var n=this.chart.getContext(),e=n.canvas,r=n.views;this.views=r,this.canvas=e,this.drawBidirectionalBarAxisText()},t.prototype.transformLabelStyle=function(n){var e={},r=/^label[A-Z]/;return Object.keys(n).forEach(function(i){r.test(i)&&(e[i.replace("label","").replace(/^[A-Z]/,function(a){return a.toLowerCase()})]=n[i])}),e},t.prototype.drawBidirectionalBarAxisText=function(){var n=this,e=this.getBidirectionalBarAxisTextLayout(),r=this.options,i=r.layout,a=r.labelFormatter,o=Ezt(r,["layout","labelFormatter"]);e.forEach(function(s){var l=s.x,c=s.y,u=s.text,f=new Fi({style:lh({x:l,y:c,text:Hy(a)?a(u):u,fontSize:12,textBaseline:"middle",textAlign:"center",fill:"#000",wordWrap:!0,wordWrapWidth:i==="horizontal"?V2*2:120,maxLines:2,textOverflow:"ellipsis"},n.transformLabelStyle(o))});n.canvas.appendChild(f),n.container.push(f)})},t.prototype.update=function(n){},t.prototype.destroy=function(){this.container.forEach(function(n){n.destroy()})},t}(),Czt={ConversionTag:Azt,BidirectionalBarAxisText:Tzt},Pzt=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),mc=globalThis&&globalThis.__assign||function(){return mc=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++){n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},mc.apply(this,arguments)},kD="data-chart-source-type",ab=new Map,ee=function(t){Pzt(n,t);function n(e,r){var i=t.call(this)||this;return i.container=typeof e=="string"?document.getElementById(e):e,i.options=ja({},i.getBaseOptions(),i.getDefaultOptions(),r),i.createG2(),i.bindEvents(),i}return n.prototype.getChartOptions=function(){var e=this.options.autoFit,r=e===void 0?!0:e;return mc(mc({},J0(this.options,G2)),{container:this.container,autoFit:r})},n.prototype.getSpecOptions=function(){return this.type==="base"||this[gzt]?mc(mc({},this.options),this.getChartOptions()):LV(JO(this.options,G2),!0)},n.prototype.createG2=function(){if(!this.container)throw Error("The container is not initialized!");this.chart=new hzt(this.getChartOptions()),this.container.setAttribute(kD,"Ant Design Charts")},n.prototype.bindEvents=function(){var e=this;this.chart&&this.chart.on("*",function(r){r!=null&&r.type&&e.emit(r.type,r)})},n.prototype.getBaseOptions=function(){return{type:"view"}},n.prototype.getDefaultOptions=function(){},n.prototype.render=function(){var e=this;this.type!=="base"&&this.execAdaptor(),this.chart.options(this.getSpecOptions()),this.chart.render().then(function(){e.annotations()}),this.bindSizeSensor()},n.prototype.annotations=function(){var e=this;mzt.forEach(function(r){var i=r.key,a=r.shape,o=e.options[i];ab.has(i)&&ab.get(i).destroy(),o&&ab.set(i,new Czt[a](e.chart,o))})},n.prototype.update=function(e){this.updateOption(e)},n.prototype.updateOption=function(e){this.options=ja({},this.options,e)},n.prototype.changeData=function(e){this.chart.changeData(e)},n.prototype.changeSize=function(e,r){this.chart.changeSize(e,r)},n.prototype.destroy=function(){this.chart.destroy(),this.off(),this.container.removeAttribute(kD)},n.prototype.execAdaptor=function(){var e=this.getSchemaAdaptor();e({chart:this.chart,options:Ozt(this.options)})},n.prototype.triggerResize=function(){this.chart.forceFit()},n.prototype.bindSizeSensor=function(){var e=this,r=this.options.autoFit,i=r===void 0?!0:r;i&&this.chart.on(fe.AFTER_CHANGE_SIZE,function(){e.annotations()})},n}(Au),kzt=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),_zt=function(t){kzt(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="base",e}return n.getDefaultOptions=function(){return{type:"view",children:[{type:"line"}]}},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return function(e){return e}},n}(ee);function Lzt(t){return se(Qe,de)(t)}var Izt=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Fzt=function(t){Izt(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="area",e}return n.getDefaultOptions=function(){return{type:"view",children:[{type:"area"}],scale:{y:{nice:!0}},axis:{y:{title:!1},x:{title:!1}},interaction:{tooltip:{shared:!0}}}},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return Lzt},n}(ee),ch=globalThis&&globalThis.__assign||function(){return ch=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++){n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ch.apply(this,arguments)};function IV(t){var n=function(e){var r=e.options;yn(r,"children.length")>1&&Tt(r,"children",[{type:"interval"}]);var i=r.scale,a=r.markBackground,o=r.data,s=r.children,l=yn(i,"y.domain",[]);if(a&&l.length&&Un(o)){var c="domainMax",u=o.map(function(f){var h;return ch(ch({},f),(h={},h[c]=l[l.length-1],h))});s.unshift(ch({type:"interval",data:u,yField:c,tooltip:!1,legend:!1,style:{fill:"#eee"},label:!1},a))}return e};return se(n,Qe,de)(t)}var Dzt=function(){var t=function(n,e){return function(r){var i=n.fill,a=i===void 0?"#2888FF":i,o=n.stroke,s=n.fillOpacity,l=s===void 0?1:s,c=n.strokeOpacity,u=c===void 0?.2:c,f=n.pitch,h=f===void 0?8:f,d=r[0],p=r[1],v=r[2],g=r[3],y=(p[1]-d[1])/2,m=e.document,x=m.createElement("g",{}),b=m.createElement("polygon",{style:{points:[d,[d[0]-h,d[1]+y],[v[0]-h,d[1]+y],g],fill:a,fillOpacity:l,stroke:o,strokeOpacity:u,inset:30}}),w=m.createElement("polygon",{style:{points:[[d[0]-h,d[1]+y],p,v,[v[0]-h,d[1]+y]],fill:a,fillOpacity:l,stroke:o,strokeOpacity:u}}),S=m.createElement("polygon",{style:{points:[d,[d[0]-h,d[1]+y],p,[d[0]+h,d[1]+y]],fill:a,fillOpacity:l-.2}});return x.appendChild(b),x.appendChild(w),x.appendChild(S),x}};bV("shape.interval.bar25D",t)},Rzt=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();Dzt();var Bzt=function(t){Rzt(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="Bar",e}return n.getDefaultOptions=function(){return{type:"view",coordinate:{transform:[{type:"transpose"}]},children:[{type:"interval"}],scale:{y:{nice:!0}},axis:{y:{title:!1},x:{title:!1}},interaction:{tooltip:{shared:!0},elementHighlightByColor:{background:!0}}}},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return IV},n}(ee),Nzt=function(){var t=function(n,e){return function(r){var i=n.fill,a=i===void 0?"#2888FF":i,o=n.stroke,s=n.fillOpacity,l=s===void 0?1:s,c=n.strokeOpacity,u=c===void 0?.2:c,f=n.pitch,h=f===void 0?8:f,d=r[1][0]-r[0][0],p=d/2+r[0][0],v=e.document,g=v.createElement("g",{}),y=v.createElement("polygon",{style:{points:[[r[0][0],r[0][1]],[p,r[1][1]+h],[p,r[3][1]+h],[r[3][0],r[3][1]]],fill:a,fillOpacity:l,stroke:o,strokeOpacity:u,inset:30}}),m=v.createElement("polygon",{style:{points:[[p,r[1][1]+h],[r[1][0],r[1][1]],[r[2][0],r[2][1]],[p,r[2][1]+h]],fill:a,fillOpacity:l,stroke:o,strokeOpacity:u}}),x=v.createElement("polygon",{style:{points:[[r[0][0],r[0][1]],[p,r[1][1]-h],[r[1][0],r[1][1]],[p,r[1][1]+h]],fill:a,fillOpacity:l-.2}});return g.appendChild(m),g.appendChild(y),g.appendChild(x),g}};bV("shape.interval.column25D",t)},$zt=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();Nzt();var jzt=function(t){$zt(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="column",e}return n.getDefaultOptions=function(){return{type:"view",scale:{y:{nice:!0}},interaction:{tooltip:{shared:!0},elementHighlightByColor:{background:!0}},axis:{y:{title:!1},x:{title:!1}},children:[{type:"interval"}]}},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return IV},n}(ee);function zzt(t){var n=function(e){var r=e.options,i=r.annotations,a=i===void 0?[]:i,o=r.children,s=o===void 0?[]:o,l=!1;return s.forEach(function(c,u){var f="child".concat(u,"Scale");Tt(c,"scale.y.key",f);var h=c.annotations,d=h===void 0?[]:h;d.length>0&&(Tt(c,"scale.y.independent",!1),d.forEach(function(p){Tt(p,"scale.y.key",f)})),!l&&a.length>0&&yn(c,"scale.y.independent")===void 0&&(l=!0,Tt(c,"scale.y.independent",!1),a.forEach(function(p){Tt(p,"scale.y.key",f)}))}),e};return se(n,Qe,de)(t)}var Gzt=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),_D=function(t){Gzt(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="DualAxes",e}return n.getDefaultOptions=function(){return{type:"view",axis:{y:{title:!1,tick:!1},x:{title:!1}},scale:{y:{independent:!0,nice:!0}}}},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return zzt},n}(ee);function Yzt(t){var n=function(a){var o=a.options,s=o.xField,l=o.colorField;return l||Tt(o,"colorField",s),a},e=function(a){var o=a.options,s=o.compareField,l=o.transform,c=o.isTransposed,u=c===void 0?!0:c,f=o.coordinate;return l||(s?Tt(o,"transform",[]):Tt(o,"transform",[{type:"symmetryY"}])),!f&&u&&Tt(o,"coordinate",{transform:[{type:"transpose"}]}),a},r=function(a){var o=a.options,s=o.compareField,l=o.seriesField,c=o.data,u=o.children,f=o.yField,h=o.isTransposed,d=h===void 0?!0:h;if(s||l){var p=Object.values(R$(c,function(v){return v[s||l]}));u[0].data=p[0],u.push({type:"interval",data:p[1],yField:function(v){return-v[f]}}),delete o.compareField,delete o.data}return l&&(Tt(o,"type","spaceFlex"),Tt(o,"ratio",[1,1]),Tt(o,"direction",d?"row":"col"),delete o.seriesField),a},i=function(a){var o=a.options,s=o.tooltip,l=o.xField,c=o.yField;return s||Tt(o,"tooltip",{title:!1,items:[function(u){return{name:u[l],value:u[c]}}]}),a};return se(n,e,r,i,Qe,de)(t)}var Wzt=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Vzt=function(t){Wzt(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="column",e}return n.getDefaultOptions=function(){return{type:"view",scale:{x:{padding:0}},animate:{enter:{type:"fadeIn"}},axis:!1,shapeField:"funnel",label:{position:"inside",transform:[{type:"contrastReverse"}]},children:[{type:"interval"}]}},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return Yzt},n}(ee);function Hzt(t){return se(Qe,de)(t)}var Xzt=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Uzt=function(t){Xzt(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="line",e}return n.getDefaultOptions=function(){return{type:"view",scale:{y:{nice:!0}},interaction:{tooltip:{shared:!0}},axis:{y:{title:!1},x:{title:!1}},children:[{type:"line"}]}},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return Hzt},n}(ee);function qzt(t){return se(Jm,de)(t)}var Zzt=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Kzt=function(t){Zzt(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="pie",e}return n.getDefaultOptions=function(){return{type:"view",children:[{type:"interval"}],coordinate:{type:"theta"},transform:[{type:"stackY",reverse:!0}],animate:{enter:{type:"waveIn"}}}},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return qzt},n}(ee);function Qzt(t){return se(Qe,de)(t)}var Jzt=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),t6t=function(t){Jzt(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="scatter",e}return n.getDefaultOptions=function(){return{axis:{y:{title:!1},x:{title:!1}},legend:{size:!1},children:[{type:"point"}]}},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return Qzt},n}(ee);function e6t(t){var n=function(e){return Tt(e,"options.coordinate",{type:yn(e,"options.coordinateType","polar")}),e};return se(n,Jm,de)(t)}var n6t=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),r6t=function(t){n6t(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="radar",e}return n.getDefaultOptions=function(){return{axis:{x:{grid:!0,line:!0},y:{zIndex:1,title:!1,line:!0,nice:!0}},meta:{x:{padding:.5,align:0}},interaction:{tooltip:{style:{crosshairsLineDash:[4,4]}}},children:[{type:"line"}],coordinateType:"polar"}},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return e6t},n}(ee),Pa=globalThis&&globalThis.__assign||function(){return Pa=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++){n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Pa.apply(this,arguments)},i6t="__stock-range__",a6t="trend",o6t="up",s6t="down";function l6t(t){var n=function(r){var i=r.options,a=i.data,o=i.yField;return r.options.data=Qc(a,function(s){var l=s&&Pa({},s);if(Array.isArray(o)&&l){var c=o[0],u=o[1],f=o[2],h=o[3];l[a6t]=l[c]<=l[u]?o6t:s6t,l[i6t]=[l[c],l[u],l[f],l[h]]}return l}),r},e=function(r){var i=r.options,a=i.xField,o=i.yField,s=i.fallingFill,l=i.risingFill,c=o[0],u=o[1],f=o[2],h=o[3];return r.options.children=Qc(r.options.children,function(d,p){var v=p===0;return Pa(Pa({},d),{tooltip:{title:function(g){return g[a]instanceof Date?g[a].toLocaleString():g[a]},items:[{field:f},{field:h},{field:c},{field:u}]},encode:Pa(Pa({},d.encode||{}),{y:v?[f,h]:[c,u],color:function(g){return Math.sign(g[u]-g[c])}}),style:Pa(Pa({},d.style||{}),{lineWidth:v?1:10})})}),delete i.yField,r.options.legend={color:!1},s&&Tt(r,"options.scale.color.range[0]",s),l&&Tt(r,"options.scale.color.range[2]",l),r};return se(n,e,de)(t)}var c6t=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),u6t=["#26a69a","#999999","#ef5350"],f6t=function(t){c6t(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="stock",e}return n.getDefaultOptions=function(){return{type:"view",scale:{color:{domain:[-1,0,1],range:u6t},y:{nice:!0}},children:[{type:"link"},{type:"link"}],axis:{x:{title:!1,grid:!1},y:{title:!1,grid:!0,gridLineDash:null}},animate:{enter:{type:"scaleInY"}},interaction:{tooltip:{shared:!0,marker:!1,groupName:!1,crosshairs:!0}}}},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return l6t},n}(ee);function h6t(t){return se(Qe,de)(t)}var d6t=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),p6t=function(t){d6t(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="TinyLine",e}return n.getDefaultOptions=function(){return{type:"view",children:[{type:"line",axis:!1}],autoFit:!1,animate:{enter:{type:"growInX",duration:500}},padding:0,margin:0,tooltip:!1}},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return h6t},n}(ee);function v6t(t){return se(Qe,de)(t)}var g6t=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),y6t=function(t){g6t(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="TinyArea",e}return n.getDefaultOptions=function(){return{type:"view",animate:{enter:{type:"growInX",duration:500}},children:[{type:"area",axis:!1}],autoFit:!1,padding:0,margin:0,tooltip:!1}},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return v6t},n}(ee);function m6t(t){return se(Qe,de)(t)}var x6t=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),b6t=function(t){x6t(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="TinyColumn",e}return n.getDefaultOptions=function(){return{type:"view",children:[{type:"interval",axis:!1}],autoFit:!1,padding:0,margin:0,tooltip:!1}},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return m6t},n}(ee),H2=globalThis&&globalThis.__assign||function(){return H2=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++){n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},H2.apply(this,arguments)};function w6t(t){var n=function(e){var r=e.options,i=r.percent,a=r.color,o=a===void 0?[]:a;if(!i)return e;var s={scale:{color:{range:o.length?o:[]}},data:[1,i]};return Object.assign(r,H2({},s)),e};return se(n,Qe,de)(t)}var S6t=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),O6t=function(t){S6t(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="TinyProgress",e}return n.getDefaultOptions=function(){return{type:"view",data:[],autoFit:!1,margin:0,padding:0,tooltip:!1,children:[{interaction:{tooltip:!1},coordinate:{transform:[{type:"transpose"}]},type:"interval",axis:!1,legend:!1,encode:{y:function(e){return e},color:function(e,r){return r}}}]}},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return w6t},n}(ee),X2=globalThis&&globalThis.__assign||function(){return X2=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++){n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},X2.apply(this,arguments)};function M6t(t){var n=function(r){var i=r.options,a=i.radius,o=a===void 0?.8:a;return Tt(r,"options.coordinate.innerRadius",o),r},e=function(r){var i=r.options,a=i.percent,o=i.color,s=o===void 0?[]:o;if(!a)return r;var l={scale:{color:{range:s.length?s:[]}},data:[1,a]};return Object.assign(i,X2({},l)),r};return se(n,e,Qe,de)(t)}var A6t=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),E6t=function(t){A6t(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="TinyRing",e}return n.getDefaultOptions=function(){return{type:"view",data:[],autoFit:!1,margin:0,padding:0,coordinate:{type:"theta"},animate:{enter:{type:"waveIn"}},interaction:{tooltip:!1},tooltip:!1,children:[{type:"interval",axis:!1,legend:!1,encode:{y:function(e){return e},color:function(e,r){return r}}}]}},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return M6t},n}(ee);function T6t(t){return se(Jm,de)(t)}var C6t=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),P6t=function(t){C6t(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="rose",e}return n.getDefaultOptions=function(){return{type:"view",children:[{type:"interval"}],coordinate:{type:"polar"},animate:{enter:{type:"waveIn"}}}},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return T6t},n}(ee),ob="__start__",tc="__end__",U2="__waterfall_value__",q2=globalThis&&globalThis.__assign||function(){return q2=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++){n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},q2.apply(this,arguments)},k6t=globalThis&&globalThis.__spreadArray||function(t,n,e){if(e||arguments.length===2)for(var r=0,i=n.length,a;r<i;r++)(a||!(r in n))&&(a||(a=Array.prototype.slice.call(n,0,r)),a[r]=n[r]);return t.concat(a||Array.prototype.slice.call(n))};function _6t(t){var n=function(r){var i=r.options,a=i.data,o=a===void 0?[]:a,s=i.yField;return o.length&&(o.reduce(function(l,c,u){var f;if(u===0||c.isTotal)c[ob]=0,c[tc]=c[s],c[U2]=c[s];else{var h=(f=l[tc])!==null&&f!==void 0?f:l[s];c[ob]=h,c[tc]=h+c[s],c[U2]=l[tc]}return c},[]),Object.assign(i,{yField:[ob,tc]})),r},e=function(r){var i=r.options,a=i.data,o=a===void 0?[]:a,s=i.xField,l=i.children,c=i.linkStyle,u=k6t([],o,!0);return u.reduce(function(f,h,d){return d>0&&(h.x1=f[s],h.x2=h[s],h.y1=f[tc]),h},[]),u.shift(),l.push({type:"link",xField:["x1","x2"],yField:"y1",zIndex:-1,data:u,style:q2({stroke:"#697474"},c),label:!1,tooltip:!1}),r};return se(n,e,Qe,de)(t)}var L6t=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),I6t=function(t){L6t(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="waterfall",e}return n.getDefaultOptions=function(){return{type:"view",legend:null,tooltip:{field:U2,valueFormatter:"~s",name:"value"},axis:{y:{title:null,labelFormatter:"~s"},x:{title:null}},children:[{type:"interval",interaction:{elementHighlightByColor:{background:!0}}}]}},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return _6t},n}(ee);function F6t(t){var n=function(e){var r=e.options,i=r.data,a=r.binNumber,o=r.binWidth,s=r.children,l=r.channel,c=l===void 0?"count":l,u=yn(s,"[0].transform[0]",{});return Jc(o)?(xk(u,{thresholds:cpt($vt(i.length,o)),y:c}),e):(Jc(a)&&xk(u,{thresholds:a,y:c}),e)};return se(n,Qe,de)(t)}var D6t=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),R6t=function(t){D6t(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="Histogram",e}return n.getDefaultOptions=function(){return{type:"view",autoFit:!0,axis:{y:{title:!1},x:{title:!1}},children:[{type:"rect",transform:[{type:"binX",y:"count"}],interaction:{elementHighlightByColor:{background:!0}}}]}},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return F6t},n}(ee);function B6t(t){var n=function(r){var i=r.options,a=i.tooltip,o=i.colorField,s=i.sizeField;return a.field||(a.field=o||s),r},e=function(r){var i=r.options,a=i.mark,o=i.children;return a&&(o[0].type=a),r};return se(n,e,Qe,de)(t)}var N6t=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),$6t=function(t){N6t(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="heatmap",e}return n.getDefaultOptions=function(){return{type:"view",legend:null,tooltip:{valueFormatter:"~s"},axis:{y:{title:null,grid:!0},x:{title:null,grid:!0}},children:[{type:"point",interaction:{elementHighlightByColor:{background:!0}}}]}},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return B6t},n}(ee);function j6t(t){var n=function(e){var r=e.options.boxType,i=r===void 0?"box":r;return e.options.children[0].type=i,e};return se(n,Qe,de)(t)}var z6t=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),G6t=function(t){z6t(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="box",e}return n.getDefaultOptions=function(){return{type:"view",children:[{type:"box"}],axis:{y:{title:!1},x:{title:!1}},tooltip:{items:[{name:"min",channel:"y"},{name:"q1",channel:"y1"},{name:"q2",channel:"y2"},{name:"q3",channel:"y3"},{name:"max",channel:"y4"}]}}},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return j6t},n}(ee);function Y6t(t){return se(Qe,de)(t)}var W6t=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),V6t=function(t){W6t(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="sankey",e}return n.getDefaultOptions=function(){return{type:"view",children:[{type:"sankey"}]}},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return Y6t},n}(ee),Ti=globalThis&&globalThis.__assign||function(){return Ti=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++){n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ti.apply(this,arguments)},sg=["#f0efff","#5B8FF9","#3D76DD"];function sb(t,n,e,r){r===void 0&&(r=!0);var i=0,a=!1,o=Qc(t,function(s){var l,c,u=yn(s,[n]);if(agt(u))return[];if(B$(u)){var f=Number(u);return isNaN(f)?[]:(l={},l[e]=s[e],l[n]=f,l)}return Un(u)?(a=!0,i=Math.max(i,u.length),Qc(r?u.sort(function(h,d){return d-h}):u,function(h,d){var p;return p={},p[e]=s[e],p[n]=h,p.index=d,p})):(i=Math.max(1,i),c={},c[e]=s[e],c[n]=u,c)}).flat();return a?[o.map(function(s){return Ti({index:0},s)}),i]:[o,i]}function lb(t,n){return new Array(t).fill("").map(function(e,r){return Un(n)?n[r%n.length]:n})}function H6t(t){var n=function(i){var a=i.options,o=a.color,s=a.rangeField,l=s===void 0?"ranges":s,c=a.measureField,u=c===void 0?"measures":c,f=a.targetField,h=f===void 0?"targets":f,d=a.xField,p=d===void 0?"title":d,v=a.mapField,g=a.data,y=sb(g,l,p),m=y[0],x=y[1],b=sb(g,u,p,!1),w=b[0],S=b[1],O=sb(g,h,p,!1),M=O[0],A=O[1],T=yn(o,[l],sg[0]),C=yn(o,[u],sg[1]),P=yn(o,[h],sg[2]),_=[lb(x,T),lb(S,C),lb(A,P)].flat();return i.options.children=Qc(i.options.children,function(k,I){var L=[m,w,M][I],F=[l,u,h][I];return Ti(Ti({},k),{data:L,encode:Ti(Ti({},k.encode||{}),{x:p,y:F,color:function(B){var D=B.index,N=Jc(D)?"".concat(F,"_").concat(D):F;return v?yn(v,[F,D],N):N}}),style:Ti(Ti({},k.style||{}),{zIndex:function(B){return-B[F]}}),labels:I!==0?Qc(k.labels,function(B){return Ti(Ti({},B),{text:F})}):void 0})}),i.options.scale.color.range=_,i.options.legend.color.itemMarker=function(k){return v&&egt(v==null?void 0:v[h],k)||(k==null?void 0:k.replace(/\_\d$/,""))===h?"line":"square"},i},e=function(i){var a=i.options.layout,o=a===void 0?"horizontal":a;return o!=="horizontal"&&Tt(i,"options.children[2].shapeField","hyphen"),i},r=function(i){var a=i.options,o=a.range,s=o===void 0?{}:o,l=a.measure,c=l===void 0?{}:l,u=a.target,f=u===void 0?{}:u,h=a.children;return i.options.children=[s,c,f].map(function(d,p){return ja(h[p],d)}),i};return se(n,e,r,Szt,de)(t)}var X6t=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),U6t=function(t){X6t(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="bullet",e}return n.getDefaultOptions=function(){return{type:"view",scale:{color:{range:sg}},legend:{color:{itemMarker:function(e){return e==="target"?"line":"square"}}},axis:{y:{title:!1},x:{title:!1}},children:[{type:"interval",style:{maxWidth:30},axis:{y:{grid:!0,gridLineWidth:2}}},{type:"interval",style:{maxWidth:20},transform:[{type:"stackY"}]},{type:"point",encode:{size:8,shape:"line"}}],interaction:{tooltip:{shared:!0}},coordinate:{transform:[{type:"transpose"}]}}},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return H6t},n}(ee);function q6t(t){var n=function(e){var r=e.options.data;return e.options.data={value:r},e};return se(n,Qe,de)(t)}var Z6t=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),K6t=function(t){Z6t(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="Gauge",e}return n.getDefaultOptions=function(){return{type:"view",legend:!1,children:[{type:"gauge"}]}},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return q6t},n}(ee);function Q6t(t){var n=function(e){var r=e.options.percent;return Jc(r)&&Tt(e,"options.data",r),e};return se(n,Qe,de)(t)}var J6t=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),t8t=function(t){J6t(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="Liquid",e}return n.getDefaultOptions=function(){return{type:"view",children:[{type:"liquid"}]}},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return Q6t},n}(ee);function e8t(t){return se(Qe,de)(t)}var n8t=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),r8t=function(t){n8t(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="WordCloud",e}return n.getDefaultOptions=function(){return{type:"view",legend:!1,children:[{type:"wordCloud"}]}},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return e8t},n}(ee);function i8t(t){var n=function(e){var r=e.options,i=r.data;return i&&Tt(r,"data",{value:i}),e};return se(n,Qe,de)(t)}var a8t=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),o8t=function(t){a8t(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="treemap",e}return n.getDefaultOptions=function(){return{type:"view",children:[{type:"treemap"}]}},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return i8t},n}(ee),So=globalThis&&globalThis.__assign||function(){return So=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++){n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},So.apply(this,arguments)};function s8t(t){var n=function(i){var a=i.options,o=a.startAngle,s=a.maxAngle,l=a.coordinate,c=a.radius,u=a.innerRadius,f=Jc(o)?o/(2*Math.PI)*360:-90,h=Jc(s)?(Number(s)+f)/180*Math.PI:Math.PI;return Tt(i,["options","coordinate"],So(So(So({},l),J0(a.coordinate,DE)),{endAngle:h,outerRadius:c,innerRadius:u,startAngle:o??-Math.PI/2})),i},e=function(i){var a=i.options,o=a.tooltip,s=a.xField,l=a.yField;return o||Tt(a,"tooltip",{title:!1,items:[function(c){return{name:c[s],value:c[l]}}]}),i},r=function(i){var a=i.options,o=a.markBackground,s=a.children,l=a.scale,c=a.coordinate,u=a.xField,f=yn(l,"y.domain",[]);return o&&s.unshift(So({type:"interval",xField:u,yField:f[f.length-1],colorField:o.color,scale:{color:{type:"identity"}},style:{fillOpacity:o.opacity,fill:o.color?void 0:"#e0e4ee"},coordinate:So(So({},c),{startAngle:-Math.PI/2,endAngle:1.5*Math.PI}),animate:!1},o)),i};return se(n,e,r,Qe,de)(t)}var l8t=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),c8t=function(t){l8t(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="radial",e}return n.getDefaultOptions=function(){return{type:"view",children:[{type:"interval"}],coordinate:{type:"radial",innerRadius:.1,outerRadius:1,endAngle:Math.PI},animate:{enter:{type:"waveIn",duration:800}},axis:{y:{nice:!0,labelAutoHide:!0,labelAutoRotate:!1},x:{title:!1,nice:!0,labelAutoRotate:!1,labelAutoHide:{type:"equidistance",cfg:{minGap:6}}}}}},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return s8t},n}(ee);function u8t(t){return se(de)(t)}var f8t=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),h8t=function(t){f8t(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="CirclePacking",e}return n.getDefaultOptions=function(){return{legend:!1,type:"view",children:[{type:"pack"}]}},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return u8t},n}(ee),Yy=globalThis&&globalThis.__assign||function(){return Yy=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++){n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Yy.apply(this,arguments)};function d8t(t){var n=function(e){var r=e.options,i=r.xField,a=r.yField,o=r.seriesField,s=r.children,l=s==null?void 0:s.map(function(c){return Yy(Yy({},c),{xField:i,yField:a,seriesField:o,colorField:o,data:c.type==="density"?{transform:[{type:"kde",field:a,groupBy:[i,o]}]}:c.data})}).filter(function(c){return r.violinType!=="density"||c.type==="density"});return Tt(r,"children",l),r.violinType==="polar"&&Tt(r,"coordinate",{type:"polar"}),Tt(r,"violinType",void 0),e};return se(n,Qe,de)(t)}var p8t=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),v8t=function(t){p8t(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="violin",e}return n.getDefaultOptions=function(){return{type:"view",children:[{type:"density",sizeField:"size",tooltip:!1},{type:"boxplot",shapeField:"violin",style:{opacity:.5,point:!1}}],animate:{enter:{type:"fadeIn"}}}},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return d8t},n}(ee),uh=globalThis&&globalThis.__assign||function(){return uh=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++){n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},uh.apply(this,arguments)},g8t=globalThis&&globalThis.__spreadArray||function(t,n,e){if(e||arguments.length===2)for(var r=0,i=n.length,a;r<i;r++)(a||!(r in n))&&(a||(a=Array.prototype.slice.call(n,0,r)),a[r]=n[r]);return t.concat(a||Array.prototype.slice.call(n))};function y8t(t){var n=function(a){var o=a.options,s=o.yField,l=o.children;return l.forEach(function(c,u){Tt(c,"yField",s[u])}),a},e=function(a){var o=a.options,s=o.yField,l=o.children,c=o.data;if(C$(c))return a;var u=Un(yn(c,[0]))?c:[c,c];return l.forEach(function(f,h){Tt(f,"data",g8t([],u[h].map(function(d){return uh({groupKey:s[h]},d)}),!0))}),a},r=function(a){var o=a.options,s=o.yField,l=s[0],c=s[1],u=o.tooltip;return u||Tt(o,"tooltip",{items:[{field:l,value:l},{field:c,value:c}]}),a},i=function(a){var o=a.options,s=o.children,l=o.layout,c=o.coordinate.transform,u=o.paddingBottom,f=u===void 0?PD:u,h=o.paddingLeft,d=h===void 0?PD:h,p=o.axis;Tt(o,"axisText",uh(uh({},(p==null?void 0:p.x)||{}),{layout:l}));var v=s[0],g=s[1];if(l==="vertical")Tt(o,"direction","col"),Tt(o,"paddingLeft",d),Tt(o,"coordinate.transform",c.filter(function(w){return w.type!=="transpose"})),Tt(v,"paddingBottom",CD),Tt(g,"paddingTop",CD),Tt(g,"axis",{x:{position:"top"}}),Tt(g,"scale",{y:{range:[0,1]}});else{Tt(o,"paddingBottom",f),Tt(v,"scale",{y:{range:[0,1]}});var y=v.paddingRight,m=y===void 0?V2:y,x=g.paddingLeft,b=x===void 0?V2:x;Tt(v,"paddingRight",m),Tt(v,"axis",{x:{position:"right"}}),Tt(g,"paddingLeft",b)}return a};return se(n,e,r,i,Qe,de)(t)}var m8t=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),x8t=function(t){m8t(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="BidirectionalBar",e}return n.getDefaultOptions=function(){return{type:"spaceFlex",coordinate:{transform:[{type:"transpose"}]},scale:{y:{nice:!0}},direction:"row",layout:"horizontal",legend:!1,axis:{y:{title:!1},x:{title:!1,label:!1}},children:[{type:"interval"},{type:"interval"}]}},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return y8t},n}(ee),nl;(function(t){t.color="key",t.d="path"})(nl||(nl={}));function b8t(t){var n=function(e){var r=e.options,i=r.data,a=r.setsField,o=r.sizeField;return Un(i)&&(Tt(r,"data",{type:"inline",value:i,transform:[{type:"venn",sets:a,size:o,as:[nl.color,nl.d]}]}),Tt(r,"colorField",a),Tt(r,["children","0","encode","d"],nl.d)),Tt(e,"options",JO(r,["sizeField","setsField"])),e};return se(n,de)(t)}var w8t=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),S8t=function(t){w8t(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="venn",e}return n.getDefaultOptions=function(){return{type:"view",children:[{type:"path"}],legend:{color:{itemMarker:"circle"}},encode:{color:nl.color,d:nl.d}}},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return b8t},n}(ee);function O8t(t){var n=function(e){return e};return se(n,Jm,de)(t)}var M8t=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),A8t=function(t){M8t(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="Sunburst",e}return n.getDefaultOptions=function(){return{type:"view",children:[{type:"sunburst"}]}},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return O8t},n}(ee),E8t={Base:_zt,Line:Uzt,Column:jzt,Pie:Kzt,Area:Fzt,Bar:Bzt,DualAxes:_D,Funnel:Vzt,Scatter:t6t,Radar:r6t,Rose:P6t,Stock:f6t,TinyLine:p6t,TinyArea:y6t,TinyColumn:b6t,TinyProgress:O6t,TinyRing:E6t,Waterfall:I6t,Histogram:R6t,Heatmap:$6t,Box:G6t,Sankey:V6t,Bullet:U6t,Gauge:K6t,Liquid:t8t,WordCloud:r8t,Treemap:o8t,RadialBar:c8t,CirclePacking:h8t,Violin:v8t,BidirectionalBar:x8t,Venn:S8t,Mix:_D,Sunburst:A8t},LD=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e},T8t=dt.forwardRef(function(t,n){var e=t.chartType,r=e===void 0?"Base":e,i=LD(t,["chartType"]),a=i.containerStyle,o=a===void 0?{height:"inherit"}:a,s=i.className,l=i.loading,c=i.loadingTemplate,u=i.errorTemplate,f=LD(i,["containerStyle","className","loading","loadingTemplate","errorTemplate"]),h=Pjt(E8t[r],f),d=h.chart,p=h.container;return dt.useImperativeHandle(n,function(){return d.current}),ge.createElement(Mjt,{errorTemplate:u},l&&ge.createElement(Sjt,{loadingTemplate:c}),ge.createElement("div",{className:s,style:o,ref:p}))}),Z2=globalThis&&globalThis.__assign||function(){return Z2=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++){n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Z2.apply(this,arguments)},C8t=function(t){return ge.createElement(T8t,Z2({},t,{chartType:"Column"}))};const P8t=C8t,X8t=()=>hn.jsx(OH,{children:hn.jsxs(MH,{resource:"dashboards",action:"list",fallback:hn.jsx(NH,{message:"You have no rights to my dashboard",type:"info",showIcon:!0}),children:[hn.jsxs(HE,{gutter:24,style:{marginBottom:"20px"},children:[hn.jsx(i1,{className:"gutter-row",span:12,children:hn.jsx(k8t,{})}),hn.jsx(i1,{className:"gutter-row",span:12,children:hn.jsx(_8t,{})})]}),hn.jsx(HE,{gutter:24,children:hn.jsx(i1,{className:"gutter-row",span:12,children:hn.jsx(L8t,{})})})]})}),k8t=()=>{const t=eS(),[n,e]=dt.useState([]),{data:r,isLoading:i}=zD({url:"/base/containers/reports/stock-levels",method:"get"});dt.useEffect(()=>{var o;e(((o=r==null?void 0:r.data)==null?void 0:o.data)||[])},[r,i]);const a={data:n,height:400,angleField:"count",colorField:"name",radius:.8,label:{type:"outer",content:"{name} {percentage}"},interactions:[{type:"pie-legend-active"},{type:"element-active"}]};return hn.jsx(nS,{headStyle:{backgroundColor:"#b0cdf7",color:"#151414"},title:hn.jsx("div",{style:{textAlign:"center"},children:t("dashboards.reports.containers_stock_level")}),hoverable:!0,children:hn.jsx(l4,{...a})})},_8t=()=>{const t=eS(),[n,e]=dt.useState([]),{data:r,isLoading:i}=zD({url:"/base/containers/reports/approvals",method:"get"});dt.useEffect(()=>{var l;const s=(((l=r==null?void 0:r.data)==null?void 0:l.data)||[]).map(c=>{let u="Approved";switch(c.name){case"1":u="Approved";break;case"2":u="Rejected";break;case"3":u="Waiting";break;default:u="Unknown"}return{name:u,count:c.count}});e(s)},[r,i]);const a={appendPadding:10,data:n,angleField:"count",colorField:"name",radius:.8,label:{type:"outer",content:"{name} {percentage}"},interactions:[{type:"pie-legend-active"},{type:"element-active"}]};return hn.jsx(nS,{headStyle:{backgroundColor:"#b0cdf7",color:"#151414"},title:hn.jsx("div",{style:{textAlign:"center"},children:t("dashboards.reports.containers_approval")}),hoverable:!0,children:hn.jsx(l4,{...a})})},L8t=()=>{const t=eS(),[n,e]=dt.useState([]);dt.useEffect(()=>{r()},[]);const r=()=>{let o=[{name:"FINISHED GOODS",count:2120340},{name:"SEMI FINISHED GOODS",count:590090},{name:"Additive",count:22022},{name:"Raw Material",count:590291},{name:"Polybag",count:263933},{name:"Carton Box",count:31333},{name:"Master Batch",count:103123},{name:"BOP",count:157430}].map(s=>({"Material Name":AH(s.name),"Inventory Count":s.count}));e(o)},i={data:n,yField:"Inventory Count",xField:"Material Name",xAxis:{label:{autoRotate:!1}},slider:{start:.1,end:.15}};return hn.jsx(nS,{headStyle:{backgroundColor:"#b0cdf7",color:"#151414"},title:hn.jsx("div",{style:{textAlign:"center"},children:t("dashboards.reports.current_inventory_status")}),hoverable:!0,children:hn.jsx(P8t,{...i})})};export{X8t as SimpleDashboard,X8t as default};
