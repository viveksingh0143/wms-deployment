import{_ as g,r as o,T as S,$ as b,j as e,V as v,F as a,m as q,n as p,S as x,aA as _,I as c,C as I,f as T,i as w}from"./index-7ade8dfe.js";import{g as E}from"./commonfn-85cf86f5.js";import{Q as F}from"./index-0a8895bc.js";import{S as z}from"./index-ef404e1a.js";const V=()=>{const t=g(),[i,d]=o.useState(),[l,j]=o.useState(),{formProps:n,saveButtonProps:h}=S(),{data:s,refetch:u,isFetchedAfterMount:m}=b({resource:"containers",config:{filters:[{field:"container_type",operator:"eq",value:l}],sort:[{field:"id",order:"desc"}],pagination:{current:1,pageSize:1}},queryOptions:{enabled:!1}});o.useEffect(()=>{l&&u()},[l,u]),o.useEffect(()=>{var r;if(m&&(s!=null&&s.data)&&(s==null?void 0:s.data.length)>0){const y=s.data[0],f=E(y.code);(r=n==null?void 0:n.form)==null||r.setFieldsValue({code:f}),d(f)}},[s,n.form,m]);const C=r=>{"code"in r?d(r.code):"container_type"in r&&j(r.container_type)};return e.jsx(v,{saveButtonProps:h,children:e.jsx(a,{...n,initialValues:{status:1},onValuesChange:C,layout:"vertical",children:e.jsxs(q,{gutter:24,children:[e.jsxs(p,{span:12,children:[e.jsx(a.Item,{label:t("containers.fields.container_type"),name:["container_type"],rules:[{required:!0}],children:e.jsx(x,{allowClear:!0,options:_,placeholder:t("containers.fields.container_type")})}),e.jsx(a.Item,{label:t("containers.fields.name"),name:["name"],rules:[{required:!0,max:50}],children:e.jsx(c,{})}),e.jsx(a.Item,{label:t("containers.fields.code"),name:["code"],rules:[{required:!0,max:8}],children:e.jsx(c,{})}),e.jsx(a.Item,{label:t("containers.fields.address"),name:["address"],children:e.jsx(c.TextArea,{})}),e.jsx(a.Item,{hidden:!0,label:t("containers.fields.status"),name:["status"],rules:[{required:!0}],children:e.jsx(x,{allowClear:!0,options:I,placeholder:t("containers.fields.status")})})]}),e.jsx(p,{span:12,children:i?e.jsxs(T,{direction:"vertical",align:"center",children:[e.jsx(F,{errorLevel:"H",size:300,iconSize:300/4,value:i,icon:"/images/berry-global.png"}),e.jsx("strong",{children:i})]}):e.jsx(w,{bordered:!1,children:e.jsx(z,{title:t("common.qrcode"),value:t("common.not_available"),precision:2,valueStyle:{color:"#3f8600"}})})})]})})})};export{V as ContainerCreate,V as default};
