import{_ as b,a as w,b as O,c as F,P as R,d as n,j as e,e as _,G as k,f as g,D as z,H as D,h as N,Y as A,r as B,i as C,F as i,I,B as j,k as f,l as y,m as K,n as m,o as P,S as G,C as H,p as M}from"./index-7ade8dfe.js";const{RangePicker:Y}=M,J=()=>{const a=b(),{tableProps:t,searchFormProps:r}=w({syncWithLocation:!0,onSearch:s=>{const l=[],{q:p,name:c,code:u,status:v,createdAt:x}=s;return l.push({field:"query",operator:"eq",value:p},{field:"name",operator:"eq",value:c},{field:"code",operator:"eq",value:u},{field:"status",operator:"eq",value:v},{field:"createdAt",operator:"gte",value:x?x[0].toISOString():void 0},{field:"createdAt",operator:"lte",value:x?x[1].toISOString():void 0}),l}}),{triggerExport:d,isLoading:h}=O({mapData:s=>({id:s.id,name:s.name,code:s.code,status:s.status})}),[o,S]=F.useState([]),{mutate:L,isLoading:q}=R(),E=()=>{L({resource:"machines",ids:o.map(String)},{onSuccess:()=>{S([])}})},T={selectedRowKeys:o,onChange:s=>{S(s)},selections:[n.SELECTION_ALL,n.SELECTION_INVERT,n.SELECTION_NONE]};return e.jsxs(_,{headerButtons:({defaultButtons:s})=>e.jsxs(e.Fragment,{children:[s,e.jsx(k,{onClick:d,loading:h})]}),headerProps:{subTitle:e.jsx(g,{children:e.jsx(z,{selectedKeys:o,isLoading:q,onDelete:E})})},children:[e.jsx(U,{formProps:r}),e.jsxs(n,{...t,rowSelection:T,rowKey:"id",pagination:{...t.pagination,showSizeChanger:!0},children:[e.jsx(n.Column,{title:a("table.s_no"),render:(s,l,p)=>{let c=1,u=10;return typeof t.pagination=="object"&&(c=t.pagination.current??1,u=t.pagination.pageSize??10),(c-1)*u+p+1}},"index"),e.jsx(n.Column,{dataIndex:"name",title:a("machines.fields.name"),sorter:!0}),e.jsx(n.Column,{dataIndex:"code",title:a("machines.fields.code"),sorter:!0}),e.jsx(n.Column,{dataIndex:"status",title:a("machines.fields.status"),sorter:!0}),e.jsx(n.Column,{title:a("table.actions"),dataIndex:"actions",render:(s,l)=>e.jsxs(g,{children:[e.jsx(D,{hideText:!0,size:"small",recordItemId:l.id}),e.jsx(N,{hideText:!0,size:"small",recordItemId:l.id}),e.jsx(A,{hideText:!0,size:"small",recordItemId:l.id})]})})]})]})},U=({formProps:a})=>{const t=b(),[r,d]=B.useState(!0),h=()=>e.jsx(C,{title:e.jsx(i,{layout:"inline",...a,onFinish:a==null?void 0:a.onFinish,children:e.jsx(i.Item,{name:"q",style:{width:"100%"},children:e.jsx(I.Search,{placeholder:t("filter.placeholders.query"),enterButton:t("filter.buttons.search")})})}),extra:e.jsx(j,{type:"text",onClick:()=>d(!r),children:r?e.jsx(f,{}):e.jsx(y,{})}),bodyStyle:{padding:"0px"}}),o=()=>e.jsx(C,{title:t("filter.title"),extra:e.jsx(j,{onClick:()=>d(!r),type:"text",children:r?e.jsx(f,{}):e.jsx(y,{})}),children:e.jsxs(i,{layout:"vertical",...a,children:[e.jsxs(K,{gutter:24,children:[e.jsx(m,{span:6,children:e.jsx(i.Item,{label:t("filter.fields.query"),name:"q",children:e.jsx(I,{placeholder:t("filter.placeholders.query"),prefix:e.jsx(P,{})})})}),e.jsx(m,{span:6,children:e.jsx(i.Item,{label:t("machines.fields.status"),name:"status",children:e.jsx(G,{allowClear:!0,options:H,placeholder:t("machines.placeholders.status")})})}),e.jsx(m,{span:6,children:e.jsx(i.Item,{label:t("filter.fields.created_at"),name:"createdAt",children:e.jsx(Y,{})})})]}),e.jsx(i.Item,{children:e.jsx(j,{htmlType:"submit",type:"primary",children:t("filter.buttons.search")})})]})});return r?h():o()};export{J as MachineList,J as default};
