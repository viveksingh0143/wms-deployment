import{_ as R,r as h,T as U,$ as O,y as m,z as y,A as p,j as t,q as D,F as a,I as d,J as W,m as M,n as c,S as f,E as Q,f as z,C as B,g as j}from"./index-7ade8dfe.js";import{c as J,g as K,C as k}from"./converters-a3674b07.js";const Z=()=>{const i=R(),[w,$]=h.useState(!0),[_,I]=h.useState([]),[b,n]=h.useState([]),[A,u]=h.useState(!1),{formProps:e,formLoading:F,saveButtonProps:G}=U(),{data:x,isLoading:H}=O({resource:"categories",filters:[{field:"query",operator:"eq",value:"/materials/"}],queryOptions:{enabled:_.length<=0}});h.useEffect(()=>{var l;if(_.length<=0){let s=J((x==null?void 0:x.data)||[],null,null);s.length>0&&s[0].children&&((l=s[0].children)==null?void 0:l.length)>0?I(s[0].children):I([])}},[x,H]);const N=l=>{var s,g,o,r,C,E,L,T,V,q,v,S;"name"in l&&((g=e==null?void 0:e.form)==null||g.setFieldsValue({slug:j(l.name)+"-"+j((s=e==null?void 0:e.form)==null?void 0:s.getFieldValue("code"))})),"code"in l&&((r=e==null?void 0:e.form)==null||r.setFieldsValue({slug:j((o=e==null?void 0:e.form)==null?void 0:o.getFieldValue("name"))+"-"+j(l.code)})),"unit_type"in l&&(l.unit_type==="WEIGHT"?(n(m),(C=e==null?void 0:e.form)==null||C.setFieldsValue({unit_weight_type:m[0].value}),u(!1),(E=e==null?void 0:e.form)==null||E.setFieldsValue({unit_weight:0})):l.unit_type==="PIECE"?(n(m),(L=e==null?void 0:e.form)==null||L.setFieldsValue({unit_weight_type:m[0].value}),u(!0),(T=e==null?void 0:e.form)==null||T.setFieldsValue({unit_weight:0})):l.unit_type==="LIQUID"?(n(y),(V=e==null?void 0:e.form)==null||V.setFieldsValue({unit_weight_type:y[0].value}),u(!1),(q=e==null?void 0:e.form)==null||q.setFieldsValue({unit_weight:0})):l.unit_type==="LENGTH"&&(n(p),(v=e==null?void 0:e.form)==null||v.setFieldsValue({unit_weight_type:p[0].value}),u(!1),(S=e==null?void 0:e.form)==null||S.setFieldsValue({unit_weight:0})))};return h.useEffect(()=>{var l,s,g,o;if(!F&&w){const r=(l=e==null?void 0:e.form)==null?void 0:l.getFieldValue("unit_type");r==="WEIGHT"?(n(m),u(!1)):r==="PIECE"?(n(m),u(!0),(s=e==null?void 0:e.form)==null||s.setFieldsValue({unit_weight:0})):r==="LIQUID"?(n(y),u(!1),(g=e==null?void 0:e.form)==null||g.setFieldsValue({unit_weight:0})):r==="LENGTH"&&(n(p),u(!1),(o=e==null?void 0:e.form)==null||o.setFieldsValue({unit_weight:0})),$(!1)}},[F,e,w]),t.jsx(D,{saveButtonProps:G,children:t.jsxs(a,{...e,onValuesChange:N,layout:"vertical",children:[t.jsx(a.Item,{hidden:!0,name:["product_type"],children:t.jsx(d,{})}),t.jsx(W,{defaultActiveKey:"1",children:t.jsx(W.TabPane,{tab:i("materials.tabs.basic"),forceRender:!0,children:t.jsxs(M,{gutter:24,children:[t.jsx(c,{span:12,children:t.jsx(a.Item,{label:i("materials.fields.category"),name:["category","id"],rules:[{required:!0}],getValueProps:l=>l?{value:K(l,_)}:{value:null},getValueFromEvent:l=>l?l[l.length-1]:null,children:t.jsx(k,{options:_,fieldNames:{label:"name",value:"id",children:"children"},expandTrigger:"hover",changeOnSelect:!0,allowClear:!0})})}),t.jsx(c,{span:12,children:t.jsx(a.Item,{label:i("materials.fields.code"),name:["code"],rules:[{required:!0}],children:t.jsx(d,{})})}),t.jsx(c,{span:12,children:t.jsx(a.Item,{label:i("materials.fields.name"),name:["name"],rules:[{required:!0}],children:t.jsx(d,{})})}),t.jsx(a.Item,{hidden:!0,label:`${i("materials.fields.slug")} (${i("common.fields.auto_fill")})`,name:["slug"],children:t.jsx(d,{readOnly:!0,placeholder:i("common.placeholders.auto_fill")})}),t.jsx(a.Item,{hidden:!0,label:`${i("materials.fields.cms_code")} (${i("common.fields.optional")})`,name:["cms_code"],children:t.jsx(d,{placeholder:i("common.placeholders.optional")})}),t.jsx(c,{span:24,children:t.jsx(a.Item,{label:i("materials.fields.description"),name:["description"],rules:[{required:!0}],children:t.jsx(d.TextArea,{})})}),t.jsx(c,{span:12,children:t.jsx(a.Item,{label:i("materials.fields.unit_type"),name:["unit_type"],rules:[{required:!0}],children:t.jsx(f,{allowClear:!0,options:Q,placeholder:i("materials.fields.unit_type")})})}),A?t.jsx(c,{span:12,children:t.jsxs(z,{style:{width:"100%"},children:[t.jsx(a.Item,{label:i("materials.fields.unit_weight"),name:["unit_weight"],rules:[{required:!0}],getValueFromEvent:l=>Number(l.target.value),children:t.jsx(d,{type:"number"})}),t.jsx(a.Item,{label:i("materials.fields.unit_weight_type"),name:["unit_weight_type"],rules:[{required:!0}],children:t.jsx(f,{allowClear:!0,options:b,placeholder:i("materials.fields.unit_weight_type")})})]})}):t.jsx(c,{span:12,children:t.jsx(a.Item,{label:i("materials.fields.unit_weight_type"),name:["unit_weight_type"],rules:[{required:!0}],children:t.jsx(f,{allowClear:!0,options:b,placeholder:i("materials.fields.unit_weight_type")})})}),t.jsx(a.Item,{hidden:!0,label:i("materials.fields.status"),name:["status"],rules:[{required:!0}],children:t.jsx(f,{allowClear:!0,options:B,placeholder:i("materials.fields.status")})})]})},"1")})]})})};export{Z as MaterialEdit,Z as default};
