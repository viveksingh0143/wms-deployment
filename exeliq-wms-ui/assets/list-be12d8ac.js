import{_ as F,a as f,b as w,c as O,P as v,d as n,j as e,e as R,G as q,f as m,D as k,H as z,h as A,Y as D,r as N,i as g,F as i,I as C,B as j,k as I,l as y,m as _,n as p,o as B,S as K,C as P,p as G}from"./index-7ade8dfe.js";const{RangePicker:H}=G,V=()=>{const a=F(),{tableProps:t,searchFormProps:o}=f({syncWithLocation:!0,onSearch:s=>{const r=[],{q:h,status:d,createdAt:l}=s;return r.push({field:"query",operator:"eq",value:h},{field:"status",operator:"eq",value:d},{field:"createdAt",operator:"gte",value:l?l[0].toISOString():void 0},{field:"createdAt",operator:"lte",value:l?l[1].toISOString():void 0}),r}}),{triggerExport:c,isLoading:u}=w({mapData:s=>({id:s.id,name:s.name,status:s.status})}),[x,S]=O.useState([]),{mutate:E,isLoading:L}=v(),b=()=>{E({resource:"roles",ids:x.map(String)},{onSuccess:()=>{S([])}})},T={selectedRowKeys:x,onChange:s=>{S(s)},selections:[n.SELECTION_ALL,n.SELECTION_INVERT,n.SELECTION_NONE]};return e.jsxs(R,{headerButtons:({defaultButtons:s})=>e.jsxs(e.Fragment,{children:[s,e.jsx(q,{onClick:c,loading:u})]}),headerProps:{subTitle:e.jsx(m,{children:e.jsx(k,{selectedKeys:x,isLoading:L,onDelete:b})})},children:[e.jsx(U,{formProps:o}),e.jsxs(n,{...t,rowSelection:T,rowKey:"id",pagination:{...t.pagination,showSizeChanger:!0},children:[e.jsx(n.Column,{title:a("table.s_no"),render:(s,r,h)=>{let d=1,l=10;return typeof t.pagination=="object"&&(d=t.pagination.current??1,l=t.pagination.pageSize??10),(d-1)*l+h+1}},"index"),e.jsx(n.Column,{dataIndex:"name",title:a("roles.fields.name"),sorter:!0}),e.jsx(n.Column,{dataIndex:"status",title:a("roles.fields.status"),sorter:!0}),e.jsx(n.Column,{title:a("table.actions"),dataIndex:"actions",render:(s,r)=>e.jsxs(m,{children:[e.jsx(z,{hideText:!0,size:"small",recordItemId:r.id}),e.jsx(A,{hideText:!0,size:"small",recordItemId:r.id}),e.jsx(D,{hideText:!0,size:"small",recordItemId:r.id})]})})]})]})},U=({formProps:a})=>{const[t,o]=N.useState(!0),c=()=>e.jsx(g,{title:e.jsx(i,{layout:"inline",...a,onFinish:a==null?void 0:a.onFinish,children:e.jsx(i.Item,{name:"q",style:{width:"100%"},children:e.jsx(C.Search,{placeholder:"Enter name",enterButton:"Search"})})}),extra:e.jsx(j,{type:"text",onClick:()=>o(!t),children:t?e.jsx(I,{}):e.jsx(y,{})}),bodyStyle:{padding:"0px"}}),u=()=>e.jsx(g,{title:"Search Filter",extra:e.jsx(j,{onClick:()=>o(!t),type:"text",children:t?e.jsx(I,{}):e.jsx(y,{})}),children:e.jsxs(i,{layout:"vertical",...a,children:[e.jsxs(_,{gutter:24,children:[e.jsx(p,{span:8,children:e.jsx(i.Item,{label:"Search",name:"q",children:e.jsx(C,{placeholder:"Enter name",prefix:e.jsx(B,{})})})}),e.jsx(p,{span:8,children:e.jsx(i.Item,{label:"Status",name:"status",children:e.jsx(K,{allowClear:!0,options:P,placeholder:"User Status"})})}),e.jsx(p,{span:8,children:e.jsx(i.Item,{label:"Created At",name:"createdAt",children:e.jsx(H,{})})})]}),e.jsx(i.Item,{children:e.jsx(j,{htmlType:"submit",type:"primary",children:"Filter"})})]})});return t?c():u()};export{V as RoleList,V as default};
