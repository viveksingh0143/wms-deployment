import{_ as b,a as v,b as w,c as O,P as F,d as n,j as e,e as R,G as k,f as m,D as z,H as D,h as N,Y as A,r as B,i as S,F as l,I as C,B as g,k as I,l as y,m as K,n as j,o as P,S as G,C as H,p as Y}from"./index-7ade8dfe.js";const{RangePicker:M}=Y,J=()=>{const a=b(),{tableProps:s,searchFormProps:r}=v({syncWithLocation:!0,onSearch:t=>{const i=[],{q:h,name:c,code:u,status:T,createdAt:p}=t;return i.push({field:"query",operator:"eq",value:h},{field:"name",operator:"eq",value:c},{field:"code",operator:"eq",value:u},{field:"status",operator:"eq",value:T},{field:"createdAt",operator:"gte",value:p?p[0].toISOString():void 0},{field:"createdAt",operator:"lte",value:p?p[1].toISOString():void 0}),i}}),{triggerExport:d,isLoading:x}=w({mapData:t=>({id:t.id,name:t.name,code:t.code,contact_person:t.contact_person,billing_address_1:t.billing_address_1,billing_address_2:t.billing_address_2,billing_state:t.billing_state,billing_country:t.billing_country,billing_pincode:t.billing_pincode,shipping_address_1:t.shipping_address_1,shipping_address_2:t.shipping_address_2,shipping_state:t.shipping_state,shipping_country:t.shipping_country,shipping_pincode:t.shipping_pincode,status:t.status})}),[o,_]=O.useState([]),{mutate:f,isLoading:L}=F(),q=()=>{f({resource:"customers",ids:o.map(String)},{onSuccess:()=>{_([])}})},E={selectedRowKeys:o,onChange:t=>{_(t)},selections:[n.SELECTION_ALL,n.SELECTION_INVERT,n.SELECTION_NONE]};return e.jsxs(R,{headerButtons:({defaultButtons:t})=>e.jsxs(e.Fragment,{children:[t,e.jsx(k,{onClick:d,loading:x})]}),headerProps:{subTitle:e.jsx(m,{children:e.jsx(z,{selectedKeys:o,isLoading:L,onDelete:q})})},children:[e.jsx(U,{formProps:r}),e.jsxs(n,{...s,rowSelection:E,rowKey:"id",pagination:{...s.pagination,showSizeChanger:!0},children:[e.jsx(n.Column,{title:a("table.s_no"),render:(t,i,h)=>{let c=1,u=10;return typeof s.pagination=="object"&&(c=s.pagination.current??1,u=s.pagination.pageSize??10),(c-1)*u+h+1}},"index"),e.jsx(n.Column,{dataIndex:"name",title:a("customers.fields.name"),sorter:!0}),e.jsx(n.Column,{dataIndex:"code",title:a("customers.fields.code"),sorter:!0}),e.jsx(n.Column,{dataIndex:"contact_person",title:a("customers.fields.contact_person"),sorter:!0}),e.jsx(n.Column,{dataIndex:"status",title:a("customers.fields.status"),sorter:!0}),e.jsx(n.Column,{title:a("table.actions"),dataIndex:"actions",render:(t,i)=>e.jsxs(m,{children:[e.jsx(D,{hideText:!0,size:"small",recordItemId:i.id}),e.jsx(N,{hideText:!0,size:"small",recordItemId:i.id}),e.jsx(A,{hideText:!0,size:"small",recordItemId:i.id})]})})]})]})},U=({formProps:a})=>{const s=b(),[r,d]=B.useState(!0),x=()=>e.jsx(S,{title:e.jsx(l,{layout:"inline",...a,onFinish:a==null?void 0:a.onFinish,children:e.jsx(l.Item,{name:"q",style:{width:"100%"},children:e.jsx(C.Search,{placeholder:s("filter.placeholders.query"),enterButton:s("filter.buttons.search")})})}),extra:e.jsx(g,{type:"text",onClick:()=>d(!r),children:r?e.jsx(I,{}):e.jsx(y,{})}),bodyStyle:{padding:"0px"}}),o=()=>e.jsx(S,{title:s("filter.title"),extra:e.jsx(g,{onClick:()=>d(!r),type:"text",children:r?e.jsx(I,{}):e.jsx(y,{})}),children:e.jsxs(l,{layout:"vertical",...a,children:[e.jsxs(K,{gutter:24,children:[e.jsx(j,{span:6,children:e.jsx(l.Item,{label:s("filter.fields.query"),name:"q",children:e.jsx(C,{placeholder:s("filter.placeholders.query"),prefix:e.jsx(P,{})})})}),e.jsx(j,{span:6,children:e.jsx(l.Item,{label:s("customers.fields.status"),name:"status",children:e.jsx(G,{allowClear:!0,options:H,placeholder:s("customers.placeholders.status")})})}),e.jsx(j,{span:6,children:e.jsx(l.Item,{label:s("filter.fields.created_at"),name:"createdAt",children:e.jsx(M,{})})})]}),e.jsx(l.Item,{children:e.jsx(g,{htmlType:"submit",type:"primary",children:s("filter.buttons.search")})})]})});return r?x():o()};export{J as CustomerList,J as default};
