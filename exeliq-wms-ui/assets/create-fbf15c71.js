import{_ as S,bd as C,r as u,T as I,R as x,$ as w,be as j,j as e,V as F,F as a,m as V,n as l,S as p,I as d,bf as R}from"./index-7ade8dfe.js";import{g as E}from"./commonfn-85cf86f5.js";import{g as O}from"./shift-67a7114a.js";const N=()=>{const r=S(),{data:i}=C(),[h,f]=u.useState(),{formProps:t,saveButtonProps:b}=I({resource:"inventories",meta:{suffixurl:"rawmaterial/stockin"}}),{selectProps:g,queryResult:c}=x({resource:"stores",optionLabel:"name",optionValue:"id",filters:[{field:"category_path_startswith",operator:"eq",value:"/materials/"}]}),{selectProps:q}=x({resource:"products",optionLabel:"name",optionValue:"id",filters:h?[{field:"category_path_startswith",operator:"eq",value:h.category_path}]:[{field:"category_path_startswith",operator:"eq",value:"/materials/"}]}),{data:s}=w({resource:"containers",config:{filters:[{field:"container_type",operator:"eq",value:j}],sort:[{field:"id",order:"desc"}],pagination:{current:1,pageSize:1}}}),y=o=>{var n,m;if(o){const v=(m=(n=c==null?void 0:c.data)==null?void 0:n.data)==null?void 0:m.find(_=>_.id===o);v&&f(v)}else f(null)};return u.useEffect(()=>{if(s!=null&&s.data&&(s==null?void 0:s.data.length)>0&&(t!=null&&t.form)){const o=s.data[0],n=E(o.code);t==null||t.form.setFieldValue(["container","code"],n)}},[s,t.form]),u.useEffect(()=>{i&&(t!=null&&t.form)&&(t==null||t.form.setFieldValue(["supervisor"],i.name))},[i,t.form]),e.jsx(F,{saveButtonProps:b,children:e.jsx(a,{...t,initialValues:{status:1,container:{type:j,code:""},shift:O(),supervisor:i==null?void 0:i.name},layout:"vertical",children:e.jsxs(V,{gutter:24,children:[e.jsx(l,{span:12,children:e.jsx(a.Item,{label:r("inventories.fields.store"),name:["store","id"],rules:[{required:!0}],children:e.jsx(p,{...g,placeholder:r("inventories.placeholders.store"),allowClear:!0,onSearch:void 0,filterOption:!0,optionFilterProp:"label",onChange:y})})}),e.jsx(l,{span:12,children:e.jsx(a.Item,{label:r("inventories.fields.product"),name:["product","id"],rules:[{required:!0}],children:e.jsx(p,{...q,placeholder:r("inventories.placeholders.product"),allowClear:!0,onSearch:void 0,filterOption:!0,optionFilterProp:"label"})})}),e.jsx(l,{span:12,children:e.jsx(a.Item,{label:r("inventories.fields.quantity"),name:["quantity"],rules:[{required:!0}],getValueFromEvent:o=>Number(o.target.value),children:e.jsx(d,{placeholder:r("inventories.placeholders.quantity"),type:"number"})})}),e.jsx(l,{span:12,children:e.jsx(a.Item,{label:r("inventories.fields.pallet"),name:["container","code"],rules:[{required:!0}],children:e.jsx(d,{placeholder:r("inventories.placeholders.pallet")})})}),e.jsx(l,{span:12,children:e.jsx(a.Item,{label:r("inventories.fields.shift"),name:["shift"],rules:[{required:!0}],children:e.jsx(p,{options:R,placeholder:r("inventories.placeholders.shift")})})}),e.jsx(l,{span:12,children:e.jsx(a.Item,{label:r("inventories.fields.supervisor"),name:["supervisor"],rules:[{required:!0}],children:e.jsx(d,{disabled:!0,placeholder:r("inventories.placeholders.supervisor")})})}),e.jsx(l,{span:12,children:e.jsx(a.Item,{label:r("inventories.fields.batch_no"),name:["batch_no"],children:e.jsx(d,{placeholder:r("inventories.placeholders.batch_no")})})})]})})})};export{N as InventoryCreate,N as default};
