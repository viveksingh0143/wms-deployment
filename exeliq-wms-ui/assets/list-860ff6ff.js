import{_,a as T,b as F,c as R,P as D,d as o,j as e,e as k,G as z,f,D as N,t as P,H as Y,h as A,Y as B,r as K,R as M,i as C,F as n,I,B as S,k as g,l as q,m as G,n as j,o as H,S as y,C as V,p as U}from"./index-7ade8dfe.js";const{RangePicker:W}=U,Z=()=>{const r=_(),{tableProps:s,searchFormProps:l}=T({syncWithLocation:!0,onSearch:t=>{const a=[],{q:c,order_no:x,issued_date:h,customer_id:E,status:O,createdAt:p}=t;return a.push({field:"query",operator:"eq",value:c},{field:"order_no",operator:"eq",value:x},{field:"issued_date",operator:"eq",value:h},{field:"status",operator:"eq",value:O},{field:"customer_id",operator:"eq",value:E},{field:"createdAt",operator:"gte",value:p?p[0].toISOString():void 0},{field:"createdAt",operator:"lte",value:p?p[1].toISOString():void 0}),a}}),{triggerExport:d,isLoading:m}=F({mapData:t=>{var a;return{id:t.id,issued_date:t.issued_date,order_no:t.order_no,status:t.status,customer:((a=t==null?void 0:t.customer)==null?void 0:a.name)||""}}}),[i,u]=R.useState([]),{mutate:w,isLoading:b}=D(),L=()=>{w({resource:"outwardrequests",ids:i.map(String)},{onSuccess:()=>{u([])}})},v={selectedRowKeys:i,onChange:t=>{u(t)},selections:[o.SELECTION_ALL,o.SELECTION_INVERT,o.SELECTION_NONE]};return e.jsxs(k,{headerButtons:({defaultButtons:t})=>e.jsxs(e.Fragment,{children:[t,e.jsx(z,{onClick:d,loading:m})]}),headerProps:{subTitle:e.jsx(f,{children:e.jsx(N,{selectedKeys:i,isLoading:b,onDelete:L})})},children:[e.jsx(J,{formProps:l}),e.jsxs(o,{...s,rowSelection:v,rowKey:"id",pagination:{...s.pagination,showSizeChanger:!0},children:[e.jsx(o.Column,{title:r("table.s_no"),render:(t,a,c)=>{let x=1,h=10;return typeof s.pagination=="object"&&(x=s.pagination.current??1,h=s.pagination.pageSize??10),(x-1)*h+c+1}},"index"),e.jsx(o.Column,{dataIndex:"issued_date",title:r("outwardrequests.fields.issued_date"),sorter:!0,render:(t,a,c)=>P(t).format("YYYY-MM-DD")}),e.jsx(o.Column,{dataIndex:"order_no",title:r("outwardrequests.fields.order_no"),sorter:!0}),e.jsx(o.Column,{dataIndex:"status",title:r("outwardrequests.fields.status"),sorter:!0}),e.jsx(o.Column,{dataIndex:["customer","name"],title:r("outwardrequests.fields.customer"),sorter:!0}),e.jsx(o.Column,{title:r("table.actions"),dataIndex:"actions",render:(t,a)=>e.jsxs(f,{children:[e.jsx(Y,{hideText:!0,size:"small",recordItemId:a.id}),e.jsx(A,{hideText:!0,size:"small",recordItemId:a.id}),e.jsx(B,{hideText:!0,size:"small",recordItemId:a.id})]})})]})]})},J=({formProps:r})=>{const s=_(),[l,d]=K.useState(!0),{selectProps:m}=M({resource:"customers",optionLabel:"name",optionValue:"id"}),i=()=>e.jsx(C,{title:e.jsx(n,{layout:"inline",...r,onFinish:r==null?void 0:r.onFinish,children:e.jsx(n.Item,{name:"q",style:{width:"100%"},children:e.jsx(I.Search,{placeholder:s("filter.placeholders.query"),enterButton:s("filter.buttons.search")})})}),extra:e.jsx(S,{type:"text",onClick:()=>d(!l),children:l?e.jsx(g,{}):e.jsx(q,{})}),bodyStyle:{padding:"0px"}}),u=()=>e.jsx(C,{title:s("filter.title"),extra:e.jsx(S,{onClick:()=>d(!l),type:"text",children:l?e.jsx(g,{}):e.jsx(q,{})}),children:e.jsxs(n,{layout:"vertical",...r,children:[e.jsxs(G,{gutter:24,children:[e.jsx(j,{span:6,children:e.jsx(n.Item,{label:s("filter.fields.query"),name:"q",children:e.jsx(I,{placeholder:s("filter.placeholders.query"),prefix:e.jsx(H,{})})})}),e.jsx(j,{span:6,children:e.jsx(n.Item,{label:s("outwardrequests.fields.status"),name:"status",children:e.jsx(y,{allowClear:!0,options:V,placeholder:s("outwardrequests.placeholders.status")})})}),e.jsx(j,{span:6,children:e.jsx(n.Item,{label:s("outwardrequests.fields.customer"),name:"customer_id",children:e.jsx(y,{...m,allowClear:!0,onSearch:void 0,filterOption:!0,optionFilterProp:"label"})})}),e.jsx(j,{span:6,children:e.jsx(n.Item,{label:s("filter.fields.created_at"),name:"createdAt",children:e.jsx(W,{})})})]}),e.jsx(n.Item,{children:e.jsx(S,{htmlType:"submit",type:"primary",children:s("filter.buttons.search")})})]})});return l?i():u()};export{Z as OutwardrequestList,Z as default};
