import{_ as y,a as k,c as E,P as L,d as r,j as e,e as q,f as j,N as O,h as T,r as w,i as m,F as l,I as S,B as h,k as C,l as f,m as A,n as I,o as N,p as v}from"./index-7ade8dfe.js";import{A as F}from"./approveSelectedButton-3f31ac19.js";const{RangePicker:R}=v,D=()=>{const t=y(),{tableProps:n,searchFormProps:a}=k({syncWithLocation:!0,onSearch:s=>{const d=[],{q:u,store_id:x,createdAt:o}=s;return d.push({field:"query",operator:"eq",value:u},{field:"store_id",operator:"eq",value:x},{field:"createdAt",operator:"gte",value:o?o[0].toISOString():void 0},{field:"createdAt",operator:"lte",value:o?o[1].toISOString():void 0}),d}}),[i,c]=E.useState([]),{mutate:p,isLoading:g}=L(),_=()=>{p({resource:"stockapprovals",ids:i.map(String)},{onSuccess:()=>{c([])}})},b={selectedRowKeys:i,onChange:s=>{c(s)},selections:[r.SELECTION_ALL,r.SELECTION_INVERT,r.SELECTION_NONE]};return e.jsxs(q,{canCreate:!1,headerProps:{subTitle:e.jsx(j,{children:e.jsx(F,{selectedKeys:i,isLoading:g,onApprove:_})})},children:[e.jsx(z,{formProps:a}),e.jsxs(r,{...n,rowSelection:b,rowKey:"id",pagination:{...n.pagination,showSizeChanger:!0},children:[e.jsx(r.Column,{title:t("table.s_no"),render:(s,d,u)=>{let x=1,o=10;return typeof n.pagination=="object"&&(x=n.pagination.current??1,o=n.pagination.pageSize??10),(x-1)*o+u+1}},"index"),e.jsx(r.Column,{dataIndex:"container_type",title:t("containers.fields.container_type"),sorter:!0}),e.jsx(r.Column,{dataIndex:"name",title:t("containers.fields.name"),sorter:!0}),e.jsx(r.Column,{dataIndex:"code",title:t("containers.fields.code"),sorter:!0}),e.jsx(r.Column,{dataIndex:"stock_level",title:t("containers.fields.stock_level"),sorter:!0}),e.jsx(r.Column,{dataIndex:"approved",title:t("containers.fields.approved"),sorter:!0}),e.jsx(r.Column,{dataIndex:["store","name"],title:t("stockapprovals.fields.store")}),e.jsx(r.Column,{dataIndex:"storelocation",title:t("containers.fields.location"),render:s=>s?s.code:"Not Placed",sorter:!0}),e.jsx(r.Column,{dataIndex:"product",title:t("containers.fields.product"),render:s=>s?e.jsx(O,{value:s==null?void 0:s.name},s==null?void 0:s.id):null}),e.jsx(r.Column,{title:t("table.actions"),dataIndex:"actions",render:(s,d)=>e.jsx(j,{children:e.jsx(T,{resource:"containers",hideText:!0,size:"small",recordItemId:d.id})})})]})]})},z=({formProps:t})=>{const n=y(),[a,i]=w.useState(!0),c=()=>e.jsx(m,{title:e.jsx(l,{layout:"inline",...t,onFinish:t==null?void 0:t.onFinish,children:e.jsx(l.Item,{name:"q",style:{width:"100%"},children:e.jsx(S.Search,{placeholder:n("filter.placeholders.query"),enterButton:n("filter.buttons.search")})})}),extra:e.jsx(h,{type:"text",onClick:()=>i(!a),children:a?e.jsx(C,{}):e.jsx(f,{})}),bodyStyle:{padding:"0px"}}),p=()=>e.jsx(m,{title:n("filter.title"),extra:e.jsx(h,{onClick:()=>i(!a),type:"text",children:a?e.jsx(C,{}):e.jsx(f,{})}),children:e.jsxs(l,{layout:"vertical",...t,children:[e.jsxs(A,{gutter:24,children:[e.jsx(I,{span:6,children:e.jsx(l.Item,{label:n("filter.fields.query"),name:"q",children:e.jsx(S,{placeholder:n("filter.placeholders.query"),prefix:e.jsx(N,{})})})}),e.jsx(I,{span:6,children:e.jsx(l.Item,{label:n("filter.fields.created_at"),name:"createdAt",children:e.jsx(R,{})})})]}),e.jsx(l.Item,{children:e.jsx(h,{htmlType:"submit",type:"primary",children:n("filter.buttons.search")})})]})});return a?c():p()};export{D as StockapprovalList,D as default};
