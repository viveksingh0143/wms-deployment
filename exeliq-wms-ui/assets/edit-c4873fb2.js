import{_ as V,T as w,R as b,j as e,q as R,F as a,J as j,m as v,n as m,t as f,p as E,S as h,I as y,C as S,d as p,B as T}from"./index-7ade8dfe.js";import{M as k}from"./MinusCircleOutlined-f6a845b7.js";const O=()=>{const t=V(),{formProps:s,saveButtonProps:_}=w(),{selectProps:g}=b({resource:"customers",optionLabel:"name",optionValue:"id"}),{selectProps:C,queryResult:x}=b({resource:"products",optionLabel:"name",optionValue:"id"}),I=(i,c)=>{var o,r,u,n;const{items:d}=(o=s==null?void 0:s.form)==null?void 0:o.getFieldsValue(["items"]);d[c].product_id=i,d[c].product=(u=(r=x==null?void 0:x.data)==null?void 0:r.data)==null?void 0:u.find(l=>l.id===i),(n=s==null?void 0:s.form)==null||n.setFieldsValue({items:d})};return e.jsx(R,{saveButtonProps:_,children:e.jsx(a,{...s,layout:"vertical",children:e.jsxs(j,{defaultActiveKey:"1",children:[e.jsx(j.TabPane,{tab:t("requisitions.tabs.basic"),forceRender:!0,children:e.jsxs(v,{gutter:24,children:[e.jsx(m,{span:12,children:e.jsx(a.Item,{label:t("requisitions.fields.issued_date"),name:["issued_date"],rules:[{required:!0}],getValueProps:i=>({value:i?f(i):null}),getValueFromEvent:i=>i?f(i):null,children:e.jsx(E,{format:"YYYY-MM-DD",style:{width:"100%"}})})}),e.jsx(m,{span:12,children:e.jsx(a.Item,{label:t("requisitions.fields.customer"),name:["customer","id"],rules:[{required:!0,message:t("rules.requiredOption")}],children:e.jsx(h,{placeholder:t("requisitions.fields.customer"),...g})})}),e.jsx(m,{span:12,children:e.jsx(a.Item,{label:t("requisitions.fields.order_no"),name:["order_no"],rules:[{required:!0}],children:e.jsx(y,{})})}),e.jsx(m,{span:12,children:e.jsx(a.Item,{label:t("requisitions.fields.status"),name:["status"],rules:[{required:!0}],children:e.jsx(h,{allowClear:!0,options:S,placeholder:t("requisitions.fields.status")})})})]})},"1"),e.jsx(j.TabPane,{tab:t("requisitions.tabs.items"),forceRender:!0,children:e.jsx(a.List,{name:["items"],children:(i,{add:c,remove:d})=>e.jsxs(e.Fragment,{children:[e.jsxs(p,{dataSource:i,pagination:!1,rowKey:"key",children:[e.jsx(p.Column,{title:t("requisitions.items.fields.product"),dataIndex:"product_id",render:(o,r,u)=>e.jsx(a.Item,{name:[r.name,"product_id"],rules:[{required:!0,message:t("rules.requiredOption")}],children:e.jsx(h,{placeholder:t("requisitions.items.placeholders.product"),...C,onChange:n=>I(n,r.name)})})},"product_id"),e.jsx(p.Column,{title:t("requisitions.items.fields.quantity"),dataIndex:"quantity",render:(o,r,u)=>{var q;const n=(q=s==null?void 0:s.form)==null?void 0:q.getFieldValue(["items",r.name,"product"]);let l=n==null?void 0:n.unit_type;return l&&l!=="PIECE"&&(l=n.unit_weight_type),e.jsx(a.Item,{name:[r.name,"quantity"],rules:[{required:!0}],getValueFromEvent:F=>Number(F.target.value),children:e.jsx(y,{type:"number",placeholder:t("requisitions.items.placeholders.quantity"),addonAfter:l})})}},"quantity"),e.jsx(p.Column,{title:t("table.actions"),dataIndex:"action",render:(o,r,u)=>e.jsx(a.Item,{children:e.jsx(k,{onClick:()=>d(u)})})})]}),e.jsx(T,{type:"dashed",onClick:()=>c(),style:{width:"100%"},children:t("requisitions.items.buttons.add")})]})})},"2")]})})})};export{O as OutwardrequestEdit,O as default};
