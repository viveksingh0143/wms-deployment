import{_ as O,r as m,y as b,T as Q,j as e,q as N,F as l,J as F,m as W,n as i,I as r,t as v,p as U,S as j,E as M,aT as R,C as A,aU as B,z as k,A as L}from"./index-7ade8dfe.js";const G=()=>{const s=O(),[T,n]=m.useState(0),[C,o]=m.useState(b),[E,x]=m.useState(!1),{formProps:t,saveButtonProps:V}=Q({queryOptions:{onSuccess:a=>{const u=Number(a.data.package_quantity),d=Number(a.data.target_quantity);u>0&&d>0?n(Math.ceil(d/u)):n(0)}}}),S=a=>{var u,d,p,y,_,g,f,q,I,w;if("package_quantity"in a){const c=a.package_quantity,h=(u=t==null?void 0:t.form)==null?void 0:u.getFieldValue("target_quantity");c>0&&h>0?n(Math.ceil(h/c)):n(0)}if("target_quantity"in a){const c=(d=t==null?void 0:t.form)==null?void 0:d.getFieldValue("package_quantity"),h=a.target_quantity;c>0&&h>0?n(Math.ceil(h/c)):n(0)}"unit_type"in a&&(a.unit_type==="WEIGHT"?(o(b),(p=t==null?void 0:t.form)==null||p.setFieldsValue({unit_weight_type:b[0].value}),x(!1),(y=t==null?void 0:t.form)==null||y.setFieldsValue({unit_weight:0})):a.unit_type==="PIECE"?(o(b),(_=t==null?void 0:t.form)==null||_.setFieldsValue({unit_weight_type:b[0].value}),x(!0),(g=t==null?void 0:t.form)==null||g.setFieldsValue({unit_weight:0})):a.unit_type==="LIQUID"?(o(k),(f=t==null?void 0:t.form)==null||f.setFieldsValue({unit_weight_type:k[0].value}),x(!1),(q=t==null?void 0:t.form)==null||q.setFieldsValue({unit_weight:0})):a.unit_type==="LENGTH"&&(o(L),(I=t==null?void 0:t.form)==null||I.setFieldsValue({unit_weight_type:L[0].value}),x(!1),(w=t==null?void 0:t.form)==null||w.setFieldsValue({unit_weight:0})))};return e.jsx(N,{saveButtonProps:V,children:e.jsx(l,{...t,onValuesChange:S,layout:"vertical",children:e.jsx(F,{defaultActiveKey:"1",children:e.jsx(F.TabPane,{tab:s("batchlabels.tabs.basic"),forceRender:!0,children:e.jsxs(W,{gutter:24,children:[e.jsxs(i,{span:12,children:[e.jsx(l.Item,{label:s("batchlabels.fields.joborder"),name:["joborder","order_no"],children:e.jsx(r,{readOnly:!0,disabled:!0})}),e.jsx(l.Item,{hidden:!0,name:["joborder","id"],children:e.jsx(r,{})})]}),e.jsxs(i,{span:12,children:[e.jsx(l.Item,{label:s("batchlabels.fields.customer"),name:["customer","name"],children:e.jsx(r,{readOnly:!0,disabled:!0})}),e.jsx(l.Item,{hidden:!0,name:["customer","id"],children:e.jsx(r,{})})]}),e.jsxs(i,{span:12,children:[e.jsx(l.Item,{label:s("batchlabels.fields.product"),name:["product","name"],children:e.jsx(r,{readOnly:!0,disabled:!0})}),e.jsx(l.Item,{hidden:!0,name:["product","id"],children:e.jsx(r,{})})]}),e.jsxs(i,{span:12,children:[e.jsx(l.Item,{label:s("batchlabels.fields.machine"),name:["machine","name"],children:e.jsx(r,{readOnly:!0,disabled:!0})}),e.jsx(l.Item,{hidden:!0,name:["machine","id"],children:e.jsx(r,{})})]}),e.jsx(i,{span:12,children:e.jsx(l.Item,{label:s("batchlabels.fields.batch_date"),name:["batch_date"],rules:[{required:!0}],getValueProps:a=>({value:a?v(a):null}),getValueFromEvent:a=>a?v(a):null,children:e.jsx(U,{disabled:!0,style:{width:"100%"}})})}),e.jsx(i,{span:12,children:e.jsx(l.Item,{label:s("batchlabels.fields.batch_no"),name:["batch_no"],rules:[{required:!0}],children:e.jsx(r,{disabled:!0})})}),e.jsx(i,{span:12,children:e.jsx(l.Item,{label:s("batchlabels.fields.so_number"),name:["so_number"],rules:[{required:!0}],children:e.jsx(r,{disabled:!0})})}),e.jsx(i,{span:12,children:e.jsx(l.Item,{label:s("batchlabels.fields.unit_type"),name:["unit_type"],rules:[{required:!0}],children:e.jsx(j,{disabled:!0,options:M,placeholder:s("batchlabels.fields.unit_type")})})}),e.jsx(i,{span:12,children:e.jsx(l.Item,{label:s("batchlabels.fields.unit_weight_type"),name:["unit_weight_type"],rules:[{required:!0}],children:e.jsx(j,{disabled:!0,allowClear:!0,options:C,placeholder:s("batchlabels.fields.unit_weight_type")})})}),E&&e.jsx(i,{span:12,children:e.jsx(l.Item,{label:s("batchlabels.fields.unit_weight"),name:["unit_weight"],rules:[{required:!0}],getValueFromEvent:a=>Number(a.target.value),children:e.jsx(r,{disabled:!0,type:"number"})})}),e.jsx(i,{span:12,children:e.jsx(l.Item,{label:s("batchlabels.fields.po_category"),name:["po_category"],rules:[{required:!0}],children:e.jsx(j,{disabled:!0,allowClear:!0,options:R,placeholder:s("batchlabels.fields.po_category")})})}),e.jsx(i,{span:12,children:e.jsx(l.Item,{label:s("batchlabels.fields.target_quantity"),name:["target_quantity"],rules:[{required:!0}],getValueFromEvent:a=>Number(a.target.value),children:e.jsx(r,{type:"number"})})}),e.jsx(i,{span:12,children:e.jsx(l.Item,{label:s("batchlabels.fields.package_quantity"),name:["package_quantity"],rules:[{required:!0}],getValueFromEvent:a=>Number(a.target.value),children:e.jsx(r,{disabled:!0,type:"number"})})}),e.jsx(i,{span:12,children:e.jsx(l.Item,{label:s("batchlabels.fields.status"),name:["status"],rules:[{required:!0}],children:e.jsx(j,{allowClear:!0,options:A,placeholder:s("batchlabels.fields.status")})})}),e.jsx(i,{span:12,children:e.jsx(l.Item,{label:s("batchlabels.fields.process_status"),name:["process_status"],rules:[{required:!0}],children:e.jsx(j,{allowClear:!0,options:B,placeholder:s("batchlabels.fields.process_status")})})}),e.jsx(i,{span:12,children:e.jsx(l.Item,{label:s("batchlabels.fields.stickersToPrint"),children:e.jsx(r,{type:"number",disabled:!0,value:T})})})]})},"1")})})})};export{G as BatchlabelEdit,G as default};
