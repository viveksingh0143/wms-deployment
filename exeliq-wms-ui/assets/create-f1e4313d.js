import{_ as I,T as V,R as w,j as e,V as F,F as u,J as h,m as R,n as m,p as S,S as j,I as b,C as T,d as p,B as v}from"./index-7ade8dfe.js";import{M as k}from"./MinusCircleOutlined-f6a845b7.js";const O=()=>{const t=I(),{formProps:s,saveButtonProps:f}=V(),{selectProps:y}=w({resource:"customers",optionLabel:"name",optionValue:"id"}),{selectProps:_,queryResult:x}=w({resource:"products",optionLabel:"name",optionValue:"id"}),C=(o,c)=>{var l,r,d,a;const{items:i}=(l=s==null?void 0:s.form)==null?void 0:l.getFieldsValue(["items"]);i[c].product_id=o,i[c].product=(d=(r=x==null?void 0:x.data)==null?void 0:r.data)==null?void 0:d.find(n=>n.id===o),(a=s==null?void 0:s.form)==null||a.setFieldsValue({items:i})};return e.jsx(F,{saveButtonProps:f,children:e.jsx(u,{...s,initialValues:{issued_date:null,department:"",status:1},layout:"vertical",children:e.jsxs(h,{defaultActiveKey:"1",children:[e.jsx(h.TabPane,{tab:t("outwardrequests.tabs.basic"),forceRender:!0,children:e.jsxs(R,{gutter:24,children:[e.jsx(m,{span:12,children:e.jsx(u.Item,{label:t("outwardrequests.fields.issued_date"),name:["issued_date"],rules:[{required:!0}],children:e.jsx(S,{style:{width:"100%"}})})}),e.jsx(m,{span:12,children:e.jsx(u.Item,{label:t("outwardrequests.fields.customer"),name:["customer","id"],rules:[{required:!0,message:t("rules.requiredOption")}],children:e.jsx(j,{placeholder:t("outwardrequests.fields.customer"),...y})})}),e.jsx(m,{span:12,children:e.jsx(u.Item,{label:t("outwardrequests.fields.order_no"),name:["order_no"],rules:[{required:!0}],children:e.jsx(b,{})})}),e.jsx(m,{span:12,children:e.jsx(u.Item,{label:t("outwardrequests.fields.status"),name:["status"],rules:[{required:!0}],children:e.jsx(j,{allowClear:!0,options:T,placeholder:t("outwardrequests.fields.status")})})})]})},"1"),e.jsx(h.TabPane,{tab:t("outwardrequests.tabs.items"),forceRender:!0,children:e.jsx(u.List,{name:["items"],children:(o,{add:c,remove:i})=>e.jsxs(e.Fragment,{children:[e.jsxs(p,{dataSource:o,pagination:!1,rowKey:"key",children:[e.jsx(p.Column,{title:t("outwardrequests.items.fields.product"),dataIndex:"product_id",render:(l,r,d)=>e.jsx(u.Item,{name:[r.name,"product_id"],rules:[{required:!0,message:t("rules.requiredOption")}],children:e.jsx(j,{placeholder:t("outwardrequests.items.placeholders.product"),..._,onChange:a=>C(a,r.name)})})},"product_id"),e.jsx(p.Column,{title:t("outwardrequests.items.fields.quantity"),dataIndex:"quantity",render:(l,r,d)=>{var q;const a=(q=s==null?void 0:s.form)==null?void 0:q.getFieldValue(["items",r.name,"product"]);let n=a==null?void 0:a.unit_type;return n&&n!=="PIECE"&&(n=a.unit_weight_type),e.jsx(u.Item,{name:[r.name,"quantity"],rules:[{required:!0}],getValueFromEvent:g=>Number(g.target.value),children:e.jsx(b,{type:"number",placeholder:t("outwardrequests.items.placeholders.quantity"),addonAfter:n})})}},"quantity"),e.jsx(p.Column,{title:t("table.actions"),dataIndex:"action",render:(l,r,d)=>e.jsx(u.Item,{children:e.jsx(k,{onClick:()=>i(d)})})})]}),e.jsx(v,{type:"dashed",onClick:()=>c(),style:{width:"100%"},children:t("outwardrequests.items.buttons.add")})]})})},"2")]})})})};export{O as OutwardrequestCreate,O as default};
