import{_ as V,T as R,R as f,j as e,V as F,F as i,J as j,m as w,n as o,p as S,S as h,I as q,C as T,d as p,B as v}from"./index-7ade8dfe.js";import{M as k}from"./MinusCircleOutlined-f6a845b7.js";const A=()=>{const s=V(),{formProps:t,saveButtonProps:y}=R(),{selectProps:_}=f({resource:"stores",optionLabel:"name",optionValue:"id"}),{selectProps:C,queryResult:x}=f({resource:"products",optionLabel:"name",optionValue:"id"}),I=(c,m)=>{var u,r,a,n;const{items:d}=(u=t==null?void 0:t.form)==null?void 0:u.getFieldsValue(["items"]);d[m].product_id=c,d[m].product=(a=(r=x==null?void 0:x.data)==null?void 0:r.data)==null?void 0:a.find(l=>l.id===c),(n=t==null?void 0:t.form)==null||n.setFieldsValue({items:d})};return e.jsx(F,{saveButtonProps:y,children:e.jsx(i,{...t,initialValues:{issued_date:null,department:"",status:1},layout:"vertical",children:e.jsxs(j,{defaultActiveKey:"1",children:[e.jsx(j.TabPane,{tab:s("requisitions.tabs.basic"),forceRender:!0,children:e.jsxs(w,{gutter:24,children:[e.jsx(o,{span:12,children:e.jsx(i.Item,{label:s("requisitions.fields.issued_date"),name:["issued_date"],rules:[{required:!0}],children:e.jsx(S,{style:{width:"100%"}})})}),e.jsx(o,{span:12,children:e.jsx(i.Item,{label:s("requisitions.fields.store"),name:["store","id"],rules:[{required:!0,message:s("rules.requiredOption")}],children:e.jsx(h,{placeholder:s("requisitions.fields.store"),..._})})}),e.jsx(o,{span:12,children:e.jsx(i.Item,{label:s("requisitions.fields.order_no"),name:["order_no"],rules:[{required:!0}],children:e.jsx(q,{})})}),e.jsx(o,{span:12,children:e.jsx(i.Item,{label:s("requisitions.fields.department"),name:["department"],rules:[{required:!0}],children:e.jsx(q,{})})}),e.jsx(o,{span:12,children:e.jsx(i.Item,{label:s("requisitions.fields.status"),name:["status"],rules:[{required:!0}],children:e.jsx(h,{allowClear:!0,options:T,placeholder:s("requisitions.fields.status")})})})]})},"1"),e.jsx(j.TabPane,{tab:s("requisitions.tabs.items"),forceRender:!0,children:e.jsx(i.List,{name:["items"],children:(c,{add:m,remove:d})=>e.jsxs(e.Fragment,{children:[e.jsxs(p,{dataSource:c,pagination:!1,rowKey:"key",children:[e.jsx(p.Column,{title:s("requisitions.items.fields.product"),dataIndex:"product_id",render:(u,r,a)=>e.jsx(i.Item,{name:[r.name,"product_id"],rules:[{required:!0,message:s("rules.requiredOption")}],children:e.jsx(h,{placeholder:s("requisitions.items.placeholders.product"),...C,onChange:n=>I(n,r.name)})})},"product_id"),e.jsx(p.Column,{title:s("requisitions.items.fields.quantity"),dataIndex:"quantity",render:(u,r,a)=>{var b;const n=(b=t==null?void 0:t.form)==null?void 0:b.getFieldValue(["items",r.name,"product"]);let l=n==null?void 0:n.unit_type;return l&&l!=="PIECE"&&(l=n.unit_weight_type),e.jsx(i.Item,{name:[r.name,"quantity"],rules:[{required:!0}],getValueFromEvent:g=>Number(g.target.value),children:e.jsx(q,{type:"number",placeholder:s("requisitions.items.placeholders.quantity"),addonAfter:l})})}},"quantity"),e.jsx(p.Column,{title:s("table.actions"),dataIndex:"action",render:(u,r,a)=>e.jsx(i.Item,{children:e.jsx(k,{onClick:()=>d(a)})})})]}),e.jsx(v,{type:"dashed",onClick:()=>m(),style:{width:"100%"},children:s("requisitions.items.buttons.add")})]})})},"2")]})})})};export{A as RequisitionCreate,A as default};
