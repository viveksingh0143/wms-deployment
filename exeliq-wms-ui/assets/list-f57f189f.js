import{_ as q,a as O,b as R,c as _,P as F,d as l,j as e,e as P,G as k,f as I,D as z,H as D,h as N,Y as A,r as B,R as K,i as f,F as n,I as C,B as j,k as y,l as b,m as G,n as d,o as L,S as T,C as H,p as V}from"./index-7ade8dfe.js";const{RangePicker:Y}=V,Q=()=>{const a=q(),{tableProps:t,searchFormProps:i}=O({syncWithLocation:!0,onSearch:s=>{const r=[],{q:S,name:x,parent_id:p,status:W,createdAt:h}=s;return r.push({field:"query",operator:"eq",value:S},{field:"name",operator:"contains",value:x},{field:"parent_id",operator:"eq",value:p},{field:"createdAt",operator:"gte",value:h?h[0].toISOString():void 0},{field:"createdAt",operator:"lte",value:h?h[1].toISOString():void 0}),r}}),{triggerExport:c,isLoading:g}=R({mapData:s=>{var r;return{id:s.id,name:s.name,slug:s.slug,status:s.status,parent:((r=s==null?void 0:s.parent)==null?void 0:r.name)||""}}}),[o,u]=_.useState([]),{mutate:m,isLoading:E}=F(),v=()=>{m({resource:"categories",ids:o.map(String)},{onSuccess:()=>{u([])}})},w={selectedRowKeys:o,onChange:s=>{u(s)},selections:[l.SELECTION_ALL,l.SELECTION_INVERT,l.SELECTION_NONE]};return e.jsxs(P,{headerButtons:({defaultButtons:s})=>e.jsxs(e.Fragment,{children:[s,e.jsx(k,{onClick:c,loading:g})]}),headerProps:{subTitle:e.jsx(I,{children:e.jsx(z,{selectedKeys:o,isLoading:E,onDelete:v})})},children:[e.jsx(M,{formProps:i}),e.jsxs(l,{...t,rowSelection:w,rowKey:"id",pagination:{...t.pagination,showSizeChanger:!0},children:[e.jsx(l.Column,{title:a("table.s_no"),render:(s,r,S)=>{let x=1,p=10;return typeof t.pagination=="object"&&(x=t.pagination.current??1,p=t.pagination.pageSize??10),(x-1)*p+S+1}},"index"),e.jsx(l.Column,{dataIndex:"name",title:a("categories.fields.name"),sorter:!0}),e.jsx(l.Column,{dataIndex:["parent","name"],title:a("categories.fields.parent")}),e.jsx(l.Column,{title:a("table.actions"),dataIndex:"actions",render:(s,r)=>e.jsxs(I,{children:[e.jsx(D,{hideText:!0,size:"small",recordItemId:r.id}),e.jsx(N,{hideText:!0,size:"small",recordItemId:r.id}),e.jsx(A,{hideText:!0,size:"small",recordItemId:r.id})]})})]})]})},M=({formProps:a})=>{const t=q(),[i,c]=B.useState(!0),{selectProps:g,queryResult:{isLoading:o}}=K({resource:"categories",optionLabel:"name",optionValue:"id"}),u=()=>e.jsx(f,{title:e.jsx(n,{layout:"inline",...a,onFinish:a==null?void 0:a.onFinish,children:e.jsx(n.Item,{name:"q",style:{width:"100%"},children:e.jsx(C.Search,{placeholder:t("filter.placeholders.query"),enterButton:t("filter.buttons.search")})})}),extra:e.jsx(j,{type:"text",onClick:()=>c(!i),children:i?e.jsx(y,{}):e.jsx(b,{})}),bodyStyle:{padding:"0px"}}),m=()=>e.jsx(f,{title:t("filter.title"),extra:e.jsx(j,{onClick:()=>c(!i),type:"text",children:i?e.jsx(y,{}):e.jsx(b,{})}),children:e.jsxs(n,{layout:"vertical",...a,children:[e.jsxs(G,{gutter:24,children:[e.jsx(d,{span:6,children:e.jsx(n.Item,{label:t("filter.fields.query"),name:"q",children:e.jsx(C,{placeholder:t("filter.placeholders.query"),prefix:e.jsx(L,{})})})}),e.jsx(d,{span:4,children:e.jsx(n.Item,{label:t("categories.fields.name"),name:"name",children:e.jsx(C,{placeholder:t("categories.placeholders.name"),prefix:e.jsx(L,{})})})}),e.jsx(d,{span:4,children:e.jsx(n.Item,{label:t("categories.fields.status"),name:"status",children:e.jsx(T,{allowClear:!0,options:H,placeholder:t("categories.placeholders.status")})})}),e.jsx(d,{span:4,children:e.jsx(n.Item,{label:"Parent",name:"parent_id",children:e.jsx(T,{...g,placeholder:t("categories.placeholders.parent"),loading:o,allowClear:!0,onSearch:void 0,filterOption:!0,optionFilterProp:"label"})})}),e.jsx(d,{span:6,children:e.jsx(n.Item,{label:t("filter.fields.created_at"),name:"createdAt",children:e.jsx(Y,{})})})]}),e.jsx(n.Item,{children:e.jsxs(I,{children:[e.jsx(j,{htmlType:"submit",type:"primary",children:t("filter.buttons.search")}),e.jsx(j,{htmlType:"reset",type:"default",children:t("filter.buttons.reset")})]})})]})});return i?u():m()};export{Q as CategoryList,Q as default};
