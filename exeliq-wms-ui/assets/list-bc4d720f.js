import{_ as q,M as B,a as D,b as k,c as F,P,d as l,j as e,e as z,G as A,f,D as Y,t as M,aw as K,B as j,H as G,h as H,Y as U,r as V,R as W,i as C,F as o,I as S,k as _,l as I,m as J,n as p,o as $,S as y,C as Q,p as X}from"./index-7ade8dfe.js";import{B as Z}from"./BarcodeOutlined-51529a8b.js";const{RangePicker:ee}=X,le=()=>{const a=q(),r=B(),{tableProps:n,searchFormProps:c}=D({syncWithLocation:!0,onSearch:t=>{const s=[],{q:d,po_category:u,batch_no:h,batch_date:O,customer_id:N,status:R,createdAt:x}=t;return s.push({field:"query",operator:"eq",value:d},{field:"po_category",operator:"eq",value:u},{field:"batch_no",operator:"eq",value:h},{field:"batch_date",operator:"eq",value:O},{field:"status",operator:"eq",value:R},{field:"customer_id",operator:"eq",value:N},{field:"createdAt",operator:"gte",value:x?x[0].toISOString():void 0},{field:"createdAt",operator:"lte",value:x?x[1].toISOString():void 0}),s}}),{triggerExport:b,isLoading:m}=k({mapData:t=>{var s;return{id:t.id,batch_date:t.batch_date,po_category:t.po_category,batch_no:t.batch_no,status:t.status,customer:((s=t==null?void 0:t.customer)==null?void 0:s.name)||""}}}),[i,g]=F.useState([]),{mutate:E,isLoading:v}=P(),L=()=>{E({resource:"batchlabels",ids:i.map(String)},{onSuccess:()=>{g([])}})},T={selectedRowKeys:i,onChange:t=>{g(t)},selections:[l.SELECTION_ALL,l.SELECTION_INVERT,l.SELECTION_NONE]},w=t=>{switch(t){case"NEW BATCH":return"default";case"RUNNING":return"processing";case"COMPLETED":return"success";case"REJECTED":return"error";default:return"error"}};return e.jsxs(z,{headerButtons:({defaultButtons:t})=>e.jsxs(e.Fragment,{children:[t,e.jsx(A,{onClick:b,loading:m})]}),headerProps:{subTitle:e.jsx(f,{children:e.jsx(Y,{selectedKeys:i,isLoading:v,onDelete:L})})},children:[e.jsx(te,{formProps:c}),e.jsxs(l,{...n,rowSelection:T,rowKey:"id",pagination:{...n.pagination,showSizeChanger:!0},children:[e.jsx(l.Column,{title:a("table.s_no"),render:(t,s,d)=>{let u=1,h=10;return typeof n.pagination=="object"&&(u=n.pagination.current??1,h=n.pagination.pageSize??10),(u-1)*h+d+1}},"index"),e.jsx(l.Column,{dataIndex:"batch_date",title:a("batchlabels.fields.batch_date"),sorter:!0,render:(t,s,d)=>M(t).format("YYYY-MM-DD")}),e.jsx(l.Column,{dataIndex:"batch_no",title:a("batchlabels.fields.batch_no"),sorter:!0}),e.jsx(l.Column,{dataIndex:"quantity",title:a("batchlabels.fields.quantity"),sorter:!1,render:(t,s)=>e.jsxs("span",{children:[s.target_quantity,"/",s.package_quantity]})}),e.jsx(l.Column,{dataIndex:"labels_to_print",title:a("batchlabels.fields.labels_tobe_print"),sorter:!1}),e.jsx(l.Column,{dataIndex:"process_status",title:a("batchlabels.fields.process_status"),sorter:!0,render:(t,s)=>e.jsx(K,{status:w(t),text:t})}),e.jsx(l.Column,{dataIndex:["customer","name"],title:a("batchlabels.fields.customer"),sorter:!0}),e.jsx(l.Column,{title:a("table.actions"),dataIndex:"actions",render:(t,s)=>e.jsxs(f,{children:[e.jsx(j,{icon:e.jsx(Z,{}),onClick:()=>r(`show/${s==null?void 0:s.id}/stickers`),size:"small"}),e.jsx(G,{hideText:!0,size:"small",recordItemId:s.id}),e.jsx(H,{hideText:!0,size:"small",recordItemId:s.id}),e.jsx(U,{hideText:!0,size:"small",recordItemId:s.id})]})})]})]})},te=({formProps:a})=>{const r=q(),[n,c]=V.useState(!0),{selectProps:b}=W({resource:"customers",optionLabel:"name",optionValue:"id"}),m=()=>e.jsx(C,{title:e.jsx(o,{layout:"inline",...a,onFinish:a==null?void 0:a.onFinish,children:e.jsx(o.Item,{name:"q",style:{width:"100%"},children:e.jsx(S.Search,{placeholder:r("filter.placeholders.query"),enterButton:r("filter.buttons.search")})})}),extra:e.jsx(j,{type:"text",onClick:()=>c(!n),children:n?e.jsx(_,{}):e.jsx(I,{})}),bodyStyle:{padding:"0px"}}),i=()=>e.jsx(C,{title:r("filter.title"),extra:e.jsx(j,{onClick:()=>c(!n),type:"text",children:n?e.jsx(_,{}):e.jsx(I,{})}),children:e.jsxs(o,{layout:"vertical",...a,children:[e.jsxs(J,{gutter:24,children:[e.jsx(p,{span:6,children:e.jsx(o.Item,{label:r("filter.fields.query"),name:"q",children:e.jsx(S,{placeholder:r("filter.placeholders.query"),prefix:e.jsx($,{})})})}),e.jsx(p,{span:6,children:e.jsx(o.Item,{label:r("batchlabels.fields.status"),name:"status",children:e.jsx(y,{allowClear:!0,options:Q,placeholder:r("batchlabels.placeholders.status")})})}),e.jsx(p,{span:6,children:e.jsx(o.Item,{label:r("batchlabels.fields.customer"),name:"customer_id",children:e.jsx(y,{...b,allowClear:!0,onSearch:void 0,filterOption:!0,optionFilterProp:"label"})})}),e.jsx(p,{span:6,children:e.jsx(o.Item,{label:r("filter.fields.created_at"),name:"createdAt",children:e.jsx(ee,{})})})]}),e.jsx(o.Item,{children:e.jsx(j,{htmlType:"submit",type:"primary",children:r("filter.buttons.search")})})]})});return n?m():i()};export{le as BatchlabelList,le as default};
